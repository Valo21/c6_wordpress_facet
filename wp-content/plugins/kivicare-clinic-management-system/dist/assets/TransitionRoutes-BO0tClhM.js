const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./index-DvM6SIS3.css","./_payment-gateway-model-BiLTufOy.css","./BodyChartEditor-UXLNUaJU.css"])))=>i.map(i=>d[i]);
import{a7 as hI,a8 as ya,r as f,v as He,j as i,a9 as fj,aa as pI,_ as r,L as ht,u as mt,ab as qm,N as gg,l as Xn,i as Yi,k as Li,n as Jn,m as Cr,I as ve,J as ft,z as ze,ac as Le,ad as gI,ae as fI,af as vI,ag as xI,ah as yI,ai as bI,D as ol,B as en,H as ye,aj as Yt,h as hn,o as kI,e as Kn,O as yo,c as Sn,ak as Ga,al as lc,w as Wc,U as to,am as wI,an as yr,ao as br,y as gb,F as hS,E as oc,ap as pS,aq as Nx,G as cc,ar as jI,as as vj,g as Yr,C as NI,at as CI}from"./index-ItgyTBA3.js";var Ma=hI();const zl=ya(Ma),_I=(function(){const e=typeof document<"u"&&document.createElement("link").relList;return e&&e.supports&&e.supports("modulepreload")?"modulepreload":"preload"})(),SI=function(t,e){return new URL(t,e).href},xj={},Ir=function(e,n,s){let a=Promise.resolve();if(n&&n.length>0){let m=function(u){return Promise.all(u.map(h=>Promise.resolve(h).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};const o=document.getElementsByTagName("link"),c=document.querySelector("meta[property=csp-nonce]"),d=c?.nonce||c?.getAttribute("nonce");a=m(n.map(u=>{if(u=SI(u,s),u in xj)return;xj[u]=!0;const h=u.endsWith(".css"),p=h?'[rel="stylesheet"]':"";if(s)for(let v=o.length-1;v>=0;v--){const x=o[v];if(x.href===u&&(!h||x.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${u}"]${p}`))return;const g=document.createElement("link");if(g.rel=h?"stylesheet":_I,h||(g.as="script"),g.crossOrigin="",g.href=u,d&&g.setAttribute("nonce",d),document.head.appendChild(g),h)return new Promise((v,x)=>{g.addEventListener("load",v),g.addEventListener("error",()=>x(new Error(`Unable to preload CSS for ${u}`)))})}))}function l(o){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=o,window.dispatchEvent(c),!c.defaultPrevented)throw o}return a.then(o=>{for(const c of o||[])c.status==="rejected"&&l(c.reason);return e().catch(l)})};var EI=/%(((\d+)\$)|(\(([$_a-zA-Z][$_a-zA-Z0-9]*)\)))?[ +0#-]*\d*(\.(\d+|\*))?(ll|[lhqL])?([cduxXefgsp%])/g;function TI(t,...e){var n=0;return Array.isArray(e[0])&&(e=e[0]),t.replace(EI,function(){var s,a,l,o,c;return s=arguments[3],a=arguments[5],l=arguments[7],o=arguments[9],o==="%"?"%":(l==="*"&&(l=e[n],n++),a===void 0?(s===void 0&&(s=n+1),n++,c=e[s-1]):e[0]&&typeof e[0]=="object"&&e[0].hasOwnProperty(a)&&(c=e[0][a]),o==="f"?c=parseFloat(c)||0:o==="d"&&(c=parseInt(c)||0),l!==void 0&&(o==="f"?c=c.toFixed(l):o==="s"&&(c=c.substr(0,l))),c??"")})}function Pi(t,...e){return TI(t,...e)}var Lf={exports:{}};var yj;function AI(){return yj||(yj=1,(function(t){(function(){var e={}.hasOwnProperty;function n(){for(var l="",o=0;o<arguments.length;o++){var c=arguments[o];c&&(l=a(l,s(c)))}return l}function s(l){if(typeof l=="string"||typeof l=="number")return l;if(typeof l!="object")return"";if(Array.isArray(l))return n.apply(null,l);if(l.toString!==Object.prototype.toString&&!l.toString.toString().includes("[native code]"))return l.toString();var o="";for(var c in l)e.call(l,c)&&l[c]&&(o=a(o,c));return o}function a(l,o){return o?l?l+" "+o:l+o:l}t.exports?(n.default=n,t.exports=n):window.classNames=n})()})(Lf)),Lf.exports}var DI=AI();const vt=ya(DI);function Cx(){return Cx=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)({}).hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},Cx.apply(null,arguments)}function RI(t,e){if(t==null)return{};var n={};for(var s in t)if({}.hasOwnProperty.call(t,s)){if(e.indexOf(s)!==-1)continue;n[s]=t[s]}return n}function bj(t){return"default"+t.charAt(0).toUpperCase()+t.substr(1)}function PI(t){var e=MI(t,"string");return typeof e=="symbol"?e:String(e)}function MI(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var s=n.call(t,e);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function gS(t,e,n){var s=f.useRef(t!==void 0),a=f.useState(e),l=a[0],o=a[1],c=t!==void 0,d=s.current;return s.current=c,!c&&d&&l!==e&&o(e),[c?t:l,f.useCallback(function(m){for(var u=arguments.length,h=new Array(u>1?u-1:0),p=1;p<u;p++)h[p-1]=arguments[p];n&&n.apply(void 0,[m].concat(h)),o(m)},[n])]}function fb(t,e){return Object.keys(e).reduce(function(n,s){var a,l=n,o=l[bj(s)],c=l[s],d=RI(l,[bj(s),s].map(PI)),m=e[s],u=gS(c,o,t[m]),h=u[0],p=u[1];return Cx({},d,(a={},a[s]=h,a[m]=p,a))},t)}const II=["xxl","xl","lg","md","sm","xs"],OI="xs",Hm=f.createContext({prefixes:{},breakpoints:II,minBreakpoint:OI}),{Consumer:ppe,Provider:gpe}=Hm;function Rt(t,e){const{prefixes:n}=f.useContext(Hm);return t||n[e]||e}function fS(){const{breakpoints:t}=f.useContext(Hm);return t}function vS(){const{minBreakpoint:t}=f.useContext(Hm);return t}function vb(){const{dir:t}=f.useContext(Hm);return t==="rtl"}function Kc(t){return t&&t.ownerDocument||document}function FI(t){var e=Kc(t);return e&&e.defaultView||window}function LI(t,e){return FI(t).getComputedStyle(t,e)}var $I=/([A-Z])/g;function BI(t){return t.replace($I,"-$1").toLowerCase()}var qI=/^ms-/;function Ru(t){return BI(t).replace(qI,"-ms-")}var HI=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;function zI(t){return!!(t&&HI.test(t))}function kr(t,e){var n="",s="";if(typeof e=="string")return t.style.getPropertyValue(Ru(e))||LI(t).getPropertyValue(Ru(e));Object.keys(e).forEach(function(a){var l=e[a];!l&&l!==0?t.style.removeProperty(Ru(a)):zI(a)?s+=a+"("+l+") ":n+=Ru(a)+": "+l+";"}),s&&(n+="transform: "+s+";"),t.style.cssText+=";"+n}function xS(t,e){if(t==null)return{};var n={};for(var s in t)if({}.hasOwnProperty.call(t,s)){if(e.indexOf(s)!==-1)continue;n[s]=t[s]}return n}function _x(t,e){return _x=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},_x(t,e)}function xb(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,_x(t,e)}var $f={exports:{}},Bf,kj;function VI(){if(kj)return Bf;kj=1;var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Bf=t,Bf}var qf,wj;function UI(){if(wj)return qf;wj=1;var t=VI();function e(){}function n(){}return n.resetWarningCache=e,qf=function(){function s(o,c,d,m,u,h){if(h!==t){var p=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw p.name="Invariant Violation",p}}s.isRequired=s;function a(){return s}var l={array:s,bigint:s,bool:s,func:s,number:s,object:s,string:s,symbol:s,any:s,arrayOf:a,element:s,elementType:s,instanceOf:a,node:s,objectOf:a,oneOf:a,oneOfType:a,shape:a,exact:a,checkPropTypes:n,resetWarningCache:e};return l.PropTypes=l,l},qf}var jj;function WI(){return jj||(jj=1,$f.exports=UI()()),$f.exports}var KI=WI();const Ae=ya(KI),Nj={disabled:!1},yb=He.createContext(null);var yS=function(e){return e.scrollTop},Ld="unmounted",Wr="exited",Mi="entering",Ns="entered",no="exiting",Ya=(function(t){xb(e,t);function e(s,a){var l;l=t.call(this,s,a)||this;var o=a,c=o&&!o.isMounting?s.enter:s.appear,d;return l.appearStatus=null,s.in?c?(d=Wr,l.appearStatus=Mi):d=Ns:s.unmountOnExit||s.mountOnEnter?d=Ld:d=Wr,l.state={status:d},l.nextCallback=null,l}e.getDerivedStateFromProps=function(a,l){var o=a.in;return o&&l.status===Ld?{status:Wr}:null};var n=e.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(a){var l=null;if(a!==this.props){var o=this.state.status;this.props.in?o!==Mi&&o!==Ns&&(l=Mi):(o===Mi||o===Ns)&&(l=no)}this.updateStatus(!1,l)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var a=this.props.timeout,l,o,c;return l=o=c=a,a!=null&&typeof a!="number"&&(l=a.exit,o=a.enter,c=a.appear!==void 0?a.appear:o),{exit:l,enter:o,appear:c}},n.updateStatus=function(a,l){if(a===void 0&&(a=!1),l!==null)if(this.cancelNextCallback(),l===Mi){if(this.props.unmountOnExit||this.props.mountOnEnter){var o=this.props.nodeRef?this.props.nodeRef.current:zl.findDOMNode(this);o&&yS(o)}this.performEnter(a)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Wr&&this.setState({status:Ld})},n.performEnter=function(a){var l=this,o=this.props.enter,c=this.context?this.context.isMounting:a,d=this.props.nodeRef?[c]:[zl.findDOMNode(this),c],m=d[0],u=d[1],h=this.getTimeouts(),p=c?h.appear:h.enter;if(!a&&!o||Nj.disabled){this.safeSetState({status:Ns},function(){l.props.onEntered(m)});return}this.props.onEnter(m,u),this.safeSetState({status:Mi},function(){l.props.onEntering(m,u),l.onTransitionEnd(p,function(){l.safeSetState({status:Ns},function(){l.props.onEntered(m,u)})})})},n.performExit=function(){var a=this,l=this.props.exit,o=this.getTimeouts(),c=this.props.nodeRef?void 0:zl.findDOMNode(this);if(!l||Nj.disabled){this.safeSetState({status:Wr},function(){a.props.onExited(c)});return}this.props.onExit(c),this.safeSetState({status:no},function(){a.props.onExiting(c),a.onTransitionEnd(o.exit,function(){a.safeSetState({status:Wr},function(){a.props.onExited(c)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(a,l){l=this.setNextCallback(l),this.setState(a,l)},n.setNextCallback=function(a){var l=this,o=!0;return this.nextCallback=function(c){o&&(o=!1,l.nextCallback=null,a(c))},this.nextCallback.cancel=function(){o=!1},this.nextCallback},n.onTransitionEnd=function(a,l){this.setNextCallback(l);var o=this.props.nodeRef?this.props.nodeRef.current:zl.findDOMNode(this),c=a==null&&!this.props.addEndListener;if(!o||c){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var d=this.props.nodeRef?[this.nextCallback]:[o,this.nextCallback],m=d[0],u=d[1];this.props.addEndListener(m,u)}a!=null&&setTimeout(this.nextCallback,a)},n.render=function(){var a=this.state.status;if(a===Ld)return null;var l=this.props,o=l.children;l.in,l.mountOnEnter,l.unmountOnExit,l.appear,l.enter,l.exit,l.timeout,l.addEndListener,l.onEnter,l.onEntering,l.onEntered,l.onExit,l.onExiting,l.onExited,l.nodeRef;var c=xS(l,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return He.createElement(yb.Provider,{value:null},typeof o=="function"?o(a,c):He.cloneElement(He.Children.only(o),c))},e})(He.Component);Ya.contextType=yb;Ya.propTypes={};function Vo(){}Ya.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Vo,onEntering:Vo,onEntered:Vo,onExit:Vo,onExiting:Vo,onExited:Vo};Ya.UNMOUNTED=Ld;Ya.EXITED=Wr;Ya.ENTERING=Mi;Ya.ENTERED=Ns;Ya.EXITING=no;function bS(t){return t.code==="Escape"||t.keyCode===27}function GI(){const t=f.version.split(".");return{major:+t[0],minor:+t[1],patch:+t[2]}}function bo(t){if(!t||typeof t=="function")return null;const{major:e}=GI();return e>=19?t.props.ref:t.ref}const Gc=!!(typeof window<"u"&&window.document&&window.document.createElement);var Sx=!1,Ex=!1;try{var Hf={get passive(){return Sx=!0},get once(){return Ex=Sx=!0}};Gc&&(window.addEventListener("test",Hf,Hf),window.removeEventListener("test",Hf,!0))}catch{}function kS(t,e,n,s){if(s&&typeof s!="boolean"&&!Ex){var a=s.once,l=s.capture,o=n;!Ex&&a&&(o=n.__once||function c(d){this.removeEventListener(e,c,l),n.call(this,d)},n.__once=o),t.addEventListener(e,o,Sx?s:l)}t.addEventListener(e,n,s)}function Tx(t,e,n,s){var a=s&&typeof s!="boolean"?s.capture:s;t.removeEventListener(e,n,a),n.__once&&t.removeEventListener(e,n.__once,a)}function ur(t,e,n,s){return kS(t,e,n,s),function(){Tx(t,e,n,s)}}function YI(t,e,n,s){if(s===void 0&&(s=!0),t){var a=document.createEvent("HTMLEvents");a.initEvent(e,n,s),t.dispatchEvent(a)}}function QI(t){var e=kr(t,"transitionDuration")||"",n=e.indexOf("ms")===-1?1e3:1;return parseFloat(e)*n}function ZI(t,e,n){n===void 0&&(n=5);var s=!1,a=setTimeout(function(){s||YI(t,"transitionend",!0)},e+n),l=ur(t,"transitionend",function(){s=!0},{once:!0});return function(){clearTimeout(a),l()}}function wS(t,e,n,s){n==null&&(n=QI(t)||0);var a=ZI(t,n,s),l=ur(t,"transitionend",e);return function(){a(),l()}}function Cj(t,e){const n=kr(t,e)||"",s=n.indexOf("ms")===-1?1e3:1;return parseFloat(n)*s}function bb(t,e){const n=Cj(t,"transitionDuration"),s=Cj(t,"transitionDelay"),a=wS(t,l=>{l.target===t&&(a(),e(l))},n+s)}function bd(...t){return t.filter(e=>e!=null).reduce((e,n)=>{if(typeof n!="function")throw new Error("Invalid Argument Type, must only provide functions, undefined, or null.");return e===null?n:function(...a){e.apply(this,a),n.apply(this,a)}},null)}function jS(t){t.offsetHeight}const _j=t=>!t||typeof t=="function"?t:e=>{t.current=e};function XI(t,e){const n=_j(t),s=_j(e);return a=>{n&&n(a),s&&s(a)}}function fg(t,e){return f.useMemo(()=>XI(t,e),[t,e])}function Jh(t){return t&&"setState"in t?zl.findDOMNode(t):t??null}const vg=He.forwardRef(({onEnter:t,onEntering:e,onEntered:n,onExit:s,onExiting:a,onExited:l,addEndListener:o,children:c,childRef:d,...m},u)=>{const h=f.useRef(null),p=fg(h,d),g=D=>{p(Jh(D))},v=D=>_=>{D&&h.current&&D(h.current,_)},x=f.useCallback(v(t),[t]),y=f.useCallback(v(e),[e]),b=f.useCallback(v(n),[n]),k=f.useCallback(v(s),[s]),w=f.useCallback(v(a),[a]),T=f.useCallback(v(l),[l]),j=f.useCallback(v(o),[o]);return i.jsx(Ya,{ref:u,...m,onEnter:x,onEntered:b,onEntering:y,onExit:k,onExited:T,onExiting:w,addEndListener:j,nodeRef:h,children:typeof c=="function"?(D,_)=>c(D,{..._,ref:g}):He.cloneElement(c,{ref:g})})});vg.displayName="TransitionWrapper";const JI={height:["marginTop","marginBottom"],width:["marginLeft","marginRight"]};function eO(t,e){const n=`offset${t[0].toUpperCase()}${t.slice(1)}`,s=e[n],a=JI[t];return s+parseInt(kr(e,a[0]),10)+parseInt(kr(e,a[1]),10)}const tO={[Wr]:"collapse",[no]:"collapsing",[Mi]:"collapsing",[Ns]:"collapse show"},NS=He.forwardRef(({onEnter:t,onEntering:e,onEntered:n,onExit:s,onExiting:a,className:l,children:o,dimension:c="height",in:d=!1,timeout:m=300,mountOnEnter:u=!1,unmountOnExit:h=!1,appear:p=!1,getDimensionValue:g=eO,...v},x)=>{const y=typeof c=="function"?c():c,b=f.useMemo(()=>bd(D=>{D.style[y]="0"},t),[y,t]),k=f.useMemo(()=>bd(D=>{const _=`scroll${y[0].toUpperCase()}${y.slice(1)}`;D.style[y]=`${D[_]}px`},e),[y,e]),w=f.useMemo(()=>bd(D=>{D.style[y]=null},n),[y,n]),T=f.useMemo(()=>bd(D=>{D.style[y]=`${g(y,D)}px`,jS(D)},s),[s,g,y]),j=f.useMemo(()=>bd(D=>{D.style[y]=null},a),[y,a]);return i.jsx(vg,{ref:x,addEndListener:bb,...v,"aria-expanded":v.role?d:null,onEnter:b,onEntering:k,onEntered:w,onExit:T,onExiting:j,childRef:bo(o),in:d,timeout:m,mountOnEnter:u,unmountOnExit:h,appear:p,children:(D,_)=>He.cloneElement(o,{..._,className:vt(l,o.props.className,tO[D],y==="width"&&"collapse-horizontal")})})});NS.displayName="Collapse";function nO(t){const e=f.useRef(t);return f.useEffect(()=>{e.current=t},[t]),e}function _c(t){const e=nO(t);return f.useCallback(function(...n){return e.current&&e.current(...n)},[e])}const zm=(t=>f.forwardRef((e,n)=>i.jsx("div",{...e,ref:n,className:vt(e.className,t)}))),CS=zm("h4");CS.displayName="DivStyledAsH4";const _S=f.forwardRef(({className:t,bsPrefix:e,as:n=CS,...s},a)=>(e=Rt(e,"alert-heading"),i.jsx(n,{ref:a,className:vt(t,e),...s})));_S.displayName="AlertHeading";function Sj(){return f.useState(null)}function iO(t){const e=f.useRef(t);return f.useEffect(()=>{e.current=t},[t]),e}function Hs(t){const e=iO(t);return f.useCallback(function(...n){return e.current&&e.current(...n)},[e])}function SS(){const t=f.useRef(!0),e=f.useRef(()=>t.current);return f.useEffect(()=>(t.current=!0,()=>{t.current=!1}),[]),e.current}function sO(t){const e=f.useRef(null);return f.useEffect(()=>{e.current=t}),e.current}const aO=typeof global<"u"&&global.navigator&&global.navigator.product==="ReactNative",rO=typeof document<"u",Ej=rO||aO?f.useLayoutEffect:f.useEffect,lO=["as","disabled"];function oO(t,e){if(t==null)return{};var n={};for(var s in t)if({}.hasOwnProperty.call(t,s)){if(e.indexOf(s)>=0)continue;n[s]=t[s]}return n}function cO(t){return!t||t.trim()==="#"}function kb({tagName:t,disabled:e,href:n,target:s,rel:a,role:l,onClick:o,tabIndex:c=0,type:d}){t||(n!=null||s!=null||a!=null?t="a":t="button");const m={tagName:t};if(t==="button")return[{type:d||"button",disabled:e},m];const u=p=>{if((e||t==="a"&&cO(n))&&p.preventDefault(),e){p.stopPropagation();return}o?.(p)},h=p=>{p.key===" "&&(p.preventDefault(),u(p))};return t==="a"&&(n||(n="#"),e&&(n=void 0)),[{role:l??"button",disabled:void 0,tabIndex:e?void 0:c,href:n,target:t==="a"?s:void 0,"aria-disabled":e||void 0,rel:t==="a"?a:void 0,onClick:u,onKeyDown:h},m]}const ES=f.forwardRef((t,e)=>{let{as:n,disabled:s}=t,a=oO(t,lO);const[l,{tagName:o}]=kb(Object.assign({tagName:n,disabled:s},a));return i.jsx(o,Object.assign({},a,l,{ref:e}))});ES.displayName="Button";const dO=["onKeyDown"];function mO(t,e){if(t==null)return{};var n={};for(var s in t)if({}.hasOwnProperty.call(t,s)){if(e.indexOf(s)>=0)continue;n[s]=t[s]}return n}function uO(t){return!t||t.trim()==="#"}const xg=f.forwardRef((t,e)=>{let{onKeyDown:n}=t,s=mO(t,dO);const[a]=kb(Object.assign({tagName:"a"},s)),l=Hs(o=>{a.onKeyDown(o),n?.(o)});return uO(s.href)||s.role==="button"?i.jsx("a",Object.assign({ref:e},s,a,{onKeyDown:l})):i.jsx("a",Object.assign({ref:e},s,{onKeyDown:n}))});xg.displayName="Anchor";const TS=f.forwardRef(({className:t,bsPrefix:e,as:n=xg,...s},a)=>(e=Rt(e,"alert-link"),i.jsx(n,{ref:a,className:vt(t,e),...s})));TS.displayName="AlertLink";const hO={[Mi]:"show",[Ns]:"show"},Ba=f.forwardRef(({className:t,children:e,transitionClasses:n={},onEnter:s,...a},l)=>{const o={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1,...a},c=f.useCallback((d,m)=>{jS(d),s?.(d,m)},[s]);return i.jsx(vg,{ref:l,addEndListener:bb,...o,onEnter:c,childRef:bo(e),children:(d,m)=>f.cloneElement(e,{...m,className:vt("fade",t,e.props.className,hO[d],n[d])})})});Ba.displayName="Fade";const pO={"aria-label":Ae.string,onClick:Ae.func,variant:Ae.oneOf(["white"])},yg=f.forwardRef(({className:t,variant:e,"aria-label":n="Close",...s},a)=>i.jsx("button",{ref:a,type:"button",className:vt("btn-close",e&&`btn-close-${e}`,t),"aria-label":n,...s}));yg.displayName="CloseButton";yg.propTypes=pO;const AS=f.forwardRef((t,e)=>{const{bsPrefix:n,show:s=!0,closeLabel:a="Close alert",closeVariant:l,className:o,children:c,variant:d="primary",onClose:m,dismissible:u,transition:h=Ba,...p}=fb(t,{show:"onClose"}),g=Rt(n,"alert"),v=_c(b=>{m&&m(!1,b)}),x=h===!0?Ba:h,y=i.jsxs("div",{role:"alert",...x?void 0:p,ref:e,className:vt(o,g,d&&`${g}-${d}`,u&&`${g}-dismissible`),children:[u&&i.jsx(yg,{onClick:v,"aria-label":a,variant:l}),c]});return x?i.jsx(x,{unmountOnExit:!0,...p,ref:void 0,in:s,children:y}):s?y:null});AS.displayName="Alert";const gO=Object.assign(AS,{Link:TS,Heading:_S}),ca=f.forwardRef(({bsPrefix:t,bg:e="primary",pill:n=!1,text:s,className:a,as:l="span",...o},c)=>{const d=Rt(t,"badge");return i.jsx(l,{ref:c,...o,className:vt(a,d,n&&"rounded-pill",s&&`text-${s}`,e&&`bg-${e}`)})});ca.displayName="Badge";const Xt=f.forwardRef(({as:t,bsPrefix:e,variant:n="primary",size:s,active:a=!1,disabled:l=!1,className:o,...c},d)=>{const m=Rt(e,"btn"),[u,{tagName:h}]=kb({tagName:t,disabled:l,...c}),p=h;return i.jsx(p,{...u,...c,ref:d,disabled:l,className:vt(o,m,a&&"active",n&&`${m}-${n}`,s&&`${m}-${s}`,c.href&&l&&"disabled")})});Xt.displayName="Button";const qa=f.forwardRef(({className:t,bsPrefix:e,as:n="div",...s},a)=>(e=Rt(e,"card-body"),i.jsx(n,{ref:a,className:vt(t,e),...s})));qa.displayName="CardBody";const DS=f.forwardRef(({className:t,bsPrefix:e,as:n="div",...s},a)=>(e=Rt(e,"card-footer"),i.jsx(n,{ref:a,className:vt(t,e),...s})));DS.displayName="CardFooter";const wb=f.createContext(null);wb.displayName="CardHeaderContext";const RS=f.forwardRef(({bsPrefix:t,className:e,as:n="div",...s},a)=>{const l=Rt(t,"card-header"),o=f.useMemo(()=>({cardHeaderBsPrefix:l}),[l]);return i.jsx(wb.Provider,{value:o,children:i.jsx(n,{ref:a,...s,className:vt(e,l)})})});RS.displayName="CardHeader";const PS=f.forwardRef(({bsPrefix:t,className:e,variant:n,as:s="img",...a},l)=>{const o=Rt(t,"card-img");return i.jsx(s,{ref:l,className:vt(n?`${o}-${n}`:o,e),...a})});PS.displayName="CardImg";const MS=f.forwardRef(({className:t,bsPrefix:e,as:n="div",...s},a)=>(e=Rt(e,"card-img-overlay"),i.jsx(n,{ref:a,className:vt(t,e),...s})));MS.displayName="CardImgOverlay";const IS=f.forwardRef(({className:t,bsPrefix:e,as:n="a",...s},a)=>(e=Rt(e,"card-link"),i.jsx(n,{ref:a,className:vt(t,e),...s})));IS.displayName="CardLink";const fO=zm("h6"),OS=f.forwardRef(({className:t,bsPrefix:e,as:n=fO,...s},a)=>(e=Rt(e,"card-subtitle"),i.jsx(n,{ref:a,className:vt(t,e),...s})));OS.displayName="CardSubtitle";const FS=f.forwardRef(({className:t,bsPrefix:e,as:n="p",...s},a)=>(e=Rt(e,"card-text"),i.jsx(n,{ref:a,className:vt(t,e),...s})));FS.displayName="CardText";const vO=zm("h5"),LS=f.forwardRef(({className:t,bsPrefix:e,as:n=vO,...s},a)=>(e=Rt(e,"card-title"),i.jsx(n,{ref:a,className:vt(t,e),...s})));LS.displayName="CardTitle";const $S=f.forwardRef(({bsPrefix:t,className:e,bg:n,text:s,border:a,body:l=!1,children:o,as:c="div",...d},m)=>{const u=Rt(t,"card");return i.jsx(c,{ref:m,...d,className:vt(e,u,n&&`bg-${n}`,s&&`text-${s}`,a&&`border-${a}`),children:l?i.jsx(qa,{children:o}):o})});$S.displayName="Card";const _t=Object.assign($S,{Img:PS,Title:LS,Subtitle:OS,Body:qa,Link:IS,Text:FS,Header:RS,Footer:DS,ImgOverlay:MS});function xO(){const t=f.useRef(!0),e=f.useRef(()=>t.current);return f.useEffect(()=>(t.current=!0,()=>{t.current=!1}),[]),e.current}function yO(t){const e=f.useRef(t);return e.current=t,e}function BS(t){const e=yO(t);f.useEffect(()=>()=>e.current(),[])}const Ax=2**31-1;function qS(t,e,n){const s=n-Date.now();t.current=s<=Ax?setTimeout(e,s):setTimeout(()=>qS(t,e,n),Ax)}function bO(){const t=xO(),e=f.useRef();return BS(()=>clearTimeout(e.current)),f.useMemo(()=>{const n=()=>clearTimeout(e.current);function s(a,l=0){t()&&(n(),l<=Ax?e.current=setTimeout(a,l):qS(e,a,Date.now()+l))}return{set:s,clear:n,handleRef:e}},[])}function Tj(t,e){let n=0;return f.Children.map(t,s=>f.isValidElement(s)?e(s,n++):s)}function kO(t,e){let n=0;f.Children.forEach(t,s=>{f.isValidElement(s)&&e(s,n++)})}function wO(t,e){return f.Children.toArray(t).some(n=>f.isValidElement(n)&&n.type===e)}function jO({as:t,bsPrefix:e,className:n,...s}){e=Rt(e,"col");const a=fS(),l=vS(),o=[],c=[];return a.forEach(d=>{const m=s[d];delete s[d];let u,h,p;typeof m=="object"&&m!=null?{span:u,offset:h,order:p}=m:u=m;const g=d!==l?`-${d}`:"";u&&o.push(u===!0?`${e}${g}`:`${e}${g}-${u}`),p!=null&&c.push(`order${g}-${p}`),h!=null&&c.push(`offset${g}-${h}`)}),[{...s,className:vt(n,...o,...c)},{as:t,bsPrefix:e,spans:o}]}const Et=f.forwardRef((t,e)=>{const[{className:n,...s},{as:a="div",bsPrefix:l,spans:o}]=jO(t);return i.jsx(a,{...s,ref:e,className:vt(n,!o.length&&l)})});Et.displayName="Col";const ko=f.forwardRef(({bsPrefix:t,fluid:e=!1,as:n="div",className:s,...a},l)=>{const o=Rt(t,"container"),c=typeof e=="string"?`-${e}`:"-fluid";return i.jsx(n,{ref:l,...a,className:vt(s,e?`${o}${c}`:o)})});ko.displayName="Container";var NO=Function.prototype.bind.call(Function.prototype.call,[].slice);function Fl(t,e){return NO(t.querySelectorAll(e))}function CO(t,e,n){const s=f.useRef(t!==void 0),[a,l]=f.useState(e),o=t!==void 0,c=s.current;return s.current=o,!o&&c&&a!==e&&l(e),[o?t:a,f.useCallback((...d)=>{const[m,...u]=d;let h=n?.(m,...u);return l(m),h},[n])]}function _O(){const[,t]=f.useReducer(e=>e+1,0);return t}var Aj=Object.prototype.hasOwnProperty;function Dj(t,e,n){for(n of t.keys())if(Gd(n,e))return n}function Gd(t,e){var n,s,a;if(t===e)return!0;if(t&&e&&(n=t.constructor)===e.constructor){if(n===Date)return t.getTime()===e.getTime();if(n===RegExp)return t.toString()===e.toString();if(n===Array){if((s=t.length)===e.length)for(;s--&&Gd(t[s],e[s]););return s===-1}if(n===Set){if(t.size!==e.size)return!1;for(s of t)if(a=s,a&&typeof a=="object"&&(a=Dj(e,a),!a)||!e.has(a))return!1;return!0}if(n===Map){if(t.size!==e.size)return!1;for(s of t)if(a=s[0],a&&typeof a=="object"&&(a=Dj(e,a),!a)||!Gd(s[1],e.get(a)))return!1;return!0}if(n===ArrayBuffer)t=new Uint8Array(t),e=new Uint8Array(e);else if(n===DataView){if((s=t.byteLength)===e.byteLength)for(;s--&&t.getInt8(s)===e.getInt8(s););return s===-1}if(ArrayBuffer.isView(t)){if((s=t.byteLength)===e.byteLength)for(;s--&&t[s]===e[s];);return s===-1}if(!n||typeof t=="object"){s=0;for(n in t)if(Aj.call(t,n)&&++s&&!Aj.call(e,n)||!(n in e)||!Gd(t[n],e[n]))return!1;return Object.keys(e).length===s}}return t!==t&&e!==e}function SO(t){const e=SS();return[t[0],f.useCallback(n=>{if(e())return t[1](n)},[e,t[1]])]}var cs="top",Qs="bottom",Zs="right",ds="left",jb="auto",Vm=[cs,Qs,Zs,ds],Sc="start",hm="end",EO="clippingParents",HS="viewport",kd="popper",TO="reference",Rj=Vm.reduce(function(t,e){return t.concat([e+"-"+Sc,e+"-"+hm])},[]),zS=[].concat(Vm,[jb]).reduce(function(t,e){return t.concat([e,e+"-"+Sc,e+"-"+hm])},[]),AO="beforeRead",DO="read",RO="afterRead",PO="beforeMain",MO="main",IO="afterMain",OO="beforeWrite",FO="write",LO="afterWrite",$O=[AO,DO,RO,PO,MO,IO,OO,FO,LO];function Ia(t){return t.split("-")[0]}function Es(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function io(t){var e=Es(t).Element;return t instanceof e||t instanceof Element}function Oa(t){var e=Es(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function Nb(t){if(typeof ShadowRoot>"u")return!1;var e=Es(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}var Gl=Math.max,ep=Math.min,Ec=Math.round;function Dx(){var t=navigator.userAgentData;return t!=null&&t.brands&&Array.isArray(t.brands)?t.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function VS(){return!/^((?!chrome|android).)*safari/i.test(Dx())}function Tc(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!1);var s=t.getBoundingClientRect(),a=1,l=1;e&&Oa(t)&&(a=t.offsetWidth>0&&Ec(s.width)/t.offsetWidth||1,l=t.offsetHeight>0&&Ec(s.height)/t.offsetHeight||1);var o=io(t)?Es(t):window,c=o.visualViewport,d=!VS()&&n,m=(s.left+(d&&c?c.offsetLeft:0))/a,u=(s.top+(d&&c?c.offsetTop:0))/l,h=s.width/a,p=s.height/l;return{width:h,height:p,top:u,right:m+h,bottom:u+p,left:m,x:m,y:u}}function Cb(t){var e=Tc(t),n=t.offsetWidth,s=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-s)<=1&&(s=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:s}}function US(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&Nb(n)){var s=e;do{if(s&&t.isSameNode(s))return!0;s=s.parentNode||s.host}while(s)}return!1}function pl(t){return t?(t.nodeName||"").toLowerCase():null}function _r(t){return Es(t).getComputedStyle(t)}function BO(t){return["table","td","th"].indexOf(pl(t))>=0}function kl(t){return((io(t)?t.ownerDocument:t.document)||window.document).documentElement}function bg(t){return pl(t)==="html"?t:t.assignedSlot||t.parentNode||(Nb(t)?t.host:null)||kl(t)}function Pj(t){return!Oa(t)||_r(t).position==="fixed"?null:t.offsetParent}function qO(t){var e=/firefox/i.test(Dx()),n=/Trident/i.test(Dx());if(n&&Oa(t)){var s=_r(t);if(s.position==="fixed")return null}var a=bg(t);for(Nb(a)&&(a=a.host);Oa(a)&&["html","body"].indexOf(pl(a))<0;){var l=_r(a);if(l.transform!=="none"||l.perspective!=="none"||l.contain==="paint"||["transform","perspective"].indexOf(l.willChange)!==-1||e&&l.willChange==="filter"||e&&l.filter&&l.filter!=="none")return a;a=a.parentNode}return null}function Um(t){for(var e=Es(t),n=Pj(t);n&&BO(n)&&_r(n).position==="static";)n=Pj(n);return n&&(pl(n)==="html"||pl(n)==="body"&&_r(n).position==="static")?e:n||qO(t)||e}function _b(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function Yd(t,e,n){return Gl(t,ep(e,n))}function HO(t,e,n){var s=Yd(t,e,n);return s>n?n:s}function WS(){return{top:0,right:0,bottom:0,left:0}}function KS(t){return Object.assign({},WS(),t)}function GS(t,e){return e.reduce(function(n,s){return n[s]=t,n},{})}var zO=function(e,n){return e=typeof e=="function"?e(Object.assign({},n.rects,{placement:n.placement})):e,KS(typeof e!="number"?e:GS(e,Vm))};function VO(t){var e,n=t.state,s=t.name,a=t.options,l=n.elements.arrow,o=n.modifiersData.popperOffsets,c=Ia(n.placement),d=_b(c),m=[ds,Zs].indexOf(c)>=0,u=m?"height":"width";if(!(!l||!o)){var h=zO(a.padding,n),p=Cb(l),g=d==="y"?cs:ds,v=d==="y"?Qs:Zs,x=n.rects.reference[u]+n.rects.reference[d]-o[d]-n.rects.popper[u],y=o[d]-n.rects.reference[d],b=Um(l),k=b?d==="y"?b.clientHeight||0:b.clientWidth||0:0,w=x/2-y/2,T=h[g],j=k-p[u]-h[v],D=k/2-p[u]/2+w,_=Yd(T,D,j),N=d;n.modifiersData[s]=(e={},e[N]=_,e.centerOffset=_-D,e)}}function UO(t){var e=t.state,n=t.options,s=n.element,a=s===void 0?"[data-popper-arrow]":s;a!=null&&(typeof a=="string"&&(a=e.elements.popper.querySelector(a),!a)||US(e.elements.popper,a)&&(e.elements.arrow=a))}const WO={name:"arrow",enabled:!0,phase:"main",fn:VO,effect:UO,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Ac(t){return t.split("-")[1]}var KO={top:"auto",right:"auto",bottom:"auto",left:"auto"};function GO(t,e){var n=t.x,s=t.y,a=e.devicePixelRatio||1;return{x:Ec(n*a)/a||0,y:Ec(s*a)/a||0}}function Mj(t){var e,n=t.popper,s=t.popperRect,a=t.placement,l=t.variation,o=t.offsets,c=t.position,d=t.gpuAcceleration,m=t.adaptive,u=t.roundOffsets,h=t.isFixed,p=o.x,g=p===void 0?0:p,v=o.y,x=v===void 0?0:v,y=typeof u=="function"?u({x:g,y:x}):{x:g,y:x};g=y.x,x=y.y;var b=o.hasOwnProperty("x"),k=o.hasOwnProperty("y"),w=ds,T=cs,j=window;if(m){var D=Um(n),_="clientHeight",N="clientWidth";if(D===Es(n)&&(D=kl(n),_r(D).position!=="static"&&c==="absolute"&&(_="scrollHeight",N="scrollWidth")),D=D,a===cs||(a===ds||a===Zs)&&l===hm){T=Qs;var A=h&&D===j&&j.visualViewport?j.visualViewport.height:D[_];x-=A-s.height,x*=d?1:-1}if(a===ds||(a===cs||a===Qs)&&l===hm){w=Zs;var P=h&&D===j&&j.visualViewport?j.visualViewport.width:D[N];g-=P-s.width,g*=d?1:-1}}var E=Object.assign({position:c},m&&KO),I=u===!0?GO({x:g,y:x},Es(n)):{x:g,y:x};if(g=I.x,x=I.y,d){var M;return Object.assign({},E,(M={},M[T]=k?"0":"",M[w]=b?"0":"",M.transform=(j.devicePixelRatio||1)<=1?"translate("+g+"px, "+x+"px)":"translate3d("+g+"px, "+x+"px, 0)",M))}return Object.assign({},E,(e={},e[T]=k?x+"px":"",e[w]=b?g+"px":"",e.transform="",e))}function YO(t){var e=t.state,n=t.options,s=n.gpuAcceleration,a=s===void 0?!0:s,l=n.adaptive,o=l===void 0?!0:l,c=n.roundOffsets,d=c===void 0?!0:c,m={placement:Ia(e.placement),variation:Ac(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:a,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,Mj(Object.assign({},m,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:o,roundOffsets:d})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,Mj(Object.assign({},m,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:d})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const QO={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:YO,data:{}};var Pu={passive:!0};function ZO(t){var e=t.state,n=t.instance,s=t.options,a=s.scroll,l=a===void 0?!0:a,o=s.resize,c=o===void 0?!0:o,d=Es(e.elements.popper),m=[].concat(e.scrollParents.reference,e.scrollParents.popper);return l&&m.forEach(function(u){u.addEventListener("scroll",n.update,Pu)}),c&&d.addEventListener("resize",n.update,Pu),function(){l&&m.forEach(function(u){u.removeEventListener("scroll",n.update,Pu)}),c&&d.removeEventListener("resize",n.update,Pu)}}const XO={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:ZO,data:{}};var JO={left:"right",right:"left",bottom:"top",top:"bottom"};function Th(t){return t.replace(/left|right|bottom|top/g,function(e){return JO[e]})}var e3={start:"end",end:"start"};function Ij(t){return t.replace(/start|end/g,function(e){return e3[e]})}function Sb(t){var e=Es(t),n=e.pageXOffset,s=e.pageYOffset;return{scrollLeft:n,scrollTop:s}}function Eb(t){return Tc(kl(t)).left+Sb(t).scrollLeft}function t3(t,e){var n=Es(t),s=kl(t),a=n.visualViewport,l=s.clientWidth,o=s.clientHeight,c=0,d=0;if(a){l=a.width,o=a.height;var m=VS();(m||!m&&e==="fixed")&&(c=a.offsetLeft,d=a.offsetTop)}return{width:l,height:o,x:c+Eb(t),y:d}}function n3(t){var e,n=kl(t),s=Sb(t),a=(e=t.ownerDocument)==null?void 0:e.body,l=Gl(n.scrollWidth,n.clientWidth,a?a.scrollWidth:0,a?a.clientWidth:0),o=Gl(n.scrollHeight,n.clientHeight,a?a.scrollHeight:0,a?a.clientHeight:0),c=-s.scrollLeft+Eb(t),d=-s.scrollTop;return _r(a||n).direction==="rtl"&&(c+=Gl(n.clientWidth,a?a.clientWidth:0)-l),{width:l,height:o,x:c,y:d}}function Tb(t){var e=_r(t),n=e.overflow,s=e.overflowX,a=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+a+s)}function YS(t){return["html","body","#document"].indexOf(pl(t))>=0?t.ownerDocument.body:Oa(t)&&Tb(t)?t:YS(bg(t))}function Qd(t,e){var n;e===void 0&&(e=[]);var s=YS(t),a=s===((n=t.ownerDocument)==null?void 0:n.body),l=Es(s),o=a?[l].concat(l.visualViewport||[],Tb(s)?s:[]):s,c=e.concat(o);return a?c:c.concat(Qd(bg(o)))}function Rx(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function i3(t,e){var n=Tc(t,!1,e==="fixed");return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}function Oj(t,e,n){return e===HS?Rx(t3(t,n)):io(e)?i3(e,n):Rx(n3(kl(t)))}function s3(t){var e=Qd(bg(t)),n=["absolute","fixed"].indexOf(_r(t).position)>=0,s=n&&Oa(t)?Um(t):t;return io(s)?e.filter(function(a){return io(a)&&US(a,s)&&pl(a)!=="body"}):[]}function a3(t,e,n,s){var a=e==="clippingParents"?s3(t):[].concat(e),l=[].concat(a,[n]),o=l[0],c=l.reduce(function(d,m){var u=Oj(t,m,s);return d.top=Gl(u.top,d.top),d.right=ep(u.right,d.right),d.bottom=ep(u.bottom,d.bottom),d.left=Gl(u.left,d.left),d},Oj(t,o,s));return c.width=c.right-c.left,c.height=c.bottom-c.top,c.x=c.left,c.y=c.top,c}function QS(t){var e=t.reference,n=t.element,s=t.placement,a=s?Ia(s):null,l=s?Ac(s):null,o=e.x+e.width/2-n.width/2,c=e.y+e.height/2-n.height/2,d;switch(a){case cs:d={x:o,y:e.y-n.height};break;case Qs:d={x:o,y:e.y+e.height};break;case Zs:d={x:e.x+e.width,y:c};break;case ds:d={x:e.x-n.width,y:c};break;default:d={x:e.x,y:e.y}}var m=a?_b(a):null;if(m!=null){var u=m==="y"?"height":"width";switch(l){case Sc:d[m]=d[m]-(e[u]/2-n[u]/2);break;case hm:d[m]=d[m]+(e[u]/2-n[u]/2);break}}return d}function pm(t,e){e===void 0&&(e={});var n=e,s=n.placement,a=s===void 0?t.placement:s,l=n.strategy,o=l===void 0?t.strategy:l,c=n.boundary,d=c===void 0?EO:c,m=n.rootBoundary,u=m===void 0?HS:m,h=n.elementContext,p=h===void 0?kd:h,g=n.altBoundary,v=g===void 0?!1:g,x=n.padding,y=x===void 0?0:x,b=KS(typeof y!="number"?y:GS(y,Vm)),k=p===kd?TO:kd,w=t.rects.popper,T=t.elements[v?k:p],j=a3(io(T)?T:T.contextElement||kl(t.elements.popper),d,u,o),D=Tc(t.elements.reference),_=QS({reference:D,element:w,placement:a}),N=Rx(Object.assign({},w,_)),A=p===kd?N:D,P={top:j.top-A.top+b.top,bottom:A.bottom-j.bottom+b.bottom,left:j.left-A.left+b.left,right:A.right-j.right+b.right},E=t.modifiersData.offset;if(p===kd&&E){var I=E[a];Object.keys(P).forEach(function(M){var O=[Zs,Qs].indexOf(M)>=0?1:-1,F=[cs,Qs].indexOf(M)>=0?"y":"x";P[M]+=I[F]*O})}return P}function r3(t,e){e===void 0&&(e={});var n=e,s=n.placement,a=n.boundary,l=n.rootBoundary,o=n.padding,c=n.flipVariations,d=n.allowedAutoPlacements,m=d===void 0?zS:d,u=Ac(s),h=u?c?Rj:Rj.filter(function(v){return Ac(v)===u}):Vm,p=h.filter(function(v){return m.indexOf(v)>=0});p.length===0&&(p=h);var g=p.reduce(function(v,x){return v[x]=pm(t,{placement:x,boundary:a,rootBoundary:l,padding:o})[Ia(x)],v},{});return Object.keys(g).sort(function(v,x){return g[v]-g[x]})}function l3(t){if(Ia(t)===jb)return[];var e=Th(t);return[Ij(t),e,Ij(e)]}function o3(t){var e=t.state,n=t.options,s=t.name;if(!e.modifiersData[s]._skip){for(var a=n.mainAxis,l=a===void 0?!0:a,o=n.altAxis,c=o===void 0?!0:o,d=n.fallbackPlacements,m=n.padding,u=n.boundary,h=n.rootBoundary,p=n.altBoundary,g=n.flipVariations,v=g===void 0?!0:g,x=n.allowedAutoPlacements,y=e.options.placement,b=Ia(y),k=b===y,w=d||(k||!v?[Th(y)]:l3(y)),T=[y].concat(w).reduce(function(X,J){return X.concat(Ia(J)===jb?r3(e,{placement:J,boundary:u,rootBoundary:h,padding:m,flipVariations:v,allowedAutoPlacements:x}):J)},[]),j=e.rects.reference,D=e.rects.popper,_=new Map,N=!0,A=T[0],P=0;P<T.length;P++){var E=T[P],I=Ia(E),M=Ac(E)===Sc,O=[cs,Qs].indexOf(I)>=0,F=O?"width":"height",H=pm(e,{placement:E,boundary:u,rootBoundary:h,altBoundary:p,padding:m}),G=O?M?Zs:ds:M?Qs:cs;j[F]>D[F]&&(G=Th(G));var z=Th(G),ie=[];if(l&&ie.push(H[I]<=0),c&&ie.push(H[G]<=0,H[z]<=0),ie.every(function(X){return X})){A=E,N=!1;break}_.set(E,ie)}if(N)for(var W=v?3:1,ge=function(J){var he=T.find(function(le){var ee=_.get(le);if(ee)return ee.slice(0,J).every(function(me){return me})});if(he)return A=he,"break"},ae=W;ae>0;ae--){var U=ge(ae);if(U==="break")break}e.placement!==A&&(e.modifiersData[s]._skip=!0,e.placement=A,e.reset=!0)}}const c3={name:"flip",enabled:!0,phase:"main",fn:o3,requiresIfExists:["offset"],data:{_skip:!1}};function Fj(t,e,n){return n===void 0&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function Lj(t){return[cs,Zs,Qs,ds].some(function(e){return t[e]>=0})}function d3(t){var e=t.state,n=t.name,s=e.rects.reference,a=e.rects.popper,l=e.modifiersData.preventOverflow,o=pm(e,{elementContext:"reference"}),c=pm(e,{altBoundary:!0}),d=Fj(o,s),m=Fj(c,a,l),u=Lj(d),h=Lj(m);e.modifiersData[n]={referenceClippingOffsets:d,popperEscapeOffsets:m,isReferenceHidden:u,hasPopperEscaped:h},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":h})}const m3={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:d3};function u3(t,e,n){var s=Ia(t),a=[ds,cs].indexOf(s)>=0?-1:1,l=typeof n=="function"?n(Object.assign({},e,{placement:t})):n,o=l[0],c=l[1];return o=o||0,c=(c||0)*a,[ds,Zs].indexOf(s)>=0?{x:c,y:o}:{x:o,y:c}}function h3(t){var e=t.state,n=t.options,s=t.name,a=n.offset,l=a===void 0?[0,0]:a,o=zS.reduce(function(u,h){return u[h]=u3(h,e.rects,l),u},{}),c=o[e.placement],d=c.x,m=c.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=d,e.modifiersData.popperOffsets.y+=m),e.modifiersData[s]=o}const p3={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:h3};function g3(t){var e=t.state,n=t.name;e.modifiersData[n]=QS({reference:e.rects.reference,element:e.rects.popper,placement:e.placement})}const f3={name:"popperOffsets",enabled:!0,phase:"read",fn:g3,data:{}};function v3(t){return t==="x"?"y":"x"}function x3(t){var e=t.state,n=t.options,s=t.name,a=n.mainAxis,l=a===void 0?!0:a,o=n.altAxis,c=o===void 0?!1:o,d=n.boundary,m=n.rootBoundary,u=n.altBoundary,h=n.padding,p=n.tether,g=p===void 0?!0:p,v=n.tetherOffset,x=v===void 0?0:v,y=pm(e,{boundary:d,rootBoundary:m,padding:h,altBoundary:u}),b=Ia(e.placement),k=Ac(e.placement),w=!k,T=_b(b),j=v3(T),D=e.modifiersData.popperOffsets,_=e.rects.reference,N=e.rects.popper,A=typeof x=="function"?x(Object.assign({},e.rects,{placement:e.placement})):x,P=typeof A=="number"?{mainAxis:A,altAxis:A}:Object.assign({mainAxis:0,altAxis:0},A),E=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,I={x:0,y:0};if(D){if(l){var M,O=T==="y"?cs:ds,F=T==="y"?Qs:Zs,H=T==="y"?"height":"width",G=D[T],z=G+y[O],ie=G-y[F],W=g?-N[H]/2:0,ge=k===Sc?_[H]:N[H],ae=k===Sc?-N[H]:-_[H],U=e.elements.arrow,X=g&&U?Cb(U):{width:0,height:0},J=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:WS(),he=J[O],le=J[F],ee=Yd(0,_[H],X[H]),me=w?_[H]/2-W-ee-he-P.mainAxis:ge-ee-he-P.mainAxis,K=w?-_[H]/2+W+ee+le+P.mainAxis:ae+ee+le+P.mainAxis,re=e.elements.arrow&&Um(e.elements.arrow),oe=re?T==="y"?re.clientTop||0:re.clientLeft||0:0,C=(M=E?.[T])!=null?M:0,R=G+me-C-oe,te=G+K-C,ne=Yd(g?ep(z,R):z,G,g?Gl(ie,te):ie);D[T]=ne,I[T]=ne-G}if(c){var Y,q=T==="x"?cs:ds,B=T==="x"?Qs:Zs,se=D[j],Q=j==="y"?"height":"width",pe=se+y[q],$=se-y[B],ce=[cs,ds].indexOf(b)!==-1,De=(Y=E?.[j])!=null?Y:0,xe=ce?pe:se-_[Q]-N[Q]-De+P.altAxis,Re=ce?se+_[Q]+N[Q]-De-P.altAxis:$,nt=g&&ce?HO(xe,se,Re):Yd(g?xe:pe,se,g?Re:$);D[j]=nt,I[j]=nt-se}e.modifiersData[s]=I}}const y3={name:"preventOverflow",enabled:!0,phase:"main",fn:x3,requiresIfExists:["offset"]};function b3(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function k3(t){return t===Es(t)||!Oa(t)?Sb(t):b3(t)}function w3(t){var e=t.getBoundingClientRect(),n=Ec(e.width)/t.offsetWidth||1,s=Ec(e.height)/t.offsetHeight||1;return n!==1||s!==1}function j3(t,e,n){n===void 0&&(n=!1);var s=Oa(e),a=Oa(e)&&w3(e),l=kl(e),o=Tc(t,a,n),c={scrollLeft:0,scrollTop:0},d={x:0,y:0};return(s||!s&&!n)&&((pl(e)!=="body"||Tb(l))&&(c=k3(e)),Oa(e)?(d=Tc(e,!0),d.x+=e.clientLeft,d.y+=e.clientTop):l&&(d.x=Eb(l))),{x:o.left+c.scrollLeft-d.x,y:o.top+c.scrollTop-d.y,width:o.width,height:o.height}}function N3(t){var e=new Map,n=new Set,s=[];t.forEach(function(l){e.set(l.name,l)});function a(l){n.add(l.name);var o=[].concat(l.requires||[],l.requiresIfExists||[]);o.forEach(function(c){if(!n.has(c)){var d=e.get(c);d&&a(d)}}),s.push(l)}return t.forEach(function(l){n.has(l.name)||a(l)}),s}function C3(t){var e=N3(t);return $O.reduce(function(n,s){return n.concat(e.filter(function(a){return a.phase===s}))},[])}function _3(t){var e;return function(){return e||(e=new Promise(function(n){Promise.resolve().then(function(){e=void 0,n(t())})})),e}}function S3(t){var e=t.reduce(function(n,s){var a=n[s.name];return n[s.name]=a?Object.assign({},a,s,{options:Object.assign({},a.options,s.options),data:Object.assign({},a.data,s.data)}):s,n},{});return Object.keys(e).map(function(n){return e[n]})}var $j={placement:"bottom",modifiers:[],strategy:"absolute"};function Bj(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some(function(s){return!(s&&typeof s.getBoundingClientRect=="function")})}function E3(t){t===void 0&&(t={});var e=t,n=e.defaultModifiers,s=n===void 0?[]:n,a=e.defaultOptions,l=a===void 0?$j:a;return function(c,d,m){m===void 0&&(m=l);var u={placement:"bottom",orderedModifiers:[],options:Object.assign({},$j,l),modifiersData:{},elements:{reference:c,popper:d},attributes:{},styles:{}},h=[],p=!1,g={state:u,setOptions:function(b){var k=typeof b=="function"?b(u.options):b;x(),u.options=Object.assign({},l,u.options,k),u.scrollParents={reference:io(c)?Qd(c):c.contextElement?Qd(c.contextElement):[],popper:Qd(d)};var w=C3(S3([].concat(s,u.options.modifiers)));return u.orderedModifiers=w.filter(function(T){return T.enabled}),v(),g.update()},forceUpdate:function(){if(!p){var b=u.elements,k=b.reference,w=b.popper;if(Bj(k,w)){u.rects={reference:j3(k,Um(w),u.options.strategy==="fixed"),popper:Cb(w)},u.reset=!1,u.placement=u.options.placement,u.orderedModifiers.forEach(function(P){return u.modifiersData[P.name]=Object.assign({},P.data)});for(var T=0;T<u.orderedModifiers.length;T++){if(u.reset===!0){u.reset=!1,T=-1;continue}var j=u.orderedModifiers[T],D=j.fn,_=j.options,N=_===void 0?{}:_,A=j.name;typeof D=="function"&&(u=D({state:u,options:N,name:A,instance:g})||u)}}}},update:_3(function(){return new Promise(function(y){g.forceUpdate(),y(u)})}),destroy:function(){x(),p=!0}};if(!Bj(c,d))return g;g.setOptions(m).then(function(y){!p&&m.onFirstUpdate&&m.onFirstUpdate(y)});function v(){u.orderedModifiers.forEach(function(y){var b=y.name,k=y.options,w=k===void 0?{}:k,T=y.effect;if(typeof T=="function"){var j=T({state:u,name:b,instance:g,options:w}),D=function(){};h.push(j||D)}})}function x(){h.forEach(function(y){return y()}),h=[]}return g}}const T3=E3({defaultModifiers:[m3,f3,QO,XO,p3,c3,y3,WO]}),A3=["enabled","placement","strategy","modifiers"];function D3(t,e){if(t==null)return{};var n={};for(var s in t)if({}.hasOwnProperty.call(t,s)){if(e.indexOf(s)>=0)continue;n[s]=t[s]}return n}const R3={name:"applyStyles",enabled:!1,phase:"afterWrite",fn:()=>{}},P3={name:"ariaDescribedBy",enabled:!0,phase:"afterWrite",effect:({state:t})=>()=>{const{reference:e,popper:n}=t.elements;if("removeAttribute"in e){const s=(e.getAttribute("aria-describedby")||"").split(",").filter(a=>a.trim()!==n.id);s.length?e.setAttribute("aria-describedby",s.join(",")):e.removeAttribute("aria-describedby")}},fn:({state:t})=>{var e;const{popper:n,reference:s}=t.elements,a=(e=n.getAttribute("role"))==null?void 0:e.toLowerCase();if(n.id&&a==="tooltip"&&"setAttribute"in s){const l=s.getAttribute("aria-describedby");if(l&&l.split(",").indexOf(n.id)!==-1)return;s.setAttribute("aria-describedby",l?`${l},${n.id}`:n.id)}}},M3=[];function I3(t,e,n={}){let{enabled:s=!0,placement:a="bottom",strategy:l="absolute",modifiers:o=M3}=n,c=D3(n,A3);const d=f.useRef(o),m=f.useRef(),u=f.useCallback(()=>{var y;(y=m.current)==null||y.update()},[]),h=f.useCallback(()=>{var y;(y=m.current)==null||y.forceUpdate()},[]),[p,g]=SO(f.useState({placement:a,update:u,forceUpdate:h,attributes:{},styles:{popper:{},arrow:{}}})),v=f.useMemo(()=>({name:"updateStateModifier",enabled:!0,phase:"write",requires:["computeStyles"],fn:({state:y})=>{const b={},k={};Object.keys(y.elements).forEach(w=>{b[w]=y.styles[w],k[w]=y.attributes[w]}),g({state:y,styles:b,attributes:k,update:u,forceUpdate:h,placement:y.placement})}}),[u,h,g]),x=f.useMemo(()=>(Gd(d.current,o)||(d.current=o),d.current),[o]);return f.useEffect(()=>{!m.current||!s||m.current.setOptions({placement:a,strategy:l,modifiers:[...x,v,R3]})},[l,a,v,s,x]),f.useEffect(()=>{if(!(!s||t==null||e==null))return m.current=T3(t,e,Object.assign({},c,{placement:a,strategy:l,modifiers:[...x,P3,v]})),()=>{m.current!=null&&(m.current.destroy(),m.current=void 0,g(y=>Object.assign({},y,{attributes:{},styles:{popper:{}}})))}},[s,t,e]),p}function gm(t,e){if(t.contains)return t.contains(e);if(t.compareDocumentPosition)return t===e||!!(t.compareDocumentPosition(e)&16)}var zf,qj;function O3(){if(qj)return zf;qj=1;var t=function(){};return zf=t,zf}var F3=O3();const L3=ya(F3),Hj=()=>{};function $3(t){return t.button===0}function B3(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}const Ah=t=>t&&("current"in t?t.current:t),zj={click:"mousedown",mouseup:"mousedown",pointerup:"pointerdown"};function q3(t,e=Hj,{disabled:n,clickTrigger:s="click"}={}){const a=f.useRef(!1),l=f.useRef(!1),o=f.useCallback(m=>{const u=Ah(t);L3(!!u,"ClickOutside captured a close event but does not have a ref to compare it to. useClickOutside(), should be passed a ref that resolves to a DOM node"),a.current=!u||B3(m)||!$3(m)||!!gm(u,m.target)||l.current,l.current=!1},[t]),c=Hs(m=>{const u=Ah(t);u&&gm(u,m.target)?l.current=!0:l.current=!1}),d=Hs(m=>{a.current||e(m)});f.useEffect(()=>{var m,u;if(n||t==null)return;const h=Kc(Ah(t)),p=h.defaultView||window;let g=(m=p.event)!=null?m:(u=p.parent)==null?void 0:u.event,v=null;zj[s]&&(v=ur(h,zj[s],c,!0));const x=ur(h,s,o,!0),y=ur(h,s,k=>{if(k===g){g=void 0;return}d(k)});let b=[];return"ontouchstart"in h.documentElement&&(b=[].slice.call(h.body.children).map(k=>ur(k,"mousemove",Hj))),()=>{v?.(),x(),y(),b.forEach(k=>k())}},[t,n,s,o,c,d])}function H3(t){const e={};return Array.isArray(t)?(t?.forEach(n=>{e[n.name]=n}),e):t||e}function z3(t={}){return Array.isArray(t)?t:Object.keys(t).map(e=>(t[e].name=e,t[e]))}function V3({enabled:t,enableEvents:e,placement:n,flip:s,offset:a,fixed:l,containerPadding:o,arrowElement:c,popperConfig:d={}}){var m,u,h,p,g;const v=H3(d.modifiers);return Object.assign({},d,{placement:n,enabled:t,strategy:l?"fixed":d.strategy,modifiers:z3(Object.assign({},v,{eventListeners:{enabled:e,options:(m=v.eventListeners)==null?void 0:m.options},preventOverflow:Object.assign({},v.preventOverflow,{options:o?Object.assign({padding:o},(u=v.preventOverflow)==null?void 0:u.options):(h=v.preventOverflow)==null?void 0:h.options}),offset:{options:Object.assign({offset:a},(p=v.offset)==null?void 0:p.options)},arrow:Object.assign({},v.arrow,{enabled:!!c,options:Object.assign({},(g=v.arrow)==null?void 0:g.options,{element:c})}),flip:Object.assign({enabled:!!s},v.flip)}))})}const ZS={prefix:String(Math.round(Math.random()*1e10)),current:0},XS=He.createContext(ZS),U3=He.createContext(!1);let Vf=new WeakMap;function W3(t=!1){let e=f.useContext(XS),n=f.useRef(null);if(n.current===null&&!t){var s,a;let l=(a=He.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED)===null||a===void 0||(s=a.ReactCurrentOwner)===null||s===void 0?void 0:s.current;if(l){let o=Vf.get(l);o==null?Vf.set(l,{id:e.current,state:l.memoizedState}):l.memoizedState!==o.state&&(e.current=o.id,Vf.delete(l))}n.current=++e.current}return n.current}function K3(t){let e=f.useContext(XS),n=W3(!!t),s=`react-aria${e.prefix}`;return t||`${s}-${n}`}function G3(t){let e=He.useId(),[n]=f.useState(J3()),s=n?"react-aria":`react-aria${ZS.prefix}`;return t||`${s}-${e}`}const Y3=typeof He.useId=="function"?G3:K3;function Q3(){return!1}function Z3(){return!0}function X3(t){return()=>{}}function J3(){return typeof He.useSyncExternalStore=="function"?He.useSyncExternalStore(X3,Q3,Z3):f.useContext(U3)}const Dc=f.createContext(null),fm=(t,e=null)=>t!=null?String(t):e||null,Ab=f.createContext(null);Ab.displayName="NavContext";const e5="data-rr-ui-",t5="rrUi";function kg(t){return`${e5}${t}`}function n5(t){return`${t5}${t}`}const JS=f.createContext(Gc?window:void 0);JS.Provider;function Db(){return f.useContext(JS)}const i5=typeof global<"u"&&global.navigator&&global.navigator.product==="ReactNative",s5=typeof document<"u",eE=s5||i5?f.useLayoutEffect:f.useEffect,tE=f.createContext(null);tE.displayName="InputGroupContext";const nE=f.createContext(null);nE.displayName="NavbarContext";Ae.string,Ae.bool,Ae.bool,Ae.bool,Ae.bool;const iE=f.forwardRef(({bsPrefix:t,className:e,fluid:n=!1,rounded:s=!1,roundedCircle:a=!1,thumbnail:l=!1,...o},c)=>(t=Rt(t,"img"),i.jsx("img",{ref:c,...o,className:vt(e,n&&`${t}-fluid`,s&&"rounded",a&&"rounded-circle",l&&`${t}-thumbnail`)})));iE.displayName="Image";const a5={type:Ae.string,tooltip:Ae.bool,as:Ae.elementType},wg=f.forwardRef(({as:t="div",className:e,type:n="valid",tooltip:s=!1,...a},l)=>i.jsx(t,{...a,ref:l,className:vt(e,`${n}-${s?"tooltip":"feedback"}`)}));wg.displayName="Feedback";wg.propTypes=a5;const Sr=f.createContext({}),Wm=f.forwardRef(({id:t,bsPrefix:e,className:n,type:s="checkbox",isValid:a=!1,isInvalid:l=!1,as:o="input",...c},d)=>{const{controlId:m}=f.useContext(Sr);return e=Rt(e,"form-check-input"),i.jsx(o,{...c,ref:d,type:s,id:t||m,className:vt(n,e,a&&"is-valid",l&&"is-invalid")})});Wm.displayName="FormCheckInput";const tp=f.forwardRef(({bsPrefix:t,className:e,htmlFor:n,...s},a)=>{const{controlId:l}=f.useContext(Sr);return t=Rt(t,"form-check-label"),i.jsx("label",{...s,ref:a,htmlFor:n||l,className:vt(e,t)})});tp.displayName="FormCheckLabel";const sE=f.forwardRef(({id:t,bsPrefix:e,bsSwitchPrefix:n,inline:s=!1,reverse:a=!1,disabled:l=!1,isValid:o=!1,isInvalid:c=!1,feedbackTooltip:d=!1,feedback:m,feedbackType:u,className:h,style:p,title:g="",type:v="checkbox",label:x,children:y,as:b="input",...k},w)=>{e=Rt(e,"form-check"),n=Rt(n,"form-switch");const{controlId:T}=f.useContext(Sr),j=f.useMemo(()=>({controlId:t||T}),[T,t]),D=!y&&x!=null&&x!==!1||wO(y,tp),_=i.jsx(Wm,{...k,type:v==="switch"?"checkbox":v,ref:w,isValid:o,isInvalid:c,disabled:l,as:b});return i.jsx(Sr.Provider,{value:j,children:i.jsx("div",{style:p,className:vt(h,D&&e,s&&`${e}-inline`,a&&`${e}-reverse`,v==="switch"&&n),children:y||i.jsxs(i.Fragment,{children:[_,D&&i.jsx(tp,{title:g,children:x}),m&&i.jsx(wg,{type:u,tooltip:d,children:m})]})})})});sE.displayName="FormCheck";const np=Object.assign(sE,{Input:Wm,Label:tp}),aE=f.forwardRef(({bsPrefix:t,type:e,size:n,htmlSize:s,id:a,className:l,isValid:o=!1,isInvalid:c=!1,plaintext:d,readOnly:m,as:u="input",...h},p)=>{const{controlId:g}=f.useContext(Sr);return t=Rt(t,"form-control"),i.jsx(u,{...h,type:e,size:s,ref:p,readOnly:m,id:a||g,className:vt(l,d?`${t}-plaintext`:t,n&&`${t}-${n}`,e==="color"&&`${t}-color`,o&&"is-valid",c&&"is-invalid")})});aE.displayName="FormControl";const r5=Object.assign(aE,{Feedback:wg}),rE=f.forwardRef(({className:t,bsPrefix:e,as:n="div",...s},a)=>(e=Rt(e,"form-floating"),i.jsx(n,{ref:a,className:vt(t,e),...s})));rE.displayName="FormFloating";const Rb=f.forwardRef(({controlId:t,as:e="div",...n},s)=>{const a=f.useMemo(()=>({controlId:t}),[t]);return i.jsx(Sr.Provider,{value:a,children:i.jsx(e,{...n,ref:s})})});Rb.displayName="FormGroup";const lE=f.forwardRef(({as:t="label",bsPrefix:e,column:n=!1,visuallyHidden:s=!1,className:a,htmlFor:l,...o},c)=>{const{controlId:d}=f.useContext(Sr);e=Rt(e,"form-label");let m="col-form-label";typeof n=="string"&&(m=`${m} ${m}-${n}`);const u=vt(a,e,s&&"visually-hidden",n&&m);return l=l||d,n?i.jsx(Et,{ref:c,as:"label",className:u,htmlFor:l,...o}):i.jsx(t,{ref:c,className:u,htmlFor:l,...o})});lE.displayName="FormLabel";const oE=f.forwardRef(({bsPrefix:t,className:e,id:n,...s},a)=>{const{controlId:l}=f.useContext(Sr);return t=Rt(t,"form-range"),i.jsx("input",{...s,type:"range",ref:a,className:vt(e,t),id:n||l})});oE.displayName="FormRange";const cE=f.forwardRef(({bsPrefix:t,size:e,htmlSize:n,className:s,isValid:a=!1,isInvalid:l=!1,id:o,...c},d)=>{const{controlId:m}=f.useContext(Sr);return t=Rt(t,"form-select"),i.jsx("select",{...c,size:n,ref:d,className:vt(s,t,e&&`${t}-${e}`,a&&"is-valid",l&&"is-invalid"),id:o||m})});cE.displayName="FormSelect";const dE=f.forwardRef(({bsPrefix:t,className:e,as:n="small",muted:s,...a},l)=>(t=Rt(t,"form-text"),i.jsx(n,{...a,ref:l,className:vt(e,t,s&&"text-muted")})));dE.displayName="FormText";const mE=f.forwardRef((t,e)=>i.jsx(np,{...t,ref:e,type:"switch"}));mE.displayName="Switch";const l5=Object.assign(mE,{Input:np.Input,Label:np.Label}),uE=f.forwardRef(({bsPrefix:t,className:e,children:n,controlId:s,label:a,...l},o)=>(t=Rt(t,"form-floating"),i.jsxs(Rb,{ref:o,className:vt(e,t),controlId:s,...l,children:[n,i.jsx("label",{htmlFor:s,children:a})]})));uE.displayName="FloatingLabel";const o5={_ref:Ae.any,validated:Ae.bool,as:Ae.elementType},Pb=f.forwardRef(({className:t,validated:e,as:n="form",...s},a)=>i.jsx(n,{...s,ref:a,className:vt(t,e&&"was-validated")}));Pb.displayName="Form";Pb.propTypes=o5;const Mt=Object.assign(Pb,{Group:Rb,Control:r5,Floating:rE,Check:np,Switch:l5,Label:lE,Text:dE,Range:oE,Select:cE,FloatingLabel:uE}),jg=f.forwardRef(({className:t,bsPrefix:e,as:n="span",...s},a)=>(e=Rt(e,"input-group-text"),i.jsx(n,{ref:a,className:vt(t,e),...s})));jg.displayName="InputGroupText";const c5=t=>i.jsx(jg,{children:i.jsx(Wm,{type:"checkbox",...t})}),d5=t=>i.jsx(jg,{children:i.jsx(Wm,{type:"radio",...t})}),hE=f.forwardRef(({bsPrefix:t,size:e,hasValidation:n,className:s,as:a="div",...l},o)=>{t=Rt(t,"input-group");const c=f.useMemo(()=>({}),[]);return i.jsx(tE.Provider,{value:c,children:i.jsx(a,{ref:o,...l,className:vt(s,t,e&&`${t}-${e}`,n&&"has-validation")})})});hE.displayName="InputGroup";const Zd=Object.assign(hE,{Text:jg,Radio:d5,Checkbox:c5}),Vj=t=>!t||typeof t=="function"?t:e=>{t.current=e};function m5(t,e){const n=Vj(t),s=Vj(e);return a=>{n&&n(a),s&&s(a)}}function Km(t,e){return f.useMemo(()=>m5(t,e),[t,e])}const Yc=f.createContext(null),u5=["as","active","eventKey"];function h5(t,e){if(t==null)return{};var n={};for(var s in t)if({}.hasOwnProperty.call(t,s)){if(e.indexOf(s)>=0)continue;n[s]=t[s]}return n}function pE({key:t,onClick:e,active:n,id:s,role:a,disabled:l}){const o=f.useContext(Dc),c=f.useContext(Ab),d=f.useContext(Yc);let m=n;const u={role:a};if(c){!a&&c.role==="tablist"&&(u.role="tab");const h=c.getControllerId(t??null),p=c.getControlledId(t??null);u[kg("event-key")]=t,u.id=h||s,m=n==null&&t!=null?c.activeKey===t:n,(m||!(d!=null&&d.unmountOnExit)&&!(d!=null&&d.mountOnEnter))&&(u["aria-controls"]=p)}return u.role==="tab"&&(u["aria-selected"]=m,m||(u.tabIndex=-1),l&&(u.tabIndex=-1,u["aria-disabled"]=!0)),u.onClick=Hs(h=>{l||(e?.(h),t!=null&&o&&!h.isPropagationStopped()&&o(t,h))}),[u,{isActive:m}]}const gE=f.forwardRef((t,e)=>{let{as:n=ES,active:s,eventKey:a}=t,l=h5(t,u5);const[o,c]=pE(Object.assign({key:fm(a,l.href),active:s},l));return o[kg("active")]=c.isActive,i.jsx(n,Object.assign({},l,o,{ref:e}))});gE.displayName="NavItem";const p5=["as","onSelect","activeKey","role","onKeyDown"];function g5(t,e){if(t==null)return{};var n={};for(var s in t)if({}.hasOwnProperty.call(t,s)){if(e.indexOf(s)>=0)continue;n[s]=t[s]}return n}const Uj=()=>{},Wj=kg("event-key"),fE=f.forwardRef((t,e)=>{let{as:n="div",onSelect:s,activeKey:a,role:l,onKeyDown:o}=t,c=g5(t,p5);const d=_O(),m=f.useRef(!1),u=f.useContext(Dc),h=f.useContext(Yc);let p,g;h&&(l=l||"tablist",a=h.activeKey,p=h.getControlledId,g=h.getControllerId);const v=f.useRef(null),x=w=>{const T=v.current;if(!T)return null;const j=Fl(T,`[${Wj}]:not([aria-disabled=true])`),D=T.querySelector("[aria-selected=true]");if(!D||D!==document.activeElement)return null;const _=j.indexOf(D);if(_===-1)return null;let N=_+w;return N>=j.length&&(N=0),N<0&&(N=j.length-1),j[N]},y=(w,T)=>{w!=null&&(s?.(w,T),u?.(w,T))},b=w=>{if(o?.(w),!h)return;let T;switch(w.key){case"ArrowLeft":case"ArrowUp":T=x(-1);break;case"ArrowRight":case"ArrowDown":T=x(1);break;default:return}T&&(w.preventDefault(),y(T.dataset[n5("EventKey")]||null,w),m.current=!0,d())};f.useEffect(()=>{if(v.current&&m.current){const w=v.current.querySelector(`[${Wj}][aria-selected=true]`);w?.focus()}m.current=!1});const k=Km(e,v);return i.jsx(Dc.Provider,{value:y,children:i.jsx(Ab.Provider,{value:{role:l,activeKey:fm(a),getControlledId:p||Uj,getControllerId:g||Uj},children:i.jsx(n,Object.assign({},c,{onKeyDown:b,ref:k,role:l}))})})});fE.displayName="Nav";const f5=Object.assign(fE,{Item:gE});var Mu;function Kj(t){if((!Mu&&Mu!==0||t)&&Gc){var e=document.createElement("div");e.style.position="absolute",e.style.top="-9999px",e.style.width="50px",e.style.height="50px",e.style.overflow="scroll",document.body.appendChild(e),Mu=e.offsetWidth-e.clientWidth,document.body.removeChild(e)}return Mu}function v5(){return f.useState(null)}function Uf(t){t===void 0&&(t=Kc());try{var e=t.activeElement;return!e||!e.nodeName?null:e}catch{return t.body}}function x5(t){const e=f.useRef(t);return e.current=t,e}function y5(t){const e=x5(t);f.useEffect(()=>()=>e.current(),[])}function b5(t=document){const e=t.defaultView;return Math.abs(e.innerWidth-t.documentElement.clientWidth)}const Gj=kg("modal-open");class Mb{constructor({ownerDocument:e,handleContainerOverflow:n=!0,isRTL:s=!1}={}){this.handleContainerOverflow=n,this.isRTL=s,this.modals=[],this.ownerDocument=e}getScrollbarWidth(){return b5(this.ownerDocument)}getElement(){return(this.ownerDocument||document).body}setModalAttributes(e){}removeModalAttributes(e){}setContainerStyle(e){const n={overflow:"hidden"},s=this.isRTL?"paddingLeft":"paddingRight",a=this.getElement();e.style={overflow:a.style.overflow,[s]:a.style[s]},e.scrollBarWidth&&(n[s]=`${parseInt(kr(a,s)||"0",10)+e.scrollBarWidth}px`),a.setAttribute(Gj,""),kr(a,n)}reset(){[...this.modals].forEach(e=>this.remove(e))}removeContainerStyle(e){const n=this.getElement();n.removeAttribute(Gj),Object.assign(n.style,e.style)}add(e){let n=this.modals.indexOf(e);return n!==-1||(n=this.modals.length,this.modals.push(e),this.setModalAttributes(e),n!==0)||(this.state={scrollBarWidth:this.getScrollbarWidth(),style:{}},this.handleContainerOverflow&&this.setContainerStyle(this.state)),n}remove(e){const n=this.modals.indexOf(e);n!==-1&&(this.modals.splice(n,1),!this.modals.length&&this.handleContainerOverflow&&this.removeContainerStyle(this.state),this.removeModalAttributes(e))}isTopModal(e){return!!this.modals.length&&this.modals[this.modals.length-1]===e}}const Wf=(t,e)=>Gc?t==null?(e||Kc()).body:(typeof t=="function"&&(t=t()),t&&"current"in t&&(t=t.current),t&&("nodeType"in t||t.getBoundingClientRect)?t:null):null;function Px(t,e){const n=Db(),[s,a]=f.useState(()=>Wf(t,n?.document));if(!s){const l=Wf(t);l&&a(l)}return f.useEffect(()=>{},[e,s]),f.useEffect(()=>{const l=Wf(t);l!==s&&a(l)},[t,s]),s}function Ib({children:t,in:e,onExited:n,mountOnEnter:s,unmountOnExit:a}){const l=f.useRef(null),o=f.useRef(e),c=Hs(n);f.useEffect(()=>{e?o.current=!0:c(l.current)},[e,c]);const d=Km(l,bo(t)),m=f.cloneElement(t,{ref:d});return e?m:a||!o.current&&s?null:m}const k5=["onEnter","onEntering","onEntered","onExit","onExiting","onExited","addEndListener","children"];function w5(t,e){if(t==null)return{};var n={};for(var s in t)if({}.hasOwnProperty.call(t,s)){if(e.indexOf(s)>=0)continue;n[s]=t[s]}return n}function j5(t){let{onEnter:e,onEntering:n,onEntered:s,onExit:a,onExiting:l,onExited:o,addEndListener:c,children:d}=t,m=w5(t,k5);const u=f.useRef(null),h=Km(u,bo(d)),p=T=>j=>{T&&u.current&&T(u.current,j)},g=f.useCallback(p(e),[e]),v=f.useCallback(p(n),[n]),x=f.useCallback(p(s),[s]),y=f.useCallback(p(a),[a]),b=f.useCallback(p(l),[l]),k=f.useCallback(p(o),[o]),w=f.useCallback(p(c),[c]);return Object.assign({},m,{nodeRef:u},e&&{onEnter:g},n&&{onEntering:v},s&&{onEntered:x},a&&{onExit:y},l&&{onExiting:b},o&&{onExited:k},c&&{addEndListener:w},{children:typeof d=="function"?(T,j)=>d(T,Object.assign({},j,{ref:h})):f.cloneElement(d,{ref:h})})}const N5=["component"];function C5(t,e){if(t==null)return{};var n={};for(var s in t)if({}.hasOwnProperty.call(t,s)){if(e.indexOf(s)>=0)continue;n[s]=t[s]}return n}const _5=f.forwardRef((t,e)=>{let{component:n}=t,s=C5(t,N5);const a=j5(s);return i.jsx(n,Object.assign({ref:e},a))});function S5({in:t,onTransition:e}){const n=f.useRef(null),s=f.useRef(!0),a=Hs(e);return Ej(()=>{if(!n.current)return;let l=!1;return a({in:t,element:n.current,initial:s.current,isStale:()=>l}),()=>{l=!0}},[t,a]),Ej(()=>(s.current=!1,()=>{s.current=!0}),[]),n}function E5({children:t,in:e,onExited:n,onEntered:s,transition:a}){const[l,o]=f.useState(!e);e&&l&&o(!1);const c=S5({in:!!e,onTransition:m=>{const u=()=>{m.isStale()||(m.in?s?.(m.element,m.initial):(o(!0),n?.(m.element)))};Promise.resolve(a(m)).then(u,h=>{throw m.in||o(!0),h})}}),d=Km(c,bo(t));return l&&!e?null:f.cloneElement(t,{ref:d})}function Mx(t,e,n){return t?i.jsx(_5,Object.assign({},n,{component:t})):e?i.jsx(E5,Object.assign({},n,{transition:e})):i.jsx(Ib,Object.assign({},n))}const T5=["show","role","className","style","children","backdrop","keyboard","onBackdropClick","onEscapeKeyDown","transition","runTransition","backdropTransition","runBackdropTransition","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","renderDialog","renderBackdrop","manager","container","onShow","onHide","onExit","onExited","onExiting","onEnter","onEntering","onEntered"];function A5(t,e){if(t==null)return{};var n={};for(var s in t)if({}.hasOwnProperty.call(t,s)){if(e.indexOf(s)>=0)continue;n[s]=t[s]}return n}let Kf;function D5(t){return Kf||(Kf=new Mb({ownerDocument:t?.document})),Kf}function R5(t){const e=Db(),n=t||D5(e),s=f.useRef({dialog:null,backdrop:null});return Object.assign(s.current,{add:()=>n.add(s.current),remove:()=>n.remove(s.current),isTopModal:()=>n.isTopModal(s.current),setDialogRef:f.useCallback(a=>{s.current.dialog=a},[]),setBackdropRef:f.useCallback(a=>{s.current.backdrop=a},[])})}const vE=f.forwardRef((t,e)=>{let{show:n=!1,role:s="dialog",className:a,style:l,children:o,backdrop:c=!0,keyboard:d=!0,onBackdropClick:m,onEscapeKeyDown:u,transition:h,runTransition:p,backdropTransition:g,runBackdropTransition:v,autoFocus:x=!0,enforceFocus:y=!0,restoreFocus:b=!0,restoreFocusOptions:k,renderDialog:w,renderBackdrop:T=te=>i.jsx("div",Object.assign({},te)),manager:j,container:D,onShow:_,onHide:N=()=>{},onExit:A,onExited:P,onExiting:E,onEnter:I,onEntering:M,onEntered:O}=t,F=A5(t,T5);const H=Db(),G=Px(D),z=R5(j),ie=SS(),W=sO(n),[ge,ae]=f.useState(!n),U=f.useRef(null);f.useImperativeHandle(e,()=>z,[z]),Gc&&!W&&n&&(U.current=Uf(H?.document)),n&&ge&&ae(!1);const X=Hs(()=>{if(z.add(),K.current=ur(document,"keydown",ee),me.current=ur(document,"focus",()=>setTimeout(he),!0),_&&_(),x){var te,ne;const Y=Uf((te=(ne=z.dialog)==null?void 0:ne.ownerDocument)!=null?te:H?.document);z.dialog&&Y&&!gm(z.dialog,Y)&&(U.current=Y,z.dialog.focus())}}),J=Hs(()=>{if(z.remove(),K.current==null||K.current(),me.current==null||me.current(),b){var te;(te=U.current)==null||te.focus==null||te.focus(k),U.current=null}});f.useEffect(()=>{!n||!G||X()},[n,G,X]),f.useEffect(()=>{ge&&J()},[ge,J]),y5(()=>{J()});const he=Hs(()=>{if(!y||!ie()||!z.isTopModal())return;const te=Uf(H?.document);z.dialog&&te&&!gm(z.dialog,te)&&z.dialog.focus()}),le=Hs(te=>{te.target===te.currentTarget&&(m?.(te),c===!0&&N())}),ee=Hs(te=>{d&&bS(te)&&z.isTopModal()&&(u?.(te),te.defaultPrevented||N())}),me=f.useRef(),K=f.useRef(),re=(...te)=>{ae(!0),P?.(...te)};if(!G)return null;const oe=Object.assign({role:s,ref:z.setDialogRef,"aria-modal":s==="dialog"?!0:void 0},F,{style:l,className:a,tabIndex:-1});let C=w?w(oe):i.jsx("div",Object.assign({},oe,{children:f.cloneElement(o,{role:"document"})}));C=Mx(h,p,{unmountOnExit:!0,mountOnEnter:!0,appear:!0,in:!!n,onExit:A,onExiting:E,onExited:re,onEnter:I,onEntering:M,onEntered:O,children:C});let R=null;return c&&(R=T({ref:z.setBackdropRef,onClick:le}),R=Mx(g,v,{in:!!n,appear:!0,mountOnEnter:!0,unmountOnExit:!0,children:R})),i.jsx(i.Fragment,{children:zl.createPortal(i.jsxs(i.Fragment,{children:[R,C]}),G)})});vE.displayName="Modal";const xE=Object.assign(vE,{Manager:Mb});function Ix(t,e){return t.classList?!!e&&t.classList.contains(e):(" "+(t.className.baseVal||t.className)+" ").indexOf(" "+e+" ")!==-1}function yE(t,e){t.classList?t.classList.add(e):Ix(t,e)||(typeof t.className=="string"?t.className=t.className+" "+e:t.setAttribute("class",(t.className&&t.className.baseVal||"")+" "+e))}function Yj(t,e){return t.replace(new RegExp("(^|\\s)"+e+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function bE(t,e){t.classList?t.classList.remove(e):typeof t.className=="string"?t.className=Yj(t.className,e):t.setAttribute("class",Yj(t.className&&t.className.baseVal||"",e))}const Uo={FIXED_CONTENT:".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",STICKY_CONTENT:".sticky-top",NAVBAR_TOGGLER:".navbar-toggler"};class kE extends Mb{adjustAndStore(e,n,s){const a=n.style[e];n.dataset[e]=a,kr(n,{[e]:`${parseFloat(kr(n,e))+s}px`})}restore(e,n){const s=n.dataset[e];s!==void 0&&(delete n.dataset[e],kr(n,{[e]:s}))}setContainerStyle(e){super.setContainerStyle(e);const n=this.getElement();if(yE(n,"modal-open"),!e.scrollBarWidth)return;const s=this.isRTL?"paddingLeft":"paddingRight",a=this.isRTL?"marginLeft":"marginRight";Fl(n,Uo.FIXED_CONTENT).forEach(l=>this.adjustAndStore(s,l,e.scrollBarWidth)),Fl(n,Uo.STICKY_CONTENT).forEach(l=>this.adjustAndStore(a,l,-e.scrollBarWidth)),Fl(n,Uo.NAVBAR_TOGGLER).forEach(l=>this.adjustAndStore(a,l,e.scrollBarWidth))}removeContainerStyle(e){super.removeContainerStyle(e);const n=this.getElement();bE(n,"modal-open");const s=this.isRTL?"paddingLeft":"paddingRight",a=this.isRTL?"marginLeft":"marginRight";Fl(n,Uo.FIXED_CONTENT).forEach(l=>this.restore(s,l)),Fl(n,Uo.STICKY_CONTENT).forEach(l=>this.restore(a,l)),Fl(n,Uo.NAVBAR_TOGGLER).forEach(l=>this.restore(a,l))}}let Gf;function wE(t){return Gf||(Gf=new kE(t)),Gf}const jE=f.forwardRef(({className:t,bsPrefix:e,as:n="div",...s},a)=>(e=Rt(e,"modal-body"),i.jsx(n,{ref:a,className:vt(t,e),...s})));jE.displayName="ModalBody";const Ob=f.createContext({onHide(){}}),Fb=f.forwardRef(({bsPrefix:t,className:e,contentClassName:n,centered:s,size:a,fullscreen:l,children:o,scrollable:c,...d},m)=>{t=Rt(t,"modal");const u=`${t}-dialog`,h=typeof l=="string"?`${t}-fullscreen-${l}`:`${t}-fullscreen`;return i.jsx("div",{...d,ref:m,className:vt(u,e,a&&`${t}-${a}`,s&&`${u}-centered`,c&&`${u}-scrollable`,l&&h),children:i.jsx("div",{className:vt(`${t}-content`,n),children:o})})});Fb.displayName="ModalDialog";const NE=f.forwardRef(({className:t,bsPrefix:e,as:n="div",...s},a)=>(e=Rt(e,"modal-footer"),i.jsx(n,{ref:a,className:vt(t,e),...s})));NE.displayName="ModalFooter";const Lb=f.forwardRef(({closeLabel:t="Close",closeVariant:e,closeButton:n=!1,onHide:s,children:a,...l},o)=>{const c=f.useContext(Ob),d=_c(()=>{c?.onHide(),s?.()});return i.jsxs("div",{ref:o,...l,children:[a,n&&i.jsx(yg,{"aria-label":t,variant:e,onClick:d})]})});Lb.displayName="AbstractModalHeader";const CE=f.forwardRef(({bsPrefix:t,className:e,closeLabel:n="Close",closeButton:s=!1,...a},l)=>(t=Rt(t,"modal-header"),i.jsx(Lb,{ref:l,...a,className:vt(e,t),closeLabel:n,closeButton:s})));CE.displayName="ModalHeader";const P5=zm("h4"),_E=f.forwardRef(({className:t,bsPrefix:e,as:n=P5,...s},a)=>(e=Rt(e,"modal-title"),i.jsx(n,{ref:a,className:vt(t,e),...s})));_E.displayName="ModalTitle";function M5(t){return i.jsx(Ba,{...t,timeout:null})}function I5(t){return i.jsx(Ba,{...t,timeout:null})}const SE=f.forwardRef(({bsPrefix:t,className:e,style:n,dialogClassName:s,contentClassName:a,children:l,dialogAs:o=Fb,"data-bs-theme":c,"aria-labelledby":d,"aria-describedby":m,"aria-label":u,show:h=!1,animation:p=!0,backdrop:g=!0,keyboard:v=!0,onEscapeKeyDown:x,onShow:y,onHide:b,container:k,autoFocus:w=!0,enforceFocus:T=!0,restoreFocus:j=!0,restoreFocusOptions:D,onEntered:_,onExit:N,onExiting:A,onEnter:P,onEntering:E,onExited:I,backdropClassName:M,manager:O,...F},H)=>{const[G,z]=f.useState({}),[ie,W]=f.useState(!1),ge=f.useRef(!1),ae=f.useRef(!1),U=f.useRef(null),[X,J]=v5(),he=fg(H,J),le=_c(b),ee=vb();t=Rt(t,"modal");const me=f.useMemo(()=>({onHide:le}),[le]);function K(){return O||wE({isRTL:ee})}function re(xe){if(!Gc)return;const Re=K().getScrollbarWidth()>0,nt=xe.scrollHeight>Kc(xe).documentElement.clientHeight;z({paddingRight:Re&&!nt?Kj():void 0,paddingLeft:!Re&&nt?Kj():void 0})}const oe=_c(()=>{X&&re(X.dialog)});BS(()=>{Tx(window,"resize",oe),U.current==null||U.current()});const C=()=>{ge.current=!0},R=xe=>{ge.current&&X&&xe.target===X.dialog&&(ae.current=!0),ge.current=!1},te=()=>{W(!0),U.current=wS(X.dialog,()=>{W(!1)})},ne=xe=>{xe.target===xe.currentTarget&&te()},Y=xe=>{if(g==="static"){ne(xe);return}if(ae.current||xe.target!==xe.currentTarget){ae.current=!1;return}b?.()},q=xe=>{v?x?.(xe):(xe.preventDefault(),g==="static"&&te())},B=(xe,Re)=>{xe&&re(xe),P?.(xe,Re)},se=xe=>{U.current==null||U.current(),N?.(xe)},Q=(xe,Re)=>{E?.(xe,Re),kS(window,"resize",oe)},pe=xe=>{xe&&(xe.style.display=""),I?.(xe),Tx(window,"resize",oe)},$=f.useCallback(xe=>i.jsx("div",{...xe,className:vt(`${t}-backdrop`,M,!p&&"show")}),[p,M,t]),ce={...n,...G};ce.display="block";const De=xe=>i.jsx("div",{role:"dialog",...xe,style:ce,className:vt(e,t,ie&&`${t}-static`,!p&&"show"),onClick:g?Y:void 0,onMouseUp:R,"data-bs-theme":c,"aria-label":u,"aria-labelledby":d,"aria-describedby":m,children:i.jsx(o,{...F,onMouseDown:C,className:s,contentClassName:a,children:l})});return i.jsx(Ob.Provider,{value:me,children:i.jsx(xE,{show:h,ref:he,backdrop:g,container:k,keyboard:!0,autoFocus:w,enforceFocus:T,restoreFocus:j,restoreFocusOptions:D,onEscapeKeyDown:q,onShow:y,onHide:b,onEnter:B,onEntering:Q,onEntered:_,onExit:se,onExiting:A,onExited:pe,manager:K(),transition:p?M5:void 0,backdropTransition:p?I5:void 0,renderBackdrop:$,renderDialog:De})})});SE.displayName="Modal";const lt=Object.assign(SE,{Body:jE,Header:CE,Title:_E,Footer:NE,Dialog:Fb,TRANSITION_DURATION:300,BACKDROP_TRANSITION_DURATION:150}),$b=f.forwardRef(({className:t,bsPrefix:e,as:n="div",...s},a)=>(e=Rt(e,"nav-item"),i.jsx(n,{ref:a,className:vt(t,e),...s})));$b.displayName="NavItem";const Bb=f.forwardRef(({bsPrefix:t,className:e,as:n=xg,active:s,eventKey:a,disabled:l=!1,...o},c)=>{t=Rt(t,"nav-link");const[d,m]=pE({key:fm(a,o.href),active:s,disabled:l,...o});return i.jsx(n,{...o,...d,ref:c,disabled:l,className:vt(e,t,l&&"disabled",m.isActive&&"active")})});Bb.displayName="NavLink";const EE=f.forwardRef((t,e)=>{const{as:n="div",bsPrefix:s,variant:a,fill:l=!1,justify:o=!1,navbar:c,navbarScroll:d,className:m,activeKey:u,...h}=fb(t,{activeKey:"onSelect"}),p=Rt(s,"nav");let g,v,x=!1;const y=f.useContext(nE),b=f.useContext(wb);return y?(g=y.bsPrefix,x=c??!0):b&&({cardHeaderBsPrefix:v}=b),i.jsx(f5,{as:n,ref:e,activeKey:u,className:vt(m,{[p]:!x,[`${g}-nav`]:x,[`${g}-nav-scroll`]:x&&d,[`${v}-${a}`]:!!v,[`${p}-${a}`]:!!a,[`${p}-fill`]:l,[`${p}-justified`]:o}),...h})});EE.displayName="Nav";const Mn=Object.assign(EE,{Item:$b,Link:Bb}),Ox=new WeakMap,Qj=(t,e)=>{if(!t||!e)return;const n=Ox.get(e)||new Map;Ox.set(e,n);let s=n.get(t);return s||(s=e.matchMedia(t),s.refCount=0,n.set(s.media,s)),s};function O5(t,e=typeof window>"u"?void 0:window){const n=Qj(t,e),[s,a]=f.useState(()=>n?n.matches:!1);return eE(()=>{let l=Qj(t,e);if(!l)return a(!1);let o=Ox.get(e);const c=()=>{a(l.matches)};return l.refCount++,l.addListener(c),c(),()=>{l.removeListener(c),l.refCount--,l.refCount<=0&&o?.delete(l.media),l=void 0}},[t]),s}function F5(t){const e=Object.keys(t);function n(c,d){return c===d?d:c?`${c} and ${d}`:d}function s(c){return e[Math.min(e.indexOf(c)+1,e.length-1)]}function a(c){const d=s(c);let m=t[d];return typeof m=="number"?m=`${m-.2}px`:m=`calc(${m} - 0.2px)`,`(max-width: ${m})`}function l(c){let d=t[c];return typeof d=="number"&&(d=`${d}px`),`(min-width: ${d})`}function o(c,d,m){let u;typeof c=="object"?(u=c,m=d,d=!0):(d=d||!0,u={[c]:d});let h=f.useMemo(()=>Object.entries(u).reduce((p,[g,v])=>((v==="up"||v===!0)&&(p=n(p,l(g))),(v==="down"||v===!0)&&(p=n(p,a(g))),p),""),[JSON.stringify(u)]);return O5(h,m)}return o}const L5=F5({xs:0,sm:576,md:768,lg:992,xl:1200,xxl:1400}),TE=f.forwardRef(({className:t,bsPrefix:e,as:n="div",...s},a)=>(e=Rt(e,"offcanvas-body"),i.jsx(n,{ref:a,className:vt(t,e),...s})));TE.displayName="OffcanvasBody";const $5={[Mi]:"show",[Ns]:"show"},AE=f.forwardRef(({bsPrefix:t,className:e,children:n,in:s=!1,mountOnEnter:a=!1,unmountOnExit:l=!1,appear:o=!1,...c},d)=>(t=Rt(t,"offcanvas"),i.jsx(vg,{ref:d,addEndListener:bb,in:s,mountOnEnter:a,unmountOnExit:l,appear:o,...c,childRef:bo(n),children:(m,u)=>f.cloneElement(n,{...u,className:vt(e,n.props.className,(m===Mi||m===no)&&`${t}-toggling`,$5[m])})})));AE.displayName="OffcanvasToggling";const DE=f.forwardRef(({bsPrefix:t,className:e,closeLabel:n="Close",closeButton:s=!1,...a},l)=>(t=Rt(t,"offcanvas-header"),i.jsx(Lb,{ref:l,...a,className:vt(e,t),closeLabel:n,closeButton:s})));DE.displayName="OffcanvasHeader";const B5=zm("h5"),RE=f.forwardRef(({className:t,bsPrefix:e,as:n=B5,...s},a)=>(e=Rt(e,"offcanvas-title"),i.jsx(n,{ref:a,className:vt(t,e),...s})));RE.displayName="OffcanvasTitle";function q5(t){return i.jsx(AE,{...t})}function H5(t){return i.jsx(Ba,{...t})}const PE=f.forwardRef(({bsPrefix:t,className:e,children:n,"aria-labelledby":s,placement:a="start",responsive:l,show:o=!1,backdrop:c=!0,keyboard:d=!0,scroll:m=!1,onEscapeKeyDown:u,onShow:h,onHide:p,container:g,autoFocus:v=!0,enforceFocus:x=!0,restoreFocus:y=!0,restoreFocusOptions:b,onEntered:k,onExit:w,onExiting:T,onEnter:j,onEntering:D,onExited:_,backdropClassName:N,manager:A,renderStaticNode:P=!1,...E},I)=>{const M=f.useRef();t=Rt(t,"offcanvas");const[O,F]=f.useState(!1),H=_c(p),G=L5(l||"xs","up");f.useEffect(()=>{F(l?o&&!G:o)},[o,l,G]);const z=f.useMemo(()=>({onHide:H}),[H]);function ie(){return A||(m?(M.current||(M.current=new kE({handleContainerOverflow:!1})),M.current):wE())}const W=(X,...J)=>{X&&(X.style.visibility="visible"),j?.(X,...J)},ge=(X,...J)=>{X&&(X.style.visibility=""),_?.(...J)},ae=f.useCallback(X=>i.jsx("div",{...X,className:vt(`${t}-backdrop`,N)}),[N,t]),U=X=>i.jsx("div",{...X,...E,className:vt(e,l?`${t}-${l}`:t,`${t}-${a}`),"aria-labelledby":s,children:n});return i.jsxs(i.Fragment,{children:[!O&&(l||P)&&U({}),i.jsx(Ob.Provider,{value:z,children:i.jsx(xE,{show:O,ref:I,backdrop:c,container:g,keyboard:d,autoFocus:v,enforceFocus:x&&!m,restoreFocus:y,restoreFocusOptions:b,onEscapeKeyDown:u,onShow:h,onHide:H,onEnter:W,onEntering:D,onEntered:k,onExit:w,onExiting:T,onExited:ge,manager:ie(),transition:q5,backdropTransition:H5,renderBackdrop:ae,renderDialog:U})})]})});PE.displayName="Offcanvas";const Iu=Object.assign(PE,{Body:TE,Header:DE,Title:RE}),z5=()=>{};function V5(t,e,{disabled:n,clickTrigger:s}={}){const a=e||z5;q3(t,a,{disabled:n,clickTrigger:s});const l=Hs(o=>{bS(o)&&a(o)});f.useEffect(()=>{if(n||t==null)return;const o=Kc(Ah(t));let c=(o.defaultView||window).event;const d=ur(o,"keyup",m=>{if(m===c){c=void 0;return}l(m)});return()=>{d()}},[t,n,l])}const ME=f.forwardRef((t,e)=>{const{flip:n,offset:s,placement:a,containerPadding:l,popperConfig:o={},transition:c,runTransition:d}=t,[m,u]=Sj(),[h,p]=Sj(),g=Km(u,e),v=Px(t.container),x=Px(t.target),[y,b]=f.useState(!t.show),k=I3(x,m,V3({placement:a,enableEvents:!!t.show,containerPadding:l||5,flip:n,offset:s,arrowElement:h,popperConfig:o}));t.show&&y&&b(!1);const w=(...E)=>{b(!0),t.onExited&&t.onExited(...E)},T=t.show||!y;if(V5(m,t.onHide,{disabled:!t.rootClose||t.rootCloseDisabled,clickTrigger:t.rootCloseEvent}),!T)return null;const{onExit:j,onExiting:D,onEnter:_,onEntering:N,onEntered:A}=t;let P=t.children(Object.assign({},k.attributes.popper,{style:k.styles.popper,ref:g}),{popper:k,placement:a,show:!!t.show,arrowProps:Object.assign({},k.attributes.arrow,{style:k.styles.arrow,ref:p})});return P=Mx(c,d,{in:!!t.show,appear:!0,mountOnEnter:!0,unmountOnExit:!0,children:P,onExit:j,onExiting:D,onExited:w,onEnter:_,onEntering:N,onEntered:A}),v?zl.createPortal(P,v):null});ME.displayName="Overlay";const IE=f.forwardRef(({className:t,bsPrefix:e,as:n="div",...s},a)=>(e=Rt(e,"popover-header"),i.jsx(n,{ref:a,className:vt(t,e),...s})));IE.displayName="PopoverHeader";const qb=f.forwardRef(({className:t,bsPrefix:e,as:n="div",...s},a)=>(e=Rt(e,"popover-body"),i.jsx(n,{ref:a,className:vt(t,e),...s})));qb.displayName="PopoverBody";function OE(t,e){let n=t;return t==="left"?n=e?"end":"start":t==="right"&&(n=e?"start":"end"),n}function FE(t="absolute"){return{position:t,top:"0",left:"0",opacity:"0",pointerEvents:"none"}}const LE=f.forwardRef(({bsPrefix:t,placement:e="right",className:n,style:s,children:a,body:l,arrowProps:o,hasDoneInitialMeasure:c,popper:d,show:m,...u},h)=>{const p=Rt(t,"popover"),g=vb(),[v]=e?.split("-")||[],x=OE(v,g);let y=s;return m&&!c&&(y={...s,...FE(d?.strategy)}),i.jsxs("div",{ref:h,role:"tooltip",style:y,"x-placement":v,className:vt(n,p,v&&`bs-popover-${x}`),...u,children:[i.jsx("div",{className:"popover-arrow",...o}),l?i.jsx(qb,{children:a}):a]})});LE.displayName="Popover";const Fx=Object.assign(LE,{Header:IE,Body:qb,POPPER_OFFSET:[0,8]}),$E=f.forwardRef(({bsPrefix:t,placement:e="right",className:n,style:s,children:a,arrowProps:l,hasDoneInitialMeasure:o,popper:c,show:d,...m},u)=>{t=Rt(t,"tooltip");const h=vb(),[p]=e?.split("-")||[],g=OE(p,h);let v=s;return d&&!o&&(v={...s,...FE(c?.strategy)}),i.jsxs("div",{ref:u,style:v,role:"tooltip","x-placement":p,className:vt(n,t,`bs-tooltip-${g}`),...m,children:[i.jsx("div",{className:"tooltip-arrow",...l}),i.jsx("div",{className:`${t}-inner`,children:a})]})});$E.displayName="Tooltip";const ut=Object.assign($E,{TOOLTIP_OFFSET:[0,6]});function U5(t){const e=f.useRef(null),n=Rt(void 0,"popover"),s=Rt(void 0,"tooltip"),a=f.useMemo(()=>({name:"offset",options:{offset:()=>{if(t)return t;if(e.current){if(Ix(e.current,n))return Fx.POPPER_OFFSET;if(Ix(e.current,s))return ut.TOOLTIP_OFFSET}return[0,0]}}}),[t,n,s]);return[e,[a]]}function W5(t,e){const{ref:n}=t,{ref:s}=e;t.ref=n.__wrapped||(n.__wrapped=a=>n(Jh(a))),e.ref=s.__wrapped||(s.__wrapped=a=>s(Jh(a)))}const BE=f.forwardRef(({children:t,transition:e=Ba,popperConfig:n={},rootClose:s=!1,placement:a="top",show:l=!1,...o},c)=>{const d=f.useRef({}),[m,u]=f.useState(null),[h,p]=U5(o.offset),g=fg(c,h),v=e===!0?Ba:e||void 0,x=_c(y=>{u(y),n==null||n.onFirstUpdate==null||n.onFirstUpdate(y)});return eE(()=>{m&&o.target&&(d.current.scheduleUpdate==null||d.current.scheduleUpdate())},[m,o.target]),f.useEffect(()=>{l||u(null)},[l]),i.jsx(ME,{...o,ref:g,popperConfig:{...n,modifiers:p.concat(n.modifiers||[]),onFirstUpdate:x},transition:v,rootClose:s,placement:a,show:l,children:(y,{arrowProps:b,popper:k,show:w})=>{var T;W5(y,b);const j=k?.placement,D=Object.assign(d.current,{state:k?.state,scheduleUpdate:k?.update,placement:j,outOfBoundaries:(k==null||(T=k.state)==null||(T=T.modifiersData.hide)==null?void 0:T.isReferenceHidden)||!1,strategy:n.strategy}),_=!!m;return typeof t=="function"?t({...y,placement:j,show:w,...!e&&w&&{className:"show"},popper:D,arrowProps:b,hasDoneInitialMeasure:_}):f.cloneElement(t,{...y,placement:j,arrowProps:b,popper:D,hasDoneInitialMeasure:_,className:vt(t.props.className,!e&&w&&"show"),style:{...t.props.style,...y.style}})}})});BE.displayName="Overlay";function K5(t){return t&&typeof t=="object"?t:{show:t,hide:t}}function Zj(t,e,n){const[s]=e,a=s.currentTarget,l=s.relatedTarget||s.nativeEvent[n];(!l||l!==a)&&!gm(a,l)&&t(...e)}Ae.oneOf(["click","hover","focus"]);const Qe=({trigger:t=["hover","focus"],overlay:e,children:n,popperConfig:s={},show:a,defaultShow:l=!1,onToggle:o,delay:c,placement:d,flip:m=d&&d.indexOf("auto")!==-1,...u})=>{const h=f.useRef(null),p=fg(h,bo(n)),g=bO(),v=f.useRef(""),[x,y]=gS(a,l,o),b=K5(c),{onFocus:k,onBlur:w,onClick:T}=typeof n!="function"?f.Children.only(n).props:{},j=F=>{p(Jh(F))},D=f.useCallback(()=>{if(g.clear(),v.current="show",!b.show){y(!0);return}g.set(()=>{v.current==="show"&&y(!0)},b.show)},[b.show,y,g]),_=f.useCallback(()=>{if(g.clear(),v.current="hide",!b.hide){y(!1);return}g.set(()=>{v.current==="hide"&&y(!1)},b.hide)},[b.hide,y,g]),N=f.useCallback((...F)=>{D(),k?.(...F)},[D,k]),A=f.useCallback((...F)=>{_(),w?.(...F)},[_,w]),P=f.useCallback((...F)=>{y(!x),T?.(...F)},[T,y,x]),E=f.useCallback((...F)=>{Zj(D,F,"fromElement")},[D]),I=f.useCallback((...F)=>{Zj(_,F,"toElement")},[_]),M=t==null?[]:[].concat(t),O={ref:j};return M.indexOf("click")!==-1&&(O.onClick=P),M.indexOf("focus")!==-1&&(O.onFocus=N,O.onBlur=A),M.indexOf("hover")!==-1&&(O.onMouseOver=E,O.onMouseOut=I),i.jsxs(i.Fragment,{children:[typeof n=="function"?n(O):f.cloneElement(n,O),i.jsx(BE,{...u,show:x,onHide:_,flip:m,placement:d,popperConfig:s,target:h.current,children:e})]})},Hb=f.forwardRef(({active:t=!1,disabled:e=!1,className:n,style:s,activeLabel:a="(current)",children:l,linkStyle:o,linkClassName:c,as:d=xg,...m},u)=>{const h=t||e?"span":d;return i.jsx("li",{ref:u,style:s,className:vt(n,"page-item",{active:t,disabled:e}),children:i.jsxs(h,{className:vt("page-link",c),style:o,...m,children:[l,t&&a&&i.jsx("span",{className:"visually-hidden",children:a})]})})});Hb.displayName="PageItem";function Gm(t,e,n=t){const s=f.forwardRef(({children:a,...l},o)=>i.jsxs(Hb,{...l,ref:o,children:[i.jsx("span",{"aria-hidden":"true",children:a||e}),i.jsx("span",{className:"visually-hidden",children:n})]}));return s.displayName=t,s}const G5=Gm("First",""),Y5=Gm("Prev","","Previous"),Q5=Gm("Ellipsis","","More"),Z5=Gm("Next",""),X5=Gm("Last",""),qE=f.forwardRef(({bsPrefix:t,className:e,size:n,...s},a)=>{const l=Rt(t,"pagination");return i.jsx("ul",{ref:a,...s,className:vt(e,l,n&&`${l}-${n}`)})});qE.displayName="Pagination";const Rl=Object.assign(qE,{First:G5,Prev:Y5,Ellipsis:Q5,Item:Hb,Next:Z5,Last:X5}),Yn=f.forwardRef(({bsPrefix:t,className:e,as:n="div",...s},a)=>{const l=Rt(t,"row"),o=fS(),c=vS(),d=`${l}-cols`,m=[];return o.forEach(u=>{const h=s[u];delete s[u];let p;h!=null&&typeof h=="object"?{cols:p}=h:p=h;const g=u!==c?`-${u}`:"";p!=null&&m.push(`${d}${g}-${p}`)}),i.jsx(n,{ref:a,...s,className:vt(e,l,...m)})});Yn.displayName="Row";const Ng=f.forwardRef(({bsPrefix:t,variant:e,animation:n="border",size:s,as:a="div",className:l,...o},c)=>{t=Rt(t,"spinner");const d=`${t}-${n}`;return i.jsx(a,{ref:c,...o,className:vt(l,d,s&&`${d}-${s}`,e&&`text-${e}`)})});Ng.displayName="Spinner";const J5=["active","eventKey","mountOnEnter","transition","unmountOnExit","role","onEnter","onEntering","onEntered","onExit","onExiting","onExited"],e4=["activeKey","getControlledId","getControllerId"],t4=["as"];function Lx(t,e){if(t==null)return{};var n={};for(var s in t)if({}.hasOwnProperty.call(t,s)){if(e.indexOf(s)>=0)continue;n[s]=t[s]}return n}function HE(t){let{active:e,eventKey:n,mountOnEnter:s,transition:a,unmountOnExit:l,role:o="tabpanel",onEnter:c,onEntering:d,onEntered:m,onExit:u,onExiting:h,onExited:p}=t,g=Lx(t,J5);const v=f.useContext(Yc);if(!v)return[Object.assign({},g,{role:o}),{eventKey:n,isActive:e,mountOnEnter:s,transition:a,unmountOnExit:l,onEnter:c,onEntering:d,onEntered:m,onExit:u,onExiting:h,onExited:p}];const{activeKey:x,getControlledId:y,getControllerId:b}=v,k=Lx(v,e4),w=fm(n);return[Object.assign({},g,{role:o,id:y(n),"aria-labelledby":b(n)}),{eventKey:n,isActive:e==null&&w!=null?fm(x)===w:e,transition:a||k.transition,mountOnEnter:s??k.mountOnEnter,unmountOnExit:l??k.unmountOnExit,onEnter:c,onEntering:d,onEntered:m,onExit:u,onExiting:h,onExited:p}]}const zE=f.forwardRef((t,e)=>{let{as:n="div"}=t,s=Lx(t,t4);const[a,{isActive:l,onEnter:o,onEntering:c,onEntered:d,onExit:m,onExiting:u,onExited:h,mountOnEnter:p,unmountOnExit:g,transition:v=Ib}]=HE(s);return i.jsx(Yc.Provider,{value:null,children:i.jsx(Dc.Provider,{value:null,children:i.jsx(v,{in:l,onEnter:o,onEntering:c,onEntered:d,onExit:m,onExiting:u,onExited:h,mountOnEnter:p,unmountOnExit:g,children:i.jsx(n,Object.assign({},a,{ref:e,hidden:!l,"aria-hidden":!l}))})})})});zE.displayName="TabPanel";const zb=t=>{const{id:e,generateChildId:n,onSelect:s,activeKey:a,defaultActiveKey:l,transition:o,mountOnEnter:c,unmountOnExit:d,children:m}=t,[u,h]=CO(a,l,s),p=Y3(e),g=f.useMemo(()=>n||((x,y)=>p?`${p}-${y}-${x}`:null),[p,n]),v=f.useMemo(()=>({onSelect:h,activeKey:u,transition:o,mountOnEnter:c||!1,unmountOnExit:d||!1,getControlledId:x=>g(x,"tabpane"),getControllerId:x=>g(x,"tab")}),[h,u,o,c,d,g]);return i.jsx(Yc.Provider,{value:v,children:i.jsx(Dc.Provider,{value:h||null,children:m})})};zb.Panel=zE;function Vb(t){return typeof t=="boolean"?t?Ba:Ib:t}const VE=({transition:t,...e})=>i.jsx(zb,{...e,transition:Vb(t)});VE.displayName="TabContainer";const Ub=f.forwardRef(({className:t,bsPrefix:e,as:n="div",...s},a)=>(e=Rt(e,"tab-content"),i.jsx(n,{ref:a,className:vt(t,e),...s})));Ub.displayName="TabContent";const Wb=f.forwardRef(({bsPrefix:t,transition:e,...n},s)=>{const[{className:a,as:l="div",...o},{isActive:c,onEnter:d,onEntering:m,onEntered:u,onExit:h,onExiting:p,onExited:g,mountOnEnter:v,unmountOnExit:x,transition:y=Ba}]=HE({...n,transition:Vb(e)}),b=Rt(t,"tab-pane");return i.jsx(Yc.Provider,{value:null,children:i.jsx(Dc.Provider,{value:null,children:i.jsx(y,{in:c,onEnter:d,onEntering:m,onEntered:u,onExit:h,onExiting:p,onExited:g,mountOnEnter:v,unmountOnExit:x,children:i.jsx(l,{...o,ref:s,className:vt(a,b,c&&"active")})})})})});Wb.displayName="TabPane";const n4={eventKey:Ae.oneOfType([Ae.string,Ae.number]),title:Ae.node.isRequired,disabled:Ae.bool,tabClassName:Ae.string,tabAttrs:Ae.object},UE=()=>{throw new Error("ReactBootstrap: The `Tab` component is not meant to be rendered! It's an abstract component that is only valid as a direct Child of the `Tabs` Component. For custom tabs components use TabPane and TabsContainer directly")};UE.propTypes=n4;const Rc=Object.assign(UE,{Container:VE,Content:Ub,Pane:Wb}),$x=f.forwardRef(({bsPrefix:t,className:e,striped:n,bordered:s,borderless:a,hover:l,size:o,variant:c,responsive:d,...m},u)=>{const h=Rt(t,"table"),p=vt(e,h,c&&`${h}-${c}`,o&&`${h}-${o}`,n&&`${h}-${typeof n=="string"?`striped-${n}`:"striped"}`,s&&`${h}-bordered`,a&&`${h}-borderless`,l&&`${h}-hover`),g=i.jsx("table",{...m,className:p,ref:u});if(d){let v=`${h}-responsive`;return typeof d=="string"&&(v=`${v}-${d}`),i.jsx("div",{className:v,children:g})}return g});$x.displayName="Table";function i4(t){let e;return kO(t,n=>{e==null&&(e=n.props.eventKey)}),e}function s4(t){const{title:e,eventKey:n,disabled:s,tabClassName:a,tabAttrs:l,id:o}=t.props;return e==null?null:i.jsx($b,{as:"li",role:"presentation",children:i.jsx(Bb,{as:"button",type:"button",eventKey:n,disabled:s,id:o,className:a,...l,children:e})})}const Cg=t=>{const{id:e,onSelect:n,transition:s,mountOnEnter:a=!1,unmountOnExit:l=!1,variant:o="tabs",children:c,activeKey:d=i4(c),...m}=fb(t,{activeKey:"onSelect"});return i.jsxs(zb,{id:e,activeKey:d,onSelect:n,transition:Vb(s),mountOnEnter:a,unmountOnExit:l,children:[i.jsx(Mn,{id:e,...m,role:"tablist",as:"ul",variant:o,children:Tj(c,s4)}),i.jsx(Ub,{children:Tj(c,u=>{const h={...u.props};return delete h.title,delete h.disabled,delete h.tabClassName,delete h.tabAttrs,i.jsx(Wb,{...h})})})]})};Cg.displayName="Tabs";function so(t){"@babel/helpers - typeof";return so=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},so(t)}function a4(t,e){if(so(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var s=n.call(t,e);if(so(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function WE(t){var e=a4(t,"string");return so(e)=="symbol"?e:e+""}function $d(t,e,n){return(e=WE(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Xj(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,s)}return n}function Ot(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Xj(Object(n),!0).forEach(function(s){$d(t,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Xj(Object(n)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(n,s))})}return t}function r4(t){if(Array.isArray(t))return t}function l4(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var s,a,l,o,c=[],d=!0,m=!1;try{if(l=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;d=!1}else for(;!(d=(s=l.call(n)).done)&&(c.push(s.value),c.length!==e);d=!0);}catch(u){m=!0,a=u}finally{try{if(!d&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(m)throw a}}return c}}function Bx(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,s=Array(e);n<e;n++)s[n]=t[n];return s}function KE(t,e){if(t){if(typeof t=="string")return Bx(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Bx(t,e):void 0}}function o4(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function wr(t,e){return r4(t)||l4(t,e)||KE(t,e)||o4()}function c4(t,e){if(t==null)return{};var n={};for(var s in t)if({}.hasOwnProperty.call(t,s)){if(e.indexOf(s)!==-1)continue;n[s]=t[s]}return n}function Qa(t,e){if(t==null)return{};var n,s,a=c4(t,e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(s=0;s<l.length;s++)n=l[s],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}var d4=["defaultInputValue","defaultMenuIsOpen","defaultValue","inputValue","menuIsOpen","onChange","onInputChange","onMenuClose","onMenuOpen","value"];function GE(t){var e=t.defaultInputValue,n=e===void 0?"":e,s=t.defaultMenuIsOpen,a=s===void 0?!1:s,l=t.defaultValue,o=l===void 0?null:l,c=t.inputValue,d=t.menuIsOpen,m=t.onChange,u=t.onInputChange,h=t.onMenuClose,p=t.onMenuOpen,g=t.value,v=Qa(t,d4),x=f.useState(c!==void 0?c:n),y=wr(x,2),b=y[0],k=y[1],w=f.useState(d!==void 0?d:a),T=wr(w,2),j=T[0],D=T[1],_=f.useState(g!==void 0?g:o),N=wr(_,2),A=N[0],P=N[1],E=f.useCallback(function(z,ie){typeof m=="function"&&m(z,ie),P(z)},[m]),I=f.useCallback(function(z,ie){var W;typeof u=="function"&&(W=u(z,ie)),k(W!==void 0?W:z)},[u]),M=f.useCallback(function(){typeof p=="function"&&p(),D(!0)},[p]),O=f.useCallback(function(){typeof h=="function"&&h(),D(!1)},[h]),F=c!==void 0?c:b,H=d!==void 0?d:j,G=g!==void 0?g:A;return Ot(Ot({},v),{},{inputValue:F,menuIsOpen:H,onChange:E,onInputChange:I,onMenuClose:O,onMenuOpen:M,value:G})}function Bt(){return Bt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)({}).hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},Bt.apply(null,arguments)}function m4(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Jj(t,e){for(var n=0;n<e.length;n++){var s=e[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,WE(s.key),s)}}function u4(t,e,n){return e&&Jj(t.prototype,e),n&&Jj(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function qx(t,e){return qx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},qx(t,e)}function h4(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&qx(t,e)}function ip(t){return ip=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ip(t)}function YE(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(YE=function(){return!!t})()}function p4(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function g4(t,e){if(e&&(so(e)=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return p4(t)}function f4(t){var e=YE();return function(){var n,s=ip(t);if(e){var a=ip(this).constructor;n=Reflect.construct(s,arguments,a)}else n=s.apply(this,arguments);return g4(this,n)}}function v4(t){if(Array.isArray(t))return Bx(t)}function x4(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function y4(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dc(t){return v4(t)||x4(t)||KE(t)||y4()}function b4(t){if(t.sheet)return t.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===t)return document.styleSheets[e]}function k4(t){var e=document.createElement("style");return e.setAttribute("data-emotion",t.key),t.nonce!==void 0&&e.setAttribute("nonce",t.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}var w4=(function(){function t(n){var s=this;this._insertTag=function(a){var l;s.tags.length===0?s.insertionPoint?l=s.insertionPoint.nextSibling:s.prepend?l=s.container.firstChild:l=s.before:l=s.tags[s.tags.length-1].nextSibling,s.container.insertBefore(a,l),s.tags.push(a)},this.isSpeedy=n.speedy===void 0?!0:n.speedy,this.tags=[],this.ctr=0,this.nonce=n.nonce,this.key=n.key,this.container=n.container,this.prepend=n.prepend,this.insertionPoint=n.insertionPoint,this.before=null}var e=t.prototype;return e.hydrate=function(s){s.forEach(this._insertTag)},e.insert=function(s){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(k4(this));var a=this.tags[this.tags.length-1];if(this.isSpeedy){var l=b4(a);try{l.insertRule(s,l.cssRules.length)}catch{}}else a.appendChild(document.createTextNode(s));this.ctr++},e.flush=function(){this.tags.forEach(function(s){var a;return(a=s.parentNode)==null?void 0:a.removeChild(s)}),this.tags=[],this.ctr=0},t})(),Ai="-ms-",sp="-moz-",pn="-webkit-",QE="comm",Kb="rule",Gb="decl",j4="@import",ZE="@keyframes",N4="@layer",C4=Math.abs,_g=String.fromCharCode,_4=Object.assign;function S4(t,e){return ki(t,0)^45?(((e<<2^ki(t,0))<<2^ki(t,1))<<2^ki(t,2))<<2^ki(t,3):0}function XE(t){return t.trim()}function E4(t,e){return(t=e.exec(t))?t[0]:t}function fn(t,e,n){return t.replace(e,n)}function Hx(t,e){return t.indexOf(e)}function ki(t,e){return t.charCodeAt(e)|0}function vm(t,e,n){return t.slice(e,n)}function Da(t){return t.length}function Yb(t){return t.length}function Ou(t,e){return e.push(t),t}function T4(t,e){return t.map(e).join("")}var Sg=1,Pc=1,JE=0,us=0,oi=0,Qc="";function Eg(t,e,n,s,a,l,o){return{value:t,root:e,parent:n,type:s,props:a,children:l,line:Sg,column:Pc,length:o,return:""}}function wd(t,e){return _4(Eg("",null,null,"",null,null,0),t,{length:-t.length},e)}function A4(){return oi}function D4(){return oi=us>0?ki(Qc,--us):0,Pc--,oi===10&&(Pc=1,Sg--),oi}function Cs(){return oi=us<JE?ki(Qc,us++):0,Pc++,oi===10&&(Pc=1,Sg++),oi}function Fa(){return ki(Qc,us)}function Dh(){return us}function Ym(t,e){return vm(Qc,t,e)}function xm(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function e2(t){return Sg=Pc=1,JE=Da(Qc=t),us=0,[]}function t2(t){return Qc="",t}function Rh(t){return XE(Ym(us-1,zx(t===91?t+2:t===40?t+1:t)))}function R4(t){for(;(oi=Fa())&&oi<33;)Cs();return xm(t)>2||xm(oi)>3?"":" "}function P4(t,e){for(;--e&&Cs()&&!(oi<48||oi>102||oi>57&&oi<65||oi>70&&oi<97););return Ym(t,Dh()+(e<6&&Fa()==32&&Cs()==32))}function zx(t){for(;Cs();)switch(oi){case t:return us;case 34:case 39:t!==34&&t!==39&&zx(oi);break;case 40:t===41&&zx(t);break;case 92:Cs();break}return us}function M4(t,e){for(;Cs()&&t+oi!==57;)if(t+oi===84&&Fa()===47)break;return"/*"+Ym(e,us-1)+"*"+_g(t===47?t:Cs())}function I4(t){for(;!xm(Fa());)Cs();return Ym(t,us)}function O4(t){return t2(Ph("",null,null,null,[""],t=e2(t),0,[0],t))}function Ph(t,e,n,s,a,l,o,c,d){for(var m=0,u=0,h=o,p=0,g=0,v=0,x=1,y=1,b=1,k=0,w="",T=a,j=l,D=s,_=w;y;)switch(v=k,k=Cs()){case 40:if(v!=108&&ki(_,h-1)==58){Hx(_+=fn(Rh(k),"&","&\f"),"&\f")!=-1&&(b=-1);break}case 34:case 39:case 91:_+=Rh(k);break;case 9:case 10:case 13:case 32:_+=R4(v);break;case 92:_+=P4(Dh()-1,7);continue;case 47:switch(Fa()){case 42:case 47:Ou(F4(M4(Cs(),Dh()),e,n),d);break;default:_+="/"}break;case 123*x:c[m++]=Da(_)*b;case 125*x:case 59:case 0:switch(k){case 0:case 125:y=0;case 59+u:b==-1&&(_=fn(_,/\f/g,"")),g>0&&Da(_)-h&&Ou(g>32?t0(_+";",s,n,h-1):t0(fn(_," ","")+";",s,n,h-2),d);break;case 59:_+=";";default:if(Ou(D=e0(_,e,n,m,u,a,c,w,T=[],j=[],h),l),k===123)if(u===0)Ph(_,e,D,D,T,l,h,c,j);else switch(p===99&&ki(_,3)===110?100:p){case 100:case 108:case 109:case 115:Ph(t,D,D,s&&Ou(e0(t,D,D,0,0,a,c,w,a,T=[],h),j),a,j,h,c,s?T:j);break;default:Ph(_,D,D,D,[""],j,0,c,j)}}m=u=g=0,x=b=1,w=_="",h=o;break;case 58:h=1+Da(_),g=v;default:if(x<1){if(k==123)--x;else if(k==125&&x++==0&&D4()==125)continue}switch(_+=_g(k),k*x){case 38:b=u>0?1:(_+="\f",-1);break;case 44:c[m++]=(Da(_)-1)*b,b=1;break;case 64:Fa()===45&&(_+=Rh(Cs())),p=Fa(),u=h=Da(w=_+=I4(Dh())),k++;break;case 45:v===45&&Da(_)==2&&(x=0)}}return l}function e0(t,e,n,s,a,l,o,c,d,m,u){for(var h=a-1,p=a===0?l:[""],g=Yb(p),v=0,x=0,y=0;v<s;++v)for(var b=0,k=vm(t,h+1,h=C4(x=o[v])),w=t;b<g;++b)(w=XE(x>0?p[b]+" "+k:fn(k,/&\f/g,p[b])))&&(d[y++]=w);return Eg(t,e,n,a===0?Kb:c,d,m,u)}function F4(t,e,n){return Eg(t,e,n,QE,_g(A4()),vm(t,2,-2),0)}function t0(t,e,n,s){return Eg(t,e,n,Gb,vm(t,0,s),vm(t,s+1,-1),s)}function mc(t,e){for(var n="",s=Yb(t),a=0;a<s;a++)n+=e(t[a],a,t,e)||"";return n}function L4(t,e,n,s){switch(t.type){case N4:if(t.children.length)break;case j4:case Gb:return t.return=t.return||t.value;case QE:return"";case ZE:return t.return=t.value+"{"+mc(t.children,s)+"}";case Kb:t.value=t.props.join(",")}return Da(n=mc(t.children,s))?t.return=t.value+"{"+n+"}":""}function $4(t){var e=Yb(t);return function(n,s,a,l){for(var o="",c=0;c<e;c++)o+=t[c](n,s,a,l)||"";return o}}function B4(t){return function(e){e.root||(e=e.return)&&t(e)}}function q4(t){var e=Object.create(null);return function(n){return e[n]===void 0&&(e[n]=t(n)),e[n]}}var H4=function(e,n,s){for(var a=0,l=0;a=l,l=Fa(),a===38&&l===12&&(n[s]=1),!xm(l);)Cs();return Ym(e,us)},z4=function(e,n){var s=-1,a=44;do switch(xm(a)){case 0:a===38&&Fa()===12&&(n[s]=1),e[s]+=H4(us-1,n,s);break;case 2:e[s]+=Rh(a);break;case 4:if(a===44){e[++s]=Fa()===58?"&\f":"",n[s]=e[s].length;break}default:e[s]+=_g(a)}while(a=Cs());return e},V4=function(e,n){return t2(z4(e2(e),n))},n0=new WeakMap,U4=function(e){if(!(e.type!=="rule"||!e.parent||e.length<1)){for(var n=e.value,s=e.parent,a=e.column===s.column&&e.line===s.line;s.type!=="rule";)if(s=s.parent,!s)return;if(!(e.props.length===1&&n.charCodeAt(0)!==58&&!n0.get(s))&&!a){n0.set(e,!0);for(var l=[],o=V4(n,l),c=s.props,d=0,m=0;d<o.length;d++)for(var u=0;u<c.length;u++,m++)e.props[m]=l[d]?o[d].replace(/&\f/g,c[u]):c[u]+" "+o[d]}}},W4=function(e){if(e.type==="decl"){var n=e.value;n.charCodeAt(0)===108&&n.charCodeAt(2)===98&&(e.return="",e.value="")}};function n2(t,e){switch(S4(t,e)){case 5103:return pn+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return pn+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return pn+t+sp+t+Ai+t+t;case 6828:case 4268:return pn+t+Ai+t+t;case 6165:return pn+t+Ai+"flex-"+t+t;case 5187:return pn+t+fn(t,/(\w+).+(:[^]+)/,pn+"box-$1$2"+Ai+"flex-$1$2")+t;case 5443:return pn+t+Ai+"flex-item-"+fn(t,/flex-|-self/,"")+t;case 4675:return pn+t+Ai+"flex-line-pack"+fn(t,/align-content|flex-|-self/,"")+t;case 5548:return pn+t+Ai+fn(t,"shrink","negative")+t;case 5292:return pn+t+Ai+fn(t,"basis","preferred-size")+t;case 6060:return pn+"box-"+fn(t,"-grow","")+pn+t+Ai+fn(t,"grow","positive")+t;case 4554:return pn+fn(t,/([^-])(transform)/g,"$1"+pn+"$2")+t;case 6187:return fn(fn(fn(t,/(zoom-|grab)/,pn+"$1"),/(image-set)/,pn+"$1"),t,"")+t;case 5495:case 3959:return fn(t,/(image-set\([^]*)/,pn+"$1$`$1");case 4968:return fn(fn(t,/(.+:)(flex-)?(.*)/,pn+"box-pack:$3"+Ai+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+pn+t+t;case 4095:case 3583:case 4068:case 2532:return fn(t,/(.+)-inline(.+)/,pn+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Da(t)-1-e>6)switch(ki(t,e+1)){case 109:if(ki(t,e+4)!==45)break;case 102:return fn(t,/(.+:)(.+)-([^]+)/,"$1"+pn+"$2-$3$1"+sp+(ki(t,e+3)==108?"$3":"$2-$3"))+t;case 115:return~Hx(t,"stretch")?n2(fn(t,"stretch","fill-available"),e)+t:t}break;case 4949:if(ki(t,e+1)!==115)break;case 6444:switch(ki(t,Da(t)-3-(~Hx(t,"!important")&&10))){case 107:return fn(t,":",":"+pn)+t;case 101:return fn(t,/(.+:)([^;!]+)(;|!.+)?/,"$1"+pn+(ki(t,14)===45?"inline-":"")+"box$3$1"+pn+"$2$3$1"+Ai+"$2box$3")+t}break;case 5936:switch(ki(t,e+11)){case 114:return pn+t+Ai+fn(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return pn+t+Ai+fn(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return pn+t+Ai+fn(t,/[svh]\w+-[tblr]{2}/,"lr")+t}return pn+t+Ai+t+t}return t}var K4=function(e,n,s,a){if(e.length>-1&&!e.return)switch(e.type){case Gb:e.return=n2(e.value,e.length);break;case ZE:return mc([wd(e,{value:fn(e.value,"@","@"+pn)})],a);case Kb:if(e.length)return T4(e.props,function(l){switch(E4(l,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return mc([wd(e,{props:[fn(l,/:(read-\w+)/,":"+sp+"$1")]})],a);case"::placeholder":return mc([wd(e,{props:[fn(l,/:(plac\w+)/,":"+pn+"input-$1")]}),wd(e,{props:[fn(l,/:(plac\w+)/,":"+sp+"$1")]}),wd(e,{props:[fn(l,/:(plac\w+)/,Ai+"input-$1")]})],a)}return""})}},G4=[K4],Y4=function(e){var n=e.key;if(n==="css"){var s=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(s,function(x){var y=x.getAttribute("data-emotion");y.indexOf(" ")!==-1&&(document.head.appendChild(x),x.setAttribute("data-s",""))})}var a=e.stylisPlugins||G4,l={},o,c=[];o=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function(x){for(var y=x.getAttribute("data-emotion").split(" "),b=1;b<y.length;b++)l[y[b]]=!0;c.push(x)});var d,m=[U4,W4];{var u,h=[L4,B4(function(x){u.insert(x)})],p=$4(m.concat(a,h)),g=function(y){return mc(O4(y),p)};d=function(y,b,k,w){u=k,g(y?y+"{"+b.styles+"}":b.styles),w&&(v.inserted[b.name]=!0)}}var v={key:n,sheet:new w4({key:n,container:o,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:l,registered:{},insert:d};return v.sheet.hydrate(c),v},Yf={exports:{}},yn={};var i0;function Q4(){if(i0)return yn;i0=1;var t=typeof Symbol=="function"&&Symbol.for,e=t?Symbol.for("react.element"):60103,n=t?Symbol.for("react.portal"):60106,s=t?Symbol.for("react.fragment"):60107,a=t?Symbol.for("react.strict_mode"):60108,l=t?Symbol.for("react.profiler"):60114,o=t?Symbol.for("react.provider"):60109,c=t?Symbol.for("react.context"):60110,d=t?Symbol.for("react.async_mode"):60111,m=t?Symbol.for("react.concurrent_mode"):60111,u=t?Symbol.for("react.forward_ref"):60112,h=t?Symbol.for("react.suspense"):60113,p=t?Symbol.for("react.suspense_list"):60120,g=t?Symbol.for("react.memo"):60115,v=t?Symbol.for("react.lazy"):60116,x=t?Symbol.for("react.block"):60121,y=t?Symbol.for("react.fundamental"):60117,b=t?Symbol.for("react.responder"):60118,k=t?Symbol.for("react.scope"):60119;function w(j){if(typeof j=="object"&&j!==null){var D=j.$$typeof;switch(D){case e:switch(j=j.type,j){case d:case m:case s:case l:case a:case h:return j;default:switch(j=j&&j.$$typeof,j){case c:case u:case v:case g:case o:return j;default:return D}}case n:return D}}}function T(j){return w(j)===m}return yn.AsyncMode=d,yn.ConcurrentMode=m,yn.ContextConsumer=c,yn.ContextProvider=o,yn.Element=e,yn.ForwardRef=u,yn.Fragment=s,yn.Lazy=v,yn.Memo=g,yn.Portal=n,yn.Profiler=l,yn.StrictMode=a,yn.Suspense=h,yn.isAsyncMode=function(j){return T(j)||w(j)===d},yn.isConcurrentMode=T,yn.isContextConsumer=function(j){return w(j)===c},yn.isContextProvider=function(j){return w(j)===o},yn.isElement=function(j){return typeof j=="object"&&j!==null&&j.$$typeof===e},yn.isForwardRef=function(j){return w(j)===u},yn.isFragment=function(j){return w(j)===s},yn.isLazy=function(j){return w(j)===v},yn.isMemo=function(j){return w(j)===g},yn.isPortal=function(j){return w(j)===n},yn.isProfiler=function(j){return w(j)===l},yn.isStrictMode=function(j){return w(j)===a},yn.isSuspense=function(j){return w(j)===h},yn.isValidElementType=function(j){return typeof j=="string"||typeof j=="function"||j===s||j===m||j===l||j===a||j===h||j===p||typeof j=="object"&&j!==null&&(j.$$typeof===v||j.$$typeof===g||j.$$typeof===o||j.$$typeof===c||j.$$typeof===u||j.$$typeof===y||j.$$typeof===b||j.$$typeof===k||j.$$typeof===x)},yn.typeOf=w,yn}var s0;function Z4(){return s0||(s0=1,Yf.exports=Q4()),Yf.exports}var Qf,a0;function X4(){if(a0)return Qf;a0=1;var t=Z4(),e={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},n={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},s={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},a={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},l={};l[t.ForwardRef]=s,l[t.Memo]=a;function o(v){return t.isMemo(v)?a:l[v.$$typeof]||e}var c=Object.defineProperty,d=Object.getOwnPropertyNames,m=Object.getOwnPropertySymbols,u=Object.getOwnPropertyDescriptor,h=Object.getPrototypeOf,p=Object.prototype;function g(v,x,y){if(typeof x!="string"){if(p){var b=h(x);b&&b!==p&&g(v,b,y)}var k=d(x);m&&(k=k.concat(m(x)));for(var w=o(v),T=o(x),j=0;j<k.length;++j){var D=k[j];if(!n[D]&&!(y&&y[D])&&!(T&&T[D])&&!(w&&w[D])){var _=u(x,D);try{c(v,D,_)}catch{}}}}return v}return Qf=g,Qf}X4();var J4=!0;function eF(t,e,n){var s="";return n.split(" ").forEach(function(a){t[a]!==void 0?e.push(t[a]+";"):a&&(s+=a+" ")}),s}var i2=function(e,n,s){var a=e.key+"-"+n.name;(s===!1||J4===!1)&&e.registered[a]===void 0&&(e.registered[a]=n.styles)},tF=function(e,n,s){i2(e,n,s);var a=e.key+"-"+n.name;if(e.inserted[n.name]===void 0){var l=n;do e.insert(n===l?"."+a:"",l,e.sheet,!0),l=l.next;while(l!==void 0)}};function nF(t){for(var e=0,n,s=0,a=t.length;a>=4;++s,a-=4)n=t.charCodeAt(s)&255|(t.charCodeAt(++s)&255)<<8|(t.charCodeAt(++s)&255)<<16|(t.charCodeAt(++s)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,e=(n&65535)*1540483477+((n>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(a){case 3:e^=(t.charCodeAt(s+2)&255)<<16;case 2:e^=(t.charCodeAt(s+1)&255)<<8;case 1:e^=t.charCodeAt(s)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}var iF={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},sF=/[A-Z]|^ms/g,aF=/_EMO_([^_]+?)_([^]*?)_EMO_/g,s2=function(e){return e.charCodeAt(1)===45},r0=function(e){return e!=null&&typeof e!="boolean"},Zf=q4(function(t){return s2(t)?t:t.replace(sF,"-$&").toLowerCase()}),l0=function(e,n){switch(e){case"animation":case"animationName":if(typeof n=="string")return n.replace(aF,function(s,a,l){return Ra={name:a,styles:l,next:Ra},a})}return iF[e]!==1&&!s2(e)&&typeof n=="number"&&n!==0?n+"px":n};function ym(t,e,n){if(n==null)return"";var s=n;if(s.__emotion_styles!==void 0)return s;switch(typeof n){case"boolean":return"";case"object":{var a=n;if(a.anim===1)return Ra={name:a.name,styles:a.styles,next:Ra},a.name;var l=n;if(l.styles!==void 0){var o=l.next;if(o!==void 0)for(;o!==void 0;)Ra={name:o.name,styles:o.styles,next:Ra},o=o.next;var c=l.styles+";";return c}return rF(t,e,n)}case"function":{if(t!==void 0){var d=Ra,m=n(t);return Ra=d,ym(t,e,m)}break}}var u=n;return u}function rF(t,e,n){var s="";if(Array.isArray(n))for(var a=0;a<n.length;a++)s+=ym(t,e,n[a])+";";else for(var l in n){var o=n[l];if(typeof o!="object"){var c=o;r0(c)&&(s+=Zf(l)+":"+l0(l,c)+";")}else if(Array.isArray(o)&&typeof o[0]=="string"&&e==null)for(var d=0;d<o.length;d++)r0(o[d])&&(s+=Zf(l)+":"+l0(l,o[d])+";");else{var m=ym(t,e,o);switch(l){case"animation":case"animationName":{s+=Zf(l)+":"+m+";";break}default:s+=l+"{"+m+"}"}}}return s}var o0=/label:\s*([^\s;{]+)\s*(;|$)/g,Ra;function a2(t,e,n){if(t.length===1&&typeof t[0]=="object"&&t[0]!==null&&t[0].styles!==void 0)return t[0];var s=!0,a="";Ra=void 0;var l=t[0];if(l==null||l.raw===void 0)s=!1,a+=ym(n,e,l);else{var o=l;a+=o[0]}for(var c=1;c<t.length;c++)if(a+=ym(n,e,t[c]),s){var d=l;a+=d[c]}o0.lastIndex=0;for(var m="",u;(u=o0.exec(a))!==null;)m+="-"+u[1];var h=nF(a)+m;return{name:h,styles:a,next:Ra}}var lF=function(e){return e()},oF=fj.useInsertionEffect?fj.useInsertionEffect:!1,cF=oF||lF,r2=f.createContext(typeof HTMLElement<"u"?Y4({key:"css"}):null);r2.Provider;var dF=function(e){return f.forwardRef(function(n,s){var a=f.useContext(r2);return e(n,a,s)})},mF=f.createContext({}),Qb={}.hasOwnProperty,Vx="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",uF=function(e,n){var s={};for(var a in n)Qb.call(n,a)&&(s[a]=n[a]);return s[Vx]=e,s},hF=function(e){var n=e.cache,s=e.serialized,a=e.isStringTag;return i2(n,s,a),cF(function(){return tF(n,s,a)}),null},pF=dF(function(t,e,n){var s=t.css;typeof s=="string"&&e.registered[s]!==void 0&&(s=e.registered[s]);var a=t[Vx],l=[s],o="";typeof t.className=="string"?o=eF(e.registered,l,t.className):t.className!=null&&(o=t.className+" ");var c=a2(l,void 0,f.useContext(mF));o+=e.key+"-"+c.name;var d={};for(var m in t)Qb.call(t,m)&&m!=="css"&&m!==Vx&&(d[m]=t[m]);return d.className=o,n&&(d.ref=n),f.createElement(f.Fragment,null,f.createElement(hF,{cache:e,serialized:c,isStringTag:typeof a=="string"}),f.createElement(a,d))}),gF=pF,It=function(e,n){var s=arguments;if(n==null||!Qb.call(n,"css"))return f.createElement.apply(void 0,s);var a=s.length,l=new Array(a);l[0]=gF,l[1]=uF(e,n);for(var o=2;o<a;o++)l[o]=s[o];return f.createElement.apply(null,l)};(function(t){var e;e||(e=t.JSX||(t.JSX={}))})(It||(It={}));function Zb(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return a2(e)}function fF(){var t=Zb.apply(void 0,arguments),e="animation-"+t.name;return{name:e,styles:"@keyframes "+e+"{"+t.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}function vF(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}const xF=Math.min,yF=Math.max,ap=Math.round,Fu=Math.floor,rp=t=>({x:t,y:t});function bF(t){const{x:e,y:n,width:s,height:a}=t;return{width:s,height:a,top:n,left:e,right:e+s,bottom:n+a,x:e,y:n}}function Tg(){return typeof window<"u"}function l2(t){return c2(t)?(t.nodeName||"").toLowerCase():"#document"}function Er(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function o2(t){var e;return(e=(c2(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function c2(t){return Tg()?t instanceof Node||t instanceof Er(t).Node:!1}function kF(t){return Tg()?t instanceof Element||t instanceof Er(t).Element:!1}function Xb(t){return Tg()?t instanceof HTMLElement||t instanceof Er(t).HTMLElement:!1}function c0(t){return!Tg()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Er(t).ShadowRoot}const wF=new Set(["inline","contents"]);function d2(t){const{overflow:e,overflowX:n,overflowY:s,display:a}=Jb(t);return/auto|scroll|overlay|hidden|clip/.test(e+s+n)&&!wF.has(a)}function jF(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const NF=new Set(["html","body","#document"]);function CF(t){return NF.has(l2(t))}function Jb(t){return Er(t).getComputedStyle(t)}function _F(t){if(l2(t)==="html")return t;const e=t.assignedSlot||t.parentNode||c0(t)&&t.host||o2(t);return c0(e)?e.host:e}function m2(t){const e=_F(t);return CF(e)?t.ownerDocument?t.ownerDocument.body:t.body:Xb(e)&&d2(e)?e:m2(e)}function lp(t,e,n){var s;e===void 0&&(e=[]),n===void 0&&(n=!0);const a=m2(t),l=a===((s=t.ownerDocument)==null?void 0:s.body),o=Er(a);if(l){const c=Ux(o);return e.concat(o,o.visualViewport||[],d2(a)?a:[],c&&n?lp(c):[])}return e.concat(a,lp(a,[],n))}function Ux(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function SF(t){const e=Jb(t);let n=parseFloat(e.width)||0,s=parseFloat(e.height)||0;const a=Xb(t),l=a?t.offsetWidth:n,o=a?t.offsetHeight:s,c=ap(n)!==l||ap(s)!==o;return c&&(n=l,s=o),{width:n,height:s,$:c}}function ek(t){return kF(t)?t:t.contextElement}function d0(t){const e=ek(t);if(!Xb(e))return rp(1);const n=e.getBoundingClientRect(),{width:s,height:a,$:l}=SF(e);let o=(l?ap(n.width):n.width)/s,c=(l?ap(n.height):n.height)/a;return(!o||!Number.isFinite(o))&&(o=1),(!c||!Number.isFinite(c))&&(c=1),{x:o,y:c}}const EF=rp(0);function TF(t){const e=Er(t);return!jF()||!e.visualViewport?EF:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function AF(t,e,n){return!1}function m0(t,e,n,s){e===void 0&&(e=!1);const a=t.getBoundingClientRect(),l=ek(t);let o=rp(1);e&&(o=d0(t));const c=AF()?TF(l):rp(0);let d=(a.left+c.x)/o.x,m=(a.top+c.y)/o.y,u=a.width/o.x,h=a.height/o.y;if(l){const p=Er(l),g=s;let v=p,x=Ux(v);for(;x&&s&&g!==v;){const y=d0(x),b=x.getBoundingClientRect(),k=Jb(x),w=b.left+(x.clientLeft+parseFloat(k.paddingLeft))*y.x,T=b.top+(x.clientTop+parseFloat(k.paddingTop))*y.y;d*=y.x,m*=y.y,u*=y.x,h*=y.y,d+=w,m+=T,v=Er(x),x=Ux(v)}}return bF({width:u,height:h,x:d,y:m})}function u2(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function DF(t,e){let n=null,s;const a=o2(t);function l(){var c;clearTimeout(s),(c=n)==null||c.disconnect(),n=null}function o(c,d){c===void 0&&(c=!1),d===void 0&&(d=1),l();const m=t.getBoundingClientRect(),{left:u,top:h,width:p,height:g}=m;if(c||e(),!p||!g)return;const v=Fu(h),x=Fu(a.clientWidth-(u+p)),y=Fu(a.clientHeight-(h+g)),b=Fu(u),w={rootMargin:-v+"px "+-x+"px "+-y+"px "+-b+"px",threshold:yF(0,xF(1,d))||1};let T=!0;function j(D){const _=D[0].intersectionRatio;if(_!==d){if(!T)return o();_?o(!1,_):s=setTimeout(()=>{o(!1,1e-7)},1e3)}_===1&&!u2(m,t.getBoundingClientRect())&&o(),T=!1}try{n=new IntersectionObserver(j,{...w,root:a.ownerDocument})}catch{n=new IntersectionObserver(j,w)}n.observe(t)}return o(!0),l}function RF(t,e,n,s){s===void 0&&(s={});const{ancestorScroll:a=!0,ancestorResize:l=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:c=typeof IntersectionObserver=="function",animationFrame:d=!1}=s,m=ek(t),u=a||l?[...m?lp(m):[],...lp(e)]:[];u.forEach(b=>{a&&b.addEventListener("scroll",n,{passive:!0}),l&&b.addEventListener("resize",n)});const h=m&&c?DF(m,n):null;let p=-1,g=null;o&&(g=new ResizeObserver(b=>{let[k]=b;k&&k.target===m&&g&&(g.unobserve(e),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var w;(w=g)==null||w.observe(e)})),n()}),m&&!d&&g.observe(m),g.observe(e));let v,x=d?m0(t):null;d&&y();function y(){const b=m0(t);x&&!u2(x,b)&&n(),x=b,v=requestAnimationFrame(y)}return n(),()=>{var b;u.forEach(k=>{a&&k.removeEventListener("scroll",n),l&&k.removeEventListener("resize",n)}),h?.(),(b=g)==null||b.disconnect(),g=null,d&&cancelAnimationFrame(v)}}var op=f.useLayoutEffect,PF=["className","clearValue","cx","getStyles","getClassNames","getValue","hasValue","isMulti","isRtl","options","selectOption","selectProps","setValue","theme"],cp=function(){};function MF(t,e){return e?e[0]==="-"?t+e:t+"__"+e:t}function IF(t,e){for(var n=arguments.length,s=new Array(n>2?n-2:0),a=2;a<n;a++)s[a-2]=arguments[a];var l=[].concat(s);if(e&&t)for(var o in e)e.hasOwnProperty(o)&&e[o]&&l.push("".concat(MF(t,o)));return l.filter(function(c){return c}).map(function(c){return String(c).trim()}).join(" ")}var dp=function(e){return VF(e)?e.filter(Boolean):so(e)==="object"&&e!==null?[e]:[]},h2=function(e){e.className,e.clearValue,e.cx,e.getStyles,e.getClassNames,e.getValue,e.hasValue,e.isMulti,e.isRtl,e.options,e.selectOption,e.selectProps,e.setValue,e.theme;var n=Qa(e,PF);return Ot({},n)},Qn=function(e,n,s){var a=e.cx,l=e.getStyles,o=e.getClassNames,c=e.className;return{css:l(n,e),className:a(s??{},o(n,e),c)}};function Ag(t){return[document.documentElement,document.body,window].indexOf(t)>-1}function OF(t){return Ag(t)?window.innerHeight:t.clientHeight}function p2(t){return Ag(t)?window.pageYOffset:t.scrollTop}function mp(t,e){if(Ag(t)){window.scrollTo(0,e);return}t.scrollTop=e}function FF(t){var e=getComputedStyle(t),n=e.position==="absolute",s=/(auto|scroll)/;if(e.position==="fixed")return document.documentElement;for(var a=t;a=a.parentElement;)if(e=getComputedStyle(a),!(n&&e.position==="static")&&s.test(e.overflow+e.overflowY+e.overflowX))return a;return document.documentElement}function LF(t,e,n,s){return n*((t=t/s-1)*t*t+1)+e}function Lu(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:200,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:cp,a=p2(t),l=e-a,o=10,c=0;function d(){c+=o;var m=LF(c,a,l,n);mp(t,m),c<n?window.requestAnimationFrame(d):s(t)}d()}function u0(t,e){var n=t.getBoundingClientRect(),s=e.getBoundingClientRect(),a=e.offsetHeight/3;s.bottom+a>n.bottom?mp(t,Math.min(e.offsetTop+e.clientHeight-t.offsetHeight+a,t.scrollHeight)):s.top-a<n.top&&mp(t,Math.max(e.offsetTop-a,0))}function $F(t){var e=t.getBoundingClientRect();return{bottom:e.bottom,height:e.height,left:e.left,right:e.right,top:e.top,width:e.width}}function h0(){try{return document.createEvent("TouchEvent"),!0}catch{return!1}}function BF(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch{return!1}}var g2=!1,qF={get passive(){return g2=!0}},$u=typeof window<"u"?window:{};$u.addEventListener&&$u.removeEventListener&&($u.addEventListener("p",cp,qF),$u.removeEventListener("p",cp,!1));var HF=g2;function zF(t){return t!=null}function VF(t){return Array.isArray(t)}function Bd(t,e,n){return t?e:n}var UF=function(e){for(var n=arguments.length,s=new Array(n>1?n-1:0),a=1;a<n;a++)s[a-1]=arguments[a];var l=Object.entries(e).filter(function(o){var c=wr(o,1),d=c[0];return!s.includes(d)});return l.reduce(function(o,c){var d=wr(c,2),m=d[0],u=d[1];return o[m]=u,o},{})},WF=["children","innerProps"],KF=["children","innerProps"];function GF(t){var e=t.maxHeight,n=t.menuEl,s=t.minHeight,a=t.placement,l=t.shouldScroll,o=t.isFixedPosition,c=t.controlHeight,d=FF(n),m={placement:"bottom",maxHeight:e};if(!n||!n.offsetParent)return m;var u=d.getBoundingClientRect(),h=u.height,p=n.getBoundingClientRect(),g=p.bottom,v=p.height,x=p.top,y=n.offsetParent.getBoundingClientRect(),b=y.top,k=o?window.innerHeight:OF(d),w=p2(d),T=parseInt(getComputedStyle(n).marginBottom,10),j=parseInt(getComputedStyle(n).marginTop,10),D=b-j,_=k-x,N=D+w,A=h-w-x,P=g-k+w+T,E=w+x-j,I=160;switch(a){case"auto":case"bottom":if(_>=v)return{placement:"bottom",maxHeight:e};if(A>=v&&!o)return l&&Lu(d,P,I),{placement:"bottom",maxHeight:e};if(!o&&A>=s||o&&_>=s){l&&Lu(d,P,I);var M=o?_-T:A-T;return{placement:"bottom",maxHeight:M}}if(a==="auto"||o){var O=e,F=o?D:N;return F>=s&&(O=Math.min(F-T-c,e)),{placement:"top",maxHeight:O}}if(a==="bottom")return l&&mp(d,P),{placement:"bottom",maxHeight:e};break;case"top":if(D>=v)return{placement:"top",maxHeight:e};if(N>=v&&!o)return l&&Lu(d,E,I),{placement:"top",maxHeight:e};if(!o&&N>=s||o&&D>=s){var H=e;return(!o&&N>=s||o&&D>=s)&&(H=o?D-j:N-j),l&&Lu(d,E,I),{placement:"top",maxHeight:H}}return{placement:"bottom",maxHeight:e};default:throw new Error('Invalid placement provided "'.concat(a,'".'))}return m}function YF(t){var e={bottom:"top",top:"bottom"};return t?e[t]:"bottom"}var f2=function(e){return e==="auto"?"bottom":e},QF=function(e,n){var s,a=e.placement,l=e.theme,o=l.borderRadius,c=l.spacing,d=l.colors;return Ot((s={label:"menu"},$d(s,YF(a),"100%"),$d(s,"position","absolute"),$d(s,"width","100%"),$d(s,"zIndex",1),s),n?{}:{backgroundColor:d.neutral0,borderRadius:o,boxShadow:"0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)",marginBottom:c.menuGutter,marginTop:c.menuGutter})},v2=f.createContext(null),ZF=function(e){var n=e.children,s=e.minMenuHeight,a=e.maxMenuHeight,l=e.menuPlacement,o=e.menuPosition,c=e.menuShouldScrollIntoView,d=e.theme,m=f.useContext(v2)||{},u=m.setPortalPlacement,h=f.useRef(null),p=f.useState(a),g=wr(p,2),v=g[0],x=g[1],y=f.useState(null),b=wr(y,2),k=b[0],w=b[1],T=d.spacing.controlHeight;return op(function(){var j=h.current;if(j){var D=o==="fixed",_=c&&!D,N=GF({maxHeight:a,menuEl:j,minHeight:s,placement:l,shouldScroll:_,isFixedPosition:D,controlHeight:T});x(N.maxHeight),w(N.placement),u?.(N.placement)}},[a,l,o,c,s,u,T]),n({ref:h,placerProps:Ot(Ot({},e),{},{placement:k||f2(l),maxHeight:v})})},XF=function(e){var n=e.children,s=e.innerRef,a=e.innerProps;return It("div",Bt({},Qn(e,"menu",{menu:!0}),{ref:s},a),n)},JF=XF,eL=function(e,n){var s=e.maxHeight,a=e.theme.spacing.baseUnit;return Ot({maxHeight:s,overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},n?{}:{paddingBottom:a,paddingTop:a})},tL=function(e){var n=e.children,s=e.innerProps,a=e.innerRef,l=e.isMulti;return It("div",Bt({},Qn(e,"menuList",{"menu-list":!0,"menu-list--is-multi":l}),{ref:a},s),n)},x2=function(e,n){var s=e.theme,a=s.spacing.baseUnit,l=s.colors;return Ot({textAlign:"center"},n?{}:{color:l.neutral40,padding:"".concat(a*2,"px ").concat(a*3,"px")})},nL=x2,iL=x2,sL=function(e){var n=e.children,s=n===void 0?"No options":n,a=e.innerProps,l=Qa(e,WF);return It("div",Bt({},Qn(Ot(Ot({},l),{},{children:s,innerProps:a}),"noOptionsMessage",{"menu-notice":!0,"menu-notice--no-options":!0}),a),s)},aL=function(e){var n=e.children,s=n===void 0?"Loading...":n,a=e.innerProps,l=Qa(e,KF);return It("div",Bt({},Qn(Ot(Ot({},l),{},{children:s,innerProps:a}),"loadingMessage",{"menu-notice":!0,"menu-notice--loading":!0}),a),s)},rL=function(e){var n=e.rect,s=e.offset,a=e.position;return{left:n.left,position:a,top:s,width:n.width,zIndex:1}},lL=function(e){var n=e.appendTo,s=e.children,a=e.controlElement,l=e.innerProps,o=e.menuPlacement,c=e.menuPosition,d=f.useRef(null),m=f.useRef(null),u=f.useState(f2(o)),h=wr(u,2),p=h[0],g=h[1],v=f.useMemo(function(){return{setPortalPlacement:g}},[]),x=f.useState(null),y=wr(x,2),b=y[0],k=y[1],w=f.useCallback(function(){if(a){var _=$F(a),N=c==="fixed"?0:window.pageYOffset,A=_[p]+N;(A!==b?.offset||_.left!==b?.rect.left||_.width!==b?.rect.width)&&k({offset:A,rect:_})}},[a,c,p,b?.offset,b?.rect.left,b?.rect.width]);op(function(){w()},[w]);var T=f.useCallback(function(){typeof m.current=="function"&&(m.current(),m.current=null),a&&d.current&&(m.current=RF(a,d.current,w,{elementResize:"ResizeObserver"in window}))},[a,w]);op(function(){T()},[T]);var j=f.useCallback(function(_){d.current=_,T()},[T]);if(!n&&c!=="fixed"||!b)return null;var D=It("div",Bt({ref:j},Qn(Ot(Ot({},e),{},{offset:b.offset,position:c,rect:b.rect}),"menuPortal",{"menu-portal":!0}),l),s);return It(v2.Provider,{value:v},n?Ma.createPortal(D,n):D)},oL=function(e){var n=e.isDisabled,s=e.isRtl;return{label:"container",direction:s?"rtl":void 0,pointerEvents:n?"none":void 0,position:"relative"}},cL=function(e){var n=e.children,s=e.innerProps,a=e.isDisabled,l=e.isRtl;return It("div",Bt({},Qn(e,"container",{"--is-disabled":a,"--is-rtl":l}),s),n)},dL=function(e,n){var s=e.theme.spacing,a=e.isMulti,l=e.hasValue,o=e.selectProps.controlShouldRenderValue;return Ot({alignItems:"center",display:a&&l&&o?"flex":"grid",flex:1,flexWrap:"wrap",WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"},n?{}:{padding:"".concat(s.baseUnit/2,"px ").concat(s.baseUnit*2,"px")})},mL=function(e){var n=e.children,s=e.innerProps,a=e.isMulti,l=e.hasValue;return It("div",Bt({},Qn(e,"valueContainer",{"value-container":!0,"value-container--is-multi":a,"value-container--has-value":l}),s),n)},uL=function(){return{alignItems:"center",alignSelf:"stretch",display:"flex",flexShrink:0}},hL=function(e){var n=e.children,s=e.innerProps;return It("div",Bt({},Qn(e,"indicatorsContainer",{indicators:!0}),s),n)},p0,pL=["size"],gL=["innerProps","isRtl","size"],fL={name:"8mmkcg",styles:"display:inline-block;fill:currentColor;line-height:1;stroke:currentColor;stroke-width:0"},y2=function(e){var n=e.size,s=Qa(e,pL);return It("svg",Bt({height:n,width:n,viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",css:fL},s))},tk=function(e){return It(y2,Bt({size:20},e),It("path",{d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"}))},b2=function(e){return It(y2,Bt({size:20},e),It("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"}))},k2=function(e,n){var s=e.isFocused,a=e.theme,l=a.spacing.baseUnit,o=a.colors;return Ot({label:"indicatorContainer",display:"flex",transition:"color 150ms"},n?{}:{color:s?o.neutral60:o.neutral20,padding:l*2,":hover":{color:s?o.neutral80:o.neutral40}})},vL=k2,xL=function(e){var n=e.children,s=e.innerProps;return It("div",Bt({},Qn(e,"dropdownIndicator",{indicator:!0,"dropdown-indicator":!0}),s),n||It(b2,null))},yL=k2,bL=function(e){var n=e.children,s=e.innerProps;return It("div",Bt({},Qn(e,"clearIndicator",{indicator:!0,"clear-indicator":!0}),s),n||It(tk,null))},kL=function(e,n){var s=e.isDisabled,a=e.theme,l=a.spacing.baseUnit,o=a.colors;return Ot({label:"indicatorSeparator",alignSelf:"stretch",width:1},n?{}:{backgroundColor:s?o.neutral10:o.neutral20,marginBottom:l*2,marginTop:l*2})},wL=function(e){var n=e.innerProps;return It("span",Bt({},n,Qn(e,"indicatorSeparator",{"indicator-separator":!0})))},jL=fF(p0||(p0=vF([`
  0%, 80%, 100% { opacity: 0; }
  40% { opacity: 1; }
`]))),NL=function(e,n){var s=e.isFocused,a=e.size,l=e.theme,o=l.colors,c=l.spacing.baseUnit;return Ot({label:"loadingIndicator",display:"flex",transition:"color 150ms",alignSelf:"center",fontSize:a,lineHeight:1,marginRight:a,textAlign:"center",verticalAlign:"middle"},n?{}:{color:s?o.neutral60:o.neutral20,padding:c*2})},Xf=function(e){var n=e.delay,s=e.offset;return It("span",{css:Zb({animation:"".concat(jL," 1s ease-in-out ").concat(n,"ms infinite;"),backgroundColor:"currentColor",borderRadius:"1em",display:"inline-block",marginLeft:s?"1em":void 0,height:"1em",verticalAlign:"top",width:"1em"},"","")})},CL=function(e){var n=e.innerProps,s=e.isRtl,a=e.size,l=a===void 0?4:a,o=Qa(e,gL);return It("div",Bt({},Qn(Ot(Ot({},o),{},{innerProps:n,isRtl:s,size:l}),"loadingIndicator",{indicator:!0,"loading-indicator":!0}),n),It(Xf,{delay:0,offset:s}),It(Xf,{delay:160,offset:!0}),It(Xf,{delay:320,offset:!s}))},_L=function(e,n){var s=e.isDisabled,a=e.isFocused,l=e.theme,o=l.colors,c=l.borderRadius,d=l.spacing;return Ot({label:"control",alignItems:"center",cursor:"default",display:"flex",flexWrap:"wrap",justifyContent:"space-between",minHeight:d.controlHeight,outline:"0 !important",position:"relative",transition:"all 100ms"},n?{}:{backgroundColor:s?o.neutral5:o.neutral0,borderColor:s?o.neutral10:a?o.primary:o.neutral20,borderRadius:c,borderStyle:"solid",borderWidth:1,boxShadow:a?"0 0 0 1px ".concat(o.primary):void 0,"&:hover":{borderColor:a?o.primary:o.neutral30}})},SL=function(e){var n=e.children,s=e.isDisabled,a=e.isFocused,l=e.innerRef,o=e.innerProps,c=e.menuIsOpen;return It("div",Bt({ref:l},Qn(e,"control",{control:!0,"control--is-disabled":s,"control--is-focused":a,"control--menu-is-open":c}),o,{"aria-disabled":s||void 0}),n)},EL=SL,TL=["data"],AL=function(e,n){var s=e.theme.spacing;return n?{}:{paddingBottom:s.baseUnit*2,paddingTop:s.baseUnit*2}},DL=function(e){var n=e.children,s=e.cx,a=e.getStyles,l=e.getClassNames,o=e.Heading,c=e.headingProps,d=e.innerProps,m=e.label,u=e.theme,h=e.selectProps;return It("div",Bt({},Qn(e,"group",{group:!0}),d),It(o,Bt({},c,{selectProps:h,theme:u,getStyles:a,getClassNames:l,cx:s}),m),It("div",null,n))},RL=function(e,n){var s=e.theme,a=s.colors,l=s.spacing;return Ot({label:"group",cursor:"default",display:"block"},n?{}:{color:a.neutral40,fontSize:"75%",fontWeight:500,marginBottom:"0.25em",paddingLeft:l.baseUnit*3,paddingRight:l.baseUnit*3,textTransform:"uppercase"})},PL=function(e){var n=h2(e);n.data;var s=Qa(n,TL);return It("div",Bt({},Qn(e,"groupHeading",{"group-heading":!0}),s))},ML=DL,IL=["innerRef","isDisabled","isHidden","inputClassName"],OL=function(e,n){var s=e.isDisabled,a=e.value,l=e.theme,o=l.spacing,c=l.colors;return Ot(Ot({visibility:s?"hidden":"visible",transform:a?"translateZ(0)":""},FL),n?{}:{margin:o.baseUnit/2,paddingBottom:o.baseUnit/2,paddingTop:o.baseUnit/2,color:c.neutral80})},w2={gridArea:"1 / 2",font:"inherit",minWidth:"2px",border:0,margin:0,outline:0,padding:0},FL={flex:"1 1 auto",display:"inline-grid",gridArea:"1 / 1 / 2 / 3",gridTemplateColumns:"0 min-content","&:after":Ot({content:'attr(data-value) " "',visibility:"hidden",whiteSpace:"pre"},w2)},LL=function(e){return Ot({label:"input",color:"inherit",background:0,opacity:e?0:1,width:"100%"},w2)},$L=function(e){var n=e.cx,s=e.value,a=h2(e),l=a.innerRef,o=a.isDisabled,c=a.isHidden,d=a.inputClassName,m=Qa(a,IL);return It("div",Bt({},Qn(e,"input",{"input-container":!0}),{"data-value":s||""}),It("input",Bt({className:n({input:!0},d),ref:l,style:LL(c),disabled:o},m)))},BL=$L,qL=function(e,n){var s=e.theme,a=s.spacing,l=s.borderRadius,o=s.colors;return Ot({label:"multiValue",display:"flex",minWidth:0},n?{}:{backgroundColor:o.neutral10,borderRadius:l/2,margin:a.baseUnit/2})},HL=function(e,n){var s=e.theme,a=s.borderRadius,l=s.colors,o=e.cropWithEllipsis;return Ot({overflow:"hidden",textOverflow:o||o===void 0?"ellipsis":void 0,whiteSpace:"nowrap"},n?{}:{borderRadius:a/2,color:l.neutral80,fontSize:"85%",padding:3,paddingLeft:6})},zL=function(e,n){var s=e.theme,a=s.spacing,l=s.borderRadius,o=s.colors,c=e.isFocused;return Ot({alignItems:"center",display:"flex"},n?{}:{borderRadius:l/2,backgroundColor:c?o.dangerLight:void 0,paddingLeft:a.baseUnit,paddingRight:a.baseUnit,":hover":{backgroundColor:o.dangerLight,color:o.danger}})},j2=function(e){var n=e.children,s=e.innerProps;return It("div",s,n)},VL=j2,UL=j2;function WL(t){var e=t.children,n=t.innerProps;return It("div",Bt({role:"button"},n),e||It(tk,{size:14}))}var KL=function(e){var n=e.children,s=e.components,a=e.data,l=e.innerProps,o=e.isDisabled,c=e.removeProps,d=e.selectProps,m=s.Container,u=s.Label,h=s.Remove;return It(m,{data:a,innerProps:Ot(Ot({},Qn(e,"multiValue",{"multi-value":!0,"multi-value--is-disabled":o})),l),selectProps:d},It(u,{data:a,innerProps:Ot({},Qn(e,"multiValueLabel",{"multi-value__label":!0})),selectProps:d},n),It(h,{data:a,innerProps:Ot(Ot({},Qn(e,"multiValueRemove",{"multi-value__remove":!0})),{},{"aria-label":"Remove ".concat(n||"option")},c),selectProps:d}))},GL=KL,YL=function(e,n){var s=e.isDisabled,a=e.isFocused,l=e.isSelected,o=e.theme,c=o.spacing,d=o.colors;return Ot({label:"option",cursor:"default",display:"block",fontSize:"inherit",width:"100%",userSelect:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)"},n?{}:{backgroundColor:l?d.primary:a?d.primary25:"transparent",color:s?d.neutral20:l?d.neutral0:"inherit",padding:"".concat(c.baseUnit*2,"px ").concat(c.baseUnit*3,"px"),":active":{backgroundColor:s?void 0:l?d.primary:d.primary50}})},QL=function(e){var n=e.children,s=e.isDisabled,a=e.isFocused,l=e.isSelected,o=e.innerRef,c=e.innerProps;return It("div",Bt({},Qn(e,"option",{option:!0,"option--is-disabled":s,"option--is-focused":a,"option--is-selected":l}),{ref:o,"aria-disabled":s},c),n)},ZL=QL,XL=function(e,n){var s=e.theme,a=s.spacing,l=s.colors;return Ot({label:"placeholder",gridArea:"1 / 1 / 2 / 3"},n?{}:{color:l.neutral50,marginLeft:a.baseUnit/2,marginRight:a.baseUnit/2})},JL=function(e){var n=e.children,s=e.innerProps;return It("div",Bt({},Qn(e,"placeholder",{placeholder:!0}),s),n)},e6=JL,t6=function(e,n){var s=e.isDisabled,a=e.theme,l=a.spacing,o=a.colors;return Ot({label:"singleValue",gridArea:"1 / 1 / 2 / 3",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},n?{}:{color:s?o.neutral40:o.neutral80,marginLeft:l.baseUnit/2,marginRight:l.baseUnit/2})},n6=function(e){var n=e.children,s=e.isDisabled,a=e.innerProps;return It("div",Bt({},Qn(e,"singleValue",{"single-value":!0,"single-value--is-disabled":s}),a),n)},i6=n6,N2={ClearIndicator:bL,Control:EL,DropdownIndicator:xL,DownChevron:b2,CrossIcon:tk,Group:ML,GroupHeading:PL,IndicatorsContainer:hL,IndicatorSeparator:wL,Input:BL,LoadingIndicator:CL,Menu:JF,MenuList:tL,MenuPortal:lL,LoadingMessage:aL,NoOptionsMessage:sL,MultiValue:GL,MultiValueContainer:VL,MultiValueLabel:UL,MultiValueRemove:WL,Option:ZL,Placeholder:e6,SelectContainer:cL,SingleValue:i6,ValueContainer:mL},s6=function(e){return Ot(Ot({},N2),e.components)},g0=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function a6(t,e){return!!(t===e||g0(t)&&g0(e))}function r6(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!a6(t[n],e[n]))return!1;return!0}function l6(t,e){e===void 0&&(e=r6);var n=null;function s(){for(var a=[],l=0;l<arguments.length;l++)a[l]=arguments[l];if(n&&n.lastThis===this&&e(a,n.lastArgs))return n.lastResult;var o=t.apply(this,a);return n={lastResult:o,lastArgs:a,lastThis:this},o}return s.clear=function(){n=null},s}var o6={name:"7pg0cj-a11yText",styles:"label:a11yText;z-index:9999;border:0;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0;white-space:nowrap"},c6=function(e){return It("span",Bt({css:o6},e))},f0=c6,d6={guidance:function(e){var n=e.isSearchable,s=e.isMulti,a=e.tabSelectsValue,l=e.context,o=e.isInitialFocus;switch(l){case"menu":return"Use Up and Down to choose options, press Enter to select the currently focused option, press Escape to exit the menu".concat(a?", press Tab to select the option and exit the menu":"",".");case"input":return o?"".concat(e["aria-label"]||"Select"," is focused ").concat(n?",type to refine list":"",", press Down to open the menu, ").concat(s?" press left to focus selected values":""):"";case"value":return"Use left and right to toggle between focused values, press Backspace to remove the currently focused value";default:return""}},onChange:function(e){var n=e.action,s=e.label,a=s===void 0?"":s,l=e.labels,o=e.isDisabled;switch(n){case"deselect-option":case"pop-value":case"remove-value":return"option ".concat(a,", deselected.");case"clear":return"All selected options have been cleared.";case"initial-input-focus":return"option".concat(l.length>1?"s":""," ").concat(l.join(","),", selected.");case"select-option":return o?"option ".concat(a," is disabled. Select another option."):"option ".concat(a,", selected.");default:return""}},onFocus:function(e){var n=e.context,s=e.focused,a=e.options,l=e.label,o=l===void 0?"":l,c=e.selectValue,d=e.isDisabled,m=e.isSelected,u=e.isAppleDevice,h=function(x,y){return x&&x.length?"".concat(x.indexOf(y)+1," of ").concat(x.length):""};if(n==="value"&&c)return"value ".concat(o," focused, ").concat(h(c,s),".");if(n==="menu"&&u){var p=d?" disabled":"",g="".concat(m?" selected":"").concat(p);return"".concat(o).concat(g,", ").concat(h(a,s),".")}return""},onFilter:function(e){var n=e.inputValue,s=e.resultsMessage;return"".concat(s).concat(n?" for search term "+n:"",".")}},m6=function(e){var n=e.ariaSelection,s=e.focusedOption,a=e.focusedValue,l=e.focusableOptions,o=e.isFocused,c=e.selectValue,d=e.selectProps,m=e.id,u=e.isAppleDevice,h=d.ariaLiveMessages,p=d.getOptionLabel,g=d.inputValue,v=d.isMulti,x=d.isOptionDisabled,y=d.isSearchable,b=d.menuIsOpen,k=d.options,w=d.screenReaderStatus,T=d.tabSelectsValue,j=d.isLoading,D=d["aria-label"],_=d["aria-live"],N=f.useMemo(function(){return Ot(Ot({},d6),h||{})},[h]),A=f.useMemo(function(){var F="";if(n&&N.onChange){var H=n.option,G=n.options,z=n.removedValue,ie=n.removedValues,W=n.value,ge=function(ee){return Array.isArray(ee)?null:ee},ae=z||H||ge(W),U=ae?p(ae):"",X=G||ie||void 0,J=X?X.map(p):[],he=Ot({isDisabled:ae&&x(ae,c),label:U,labels:J},n);F=N.onChange(he)}return F},[n,N,x,c,p]),P=f.useMemo(function(){var F="",H=s||a,G=!!(s&&c&&c.includes(s));if(H&&N.onFocus){var z={focused:H,label:p(H),isDisabled:x(H,c),isSelected:G,options:l,context:H===s?"menu":"value",selectValue:c,isAppleDevice:u};F=N.onFocus(z)}return F},[s,a,p,x,N,l,c,u]),E=f.useMemo(function(){var F="";if(b&&k.length&&!j&&N.onFilter){var H=w({count:l.length});F=N.onFilter({inputValue:g,resultsMessage:H})}return F},[l,g,b,N,k,w,j]),I=n?.action==="initial-input-focus",M=f.useMemo(function(){var F="";if(N.guidance){var H=a?"value":b?"menu":"input";F=N.guidance({"aria-label":D,context:H,isDisabled:s&&x(s,c),isMulti:v,isSearchable:y,tabSelectsValue:T,isInitialFocus:I})}return F},[D,s,a,v,x,y,b,N,c,T,I]),O=It(f.Fragment,null,It("span",{id:"aria-selection"},A),It("span",{id:"aria-focused"},P),It("span",{id:"aria-results"},E),It("span",{id:"aria-guidance"},M));return It(f.Fragment,null,It(f0,{id:m},I&&O),It(f0,{"aria-live":_,"aria-atomic":"false","aria-relevant":"additions text",role:"log"},o&&!I&&O))},u6=m6,Wx=[{base:"A",letters:"A"},{base:"AA",letters:""},{base:"AE",letters:""},{base:"AO",letters:""},{base:"AU",letters:""},{base:"AV",letters:""},{base:"AY",letters:""},{base:"B",letters:"B"},{base:"C",letters:"C"},{base:"D",letters:"D"},{base:"DZ",letters:""},{base:"Dz",letters:""},{base:"E",letters:"E"},{base:"F",letters:"F"},{base:"G",letters:"G"},{base:"H",letters:"H"},{base:"I",letters:"I"},{base:"J",letters:"J"},{base:"K",letters:"K"},{base:"L",letters:"L"},{base:"LJ",letters:""},{base:"Lj",letters:""},{base:"M",letters:"M"},{base:"N",letters:"N"},{base:"NJ",letters:""},{base:"Nj",letters:""},{base:"O",letters:"O"},{base:"OI",letters:""},{base:"OO",letters:""},{base:"OU",letters:""},{base:"P",letters:"P"},{base:"Q",letters:"Q"},{base:"R",letters:"R"},{base:"S",letters:"S"},{base:"T",letters:"T"},{base:"TZ",letters:""},{base:"U",letters:"U"},{base:"V",letters:"V"},{base:"VY",letters:""},{base:"W",letters:"W"},{base:"X",letters:"X"},{base:"Y",letters:"Y"},{base:"Z",letters:"Z"},{base:"a",letters:"a"},{base:"aa",letters:""},{base:"ae",letters:""},{base:"ao",letters:""},{base:"au",letters:""},{base:"av",letters:""},{base:"ay",letters:""},{base:"b",letters:"b"},{base:"c",letters:"c"},{base:"d",letters:"d"},{base:"dz",letters:""},{base:"e",letters:"e"},{base:"f",letters:"f"},{base:"g",letters:"g"},{base:"h",letters:"h"},{base:"hv",letters:""},{base:"i",letters:"i"},{base:"j",letters:"j"},{base:"k",letters:"k"},{base:"l",letters:"l"},{base:"lj",letters:""},{base:"m",letters:"m"},{base:"n",letters:"n"},{base:"nj",letters:""},{base:"o",letters:"o"},{base:"oi",letters:""},{base:"ou",letters:""},{base:"oo",letters:""},{base:"p",letters:"p"},{base:"q",letters:"q"},{base:"r",letters:"r"},{base:"s",letters:"s"},{base:"t",letters:"t"},{base:"tz",letters:""},{base:"u",letters:"u"},{base:"v",letters:"v"},{base:"vy",letters:""},{base:"w",letters:"w"},{base:"x",letters:"x"},{base:"y",letters:"y"},{base:"z",letters:"z"}],h6=new RegExp("["+Wx.map(function(t){return t.letters}).join("")+"]","g"),C2={};for(var Jf=0;Jf<Wx.length;Jf++)for(var ev=Wx[Jf],tv=0;tv<ev.letters.length;tv++)C2[ev.letters[tv]]=ev.base;var _2=function(e){return e.replace(h6,function(n){return C2[n]})},p6=l6(_2),v0=function(e){return e.replace(/^\s+|\s+$/g,"")},g6=function(e){return"".concat(e.label," ").concat(e.value)},f6=function(e){return function(n,s){if(n.data.__isNew__)return!0;var a=Ot({ignoreCase:!0,ignoreAccents:!0,stringify:g6,trim:!0,matchFrom:"any"},e),l=a.ignoreCase,o=a.ignoreAccents,c=a.stringify,d=a.trim,m=a.matchFrom,u=d?v0(s):s,h=d?v0(c(n)):c(n);return l&&(u=u.toLowerCase(),h=h.toLowerCase()),o&&(u=p6(u),h=_2(h)),m==="start"?h.substr(0,u.length)===u:h.indexOf(u)>-1}},v6=["innerRef"];function x6(t){var e=t.innerRef,n=Qa(t,v6),s=UF(n,"onExited","in","enter","exit","appear");return It("input",Bt({ref:e},s,{css:Zb({label:"dummyInput",background:0,border:0,caretColor:"transparent",fontSize:"inherit",gridArea:"1 / 1 / 2 / 3",outline:0,padding:0,width:1,color:"transparent",left:-100,opacity:0,position:"relative",transform:"scale(.01)"},"","")}))}var y6=function(e){e.cancelable&&e.preventDefault(),e.stopPropagation()};function b6(t){var e=t.isEnabled,n=t.onBottomArrive,s=t.onBottomLeave,a=t.onTopArrive,l=t.onTopLeave,o=f.useRef(!1),c=f.useRef(!1),d=f.useRef(0),m=f.useRef(null),u=f.useCallback(function(y,b){if(m.current!==null){var k=m.current,w=k.scrollTop,T=k.scrollHeight,j=k.clientHeight,D=m.current,_=b>0,N=T-j-w,A=!1;N>b&&o.current&&(s&&s(y),o.current=!1),_&&c.current&&(l&&l(y),c.current=!1),_&&b>N?(n&&!o.current&&n(y),D.scrollTop=T,A=!0,o.current=!0):!_&&-b>w&&(a&&!c.current&&a(y),D.scrollTop=0,A=!0,c.current=!0),A&&y6(y)}},[n,s,a,l]),h=f.useCallback(function(y){u(y,y.deltaY)},[u]),p=f.useCallback(function(y){d.current=y.changedTouches[0].clientY},[]),g=f.useCallback(function(y){var b=d.current-y.changedTouches[0].clientY;u(y,b)},[u]),v=f.useCallback(function(y){if(y){var b=HF?{passive:!1}:!1;y.addEventListener("wheel",h,b),y.addEventListener("touchstart",p,b),y.addEventListener("touchmove",g,b)}},[g,p,h]),x=f.useCallback(function(y){y&&(y.removeEventListener("wheel",h,!1),y.removeEventListener("touchstart",p,!1),y.removeEventListener("touchmove",g,!1))},[g,p,h]);return f.useEffect(function(){if(e){var y=m.current;return v(y),function(){x(y)}}},[e,v,x]),function(y){m.current=y}}var x0=["boxSizing","height","overflow","paddingRight","position"],y0={boxSizing:"border-box",overflow:"hidden",position:"relative",height:"100%"};function b0(t){t.cancelable&&t.preventDefault()}function k0(t){t.stopPropagation()}function w0(){var t=this.scrollTop,e=this.scrollHeight,n=t+this.offsetHeight;t===0?this.scrollTop=1:n===e&&(this.scrollTop=t-1)}function j0(){return"ontouchstart"in window||navigator.maxTouchPoints}var N0=!!(typeof window<"u"&&window.document&&window.document.createElement),jd=0,Wo={capture:!1,passive:!1};function k6(t){var e=t.isEnabled,n=t.accountForScrollbars,s=n===void 0?!0:n,a=f.useRef({}),l=f.useRef(null),o=f.useCallback(function(d){if(N0){var m=document.body,u=m&&m.style;if(s&&x0.forEach(function(v){var x=u&&u[v];a.current[v]=x}),s&&jd<1){var h=parseInt(a.current.paddingRight,10)||0,p=document.body?document.body.clientWidth:0,g=window.innerWidth-p+h||0;Object.keys(y0).forEach(function(v){var x=y0[v];u&&(u[v]=x)}),u&&(u.paddingRight="".concat(g,"px"))}m&&j0()&&(m.addEventListener("touchmove",b0,Wo),d&&(d.addEventListener("touchstart",w0,Wo),d.addEventListener("touchmove",k0,Wo))),jd+=1}},[s]),c=f.useCallback(function(d){if(N0){var m=document.body,u=m&&m.style;jd=Math.max(jd-1,0),s&&jd<1&&x0.forEach(function(h){var p=a.current[h];u&&(u[h]=p)}),m&&j0()&&(m.removeEventListener("touchmove",b0,Wo),d&&(d.removeEventListener("touchstart",w0,Wo),d.removeEventListener("touchmove",k0,Wo)))}},[s]);return f.useEffect(function(){if(e){var d=l.current;return o(d),function(){c(d)}}},[e,o,c]),function(d){l.current=d}}var w6=function(e){var n=e.target;return n.ownerDocument.activeElement&&n.ownerDocument.activeElement.blur()},j6={name:"1kfdb0e",styles:"position:fixed;left:0;bottom:0;right:0;top:0"};function N6(t){var e=t.children,n=t.lockEnabled,s=t.captureEnabled,a=s===void 0?!0:s,l=t.onBottomArrive,o=t.onBottomLeave,c=t.onTopArrive,d=t.onTopLeave,m=b6({isEnabled:a,onBottomArrive:l,onBottomLeave:o,onTopArrive:c,onTopLeave:d}),u=k6({isEnabled:n}),h=function(g){m(g),u(g)};return It(f.Fragment,null,n&&It("div",{onClick:w6,css:j6}),e(h))}var C6={name:"1a0ro4n-requiredInput",styles:"label:requiredInput;opacity:0;pointer-events:none;position:absolute;bottom:0;left:0;right:0;width:100%"},_6=function(e){var n=e.name,s=e.onFocus;return It("input",{required:!0,name:n,tabIndex:-1,"aria-hidden":"true",onFocus:s,css:C6,value:"",onChange:function(){}})},S6=_6;function nk(t){var e;return typeof window<"u"&&window.navigator!=null?t.test(((e=window.navigator.userAgentData)===null||e===void 0?void 0:e.platform)||window.navigator.platform):!1}function E6(){return nk(/^iPhone/i)}function S2(){return nk(/^Mac/i)}function T6(){return nk(/^iPad/i)||S2()&&navigator.maxTouchPoints>1}function A6(){return E6()||T6()}function D6(){return S2()||A6()}var R6=function(e){return e.label},E2=function(e){return e.label},T2=function(e){return e.value},P6=function(e){return!!e.isDisabled},M6={clearIndicator:yL,container:oL,control:_L,dropdownIndicator:vL,group:AL,groupHeading:RL,indicatorsContainer:uL,indicatorSeparator:kL,input:OL,loadingIndicator:NL,loadingMessage:iL,menu:QF,menuList:eL,menuPortal:rL,multiValue:qL,multiValueLabel:HL,multiValueRemove:zL,noOptionsMessage:nL,option:YL,placeholder:XL,singleValue:t6,valueContainer:dL},I6={primary:"#2684FF",primary75:"#4C9AFF",primary50:"#B2D4FF",primary25:"#DEEBFF",danger:"#DE350B",dangerLight:"#FFBDAD",neutral0:"hsl(0, 0%, 100%)",neutral5:"hsl(0, 0%, 95%)",neutral10:"hsl(0, 0%, 90%)",neutral20:"hsl(0, 0%, 80%)",neutral30:"hsl(0, 0%, 70%)",neutral40:"hsl(0, 0%, 60%)",neutral50:"hsl(0, 0%, 50%)",neutral60:"hsl(0, 0%, 40%)",neutral70:"hsl(0, 0%, 30%)",neutral80:"hsl(0, 0%, 20%)",neutral90:"hsl(0, 0%, 10%)"},O6=4,A2=4,F6=38,L6=A2*2,$6={baseUnit:A2,controlHeight:F6,menuGutter:L6},nv={borderRadius:O6,colors:I6,spacing:$6},B6={"aria-live":"polite",backspaceRemovesValue:!0,blurInputOnSelect:h0(),captureMenuScroll:!h0(),classNames:{},closeMenuOnSelect:!0,closeMenuOnScroll:!1,components:{},controlShouldRenderValue:!0,escapeClearsValue:!1,filterOption:f6(),formatGroupLabel:R6,getOptionLabel:E2,getOptionValue:T2,isDisabled:!1,isLoading:!1,isMulti:!1,isRtl:!1,isSearchable:!0,isOptionDisabled:P6,loadingMessage:function(){return"Loading..."},maxMenuHeight:300,minMenuHeight:140,menuIsOpen:!1,menuPlacement:"bottom",menuPosition:"absolute",menuShouldBlockScroll:!1,menuShouldScrollIntoView:!BF(),noOptionsMessage:function(){return"No options"},openMenuOnFocus:!1,openMenuOnClick:!0,options:[],pageSize:5,placeholder:"Select...",screenReaderStatus:function(e){var n=e.count;return"".concat(n," result").concat(n!==1?"s":""," available")},styles:{},tabIndex:0,tabSelectsValue:!0,unstyled:!1};function C0(t,e,n,s){var a=P2(t,e,n),l=M2(t,e,n),o=R2(t,e),c=up(t,e);return{type:"option",data:e,isDisabled:a,isSelected:l,label:o,value:c,index:s}}function Mh(t,e){return t.options.map(function(n,s){if("options"in n){var a=n.options.map(function(o,c){return C0(t,o,e,c)}).filter(function(o){return S0(t,o)});return a.length>0?{type:"group",data:n,options:a,index:s}:void 0}var l=C0(t,n,e,s);return S0(t,l)?l:void 0}).filter(zF)}function D2(t){return t.reduce(function(e,n){return n.type==="group"?e.push.apply(e,dc(n.options.map(function(s){return s.data}))):e.push(n.data),e},[])}function _0(t,e){return t.reduce(function(n,s){return s.type==="group"?n.push.apply(n,dc(s.options.map(function(a){return{data:a.data,id:"".concat(e,"-").concat(s.index,"-").concat(a.index)}}))):n.push({data:s.data,id:"".concat(e,"-").concat(s.index)}),n},[])}function q6(t,e){return D2(Mh(t,e))}function S0(t,e){var n=t.inputValue,s=n===void 0?"":n,a=e.data,l=e.isSelected,o=e.label,c=e.value;return(!O2(t)||!l)&&I2(t,{label:o,value:c,data:a},s)}function H6(t,e){var n=t.focusedValue,s=t.selectValue,a=s.indexOf(n);if(a>-1){var l=e.indexOf(n);if(l>-1)return n;if(a<e.length)return e[a]}return null}function z6(t,e){var n=t.focusedOption;return n&&e.indexOf(n)>-1?n:e[0]}var iv=function(e,n){var s,a=(s=e.find(function(l){return l.data===n}))===null||s===void 0?void 0:s.id;return a||null},R2=function(e,n){return e.getOptionLabel(n)},up=function(e,n){return e.getOptionValue(n)};function P2(t,e,n){return typeof t.isOptionDisabled=="function"?t.isOptionDisabled(e,n):!1}function M2(t,e,n){if(n.indexOf(e)>-1)return!0;if(typeof t.isOptionSelected=="function")return t.isOptionSelected(e,n);var s=up(t,e);return n.some(function(a){return up(t,a)===s})}function I2(t,e,n){return t.filterOption?t.filterOption(e,n):!0}var O2=function(e){var n=e.hideSelectedOptions,s=e.isMulti;return n===void 0?s:n},V6=1,ik=(function(t){h4(n,t);var e=f4(n);function n(s){var a;if(m4(this,n),a=e.call(this,s),a.state={ariaSelection:null,focusedOption:null,focusedOptionId:null,focusableOptionsWithIds:[],focusedValue:null,inputIsHidden:!1,isFocused:!1,selectValue:[],clearFocusValueOnUpdate:!1,prevWasFocused:!1,inputIsHiddenAfterUpdate:void 0,prevProps:void 0,instancePrefix:"",isAppleDevice:!1},a.blockOptionHover=!1,a.isComposing=!1,a.commonProps=void 0,a.initialTouchX=0,a.initialTouchY=0,a.openAfterFocus=!1,a.scrollToFocusedOptionOnUpdate=!1,a.userIsDragging=void 0,a.controlRef=null,a.getControlRef=function(d){a.controlRef=d},a.focusedOptionRef=null,a.getFocusedOptionRef=function(d){a.focusedOptionRef=d},a.menuListRef=null,a.getMenuListRef=function(d){a.menuListRef=d},a.inputRef=null,a.getInputRef=function(d){a.inputRef=d},a.focus=a.focusInput,a.blur=a.blurInput,a.onChange=function(d,m){var u=a.props,h=u.onChange,p=u.name;m.name=p,a.ariaOnChange(d,m),h(d,m)},a.setValue=function(d,m,u){var h=a.props,p=h.closeMenuOnSelect,g=h.isMulti,v=h.inputValue;a.onInputChange("",{action:"set-value",prevInputValue:v}),p&&(a.setState({inputIsHiddenAfterUpdate:!g}),a.onMenuClose()),a.setState({clearFocusValueOnUpdate:!0}),a.onChange(d,{action:m,option:u})},a.selectOption=function(d){var m=a.props,u=m.blurInputOnSelect,h=m.isMulti,p=m.name,g=a.state.selectValue,v=h&&a.isOptionSelected(d,g),x=a.isOptionDisabled(d,g);if(v){var y=a.getOptionValue(d);a.setValue(g.filter(function(b){return a.getOptionValue(b)!==y}),"deselect-option",d)}else if(!x)h?a.setValue([].concat(dc(g),[d]),"select-option",d):a.setValue(d,"select-option");else{a.ariaOnChange(d,{action:"select-option",option:d,name:p});return}u&&a.blurInput()},a.removeValue=function(d){var m=a.props.isMulti,u=a.state.selectValue,h=a.getOptionValue(d),p=u.filter(function(v){return a.getOptionValue(v)!==h}),g=Bd(m,p,p[0]||null);a.onChange(g,{action:"remove-value",removedValue:d}),a.focusInput()},a.clearValue=function(){var d=a.state.selectValue;a.onChange(Bd(a.props.isMulti,[],null),{action:"clear",removedValues:d})},a.popValue=function(){var d=a.props.isMulti,m=a.state.selectValue,u=m[m.length-1],h=m.slice(0,m.length-1),p=Bd(d,h,h[0]||null);u&&a.onChange(p,{action:"pop-value",removedValue:u})},a.getFocusedOptionId=function(d){return iv(a.state.focusableOptionsWithIds,d)},a.getFocusableOptionsWithIds=function(){return _0(Mh(a.props,a.state.selectValue),a.getElementId("option"))},a.getValue=function(){return a.state.selectValue},a.cx=function(){for(var d=arguments.length,m=new Array(d),u=0;u<d;u++)m[u]=arguments[u];return IF.apply(void 0,[a.props.classNamePrefix].concat(m))},a.getOptionLabel=function(d){return R2(a.props,d)},a.getOptionValue=function(d){return up(a.props,d)},a.getStyles=function(d,m){var u=a.props.unstyled,h=M6[d](m,u);h.boxSizing="border-box";var p=a.props.styles[d];return p?p(h,m):h},a.getClassNames=function(d,m){var u,h;return(u=(h=a.props.classNames)[d])===null||u===void 0?void 0:u.call(h,m)},a.getElementId=function(d){return"".concat(a.state.instancePrefix,"-").concat(d)},a.getComponents=function(){return s6(a.props)},a.buildCategorizedOptions=function(){return Mh(a.props,a.state.selectValue)},a.getCategorizedOptions=function(){return a.props.menuIsOpen?a.buildCategorizedOptions():[]},a.buildFocusableOptions=function(){return D2(a.buildCategorizedOptions())},a.getFocusableOptions=function(){return a.props.menuIsOpen?a.buildFocusableOptions():[]},a.ariaOnChange=function(d,m){a.setState({ariaSelection:Ot({value:d},m)})},a.onMenuMouseDown=function(d){d.button===0&&(d.stopPropagation(),d.preventDefault(),a.focusInput())},a.onMenuMouseMove=function(d){a.blockOptionHover=!1},a.onControlMouseDown=function(d){if(!d.defaultPrevented){var m=a.props.openMenuOnClick;a.state.isFocused?a.props.menuIsOpen?d.target.tagName!=="INPUT"&&d.target.tagName!=="TEXTAREA"&&a.onMenuClose():m&&a.openMenu("first"):(m&&(a.openAfterFocus=!0),a.focusInput()),d.target.tagName!=="INPUT"&&d.target.tagName!=="TEXTAREA"&&d.preventDefault()}},a.onDropdownIndicatorMouseDown=function(d){if(!(d&&d.type==="mousedown"&&d.button!==0)&&!a.props.isDisabled){var m=a.props,u=m.isMulti,h=m.menuIsOpen;a.focusInput(),h?(a.setState({inputIsHiddenAfterUpdate:!u}),a.onMenuClose()):a.openMenu("first"),d.preventDefault()}},a.onClearIndicatorMouseDown=function(d){d&&d.type==="mousedown"&&d.button!==0||(a.clearValue(),d.preventDefault(),a.openAfterFocus=!1,d.type==="touchend"?a.focusInput():setTimeout(function(){return a.focusInput()}))},a.onScroll=function(d){typeof a.props.closeMenuOnScroll=="boolean"?d.target instanceof HTMLElement&&Ag(d.target)&&a.props.onMenuClose():typeof a.props.closeMenuOnScroll=="function"&&a.props.closeMenuOnScroll(d)&&a.props.onMenuClose()},a.onCompositionStart=function(){a.isComposing=!0},a.onCompositionEnd=function(){a.isComposing=!1},a.onTouchStart=function(d){var m=d.touches,u=m&&m.item(0);u&&(a.initialTouchX=u.clientX,a.initialTouchY=u.clientY,a.userIsDragging=!1)},a.onTouchMove=function(d){var m=d.touches,u=m&&m.item(0);if(u){var h=Math.abs(u.clientX-a.initialTouchX),p=Math.abs(u.clientY-a.initialTouchY),g=5;a.userIsDragging=h>g||p>g}},a.onTouchEnd=function(d){a.userIsDragging||(a.controlRef&&!a.controlRef.contains(d.target)&&a.menuListRef&&!a.menuListRef.contains(d.target)&&a.blurInput(),a.initialTouchX=0,a.initialTouchY=0)},a.onControlTouchEnd=function(d){a.userIsDragging||a.onControlMouseDown(d)},a.onClearIndicatorTouchEnd=function(d){a.userIsDragging||a.onClearIndicatorMouseDown(d)},a.onDropdownIndicatorTouchEnd=function(d){a.userIsDragging||a.onDropdownIndicatorMouseDown(d)},a.handleInputChange=function(d){var m=a.props.inputValue,u=d.currentTarget.value;a.setState({inputIsHiddenAfterUpdate:!1}),a.onInputChange(u,{action:"input-change",prevInputValue:m}),a.props.menuIsOpen||a.onMenuOpen()},a.onInputFocus=function(d){a.props.onFocus&&a.props.onFocus(d),a.setState({inputIsHiddenAfterUpdate:!1,isFocused:!0}),(a.openAfterFocus||a.props.openMenuOnFocus)&&a.openMenu("first"),a.openAfterFocus=!1},a.onInputBlur=function(d){var m=a.props.inputValue;if(a.menuListRef&&a.menuListRef.contains(document.activeElement)){a.inputRef.focus();return}a.props.onBlur&&a.props.onBlur(d),a.onInputChange("",{action:"input-blur",prevInputValue:m}),a.onMenuClose(),a.setState({focusedValue:null,isFocused:!1})},a.onOptionHover=function(d){if(!(a.blockOptionHover||a.state.focusedOption===d)){var m=a.getFocusableOptions(),u=m.indexOf(d);a.setState({focusedOption:d,focusedOptionId:u>-1?a.getFocusedOptionId(d):null})}},a.shouldHideSelectedOptions=function(){return O2(a.props)},a.onValueInputFocus=function(d){d.preventDefault(),d.stopPropagation(),a.focus()},a.onKeyDown=function(d){var m=a.props,u=m.isMulti,h=m.backspaceRemovesValue,p=m.escapeClearsValue,g=m.inputValue,v=m.isClearable,x=m.isDisabled,y=m.menuIsOpen,b=m.onKeyDown,k=m.tabSelectsValue,w=m.openMenuOnFocus,T=a.state,j=T.focusedOption,D=T.focusedValue,_=T.selectValue;if(!x&&!(typeof b=="function"&&(b(d),d.defaultPrevented))){switch(a.blockOptionHover=!0,d.key){case"ArrowLeft":if(!u||g)return;a.focusValue("previous");break;case"ArrowRight":if(!u||g)return;a.focusValue("next");break;case"Delete":case"Backspace":if(g)return;if(D)a.removeValue(D);else{if(!h)return;u?a.popValue():v&&a.clearValue()}break;case"Tab":if(a.isComposing||d.shiftKey||!y||!k||!j||w&&a.isOptionSelected(j,_))return;a.selectOption(j);break;case"Enter":if(d.keyCode===229)break;if(y){if(!j||a.isComposing)return;a.selectOption(j);break}return;case"Escape":y?(a.setState({inputIsHiddenAfterUpdate:!1}),a.onInputChange("",{action:"menu-close",prevInputValue:g}),a.onMenuClose()):v&&p&&a.clearValue();break;case" ":if(g)return;if(!y){a.openMenu("first");break}if(!j)return;a.selectOption(j);break;case"ArrowUp":y?a.focusOption("up"):a.openMenu("last");break;case"ArrowDown":y?a.focusOption("down"):a.openMenu("first");break;case"PageUp":if(!y)return;a.focusOption("pageup");break;case"PageDown":if(!y)return;a.focusOption("pagedown");break;case"Home":if(!y)return;a.focusOption("first");break;case"End":if(!y)return;a.focusOption("last");break;default:return}d.preventDefault()}},a.state.instancePrefix="react-select-"+(a.props.instanceId||++V6),a.state.selectValue=dp(s.value),s.menuIsOpen&&a.state.selectValue.length){var l=a.getFocusableOptionsWithIds(),o=a.buildFocusableOptions(),c=o.indexOf(a.state.selectValue[0]);a.state.focusableOptionsWithIds=l,a.state.focusedOption=o[c],a.state.focusedOptionId=iv(l,o[c])}return a}return u4(n,[{key:"componentDidMount",value:function(){this.startListeningComposition(),this.startListeningToTouch(),this.props.closeMenuOnScroll&&document&&document.addEventListener&&document.addEventListener("scroll",this.onScroll,!0),this.props.autoFocus&&this.focusInput(),this.props.menuIsOpen&&this.state.focusedOption&&this.menuListRef&&this.focusedOptionRef&&u0(this.menuListRef,this.focusedOptionRef),D6()&&this.setState({isAppleDevice:!0})}},{key:"componentDidUpdate",value:function(a){var l=this.props,o=l.isDisabled,c=l.menuIsOpen,d=this.state.isFocused;(d&&!o&&a.isDisabled||d&&c&&!a.menuIsOpen)&&this.focusInput(),d&&o&&!a.isDisabled?this.setState({isFocused:!1},this.onMenuClose):!d&&!o&&a.isDisabled&&this.inputRef===document.activeElement&&this.setState({isFocused:!0}),this.menuListRef&&this.focusedOptionRef&&this.scrollToFocusedOptionOnUpdate&&(u0(this.menuListRef,this.focusedOptionRef),this.scrollToFocusedOptionOnUpdate=!1)}},{key:"componentWillUnmount",value:function(){this.stopListeningComposition(),this.stopListeningToTouch(),document.removeEventListener("scroll",this.onScroll,!0)}},{key:"onMenuOpen",value:function(){this.props.onMenuOpen()}},{key:"onMenuClose",value:function(){this.onInputChange("",{action:"menu-close",prevInputValue:this.props.inputValue}),this.props.onMenuClose()}},{key:"onInputChange",value:function(a,l){this.props.onInputChange(a,l)}},{key:"focusInput",value:function(){this.inputRef&&this.inputRef.focus()}},{key:"blurInput",value:function(){this.inputRef&&this.inputRef.blur()}},{key:"openMenu",value:function(a){var l=this,o=this.state,c=o.selectValue,d=o.isFocused,m=this.buildFocusableOptions(),u=a==="first"?0:m.length-1;if(!this.props.isMulti){var h=m.indexOf(c[0]);h>-1&&(u=h)}this.scrollToFocusedOptionOnUpdate=!(d&&this.menuListRef),this.setState({inputIsHiddenAfterUpdate:!1,focusedValue:null,focusedOption:m[u],focusedOptionId:this.getFocusedOptionId(m[u])},function(){return l.onMenuOpen()})}},{key:"focusValue",value:function(a){var l=this.state,o=l.selectValue,c=l.focusedValue;if(this.props.isMulti){this.setState({focusedOption:null});var d=o.indexOf(c);c||(d=-1);var m=o.length-1,u=-1;if(o.length){switch(a){case"previous":d===0?u=0:d===-1?u=m:u=d-1;break;case"next":d>-1&&d<m&&(u=d+1);break}this.setState({inputIsHidden:u!==-1,focusedValue:o[u]})}}}},{key:"focusOption",value:function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"first",l=this.props.pageSize,o=this.state.focusedOption,c=this.getFocusableOptions();if(c.length){var d=0,m=c.indexOf(o);o||(m=-1),a==="up"?d=m>0?m-1:c.length-1:a==="down"?d=(m+1)%c.length:a==="pageup"?(d=m-l,d<0&&(d=0)):a==="pagedown"?(d=m+l,d>c.length-1&&(d=c.length-1)):a==="last"&&(d=c.length-1),this.scrollToFocusedOptionOnUpdate=!0,this.setState({focusedOption:c[d],focusedValue:null,focusedOptionId:this.getFocusedOptionId(c[d])})}}},{key:"getTheme",value:(function(){return this.props.theme?typeof this.props.theme=="function"?this.props.theme(nv):Ot(Ot({},nv),this.props.theme):nv})},{key:"getCommonProps",value:function(){var a=this.clearValue,l=this.cx,o=this.getStyles,c=this.getClassNames,d=this.getValue,m=this.selectOption,u=this.setValue,h=this.props,p=h.isMulti,g=h.isRtl,v=h.options,x=this.hasValue();return{clearValue:a,cx:l,getStyles:o,getClassNames:c,getValue:d,hasValue:x,isMulti:p,isRtl:g,options:v,selectOption:m,selectProps:h,setValue:u,theme:this.getTheme()}}},{key:"hasValue",value:function(){var a=this.state.selectValue;return a.length>0}},{key:"hasOptions",value:function(){return!!this.getFocusableOptions().length}},{key:"isClearable",value:function(){var a=this.props,l=a.isClearable,o=a.isMulti;return l===void 0?o:l}},{key:"isOptionDisabled",value:function(a,l){return P2(this.props,a,l)}},{key:"isOptionSelected",value:function(a,l){return M2(this.props,a,l)}},{key:"filterOption",value:function(a,l){return I2(this.props,a,l)}},{key:"formatOptionLabel",value:function(a,l){if(typeof this.props.formatOptionLabel=="function"){var o=this.props.inputValue,c=this.state.selectValue;return this.props.formatOptionLabel(a,{context:l,inputValue:o,selectValue:c})}else return this.getOptionLabel(a)}},{key:"formatGroupLabel",value:function(a){return this.props.formatGroupLabel(a)}},{key:"startListeningComposition",value:(function(){document&&document.addEventListener&&(document.addEventListener("compositionstart",this.onCompositionStart,!1),document.addEventListener("compositionend",this.onCompositionEnd,!1))})},{key:"stopListeningComposition",value:function(){document&&document.removeEventListener&&(document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd))}},{key:"startListeningToTouch",value:(function(){document&&document.addEventListener&&(document.addEventListener("touchstart",this.onTouchStart,!1),document.addEventListener("touchmove",this.onTouchMove,!1),document.addEventListener("touchend",this.onTouchEnd,!1))})},{key:"stopListeningToTouch",value:function(){document&&document.removeEventListener&&(document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"renderInput",value:(function(){var a=this.props,l=a.isDisabled,o=a.isSearchable,c=a.inputId,d=a.inputValue,m=a.tabIndex,u=a.form,h=a.menuIsOpen,p=a.required,g=this.getComponents(),v=g.Input,x=this.state,y=x.inputIsHidden,b=x.ariaSelection,k=this.commonProps,w=c||this.getElementId("input"),T=Ot(Ot(Ot({"aria-autocomplete":"list","aria-expanded":h,"aria-haspopup":!0,"aria-errormessage":this.props["aria-errormessage"],"aria-invalid":this.props["aria-invalid"],"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-required":p,role:"combobox","aria-activedescendant":this.state.isAppleDevice?void 0:this.state.focusedOptionId||""},h&&{"aria-controls":this.getElementId("listbox")}),!o&&{"aria-readonly":!0}),this.hasValue()?b?.action==="initial-input-focus"&&{"aria-describedby":this.getElementId("live-region")}:{"aria-describedby":this.getElementId("placeholder")});return o?f.createElement(v,Bt({},k,{autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",id:w,innerRef:this.getInputRef,isDisabled:l,isHidden:y,onBlur:this.onInputBlur,onChange:this.handleInputChange,onFocus:this.onInputFocus,spellCheck:"false",tabIndex:m,form:u,type:"text",value:d},T)):f.createElement(x6,Bt({id:w,innerRef:this.getInputRef,onBlur:this.onInputBlur,onChange:cp,onFocus:this.onInputFocus,disabled:l,tabIndex:m,inputMode:"none",form:u,value:""},T))})},{key:"renderPlaceholderOrValue",value:function(){var a=this,l=this.getComponents(),o=l.MultiValue,c=l.MultiValueContainer,d=l.MultiValueLabel,m=l.MultiValueRemove,u=l.SingleValue,h=l.Placeholder,p=this.commonProps,g=this.props,v=g.controlShouldRenderValue,x=g.isDisabled,y=g.isMulti,b=g.inputValue,k=g.placeholder,w=this.state,T=w.selectValue,j=w.focusedValue,D=w.isFocused;if(!this.hasValue()||!v)return b?null:f.createElement(h,Bt({},p,{key:"placeholder",isDisabled:x,isFocused:D,innerProps:{id:this.getElementId("placeholder")}}),k);if(y)return T.map(function(N,A){var P=N===j,E="".concat(a.getOptionLabel(N),"-").concat(a.getOptionValue(N));return f.createElement(o,Bt({},p,{components:{Container:c,Label:d,Remove:m},isFocused:P,isDisabled:x,key:E,index:A,removeProps:{onClick:function(){return a.removeValue(N)},onTouchEnd:function(){return a.removeValue(N)},onMouseDown:function(M){M.preventDefault()}},data:N}),a.formatOptionLabel(N,"value"))});if(b)return null;var _=T[0];return f.createElement(u,Bt({},p,{data:_,isDisabled:x}),this.formatOptionLabel(_,"value"))}},{key:"renderClearIndicator",value:function(){var a=this.getComponents(),l=a.ClearIndicator,o=this.commonProps,c=this.props,d=c.isDisabled,m=c.isLoading,u=this.state.isFocused;if(!this.isClearable()||!l||d||!this.hasValue()||m)return null;var h={onMouseDown:this.onClearIndicatorMouseDown,onTouchEnd:this.onClearIndicatorTouchEnd,"aria-hidden":"true"};return f.createElement(l,Bt({},o,{innerProps:h,isFocused:u}))}},{key:"renderLoadingIndicator",value:function(){var a=this.getComponents(),l=a.LoadingIndicator,o=this.commonProps,c=this.props,d=c.isDisabled,m=c.isLoading,u=this.state.isFocused;if(!l||!m)return null;var h={"aria-hidden":"true"};return f.createElement(l,Bt({},o,{innerProps:h,isDisabled:d,isFocused:u}))}},{key:"renderIndicatorSeparator",value:function(){var a=this.getComponents(),l=a.DropdownIndicator,o=a.IndicatorSeparator;if(!l||!o)return null;var c=this.commonProps,d=this.props.isDisabled,m=this.state.isFocused;return f.createElement(o,Bt({},c,{isDisabled:d,isFocused:m}))}},{key:"renderDropdownIndicator",value:function(){var a=this.getComponents(),l=a.DropdownIndicator;if(!l)return null;var o=this.commonProps,c=this.props.isDisabled,d=this.state.isFocused,m={onMouseDown:this.onDropdownIndicatorMouseDown,onTouchEnd:this.onDropdownIndicatorTouchEnd,"aria-hidden":"true"};return f.createElement(l,Bt({},o,{innerProps:m,isDisabled:c,isFocused:d}))}},{key:"renderMenu",value:function(){var a=this,l=this.getComponents(),o=l.Group,c=l.GroupHeading,d=l.Menu,m=l.MenuList,u=l.MenuPortal,h=l.LoadingMessage,p=l.NoOptionsMessage,g=l.Option,v=this.commonProps,x=this.state.focusedOption,y=this.props,b=y.captureMenuScroll,k=y.inputValue,w=y.isLoading,T=y.loadingMessage,j=y.minMenuHeight,D=y.maxMenuHeight,_=y.menuIsOpen,N=y.menuPlacement,A=y.menuPosition,P=y.menuPortalTarget,E=y.menuShouldBlockScroll,I=y.menuShouldScrollIntoView,M=y.noOptionsMessage,O=y.onMenuScrollToTop,F=y.onMenuScrollToBottom;if(!_)return null;var H=function(U,X){var J=U.type,he=U.data,le=U.isDisabled,ee=U.isSelected,me=U.label,K=U.value,re=x===he,oe=le?void 0:function(){return a.onOptionHover(he)},C=le?void 0:function(){return a.selectOption(he)},R="".concat(a.getElementId("option"),"-").concat(X),te={id:R,onClick:C,onMouseMove:oe,onMouseOver:oe,tabIndex:-1,role:"option","aria-selected":a.state.isAppleDevice?void 0:ee};return f.createElement(g,Bt({},v,{innerProps:te,data:he,isDisabled:le,isSelected:ee,key:R,label:me,type:J,value:K,isFocused:re,innerRef:re?a.getFocusedOptionRef:void 0}),a.formatOptionLabel(U.data,"menu"))},G;if(this.hasOptions())G=this.getCategorizedOptions().map(function(ae){if(ae.type==="group"){var U=ae.data,X=ae.options,J=ae.index,he="".concat(a.getElementId("group"),"-").concat(J),le="".concat(he,"-heading");return f.createElement(o,Bt({},v,{key:he,data:U,options:X,Heading:c,headingProps:{id:le,data:ae.data},label:a.formatGroupLabel(ae.data)}),ae.options.map(function(ee){return H(ee,"".concat(J,"-").concat(ee.index))}))}else if(ae.type==="option")return H(ae,"".concat(ae.index))});else if(w){var z=T({inputValue:k});if(z===null)return null;G=f.createElement(h,v,z)}else{var ie=M({inputValue:k});if(ie===null)return null;G=f.createElement(p,v,ie)}var W={minMenuHeight:j,maxMenuHeight:D,menuPlacement:N,menuPosition:A,menuShouldScrollIntoView:I},ge=f.createElement(ZF,Bt({},v,W),function(ae){var U=ae.ref,X=ae.placerProps,J=X.placement,he=X.maxHeight;return f.createElement(d,Bt({},v,W,{innerRef:U,innerProps:{onMouseDown:a.onMenuMouseDown,onMouseMove:a.onMenuMouseMove},isLoading:w,placement:J}),f.createElement(N6,{captureEnabled:b,onTopArrive:O,onBottomArrive:F,lockEnabled:E},function(le){return f.createElement(m,Bt({},v,{innerRef:function(me){a.getMenuListRef(me),le(me)},innerProps:{role:"listbox","aria-multiselectable":v.isMulti,id:a.getElementId("listbox")},isLoading:w,maxHeight:he,focusedOption:x}),G)}))});return P||A==="fixed"?f.createElement(u,Bt({},v,{appendTo:P,controlElement:this.controlRef,menuPlacement:N,menuPosition:A}),ge):ge}},{key:"renderFormField",value:function(){var a=this,l=this.props,o=l.delimiter,c=l.isDisabled,d=l.isMulti,m=l.name,u=l.required,h=this.state.selectValue;if(u&&!this.hasValue()&&!c)return f.createElement(S6,{name:m,onFocus:this.onValueInputFocus});if(!(!m||c))if(d)if(o){var p=h.map(function(x){return a.getOptionValue(x)}).join(o);return f.createElement("input",{name:m,type:"hidden",value:p})}else{var g=h.length>0?h.map(function(x,y){return f.createElement("input",{key:"i-".concat(y),name:m,type:"hidden",value:a.getOptionValue(x)})}):f.createElement("input",{name:m,type:"hidden",value:""});return f.createElement("div",null,g)}else{var v=h[0]?this.getOptionValue(h[0]):"";return f.createElement("input",{name:m,type:"hidden",value:v})}}},{key:"renderLiveRegion",value:function(){var a=this.commonProps,l=this.state,o=l.ariaSelection,c=l.focusedOption,d=l.focusedValue,m=l.isFocused,u=l.selectValue,h=this.getFocusableOptions();return f.createElement(u6,Bt({},a,{id:this.getElementId("live-region"),ariaSelection:o,focusedOption:c,focusedValue:d,isFocused:m,selectValue:u,focusableOptions:h,isAppleDevice:this.state.isAppleDevice}))}},{key:"render",value:function(){var a=this.getComponents(),l=a.Control,o=a.IndicatorsContainer,c=a.SelectContainer,d=a.ValueContainer,m=this.props,u=m.className,h=m.id,p=m.isDisabled,g=m.menuIsOpen,v=this.state.isFocused,x=this.commonProps=this.getCommonProps();return f.createElement(c,Bt({},x,{className:u,innerProps:{id:h,onKeyDown:this.onKeyDown},isDisabled:p,isFocused:v}),this.renderLiveRegion(),f.createElement(l,Bt({},x,{innerRef:this.getControlRef,innerProps:{onMouseDown:this.onControlMouseDown,onTouchEnd:this.onControlTouchEnd},isDisabled:p,isFocused:v,menuIsOpen:g}),f.createElement(d,Bt({},x,{isDisabled:p}),this.renderPlaceholderOrValue(),this.renderInput()),f.createElement(o,Bt({},x,{isDisabled:p}),this.renderClearIndicator(),this.renderLoadingIndicator(),this.renderIndicatorSeparator(),this.renderDropdownIndicator())),this.renderMenu(),this.renderFormField())}}],[{key:"getDerivedStateFromProps",value:function(a,l){var o=l.prevProps,c=l.clearFocusValueOnUpdate,d=l.inputIsHiddenAfterUpdate,m=l.ariaSelection,u=l.isFocused,h=l.prevWasFocused,p=l.instancePrefix,g=a.options,v=a.value,x=a.menuIsOpen,y=a.inputValue,b=a.isMulti,k=dp(v),w={};if(o&&(v!==o.value||g!==o.options||x!==o.menuIsOpen||y!==o.inputValue)){var T=x?q6(a,k):[],j=x?_0(Mh(a,k),"".concat(p,"-option")):[],D=c?H6(l,k):null,_=z6(l,T),N=iv(j,_);w={selectValue:k,focusedOption:_,focusedOptionId:N,focusableOptionsWithIds:j,focusedValue:D,clearFocusValueOnUpdate:!1}}var A=d!=null&&a!==o?{inputIsHidden:d,inputIsHiddenAfterUpdate:void 0}:{},P=m,E=u&&h;return u&&!E&&(P={value:Bd(b,k,k[0]||null),options:k,action:"initial-input-focus"},E=!h),m?.action==="initial-input-focus"&&(P=null),Ot(Ot(Ot({},w),A),{},{prevProps:a,ariaSelection:P,prevWasFocused:E})}}]),n})(f.Component);ik.defaultProps=B6;var U6=f.forwardRef(function(t,e){var n=GE(t);return f.createElement(ik,Bt({ref:e},n))}),ct=U6;const S=({width:t="100%",height:e="1rem",className:n="",style:s={}})=>i.jsx("div",{className:`skeleton-element ${n}`,style:{width:t,height:e,...s},role:"status","aria-label":"Loading content"}),wo=({items:t=["50px","100px","120px"]})=>i.jsx("nav",{className:"breadcrumb-container","aria-label":"breadcrumb",children:i.jsx("ol",{className:"breadcrumb m-0",children:t.map((e,n)=>i.jsx("li",{className:"breadcrumb-item",children:i.jsx(S,{width:e,height:"1rem"})},n))})}),wl=({titleWidth:t="180px",buttonWidth:e=null})=>i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap row-gap-2 column-gap-3 mb-4",children:[i.jsx(S,{width:t,height:"1.5rem"}),e&&i.jsx(S,{width:e,height:"38px",style:{borderRadius:"4px"}})]}),Ne=({labelWidth:t="120px",inputHeight:e="38px",hasAction:n=!1})=>i.jsxs("div",{className:"form-group",children:[i.jsxs("div",{className:`${n?"d-flex justify-content-between":""} mb-2`,children:[i.jsx(S,{width:t,height:"1rem"}),n&&i.jsx(S,{width:"80px",height:"1rem"})]}),i.jsx(S,{width:"100%",height:e,style:{borderRadius:"4px"}})]}),Ys=({avatarSize:t="50px",nameWidth:e="120px",detailWidth:n="100px"})=>i.jsxs("div",{className:"d-flex align-items-center gap-3",children:[i.jsx(S,{width:t,height:t,style:{borderRadius:"50%"},className:"flex-shrink-0"}),i.jsxs("div",{className:"flex-grow-1",children:[i.jsx(S,{width:e,height:"0.875rem",className:"mb-2"}),i.jsx(S,{width:n,height:"0.75rem"})]})]}),E0=({labelWidth:t="100px",valueWidth:e="140px"})=>i.jsxs("div",{children:[i.jsx(S,{width:t,height:"0.875rem",className:"mb-2"}),i.jsx(S,{width:e,height:"0.875rem"})]}),st=({width:t="80px",height:e="38px",className:n={}})=>i.jsx(S,{width:t,height:e,style:{borderRadius:"4px"},className:n}),gt=({children:t})=>i.jsx("div",{className:"card",children:i.jsx("div",{className:"card-body",children:t})}),Xd=({count:t,colClass:e="col-md-6",children:n})=>i.jsx("div",{className:"row gy-3",children:Array.from({length:t}).map((s,a)=>i.jsx("div",{className:e,children:typeof n=="function"?n(a):n},a))}),F2=({count:t=28})=>i.jsxs("div",{className:"p-3 bg-body rounded slot-scrolling",children:[i.jsx(S,{width:"100px",height:"1.1rem",className:"mx-auto my-3 d-block"}),i.jsx("div",{className:"appointments-slot-select",children:Array.from({length:t}).map((e,n)=>i.jsx("div",{className:"form-check slot-select",children:i.jsx(S,{width:"100%",height:"36px",style:{borderRadius:"4px"}})},n))})]});function Kx(){return Kx=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)({}).hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},Kx.apply(null,arguments)}var W6=function(e,n){return e&&n&&n.split(" ").forEach(function(s){return yE(e,s)})},sv=function(e,n){return e&&n&&n.split(" ").forEach(function(s){return bE(e,s)})},Ci=(function(t){xb(e,t);function e(){for(var s,a=arguments.length,l=new Array(a),o=0;o<a;o++)l[o]=arguments[o];return s=t.call.apply(t,[this].concat(l))||this,s.appliedClasses={appear:{},enter:{},exit:{}},s.onEnter=function(c,d){var m=s.resolveArguments(c,d),u=m[0],h=m[1];s.removeClasses(u,"exit"),s.addClass(u,h?"appear":"enter","base"),s.props.onEnter&&s.props.onEnter(c,d)},s.onEntering=function(c,d){var m=s.resolveArguments(c,d),u=m[0],h=m[1],p=h?"appear":"enter";s.addClass(u,p,"active"),s.props.onEntering&&s.props.onEntering(c,d)},s.onEntered=function(c,d){var m=s.resolveArguments(c,d),u=m[0],h=m[1],p=h?"appear":"enter";s.removeClasses(u,p),s.addClass(u,p,"done"),s.props.onEntered&&s.props.onEntered(c,d)},s.onExit=function(c){var d=s.resolveArguments(c),m=d[0];s.removeClasses(m,"appear"),s.removeClasses(m,"enter"),s.addClass(m,"exit","base"),s.props.onExit&&s.props.onExit(c)},s.onExiting=function(c){var d=s.resolveArguments(c),m=d[0];s.addClass(m,"exit","active"),s.props.onExiting&&s.props.onExiting(c)},s.onExited=function(c){var d=s.resolveArguments(c),m=d[0];s.removeClasses(m,"exit"),s.addClass(m,"exit","done"),s.props.onExited&&s.props.onExited(c)},s.resolveArguments=function(c,d){return s.props.nodeRef?[s.props.nodeRef.current,c]:[c,d]},s.getClassNames=function(c){var d=s.props.classNames,m=typeof d=="string",u=m&&d?d+"-":"",h=m?""+u+c:d[c],p=m?h+"-active":d[c+"Active"],g=m?h+"-done":d[c+"Done"];return{baseClassName:h,activeClassName:p,doneClassName:g}},s}var n=e.prototype;return n.addClass=function(a,l,o){var c=this.getClassNames(l)[o+"ClassName"],d=this.getClassNames("enter"),m=d.doneClassName;l==="appear"&&o==="done"&&m&&(c+=" "+m),o==="active"&&a&&yS(a),c&&(this.appliedClasses[l][o]=c,W6(a,c))},n.removeClasses=function(a,l){var o=this.appliedClasses[l],c=o.base,d=o.active,m=o.done;this.appliedClasses[l]={},c&&sv(a,c),d&&sv(a,d),m&&sv(a,m)},n.render=function(){var a=this.props;a.classNames;var l=xS(a,["classNames"]);return He.createElement(Ya,Kx({},l,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},e})(He.Component);Ci.defaultProps={classNames:""};Ci.propTypes={};var Bu,qu;function K6(t,e){return!(t===e||He.isValidElement(t)&&He.isValidElement(e)&&t.key!=null&&t.key===e.key)}var Mc={out:"out-in",in:"in-out"},hp=function(e,n,s){return function(){var a;e.props[n]&&(a=e.props)[n].apply(a,arguments),s()}},G6=(Bu={},Bu[Mc.out]=function(t){var e=t.current,n=t.changeState;return He.cloneElement(e,{in:!1,onExited:hp(e,"onExited",function(){n(Mi,null)})})},Bu[Mc.in]=function(t){var e=t.current,n=t.changeState,s=t.children;return[e,He.cloneElement(s,{in:!0,onEntered:hp(s,"onEntered",function(){n(Mi)})})]},Bu),Y6=(qu={},qu[Mc.out]=function(t){var e=t.children,n=t.changeState;return He.cloneElement(e,{in:!0,onEntered:hp(e,"onEntered",function(){n(Ns,He.cloneElement(e,{in:!0}))})})},qu[Mc.in]=function(t){var e=t.current,n=t.children,s=t.changeState;return[He.cloneElement(e,{in:!1,onExited:hp(e,"onExited",function(){s(Ns,He.cloneElement(n,{in:!0}))})}),He.cloneElement(n,{in:!0})]},qu),Dg=(function(t){xb(e,t);function e(){for(var s,a=arguments.length,l=new Array(a),o=0;o<a;o++)l[o]=arguments[o];return s=t.call.apply(t,[this].concat(l))||this,s.state={status:Ns,current:null},s.appeared=!1,s.changeState=function(c,d){d===void 0&&(d=s.state.current),s.setState({status:c,current:d})},s}var n=e.prototype;return n.componentDidMount=function(){this.appeared=!0},e.getDerivedStateFromProps=function(a,l){return a.children==null?{current:null}:l.status===Mi&&a.mode===Mc.in?{status:Mi}:l.current&&K6(l.current,a.children)?{status:no}:{current:He.cloneElement(a.children,{in:!0})}},n.render=function(){var a=this.props,l=a.children,o=a.mode,c=this.state,d=c.status,m=c.current,u={children:l,current:m,changeState:this.changeState,status:d},h;switch(d){case Mi:h=Y6[o](u);break;case no:h=G6[o](u);break;case Ns:h=m}return He.createElement(yb.Provider,{value:{isMounting:!this.appeared}},h)},e})(He.Component);Dg.propTypes={};Dg.defaultProps={mode:Mc.out};const L2=({children:t})=>{const e=pI();return e?i.jsx("div",{className:"d-flex align-items-center justify-content-center vh-100",children:i.jsxs("div",{className:"text-center",children:[i.jsx("h1",{className:"display-1 fw-bold",children:r("Oops!","kivicare")}),i.jsx("p",{className:"fs-3",children:r("Something went wrong.","kivicare")}),i.jsx("p",{className:"lead",children:e?.message||r("An unexpected error occurred.","kivicare")}),i.jsx("button",{onClick:()=>window.location.reload(),className:"btn btn-primary",children:r("Refresh Page","kivicare")})]})}):t},Jd=()=>i.jsx("div",{className:"d-flex align-items-center justify-content-center vh-100",children:i.jsxs("div",{className:"text-center",children:[i.jsx("h1",{className:"display-1 fw-bold",children:r("403","kivicare")}),i.jsx("p",{className:"fs-3",children:r("Access Forbidden","kivicare")}),i.jsx("p",{className:"lead",children:r("You don't have permission to access this resource.","kivicare")}),i.jsx(ht,{to:"/",className:"btn btn-primary",children:r("Go Home","kivicare")})]})}),Gx=()=>i.jsx("div",{className:"container-fluid py-4",children:i.jsxs(gt,{children:[i.jsx(S,{width:"40%",height:"1.5rem",className:"mb-3"}),i.jsx(S,{width:"60%",height:"2rem",className:"mb-2"}),i.jsx(S,{width:"80%",height:"1rem"})]})}),Q6=(t,e)=>{if(!t||t.length===0)return!0;const n={administrator:Cr,clinic_admin:Jn,doctor:Li,patient:Yi,receptionist:Xn};return t.some(s=>{const a=n[s];return a?a(e):!1})},Yx=({component:t,props:e={},permissions:n=[],addons:s=[],roles:a=[],module:l=null,meta:o={},...c})=>{const{hasCapability:d,isAddonActive:m,userRole:u,module_config:h,loading:p}=mt(),x=qm().at?.(-1)?.handle?.skeleton,y=x?typeof x=="function"?x:()=>He.createElement(x):Gx;return p?i.jsx(y,{}):l&&(h[l]??"1")==="0"?i.jsx(gg,{to:"/dashboard",replace:!0}):s.length>0&&!s.every(k=>m(k))?i.jsx(Jd,{message:"Required addons are not active"}):Q6(a,u)?n.length>0&&!n.every(k=>d(k))?i.jsx(Jd,{message:"You don't have required permissions"}):i.jsx(L2,{children:i.jsx(t,{...e})}):i.jsx(Jd,{message:"You don't have role access to this page"})},fpe=t=>i.jsx(L2,{children:t}),vpe=t=>t.map(e=>{const n=({route:a})=>{const{permissions:l=[],addons:o=[],roles:c=[],module:d=null,meta:m={},skeleton:u=null}=a;return i.jsx(Yx,{component:()=>a.element,permissions:l,addons:o,roles:c,module:d,meta:m,skeleton:u})};if(e.element)return{...e,element:i.jsx(n,{route:e}),children:e.children?uc(e.children):void 0};if(e.component){const a={path:e.path,element:i.jsx(Yx,{component:e.component,props:e.props||{},addons:e.addons||[],permissions:e.permissions||[],roles:e.roles||[],module:e.module||null,meta:e.meta||{},skeleton:e.skeleton||null}),...e.exact!==void 0&&{exact:e.exact},...e.index!==void 0&&{index:e.index},handle:e.handle,meta:e.meta};return e.children&&(a.children=uc(e.children)),a}const s={...e};return e.children&&(s.children=uc(e.children)),s}),uc=t=>t.map(e=>{if(e.element){const s={...e,handle:e.handle};return e.children&&(s.children=uc(e.children)),s}if(e.component){const s={path:e.path,element:i.jsx(Yx,{component:e.component,props:e.props||{},addons:e.addons||[],permissions:e.permissions||[],roles:e.roles||[],module:e.module||null,meta:e.meta||{},skeleton:e.skeleton||null}),...e.index!==void 0&&{index:e.index},...e.exact!==void 0&&{exact:e.exact},handle:e.handle};return e.children&&(s.children=uc(e.children)),s}const n={...e};return e.children&&(n.children=uc(e.children)),n}),We=({path:t,component:e,title:n,props:s={},exact:a,index:l,children:o,permissions:c=[],addons:d=[],roles:m=[],meta:u={},element:h,module:p=null,skeleton:g=null})=>({path:t,title:n,...h&&{element:h},...e&&{component:e},...s&&Object.keys(s).length>0&&{props:s},...a!==void 0&&{exact:a},...l!==void 0&&{index:l},...o&&{children:o},...c.length>0&&{permissions:c},...d.length>0&&{addons:d},...m.length>0&&{roles:m},...p&&{module:p},skeleton:g,handle:{title:n,meta:u,permissions:c,addons:d,roles:m,skeleton:g,...u}}),Gn=({path:t,title:e,roles:n=[],outlet:s,children:a,permissions:l=[],addons:o=[],meta:c={},module:d=null,skeleton:m=null})=>({path:t,title:e,roles:n,element:i.jsx(s,{}),children:a,permissions:l,addons:o,meta:c,module:d,skeleton:m,handle:{title:e,meta:c,permissions:l,addons:o,roles:n,skeleton:m,...c}}),T0=({showBreadcrumb:t=!0,showInsights:e=!0,showPaymentHistory:n=!0})=>{const s=window.kc_frontend.dashboard_type,a=["administrator","kiviCare_clinic_admin","kiviCare_doctor","kiviCare_receptionist"].includes(s),l=["administrator","kiviCare_clinic_admin","kiviCare_receptionist"].includes(s),o=["administrator","kiviCare_clinic_admin","kiviCare_doctor","kiviCare_receptionist"].includes(s),c=["administrator","kiviCare_clinic_admin"].includes(s),d=["kiviCare_patient","kiviCare_receptionist","kiviCare_doctor"].includes(s),m=s==="kiviCare_patient",u=["administrator","kiviCare_clinic_admin"].includes(s),h=["kiviCare_doctor","kiviCare_receptionist"].includes(s)?"right":"top",p=s==="kiviCare_doctor"?4:["kiviCare_receptionist","kiviCare_clinic_admin"].includes(s)?5:6;return i.jsxs("div",{className:"container-fluid pb-0",children:[t&&i.jsxs("div",{className:"d-flex align-items-center gap-2 mb-3",children:[i.jsx(S,{width:"60px",height:"1rem"}),i.jsx("span",{className:"text-muted",children:i.jsx("i",{className:"ph ph-caret-double-right"})}),i.jsx(S,{width:"100px",height:"1rem"})]}),i.jsxs("div",{className:"d-flex align-items-center gap-2 justify-content-between flex-wrap mb-3",children:[i.jsx(S,{width:"120px",height:"1.75rem"}),i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[!m&&i.jsx(S,{width:"250px",height:"2.5rem"}),!m&&i.jsx(S,{width:"120px",height:"2.5rem",className:"rounded"})]})]}),e&&!m&&i.jsx("div",{className:`insights-container dashboard-insights-container stash-cards ${"grid-count-"+p} mb-4`,children:Array.from({length:p}).map((g,v)=>i.jsx("div",{className:"card card-block card-stretch card-height",children:i.jsx("div",{className:"card-body",children:h==="right"?i.jsxs("div",{className:"d-flex align-items-center justify-content-between",children:[i.jsxs("div",{className:"text-start",children:[i.jsx(S,{width:"80px",height:"2rem",className:"mb-2"}),i.jsx(S,{width:"140px",height:"1rem"})]}),i.jsx("div",{className:"card-icon",children:i.jsx("div",{className:"text-center rounded-circle p-3 bg-primary-subtle",children:i.jsx("i",{className:"fas fa-chart-bar fs-4 align-middle"})})})]}):i.jsxs("div",{className:"d-flex align-items-center justify-content-center flex-column",children:[i.jsx("div",{className:"card-icon",children:i.jsx("div",{className:"text-center rounded-circle p-3 bg-primary-subtle mb-3",children:i.jsx("i",{className:"fas fa-chart-bar fs-4 align-middle"})})}),i.jsx(S,{width:"80px",height:"2rem",className:"mb-2"}),i.jsx(S,{width:"140px",height:"1rem"})]})})},`insight-${v}`))}),u&&i.jsxs("div",{className:"row my-0 gx-4 mb-4",children:[a&&i.jsx("div",{className:"col-xl-4 col-lg-6 mb-4",children:i.jsxs("div",{className:"card card-block card-stretch card-height",children:[i.jsxs("div",{className:"card-header d-flex align-items-center justify-content-between flex-wrap gap-3 mb-4",children:[i.jsx(S,{width:"180px",height:"1.25rem"}),i.jsx(S,{width:"80px",height:"1rem"})]}),i.jsx("div",{className:"card-body pt-0",children:Array.from({length:3}).map((g,v)=>i.jsx("div",{className:"bg-body p-3 rounded-3 mb-3",children:i.jsx(Ys,{avatarSize:"2.5rem",nameWidth:"140px",detailWidth:"100px"})},`appointment-${v}`))})]})}),l&&i.jsx("div",{className:"col-xl-4 col-lg-6 mb-4",children:i.jsxs("div",{className:"card card-block card-stretch card-height",children:[i.jsxs("div",{className:"card-header d-flex align-items-center justify-content-between flex-wrap gap-3 mb-4",children:[i.jsx(S,{width:"120px",height:"1.25rem"}),i.jsx(S,{width:"80px",height:"1rem"})]}),i.jsx("div",{className:"card-body pt-0",children:Array.from({length:3}).map((g,v)=>i.jsx("div",{className:"bg-body p-3 rounded-3 mb-3",children:i.jsxs("div",{className:"d-flex align-items-center gap-3 justify-content-between",children:[i.jsx("div",{className:"flex-grow-1",children:i.jsx(Ys,{avatarSize:"2.5rem",nameWidth:"120px",detailWidth:"90px"})}),i.jsx(S,{width:"80px",height:"1rem"})]})},`kiviCare_doctor-${v}`))})]})}),o&&i.jsx("div",{className:"col-xl-4 col-lg-12 mb-4",children:i.jsxs("div",{className:"card card-block card-stretch card-height",children:[i.jsx("div",{className:"card-header",children:i.jsx(S,{width:"140px",height:"1.25rem"})}),i.jsxs("div",{className:"card-body",children:[i.jsx("div",{className:"position-relative mb-4 d-flex align-items-center justify-content-center",style:{height:"220px"},children:i.jsx(S,{width:"200px",height:"200px",className:"rounded-circle"})}),i.jsx("div",{className:"d-flex flex-wrap justify-content-center gap-3",children:Array.from({length:5}).map((g,v)=>i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsx(S,{width:"10px",height:"10px",className:"rounded-circle"}),i.jsx(S,{width:"80px",height:"1rem"})]},`legend-${v}`))})]})]})})]}),n&&c&&i.jsxs(gt,{children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap gap-3 mb-3 pb-1",children:[i.jsx(S,{width:"150px",height:"1.25rem"}),i.jsx(S,{width:"80px",height:"1rem"})]}),i.jsx("div",{className:"table-responsive",children:i.jsxs("table",{className:"table table-bordered rounded",children:[i.jsx("thead",{children:i.jsx("tr",{children:Array.from({length:9}).map((g,v)=>i.jsx("th",{className:"py-3",children:i.jsx(S,{width:"90%",height:"1rem"})},`th-${v}`))})}),i.jsx("tbody",{children:Array.from({length:3}).map((g,v)=>i.jsxs("tr",{children:[i.jsx("td",{className:"py-3",children:i.jsx(Ys,{avatarSize:"2.5rem",nameWidth:"120px",detailWidth:"150px"})}),Array.from({length:6}).map((x,y)=>i.jsx("td",{className:"py-3",children:i.jsx(S,{width:"90%",height:"1rem"})},`cell-${v}-${y}`)),i.jsx("td",{className:"py-3",children:i.jsx(S,{width:"60px",height:"1.5rem",className:"rounded"})}),i.jsx("td",{className:"py-3",children:i.jsx("div",{className:"d-flex gap-1",children:i.jsx(S,{width:"2rem",height:"2rem",className:"rounded"})})})]},`row-${v}`))})]})}),i.jsxs("div",{className:"d-flex align-items-center justify-content-between mt-3",children:[i.jsx(S,{width:"150px",height:"1rem"}),i.jsx(S,{width:"150px",height:"1rem"})]})]}),d&&i.jsx("div",{className:"mb-4",children:i.jsx("div",{className:"card",children:i.jsxs("div",{className:"card-body",children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-3",children:[i.jsx(S,{width:"200px",height:"1.5rem"}),i.jsxs("div",{className:"d-flex gap-2",children:[i.jsx(S,{width:"100px",height:"2rem"}),i.jsx(S,{width:"100px",height:"2rem"}),i.jsx(S,{width:"100px",height:"2rem"})]})]}),i.jsxs("div",{className:"calendar-skeleton",children:[i.jsx("div",{className:"d-flex mb-2",children:Array.from({length:7}).map((g,v)=>i.jsx("div",{className:"flex-fill text-center p-2",children:i.jsx(S,{width:"60px",height:"1rem"})},`day-${v}`))}),Array.from({length:5}).map((g,v)=>i.jsx("div",{className:"d-flex mb-1",children:Array.from({length:7}).map((x,y)=>i.jsx("div",{className:"flex-fill p-1",children:i.jsxs("div",{className:"calendar-day-skeleton border rounded p-2",style:{minHeight:"80px"},children:[i.jsx(S,{width:"20px",height:"1rem",className:"mb-2"}),Math.random()>.7&&i.jsxs("div",{className:"d-flex flex-column gap-1",children:[i.jsx(S,{width:"100%",height:"6px",className:"rounded"}),i.jsx(S,{width:"80%",height:"6px",className:"rounded"})]})]})},`day-${v}-${y}`))},`week-${v}`))]})]})})})]})};var av=["onChange","onClose","onDayCreate","onDestroy","onKeyDown","onMonthChange","onOpen","onParseConfig","onReady","onValueUpdate","onYearChange","onPreCalendarPosition"],hc={_disable:[],allowInput:!1,allowInvalidPreload:!1,altFormat:"F j, Y",altInput:!1,altInputClass:"form-control input",animate:typeof window=="object"&&window.navigator.userAgent.indexOf("MSIE")===-1,ariaDateFormat:"F j, Y",autoFillDefaultTime:!0,clickOpens:!0,closeOnSelect:!0,conjunction:", ",dateFormat:"Y-m-d",defaultHour:12,defaultMinute:0,defaultSeconds:0,disable:[],disableMobile:!1,enableSeconds:!1,enableTime:!1,errorHandler:function(t){return typeof console<"u"&&console.warn(t)},getWeek:function(t){var e=new Date(t.getTime());e.setHours(0,0,0,0),e.setDate(e.getDate()+3-(e.getDay()+6)%7);var n=new Date(e.getFullYear(),0,4);return 1+Math.round(((e.getTime()-n.getTime())/864e5-3+(n.getDay()+6)%7)/7)},hourIncrement:1,ignoredFocusElements:[],inline:!1,locale:"default",minuteIncrement:5,mode:"single",monthSelectorType:"dropdown",nextArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M13.207 8.472l-7.854 7.854-0.707-0.707 7.146-7.146-7.146-7.148 0.707-0.707 7.854 7.854z' /></svg>",noCalendar:!1,now:new Date,onChange:[],onClose:[],onDayCreate:[],onDestroy:[],onKeyDown:[],onMonthChange:[],onOpen:[],onParseConfig:[],onReady:[],onValueUpdate:[],onYearChange:[],onPreCalendarPosition:[],plugins:[],position:"auto",positionElement:void 0,prevArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M5.207 8.471l7.146 7.147-0.707 0.707-7.853-7.854 7.854-7.853 0.707 0.707-7.147 7.146z' /></svg>",shorthandCurrentMonth:!1,showMonths:1,static:!1,time_24hr:!1,weekNumbers:!1,wrap:!1},bm={weekdays:{shorthand:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],longhand:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},months:{shorthand:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],longhand:["January","February","March","April","May","June","July","August","September","October","November","December"]},daysInMonth:[31,28,31,30,31,30,31,31,30,31,30,31],firstDayOfWeek:0,ordinal:function(t){var e=t%100;if(e>3&&e<21)return"th";switch(e%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}},rangeSeparator:" to ",weekAbbreviation:"Wk",scrollTitle:"Scroll to increment",toggleTitle:"Click to toggle",amPM:["AM","PM"],yearAriaLabel:"Year",monthAriaLabel:"Month",hourAriaLabel:"Hour",minuteAriaLabel:"Minute",time_24hr:!1},ns=function(t,e){return e===void 0&&(e=2),("000"+t).slice(e*-1)},Fs=function(t){return t===!0?1:0};function A0(t,e){var n;return function(){var s=this,a=arguments;clearTimeout(n),n=setTimeout(function(){return t.apply(s,a)},e)}}var rv=function(t){return t instanceof Array?t:[t]};function Hi(t,e,n){if(n===!0)return t.classList.add(e);t.classList.remove(e)}function gn(t,e,n){var s=window.document.createElement(t);return e=e||"",n=n||"",s.className=e,n!==void 0&&(s.textContent=n),s}function Hu(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function $2(t,e){if(e(t))return t;if(t.parentNode)return $2(t.parentNode,e)}function zu(t,e){var n=gn("div","numInputWrapper"),s=gn("input","numInput "+t),a=gn("span","arrowUp"),l=gn("span","arrowDown");if(navigator.userAgent.indexOf("MSIE 9.0")===-1?s.type="number":(s.type="text",s.pattern="\\d*"),e!==void 0)for(var o in e)s.setAttribute(o,e[o]);return n.appendChild(s),n.appendChild(a),n.appendChild(l),n}function bs(t){try{if(typeof t.composedPath=="function"){var e=t.composedPath();return e[0]}return t.target}catch{return t.target}}var lv=function(){},pp=function(t,e,n){return n.months[e?"shorthand":"longhand"][t]},Z6={D:lv,F:function(t,e,n){t.setMonth(n.months.longhand.indexOf(e))},G:function(t,e){t.setHours((t.getHours()>=12?12:0)+parseFloat(e))},H:function(t,e){t.setHours(parseFloat(e))},J:function(t,e){t.setDate(parseFloat(e))},K:function(t,e,n){t.setHours(t.getHours()%12+12*Fs(new RegExp(n.amPM[1],"i").test(e)))},M:function(t,e,n){t.setMonth(n.months.shorthand.indexOf(e))},S:function(t,e){t.setSeconds(parseFloat(e))},U:function(t,e){return new Date(parseFloat(e)*1e3)},W:function(t,e,n){var s=parseInt(e),a=new Date(t.getFullYear(),0,2+(s-1)*7,0,0,0,0);return a.setDate(a.getDate()-a.getDay()+n.firstDayOfWeek),a},Y:function(t,e){t.setFullYear(parseFloat(e))},Z:function(t,e){return new Date(e)},d:function(t,e){t.setDate(parseFloat(e))},h:function(t,e){t.setHours((t.getHours()>=12?12:0)+parseFloat(e))},i:function(t,e){t.setMinutes(parseFloat(e))},j:function(t,e){t.setDate(parseFloat(e))},l:lv,m:function(t,e){t.setMonth(parseFloat(e)-1)},n:function(t,e){t.setMonth(parseFloat(e)-1)},s:function(t,e){t.setSeconds(parseFloat(e))},u:function(t,e){return new Date(parseFloat(e))},w:lv,y:function(t,e){t.setFullYear(2e3+parseFloat(e))}},ql={D:"",F:"",G:"(\\d\\d|\\d)",H:"(\\d\\d|\\d)",J:"(\\d\\d|\\d)\\w+",K:"",M:"",S:"(\\d\\d|\\d)",U:"(.+)",W:"(\\d\\d|\\d)",Y:"(\\d{4})",Z:"(.+)",d:"(\\d\\d|\\d)",h:"(\\d\\d|\\d)",i:"(\\d\\d|\\d)",j:"(\\d\\d|\\d)",l:"",m:"(\\d\\d|\\d)",n:"(\\d\\d|\\d)",s:"(\\d\\d|\\d)",u:"(.+)",w:"(\\d\\d|\\d)",y:"(\\d{2})"},em={Z:function(t){return t.toISOString()},D:function(t,e,n){return e.weekdays.shorthand[em.w(t,e,n)]},F:function(t,e,n){return pp(em.n(t,e,n)-1,!1,e)},G:function(t,e,n){return ns(em.h(t,e,n))},H:function(t){return ns(t.getHours())},J:function(t,e){return e.ordinal!==void 0?t.getDate()+e.ordinal(t.getDate()):t.getDate()},K:function(t,e){return e.amPM[Fs(t.getHours()>11)]},M:function(t,e){return pp(t.getMonth(),!0,e)},S:function(t){return ns(t.getSeconds())},U:function(t){return t.getTime()/1e3},W:function(t,e,n){return n.getWeek(t)},Y:function(t){return ns(t.getFullYear(),4)},d:function(t){return ns(t.getDate())},h:function(t){return t.getHours()%12?t.getHours()%12:12},i:function(t){return ns(t.getMinutes())},j:function(t){return t.getDate()},l:function(t,e){return e.weekdays.longhand[t.getDay()]},m:function(t){return ns(t.getMonth()+1)},n:function(t){return t.getMonth()+1},s:function(t){return t.getSeconds()},u:function(t){return t.getTime()},w:function(t){return t.getDay()},y:function(t){return String(t.getFullYear()).substring(2)}},B2=function(t){var e=t.config,n=e===void 0?hc:e,s=t.l10n,a=s===void 0?bm:s,l=t.isMobile,o=l===void 0?!1:l;return function(c,d,m){var u=m||a;return n.formatDate!==void 0&&!o?n.formatDate(c,d,u):d.split("").map(function(h,p,g){return em[h]&&g[p-1]!=="\\"?em[h](c,u,n):h!=="\\"?h:""}).join("")}},Qx=function(t){var e=t.config,n=e===void 0?hc:e,s=t.l10n,a=s===void 0?bm:s;return function(l,o,c,d){if(!(l!==0&&!l)){var m=d||a,u,h=l;if(l instanceof Date)u=new Date(l.getTime());else if(typeof l!="string"&&l.toFixed!==void 0)u=new Date(l);else if(typeof l=="string"){var p=o||(n||hc).dateFormat,g=String(l).trim();if(g==="today")u=new Date,c=!0;else if(n&&n.parseDate)u=n.parseDate(l,p);else if(/Z$/.test(g)||/GMT$/.test(g))u=new Date(l);else{for(var v=void 0,x=[],y=0,b=0,k="";y<p.length;y++){var w=p[y],T=w==="\\",j=p[y-1]==="\\"||T;if(ql[w]&&!j){k+=ql[w];var D=new RegExp(k).exec(l);D&&(v=!0)&&x[w!=="Y"?"push":"unshift"]({fn:Z6[w],val:D[++b]})}else T||(k+=".")}u=!n||!n.noCalendar?new Date(new Date().getFullYear(),0,1,0,0,0,0):new Date(new Date().setHours(0,0,0,0)),x.forEach(function(_){var N=_.fn,A=_.val;return u=N(u,A,m)||u}),u=v?u:void 0}}if(!(u instanceof Date&&!isNaN(u.getTime()))){n.errorHandler(new Error("Invalid date provided: "+h));return}return c===!0&&u.setHours(0,0,0,0),u}}};function ks(t,e,n){return n===void 0&&(n=!0),n!==!1?new Date(t.getTime()).setHours(0,0,0,0)-new Date(e.getTime()).setHours(0,0,0,0):t.getTime()-e.getTime()}var X6=function(t,e,n){return t>Math.min(e,n)&&t<Math.max(e,n)},ov=function(t,e,n){return t*3600+e*60+n},J6=function(t){var e=Math.floor(t/3600),n=(t-e*3600)/60;return[e,n,t-e*3600-n*60]},e$={DAY:864e5};function cv(t){var e=t.defaultHour,n=t.defaultMinute,s=t.defaultSeconds;if(t.minDate!==void 0){var a=t.minDate.getHours(),l=t.minDate.getMinutes(),o=t.minDate.getSeconds();e<a&&(e=a),e===a&&n<l&&(n=l),e===a&&n===l&&s<o&&(s=t.minDate.getSeconds())}if(t.maxDate!==void 0){var c=t.maxDate.getHours(),d=t.maxDate.getMinutes();e=Math.min(e,c),e===c&&(n=Math.min(d,n)),e===c&&n===d&&(s=t.maxDate.getSeconds())}return{hours:e,minutes:n,seconds:s}}typeof Object.assign!="function"&&(Object.assign=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(!t)throw TypeError("Cannot convert undefined or null to object");for(var s=function(c){c&&Object.keys(c).forEach(function(d){return t[d]=c[d]})},a=0,l=e;a<l.length;a++){var o=l[a];s(o)}return t});var Ri=function(){return Ri=Object.assign||function(t){for(var e,n=1,s=arguments.length;n<s;n++){e=arguments[n];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])}return t},Ri.apply(this,arguments)},D0=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var s=Array(t),a=0,e=0;e<n;e++)for(var l=arguments[e],o=0,c=l.length;o<c;o++,a++)s[a]=l[o];return s},t$=300;function n$(t,e){var n={config:Ri(Ri({},hc),ii.defaultConfig),l10n:bm};n.parseDate=Qx({config:n.config,l10n:n.l10n}),n._handlers=[],n.pluginElements=[],n.loadedPlugins=[],n._bind=x,n._setHoursFromDate=p,n._positionCalendar=B,n.changeMonth=ge,n.changeYear=le,n.clear=ae,n.close=U,n.onMouseOver=oe,n._createElement=gn,n.createDay=D,n.destroy=X,n.isEnabled=ee,n.jumpToDate=k,n.updateValue=xt,n.open=R,n.redraw=pe,n.set=xe,n.setDate=nt,n.toggle=ke;function s(){n.utils={getDaysInMonth:function(V,Z){return V===void 0&&(V=n.currentMonth),Z===void 0&&(Z=n.currentYear),V===1&&(Z%4===0&&Z%100!==0||Z%400===0)?29:n.l10n.daysInMonth[V]}}}function a(){n.element=n.input=t,n.isOpen=!1,ne(),q(),Je(),Ue(),s(),n.isMobile||j(),b(),(n.selectedDates.length||n.config.noCalendar)&&(n.config.enableTime&&p(n.config.noCalendar?n.latestSelectedDateObj:void 0),xt(!1)),c();var V=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);!n.isMobile&&V&&B(),_e("onReady")}function l(){var V;return((V=n.calendarContainer)===null||V===void 0?void 0:V.getRootNode()).activeElement||document.activeElement}function o(V){return V.bind(n)}function c(){var V=n.config;V.weekNumbers===!1&&V.showMonths===1||V.noCalendar!==!0&&window.requestAnimationFrame(function(){if(n.calendarContainer!==void 0&&(n.calendarContainer.style.visibility="hidden",n.calendarContainer.style.display="block"),n.daysContainer!==void 0){var Z=(n.days.offsetWidth+1)*V.showMonths;n.daysContainer.style.width=Z+"px",n.calendarContainer.style.width=Z+(n.weekWrapper!==void 0?n.weekWrapper.offsetWidth:0)+"px",n.calendarContainer.style.removeProperty("visibility"),n.calendarContainer.style.removeProperty("display")}})}function d(V){if(n.selectedDates.length===0){var Z=n.config.minDate===void 0||ks(new Date,n.config.minDate)>=0?new Date:new Date(n.config.minDate.getTime()),fe=cv(n.config);Z.setHours(fe.hours,fe.minutes,fe.seconds,Z.getMilliseconds()),n.selectedDates=[Z],n.latestSelectedDateObj=Z}V!==void 0&&V.type!=="blur"&&Oe(V);var Ce=n._input.value;h(),xt(),n._input.value!==Ce&&n._debouncedChange()}function m(V,Z){return V%12+12*Fs(Z===n.l10n.amPM[1])}function u(V){switch(V%24){case 0:case 12:return 12;default:return V%12}}function h(){if(!(n.hourElement===void 0||n.minuteElement===void 0)){var V=(parseInt(n.hourElement.value.slice(-2),10)||0)%24,Z=(parseInt(n.minuteElement.value,10)||0)%60,fe=n.secondElement!==void 0?(parseInt(n.secondElement.value,10)||0)%60:0;n.amPM!==void 0&&(V=m(V,n.amPM.textContent));var Ce=n.config.minTime!==void 0||n.config.minDate&&n.minDateHasTime&&n.latestSelectedDateObj&&ks(n.latestSelectedDateObj,n.config.minDate,!0)===0,Ke=n.config.maxTime!==void 0||n.config.maxDate&&n.maxDateHasTime&&n.latestSelectedDateObj&&ks(n.latestSelectedDateObj,n.config.maxDate,!0)===0;if(n.config.maxTime!==void 0&&n.config.minTime!==void 0&&n.config.minTime>n.config.maxTime){var it=ov(n.config.minTime.getHours(),n.config.minTime.getMinutes(),n.config.minTime.getSeconds()),at=ov(n.config.maxTime.getHours(),n.config.maxTime.getMinutes(),n.config.maxTime.getSeconds()),ot=ov(V,Z,fe);if(ot>at&&ot<it){var Nt=J6(it);V=Nt[0],Z=Nt[1],fe=Nt[2]}}else{if(Ke){var dt=n.config.maxTime!==void 0?n.config.maxTime:n.config.maxDate;V=Math.min(V,dt.getHours()),V===dt.getHours()&&(Z=Math.min(Z,dt.getMinutes())),Z===dt.getMinutes()&&(fe=Math.min(fe,dt.getSeconds()))}if(Ce){var jt=n.config.minTime!==void 0?n.config.minTime:n.config.minDate;V=Math.max(V,jt.getHours()),V===jt.getHours()&&Z<jt.getMinutes()&&(Z=jt.getMinutes()),Z===jt.getMinutes()&&(fe=Math.max(fe,jt.getSeconds()))}}g(V,Z,fe)}}function p(V){var Z=V||n.latestSelectedDateObj;Z&&Z instanceof Date&&g(Z.getHours(),Z.getMinutes(),Z.getSeconds())}function g(V,Z,fe){n.latestSelectedDateObj!==void 0&&n.latestSelectedDateObj.setHours(V%24,Z,fe||0,0),!(!n.hourElement||!n.minuteElement||n.isMobile)&&(n.hourElement.value=ns(n.config.time_24hr?V:(12+V)%12+12*Fs(V%12===0)),n.minuteElement.value=ns(Z),n.amPM!==void 0&&(n.amPM.textContent=n.l10n.amPM[Fs(V>=12)]),n.secondElement!==void 0&&(n.secondElement.value=ns(fe)))}function v(V){var Z=bs(V),fe=parseInt(Z.value)+(V.delta||0);(fe/1e3>1||V.key==="Enter"&&!/[^\d]/.test(fe.toString()))&&le(fe)}function x(V,Z,fe,Ce){if(Z instanceof Array)return Z.forEach(function(Ke){return x(V,Ke,fe,Ce)});if(V instanceof Array)return V.forEach(function(Ke){return x(Ke,Z,fe,Ce)});V.addEventListener(Z,fe,Ce),n._handlers.push({remove:function(){return V.removeEventListener(Z,fe,Ce)}})}function y(){_e("onChange")}function b(){if(n.config.wrap&&["open","close","toggle","clear"].forEach(function(fe){Array.prototype.forEach.call(n.element.querySelectorAll("[data-"+fe+"]"),function(Ce){return x(Ce,"click",n[fe])})}),n.isMobile){Be();return}var V=A0(C,50);if(n._debouncedChange=A0(y,t$),n.daysContainer&&!/iPhone|iPad|iPod/i.test(navigator.userAgent)&&x(n.daysContainer,"mouseover",function(fe){n.config.mode==="range"&&oe(bs(fe))}),x(n._input,"keydown",re),n.calendarContainer!==void 0&&x(n.calendarContainer,"keydown",re),!n.config.inline&&!n.config.static&&x(window,"resize",V),window.ontouchstart!==void 0?x(window.document,"touchstart",he):x(window.document,"mousedown",he),x(window.document,"focus",he,{capture:!0}),n.config.clickOpens===!0&&(x(n._input,"focus",n.open),x(n._input,"click",n.open)),n.daysContainer!==void 0&&(x(n.monthNav,"click",Ee),x(n.monthNav,["keyup","increment"],v),x(n.daysContainer,"click",ce)),n.timeContainer!==void 0&&n.minuteElement!==void 0&&n.hourElement!==void 0){var Z=function(fe){return bs(fe).select()};x(n.timeContainer,["increment"],d),x(n.timeContainer,"blur",d,{capture:!0}),x(n.timeContainer,"click",w),x([n.hourElement,n.minuteElement],["focus","click"],Z),n.secondElement!==void 0&&x(n.secondElement,"focus",function(){return n.secondElement&&n.secondElement.select()}),n.amPM!==void 0&&x(n.amPM,"click",function(fe){d(fe)})}n.config.allowInput&&x(n._input,"blur",K)}function k(V,Z){var fe=V!==void 0?n.parseDate(V):n.latestSelectedDateObj||(n.config.minDate&&n.config.minDate>n.now?n.config.minDate:n.config.maxDate&&n.config.maxDate<n.now?n.config.maxDate:n.now),Ce=n.currentYear,Ke=n.currentMonth;try{fe!==void 0&&(n.currentYear=fe.getFullYear(),n.currentMonth=fe.getMonth())}catch(it){it.message="Invalid date supplied: "+fe,n.config.errorHandler(it)}Z&&n.currentYear!==Ce&&(_e("onYearChange"),M()),Z&&(n.currentYear!==Ce||n.currentMonth!==Ke)&&_e("onMonthChange"),n.redraw()}function w(V){var Z=bs(V);~Z.className.indexOf("arrow")&&T(V,Z.classList.contains("arrowUp")?1:-1)}function T(V,Z,fe){var Ce=V&&bs(V),Ke=fe||Ce&&Ce.parentNode&&Ce.parentNode.firstChild,it=Ye("increment");it.delta=Z,Ke&&Ke.dispatchEvent(it)}function j(){var V=window.document.createDocumentFragment();if(n.calendarContainer=gn("div","flatpickr-calendar"),n.calendarContainer.tabIndex=-1,!n.config.noCalendar){if(V.appendChild(H()),n.innerContainer=gn("div","flatpickr-innerContainer"),n.config.weekNumbers){var Z=W(),fe=Z.weekWrapper,Ce=Z.weekNumbers;n.innerContainer.appendChild(fe),n.weekNumbers=Ce,n.weekWrapper=fe}n.rContainer=gn("div","flatpickr-rContainer"),n.rContainer.appendChild(z()),n.daysContainer||(n.daysContainer=gn("div","flatpickr-days"),n.daysContainer.tabIndex=-1),I(),n.rContainer.appendChild(n.daysContainer),n.innerContainer.appendChild(n.rContainer),V.appendChild(n.innerContainer)}n.config.enableTime&&V.appendChild(G()),Hi(n.calendarContainer,"rangeMode",n.config.mode==="range"),Hi(n.calendarContainer,"animate",n.config.animate===!0),Hi(n.calendarContainer,"multiMonth",n.config.showMonths>1),n.calendarContainer.appendChild(V);var Ke=n.config.appendTo!==void 0&&n.config.appendTo.nodeType!==void 0;if((n.config.inline||n.config.static)&&(n.calendarContainer.classList.add(n.config.inline?"inline":"static"),n.config.inline&&(!Ke&&n.element.parentNode?n.element.parentNode.insertBefore(n.calendarContainer,n._input.nextSibling):n.config.appendTo!==void 0&&n.config.appendTo.appendChild(n.calendarContainer)),n.config.static)){var it=gn("div","flatpickr-wrapper");n.element.parentNode&&n.element.parentNode.insertBefore(it,n.element),it.appendChild(n.element),n.altInput&&it.appendChild(n.altInput),it.appendChild(n.calendarContainer)}!n.config.static&&!n.config.inline&&(n.config.appendTo!==void 0?n.config.appendTo:window.document.body).appendChild(n.calendarContainer)}function D(V,Z,fe,Ce){var Ke=ee(Z,!0),it=gn("span",V,Z.getDate().toString());return it.dateObj=Z,it.$i=Ce,it.setAttribute("aria-label",n.formatDate(Z,n.config.ariaDateFormat)),V.indexOf("hidden")===-1&&ks(Z,n.now)===0&&(n.todayDateElem=it,it.classList.add("today"),it.setAttribute("aria-current","date")),Ke?(it.tabIndex=-1,tt(Z)&&(it.classList.add("selected"),n.selectedDateElem=it,n.config.mode==="range"&&(Hi(it,"startRange",n.selectedDates[0]&&ks(Z,n.selectedDates[0],!0)===0),Hi(it,"endRange",n.selectedDates[1]&&ks(Z,n.selectedDates[1],!0)===0),V==="nextMonthDay"&&it.classList.add("inRange")))):it.classList.add("flatpickr-disabled"),n.config.mode==="range"&&zt(Z)&&!tt(Z)&&it.classList.add("inRange"),n.weekNumbers&&n.config.showMonths===1&&V!=="prevMonthDay"&&Ce%7===6&&n.weekNumbers.insertAdjacentHTML("beforeend","<span class='flatpickr-day'>"+n.config.getWeek(Z)+"</span>"),_e("onDayCreate",it),it}function _(V){V.focus(),n.config.mode==="range"&&oe(V)}function N(V){for(var Z=V>0?0:n.config.showMonths-1,fe=V>0?n.config.showMonths:-1,Ce=Z;Ce!=fe;Ce+=V)for(var Ke=n.daysContainer.children[Ce],it=V>0?0:Ke.children.length-1,at=V>0?Ke.children.length:-1,ot=it;ot!=at;ot+=V){var Nt=Ke.children[ot];if(Nt.className.indexOf("hidden")===-1&&ee(Nt.dateObj))return Nt}}function A(V,Z){for(var fe=V.className.indexOf("Month")===-1?V.dateObj.getMonth():n.currentMonth,Ce=Z>0?n.config.showMonths:-1,Ke=Z>0?1:-1,it=fe-n.currentMonth;it!=Ce;it+=Ke)for(var at=n.daysContainer.children[it],ot=fe-n.currentMonth===it?V.$i+Z:Z<0?at.children.length-1:0,Nt=at.children.length,dt=ot;dt>=0&&dt<Nt&&dt!=(Z>0?Nt:-1);dt+=Ke){var jt=at.children[dt];if(jt.className.indexOf("hidden")===-1&&ee(jt.dateObj)&&Math.abs(V.$i-dt)>=Math.abs(Z))return _(jt)}n.changeMonth(Ke),P(N(Ke),0)}function P(V,Z){var fe=l(),Ce=me(fe||document.body),Ke=V!==void 0?V:Ce?fe:n.selectedDateElem!==void 0&&me(n.selectedDateElem)?n.selectedDateElem:n.todayDateElem!==void 0&&me(n.todayDateElem)?n.todayDateElem:N(Z>0?1:-1);Ke===void 0?n._input.focus():Ce?A(Ke,Z):_(Ke)}function E(V,Z){for(var fe=(new Date(V,Z,1).getDay()-n.l10n.firstDayOfWeek+7)%7,Ce=n.utils.getDaysInMonth((Z-1+12)%12,V),Ke=n.utils.getDaysInMonth(Z,V),it=window.document.createDocumentFragment(),at=n.config.showMonths>1,ot=at?"prevMonthDay hidden":"prevMonthDay",Nt=at?"nextMonthDay hidden":"nextMonthDay",dt=Ce+1-fe,jt=0;dt<=Ce;dt++,jt++)it.appendChild(D("flatpickr-day "+ot,new Date(V,Z-1,dt),dt,jt));for(dt=1;dt<=Ke;dt++,jt++)it.appendChild(D("flatpickr-day",new Date(V,Z,dt),dt,jt));for(var Wt=Ke+1;Wt<=42-fe&&(n.config.showMonths===1||jt%7!==0);Wt++,jt++)it.appendChild(D("flatpickr-day "+Nt,new Date(V,Z+1,Wt%Ke),Wt,jt));var be=gn("div","dayContainer");return be.appendChild(it),be}function I(){if(n.daysContainer!==void 0){Hu(n.daysContainer),n.weekNumbers&&Hu(n.weekNumbers);for(var V=document.createDocumentFragment(),Z=0;Z<n.config.showMonths;Z++){var fe=new Date(n.currentYear,n.currentMonth,1);fe.setMonth(n.currentMonth+Z),V.appendChild(E(fe.getFullYear(),fe.getMonth()))}n.daysContainer.appendChild(V),n.days=n.daysContainer.firstChild,n.config.mode==="range"&&n.selectedDates.length===1&&oe()}}function M(){if(!(n.config.showMonths>1||n.config.monthSelectorType!=="dropdown")){var V=function(Ce){return n.config.minDate!==void 0&&n.currentYear===n.config.minDate.getFullYear()&&Ce<n.config.minDate.getMonth()?!1:!(n.config.maxDate!==void 0&&n.currentYear===n.config.maxDate.getFullYear()&&Ce>n.config.maxDate.getMonth())};n.monthsDropdownContainer.tabIndex=-1,n.monthsDropdownContainer.innerHTML="";for(var Z=0;Z<12;Z++)if(V(Z)){var fe=gn("option","flatpickr-monthDropdown-month");fe.value=new Date(n.currentYear,Z).getMonth().toString(),fe.textContent=pp(Z,n.config.shorthandCurrentMonth,n.l10n),fe.tabIndex=-1,n.currentMonth===Z&&(fe.selected=!0),n.monthsDropdownContainer.appendChild(fe)}}}function O(){var V=gn("div","flatpickr-month"),Z=window.document.createDocumentFragment(),fe;n.config.showMonths>1||n.config.monthSelectorType==="static"?fe=gn("span","cur-month"):(n.monthsDropdownContainer=gn("select","flatpickr-monthDropdown-months"),n.monthsDropdownContainer.setAttribute("aria-label",n.l10n.monthAriaLabel),x(n.monthsDropdownContainer,"change",function(at){var ot=bs(at),Nt=parseInt(ot.value,10);n.changeMonth(Nt-n.currentMonth),_e("onMonthChange")}),M(),fe=n.monthsDropdownContainer);var Ce=zu("cur-year",{tabindex:"-1"}),Ke=Ce.getElementsByTagName("input")[0];Ke.setAttribute("aria-label",n.l10n.yearAriaLabel),n.config.minDate&&Ke.setAttribute("min",n.config.minDate.getFullYear().toString()),n.config.maxDate&&(Ke.setAttribute("max",n.config.maxDate.getFullYear().toString()),Ke.disabled=!!n.config.minDate&&n.config.minDate.getFullYear()===n.config.maxDate.getFullYear());var it=gn("div","flatpickr-current-month");return it.appendChild(fe),it.appendChild(Ce),Z.appendChild(it),V.appendChild(Z),{container:V,yearElement:Ke,monthElement:fe}}function F(){Hu(n.monthNav),n.monthNav.appendChild(n.prevMonthNav),n.config.showMonths&&(n.yearElements=[],n.monthElements=[]);for(var V=n.config.showMonths;V--;){var Z=O();n.yearElements.push(Z.yearElement),n.monthElements.push(Z.monthElement),n.monthNav.appendChild(Z.container)}n.monthNav.appendChild(n.nextMonthNav)}function H(){return n.monthNav=gn("div","flatpickr-months"),n.yearElements=[],n.monthElements=[],n.prevMonthNav=gn("span","flatpickr-prev-month"),n.prevMonthNav.innerHTML=n.config.prevArrow,n.nextMonthNav=gn("span","flatpickr-next-month"),n.nextMonthNav.innerHTML=n.config.nextArrow,F(),Object.defineProperty(n,"_hidePrevMonthArrow",{get:function(){return n.__hidePrevMonthArrow},set:function(V){n.__hidePrevMonthArrow!==V&&(Hi(n.prevMonthNav,"flatpickr-disabled",V),n.__hidePrevMonthArrow=V)}}),Object.defineProperty(n,"_hideNextMonthArrow",{get:function(){return n.__hideNextMonthArrow},set:function(V){n.__hideNextMonthArrow!==V&&(Hi(n.nextMonthNav,"flatpickr-disabled",V),n.__hideNextMonthArrow=V)}}),n.currentYearElement=n.yearElements[0],Ft(),n.monthNav}function G(){n.calendarContainer.classList.add("hasTime"),n.config.noCalendar&&n.calendarContainer.classList.add("noCalendar");var V=cv(n.config);n.timeContainer=gn("div","flatpickr-time"),n.timeContainer.tabIndex=-1;var Z=gn("span","flatpickr-time-separator",":"),fe=zu("flatpickr-hour",{"aria-label":n.l10n.hourAriaLabel});n.hourElement=fe.getElementsByTagName("input")[0];var Ce=zu("flatpickr-minute",{"aria-label":n.l10n.minuteAriaLabel});if(n.minuteElement=Ce.getElementsByTagName("input")[0],n.hourElement.tabIndex=n.minuteElement.tabIndex=-1,n.hourElement.value=ns(n.latestSelectedDateObj?n.latestSelectedDateObj.getHours():n.config.time_24hr?V.hours:u(V.hours)),n.minuteElement.value=ns(n.latestSelectedDateObj?n.latestSelectedDateObj.getMinutes():V.minutes),n.hourElement.setAttribute("step",n.config.hourIncrement.toString()),n.minuteElement.setAttribute("step",n.config.minuteIncrement.toString()),n.hourElement.setAttribute("min",n.config.time_24hr?"0":"1"),n.hourElement.setAttribute("max",n.config.time_24hr?"23":"12"),n.hourElement.setAttribute("maxlength","2"),n.minuteElement.setAttribute("min","0"),n.minuteElement.setAttribute("max","59"),n.minuteElement.setAttribute("maxlength","2"),n.timeContainer.appendChild(fe),n.timeContainer.appendChild(Z),n.timeContainer.appendChild(Ce),n.config.time_24hr&&n.timeContainer.classList.add("time24hr"),n.config.enableSeconds){n.timeContainer.classList.add("hasSeconds");var Ke=zu("flatpickr-second");n.secondElement=Ke.getElementsByTagName("input")[0],n.secondElement.value=ns(n.latestSelectedDateObj?n.latestSelectedDateObj.getSeconds():V.seconds),n.secondElement.setAttribute("step",n.minuteElement.getAttribute("step")),n.secondElement.setAttribute("min","0"),n.secondElement.setAttribute("max","59"),n.secondElement.setAttribute("maxlength","2"),n.timeContainer.appendChild(gn("span","flatpickr-time-separator",":")),n.timeContainer.appendChild(Ke)}return n.config.time_24hr||(n.amPM=gn("span","flatpickr-am-pm",n.l10n.amPM[Fs((n.latestSelectedDateObj?n.hourElement.value:n.config.defaultHour)>11)]),n.amPM.title=n.l10n.toggleTitle,n.amPM.tabIndex=-1,n.timeContainer.appendChild(n.amPM)),n.timeContainer}function z(){n.weekdayContainer?Hu(n.weekdayContainer):n.weekdayContainer=gn("div","flatpickr-weekdays");for(var V=n.config.showMonths;V--;){var Z=gn("div","flatpickr-weekdaycontainer");n.weekdayContainer.appendChild(Z)}return ie(),n.weekdayContainer}function ie(){if(n.weekdayContainer){var V=n.l10n.firstDayOfWeek,Z=D0(n.l10n.weekdays.shorthand);V>0&&V<Z.length&&(Z=D0(Z.splice(V,Z.length),Z.splice(0,V)));for(var fe=n.config.showMonths;fe--;)n.weekdayContainer.children[fe].innerHTML=`
      <span class='flatpickr-weekday'>
        `+Z.join("</span><span class='flatpickr-weekday'>")+`
      </span>
      `}}function W(){n.calendarContainer.classList.add("hasWeeks");var V=gn("div","flatpickr-weekwrapper");V.appendChild(gn("span","flatpickr-weekday",n.l10n.weekAbbreviation));var Z=gn("div","flatpickr-weeks");return V.appendChild(Z),{weekWrapper:V,weekNumbers:Z}}function ge(V,Z){Z===void 0&&(Z=!0);var fe=Z?V:V-n.currentMonth;fe<0&&n._hidePrevMonthArrow===!0||fe>0&&n._hideNextMonthArrow===!0||(n.currentMonth+=fe,(n.currentMonth<0||n.currentMonth>11)&&(n.currentYear+=n.currentMonth>11?1:-1,n.currentMonth=(n.currentMonth+12)%12,_e("onYearChange"),M()),I(),_e("onMonthChange"),Ft())}function ae(V,Z){if(V===void 0&&(V=!0),Z===void 0&&(Z=!0),n.input.value="",n.altInput!==void 0&&(n.altInput.value=""),n.mobileInput!==void 0&&(n.mobileInput.value=""),n.selectedDates=[],n.latestSelectedDateObj=void 0,Z===!0&&(n.currentYear=n._initialDate.getFullYear(),n.currentMonth=n._initialDate.getMonth()),n.config.enableTime===!0){var fe=cv(n.config),Ce=fe.hours,Ke=fe.minutes,it=fe.seconds;g(Ce,Ke,it)}n.redraw(),V&&_e("onChange")}function U(){n.isOpen=!1,n.isMobile||(n.calendarContainer!==void 0&&n.calendarContainer.classList.remove("open"),n._input!==void 0&&n._input.classList.remove("active")),_e("onClose")}function X(){n.config!==void 0&&_e("onDestroy");for(var V=n._handlers.length;V--;)n._handlers[V].remove();if(n._handlers=[],n.mobileInput)n.mobileInput.parentNode&&n.mobileInput.parentNode.removeChild(n.mobileInput),n.mobileInput=void 0;else if(n.calendarContainer&&n.calendarContainer.parentNode)if(n.config.static&&n.calendarContainer.parentNode){var Z=n.calendarContainer.parentNode;if(Z.lastChild&&Z.removeChild(Z.lastChild),Z.parentNode){for(;Z.firstChild;)Z.parentNode.insertBefore(Z.firstChild,Z);Z.parentNode.removeChild(Z)}}else n.calendarContainer.parentNode.removeChild(n.calendarContainer);n.altInput&&(n.input.type="text",n.altInput.parentNode&&n.altInput.parentNode.removeChild(n.altInput),delete n.altInput),n.input&&(n.input.type=n.input._type,n.input.classList.remove("flatpickr-input"),n.input.removeAttribute("readonly")),["_showTimeInput","latestSelectedDateObj","_hideNextMonthArrow","_hidePrevMonthArrow","__hideNextMonthArrow","__hidePrevMonthArrow","isMobile","isOpen","selectedDateElem","minDateHasTime","maxDateHasTime","days","daysContainer","_input","_positionElement","innerContainer","rContainer","monthNav","todayDateElem","calendarContainer","weekdayContainer","prevMonthNav","nextMonthNav","monthsDropdownContainer","currentMonthElement","currentYearElement","navigationCurrentMonth","selectedDateElem","config"].forEach(function(fe){try{delete n[fe]}catch{}})}function J(V){return n.calendarContainer.contains(V)}function he(V){if(n.isOpen&&!n.config.inline){var Z=bs(V),fe=J(Z),Ce=Z===n.input||Z===n.altInput||n.element.contains(Z)||V.path&&V.path.indexOf&&(~V.path.indexOf(n.input)||~V.path.indexOf(n.altInput)),Ke=!Ce&&!fe&&!J(V.relatedTarget),it=!n.config.ignoredFocusElements.some(function(at){return at.contains(Z)});Ke&&it&&(n.config.allowInput&&n.setDate(n._input.value,!1,n.config.altInput?n.config.altFormat:n.config.dateFormat),n.timeContainer!==void 0&&n.minuteElement!==void 0&&n.hourElement!==void 0&&n.input.value!==""&&n.input.value!==void 0&&d(),n.close(),n.config&&n.config.mode==="range"&&n.selectedDates.length===1&&n.clear(!1))}}function le(V){if(!(!V||n.config.minDate&&V<n.config.minDate.getFullYear()||n.config.maxDate&&V>n.config.maxDate.getFullYear())){var Z=V,fe=n.currentYear!==Z;n.currentYear=Z||n.currentYear,n.config.maxDate&&n.currentYear===n.config.maxDate.getFullYear()?n.currentMonth=Math.min(n.config.maxDate.getMonth(),n.currentMonth):n.config.minDate&&n.currentYear===n.config.minDate.getFullYear()&&(n.currentMonth=Math.max(n.config.minDate.getMonth(),n.currentMonth)),fe&&(n.redraw(),_e("onYearChange"),M())}}function ee(V,Z){var fe;Z===void 0&&(Z=!0);var Ce=n.parseDate(V,void 0,Z);if(n.config.minDate&&Ce&&ks(Ce,n.config.minDate,Z!==void 0?Z:!n.minDateHasTime)<0||n.config.maxDate&&Ce&&ks(Ce,n.config.maxDate,Z!==void 0?Z:!n.maxDateHasTime)>0)return!1;if(!n.config.enable&&n.config.disable.length===0)return!0;if(Ce===void 0)return!1;for(var Ke=!!n.config.enable,it=(fe=n.config.enable)!==null&&fe!==void 0?fe:n.config.disable,at=0,ot=void 0;at<it.length;at++){if(ot=it[at],typeof ot=="function"&&ot(Ce))return Ke;if(ot instanceof Date&&Ce!==void 0&&ot.getTime()===Ce.getTime())return Ke;if(typeof ot=="string"){var Nt=n.parseDate(ot,void 0,!0);return Nt&&Nt.getTime()===Ce.getTime()?Ke:!Ke}else if(typeof ot=="object"&&Ce!==void 0&&ot.from&&ot.to&&Ce.getTime()>=ot.from.getTime()&&Ce.getTime()<=ot.to.getTime())return Ke}return!Ke}function me(V){return n.daysContainer!==void 0?V.className.indexOf("hidden")===-1&&V.className.indexOf("flatpickr-disabled")===-1&&n.daysContainer.contains(V):!1}function K(V){var Z=V.target===n._input,fe=n._input.value.trimEnd()!==Qt();Z&&fe&&!(V.relatedTarget&&J(V.relatedTarget))&&n.setDate(n._input.value,!0,V.target===n.altInput?n.config.altFormat:n.config.dateFormat)}function re(V){var Z=bs(V),fe=n.config.wrap?t.contains(Z):Z===n._input,Ce=n.config.allowInput,Ke=n.isOpen&&(!Ce||!fe),it=n.config.inline&&fe&&!Ce;if(V.keyCode===13&&fe){if(Ce)return n.setDate(n._input.value,!0,Z===n.altInput?n.config.altFormat:n.config.dateFormat),n.close(),Z.blur();n.open()}else if(J(Z)||Ke||it){var at=!!n.timeContainer&&n.timeContainer.contains(Z);switch(V.keyCode){case 13:at?(V.preventDefault(),d(),$()):ce(V);break;case 27:V.preventDefault(),$();break;case 8:case 46:fe&&!n.config.allowInput&&(V.preventDefault(),n.clear());break;case 37:case 39:if(!at&&!fe){V.preventDefault();var ot=l();if(n.daysContainer!==void 0&&(Ce===!1||ot&&me(ot))){var Nt=V.keyCode===39?1:-1;V.ctrlKey?(V.stopPropagation(),ge(Nt),P(N(1),0)):P(void 0,Nt)}}else n.hourElement&&n.hourElement.focus();break;case 38:case 40:V.preventDefault();var dt=V.keyCode===40?1:-1;n.daysContainer&&Z.$i!==void 0||Z===n.input||Z===n.altInput?V.ctrlKey?(V.stopPropagation(),le(n.currentYear-dt),P(N(1),0)):at||P(void 0,dt*7):Z===n.currentYearElement?le(n.currentYear-dt):n.config.enableTime&&(!at&&n.hourElement&&n.hourElement.focus(),d(V),n._debouncedChange());break;case 9:if(at){var jt=[n.hourElement,n.minuteElement,n.secondElement,n.amPM].concat(n.pluginElements).filter(function(ue){return ue}),Wt=jt.indexOf(Z);if(Wt!==-1){var be=jt[Wt+(V.shiftKey?-1:1)];V.preventDefault(),(be||n._input).focus()}}else!n.config.noCalendar&&n.daysContainer&&n.daysContainer.contains(Z)&&V.shiftKey&&(V.preventDefault(),n._input.focus());break}}if(n.amPM!==void 0&&Z===n.amPM)switch(V.key){case n.l10n.amPM[0].charAt(0):case n.l10n.amPM[0].charAt(0).toLowerCase():n.amPM.textContent=n.l10n.amPM[0],h(),xt();break;case n.l10n.amPM[1].charAt(0):case n.l10n.amPM[1].charAt(0).toLowerCase():n.amPM.textContent=n.l10n.amPM[1],h(),xt();break}(fe||J(Z))&&_e("onKeyDown",V)}function oe(V,Z){if(Z===void 0&&(Z="flatpickr-day"),!(n.selectedDates.length!==1||V&&(!V.classList.contains(Z)||V.classList.contains("flatpickr-disabled")))){for(var fe=V?V.dateObj.getTime():n.days.firstElementChild.dateObj.getTime(),Ce=n.parseDate(n.selectedDates[0],void 0,!0).getTime(),Ke=Math.min(fe,n.selectedDates[0].getTime()),it=Math.max(fe,n.selectedDates[0].getTime()),at=!1,ot=0,Nt=0,dt=Ke;dt<it;dt+=e$.DAY)ee(new Date(dt),!0)||(at=at||dt>Ke&&dt<it,dt<Ce&&(!ot||dt>ot)?ot=dt:dt>Ce&&(!Nt||dt<Nt)&&(Nt=dt));var jt=Array.from(n.rContainer.querySelectorAll("*:nth-child(-n+"+n.config.showMonths+") > ."+Z));jt.forEach(function(Wt){var be=Wt.dateObj,ue=be.getTime(),Te=ot>0&&ue<ot||Nt>0&&ue>Nt;if(Te){Wt.classList.add("notAllowed"),["inRange","startRange","endRange"].forEach(function(Ie){Wt.classList.remove(Ie)});return}else if(at&&!Te)return;["startRange","inRange","endRange","notAllowed"].forEach(function(Ie){Wt.classList.remove(Ie)}),V!==void 0&&(V.classList.add(fe<=n.selectedDates[0].getTime()?"startRange":"endRange"),Ce<fe&&ue===Ce?Wt.classList.add("startRange"):Ce>fe&&ue===Ce&&Wt.classList.add("endRange"),ue>=ot&&(Nt===0||ue<=Nt)&&X6(ue,Ce,fe)&&Wt.classList.add("inRange"))})}}function C(){n.isOpen&&!n.config.static&&!n.config.inline&&B()}function R(V,Z){if(Z===void 0&&(Z=n._positionElement),n.isMobile===!0){if(V){V.preventDefault();var fe=bs(V);fe&&fe.blur()}n.mobileInput!==void 0&&(n.mobileInput.focus(),n.mobileInput.click()),_e("onOpen");return}else if(n._input.disabled||n.config.inline)return;var Ce=n.isOpen;n.isOpen=!0,Ce||(n.calendarContainer.classList.add("open"),n._input.classList.add("active"),_e("onOpen"),B(Z)),n.config.enableTime===!0&&n.config.noCalendar===!0&&n.config.allowInput===!1&&(V===void 0||!n.timeContainer.contains(V.relatedTarget))&&setTimeout(function(){return n.hourElement.select()},50)}function te(V){return function(Z){var fe=n.config["_"+V+"Date"]=n.parseDate(Z,n.config.dateFormat),Ce=n.config["_"+(V==="min"?"max":"min")+"Date"];fe!==void 0&&(n[V==="min"?"minDateHasTime":"maxDateHasTime"]=fe.getHours()>0||fe.getMinutes()>0||fe.getSeconds()>0),n.selectedDates&&(n.selectedDates=n.selectedDates.filter(function(Ke){return ee(Ke)}),!n.selectedDates.length&&V==="min"&&p(fe),xt()),n.daysContainer&&(pe(),fe!==void 0?n.currentYearElement[V]=fe.getFullYear().toString():n.currentYearElement.removeAttribute(V),n.currentYearElement.disabled=!!Ce&&fe!==void 0&&Ce.getFullYear()===fe.getFullYear())}}function ne(){var V=["wrap","weekNumbers","allowInput","allowInvalidPreload","clickOpens","time_24hr","enableTime","noCalendar","altInput","shorthandCurrentMonth","inline","static","enableSeconds","disableMobile"],Z=Ri(Ri({},JSON.parse(JSON.stringify(t.dataset||{}))),e),fe={};n.config.parseDate=Z.parseDate,n.config.formatDate=Z.formatDate,Object.defineProperty(n.config,"enable",{get:function(){return n.config._enable},set:function(jt){n.config._enable=Pe(jt)}}),Object.defineProperty(n.config,"disable",{get:function(){return n.config._disable},set:function(jt){n.config._disable=Pe(jt)}});var Ce=Z.mode==="time";if(!Z.dateFormat&&(Z.enableTime||Ce)){var Ke=ii.defaultConfig.dateFormat||hc.dateFormat;fe.dateFormat=Z.noCalendar||Ce?"H:i"+(Z.enableSeconds?":S":""):Ke+" H:i"+(Z.enableSeconds?":S":"")}if(Z.altInput&&(Z.enableTime||Ce)&&!Z.altFormat){var it=ii.defaultConfig.altFormat||hc.altFormat;fe.altFormat=Z.noCalendar||Ce?"h:i"+(Z.enableSeconds?":S K":" K"):it+(" h:i"+(Z.enableSeconds?":S":"")+" K")}Object.defineProperty(n.config,"minDate",{get:function(){return n.config._minDate},set:te("min")}),Object.defineProperty(n.config,"maxDate",{get:function(){return n.config._maxDate},set:te("max")});var at=function(jt){return function(Wt){n.config[jt==="min"?"_minTime":"_maxTime"]=n.parseDate(Wt,"H:i:S")}};Object.defineProperty(n.config,"minTime",{get:function(){return n.config._minTime},set:at("min")}),Object.defineProperty(n.config,"maxTime",{get:function(){return n.config._maxTime},set:at("max")}),Z.mode==="time"&&(n.config.noCalendar=!0,n.config.enableTime=!0),Object.assign(n.config,fe,Z);for(var ot=0;ot<V.length;ot++)n.config[V[ot]]=n.config[V[ot]]===!0||n.config[V[ot]]==="true";av.filter(function(jt){return n.config[jt]!==void 0}).forEach(function(jt){n.config[jt]=rv(n.config[jt]||[]).map(o)}),n.isMobile=!n.config.disableMobile&&!n.config.inline&&n.config.mode==="single"&&!n.config.disable.length&&!n.config.enable&&!n.config.weekNumbers&&/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);for(var ot=0;ot<n.config.plugins.length;ot++){var Nt=n.config.plugins[ot](n)||{};for(var dt in Nt)av.indexOf(dt)>-1?n.config[dt]=rv(Nt[dt]).map(o).concat(n.config[dt]):typeof Z[dt]>"u"&&(n.config[dt]=Nt[dt])}Z.altInputClass||(n.config.altInputClass=Y().className+" "+n.config.altInputClass),_e("onParseConfig")}function Y(){return n.config.wrap?t.querySelector("[data-input]"):t}function q(){typeof n.config.locale!="object"&&typeof ii.l10ns[n.config.locale]>"u"&&n.config.errorHandler(new Error("flatpickr: invalid locale "+n.config.locale)),n.l10n=Ri(Ri({},ii.l10ns.default),typeof n.config.locale=="object"?n.config.locale:n.config.locale!=="default"?ii.l10ns[n.config.locale]:void 0),ql.D="("+n.l10n.weekdays.shorthand.join("|")+")",ql.l="("+n.l10n.weekdays.longhand.join("|")+")",ql.M="("+n.l10n.months.shorthand.join("|")+")",ql.F="("+n.l10n.months.longhand.join("|")+")",ql.K="("+n.l10n.amPM[0]+"|"+n.l10n.amPM[1]+"|"+n.l10n.amPM[0].toLowerCase()+"|"+n.l10n.amPM[1].toLowerCase()+")";var V=Ri(Ri({},e),JSON.parse(JSON.stringify(t.dataset||{})));V.time_24hr===void 0&&ii.defaultConfig.time_24hr===void 0&&(n.config.time_24hr=n.l10n.time_24hr),n.formatDate=B2(n),n.parseDate=Qx({config:n.config,l10n:n.l10n})}function B(V){if(typeof n.config.position=="function")return void n.config.position(n,V);if(n.calendarContainer!==void 0){_e("onPreCalendarPosition");var Z=V||n._positionElement,fe=Array.prototype.reduce.call(n.calendarContainer.children,(function(ln,xs){return ln+xs.offsetHeight}),0),Ce=n.calendarContainer.offsetWidth,Ke=n.config.position.split(" "),it=Ke[0],at=Ke.length>1?Ke[1]:null,ot=Z.getBoundingClientRect(),Nt=window.innerHeight-ot.bottom,dt=it==="above"||it!=="below"&&Nt<fe&&ot.top>fe,jt=window.pageYOffset+ot.top+(dt?-fe-2:Z.offsetHeight+2);if(Hi(n.calendarContainer,"arrowTop",!dt),Hi(n.calendarContainer,"arrowBottom",dt),!n.config.inline){var Wt=window.pageXOffset+ot.left,be=!1,ue=!1;at==="center"?(Wt-=(Ce-ot.width)/2,be=!0):at==="right"&&(Wt-=Ce-ot.width,ue=!0),Hi(n.calendarContainer,"arrowLeft",!be&&!ue),Hi(n.calendarContainer,"arrowCenter",be),Hi(n.calendarContainer,"arrowRight",ue);var Te=window.document.body.offsetWidth-(window.pageXOffset+ot.right),Ie=Wt+Ce>window.document.body.offsetWidth,qe=Te+Ce>window.document.body.offsetWidth;if(Hi(n.calendarContainer,"rightMost",Ie),!n.config.static)if(n.calendarContainer.style.top=jt+"px",!Ie)n.calendarContainer.style.left=Wt+"px",n.calendarContainer.style.right="auto";else if(!qe)n.calendarContainer.style.left="auto",n.calendarContainer.style.right=Te+"px";else{var $e=se();if($e===void 0)return;var Xe=window.document.body.offsetWidth,bt=Math.max(0,Xe/2-Ce/2),Gt=".flatpickr-calendar.centerMost:before",$n=".flatpickr-calendar.centerMost:after",ti=$e.cssRules.length,vs="{left:"+ot.left+"px;right:auto;}";Hi(n.calendarContainer,"rightMost",!1),Hi(n.calendarContainer,"centerMost",!0),$e.insertRule(Gt+","+$n+vs,ti),n.calendarContainer.style.left=bt+"px",n.calendarContainer.style.right="auto"}}}}function se(){for(var V=null,Z=0;Z<document.styleSheets.length;Z++){var fe=document.styleSheets[Z];if(fe.cssRules){try{fe.cssRules}catch{continue}V=fe;break}}return V??Q()}function Q(){var V=document.createElement("style");return document.head.appendChild(V),V.sheet}function pe(){n.config.noCalendar||n.isMobile||(M(),Ft(),I())}function $(){n._input.focus(),window.navigator.userAgent.indexOf("MSIE")!==-1||navigator.msMaxTouchPoints!==void 0?setTimeout(n.close,0):n.close()}function ce(V){V.preventDefault(),V.stopPropagation();var Z=function(jt){return jt.classList&&jt.classList.contains("flatpickr-day")&&!jt.classList.contains("flatpickr-disabled")&&!jt.classList.contains("notAllowed")},fe=$2(bs(V),Z);if(fe!==void 0){var Ce=fe,Ke=n.latestSelectedDateObj=new Date(Ce.dateObj.getTime()),it=(Ke.getMonth()<n.currentMonth||Ke.getMonth()>n.currentMonth+n.config.showMonths-1)&&n.config.mode!=="range";if(n.selectedDateElem=Ce,n.config.mode==="single")n.selectedDates=[Ke];else if(n.config.mode==="multiple"){var at=tt(Ke);at?n.selectedDates.splice(parseInt(at),1):n.selectedDates.push(Ke)}else n.config.mode==="range"&&(n.selectedDates.length===2&&n.clear(!1,!1),n.latestSelectedDateObj=Ke,n.selectedDates.push(Ke),ks(Ke,n.selectedDates[0],!0)!==0&&n.selectedDates.sort(function(jt,Wt){return jt.getTime()-Wt.getTime()}));if(h(),it){var ot=n.currentYear!==Ke.getFullYear();n.currentYear=Ke.getFullYear(),n.currentMonth=Ke.getMonth(),ot&&(_e("onYearChange"),M()),_e("onMonthChange")}if(Ft(),I(),xt(),!it&&n.config.mode!=="range"&&n.config.showMonths===1?_(Ce):n.selectedDateElem!==void 0&&n.hourElement===void 0&&n.selectedDateElem&&n.selectedDateElem.focus(),n.hourElement!==void 0&&n.hourElement!==void 0&&n.hourElement.focus(),n.config.closeOnSelect){var Nt=n.config.mode==="single"&&!n.config.enableTime,dt=n.config.mode==="range"&&n.selectedDates.length===2&&!n.config.enableTime;(Nt||dt)&&$()}y()}}var De={locale:[q,ie],showMonths:[F,c,z],minDate:[k],maxDate:[k],positionElement:[et],clickOpens:[function(){n.config.clickOpens===!0?(x(n._input,"focus",n.open),x(n._input,"click",n.open)):(n._input.removeEventListener("focus",n.open),n._input.removeEventListener("click",n.open))}]};function xe(V,Z){if(V!==null&&typeof V=="object"){Object.assign(n.config,V);for(var fe in V)De[fe]!==void 0&&De[fe].forEach(function(Ce){return Ce()})}else n.config[V]=Z,De[V]!==void 0?De[V].forEach(function(Ce){return Ce()}):av.indexOf(V)>-1&&(n.config[V]=rv(Z));n.redraw(),xt(!0)}function Re(V,Z){var fe=[];if(V instanceof Array)fe=V.map(function(Ce){return n.parseDate(Ce,Z)});else if(V instanceof Date||typeof V=="number")fe=[n.parseDate(V,Z)];else if(typeof V=="string")switch(n.config.mode){case"single":case"time":fe=[n.parseDate(V,Z)];break;case"multiple":fe=V.split(n.config.conjunction).map(function(Ce){return n.parseDate(Ce,Z)});break;case"range":fe=V.split(n.l10n.rangeSeparator).map(function(Ce){return n.parseDate(Ce,Z)});break}else n.config.errorHandler(new Error("Invalid date supplied: "+JSON.stringify(V)));n.selectedDates=n.config.allowInvalidPreload?fe:fe.filter(function(Ce){return Ce instanceof Date&&ee(Ce,!1)}),n.config.mode==="range"&&n.selectedDates.sort(function(Ce,Ke){return Ce.getTime()-Ke.getTime()})}function nt(V,Z,fe){if(Z===void 0&&(Z=!1),fe===void 0&&(fe=n.config.dateFormat),V!==0&&!V||V instanceof Array&&V.length===0)return n.clear(Z);Re(V,fe),n.latestSelectedDateObj=n.selectedDates[n.selectedDates.length-1],n.redraw(),k(void 0,Z),p(),n.selectedDates.length===0&&n.clear(!1),xt(Z),Z&&_e("onChange")}function Pe(V){return V.slice().map(function(Z){return typeof Z=="string"||typeof Z=="number"||Z instanceof Date?n.parseDate(Z,void 0,!0):Z&&typeof Z=="object"&&Z.from&&Z.to?{from:n.parseDate(Z.from,void 0),to:n.parseDate(Z.to,void 0)}:Z}).filter(function(Z){return Z})}function Ue(){n.selectedDates=[],n.now=n.parseDate(n.config.now)||new Date;var V=n.config.defaultDate||((n.input.nodeName==="INPUT"||n.input.nodeName==="TEXTAREA")&&n.input.placeholder&&n.input.value===n.input.placeholder?null:n.input.value);V&&Re(V,n.config.dateFormat),n._initialDate=n.selectedDates.length>0?n.selectedDates[0]:n.config.minDate&&n.config.minDate.getTime()>n.now.getTime()?n.config.minDate:n.config.maxDate&&n.config.maxDate.getTime()<n.now.getTime()?n.config.maxDate:n.now,n.currentYear=n._initialDate.getFullYear(),n.currentMonth=n._initialDate.getMonth(),n.selectedDates.length>0&&(n.latestSelectedDateObj=n.selectedDates[0]),n.config.minTime!==void 0&&(n.config.minTime=n.parseDate(n.config.minTime,"H:i")),n.config.maxTime!==void 0&&(n.config.maxTime=n.parseDate(n.config.maxTime,"H:i")),n.minDateHasTime=!!n.config.minDate&&(n.config.minDate.getHours()>0||n.config.minDate.getMinutes()>0||n.config.minDate.getSeconds()>0),n.maxDateHasTime=!!n.config.maxDate&&(n.config.maxDate.getHours()>0||n.config.maxDate.getMinutes()>0||n.config.maxDate.getSeconds()>0)}function Je(){if(n.input=Y(),!n.input){n.config.errorHandler(new Error("Invalid input element specified"));return}n.input._type=n.input.type,n.input.type="text",n.input.classList.add("flatpickr-input"),n._input=n.input,n.config.altInput&&(n.altInput=gn(n.input.nodeName,n.config.altInputClass),n._input=n.altInput,n.altInput.placeholder=n.input.placeholder,n.altInput.disabled=n.input.disabled,n.altInput.required=n.input.required,n.altInput.tabIndex=n.input.tabIndex,n.altInput.type="text",n.input.setAttribute("type","hidden"),!n.config.static&&n.input.parentNode&&n.input.parentNode.insertBefore(n.altInput,n.input.nextSibling)),n.config.allowInput||n._input.setAttribute("readonly","readonly"),et()}function et(){n._positionElement=n.config.positionElement||n._input}function Be(){var V=n.config.enableTime?n.config.noCalendar?"time":"datetime-local":"date";n.mobileInput=gn("input",n.input.className+" flatpickr-mobile"),n.mobileInput.tabIndex=1,n.mobileInput.type=V,n.mobileInput.disabled=n.input.disabled,n.mobileInput.required=n.input.required,n.mobileInput.placeholder=n.input.placeholder,n.mobileFormatStr=V==="datetime-local"?"Y-m-d\\TH:i:S":V==="date"?"Y-m-d":"H:i:S",n.selectedDates.length>0&&(n.mobileInput.defaultValue=n.mobileInput.value=n.formatDate(n.selectedDates[0],n.mobileFormatStr)),n.config.minDate&&(n.mobileInput.min=n.formatDate(n.config.minDate,"Y-m-d")),n.config.maxDate&&(n.mobileInput.max=n.formatDate(n.config.maxDate,"Y-m-d")),n.input.getAttribute("step")&&(n.mobileInput.step=String(n.input.getAttribute("step"))),n.input.type="hidden",n.altInput!==void 0&&(n.altInput.type="hidden");try{n.input.parentNode&&n.input.parentNode.insertBefore(n.mobileInput,n.input.nextSibling)}catch{}x(n.mobileInput,"change",function(Z){n.setDate(bs(Z).value,!1,n.mobileFormatStr),_e("onChange"),_e("onClose")})}function ke(V){if(n.isOpen===!0)return n.close();n.open(V)}function _e(V,Z){if(n.config!==void 0){var fe=n.config[V];if(fe!==void 0&&fe.length>0)for(var Ce=0;fe[Ce]&&Ce<fe.length;Ce++)fe[Ce](n.selectedDates,n.input.value,n,Z);V==="onChange"&&(n.input.dispatchEvent(Ye("change")),n.input.dispatchEvent(Ye("input")))}}function Ye(V){var Z=document.createEvent("Event");return Z.initEvent(V,!0,!0),Z}function tt(V){for(var Z=0;Z<n.selectedDates.length;Z++){var fe=n.selectedDates[Z];if(fe instanceof Date&&ks(fe,V)===0)return""+Z}return!1}function zt(V){return n.config.mode!=="range"||n.selectedDates.length<2?!1:ks(V,n.selectedDates[0])>=0&&ks(V,n.selectedDates[1])<=0}function Ft(){n.config.noCalendar||n.isMobile||!n.monthNav||(n.yearElements.forEach(function(V,Z){var fe=new Date(n.currentYear,n.currentMonth,1);fe.setMonth(n.currentMonth+Z),n.config.showMonths>1||n.config.monthSelectorType==="static"?n.monthElements[Z].textContent=pp(fe.getMonth(),n.config.shorthandCurrentMonth,n.l10n)+" ":n.monthsDropdownContainer.value=fe.getMonth().toString(),V.value=fe.getFullYear().toString()}),n._hidePrevMonthArrow=n.config.minDate!==void 0&&(n.currentYear===n.config.minDate.getFullYear()?n.currentMonth<=n.config.minDate.getMonth():n.currentYear<n.config.minDate.getFullYear()),n._hideNextMonthArrow=n.config.maxDate!==void 0&&(n.currentYear===n.config.maxDate.getFullYear()?n.currentMonth+1>n.config.maxDate.getMonth():n.currentYear>n.config.maxDate.getFullYear()))}function Qt(V){var Z=V||(n.config.altInput?n.config.altFormat:n.config.dateFormat);return n.selectedDates.map(function(fe){return n.formatDate(fe,Z)}).filter(function(fe,Ce,Ke){return n.config.mode!=="range"||n.config.enableTime||Ke.indexOf(fe)===Ce}).join(n.config.mode!=="range"?n.config.conjunction:n.l10n.rangeSeparator)}function xt(V){V===void 0&&(V=!0),n.mobileInput!==void 0&&n.mobileFormatStr&&(n.mobileInput.value=n.latestSelectedDateObj!==void 0?n.formatDate(n.latestSelectedDateObj,n.mobileFormatStr):""),n.input.value=Qt(n.config.dateFormat),n.altInput!==void 0&&(n.altInput.value=Qt(n.config.altFormat)),V!==!1&&_e("onValueUpdate")}function Ee(V){var Z=bs(V),fe=n.prevMonthNav.contains(Z),Ce=n.nextMonthNav.contains(Z);fe||Ce?ge(fe?-1:1):n.yearElements.indexOf(Z)>=0?Z.select():Z.classList.contains("arrowUp")?n.changeYear(n.currentYear+1):Z.classList.contains("arrowDown")&&n.changeYear(n.currentYear-1)}function Oe(V){V.preventDefault();var Z=V.type==="keydown",fe=bs(V),Ce=fe;n.amPM!==void 0&&fe===n.amPM&&(n.amPM.textContent=n.l10n.amPM[Fs(n.amPM.textContent===n.l10n.amPM[0])]);var Ke=parseFloat(Ce.getAttribute("min")),it=parseFloat(Ce.getAttribute("max")),at=parseFloat(Ce.getAttribute("step")),ot=parseInt(Ce.value,10),Nt=V.delta||(Z?V.which===38?1:-1:0),dt=ot+at*Nt;if(typeof Ce.value<"u"&&Ce.value.length===2){var jt=Ce===n.hourElement,Wt=Ce===n.minuteElement;dt<Ke?(dt=it+dt+Fs(!jt)+(Fs(jt)&&Fs(!n.amPM)),Wt&&T(void 0,-1,n.hourElement)):dt>it&&(dt=Ce===n.hourElement?dt-it-Fs(!n.amPM):Ke,Wt&&T(void 0,1,n.hourElement)),n.amPM&&jt&&(at===1?dt+ot===23:Math.abs(dt-ot)>at)&&(n.amPM.textContent=n.l10n.amPM[Fs(n.amPM.textContent===n.l10n.amPM[0])]),Ce.value=ns(dt)}}return a(),n}function pc(t,e){for(var n=Array.prototype.slice.call(t).filter(function(o){return o instanceof HTMLElement}),s=[],a=0;a<n.length;a++){var l=n[a];try{if(l.getAttribute("data-fp-omit")!==null)continue;l._flatpickr!==void 0&&(l._flatpickr.destroy(),l._flatpickr=void 0),l._flatpickr=n$(l,e||{}),s.push(l._flatpickr)}catch(o){console.error(o)}}return s.length===1?s[0]:s}typeof HTMLElement<"u"&&typeof HTMLCollection<"u"&&typeof NodeList<"u"&&(HTMLCollection.prototype.flatpickr=NodeList.prototype.flatpickr=function(t){return pc(this,t)},HTMLElement.prototype.flatpickr=function(t){return pc([this],t)});var ii=function(t,e){return typeof t=="string"?pc(window.document.querySelectorAll(t),e):t instanceof Node?pc([t],e):pc(t,e)};ii.defaultConfig={};ii.l10ns={en:Ri({},bm),default:Ri({},bm)};ii.localize=function(t){ii.l10ns.default=Ri(Ri({},ii.l10ns.default),t)};ii.setDefaults=function(t){ii.defaultConfig=Ri(Ri({},ii.defaultConfig),t)};ii.parseDate=Qx({});ii.formatDate=B2({});ii.compareDates=ks;typeof jQuery<"u"&&typeof jQuery.fn<"u"&&(jQuery.fn.flatpickr=function(t){return pc(this,t)});Date.prototype.fp_incr=function(t){return new Date(this.getFullYear(),this.getMonth(),this.getDate()+(typeof t=="string"?parseInt(t,10):t))};typeof window<"u"&&(window.flatpickr=ii);const i$=["onCreate","onDestroy"],Zx=["onChange","onOpen","onClose","onMonthChange","onYearChange","onReady","onValueUpdate","onDayCreate"],s$=(t,e)=>(Zx.forEach(n=>{const s=e[n],a=t[n];if(s){a&&!Array.isArray(a)?t[n]=[t[n]]:t[n]||(t[n]=[]);const l=Array.isArray(s)?s:[s];t[n].length===0?t[n]=l:t[n].push(...l)}}),Zx.forEach(n=>{delete e[n]}),i$.forEach(n=>{delete e[n]}),t),Un=t=>{const e=f.useMemo(()=>({...t}),[t]),{defaultValue:n,options:s={},value:a,children:l,render:o,onCreate:c,onDestroy:d}=e,m=f.useMemo(()=>s$(s,e),[s,e]),u=f.useRef(null),h=f.useRef(void 0);f.useImperativeHandle(t.ref,()=>({get flatpickr(){return h.current}}),[]),f.useEffect(()=>{const v=()=>{var y;m.onClose=m.onClose||(()=>{var b;(b=u.current)!=null&&b.blur&&u.current.blur()}),h.current=(((y=ii)==null?void 0:y.default)||ii)(u.current,m),c?.(h.current)},x=()=>{d?.(h.current),h.current&&h.current.destroy(),h.current=void 0};return v(),()=>{x()}},[m,c,d]),f.useEffect(()=>{var v;if(h.current){const x=Object.getOwnPropertyNames(m);for(let y=x.length-1;y>=0;y--){const b=x[y];let k=m[b];k?.toString()!==((v=h.current.config[b])==null?void 0:v.toString())&&(Zx.includes(b)&&!Array.isArray(k)&&(k=[k]),h.current.set(b,k))}a!==void 0&&a!==h.current.input.value&&h.current.setDate(a,!1)}},[m,a]);const p=f.useCallback(v=>{u.current=v},[]);if(o)return o({...e,defaultValue:n,value:a},p);const g=f.useCallback(v=>{var x,y;t&&t.onChange&&(Array.isArray(t?.onChange)?(x=t?.onChange)==null||x.forEach(()=>[new Date(v.target.value)],a?.toString()||""):typeof t.onChange=="function"&&((y=t?.onChange)==null||y.call(t,[new Date(v.target.value)],a?.toString()||"",h.current)))},[t,a]);return s.wrap?i.jsx("div",{className:"flatpickr",ref:p,children:l}):i.jsx("input",{onChange:g,...e,value:a?.toString(),defaultValue:n,ref:p})},_i=()=>{const t=qm(),e=f.useMemo(()=>{const s=t.map(c=>{const{handle:d,params:m,data:u}=c,h=d?.meta||{};let p=h.breadcrumb||d?.breadcrumb||d?.title||h.title,g="";if(typeof p=="function")try{g=p(m,u,c)}catch(v){console.warn("[Breadcrumb] Resolver failed:",v),g=""}else g=p;return{key:c.id,path:c.pathname,label:g,isHome:c.pathname==="/"||c.pathname==="/dashboard"}}).filter(c=>c.label),a=[],l=new Set;return s.forEach(c=>{l.has(c.path)||(l.add(c.path),a.push(c))}),a.length>0&&a[0].path==="/"||a.unshift({key:"root-home",path:"/",label:r("Home","kivicare-clinic-management-system"),isHome:!0}),a.map(c=>({...c,label:r(c.label,"kivicare-clinic-management-system")}))},[t]);return e.length<=1?null:i.jsx("nav",{className:"breadcrumb-container","aria-label":"breadcrumb",children:i.jsx("ol",{className:"breadcrumb m-0",children:e.map((n,s)=>{const a=s===e.length-1;return i.jsx("li",{className:`breadcrumb-item ${a?"active":""}`,...a?{"aria-current":"page"}:{},children:a?i.jsx("span",{className:"breadcrumb-text",children:n.label}):i.jsx(ht,{to:n.path,className:"breadcrumb-link",children:n.label})},n.key)})})})},jo={getUpcomingAppointment:(t=null)=>{let e="dashboard/upcoming-appointments";if(t&&t.start_date&&t.end_date){const n=new URLSearchParams;n.append("start_date",t.start_date),n.append("end_date",t.end_date),e=`${e}?${n.toString()}`}return ve({endpoint:e,method:"GET"})},getStatsCount:(t,e=null)=>{let n=`dashboard/statistics/${t}`;if(e&&e.start_date&&e.end_date){const s=new URLSearchParams;s.append("start_date",e.start_date),s.append("end_date",e.end_date),n=`${n}?${s.toString()}`}return ve({endpoint:n,method:"GET"})},getTopDoctors:(t={})=>{const{limit:e=5,start_date:n,end_date:s}=t,a=new URLSearchParams;e&&a.append("limit",e),n&&a.append("start_date",n),s&&a.append("end_date",s);const l=a.toString(),o=`dashboard/top-doctors${l?"?"+l:""}`;return ve({endpoint:o,method:"GET"})},getRecentPayments:(t={})=>{const{limit:e=3,clinic_id:n,start_date:s,end_date:a}=t,l=new URLSearchParams;e&&l.append("limit",e),n&&l.append("clinic_id",n),s&&l.append("start_date",s),a&&l.append("end_date",a);const o=l.toString(),c=`dashboard/recent-payments${o?"?"+o:""}`;return ve({endpoint:c,method:"GET"})},getCalendarAppointments:(t={})=>{const e=new URLSearchParams;t.start_date&&e.append("date_from",t.start_date),t.end_date&&e.append("date_to",t.end_date),t.doctor&&e.append("doctor",t.doctor),t.patient&&e.append("patient",t.patient),t.clinic&&e.append("clinic",t.clinic),t.status&&e.append("status",t.status),t.search&&e.append("search",t.search),e.append("perPage","all");const n=e.toString(),s=`appointments${n?"?"+n:""}`;return ve({endpoint:s,method:"GET"})}},$s={all:["dashboard"],settings:(t={})=>[...$s.all,"settings",t?.start_date,t?.end_date],stats:(t,e={})=>[...$s.all,"stats",t,e?.start_date,e?.end_date],topDoctors:(t={},e={})=>[...$s.all,"topDoctors",JSON.stringify(t),e?.start_date,e?.end_date],recentPayments:(t={})=>[...$s.all,"recentPayments",JSON.stringify(t),t?.start_date,t?.end_date],calendarAppointments:t=>[...$s.all,"calendarAppointments",JSON.stringify(t)],bookingStatus:(t={})=>[...$s.all,"bookingStatus",t?.start_date,t?.end_date]},a$=(t={})=>{const{params:e,...n}=t;return ft({queryKey:t.queryKey||$s.settings(e),queryFn:()=>jo.getUpcomingAppointment(e),staleTime:300*1e3,cacheTime:1800*1e3,...n})},r$=(t,e={})=>{const{params:n,...s}=e;return ft({queryKey:e.queryKey||$s.stats(t,n),queryFn:()=>jo.getStatsCount(t,n),enabled:!!t,staleTime:300*1e3,cacheTime:1800*1e3,...s})},R0=async(t,e,n=null)=>{let s=null,a=null;typeof e=="function"?(s=e,a=n):e&&typeof e=="object"&&(a=e,s=n);try{const l=await jo.getStatsCount(t,a);return s&&typeof s=="function"&&s(l),l}catch(l){throw console.error(`Error fetching stats for ${t}:`,l),s&&typeof s=="function"&&s(null,l),l}},l$=(t={},e={})=>{const{start_date:n,end_date:s,...a}=t,l=n&&s?{start_date:n,end_date:s}:{};return ft({queryKey:$s.topDoctors(a,l),queryFn:()=>jo.getTopDoctors({...a,...l}),staleTime:300*1e3,cacheTime:1800*1e3,...e})},o$=(t={},e={})=>ft({queryKey:$s.recentPayments(t),queryFn:()=>jo.getRecentPayments(t),staleTime:300*1e3,cacheTime:1800*1e3,...e}),c$=(t={},e={})=>ft({queryKey:$s.calendarAppointments(t),queryFn:()=>jo.getCalendarAppointments(t),staleTime:300*1e3,cacheTime:1800*1e3,...e}),d$=(t={},e={})=>ft({queryKey:$s.bookingStatus(t),queryFn:()=>jo.getStatsCount("booking-status",t),staleTime:300*1e3,cacheTime:1800*1e3,...e}),m$=({title:t,titleId:e,...n},s)=>f.createElement("svg",{width:31,height:30,viewBox:"0 0 31 30",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:s,"aria-labelledby":e,...n},t?f.createElement("title",{id:e},t):null,f.createElement("g",null,f.createElement("path",{d:"M0.549316 24.1039C0.549574 24.814 0.836051 25.4949 1.34578 25.997C1.85551 26.4991 2.54678 26.7813 3.26764 26.7815H9.24796V21.9297C8.05264 21.7971 6.94867 21.2358 6.14653 20.3528C5.3444 19.4698 4.90021 18.327 4.89865 17.1421V14.4645C4.89991 14.0388 5.07215 13.6309 5.37775 13.3298C5.68335 13.0288 6.09746 12.8592 6.52964 12.8579H7.0733C7.1447 12.8579 7.2154 12.8718 7.28136 12.8987C7.34732 12.9256 7.40725 12.965 7.45773 13.0148C7.50822 13.0645 7.54826 13.1235 7.57558 13.1885C7.60291 13.2535 7.61697 13.3231 7.61697 13.3934C7.61697 13.4638 7.60291 13.5334 7.57558 13.5984C7.54826 13.6634 7.50822 13.7224 7.45773 13.7721C7.40725 13.8218 7.34732 13.8613 7.28136 13.8882C7.2154 13.9151 7.1447 13.929 7.0733 13.929H6.52964C6.38558 13.9294 6.24755 13.9859 6.14568 14.0863C6.04381 14.1866 5.9864 14.3226 5.98598 14.4645V17.1421C6.17796 22.1095 13.4071 22.1061 13.5973 17.1421V14.4645C13.5969 14.3226 13.5395 14.1866 13.4376 14.0863C13.3357 13.9859 13.1977 13.9294 13.0536 13.929H12.51C12.3672 13.9268 12.2311 13.8694 12.1309 13.7692C12.0308 13.669 11.9747 13.5341 11.9747 13.3934C11.9747 13.2528 12.0308 13.1179 12.1309 13.0177C12.2311 12.9175 12.3672 12.8601 12.51 12.8579H13.0536C13.4858 12.8592 13.8999 13.0288 14.2055 13.3298C14.5111 13.6309 14.6833 14.0388 14.6846 14.4645V17.1421C14.683 18.327 14.2388 19.4698 13.4367 20.3528C12.6346 21.2358 11.5306 21.7971 10.3353 21.9297C10.3332 22.1578 10.3368 26.7538 10.3353 26.7815C10.4885 27.6708 10.9531 28.479 11.6483 29.066C12.3435 29.6529 13.2255 29.9815 14.141 29.9946L16.3156 29.9946C17.2301 29.9941 18.1138 29.669 18.8048 29.0789C19.4957 28.4888 19.9476 27.6732 20.0777 26.7815H28.2762C28.9971 26.7813 29.6884 26.4991 30.1981 25.997C30.7078 25.4949 30.9943 24.814 30.9946 24.1039V9.10925H0.549316V24.1039ZM17.9466 19.2842C17.9468 18.5741 18.2333 17.8932 18.7431 17.3911C19.2528 16.889 19.9441 16.6068 20.6649 16.6066H21.2629C21.3883 16.0018 21.7219 15.4582 22.2074 15.0679C22.6928 14.6776 23.3003 14.4644 23.9269 14.4645C27.5184 14.5754 27.5207 19.7087 23.9269 19.8197C23.3002 19.8198 22.6928 19.6066 22.2074 19.2163C21.7219 18.8259 21.3883 18.2824 21.2629 17.6776H20.6649C20.2328 17.6789 19.8186 17.8485 19.513 18.1496C19.2074 18.4506 19.0352 18.8585 19.0339 19.2842V26.246C19.0323 26.9557 18.7454 27.6358 18.236 28.1376C17.7266 28.6394 17.0361 28.922 16.3156 28.9236H14.141C13.5143 28.9237 12.9069 28.7105 12.4214 28.3202C11.936 27.9298 11.6024 27.3863 11.477 26.7815H17.9466L17.9466 19.2842Z",fill:"currentColor"}),f.createElement("path",{d:"M23.9269 18.7487C24.3563 18.7438 24.7664 18.5724 25.0682 18.2717C25.3701 17.9709 25.5394 17.565 25.5394 17.1421C25.5394 16.7191 25.3701 16.3132 25.0682 16.0125C24.7663 15.7117 24.3562 15.5403 23.9269 15.5355C23.4975 15.5404 23.0874 15.7117 22.7856 16.0125C22.4837 16.3133 22.3144 16.7192 22.3144 17.1421C22.3144 17.5651 22.4837 17.9709 22.7856 18.2717C22.0875 18.5725 23.4976 18.7438 23.9269 18.7487ZM23.9269 16.6066C24.0697 16.6087 24.2059 16.666 24.3062 16.7662C24.4064 16.8664 24.4626 17.0014 24.4626 17.1421C24.4626 17.2828 24.4064 17.4178 24.3061 17.518C24.2059 17.6182 24.0697 17.6755 23.9269 17.6776C23.7841 17.6755 23.6479 17.6182 23.5476 17.518C23.4474 17.4178 23.3912 17.2827 23.3912 17.1421C23.3913 17.0014 23.4474 16.8664 23.5477 16.7662C23.6479 16.666 23.7841 16.6086 23.9269 16.6066Z",fill:"currentColor"}),f.createElement("path",{d:"M28.2762 2.68297H26.6452V1.61195C26.6403 1.18907 26.4662 0.785175 26.1609 0.48787C25.8556 0.190565 25.4436 0.0238284 25.0142 0.0238284C24.5849 0.0238284 24.1729 0.190565 23.8675 0.48787C23.5622 0.785175 23.3882 1.18907 23.3832 1.61195V5.36056C23.3813 5.50131 23.3231 5.63564 23.2214 5.73448C23.1196 5.83333 22.9825 5.88875 22.8396 5.88875C22.6967 5.88875 22.5595 5.83333 22.4578 5.73448C22.356 5.63564 22.2979 5.50131 22.2959 5.36056V2.68297H8.16061V1.61195C8.15652 1.1885 7.98288 0.783761 7.67745 0.485753C7.37202 0.187744 6.9595 0.0205639 6.52959 0.0205688C6.09969 0.0205738 5.68717 0.187763 5.38174 0.485779C5.07632 0.783795 4.90269 1.18854 4.89862 1.61198V5.36061C4.89632 5.50114 4.83803 5.63515 4.73632 5.73373C4.63461 5.83231 4.49764 5.88756 4.35495 5.88756C4.21227 5.88756 4.0753 5.83231 3.97359 5.73373C3.87188 5.63515 3.81359 5.50114 3.81129 5.36061V2.68302H3.26763C2.6666 2.68031 2.08185 2.87536 1.60615 3.23722C1.13045 3.59908 0.791025 4.10703 0.641715 4.68051C0.452452 5.13787 0.589135 7.52339 0.549259 8.03826H30.9946V5.36058C30.9943 4.65051 30.7078 3.96959 30.1981 3.46749C29.6884 2.9654 28.9971 2.68321 28.2762 2.68297ZM7.0733 2.68297H5.98595V1.61195C5.98595 1.46992 6.04323 1.3337 6.14519 1.23327C6.24714 1.13284 6.38543 1.07642 6.52962 1.07642C6.6738 1.07642 6.81209 1.13284 6.91404 1.23327C7.016 1.3337 7.07328 1.46992 7.07328 1.61195L7.0733 2.68297ZM25.5579 2.68297H24.4706V1.61195C24.4706 1.46992 24.5278 1.3337 24.6298 1.23327C24.7318 1.13284 24.87 1.07642 25.0142 1.07642C25.1584 1.07642 25.2967 1.13284 25.3987 1.23327C25.5006 1.3337 25.5579 1.46992 25.5579 1.61195L25.5579 2.68297Z",fill:"currentColor"})),f.createElement("defs",null,f.createElement("clipPath",null,f.createElement("rect",{width:31,height:30,fill:"white"})))),u$=f.forwardRef(m$),h$=({title:t,titleId:e,...n},s)=>f.createElement("svg",{width:38,height:30,viewBox:"0 0 38 30",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:s,"aria-labelledby":e,...n},t?f.createElement("title",{id:e},t):null,f.createElement("path",{d:"M12.9992 14.9391C16.7634 14.9391 19.8148 11.8876 19.8148 8.12343C19.8148 4.35926 16.7634 1.3078 12.9992 1.3078C9.23505 1.3078 6.18359 4.35926 6.18359 8.12343C6.18359 11.8876 9.23505 14.9391 12.9992 14.9391Z",fill:"currentColor"}),f.createElement("path",{d:"M36.3828 0.859375H28.8281C27.9609 0.859375 27.2656 1.5625 27.2656 2.42187V11.2266C27.2656 13.0547 28.2656 14.7422 29.8672 15.6172L31.8273 16.6812V23.2305C31.8273 25.6281 29.8766 27.5781 27.4797 27.5781H25.9469C25.9414 27.5781 25.9359 27.5812 25.9305 27.5812C25.8508 24.1313 24.4336 21.0031 22.1562 18.7266C20.7031 17.2812 18.9062 16.1719 16.8984 15.5391C15.7344 16.1562 14.4062 16.5 13 16.5C11.5938 16.5 10.2656 16.1562 9.10156 15.5391C3.85938 17.1875 0.0546875 22.0938 0.0546875 27.8828V29.1406H25.9453H25.9469H27.4797C30.7391 29.1406 33.3898 26.4891 33.3898 23.2305V16.6742L35.3359 15.618C36.9453 14.743 37.9453 13.0555 37.9453 11.2273V2.42187C37.9453 1.5625 37.2422 0.859375 36.3828 0.859375ZM35.2656 8.96094H33.3828V10.8438C33.3828 11.2812 33.0391 11.625 32.6016 11.625C32.1719 11.625 31.8203 11.2812 31.8203 10.8438V8.96094H29.9375C29.5078 8.96094 29.1562 8.61719 29.1562 8.17969C29.1562 7.75 29.5078 7.39844 29.9375 7.39844H31.8203V5.51563C31.8203 5.08594 32.1719 4.73438 32.6016 4.73438C33.0391 4.73438 33.3828 5.08594 33.3828 5.51563V7.39844H35.2656C35.7031 7.39844 36.0469 7.75 36.0469 8.17969C36.0469 8.61719 35.7031 8.96094 35.2656 8.96094Z",fill:"currentColor"})),p$=f.forwardRef(h$),g$=({title:t,titleId:e,...n},s)=>f.createElement("svg",{width:25,height:31,viewBox:"0 0 25 31",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:s,"aria-labelledby":e,...n},t?f.createElement("title",{id:e},t):null,f.createElement("g",null,f.createElement("path",{d:"M18.8486 11V14C18.8486 14.1326 18.796 14.2598 18.7022 14.3536C18.6084 14.4473 18.4812 14.5 18.3486 14.5H14.8486V18C14.8486 18.1326 14.796 18.2598 14.7022 18.3536C14.6084 18.4473 14.4812 18.5 14.3486 18.5H11.3486C11.216 18.5 11.0888 18.4473 10.9951 18.3536C10.9013 18.2598 10.8486 18.1326 10.8486 18V14.5H7.34863C7.21602 14.5 7.08885 14.4473 6.99508 14.3536C6.90131 14.2598 6.84863 14.1326 6.84863 14V11C6.84863 10.8674 6.90131 10.7402 6.99508 10.6464C7.08885 10.5527 7.21602 10.5 7.34863 10.5H10.8486V7C10.8486 6.86739 10.9013 6.74021 10.9951 6.64645C11.0888 6.55268 11.216 6.5 11.3486 6.5H14.3486C14.4812 6.5 14.6084 6.55268 14.7022 6.64645C14.796 6.74021 14.8486 6.86739 14.8486 7V10.5H18.3486C18.4812 10.5 18.6084 10.5527 18.7022 10.6464C18.796 10.7402 18.8486 10.8674 18.8486 11ZM24.8486 12.5C24.8486 21.647 13.6238 30.0488 13.1458 30.4021C13.0597 30.4657 12.9556 30.5 12.8486 30.5C12.7417 30.5 12.6375 30.4657 12.5515 30.4021C12.0735 30.0488 0.848633 21.647 0.848633 12.5C0.848633 9.3174 2.11291 6.26515 4.36335 4.01472C6.61379 1.76428 9.66603 0.5 12.8486 0.5C16.0312 0.5 19.0835 1.76428 21.3339 4.01472C23.5844 6.26515 24.8486 9.3174 24.8486 12.5ZM21.8486 12.5C21.8486 10.72 21.3208 8.97991 20.3319 7.49987C19.3429 6.01983 17.9373 4.86627 16.2928 4.18508C14.6482 3.5039 12.8386 3.32567 11.0928 3.67293C9.34699 4.0202 7.74334 4.87737 6.48467 6.13604C5.226 7.39471 4.36883 8.99836 4.02157 10.7442C3.6743 12.49 3.85253 14.2996 4.53372 15.9442C5.21491 17.5887 6.36846 18.9943 7.8485 19.9832C9.32854 20.9722 11.0686 21.5 12.8486 21.5C15.2347 21.4973 17.5224 20.5482 19.2096 18.861C20.8968 17.1737 21.8459 14.8861 21.8486 12.5Z",fill:"currentColor"})),f.createElement("defs",null,f.createElement("clipPath",null,f.createElement("rect",{width:24,height:30,fill:"white",transform:"translate(0.848633 0.5)"})))),f$=f.forwardRef(g$),v$=({title:t,titleId:e,...n},s)=>f.createElement("svg",{width:27,height:31,viewBox:"0 0 27 31",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:s,"aria-labelledby":e,...n},t?f.createElement("title",{id:e},t):null,f.createElement("g",null,f.createElement("path",{d:"M21.9935 17.4026C22.2786 18.0609 22.4445 18.8663 22.4812 19.7977C23.4435 20.0182 24.1637 20.879 24.1637 21.9069C24.1637 23.1008 23.1924 24.0721 21.9985 24.0721C20.8046 24.0721 19.8333 23.1008 19.8333 21.9069C19.8333 20.8906 20.5378 20.0389 21.4832 19.806C21.4415 18.881 21.2204 17.4736 20.315 16.7787C19.8529 16.6591 19.3779 16.5725 18.8906 16.5279C18.8546 18.1485 13.4982 22.1478 13.4982 22.1478C13.4982 22.1478 8.14018 18.1491 8.10387 16.5286C7.56257 16.5779 7.03593 16.6768 6.52727 16.8194C5.86672 17.3423 5.52495 18.3167 5.50729 19.7331C5.7015 19.8447 5.85839 20.0189 5.95466 20.2297C6.66618 20.5658 7.29475 21.2727 7.7761 22.279C7.85671 22.4482 7.86737 22.6394 7.80807 22.814C8.09655 23.5565 8.26143 24.3679 8.26143 25.0495C8.26143 26.0045 8.26143 26.9076 7.22047 27.1394C7.10788 27.233 6.96664 27.2846 6.81841 27.2846H6.12288C5.77411 27.2846 5.49031 27.0002 5.49031 26.6524L5.49097 26.6277C5.5043 26.2913 5.78577 26.0198 6.12288 26.0198H6.81841C6.88969 26.0198 6.95931 26.0318 7.0266 26.0551C7.06857 26.0435 7.0819 26.0338 7.08223 26.0335C7.15951 25.8962 7.15951 25.3246 7.15951 25.0501C7.15951 24.4965 7.02094 23.828 6.7781 23.2067C6.65219 23.1351 6.55026 23.0268 6.48763 22.8959C6.06592 22.0129 5.4923 21.4426 5.02662 21.4426C4.55027 21.4426 3.94801 22.0595 3.52796 22.9762C3.45934 23.1258 3.33909 23.2474 3.19119 23.3203C2.97167 23.9146 2.85109 24.5265 2.85109 25.0498C2.85109 25.2803 2.85109 25.8919 2.93903 26.0358C2.94003 26.0358 2.95968 26.0478 3.01498 26.0615C3.08693 26.0338 3.16421 26.0195 3.24149 26.0195H3.93835C4.26313 26.0195 4.53462 26.2667 4.56726 26.5881L4.57059 26.6271C4.57059 27.0005 4.28678 27.285 3.93835 27.285H3.24149C3.10325 27.285 2.96967 27.2387 2.85975 27.1547C2.46168 27.0798 2.18121 26.9042 2.00366 26.6184C1.78847 26.273 1.74916 25.8193 1.74916 25.0498C1.74916 24.3749 1.90506 23.5975 2.1882 22.855C2.14656 22.6961 2.16055 22.5302 2.22984 22.3806C2.52464 21.7357 2.89972 21.1834 3.31411 20.784C3.54195 20.5645 3.78679 20.388 4.04295 20.259C4.13888 20.0345 4.30544 19.8503 4.50897 19.7341C4.51963 18.8463 4.6562 18.0798 4.9087 17.4479C2.01798 18.9143 0.0369873 21.9133 0.0369873 25.3766C0.0369873 29.8023 3.27047 30.0188 7.50328 30.0188C7.9653 30.0188 8.43831 30.0161 8.92165 30.0161H18.0711C18.5538 30.0161 19.0268 30.0188 19.4889 30.0188C23.7223 30.0188 26.9571 29.8023 26.9571 25.3766C26.9568 21.8766 24.9335 18.8513 21.9935 17.4026Z",fill:"currentColor"}),f.createElement("path",{d:"M13.4996 17.691C17.5915 17.691 20.9082 11.5382 20.9082 7.44661C20.9082 3.3557 17.5915 0.0389404 13.4996 0.0389404C9.40831 0.0389404 6.09155 3.3557 6.09155 7.44661C6.09155 11.5382 9.40831 17.691 13.4996 17.691Z",fill:"currentColor"}),f.createElement("path",{d:"M21.9981 22.9062C22.55 22.9062 22.9974 22.4588 22.9974 21.9069C22.9974 21.355 22.55 20.9076 21.9981 20.9076C21.4462 20.9076 20.9988 21.355 20.9988 21.9069C20.9988 22.4588 21.4462 22.9062 21.9981 22.9062Z",fill:"currentColor"})),f.createElement("defs",null,f.createElement("clipPath",null,f.createElement("rect",{width:27,height:30.0578,fill:"white"})))),x$=f.forwardRef(v$),y$=({title:t,titleId:e,...n},s)=>f.createElement("svg",{width:31,height:31,viewBox:"0 0 31 31",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:s,"aria-labelledby":e,...n},t?f.createElement("title",{id:e},t):null,f.createElement("path",{d:"M15.1456 8.172C11.1049 8.172 7.8176 11.4593 7.8176 15.5C7.8176 19.5407 11.1049 22.8281 15.1456 22.8281C19.1863 22.8281 22.4737 19.5407 22.4737 15.5C22.4737 11.4593 19.1863 8.172 15.1456 8.172ZM14.1122 18.917L11.2788 16.0836L12.5217 14.8406L14.1123 16.4311L17.8389 12.7046L19.0818 13.9475L14.1122 18.917Z",fill:"currentColor"}),f.createElement("path",{d:"M30.1456 17.9258V13.0742L27.1493 12.2039C26.8752 11.2063 26.4774 10.249 25.9619 9.34689L27.4674 6.60869L24.0369 3.17814L21.2987 4.68371C20.3966 4.16826 19.4394 3.77047 18.4416 3.49631L17.5714 0.5H12.7198L11.8495 3.49631C10.8518 3.77041 9.89452 4.16826 8.99241 4.68371L6.25426 3.17814L2.82372 6.60869L4.32922 9.34689C3.81377 10.249 3.41592 11.2063 3.14182 12.2039L0.14563 13.0742V17.9258L3.14194 18.7961C3.41604 19.7937 3.81389 20.751 4.32934 21.6531L2.82383 24.3913L6.25438 27.8219L8.99252 26.3163C9.89463 26.8317 10.8519 27.2295 11.8496 27.5037L12.7199 30.5H17.5714L18.4418 27.5037C19.4394 27.2296 20.3967 26.8317 21.2989 26.3163L24.037 27.8219L27.4675 24.3913L25.962 21.6531C26.4775 20.751 26.8753 19.7937 27.1494 18.7961L30.1456 17.9258ZM15.1456 24.5858C10.1357 24.5858 6.05979 20.5099 6.05979 15.5C6.05979 10.4901 10.1357 6.41416 15.1456 6.41416C20.1556 6.41416 24.2315 10.4901 24.2315 15.5C24.2315 20.5099 20.1556 24.5858 15.1456 24.5858Z",fill:"currentColor"})),b$=f.forwardRef(y$),k$=({title:t,titleId:e,...n},s)=>f.createElement("svg",{width:23,height:30,viewBox:"0 0 23 30",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:s,"aria-labelledby":e,...n},t?f.createElement("title",{id:e},t):null,f.createElement("g",null,f.createElement("path",{d:"M6.37115 5.625H16.5872L18.792 3.895C19.5427 3.3075 19.8231 2.35375 19.5057 1.46375C19.1884 0.57375 18.3638 0 17.4054 0H5.55295C4.59455 0 3.76998 0.575 3.45264 1.46375C3.1353 2.3525 3.41568 3.3075 4.16506 3.89375L6.37115 5.625Z",fill:"currentColor"}),f.createElement("path",{d:"M16.7618 7.5H6.19653C2.71598 10.8512 0.0090332 16.7312 0.0090332 21.5625C0.0090332 25.7612 2.27502 30 7.33717 30H15.9398C20.264 30 22.9493 26.7663 22.9493 21.5625C22.9493 16.7312 20.2423 10.8512 16.7618 7.5ZM10.9949 17.8125H11.9635C13.4533 17.8125 14.6653 19.0013 14.6653 20.4625C14.6653 21.7763 13.6993 22.8575 12.435 23.0775V24.0613C12.435 24.5788 12.0068 24.9988 11.4792 24.9988C10.9515 24.9988 10.5233 24.5788 10.5233 24.0613V23.125H9.24886C8.72123 23.125 8.29302 22.705 8.29302 22.1875C8.29302 21.67 8.72123 21.25 9.24886 21.25H11.9635C12.3993 21.25 12.7536 20.9025 12.7536 20.475C12.7536 20.035 12.3993 19.6875 11.9635 19.6875H10.9949C9.50503 19.6875 8.29302 18.4987 8.29302 17.0375C8.29302 15.7238 9.25906 14.6425 10.5233 14.4225V13.4375C10.5233 12.92 10.9515 12.5 11.4792 12.5C12.0068 12.5 12.435 12.92 12.435 13.4375V14.375H13.7095C14.2371 14.375 14.6653 14.795 14.6653 15.3125C14.6653 15.83 14.2371 16.25 13.7095 16.25H10.9949C10.559 16.25 10.2047 16.5975 10.2047 17.025C10.2047 17.465 10.559 17.8125 10.9949 17.8125Z",fill:"currentColor"})),f.createElement("defs",null,f.createElement("clipPath",null,f.createElement("rect",{width:23,height:30,fill:"white"})))),w$=f.forwardRef(k$),j$=({component:t,title:e,iconKey:n,color:s="primary",useHook:a=!0,onDataLoaded:l=null,dateFilter:o=null,isFiltering:c=!1,isCurrency:d=!1,capability:m,linkTo:u=null,iconPosition:h="top",...p})=>{const{hasCapability:g}=mt();if(m&&!g(m))return null;const[v,x]=f.useState("--"),[y,b]=f.useState("--"),[k,w]=f.useState(!1),[T,j]=f.useState(null),D=He.useMemo(()=>{const z=["stats",t];return o?.start_date&&o?.end_date&&z.push(o.start_date,o.end_date),z},[t,o]),{data:_,isLoading:N,error:A,refetch:P}=r$(t,{enabled:a&&!!t,params:o,queryKey:D}),E=z=>{let ie=0,W=null;z?.json?.data?.count!==void 0?ie=z.json.data.count:z?.data?.count!==void 0?ie=z.data.count:z?.count!==void 0&&(ie=z.count),z?.json?.data?.formatted_count!==void 0?W=z.json.data.formatted_count:z?.data?.formatted_count!==void 0?W=z.data.formatted_count:z?.formatted_count!==void 0&&(W=z.formatted_count);const ge=W||(isNaN(ie)?ie:Number(ie).toLocaleString());let ae=ge;if(d&&!isNaN(ie)&&Number(ie)>1e3){const U=Number(ie);let X;U>=1e6?X=(U/1e6).toFixed(1)+"M":X=(U/1e3).toFixed(1)+"k",X=X.replace(".0",""),W?ae=W.replace(/[\d,.]+/,X):ae=X}return{displayCount:ae,fullDisplay:ge}};f.useEffect(()=>{if(_&&a)try{const{displayCount:z,fullDisplay:ie}=E(_);x(z),b(ie),l&&typeof l=="function"&&l(_,null,t)}catch(z){j(z)}},[_,t,a,l,d]),f.useEffect(()=>{A&&a&&(j(A),l&&typeof l=="function"&&l(null,A,t))},[A,t,a,l]),f.useEffect(()=>{!a&&t&&(w(!0),j(null),R0(t,(z,ie)=>{if(w(!1),ie)j(ie),x("--"),b("--");else{const{displayCount:W,fullDisplay:ge}=E(z);x(W),b(ge)}l&&typeof l=="function"&&l(z,ie,t)},o))},[t,a,l,o]);const I=a?N:k,M=a?A:T,O={appointment:u$,patient:p$,clinic:f$,doctor:x$,service:b$,revenue:w$},F=()=>{const z=O[n];return z?i.jsx(z,{className:"icon-svg",style:{width:"30px",height:"30px"},"aria-label":`${e} icon`}):i.jsx("div",{className:`text-center rounded-circle p-3 bg-${s}-subtle mb-3`,children:i.jsx("i",{className:`${n} fs-4 align-middle`})})},H=()=>i.jsx("div",{className:h==="right"?"text-start":"text-center",children:I?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"skeleton-element mb-2 mb-md-3 mx-auto",style:{width:"80px",height:"2rem"}}),i.jsx("div",{className:"skeleton-element mx-auto",style:{width:"140px",height:"1rem"}})]}):M?i.jsxs("div",{className:"text-danger mb-3",children:[r("Error","kivicare-clinic-management-system"),i.jsx("button",{className:"btn btn-link btn-sm text-decoration-none ms-2",onClick:()=>{a?P():t&&(w(!0),j(null),R0(t,(z,ie)=>{if(w(!1),ie)j(ie),x("--"),b("--");else{const{displayCount:W,fullDisplay:ge}=E(z);x(W),b(ge)}l&&l(z,ie,t)}))},children:r("Retry","kivicare-clinic-management-system")})]}):i.jsxs(i.Fragment,{children:[d&&v!==y?i.jsx(Qe,{placement:"top",overlay:i.jsx(ut,{id:`tooltip-${t}`,children:y}),children:i.jsx("h3",{className:"heading-color line-clamp-1 counter mb-2 mb-md-3 fw-bold",children:v})}):i.jsx("h3",{className:"heading-color line-clamp-1 counter mb-0 fw-bold",children:v}),i.jsx("p",{className:"text-body line-clamp-1 fw-medium mb-0",children:e})]})}),G=i.jsx("div",{className:`card-body  ${h==="right"?"p-4":""}`,children:i.jsxs("div",{className:`d-flex ${h==="right"?"align-items-center justify-content-between gap-lg-3 gap-2":"align-items-center justify-content-center flex-column"}`,children:[h==="right"&&H(),i.jsx("div",{className:`card-icon ${h==="right"?"mb-0":""}`,children:F()}),h!=="right"&&H()]})});return i.jsx("div",{className:`card card-block card-stretch card-height overflow-hidden ${u?"cursor-pointer":""}`,children:u?i.jsx(ht,{to:u,className:"text-decoration-none text-reset",children:G}):G})},P0=({title:t,items:e=[],renderItem:n,viewAllLink:s="appointments",loading:a=!1,emptyMessage:l=r("No items to display","kivicare-clinic-management-system")})=>i.jsxs("div",{className:"card card-block card-stretch card-height",children:[i.jsxs("div",{className:"card-header d-flex align-items-center justify-content-between flex-wrap gap-3 mb-4",children:[i.jsx("h6",{className:"card-title mb-0",children:t}),s==="appointments"&&i.jsx(ht,{to:"/appointments",className:"btn btn-link",children:r("View All","kivicare-clinic-management-system")}),s==="doctors"&&i.jsx(ht,{to:"/doctor",className:"btn btn-link",children:r("View All","kivicare-clinic-management-system")})]}),i.jsx("div",{className:"card-body pt-0",children:i.jsx("div",{className:"upcoming-appointments","data-scrollbar":"true",children:i.jsx("div",{className:"scroll-content",children:a?i.jsx("ul",{className:"list-inline p-0 m-0",children:Array.from({length:3}).map((o,c)=>i.jsx("li",{className:"items-list",children:i.jsx("div",{className:"bg-body p-3 rounded-3",children:i.jsxs("div",{className:"d-flex align-items-center gap-3",children:[i.jsx("div",{className:"skeleton-element rounded-circle",style:{width:"2.5rem",height:"2.5rem"}}),i.jsxs("div",{className:"flex-grow-1",children:[i.jsx("div",{className:"skeleton-element mb-2",style:{width:"140px",height:"1rem"}}),i.jsx("div",{className:"skeleton-element",style:{width:"100px",height:"0.875rem"}})]})]})})},`skeleton-${c}`))}):e.length>0?i.jsx("ul",{id:"upcoming-appointments",className:"list-inline p-0 m-0",children:e.map((o,c)=>i.jsx("li",{className:"items-list",children:n(o)},c))}):i.jsx("div",{className:"d-flex align-items-center justify-content-center p-3",style:{minHeight:"19rem"},children:i.jsx("p",{className:"text-muted mb-0",children:l})})})})})]});function Qm(t){return t+.5|0}const Qr=(t,e,n)=>Math.max(Math.min(t,n),e);function qd(t){return Qr(Qm(t*2.55),0,255)}function cl(t){return Qr(Qm(t*255),0,255)}function mr(t){return Qr(Qm(t/2.55)/100,0,1)}function M0(t){return Qr(Qm(t*100),0,100)}const Os={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Xx=[..."0123456789ABCDEF"],N$=t=>Xx[t&15],C$=t=>Xx[(t&240)>>4]+Xx[t&15],Vu=t=>(t&240)>>4===(t&15),_$=t=>Vu(t.r)&&Vu(t.g)&&Vu(t.b)&&Vu(t.a);function S$(t){var e=t.length,n;return t[0]==="#"&&(e===4||e===5?n={r:255&Os[t[1]]*17,g:255&Os[t[2]]*17,b:255&Os[t[3]]*17,a:e===5?Os[t[4]]*17:255}:(e===7||e===9)&&(n={r:Os[t[1]]<<4|Os[t[2]],g:Os[t[3]]<<4|Os[t[4]],b:Os[t[5]]<<4|Os[t[6]],a:e===9?Os[t[7]]<<4|Os[t[8]]:255})),n}const E$=(t,e)=>t<255?e(t):"";function T$(t){var e=_$(t)?N$:C$;return t?"#"+e(t.r)+e(t.g)+e(t.b)+E$(t.a,e):void 0}const A$=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function q2(t,e,n){const s=e*Math.min(n,1-n),a=(l,o=(l+t/30)%12)=>n-s*Math.max(Math.min(o-3,9-o,1),-1);return[a(0),a(8),a(4)]}function D$(t,e,n){const s=(a,l=(a+t/60)%6)=>n-n*e*Math.max(Math.min(l,4-l,1),0);return[s(5),s(3),s(1)]}function R$(t,e,n){const s=q2(t,1,.5);let a;for(e+n>1&&(a=1/(e+n),e*=a,n*=a),a=0;a<3;a++)s[a]*=1-e-n,s[a]+=e;return s}function P$(t,e,n,s,a){return t===a?(e-n)/s+(e<n?6:0):e===a?(n-t)/s+2:(t-e)/s+4}function sk(t){const n=t.r/255,s=t.g/255,a=t.b/255,l=Math.max(n,s,a),o=Math.min(n,s,a),c=(l+o)/2;let d,m,u;return l!==o&&(u=l-o,m=c>.5?u/(2-l-o):u/(l+o),d=P$(n,s,a,u,l),d=d*60+.5),[d|0,m||0,c]}function ak(t,e,n,s){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,s)).map(cl)}function rk(t,e,n){return ak(q2,t,e,n)}function M$(t,e,n){return ak(R$,t,e,n)}function I$(t,e,n){return ak(D$,t,e,n)}function H2(t){return(t%360+360)%360}function O$(t){const e=A$.exec(t);let n=255,s;if(!e)return;e[5]!==s&&(n=e[6]?qd(+e[5]):cl(+e[5]));const a=H2(+e[2]),l=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?s=M$(a,l,o):e[1]==="hsv"?s=I$(a,l,o):s=rk(a,l,o),{r:s[0],g:s[1],b:s[2],a:n}}function F$(t,e){var n=sk(t);n[0]=H2(n[0]+e),n=rk(n),t.r=n[0],t.g=n[1],t.b=n[2]}function L$(t){if(!t)return;const e=sk(t),n=e[0],s=M0(e[1]),a=M0(e[2]);return t.a<255?`hsla(${n}, ${s}%, ${a}%, ${mr(t.a)})`:`hsl(${n}, ${s}%, ${a}%)`}const I0={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},O0={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function $$(){const t={},e=Object.keys(O0),n=Object.keys(I0);let s,a,l,o,c;for(s=0;s<e.length;s++){for(o=c=e[s],a=0;a<n.length;a++)l=n[a],c=c.replace(l,I0[l]);l=parseInt(O0[o],16),t[c]=[l>>16&255,l>>8&255,l&255]}return t}let Uu;function B$(t){Uu||(Uu=$$(),Uu.transparent=[0,0,0,0]);const e=Uu[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const q$=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function H$(t){const e=q$.exec(t);let n=255,s,a,l;if(e){if(e[7]!==s){const o=+e[7];n=e[8]?qd(o):Qr(o*255,0,255)}return s=+e[1],a=+e[3],l=+e[5],s=255&(e[2]?qd(s):Qr(s,0,255)),a=255&(e[4]?qd(a):Qr(a,0,255)),l=255&(e[6]?qd(l):Qr(l,0,255)),{r:s,g:a,b:l,a:n}}}function z$(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${mr(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const dv=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,Ko=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function V$(t,e,n){const s=Ko(mr(t.r)),a=Ko(mr(t.g)),l=Ko(mr(t.b));return{r:cl(dv(s+n*(Ko(mr(e.r))-s))),g:cl(dv(a+n*(Ko(mr(e.g))-a))),b:cl(dv(l+n*(Ko(mr(e.b))-l))),a:t.a+n*(e.a-t.a)}}function Wu(t,e,n){if(t){let s=sk(t);s[e]=Math.max(0,Math.min(s[e]+s[e]*n,e===0?360:1)),s=rk(s),t.r=s[0],t.g=s[1],t.b=s[2]}}function z2(t,e){return t&&Object.assign(e||{},t)}function F0(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=cl(t[3]))):(e=z2(t,{r:0,g:0,b:0,a:1}),e.a=cl(e.a)),e}function U$(t){return t.charAt(0)==="r"?H$(t):O$(t)}class km{constructor(e){if(e instanceof km)return e;const n=typeof e;let s;n==="object"?s=F0(e):n==="string"&&(s=S$(e)||B$(e)||U$(e)),this._rgb=s,this._valid=!!s}get valid(){return this._valid}get rgb(){var e=z2(this._rgb);return e&&(e.a=mr(e.a)),e}set rgb(e){this._rgb=F0(e)}rgbString(){return this._valid?z$(this._rgb):void 0}hexString(){return this._valid?T$(this._rgb):void 0}hslString(){return this._valid?L$(this._rgb):void 0}mix(e,n){if(e){const s=this.rgb,a=e.rgb;let l;const o=n===l?.5:n,c=2*o-1,d=s.a-a.a,m=((c*d===-1?c:(c+d)/(1+c*d))+1)/2;l=1-m,s.r=255&m*s.r+l*a.r+.5,s.g=255&m*s.g+l*a.g+.5,s.b=255&m*s.b+l*a.b+.5,s.a=o*s.a+(1-o)*a.a,this.rgb=s}return this}interpolate(e,n){return e&&(this._rgb=V$(this._rgb,e._rgb,n)),this}clone(){return new km(this.rgb)}alpha(e){return this._rgb.a=cl(e),this}clearer(e){const n=this._rgb;return n.a*=1-e,this}greyscale(){const e=this._rgb,n=Qm(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=n,this}opaquer(e){const n=this._rgb;return n.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return Wu(this._rgb,2,e),this}darken(e){return Wu(this._rgb,2,-e),this}saturate(e){return Wu(this._rgb,1,e),this}desaturate(e){return Wu(this._rgb,1,-e),this}rotate(e){return F$(this._rgb,e),this}}function ar(){}const W$=(()=>{let t=0;return()=>t++})();function Tn(t){return t==null}function hi(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function an(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function Xs(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function _a(t,e){return Xs(t)?t:e}function sn(t,e){return typeof t>"u"?e:t}const K$=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100:+t/e,V2=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function qn(t,e,n){if(t&&typeof t.call=="function")return t.apply(n,e)}function Nn(t,e,n,s){let a,l,o;if(hi(t))for(l=t.length,a=0;a<l;a++)e.call(n,t[a],a);else if(an(t))for(o=Object.keys(t),l=o.length,a=0;a<l;a++)e.call(n,t[o[a]],o[a])}function gp(t,e){let n,s,a,l;if(!t||!e||t.length!==e.length)return!1;for(n=0,s=t.length;n<s;++n)if(a=t[n],l=e[n],a.datasetIndex!==l.datasetIndex||a.index!==l.index)return!1;return!0}function fp(t){if(hi(t))return t.map(fp);if(an(t)){const e=Object.create(null),n=Object.keys(t),s=n.length;let a=0;for(;a<s;++a)e[n[a]]=fp(t[n[a]]);return e}return t}function U2(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function G$(t,e,n,s){if(!U2(t))return;const a=e[t],l=n[t];an(a)&&an(l)?wm(a,l,s):e[t]=fp(l)}function wm(t,e,n){const s=hi(e)?e:[e],a=s.length;if(!an(t))return t;n=n||{};const l=n.merger||G$;let o;for(let c=0;c<a;++c){if(o=s[c],!an(o))continue;const d=Object.keys(o);for(let m=0,u=d.length;m<u;++m)l(d[m],t,o,n)}return t}function tm(t,e){return wm(t,e,{merger:Y$})}function Y$(t,e,n){if(!U2(t))return;const s=e[t],a=n[t];an(s)&&an(a)?tm(s,a):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=fp(a))}const L0={"":t=>t,x:t=>t.x,y:t=>t.y};function Q$(t){const e=t.split("."),n=[];let s="";for(const a of e)s+=a,s.endsWith("\\")?s=s.slice(0,-1)+".":(n.push(s),s="");return n}function Z$(t){const e=Q$(t);return n=>{for(const s of e){if(s==="")break;n=n&&n[s]}return n}}function ao(t,e){return(L0[e]||(L0[e]=Z$(e)))(t)}function lk(t){return t.charAt(0).toUpperCase()+t.slice(1)}const jm=t=>typeof t<"u",gl=t=>typeof t=="function",$0=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};function X$(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const En=Math.PI,ci=2*En,vp=Number.POSITIVE_INFINITY,J$=En/180,pi=En/2,Pl=En/4,B0=En*2/3,W2=Math.log10,dl=Math.sign;function Ih(t,e,n){return Math.abs(t-e)<n}function q0(t){const e=Math.round(t);t=Ih(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(W2(t))),s=t/n;return(s<=1?1:s<=2?2:s<=5?5:10)*n}function eB(t){const e=[],n=Math.sqrt(t);let s;for(s=1;s<n;s++)t%s===0&&(e.push(s),e.push(t/s));return n===(n|0)&&e.push(n),e.sort((a,l)=>a-l).pop(),e}function tB(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function xp(t){return!tB(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function nB(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}function iB(t,e,n){let s,a,l;for(s=0,a=t.length;s<a;s++)l=t[s][n],isNaN(l)||(e.min=Math.min(e.min,l),e.max=Math.max(e.max,l))}function hr(t){return t*(En/180)}function sB(t){return t*(180/En)}function H0(t){if(!Xs(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function K2(t,e){const n=e.x-t.x,s=e.y-t.y,a=Math.sqrt(n*n+s*s);let l=Math.atan2(s,n);return l<-.5*En&&(l+=ci),{angle:l,distance:a}}function aB(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function Ta(t){return(t%ci+ci)%ci}function yp(t,e,n,s){const a=Ta(t),l=Ta(e),o=Ta(n),c=Ta(l-a),d=Ta(o-a),m=Ta(a-l),u=Ta(a-o);return a===l||a===o||s&&l===o||c>d&&m<u}function as(t,e,n){return Math.max(e,Math.min(n,t))}function rB(t){return as(t,-32768,32767)}function Vl(t,e,n,s=1e-6){return t>=Math.min(e,n)-s&&t<=Math.max(e,n)+s}function ok(t,e,n){n=n||(o=>t[o]<e);let s=t.length-1,a=0,l;for(;s-a>1;)l=a+s>>1,n(l)?a=l:s=l;return{lo:a,hi:s}}const Jx=(t,e,n,s)=>ok(t,n,s?a=>{const l=t[a][e];return l<n||l===n&&t[a+1][e]===n}:a=>t[a][e]<n),lB=(t,e,n)=>ok(t,n,s=>t[s][e]>=n);function oB(t,e,n){let s=0,a=t.length;for(;s<a&&t[s]<e;)s++;for(;a>s&&t[a-1]>n;)a--;return s>0||a<t.length?t.slice(s,a):t}const G2=["push","pop","shift","splice","unshift"];function cB(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),G2.forEach(n=>{const s="_onData"+lk(n),a=t[n];Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value(...l){const o=a.apply(this,l);return t._chartjs.listeners.forEach(c=>{typeof c[s]=="function"&&c[s](...l)}),o}})})}function z0(t,e){const n=t._chartjs;if(!n)return;const s=n.listeners,a=s.indexOf(e);a!==-1&&s.splice(a,1),!(s.length>0)&&(G2.forEach(l=>{delete t[l]}),delete t._chartjs)}function Y2(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const Q2=(function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame})();function Z2(t,e){let n=[],s=!1;return function(...a){n=a,s||(s=!0,Q2.call(window,()=>{s=!1,t.apply(e,n)}))}}function dB(t,e){let n;return function(...s){return e?(clearTimeout(n),n=setTimeout(t,e,s)):t.apply(this,s),e}}const ck=t=>t==="start"?"left":t==="end"?"right":"center",Di=(t,e,n)=>t==="start"?e:t==="end"?n:(e+n)/2,mB=(t,e,n,s)=>t===(s?"left":"right")?n:t==="center"?(e+n)/2:e,Ku=t=>t===0||t===1,V0=(t,e,n)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*ci/n)),U0=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*ci/n)+1,nm={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*pi)+1,easeOutSine:t=>Math.sin(t*pi),easeInOutSine:t=>-.5*(Math.cos(En*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>Ku(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>Ku(t)?t:V0(t,.075,.3),easeOutElastic:t=>Ku(t)?t:U0(t,.075,.3),easeInOutElastic(t){return Ku(t)?t:t<.5?.5*V0(t*2,.1125,.45):.5+.5*U0(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-nm.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?nm.easeInBounce(t*2)*.5:nm.easeOutBounce(t*2-1)*.5+.5};function X2(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function W0(t){return X2(t)?t:new km(t)}function mv(t){return X2(t)?t:new km(t).saturate(.5).darken(.1).hexString()}const uB=["x","y","borderWidth","radius","tension"],hB=["color","borderColor","backgroundColor"];function pB(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:hB},numbers:{type:"number",properties:uB}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function gB(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const K0=new Map;function fB(t,e){e=e||{};const n=t+JSON.stringify(e);let s=K0.get(n);return s||(s=new Intl.NumberFormat(t,e),K0.set(n,s)),s}function dk(t,e,n){return fB(e,n).format(t)}const vB={values(t){return hi(t)?t:""+t},numeric(t,e,n){if(t===0)return"0";const s=this.chart.options.locale;let a,l=t;if(n.length>1){const m=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(m<1e-4||m>1e15)&&(a="scientific"),l=xB(t,n)}const o=W2(Math.abs(l)),c=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),d={notation:a,minimumFractionDigits:c,maximumFractionDigits:c};return Object.assign(d,this.options.ticks.format),dk(t,s,d)}};function xB(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}var J2={formatters:vB};function yB(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,n)=>n.lineWidth,tickColor:(e,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:J2.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const ro=Object.create(null),ey=Object.create(null);function im(t,e){if(!e)return t;const n=e.split(".");for(let s=0,a=n.length;s<a;++s){const l=n[s];t=t[l]||(t[l]=Object.create(null))}return t}function uv(t,e,n){return typeof e=="string"?wm(im(t,e),n):wm(im(t,""),e)}class bB{constructor(e,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=s=>s.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(s,a)=>mv(a.backgroundColor),this.hoverBorderColor=(s,a)=>mv(a.borderColor),this.hoverColor=(s,a)=>mv(a.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(n)}set(e,n){return uv(this,e,n)}get(e){return im(this,e)}describe(e,n){return uv(ey,e,n)}override(e,n){return uv(ro,e,n)}route(e,n,s,a){const l=im(this,e),o=im(this,s),c="_"+n;Object.defineProperties(l,{[c]:{value:l[n],writable:!0},[n]:{enumerable:!0,get(){const d=this[c],m=o[a];return an(d)?Object.assign({},m,d):sn(d,m)},set(d){this[c]=d}}})}apply(e){e.forEach(n=>n(this))}}var si=new bB({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[pB,gB,yB]);function kB(t){return!t||Tn(t.size)||Tn(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function G0(t,e,n,s,a){let l=e[a];return l||(l=e[a]=t.measureText(a).width,n.push(a)),l>s&&(s=l),s}function Ml(t,e,n){const s=t.currentDevicePixelRatio,a=n!==0?Math.max(n/2,.5):0;return Math.round((e-a)*s)/s+a}function Y0(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function Q0(t,e,n,s){eT(t,e,n,s,null)}function eT(t,e,n,s,a){let l,o,c,d,m,u,h,p;const g=e.pointStyle,v=e.rotation,x=e.radius;let y=(v||0)*J$;if(g&&typeof g=="object"&&(l=g.toString(),l==="[object HTMLImageElement]"||l==="[object HTMLCanvasElement]")){t.save(),t.translate(n,s),t.rotate(y),t.drawImage(g,-g.width/2,-g.height/2,g.width,g.height),t.restore();return}if(!(isNaN(x)||x<=0)){switch(t.beginPath(),g){default:a?t.ellipse(n,s,a/2,x,0,0,ci):t.arc(n,s,x,0,ci),t.closePath();break;case"triangle":u=a?a/2:x,t.moveTo(n+Math.sin(y)*u,s-Math.cos(y)*x),y+=B0,t.lineTo(n+Math.sin(y)*u,s-Math.cos(y)*x),y+=B0,t.lineTo(n+Math.sin(y)*u,s-Math.cos(y)*x),t.closePath();break;case"rectRounded":m=x*.516,d=x-m,o=Math.cos(y+Pl)*d,h=Math.cos(y+Pl)*(a?a/2-m:d),c=Math.sin(y+Pl)*d,p=Math.sin(y+Pl)*(a?a/2-m:d),t.arc(n-h,s-c,m,y-En,y-pi),t.arc(n+p,s-o,m,y-pi,y),t.arc(n+h,s+c,m,y,y+pi),t.arc(n-p,s+o,m,y+pi,y+En),t.closePath();break;case"rect":if(!v){d=Math.SQRT1_2*x,u=a?a/2:d,t.rect(n-u,s-d,2*u,2*d);break}y+=Pl;case"rectRot":h=Math.cos(y)*(a?a/2:x),o=Math.cos(y)*x,c=Math.sin(y)*x,p=Math.sin(y)*(a?a/2:x),t.moveTo(n-h,s-c),t.lineTo(n+p,s-o),t.lineTo(n+h,s+c),t.lineTo(n-p,s+o),t.closePath();break;case"crossRot":y+=Pl;case"cross":h=Math.cos(y)*(a?a/2:x),o=Math.cos(y)*x,c=Math.sin(y)*x,p=Math.sin(y)*(a?a/2:x),t.moveTo(n-h,s-c),t.lineTo(n+h,s+c),t.moveTo(n+p,s-o),t.lineTo(n-p,s+o);break;case"star":h=Math.cos(y)*(a?a/2:x),o=Math.cos(y)*x,c=Math.sin(y)*x,p=Math.sin(y)*(a?a/2:x),t.moveTo(n-h,s-c),t.lineTo(n+h,s+c),t.moveTo(n+p,s-o),t.lineTo(n-p,s+o),y+=Pl,h=Math.cos(y)*(a?a/2:x),o=Math.cos(y)*x,c=Math.sin(y)*x,p=Math.sin(y)*(a?a/2:x),t.moveTo(n-h,s-c),t.lineTo(n+h,s+c),t.moveTo(n+p,s-o),t.lineTo(n-p,s+o);break;case"line":o=a?a/2:Math.cos(y)*x,c=Math.sin(y)*x,t.moveTo(n-o,s-c),t.lineTo(n+o,s+c);break;case"dash":t.moveTo(n,s),t.lineTo(n+Math.cos(y)*(a?a/2:x),s+Math.sin(y)*x);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function tT(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function mk(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function uk(t){t.restore()}function wB(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),Tn(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function jB(t,e,n,s,a){if(a.strikethrough||a.underline){const l=t.measureText(s),o=e-l.actualBoundingBoxLeft,c=e+l.actualBoundingBoxRight,d=n-l.actualBoundingBoxAscent,m=n+l.actualBoundingBoxDescent,u=a.strikethrough?(d+m)/2:m;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=a.decorationWidth||2,t.moveTo(o,u),t.lineTo(c,u),t.stroke()}}function NB(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function Nm(t,e,n,s,a,l={}){const o=hi(e)?e:[e],c=l.strokeWidth>0&&l.strokeColor!=="";let d,m;for(t.save(),t.font=a.string,wB(t,l),d=0;d<o.length;++d)m=o[d],l.backdrop&&NB(t,l.backdrop),c&&(l.strokeColor&&(t.strokeStyle=l.strokeColor),Tn(l.strokeWidth)||(t.lineWidth=l.strokeWidth),t.strokeText(m,n,s,l.maxWidth)),t.fillText(m,n,s,l.maxWidth),jB(t,n,s,m,l),s+=Number(a.lineHeight);t.restore()}function bp(t,e){const{x:n,y:s,w:a,h:l,radius:o}=e;t.arc(n+o.topLeft,s+o.topLeft,o.topLeft,1.5*En,En,!0),t.lineTo(n,s+l-o.bottomLeft),t.arc(n+o.bottomLeft,s+l-o.bottomLeft,o.bottomLeft,En,pi,!0),t.lineTo(n+a-o.bottomRight,s+l),t.arc(n+a-o.bottomRight,s+l-o.bottomRight,o.bottomRight,pi,0,!0),t.lineTo(n+a,s+o.topRight),t.arc(n+a-o.topRight,s+o.topRight,o.topRight,0,-pi,!0),t.lineTo(n+o.topLeft,s)}const CB=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,_B=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function SB(t,e){const n=(""+t).match(CB);if(!n||n[1]==="normal")return e*1.2;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100;break}return e*t}const EB=t=>+t||0;function hk(t,e){const n={},s=an(e),a=s?Object.keys(e):e,l=an(t)?s?o=>sn(t[o],t[e[o]]):o=>t[o]:()=>t;for(const o of a)n[o]=EB(l(o));return n}function nT(t){return hk(t,{top:"y",right:"x",bottom:"y",left:"x"})}function gc(t){return hk(t,["topLeft","topRight","bottomLeft","bottomRight"])}function Js(t){const e=nT(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function Fi(t,e){t=t||{},e=e||si.font;let n=sn(t.size,e.size);typeof n=="string"&&(n=parseInt(n,10));let s=sn(t.style,e.style);s&&!(""+s).match(_B)&&(console.warn('Invalid font style specified: "'+s+'"'),s=void 0);const a={family:sn(t.family,e.family),lineHeight:SB(sn(t.lineHeight,e.lineHeight),n),size:n,style:s,weight:sn(t.weight,e.weight),string:""};return a.string=kB(a),a}function Gu(t,e,n,s){let a,l,o;for(a=0,l=t.length;a<l;++a)if(o=t[a],o!==void 0&&o!==void 0)return o}function TB(t,e,n){const{min:s,max:a}=t,l=V2(e,(a-s)/2),o=(c,d)=>n&&c===0?0:c+d;return{min:o(s,-Math.abs(l)),max:o(a,l)}}function Zc(t,e){return Object.assign(Object.create(t),e)}function pk(t,e=[""],n,s,a=()=>t[0]){const l=n||t;typeof s>"u"&&(s=rT("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:l,_fallback:s,_getTarget:a,override:c=>pk([c,...t],e,l,s)};return new Proxy(o,{deleteProperty(c,d){return delete c[d],delete c._keys,delete t[0][d],!0},get(c,d){return sT(c,d,()=>FB(d,e,t,c))},getOwnPropertyDescriptor(c,d){return Reflect.getOwnPropertyDescriptor(c._scopes[0],d)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(c,d){return X0(c).includes(d)},ownKeys(c){return X0(c)},set(c,d,m){const u=c._storage||(c._storage=a());return c[d]=u[d]=m,delete c._keys,!0}})}function Ic(t,e,n,s){const a={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:iT(t,s),setContext:l=>Ic(t,l,n,s),override:l=>Ic(t.override(l),e,n,s)};return new Proxy(a,{deleteProperty(l,o){return delete l[o],delete t[o],!0},get(l,o,c){return sT(l,o,()=>DB(l,o,c))},getOwnPropertyDescriptor(l,o){return l._descriptors.allKeys?Reflect.has(t,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,o)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(l,o){return Reflect.has(t,o)},ownKeys(){return Reflect.ownKeys(t)},set(l,o,c){return t[o]=c,delete l[o],!0}})}function iT(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:s=e.indexable,_allKeys:a=e.allKeys}=t;return{allKeys:a,scriptable:n,indexable:s,isScriptable:gl(n)?n:()=>n,isIndexable:gl(s)?s:()=>s}}const AB=(t,e)=>t?t+lk(e):e,gk=(t,e)=>an(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function sT(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const s=n();return t[e]=s,s}function DB(t,e,n){const{_proxy:s,_context:a,_subProxy:l,_descriptors:o}=t;let c=s[e];return gl(c)&&o.isScriptable(e)&&(c=RB(e,c,t,n)),hi(c)&&c.length&&(c=PB(e,c,t,o.isIndexable)),gk(e,c)&&(c=Ic(c,a,l&&l[e],o)),c}function RB(t,e,n,s){const{_proxy:a,_context:l,_subProxy:o,_stack:c}=n;if(c.has(t))throw new Error("Recursion detected: "+Array.from(c).join("->")+"->"+t);c.add(t);let d=e(l,o||s);return c.delete(t),gk(t,d)&&(d=fk(a._scopes,a,t,d)),d}function PB(t,e,n,s){const{_proxy:a,_context:l,_subProxy:o,_descriptors:c}=n;if(typeof l.index<"u"&&s(t))return e[l.index%e.length];if(an(e[0])){const d=e,m=a._scopes.filter(u=>u!==d);e=[];for(const u of d){const h=fk(m,a,t,u);e.push(Ic(h,l,o&&o[t],c))}}return e}function aT(t,e,n){return gl(t)?t(e,n):t}const MB=(t,e)=>t===!0?e:typeof t=="string"?ao(e,t):void 0;function IB(t,e,n,s,a){for(const l of e){const o=MB(n,l);if(o){t.add(o);const c=aT(o._fallback,n,a);if(typeof c<"u"&&c!==n&&c!==s)return c}else if(o===!1&&typeof s<"u"&&n!==s)return null}return!1}function fk(t,e,n,s){const a=e._rootScopes,l=aT(e._fallback,n,s),o=[...t,...a],c=new Set;c.add(s);let d=Z0(c,o,n,l||n,s);return d===null||typeof l<"u"&&l!==n&&(d=Z0(c,o,l,d,s),d===null)?!1:pk(Array.from(c),[""],a,l,()=>OB(e,n,s))}function Z0(t,e,n,s,a){for(;n;)n=IB(t,e,n,s,a);return n}function OB(t,e,n){const s=t._getTarget();e in s||(s[e]={});const a=s[e];return hi(a)&&an(n)?n:a||{}}function FB(t,e,n,s){let a;for(const l of e)if(a=rT(AB(l,t),n),typeof a<"u")return gk(t,a)?fk(n,s,t,a):a}function rT(t,e){for(const n of e){if(!n)continue;const s=n[t];if(typeof s<"u")return s}}function X0(t){let e=t._keys;return e||(e=t._keys=LB(t._scopes)),e}function LB(t){const e=new Set;for(const n of t)for(const s of Object.keys(n).filter(a=>!a.startsWith("_")))e.add(s);return Array.from(e)}function vk(){return typeof window<"u"&&typeof document<"u"}function xk(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function kp(t,e,n){let s;return typeof t=="string"?(s=parseInt(t,10),t.indexOf("%")!==-1&&(s=s/100*e.parentNode[n])):s=t,s}const Rg=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function $B(t,e){return Rg(t).getPropertyValue(e)}const BB=["top","right","bottom","left"];function Yl(t,e,n){const s={};n=n?"-"+n:"";for(let a=0;a<4;a++){const l=BB[a];s[l]=parseFloat(t[e+"-"+l+n])||0}return s.width=s.left+s.right,s.height=s.top+s.bottom,s}const qB=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function HB(t,e){const n=t.touches,s=n&&n.length?n[0]:t,{offsetX:a,offsetY:l}=s;let o=!1,c,d;if(qB(a,l,t.target))c=a,d=l;else{const m=e.getBoundingClientRect();c=s.clientX-m.left,d=s.clientY-m.top,o=!0}return{x:c,y:d,box:o}}function Ll(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:s}=e,a=Rg(n),l=a.boxSizing==="border-box",o=Yl(a,"padding"),c=Yl(a,"border","width"),{x:d,y:m,box:u}=HB(t,n),h=o.left+(u&&c.left),p=o.top+(u&&c.top);let{width:g,height:v}=e;return l&&(g-=o.width+c.width,v-=o.height+c.height),{x:Math.round((d-h)/g*n.width/s),y:Math.round((m-p)/v*n.height/s)}}function zB(t,e,n){let s,a;if(e===void 0||n===void 0){const l=t&&xk(t);if(!l)e=t.clientWidth,n=t.clientHeight;else{const o=l.getBoundingClientRect(),c=Rg(l),d=Yl(c,"border","width"),m=Yl(c,"padding");e=o.width-m.width-d.width,n=o.height-m.height-d.height,s=kp(c.maxWidth,l,"clientWidth"),a=kp(c.maxHeight,l,"clientHeight")}}return{width:e,height:n,maxWidth:s||vp,maxHeight:a||vp}}const Zr=t=>Math.round(t*10)/10;function VB(t,e,n,s){const a=Rg(t),l=Yl(a,"margin"),o=kp(a.maxWidth,t,"clientWidth")||vp,c=kp(a.maxHeight,t,"clientHeight")||vp,d=zB(t,e,n);let{width:m,height:u}=d;if(a.boxSizing==="content-box"){const p=Yl(a,"border","width"),g=Yl(a,"padding");m-=g.width+p.width,u-=g.height+p.height}return m=Math.max(0,m-l.width),u=Math.max(0,s?m/s:u-l.height),m=Zr(Math.min(m,o,d.maxWidth)),u=Zr(Math.min(u,c,d.maxHeight)),m&&!u&&(u=Zr(m/2)),(e!==void 0||n!==void 0)&&s&&d.height&&u>d.height&&(u=d.height,m=Zr(Math.floor(u*s))),{width:m,height:u}}function J0(t,e,n){const s=e||1,a=Zr(t.height*s),l=Zr(t.width*s);t.height=Zr(t.height),t.width=Zr(t.width);const o=t.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),t.currentDevicePixelRatio!==s||o.height!==a||o.width!==l?(t.currentDevicePixelRatio=s,o.height=a,o.width=l,t.ctx.setTransform(s,0,0,s,0,0),!0):!1}const UB=(function(){let t=!1;try{const e={get passive(){return t=!0,!1}};vk()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t})();function eN(t,e){const n=$B(t,e),s=n&&n.match(/^(\d+)(\.\d+)?px$/);return s?+s[1]:void 0}const WB=function(t,e){return{x(n){return t+t+e-n},setWidth(n){e=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,s){return n-s},leftForLtr(n,s){return n-s}}},KB=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function fc(t,e,n){return t?WB(e,n):KB()}function lT(t,e){let n,s;(e==="ltr"||e==="rtl")&&(n=t.canvas.style,s=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=s)}function oT(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function Yu(t,e,n){return t.options.clip?t[n]:e[n]}function GB(t,e){const{xScale:n,yScale:s}=t;return n&&s?{left:Yu(n,e,"left"),right:Yu(n,e,"right"),top:Yu(s,e,"top"),bottom:Yu(s,e,"bottom")}:e}function YB(t,e){const n=e._clip;if(n.disabled)return!1;const s=GB(e,t.chartArea);return{left:n.left===!1?0:s.left-(n.left===!0?0:n.left),right:n.right===!1?t.width:s.right+(n.right===!0?0:n.right),top:n.top===!1?0:s.top-(n.top===!0?0:n.top),bottom:n.bottom===!1?t.height:s.bottom+(n.bottom===!0?0:n.bottom)}}class QB{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,n,s,a){const l=n.listeners[a],o=n.duration;l.forEach(c=>c({chart:e,initial:n.initial,numSteps:o,currentStep:Math.min(s-n.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=Q2.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let n=0;this._charts.forEach((s,a)=>{if(!s.running||!s.items.length)return;const l=s.items;let o=l.length-1,c=!1,d;for(;o>=0;--o)d=l[o],d._active?(d._total>s.duration&&(s.duration=d._total),d.tick(e),c=!0):(l[o]=l[l.length-1],l.pop());c&&(a.draw(),this._notify(a,s,e,"progress")),l.length||(s.running=!1,this._notify(a,s,e,"complete"),s.initial=!1),n+=l.length}),this._lastDate=e,n===0&&(this._running=!1)}_getAnims(e){const n=this._charts;let s=n.get(e);return s||(s={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(e,s)),s}listen(e,n,s){this._getAnims(e).listeners[n].push(s)}add(e,n){!n||!n.length||this._getAnims(e).items.push(...n)}has(e){return this._getAnims(e).items.length>0}start(e){const n=this._charts.get(e);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((s,a)=>Math.max(s,a._duration),0),this._refresh())}running(e){if(!this._running)return!1;const n=this._charts.get(e);return!(!n||!n.running||!n.items.length)}stop(e){const n=this._charts.get(e);if(!n||!n.items.length)return;const s=n.items;let a=s.length-1;for(;a>=0;--a)s[a].cancel();n.items=[],this._notify(e,n,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var or=new QB;const tN="transparent",ZB={boolean(t,e,n){return n>.5?e:t},color(t,e,n){const s=W0(t||tN),a=s.valid&&W0(e||tN);return a&&a.valid?a.mix(s,n).hexString():e},number(t,e,n){return t+(e-t)*n}};class XB{constructor(e,n,s,a){const l=n[s];a=Gu([e.to,a,l,e.from]);const o=Gu([e.from,l,a]);this._active=!0,this._fn=e.fn||ZB[e.type||typeof o],this._easing=nm[e.easing]||nm.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=n,this._prop=s,this._from=o,this._to=a,this._promises=void 0}active(){return this._active}update(e,n,s){if(this._active){this._notify(!1);const a=this._target[this._prop],l=s-this._start,o=this._duration-l;this._start=s,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=l,this._loop=!!e.loop,this._to=Gu([e.to,n,a,e.from]),this._from=Gu([e.from,a,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const n=e-this._start,s=this._duration,a=this._prop,l=this._from,o=this._loop,c=this._to;let d;if(this._active=l!==c&&(o||n<s),!this._active){this._target[a]=c,this._notify(!0);return}if(n<0){this._target[a]=l;return}d=n/s%2,d=o&&d>1?2-d:d,d=this._easing(Math.min(1,Math.max(0,d))),this._target[a]=this._fn(l,c,d)}wait(){const e=this._promises||(this._promises=[]);return new Promise((n,s)=>{e.push({res:n,rej:s})})}_notify(e){const n=e?"res":"rej",s=this._promises||[];for(let a=0;a<s.length;a++)s[a][n]()}}class cT{constructor(e,n){this._chart=e,this._properties=new Map,this.configure(n)}configure(e){if(!an(e))return;const n=Object.keys(si.animation),s=this._properties;Object.getOwnPropertyNames(e).forEach(a=>{const l=e[a];if(!an(l))return;const o={};for(const c of n)o[c]=l[c];(hi(l.properties)&&l.properties||[a]).forEach(c=>{(c===a||!s.has(c))&&s.set(c,o)})})}_animateOptions(e,n){const s=n.options,a=e8(e,s);if(!a)return[];const l=this._createAnimations(a,s);return s.$shared&&JB(e.options.$animations,s).then(()=>{e.options=s},()=>{}),l}_createAnimations(e,n){const s=this._properties,a=[],l=e.$animations||(e.$animations={}),o=Object.keys(n),c=Date.now();let d;for(d=o.length-1;d>=0;--d){const m=o[d];if(m.charAt(0)==="$")continue;if(m==="options"){a.push(...this._animateOptions(e,n));continue}const u=n[m];let h=l[m];const p=s.get(m);if(h)if(p&&h.active()){h.update(p,u,c);continue}else h.cancel();if(!p||!p.duration){e[m]=u;continue}l[m]=h=new XB(p,e,m,u),a.push(h)}return a}update(e,n){if(this._properties.size===0){Object.assign(e,n);return}const s=this._createAnimations(e,n);if(s.length)return or.add(this._chart,s),!0}}function JB(t,e){const n=[],s=Object.keys(e);for(let a=0;a<s.length;a++){const l=t[s[a]];l&&l.active()&&n.push(l.wait())}return Promise.all(n)}function e8(t,e){if(!e)return;let n=t.options;if(!n){t.options=e;return}return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function nN(t,e){const n=t&&t.options||{},s=n.reverse,a=n.min===void 0?e:0,l=n.max===void 0?e:0;return{start:s?l:a,end:s?a:l}}function t8(t,e,n){if(n===!1)return!1;const s=nN(t,n),a=nN(e,n);return{top:a.end,right:s.end,bottom:a.start,left:s.start}}function n8(t){let e,n,s,a;return an(t)?(e=t.top,n=t.right,s=t.bottom,a=t.left):e=n=s=a=t,{top:e,right:n,bottom:s,left:a,disabled:t===!1}}function dT(t,e){const n=[],s=t._getSortedDatasetMetas(e);let a,l;for(a=0,l=s.length;a<l;++a)n.push(s[a].index);return n}function iN(t,e,n,s={}){const a=t.keys,l=s.mode==="single";let o,c,d,m;if(e===null)return;let u=!1;for(o=0,c=a.length;o<c;++o){if(d=+a[o],d===n){if(u=!0,s.all)continue;break}m=t.values[d],Xs(m)&&(l||e===0||dl(e)===dl(m))&&(e+=m)}return!u&&!s.all?0:e}function i8(t,e){const{iScale:n,vScale:s}=e,a=n.axis==="x"?"x":"y",l=s.axis==="x"?"x":"y",o=Object.keys(t),c=new Array(o.length);let d,m,u;for(d=0,m=o.length;d<m;++d)u=o[d],c[d]={[a]:u,[l]:t[u]};return c}function hv(t,e){const n=t&&t.options.stacked;return n||n===void 0&&e.stack!==void 0}function s8(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}function a8(t){const{min:e,max:n,minDefined:s,maxDefined:a}=t.getUserBounds();return{min:s?e:Number.NEGATIVE_INFINITY,max:a?n:Number.POSITIVE_INFINITY}}function r8(t,e,n){const s=t[e]||(t[e]={});return s[n]||(s[n]={})}function sN(t,e,n,s){for(const a of e.getMatchingVisibleMetas(s).reverse()){const l=t[a.index];if(n&&l>0||!n&&l<0)return a.index}return null}function aN(t,e){const{chart:n,_cachedMeta:s}=t,a=n._stacks||(n._stacks={}),{iScale:l,vScale:o,index:c}=s,d=l.axis,m=o.axis,u=s8(l,o,s),h=e.length;let p;for(let g=0;g<h;++g){const v=e[g],{[d]:x,[m]:y}=v,b=v._stacks||(v._stacks={});p=b[m]=r8(a,u,x),p[c]=y,p._top=sN(p,o,!0,s.type),p._bottom=sN(p,o,!1,s.type);const k=p._visualValues||(p._visualValues={});k[c]=y}}function pv(t,e){const n=t.scales;return Object.keys(n).filter(s=>n[s].axis===e).shift()}function l8(t,e){return Zc(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function o8(t,e,n){return Zc(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}function Nd(t,e){const n=t.controller.index,s=t.vScale&&t.vScale.axis;if(s){e=e||t._parsed;for(const a of e){const l=a._stacks;if(!l||l[s]===void 0||l[s][n]===void 0)return;delete l[s][n],l[s]._visualValues!==void 0&&l[s]._visualValues[n]!==void 0&&delete l[s]._visualValues[n]}}}const gv=t=>t==="reset"||t==="none",rN=(t,e)=>e?t:Object.assign({},t),c8=(t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:dT(n,!0),values:null};class yk{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=hv(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&Nd(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,n=this._cachedMeta,s=this.getDataset(),a=(h,p,g,v)=>h==="x"?p:h==="r"?v:g,l=n.xAxisID=sn(s.xAxisID,pv(e,"x")),o=n.yAxisID=sn(s.yAxisID,pv(e,"y")),c=n.rAxisID=sn(s.rAxisID,pv(e,"r")),d=n.indexAxis,m=n.iAxisID=a(d,l,o,c),u=n.vAxisID=a(d,o,l,c);n.xScale=this.getScaleForId(l),n.yScale=this.getScaleForId(o),n.rScale=this.getScaleForId(c),n.iScale=this.getScaleForId(m),n.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&z0(this._data,this),e._stacked&&Nd(e)}_dataCheck(){const e=this.getDataset(),n=e.data||(e.data=[]),s=this._data;if(an(n)){const a=this._cachedMeta;this._data=i8(n,a)}else if(s!==n){if(s){z0(s,this);const a=this._cachedMeta;Nd(a),a._parsed=[]}n&&Object.isExtensible(n)&&cB(n,this),this._syncList=[],this._data=n}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const n=this._cachedMeta,s=this.getDataset();let a=!1;this._dataCheck();const l=n._stacked;n._stacked=hv(n.vScale,n),n.stack!==s.stack&&(a=!0,Nd(n),n.stack=s.stack),this._resyncElements(e),(a||l!==n._stacked)&&(aN(this,n._parsed),n._stacked=hv(n.vScale,n))}configure(){const e=this.chart.config,n=e.datasetScopeKeys(this._type),s=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(s,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){const{_cachedMeta:s,_data:a}=this,{iScale:l,_stacked:o}=s,c=l.axis;let d=e===0&&n===a.length?!0:s._sorted,m=e>0&&s._parsed[e-1],u,h,p;if(this._parsing===!1)s._parsed=a,s._sorted=!0,p=a;else{hi(a[e])?p=this.parseArrayData(s,a,e,n):an(a[e])?p=this.parseObjectData(s,a,e,n):p=this.parsePrimitiveData(s,a,e,n);const g=()=>h[c]===null||m&&h[c]<m[c];for(u=0;u<n;++u)s._parsed[u+e]=h=p[u],d&&(g()&&(d=!1),m=h);s._sorted=d}o&&aN(this,p)}parsePrimitiveData(e,n,s,a){const{iScale:l,vScale:o}=e,c=l.axis,d=o.axis,m=l.getLabels(),u=l===o,h=new Array(a);let p,g,v;for(p=0,g=a;p<g;++p)v=p+s,h[p]={[c]:u||l.parse(m[v],v),[d]:o.parse(n[v],v)};return h}parseArrayData(e,n,s,a){const{xScale:l,yScale:o}=e,c=new Array(a);let d,m,u,h;for(d=0,m=a;d<m;++d)u=d+s,h=n[u],c[d]={x:l.parse(h[0],u),y:o.parse(h[1],u)};return c}parseObjectData(e,n,s,a){const{xScale:l,yScale:o}=e,{xAxisKey:c="x",yAxisKey:d="y"}=this._parsing,m=new Array(a);let u,h,p,g;for(u=0,h=a;u<h;++u)p=u+s,g=n[p],m[u]={x:l.parse(ao(g,c),p),y:o.parse(ao(g,d),p)};return m}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,s){const a=this.chart,l=this._cachedMeta,o=n[e.axis],c={keys:dT(a,!0),values:n._stacks[e.axis]._visualValues};return iN(c,o,l.index,{mode:s})}updateRangeFromParsed(e,n,s,a){const l=s[n.axis];let o=l===null?NaN:l;const c=a&&s._stacks[n.axis];a&&c&&(a.values=c,o=iN(a,l,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,n){const s=this._cachedMeta,a=s._parsed,l=s._sorted&&e===s.iScale,o=a.length,c=this._getOtherScale(e),d=c8(n,s,this.chart),m={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:h}=a8(c);let p,g;function v(){g=a[p];const x=g[c.axis];return!Xs(g[e.axis])||u>x||h<x}for(p=0;p<o&&!(!v()&&(this.updateRangeFromParsed(m,e,g,d),l));++p);if(l){for(p=o-1;p>=0;--p)if(!v()){this.updateRangeFromParsed(m,e,g,d);break}}return m}getAllParsedValues(e){const n=this._cachedMeta._parsed,s=[];let a,l,o;for(a=0,l=n.length;a<l;++a)o=n[a][e.axis],Xs(o)&&s.push(o);return s}getMaxOverflow(){return!1}getLabelAndValue(e){const n=this._cachedMeta,s=n.iScale,a=n.vScale,l=this.getParsed(e);return{label:s?""+s.getLabelForValue(l[s.axis]):"",value:a?""+a.getLabelForValue(l[a.axis]):""}}_update(e){const n=this._cachedMeta;this.update(e||"default"),n._clip=n8(sn(this.options.clip,t8(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,n=this.chart,s=this._cachedMeta,a=s.data||[],l=n.chartArea,o=[],c=this._drawStart||0,d=this._drawCount||a.length-c,m=this.options.drawActiveElementsOnTop;let u;for(s.dataset&&s.dataset.draw(e,l,c,d),u=c;u<c+d;++u){const h=a[u];h.hidden||(h.active&&m?o.push(h):h.draw(e,l))}for(u=0;u<o.length;++u)o[u].draw(e,l)}getStyle(e,n){const s=n?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(s):this.resolveDataElementOptions(e||0,s)}getContext(e,n,s){const a=this.getDataset();let l;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];l=o.$context||(o.$context=o8(this.getContext(),e,o)),l.parsed=this.getParsed(e),l.raw=a.data[e],l.index=l.dataIndex=e}else l=this.$context||(this.$context=l8(this.chart.getContext(),this.index)),l.dataset=a,l.index=l.datasetIndex=this.index;return l.active=!!n,l.mode=s,l}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",s){const a=n==="active",l=this._cachedDataOpts,o=e+"-"+n,c=l[o],d=this.enableOptionSharing&&jm(s);if(c)return rN(c,d);const m=this.chart.config,u=m.datasetElementScopeKeys(this._type,e),h=a?[`${e}Hover`,"hover",e,""]:[e,""],p=m.getOptionScopes(this.getDataset(),u),g=Object.keys(si.elements[e]),v=()=>this.getContext(s,a,n),x=m.resolveNamedOptions(p,g,v,h);return x.$shared&&(x.$shared=d,l[o]=Object.freeze(rN(x,d))),x}_resolveAnimations(e,n,s){const a=this.chart,l=this._cachedDataOpts,o=`animation-${n}`,c=l[o];if(c)return c;let d;if(a.options.animation!==!1){const u=this.chart.config,h=u.datasetAnimationScopeKeys(this._type,n),p=u.getOptionScopes(this.getDataset(),h);d=u.createResolver(p,this.getContext(e,s,n))}const m=new cT(a,d&&d.animations);return d&&d._cacheable&&(l[o]=Object.freeze(m)),m}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||gv(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){const s=this.resolveDataElementOptions(e,n),a=this._sharedOptions,l=this.getSharedOptions(s),o=this.includeOptions(n,l)||l!==a;return this.updateSharedOptions(l,n,s),{sharedOptions:l,includeOptions:o}}updateElement(e,n,s,a){gv(a)?Object.assign(e,s):this._resolveAnimations(n,a).update(e,s)}updateSharedOptions(e,n,s){e&&!gv(n)&&this._resolveAnimations(void 0,n).update(e,s)}_setStyle(e,n,s,a){e.active=a;const l=this.getStyle(n,a);this._resolveAnimations(n,s,a).update(e,{options:!a&&this.getSharedOptions(l)||l})}removeHoverStyle(e,n,s){this._setStyle(e,s,"active",!1)}setHoverStyle(e,n,s){this._setStyle(e,s,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const n=this._data,s=this._cachedMeta.data;for(const[c,d,m]of this._syncList)this[c](d,m);this._syncList=[];const a=s.length,l=n.length,o=Math.min(l,a);o&&this.parse(0,o),l>a?this._insertElements(a,l-a,e):l<a&&this._removeElements(l,a-l)}_insertElements(e,n,s=!0){const a=this._cachedMeta,l=a.data,o=e+n;let c;const d=m=>{for(m.length+=n,c=m.length-1;c>=o;c--)m[c]=m[c-n]};for(d(l),c=e;c<o;++c)l[c]=new this.dataElementType;this._parsing&&d(a._parsed),this.parse(e,n),s&&this.updateElements(l,e,n,"reset")}updateElements(e,n,s,a){}_removeElements(e,n){const s=this._cachedMeta;if(this._parsing){const a=s._parsed.splice(e,n);s._stacked&&Nd(s,a)}s.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[n,s,a]=e;this[n](s,a)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);const s=arguments.length-2;s&&this._sync(["_insertElements",e,s])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function d8(t,e){if(!t._cache.$bar){const n=t.getMatchingVisibleMetas(e);let s=[];for(let a=0,l=n.length;a<l;a++)s=s.concat(n[a].controller.getAllParsedValues(t));t._cache.$bar=Y2(s.sort((a,l)=>a-l))}return t._cache.$bar}function m8(t){const e=t.iScale,n=d8(e,t.type);let s=e._length,a,l,o,c;const d=()=>{o===32767||o===-32768||(jm(c)&&(s=Math.min(s,Math.abs(o-c)||s)),c=o)};for(a=0,l=n.length;a<l;++a)o=e.getPixelForValue(n[a]),d();for(c=void 0,a=0,l=e.ticks.length;a<l;++a)o=e.getPixelForTick(a),d();return s}function u8(t,e,n,s){const a=n.barThickness;let l,o;return Tn(a)?(l=e.min*n.categoryPercentage,o=n.barPercentage):(l=a*s,o=1),{chunk:l/s,ratio:o,start:e.pixels[t]-l/2}}function h8(t,e,n,s){const a=e.pixels,l=a[t];let o=t>0?a[t-1]:null,c=t<a.length-1?a[t+1]:null;const d=n.categoryPercentage;o===null&&(o=l-(c===null?e.end-e.start:c-l)),c===null&&(c=l+l-o);const m=l-(l-Math.min(o,c))/2*d;return{chunk:Math.abs(c-o)/2*d/s,ratio:n.barPercentage,start:m}}function p8(t,e,n,s){const a=n.parse(t[0],s),l=n.parse(t[1],s),o=Math.min(a,l),c=Math.max(a,l);let d=o,m=c;Math.abs(o)>Math.abs(c)&&(d=c,m=o),e[n.axis]=m,e._custom={barStart:d,barEnd:m,start:a,end:l,min:o,max:c}}function mT(t,e,n,s){return hi(t)?p8(t,e,n,s):e[n.axis]=n.parse(t,s),e}function lN(t,e,n,s){const a=t.iScale,l=t.vScale,o=a.getLabels(),c=a===l,d=[];let m,u,h,p;for(m=n,u=n+s;m<u;++m)p=e[m],h={},h[a.axis]=c||a.parse(o[m],m),d.push(mT(p,h,l,m));return d}function fv(t){return t&&t.barStart!==void 0&&t.barEnd!==void 0}function g8(t,e,n){return t!==0?dl(t):(e.isHorizontal()?1:-1)*(e.min>=n?1:-1)}function f8(t){let e,n,s,a,l;return t.horizontal?(e=t.base>t.x,n="left",s="right"):(e=t.base<t.y,n="bottom",s="top"),e?(a="end",l="start"):(a="start",l="end"),{start:n,end:s,reverse:e,top:a,bottom:l}}function v8(t,e,n,s){let a=e.borderSkipped;const l={};if(!a){t.borderSkipped=l;return}if(a===!0){t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:o,end:c,reverse:d,top:m,bottom:u}=f8(t);a==="middle"&&n&&(t.enableBorderRadius=!0,(n._top||0)===s?a=m:(n._bottom||0)===s?a=u:(l[oN(u,o,c,d)]=!0,a=m)),l[oN(a,o,c,d)]=!0,t.borderSkipped=l}function oN(t,e,n,s){return s?(t=x8(t,e,n),t=cN(t,n,e)):t=cN(t,e,n),t}function x8(t,e,n){return t===e?n:t===n?e:t}function cN(t,e,n){return t==="start"?e:t==="end"?n:t}function y8(t,{inflateAmount:e},n){t.inflateAmount=e==="auto"?n===1?.33:0:e}class b8 extends yk{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(e,n,s,a){return lN(e,n,s,a)}parseArrayData(e,n,s,a){return lN(e,n,s,a)}parseObjectData(e,n,s,a){const{iScale:l,vScale:o}=e,{xAxisKey:c="x",yAxisKey:d="y"}=this._parsing,m=l.axis==="x"?c:d,u=o.axis==="x"?c:d,h=[];let p,g,v,x;for(p=s,g=s+a;p<g;++p)x=n[p],v={},v[l.axis]=l.parse(ao(x,m),p),h.push(mT(ao(x,u),v,o,p));return h}updateRangeFromParsed(e,n,s,a){super.updateRangeFromParsed(e,n,s,a);const l=s._custom;l&&n===this._cachedMeta.vScale&&(e.min=Math.min(e.min,l.min),e.max=Math.max(e.max,l.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const n=this._cachedMeta,{iScale:s,vScale:a}=n,l=this.getParsed(e),o=l._custom,c=fv(o)?"["+o.start+", "+o.end+"]":""+a.getLabelForValue(l[a.axis]);return{label:""+s.getLabelForValue(l[s.axis]),value:c}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const n=this._cachedMeta;this.updateElements(n.data,0,n.data.length,e)}updateElements(e,n,s,a){const l=a==="reset",{index:o,_cachedMeta:{vScale:c}}=this,d=c.getBasePixel(),m=c.isHorizontal(),u=this._getRuler(),{sharedOptions:h,includeOptions:p}=this._getSharedOptions(n,a);for(let g=n;g<n+s;g++){const v=this.getParsed(g),x=l||Tn(v[c.axis])?{base:d,head:d}:this._calculateBarValuePixels(g),y=this._calculateBarIndexPixels(g,u),b=(v._stacks||{})[c.axis],k={horizontal:m,base:x.base,enableBorderRadius:!b||fv(v._custom)||o===b._top||o===b._bottom,x:m?x.head:y.center,y:m?y.center:x.head,height:m?y.size:Math.abs(x.size),width:m?Math.abs(x.size):y.size};p&&(k.options=h||this.resolveDataElementOptions(g,e[g].active?"active":a));const w=k.options||e[g].options;v8(k,w,b,o),y8(k,w,u.ratio),this.updateElement(e[g],g,k,a)}}_getStacks(e,n){const{iScale:s}=this._cachedMeta,a=s.getMatchingVisibleMetas(this._type).filter(u=>u.controller.options.grouped),l=s.options.stacked,o=[],c=this._cachedMeta.controller.getParsed(n),d=c&&c[s.axis],m=u=>{const h=u._parsed.find(g=>g[s.axis]===d),p=h&&h[u.vScale.axis];if(Tn(p)||isNaN(p))return!0};for(const u of a)if(!(n!==void 0&&m(u))&&((l===!1||o.indexOf(u.stack)===-1||l===void 0&&u.stack===void 0)&&o.push(u.stack),u.index===e))break;return o.length||o.push(void 0),o}_getStackCount(e){return this._getStacks(void 0,e).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const e=this.chart.scales,n=this.chart.options.indexAxis;return Object.keys(e).filter(s=>e[s].axis===n).shift()}_getAxis(){const e={},n=this.getFirstScaleIdForIndexAxis();for(const s of this.chart.data.datasets)e[sn(this.chart.options.indexAxis==="x"?s.xAxisID:s.yAxisID,n)]=!0;return Object.keys(e)}_getStackIndex(e,n,s){const a=this._getStacks(e,s),l=n!==void 0?a.indexOf(n):-1;return l===-1?a.length-1:l}_getRuler(){const e=this.options,n=this._cachedMeta,s=n.iScale,a=[];let l,o;for(l=0,o=n.data.length;l<o;++l)a.push(s.getPixelForValue(this.getParsed(l)[s.axis],l));const c=e.barThickness;return{min:c||m8(n),pixels:a,start:s._startPixel,end:s._endPixel,stackCount:this._getStackCount(),scale:s,grouped:e.grouped,ratio:c?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:n,_stacked:s,index:a},options:{base:l,minBarLength:o}}=this,c=l||0,d=this.getParsed(e),m=d._custom,u=fv(m);let h=d[n.axis],p=0,g=s?this.applyStack(n,d,s):h,v,x;g!==h&&(p=g-h,g=h),u&&(h=m.barStart,g=m.barEnd-m.barStart,h!==0&&dl(h)!==dl(m.barEnd)&&(p=0),p+=h);const y=!Tn(l)&&!u?l:p;let b=n.getPixelForValue(y);if(this.chart.getDataVisibility(e)?v=n.getPixelForValue(p+g):v=b,x=v-b,Math.abs(x)<o){x=g8(x,n,c)*o,h===c&&(b-=x/2);const k=n.getPixelForDecimal(0),w=n.getPixelForDecimal(1),T=Math.min(k,w),j=Math.max(k,w);b=Math.max(Math.min(b,j),T),v=b+x,s&&!u&&(d._stacks[n.axis]._visualValues[a]=n.getValueForPixel(v)-n.getValueForPixel(b))}if(b===n.getPixelForValue(c)){const k=dl(x)*n.getLineWidthForValue(c)/2;b+=k,x-=k}return{size:x,base:b,head:v,center:v+x/2}}_calculateBarIndexPixels(e,n){const s=n.scale,a=this.options,l=a.skipNull,o=sn(a.maxBarThickness,1/0);let c,d;const m=this._getAxisCount();if(n.grouped){const u=l?this._getStackCount(e):n.stackCount,h=a.barThickness==="flex"?h8(e,n,a,u*m):u8(e,n,a,u*m),p=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,g=this._getAxis().indexOf(sn(p,this.getFirstScaleIdForIndexAxis())),v=this._getStackIndex(this.index,this._cachedMeta.stack,l?e:void 0)+g;c=h.start+h.chunk*v+h.chunk/2,d=Math.min(o,h.chunk*h.ratio)}else c=s.getPixelForValue(this.getParsed(e)[s.axis],e),d=Math.min(o,n.min*n.ratio);return{base:c-d/2,head:c+d/2,center:c,size:d}}draw(){const e=this._cachedMeta,n=e.vScale,s=e.data,a=s.length;let l=0;for(;l<a;++l)this.getParsed(l)[n.axis]!==null&&!s[l].hidden&&s[l].draw(this._ctx)}}function k8(t,e,n){let s=1,a=1,l=0,o=0;if(e<ci){const c=t,d=c+e,m=Math.cos(c),u=Math.sin(c),h=Math.cos(d),p=Math.sin(d),g=(w,T,j)=>yp(w,c,d,!0)?1:Math.max(T,T*n,j,j*n),v=(w,T,j)=>yp(w,c,d,!0)?-1:Math.min(T,T*n,j,j*n),x=g(0,m,h),y=g(pi,u,p),b=v(En,m,h),k=v(En+pi,u,p);s=(x-b)/2,a=(y-k)/2,l=-(x+b)/2,o=-(y+k)/2}return{ratioX:s,ratioY:a,offsetX:l,offsetY:o}}class w8 extends yk{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const n=e.data,{labels:{pointStyle:s,textAlign:a,color:l,useBorderRadius:o,borderRadius:c}}=e.legend.options;return n.labels.length&&n.datasets.length?n.labels.map((d,m)=>{const h=e.getDatasetMeta(0).controller.getStyle(m);return{text:d,fillStyle:h.backgroundColor,fontColor:l,hidden:!e.getDataVisibility(m),lineDash:h.borderDash,lineDashOffset:h.borderDashOffset,lineJoin:h.borderJoinStyle,lineWidth:h.borderWidth,strokeStyle:h.borderColor,textAlign:a,pointStyle:s,borderRadius:o&&(c||h.borderRadius),index:m}}):[]}},onClick(e,n,s){s.chart.toggleDataVisibility(n.index),s.chart.update()}}}};constructor(e,n){super(e,n),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,n){const s=this.getDataset().data,a=this._cachedMeta;if(this._parsing===!1)a._parsed=s;else{let l=d=>+s[d];if(an(s[e])){const{key:d="value"}=this._parsing;l=m=>+ao(s[m],d)}let o,c;for(o=e,c=e+n;o<c;++o)a._parsed[o]=l(o)}}_getRotation(){return hr(this.options.rotation-90)}_getCircumference(){return hr(this.options.circumference)}_getRotationExtents(){let e=ci,n=-ci;for(let s=0;s<this.chart.data.datasets.length;++s)if(this.chart.isDatasetVisible(s)&&this.chart.getDatasetMeta(s).type===this._type){const a=this.chart.getDatasetMeta(s).controller,l=a._getRotation(),o=a._getCircumference();e=Math.min(e,l),n=Math.max(n,l+o)}return{rotation:e,circumference:n-e}}update(e){const n=this.chart,{chartArea:s}=n,a=this._cachedMeta,l=a.data,o=this.getMaxBorderWidth()+this.getMaxOffset(l)+this.options.spacing,c=Math.max((Math.min(s.width,s.height)-o)/2,0),d=Math.min(K$(this.options.cutout,c),1),m=this._getRingWeight(this.index),{circumference:u,rotation:h}=this._getRotationExtents(),{ratioX:p,ratioY:g,offsetX:v,offsetY:x}=k8(h,u,d),y=(s.width-o)/p,b=(s.height-o)/g,k=Math.max(Math.min(y,b)/2,0),w=V2(this.options.radius,k),T=Math.max(w*d,0),j=(w-T)/this._getVisibleDatasetWeightTotal();this.offsetX=v*w,this.offsetY=x*w,a.total=this.calculateTotal(),this.outerRadius=w-j*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-j*m,0),this.updateElements(l,0,l.length,e)}_circumference(e,n){const s=this.options,a=this._cachedMeta,l=this._getCircumference();return n&&s.animation.animateRotate||!this.chart.getDataVisibility(e)||a._parsed[e]===null||a.data[e].hidden?0:this.calculateCircumference(a._parsed[e]*l/ci)}updateElements(e,n,s,a){const l=a==="reset",o=this.chart,c=o.chartArea,m=o.options.animation,u=(c.left+c.right)/2,h=(c.top+c.bottom)/2,p=l&&m.animateScale,g=p?0:this.innerRadius,v=p?0:this.outerRadius,{sharedOptions:x,includeOptions:y}=this._getSharedOptions(n,a);let b=this._getRotation(),k;for(k=0;k<n;++k)b+=this._circumference(k,l);for(k=n;k<n+s;++k){const w=this._circumference(k,l),T=e[k],j={x:u+this.offsetX,y:h+this.offsetY,startAngle:b,endAngle:b+w,circumference:w,outerRadius:v,innerRadius:g};y&&(j.options=x||this.resolveDataElementOptions(k,T.active?"active":a)),b+=w,this.updateElement(T,k,j,a)}}calculateTotal(){const e=this._cachedMeta,n=e.data;let s=0,a;for(a=0;a<n.length;a++){const l=e._parsed[a];l!==null&&!isNaN(l)&&this.chart.getDataVisibility(a)&&!n[a].hidden&&(s+=Math.abs(l))}return s}calculateCircumference(e){const n=this._cachedMeta.total;return n>0&&!isNaN(e)?ci*(Math.abs(e)/n):0}getLabelAndValue(e){const n=this._cachedMeta,s=this.chart,a=s.data.labels||[],l=dk(n._parsed[e],s.options.locale);return{label:a[e]||"",value:l}}getMaxBorderWidth(e){let n=0;const s=this.chart;let a,l,o,c,d;if(!e){for(a=0,l=s.data.datasets.length;a<l;++a)if(s.isDatasetVisible(a)){o=s.getDatasetMeta(a),e=o.data,c=o.controller;break}}if(!e)return 0;for(a=0,l=e.length;a<l;++a)d=c.resolveDataElementOptions(a),d.borderAlign!=="inner"&&(n=Math.max(n,d.borderWidth||0,d.hoverBorderWidth||0));return n}getMaxOffset(e){let n=0;for(let s=0,a=e.length;s<a;++s){const l=this.resolveDataElementOptions(s);n=Math.max(n,l.offset||0,l.hoverOffset||0)}return n}_getRingWeightOffset(e){let n=0;for(let s=0;s<e;++s)this.chart.isDatasetVisible(s)&&(n+=this._getRingWeight(s));return n}_getRingWeight(e){return Math.max(sn(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}function Il(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class bk{static override(e){Object.assign(bk.prototype,e)}options;constructor(e){this.options=e||{}}init(){}formats(){return Il()}parse(){return Il()}format(){return Il()}add(){return Il()}diff(){return Il()}startOf(){return Il()}endOf(){return Il()}}var j8={_date:bk};function N8(t,e,n,s){const{controller:a,data:l,_sorted:o}=t,c=a._cachedMeta.iScale,d=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(c&&e===c.axis&&e!=="r"&&o&&l.length){const m=c._reversePixels?lB:Jx;if(s){if(a._sharedOptions){const u=l[0],h=typeof u.getRange=="function"&&u.getRange(e);if(h){const p=m(l,e,n-h),g=m(l,e,n+h);return{lo:p.lo,hi:g.hi}}}}else{const u=m(l,e,n);if(d){const{vScale:h}=a._cachedMeta,{_parsed:p}=t,g=p.slice(0,u.lo+1).reverse().findIndex(x=>!Tn(x[h.axis]));u.lo-=Math.max(0,g);const v=p.slice(u.hi).findIndex(x=>!Tn(x[h.axis]));u.hi+=Math.max(0,v)}return u}}return{lo:0,hi:l.length-1}}function Pg(t,e,n,s,a){const l=t.getSortedVisibleDatasetMetas(),o=n[e];for(let c=0,d=l.length;c<d;++c){const{index:m,data:u}=l[c],{lo:h,hi:p}=N8(l[c],e,o,a);for(let g=h;g<=p;++g){const v=u[g];v.skip||s(v,m,g)}}}function C8(t){const e=t.indexOf("x")!==-1,n=t.indexOf("y")!==-1;return function(s,a){const l=e?Math.abs(s.x-a.x):0,o=n?Math.abs(s.y-a.y):0;return Math.sqrt(Math.pow(l,2)+Math.pow(o,2))}}function vv(t,e,n,s,a){const l=[];return!a&&!t.isPointInArea(e)||Pg(t,n,e,function(c,d,m){!a&&!tT(c,t.chartArea,0)||c.inRange(e.x,e.y,s)&&l.push({element:c,datasetIndex:d,index:m})},!0),l}function _8(t,e,n,s){let a=[];function l(o,c,d){const{startAngle:m,endAngle:u}=o.getProps(["startAngle","endAngle"],s),{angle:h}=K2(o,{x:e.x,y:e.y});yp(h,m,u)&&a.push({element:o,datasetIndex:c,index:d})}return Pg(t,n,e,l),a}function S8(t,e,n,s,a,l){let o=[];const c=C8(n);let d=Number.POSITIVE_INFINITY;function m(u,h,p){const g=u.inRange(e.x,e.y,a);if(s&&!g)return;const v=u.getCenterPoint(a);if(!(!!l||t.isPointInArea(v))&&!g)return;const y=c(e,v);y<d?(o=[{element:u,datasetIndex:h,index:p}],d=y):y===d&&o.push({element:u,datasetIndex:h,index:p})}return Pg(t,n,e,m),o}function xv(t,e,n,s,a,l){return!l&&!t.isPointInArea(e)?[]:n==="r"&&!s?_8(t,e,n,a):S8(t,e,n,s,a,l)}function dN(t,e,n,s,a){const l=[],o=n==="x"?"inXRange":"inYRange";let c=!1;return Pg(t,n,e,(d,m,u)=>{d[o]&&d[o](e[n],a)&&(l.push({element:d,datasetIndex:m,index:u}),c=c||d.inRange(e.x,e.y,a))}),s&&!c?[]:l}var E8={modes:{index(t,e,n,s){const a=Ll(e,t),l=n.axis||"x",o=n.includeInvisible||!1,c=n.intersect?vv(t,a,l,s,o):xv(t,a,l,!1,s,o),d=[];return c.length?(t.getSortedVisibleDatasetMetas().forEach(m=>{const u=c[0].index,h=m.data[u];h&&!h.skip&&d.push({element:h,datasetIndex:m.index,index:u})}),d):[]},dataset(t,e,n,s){const a=Ll(e,t),l=n.axis||"xy",o=n.includeInvisible||!1;let c=n.intersect?vv(t,a,l,s,o):xv(t,a,l,!1,s,o);if(c.length>0){const d=c[0].datasetIndex,m=t.getDatasetMeta(d).data;c=[];for(let u=0;u<m.length;++u)c.push({element:m[u],datasetIndex:d,index:u})}return c},point(t,e,n,s){const a=Ll(e,t),l=n.axis||"xy",o=n.includeInvisible||!1;return vv(t,a,l,s,o)},nearest(t,e,n,s){const a=Ll(e,t),l=n.axis||"xy",o=n.includeInvisible||!1;return xv(t,a,l,n.intersect,s,o)},x(t,e,n,s){const a=Ll(e,t);return dN(t,a,"x",n.intersect,s)},y(t,e,n,s){const a=Ll(e,t);return dN(t,a,"y",n.intersect,s)}}};const uT=["left","top","right","bottom"];function Cd(t,e){return t.filter(n=>n.pos===e)}function mN(t,e){return t.filter(n=>uT.indexOf(n.pos)===-1&&n.box.axis===e)}function _d(t,e){return t.sort((n,s)=>{const a=e?s:n,l=e?n:s;return a.weight===l.weight?a.index-l.index:a.weight-l.weight})}function T8(t){const e=[];let n,s,a,l,o,c;for(n=0,s=(t||[]).length;n<s;++n)a=t[n],{position:l,options:{stack:o,stackWeight:c=1}}=a,e.push({index:n,box:a,pos:l,horizontal:a.isHorizontal(),weight:a.weight,stack:o&&l+o,stackWeight:c});return e}function A8(t){const e={};for(const n of t){const{stack:s,pos:a,stackWeight:l}=n;if(!s||!uT.includes(a))continue;const o=e[s]||(e[s]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=l}return e}function D8(t,e){const n=A8(t),{vBoxMaxWidth:s,hBoxMaxHeight:a}=e;let l,o,c;for(l=0,o=t.length;l<o;++l){c=t[l];const{fullSize:d}=c.box,m=n[c.stack],u=m&&c.stackWeight/m.weight;c.horizontal?(c.width=u?u*s:d&&e.availableWidth,c.height=a):(c.width=s,c.height=u?u*a:d&&e.availableHeight)}return n}function R8(t){const e=T8(t),n=_d(e.filter(m=>m.box.fullSize),!0),s=_d(Cd(e,"left"),!0),a=_d(Cd(e,"right")),l=_d(Cd(e,"top"),!0),o=_d(Cd(e,"bottom")),c=mN(e,"x"),d=mN(e,"y");return{fullSize:n,leftAndTop:s.concat(l),rightAndBottom:a.concat(d).concat(o).concat(c),chartArea:Cd(e,"chartArea"),vertical:s.concat(a).concat(d),horizontal:l.concat(o).concat(c)}}function uN(t,e,n,s){return Math.max(t[n],e[n])+Math.max(t[s],e[s])}function hT(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function P8(t,e,n,s){const{pos:a,box:l}=n,o=t.maxPadding;if(!an(a)){n.size&&(t[a]-=n.size);const h=s[n.stack]||{size:0,count:1};h.size=Math.max(h.size,n.horizontal?l.height:l.width),n.size=h.size/h.count,t[a]+=n.size}l.getPadding&&hT(o,l.getPadding());const c=Math.max(0,e.outerWidth-uN(o,t,"left","right")),d=Math.max(0,e.outerHeight-uN(o,t,"top","bottom")),m=c!==t.w,u=d!==t.h;return t.w=c,t.h=d,n.horizontal?{same:m,other:u}:{same:u,other:m}}function M8(t){const e=t.maxPadding;function n(s){const a=Math.max(e[s]-t[s],0);return t[s]+=a,a}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}function I8(t,e){const n=e.maxPadding;function s(a){const l={left:0,top:0,right:0,bottom:0};return a.forEach(o=>{l[o]=Math.max(e[o],n[o])}),l}return s(t?["left","right"]:["top","bottom"])}function Hd(t,e,n,s){const a=[];let l,o,c,d,m,u;for(l=0,o=t.length,m=0;l<o;++l){c=t[l],d=c.box,d.update(c.width||e.w,c.height||e.h,I8(c.horizontal,e));const{same:h,other:p}=P8(e,n,c,s);m|=h&&a.length,u=u||p,d.fullSize||a.push(c)}return m&&Hd(a,e,n,s)||u}function Qu(t,e,n,s,a){t.top=n,t.left=e,t.right=e+s,t.bottom=n+a,t.width=s,t.height=a}function hN(t,e,n,s){const a=n.padding;let{x:l,y:o}=e;for(const c of t){const d=c.box,m=s[c.stack]||{placed:0,weight:1},u=c.stackWeight/m.weight||1;if(c.horizontal){const h=e.w*u,p=m.size||d.height;jm(m.start)&&(o=m.start),d.fullSize?Qu(d,a.left,o,n.outerWidth-a.right-a.left,p):Qu(d,e.left+m.placed,o,h,p),m.start=o,m.placed+=h,o=d.bottom}else{const h=e.h*u,p=m.size||d.width;jm(m.start)&&(l=m.start),d.fullSize?Qu(d,l,a.top,p,n.outerHeight-a.bottom-a.top):Qu(d,l,e.top+m.placed,p,h),m.start=l,m.placed+=h,l=d.right}}e.x=l,e.y=o}var Vs={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(n){e.draw(n)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;n!==-1&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,s){if(!t)return;const a=Js(t.options.layout.padding),l=Math.max(e-a.width,0),o=Math.max(n-a.height,0),c=R8(t.boxes),d=c.vertical,m=c.horizontal;Nn(t.boxes,x=>{typeof x.beforeLayout=="function"&&x.beforeLayout()});const u=d.reduce((x,y)=>y.box.options&&y.box.options.display===!1?x:x+1,0)||1,h=Object.freeze({outerWidth:e,outerHeight:n,padding:a,availableWidth:l,availableHeight:o,vBoxMaxWidth:l/2/u,hBoxMaxHeight:o/2}),p=Object.assign({},a);hT(p,Js(s));const g=Object.assign({maxPadding:p,w:l,h:o,x:a.left,y:a.top},a),v=D8(d.concat(m),h);Hd(c.fullSize,g,h,v),Hd(d,g,h,v),Hd(m,g,h,v)&&Hd(d,g,h,v),M8(g),hN(c.leftAndTop,g,h,v),g.x+=g.w,g.y+=g.h,hN(c.rightAndBottom,g,h,v),t.chartArea={left:g.left,top:g.top,right:g.left+g.w,bottom:g.top+g.h,height:g.h,width:g.w},Nn(c.chartArea,x=>{const y=x.box;Object.assign(y,t.chartArea),y.update(g.w,g.h,{left:0,top:0,right:0,bottom:0})})}};class pT{acquireContext(e,n){}releaseContext(e){return!1}addEventListener(e,n,s){}removeEventListener(e,n,s){}getDevicePixelRatio(){return 1}getMaximumSize(e,n,s,a){return n=Math.max(0,n||e.width),s=s||e.height,{width:n,height:Math.max(0,a?Math.floor(n/a):s)}}isAttached(e){return!0}updateConfig(e){}}class O8 extends pT{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const Oh="$chartjs",F8={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},pN=t=>t===null||t==="";function L8(t,e){const n=t.style,s=t.getAttribute("height"),a=t.getAttribute("width");if(t[Oh]={initial:{height:s,width:a,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",pN(a)){const l=eN(t,"width");l!==void 0&&(t.width=l)}if(pN(s))if(t.style.height==="")t.height=t.width/(e||2);else{const l=eN(t,"height");l!==void 0&&(t.height=l)}return t}const gT=UB?{passive:!0}:!1;function $8(t,e,n){t&&t.addEventListener(e,n,gT)}function B8(t,e,n){t&&t.canvas&&t.canvas.removeEventListener(e,n,gT)}function q8(t,e){const n=F8[t.type]||t.type,{x:s,y:a}=Ll(t,e);return{type:n,chart:e,native:t,x:s!==void 0?s:null,y:a!==void 0?a:null}}function wp(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function H8(t,e,n){const s=t.canvas,a=new MutationObserver(l=>{let o=!1;for(const c of l)o=o||wp(c.addedNodes,s),o=o&&!wp(c.removedNodes,s);o&&n()});return a.observe(document,{childList:!0,subtree:!0}),a}function z8(t,e,n){const s=t.canvas,a=new MutationObserver(l=>{let o=!1;for(const c of l)o=o||wp(c.removedNodes,s),o=o&&!wp(c.addedNodes,s);o&&n()});return a.observe(document,{childList:!0,subtree:!0}),a}const Cm=new Map;let gN=0;function fT(){const t=window.devicePixelRatio;t!==gN&&(gN=t,Cm.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function V8(t,e){Cm.size||window.addEventListener("resize",fT),Cm.set(t,e)}function U8(t){Cm.delete(t),Cm.size||window.removeEventListener("resize",fT)}function W8(t,e,n){const s=t.canvas,a=s&&xk(s);if(!a)return;const l=Z2((c,d)=>{const m=a.clientWidth;n(c,d),m<a.clientWidth&&n()},window),o=new ResizeObserver(c=>{const d=c[0],m=d.contentRect.width,u=d.contentRect.height;m===0&&u===0||l(m,u)});return o.observe(a),V8(t,l),o}function yv(t,e,n){n&&n.disconnect(),e==="resize"&&U8(t)}function K8(t,e,n){const s=t.canvas,a=Z2(l=>{t.ctx!==null&&n(q8(l,t))},t);return $8(s,e,a),a}class G8 extends pT{acquireContext(e,n){const s=e&&e.getContext&&e.getContext("2d");return s&&s.canvas===e?(L8(e,n),s):null}releaseContext(e){const n=e.canvas;if(!n[Oh])return!1;const s=n[Oh].initial;["height","width"].forEach(l=>{const o=s[l];Tn(o)?n.removeAttribute(l):n.setAttribute(l,o)});const a=s.style||{};return Object.keys(a).forEach(l=>{n.style[l]=a[l]}),n.width=n.width,delete n[Oh],!0}addEventListener(e,n,s){this.removeEventListener(e,n);const a=e.$proxies||(e.$proxies={}),o={attach:H8,detach:z8,resize:W8}[n]||K8;a[n]=o(e,n,s)}removeEventListener(e,n){const s=e.$proxies||(e.$proxies={}),a=s[n];if(!a)return;({attach:yv,detach:yv,resize:yv}[n]||B8)(e,n,a),s[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,n,s,a){return VB(e,n,s,a)}isAttached(e){const n=e&&xk(e);return!!(n&&n.isConnected)}}function Y8(t){return!vk()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?O8:G8}let No=class{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(e){const{x:n,y:s}=this.getProps(["x","y"],e);return{x:n,y:s}}hasValue(){return xp(this.x)&&xp(this.y)}getProps(e,n){const s=this.$animations;if(!n||!s)return this;const a={};return e.forEach(l=>{a[l]=s[l]&&s[l].active()?s[l]._to:this[l]}),a}};function Q8(t,e){const n=t.options.ticks,s=Z8(t),a=Math.min(n.maxTicksLimit||s,s),l=n.major.enabled?J8(e):[],o=l.length,c=l[0],d=l[o-1],m=[];if(o>a)return e9(e,m,l,o/a),m;const u=X8(l,e,a);if(o>0){let h,p;const g=o>1?Math.round((d-c)/(o-1)):null;for(Zu(e,m,u,Tn(g)?0:c-g,c),h=0,p=o-1;h<p;h++)Zu(e,m,u,l[h],l[h+1]);return Zu(e,m,u,d,Tn(g)?e.length:d+g),m}return Zu(e,m,u),m}function Z8(t){const e=t.options.offset,n=t._tickSize(),s=t._length/n+(e?0:1),a=t._maxLength/n;return Math.floor(Math.min(s,a))}function X8(t,e,n){const s=t9(t),a=e.length/n;if(!s)return Math.max(a,1);const l=eB(s);for(let o=0,c=l.length-1;o<c;o++){const d=l[o];if(d>a)return d}return Math.max(a,1)}function J8(t){const e=[];let n,s;for(n=0,s=t.length;n<s;n++)t[n].major&&e.push(n);return e}function e9(t,e,n,s){let a=0,l=n[0],o;for(s=Math.ceil(s),o=0;o<t.length;o++)o===l&&(e.push(t[o]),a++,l=n[a*s])}function Zu(t,e,n,s,a){const l=sn(s,0),o=Math.min(sn(a,t.length),t.length);let c=0,d,m,u;for(n=Math.ceil(n),a&&(d=a-s,n=d/Math.floor(d/n)),u=l;u<0;)c++,u=Math.round(l+c*n);for(m=Math.max(l,0);m<o;m++)m===u&&(e.push(t[m]),c++,u=Math.round(l+c*n))}function t9(t){const e=t.length;let n,s;if(e<2)return!1;for(s=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==s)return!1;return s}const n9=t=>t==="left"?"right":t==="right"?"left":t,fN=(t,e,n)=>e==="top"||e==="left"?t[e]+n:t[e]-n,vN=(t,e)=>Math.min(e||t,t);function xN(t,e){const n=[],s=t.length/e,a=t.length;let l=0;for(;l<a;l+=s)n.push(t[Math.floor(l)]);return n}function i9(t,e,n){const s=t.ticks.length,a=Math.min(e,s-1),l=t._startPixel,o=t._endPixel,c=1e-6;let d=t.getPixelForTick(a),m;if(!(n&&(s===1?m=Math.max(d-l,o-d):e===0?m=(t.getPixelForTick(1)-d)/2:m=(d-t.getPixelForTick(a-1))/2,d+=a<e?m:-m,d<l-c||d>o+c)))return d}function s9(t,e){Nn(t,n=>{const s=n.gc,a=s.length/2;let l;if(a>e){for(l=0;l<a;++l)delete n.data[s[l]];s.splice(0,a)}})}function Sd(t){return t.drawTicks?t.tickLength:0}function yN(t,e){if(!t.display)return 0;const n=Fi(t.font,e),s=Js(t.padding);return(hi(t.text)?t.text.length:1)*n.lineHeight+s.height}function a9(t,e){return Zc(t,{scale:e,type:"scale"})}function r9(t,e,n){return Zc(t,{tick:n,index:e,type:"tick"})}function l9(t,e,n){let s=ck(t);return(n&&e!=="right"||!n&&e==="right")&&(s=n9(s)),s}function o9(t,e,n,s){const{top:a,left:l,bottom:o,right:c,chart:d}=t,{chartArea:m,scales:u}=d;let h=0,p,g,v;const x=o-a,y=c-l;if(t.isHorizontal()){if(g=Di(s,l,c),an(n)){const b=Object.keys(n)[0],k=n[b];v=u[b].getPixelForValue(k)+x-e}else n==="center"?v=(m.bottom+m.top)/2+x-e:v=fN(t,n,e);p=c-l}else{if(an(n)){const b=Object.keys(n)[0],k=n[b];g=u[b].getPixelForValue(k)-y+e}else n==="center"?g=(m.left+m.right)/2-y+e:g=fN(t,n,e);v=Di(s,o,a),h=n==="left"?-pi:pi}return{titleX:g,titleY:v,maxWidth:p,rotation:h}}class Xc extends No{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,n){return e}getUserBounds(){let{_userMin:e,_userMax:n,_suggestedMin:s,_suggestedMax:a}=this;return e=_a(e,Number.POSITIVE_INFINITY),n=_a(n,Number.NEGATIVE_INFINITY),s=_a(s,Number.POSITIVE_INFINITY),a=_a(a,Number.NEGATIVE_INFINITY),{min:_a(e,s),max:_a(n,a),minDefined:Xs(e),maxDefined:Xs(n)}}getMinMax(e){let{min:n,max:s,minDefined:a,maxDefined:l}=this.getUserBounds(),o;if(a&&l)return{min:n,max:s};const c=this.getMatchingVisibleMetas();for(let d=0,m=c.length;d<m;++d)o=c[d].controller.getMinMax(this,e),a||(n=Math.min(n,o.min)),l||(s=Math.max(s,o.max));return n=l&&n>s?s:n,s=a&&n>s?n:s,{min:_a(n,_a(s,n)),max:_a(s,_a(n,s))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){qn(this.options.beforeUpdate,[this])}update(e,n,s){const{beginAtZero:a,grace:l,ticks:o}=this.options,c=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=n,this._margins=s=Object.assign({left:0,right:0,top:0,bottom:0},s),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+s.left+s.right:this.height+s.top+s.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=TB(this,l,a),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const d=c<this.ticks.length;this._convertTicksToLabels(d?xN(this.ticks,c):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=Q8(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),d&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,n,s;this.isHorizontal()?(n=this.left,s=this.right):(n=this.top,s=this.bottom,e=!e),this._startPixel=n,this._endPixel=s,this._reversePixels=e,this._length=s-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){qn(this.options.afterUpdate,[this])}beforeSetDimensions(){qn(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){qn(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),qn(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){qn(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const n=this.options.ticks;let s,a,l;for(s=0,a=e.length;s<a;s++)l=e[s],l.label=qn(n.callback,[l.value,s,e],this)}afterTickToLabelConversion(){qn(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){qn(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,n=e.ticks,s=vN(this.ticks.length,e.ticks.maxTicksLimit),a=n.minRotation||0,l=n.maxRotation;let o=a,c,d,m;if(!this._isVisible()||!n.display||a>=l||s<=1||!this.isHorizontal()){this.labelRotation=a;return}const u=this._getLabelSizes(),h=u.widest.width,p=u.highest.height,g=as(this.chart.width-h,0,this.maxWidth);c=e.offset?this.maxWidth/s:g/(s-1),h+6>c&&(c=g/(s-(e.offset?.5:1)),d=this.maxHeight-Sd(e.grid)-n.padding-yN(e.title,this.chart.options.font),m=Math.sqrt(h*h+p*p),o=sB(Math.min(Math.asin(as((u.highest.height+6)/c,-1,1)),Math.asin(as(d/m,-1,1))-Math.asin(as(p/m,-1,1)))),o=Math.max(a,Math.min(l,o))),this.labelRotation=o}afterCalculateLabelRotation(){qn(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){qn(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:n,options:{ticks:s,title:a,grid:l}}=this,o=this._isVisible(),c=this.isHorizontal();if(o){const d=yN(a,n.options.font);if(c?(e.width=this.maxWidth,e.height=Sd(l)+d):(e.height=this.maxHeight,e.width=Sd(l)+d),s.display&&this.ticks.length){const{first:m,last:u,widest:h,highest:p}=this._getLabelSizes(),g=s.padding*2,v=hr(this.labelRotation),x=Math.cos(v),y=Math.sin(v);if(c){const b=s.mirror?0:y*h.width+x*p.height;e.height=Math.min(this.maxHeight,e.height+b+g)}else{const b=s.mirror?0:x*h.width+y*p.height;e.width=Math.min(this.maxWidth,e.width+b+g)}this._calculatePadding(m,u,y,x)}}this._handleMargins(),c?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,n,s,a){const{ticks:{align:l,padding:o},position:c}=this.options,d=this.labelRotation!==0,m=c!=="top"&&this.axis==="x";if(this.isHorizontal()){const u=this.getPixelForTick(0)-this.left,h=this.right-this.getPixelForTick(this.ticks.length-1);let p=0,g=0;d?m?(p=a*e.width,g=s*n.height):(p=s*e.height,g=a*n.width):l==="start"?g=n.width:l==="end"?p=e.width:l!=="inner"&&(p=e.width/2,g=n.width/2),this.paddingLeft=Math.max((p-u+o)*this.width/(this.width-u),0),this.paddingRight=Math.max((g-h+o)*this.width/(this.width-h),0)}else{let u=n.height/2,h=e.height/2;l==="start"?(u=0,h=e.height):l==="end"&&(u=n.height,h=0),this.paddingTop=u+o,this.paddingBottom=h+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){qn(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:n}=this.options;return n==="top"||n==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let n,s;for(n=0,s=e.length;n<s;n++)Tn(e[n].label)&&(e.splice(n,1),s--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const n=this.options.ticks.sampleSize;let s=this.ticks;n<s.length&&(s=xN(s,n)),this._labelSizes=e=this._computeLabelSizes(s,s.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,n,s){const{ctx:a,_longestTextCache:l}=this,o=[],c=[],d=Math.floor(n/vN(n,s));let m=0,u=0,h,p,g,v,x,y,b,k,w,T,j;for(h=0;h<n;h+=d){if(v=e[h].label,x=this._resolveTickFontOptions(h),a.font=y=x.string,b=l[y]=l[y]||{data:{},gc:[]},k=x.lineHeight,w=T=0,!Tn(v)&&!hi(v))w=G0(a,b.data,b.gc,w,v),T=k;else if(hi(v))for(p=0,g=v.length;p<g;++p)j=v[p],!Tn(j)&&!hi(j)&&(w=G0(a,b.data,b.gc,w,j),T+=k);o.push(w),c.push(T),m=Math.max(w,m),u=Math.max(T,u)}s9(l,n);const D=o.indexOf(m),_=c.indexOf(u),N=A=>({width:o[A]||0,height:c[A]||0});return{first:N(0),last:N(n-1),widest:N(D),highest:N(_),widths:o,heights:c}}getLabelForValue(e){return e}getPixelForValue(e,n){return NaN}getValueForPixel(e){}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const n=this._startPixel+e*this._length;return rB(this._alignToPixels?Ml(this.chart,n,0):n)}getDecimalForPixel(e){const n=(e-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:n}=this;return e<0&&n<0?n:e>0&&n>0?e:0}getContext(e){const n=this.ticks||[];if(e>=0&&e<n.length){const s=n[e];return s.$context||(s.$context=r9(this.getContext(),e,s))}return this.$context||(this.$context=a9(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,n=hr(this.labelRotation),s=Math.abs(Math.cos(n)),a=Math.abs(Math.sin(n)),l=this._getLabelSizes(),o=e.autoSkipPadding||0,c=l?l.widest.width+o:0,d=l?l.highest.height+o:0;return this.isHorizontal()?d*s>c*a?c/s:d/a:d*a<c*s?d/s:c/a}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const n=this.axis,s=this.chart,a=this.options,{grid:l,position:o,border:c}=a,d=l.offset,m=this.isHorizontal(),h=this.ticks.length+(d?1:0),p=Sd(l),g=[],v=c.setContext(this.getContext()),x=v.display?v.width:0,y=x/2,b=function(H){return Ml(s,H,x)};let k,w,T,j,D,_,N,A,P,E,I,M;if(o==="top")k=b(this.bottom),_=this.bottom-p,A=k-y,E=b(e.top)+y,M=e.bottom;else if(o==="bottom")k=b(this.top),E=e.top,M=b(e.bottom)-y,_=k+y,A=this.top+p;else if(o==="left")k=b(this.right),D=this.right-p,N=k-y,P=b(e.left)+y,I=e.right;else if(o==="right")k=b(this.left),P=e.left,I=b(e.right)-y,D=k+y,N=this.left+p;else if(n==="x"){if(o==="center")k=b((e.top+e.bottom)/2+.5);else if(an(o)){const H=Object.keys(o)[0],G=o[H];k=b(this.chart.scales[H].getPixelForValue(G))}E=e.top,M=e.bottom,_=k+y,A=_+p}else if(n==="y"){if(o==="center")k=b((e.left+e.right)/2);else if(an(o)){const H=Object.keys(o)[0],G=o[H];k=b(this.chart.scales[H].getPixelForValue(G))}D=k-y,N=D-p,P=e.left,I=e.right}const O=sn(a.ticks.maxTicksLimit,h),F=Math.max(1,Math.ceil(h/O));for(w=0;w<h;w+=F){const H=this.getContext(w),G=l.setContext(H),z=c.setContext(H),ie=G.lineWidth,W=G.color,ge=z.dash||[],ae=z.dashOffset,U=G.tickWidth,X=G.tickColor,J=G.tickBorderDash||[],he=G.tickBorderDashOffset;T=i9(this,w,d),T!==void 0&&(j=Ml(s,T,ie),m?D=N=P=I=j:_=A=E=M=j,g.push({tx1:D,ty1:_,tx2:N,ty2:A,x1:P,y1:E,x2:I,y2:M,width:ie,color:W,borderDash:ge,borderDashOffset:ae,tickWidth:U,tickColor:X,tickBorderDash:J,tickBorderDashOffset:he}))}return this._ticksLength=h,this._borderValue=k,g}_computeLabelItems(e){const n=this.axis,s=this.options,{position:a,ticks:l}=s,o=this.isHorizontal(),c=this.ticks,{align:d,crossAlign:m,padding:u,mirror:h}=l,p=Sd(s.grid),g=p+u,v=h?-u:g,x=-hr(this.labelRotation),y=[];let b,k,w,T,j,D,_,N,A,P,E,I,M="middle";if(a==="top")D=this.bottom-v,_=this._getXAxisLabelAlignment();else if(a==="bottom")D=this.top+v,_=this._getXAxisLabelAlignment();else if(a==="left"){const F=this._getYAxisLabelAlignment(p);_=F.textAlign,j=F.x}else if(a==="right"){const F=this._getYAxisLabelAlignment(p);_=F.textAlign,j=F.x}else if(n==="x"){if(a==="center")D=(e.top+e.bottom)/2+g;else if(an(a)){const F=Object.keys(a)[0],H=a[F];D=this.chart.scales[F].getPixelForValue(H)+g}_=this._getXAxisLabelAlignment()}else if(n==="y"){if(a==="center")j=(e.left+e.right)/2-g;else if(an(a)){const F=Object.keys(a)[0],H=a[F];j=this.chart.scales[F].getPixelForValue(H)}_=this._getYAxisLabelAlignment(p).textAlign}n==="y"&&(d==="start"?M="top":d==="end"&&(M="bottom"));const O=this._getLabelSizes();for(b=0,k=c.length;b<k;++b){w=c[b],T=w.label;const F=l.setContext(this.getContext(b));N=this.getPixelForTick(b)+l.labelOffset,A=this._resolveTickFontOptions(b),P=A.lineHeight,E=hi(T)?T.length:1;const H=E/2,G=F.color,z=F.textStrokeColor,ie=F.textStrokeWidth;let W=_;o?(j=N,_==="inner"&&(b===k-1?W=this.options.reverse?"left":"right":b===0?W=this.options.reverse?"right":"left":W="center"),a==="top"?m==="near"||x!==0?I=-E*P+P/2:m==="center"?I=-O.highest.height/2-H*P+P:I=-O.highest.height+P/2:m==="near"||x!==0?I=P/2:m==="center"?I=O.highest.height/2-H*P:I=O.highest.height-E*P,h&&(I*=-1),x!==0&&!F.showLabelBackdrop&&(j+=P/2*Math.sin(x))):(D=N,I=(1-E)*P/2);let ge;if(F.showLabelBackdrop){const ae=Js(F.backdropPadding),U=O.heights[b],X=O.widths[b];let J=I-ae.top,he=0-ae.left;switch(M){case"middle":J-=U/2;break;case"bottom":J-=U;break}switch(_){case"center":he-=X/2;break;case"right":he-=X;break;case"inner":b===k-1?he-=X:b>0&&(he-=X/2);break}ge={left:he,top:J,width:X+ae.width,height:U+ae.height,color:F.backdropColor}}y.push({label:T,font:A,textOffset:I,options:{rotation:x,color:G,strokeColor:z,strokeWidth:ie,textAlign:W,textBaseline:M,translation:[j,D],backdrop:ge}})}return y}_getXAxisLabelAlignment(){const{position:e,ticks:n}=this.options;if(-hr(this.labelRotation))return e==="top"?"left":"right";let a="center";return n.align==="start"?a="left":n.align==="end"?a="right":n.align==="inner"&&(a="inner"),a}_getYAxisLabelAlignment(e){const{position:n,ticks:{crossAlign:s,mirror:a,padding:l}}=this.options,o=this._getLabelSizes(),c=e+l,d=o.widest.width;let m,u;return n==="left"?a?(u=this.right+l,s==="near"?m="left":s==="center"?(m="center",u+=d/2):(m="right",u+=d)):(u=this.right-c,s==="near"?m="right":s==="center"?(m="center",u-=d/2):(m="left",u=this.left)):n==="right"?a?(u=this.left+l,s==="near"?m="right":s==="center"?(m="center",u-=d/2):(m="left",u-=d)):(u=this.left+c,s==="near"?m="left":s==="center"?(m="center",u+=d/2):(m="right",u=this.right)):m="right",{textAlign:m,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:n},left:s,top:a,width:l,height:o}=this;n&&(e.save(),e.fillStyle=n,e.fillRect(s,a,l,o),e.restore())}getLineWidthForValue(e){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const a=this.ticks.findIndex(l=>l.value===e);return a>=0?n.setContext(this.getContext(a)).lineWidth:0}drawGrid(e){const n=this.options.grid,s=this.ctx,a=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let l,o;const c=(d,m,u)=>{!u.width||!u.color||(s.save(),s.lineWidth=u.width,s.strokeStyle=u.color,s.setLineDash(u.borderDash||[]),s.lineDashOffset=u.borderDashOffset,s.beginPath(),s.moveTo(d.x,d.y),s.lineTo(m.x,m.y),s.stroke(),s.restore())};if(n.display)for(l=0,o=a.length;l<o;++l){const d=a[l];n.drawOnChartArea&&c({x:d.x1,y:d.y1},{x:d.x2,y:d.y2},d),n.drawTicks&&c({x:d.tx1,y:d.ty1},{x:d.tx2,y:d.ty2},{color:d.tickColor,width:d.tickWidth,borderDash:d.tickBorderDash,borderDashOffset:d.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:n,options:{border:s,grid:a}}=this,l=s.setContext(this.getContext()),o=s.display?l.width:0;if(!o)return;const c=a.setContext(this.getContext(0)).lineWidth,d=this._borderValue;let m,u,h,p;this.isHorizontal()?(m=Ml(e,this.left,o)-o/2,u=Ml(e,this.right,c)+c/2,h=p=d):(h=Ml(e,this.top,o)-o/2,p=Ml(e,this.bottom,c)+c/2,m=u=d),n.save(),n.lineWidth=l.width,n.strokeStyle=l.color,n.beginPath(),n.moveTo(m,h),n.lineTo(u,p),n.stroke(),n.restore()}drawLabels(e){if(!this.options.ticks.display)return;const s=this.ctx,a=this._computeLabelArea();a&&mk(s,a);const l=this.getLabelItems(e);for(const o of l){const c=o.options,d=o.font,m=o.label,u=o.textOffset;Nm(s,m,0,u,d,c)}a&&uk(s)}drawTitle(){const{ctx:e,options:{position:n,title:s,reverse:a}}=this;if(!s.display)return;const l=Fi(s.font),o=Js(s.padding),c=s.align;let d=l.lineHeight/2;n==="bottom"||n==="center"||an(n)?(d+=o.bottom,hi(s.text)&&(d+=l.lineHeight*(s.text.length-1))):d+=o.top;const{titleX:m,titleY:u,maxWidth:h,rotation:p}=o9(this,d,n,c);Nm(e,s.text,0,0,l,{color:s.color,maxWidth:h,rotation:p,textAlign:l9(c,n,a),textBaseline:"middle",translation:[m,u]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,n=e.ticks&&e.ticks.z||0,s=sn(e.grid&&e.grid.z,-1),a=sn(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==Xc.prototype.draw?[{z:n,draw:l=>{this.draw(l)}}]:[{z:s,draw:l=>{this.drawBackground(),this.drawGrid(l),this.drawTitle()}},{z:a,draw:()=>{this.drawBorder()}},{z:n,draw:l=>{this.drawLabels(l)}}]}getMatchingVisibleMetas(e){const n=this.chart.getSortedVisibleDatasetMetas(),s=this.axis+"AxisID",a=[];let l,o;for(l=0,o=n.length;l<o;++l){const c=n[l];c[s]===this.id&&(!e||c.type===e)&&a.push(c)}return a}_resolveTickFontOptions(e){const n=this.options.ticks.setContext(this.getContext(e));return Fi(n.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class Xu{constructor(e,n,s){this.type=e,this.scope=n,this.override=s,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const n=Object.getPrototypeOf(e);let s;m9(n)&&(s=this.register(n));const a=this.items,l=e.id,o=this.scope+"."+l;if(!l)throw new Error("class does not have id: "+e);return l in a||(a[l]=e,c9(e,o,s),this.override&&si.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const n=this.items,s=e.id,a=this.scope;s in n&&delete n[s],a&&s in si[a]&&(delete si[a][s],this.override&&delete ro[s])}}function c9(t,e,n){const s=wm(Object.create(null),[n?si.get(n):{},si.get(e),t.defaults]);si.set(e,s),t.defaultRoutes&&d9(e,t.defaultRoutes),t.descriptors&&si.describe(e,t.descriptors)}function d9(t,e){Object.keys(e).forEach(n=>{const s=n.split("."),a=s.pop(),l=[t].concat(s).join("."),o=e[n].split("."),c=o.pop(),d=o.join(".");si.route(l,a,d,c)})}function m9(t){return"id"in t&&"defaults"in t}let u9=class{constructor(){this.controllers=new Xu(yk,"datasets",!0),this.elements=new Xu(No,"elements"),this.plugins=new Xu(Object,"plugins"),this.scales=new Xu(Xc,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,n,s){[...n].forEach(a=>{const l=s||this._getRegistryForType(a);s||l.isForType(a)||l===this.plugins&&a.id?this._exec(e,l,a):Nn(a,o=>{const c=s||this._getRegistryForType(o);this._exec(e,c,o)})})}_exec(e,n,s){const a=lk(e);qn(s["before"+a],[],s),n[e](s),qn(s["after"+a],[],s)}_getRegistryForType(e){for(let n=0;n<this._typedRegistries.length;n++){const s=this._typedRegistries[n];if(s.isForType(e))return s}return this.plugins}_get(e,n,s){const a=n.get(e);if(a===void 0)throw new Error('"'+e+'" is not a registered '+s+".");return a}};var Ea=new u9;class h9{constructor(){this._init=void 0}notify(e,n,s,a){if(n==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install")),this._init===void 0)return;const l=a?this._descriptors(e).filter(a):this._descriptors(e),o=this._notify(l,e,n,s);return n==="afterDestroy"&&(this._notify(l,e,"stop"),this._notify(this._init,e,"uninstall"),this._init=void 0),o}_notify(e,n,s,a){a=a||{};for(const l of e){const o=l.plugin,c=o[s],d=[n,a,l.options];if(qn(c,d,o)===!1&&a.cancelable)return!1}return!0}invalidate(){Tn(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),n}_createDescriptors(e,n){const s=e&&e.config,a=sn(s.options&&s.options.plugins,{}),l=p9(s);return a===!1&&!n?[]:f9(e,l,a,n)}_notifyStateChanges(e){const n=this._oldCache||[],s=this._cache,a=(l,o)=>l.filter(c=>!o.some(d=>c.plugin.id===d.plugin.id));this._notify(a(n,s),e,"stop"),this._notify(a(s,n),e,"start")}}function p9(t){const e={},n=[],s=Object.keys(Ea.plugins.items);for(let l=0;l<s.length;l++)n.push(Ea.getPlugin(s[l]));const a=t.plugins||[];for(let l=0;l<a.length;l++){const o=a[l];n.indexOf(o)===-1&&(n.push(o),e[o.id]=!0)}return{plugins:n,localIds:e}}function g9(t,e){return!e&&t===!1?null:t===!0?{}:t}function f9(t,{plugins:e,localIds:n},s,a){const l=[],o=t.getContext();for(const c of e){const d=c.id,m=g9(s[d],a);m!==null&&l.push({plugin:c,options:v9(t.config,{plugin:c,local:n[d]},m,o)})}return l}function v9(t,{plugin:e,local:n},s,a){const l=t.pluginScopeKeys(e),o=t.getOptionScopes(s,l);return n&&e.defaults&&o.push(e.defaults),t.createResolver(o,a,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function ty(t,e){const n=si.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function x9(t,e){let n=t;return t==="_index_"?n=e:t==="_value_"&&(n=e==="x"?"y":"x"),n}function y9(t,e){return t===e?"_index_":"_value_"}function bN(t){if(t==="x"||t==="y"||t==="r")return t}function b9(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function ny(t,...e){if(bN(t))return t;for(const n of e){const s=n.axis||b9(n.position)||t.length>1&&bN(t[0].toLowerCase());if(s)return s}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function kN(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function k9(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter(s=>s.xAxisID===t||s.yAxisID===t);if(n.length)return kN(t,"x",n[0])||kN(t,"y",n[0])}return{}}function w9(t,e){const n=ro[t.type]||{scales:{}},s=e.scales||{},a=ty(t.type,e),l=Object.create(null);return Object.keys(s).forEach(o=>{const c=s[o];if(!an(c))return console.error(`Invalid scale configuration for scale: ${o}`);if(c._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const d=ny(o,c,k9(o,t),si.scales[c.type]),m=y9(d,a),u=n.scales||{};l[o]=tm(Object.create(null),[{axis:d},c,u[d],u[m]])}),t.data.datasets.forEach(o=>{const c=o.type||t.type,d=o.indexAxis||ty(c,e),u=(ro[c]||{}).scales||{};Object.keys(u).forEach(h=>{const p=x9(h,d),g=o[p+"AxisID"]||p;l[g]=l[g]||Object.create(null),tm(l[g],[{axis:p},s[g],u[h]])})}),Object.keys(l).forEach(o=>{const c=l[o];tm(c,[si.scales[c.type],si.scale])}),l}function vT(t){const e=t.options||(t.options={});e.plugins=sn(e.plugins,{}),e.scales=w9(t,e)}function xT(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function j9(t){return t=t||{},t.data=xT(t.data),vT(t),t}const wN=new Map,yT=new Set;function Ju(t,e){let n=wN.get(t);return n||(n=e(),wN.set(t,n),yT.add(n)),n}const Ed=(t,e,n)=>{const s=ao(e,n);s!==void 0&&t.add(s)};class N9{constructor(e){this._config=j9(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=xT(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),vT(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return Ju(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,n){return Ju(`${e}.transition.${n}`,()=>[[`datasets.${e}.transitions.${n}`,`transitions.${n}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,n){return Ju(`${e}-${n}`,()=>[[`datasets.${e}.elements.${n}`,`datasets.${e}`,`elements.${n}`,""]])}pluginScopeKeys(e){const n=e.id,s=this.type;return Ju(`${s}-plugin-${n}`,()=>[[`plugins.${n}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,n){const s=this._scopeCache;let a=s.get(e);return(!a||n)&&(a=new Map,s.set(e,a)),a}getOptionScopes(e,n,s){const{options:a,type:l}=this,o=this._cachedScopes(e,s),c=o.get(n);if(c)return c;const d=new Set;n.forEach(u=>{e&&(d.add(e),u.forEach(h=>Ed(d,e,h))),u.forEach(h=>Ed(d,a,h)),u.forEach(h=>Ed(d,ro[l]||{},h)),u.forEach(h=>Ed(d,si,h)),u.forEach(h=>Ed(d,ey,h))});const m=Array.from(d);return m.length===0&&m.push(Object.create(null)),yT.has(n)&&o.set(n,m),m}chartOptionScopes(){const{options:e,type:n}=this;return[e,ro[n]||{},si.datasets[n]||{},{type:n},si,ey]}resolveNamedOptions(e,n,s,a=[""]){const l={$shared:!0},{resolver:o,subPrefixes:c}=jN(this._resolverCache,e,a);let d=o;if(_9(o,n)){l.$shared=!1,s=gl(s)?s():s;const m=this.createResolver(e,s,c);d=Ic(o,s,m)}for(const m of n)l[m]=d[m];return l}createResolver(e,n,s=[""],a){const{resolver:l}=jN(this._resolverCache,e,s);return an(n)?Ic(l,n,void 0,a):l}}function jN(t,e,n){let s=t.get(e);s||(s=new Map,t.set(e,s));const a=n.join();let l=s.get(a);return l||(l={resolver:pk(e,n),subPrefixes:n.filter(c=>!c.toLowerCase().includes("hover"))},s.set(a,l)),l}const C9=t=>an(t)&&Object.getOwnPropertyNames(t).some(e=>gl(t[e]));function _9(t,e){const{isScriptable:n,isIndexable:s}=iT(t);for(const a of e){const l=n(a),o=s(a),c=(o||l)&&t[a];if(l&&(gl(c)||C9(c))||o&&hi(c))return!0}return!1}var S9="4.5.1";const E9=["top","bottom","left","right","chartArea"];function NN(t,e){return t==="top"||t==="bottom"||E9.indexOf(t)===-1&&e==="x"}function CN(t,e){return function(n,s){return n[t]===s[t]?n[e]-s[e]:n[t]-s[t]}}function _N(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),qn(n&&n.onComplete,[t],e)}function T9(t){const e=t.chart,n=e.options.animation;qn(n&&n.onProgress,[t],e)}function bT(t){return vk()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const Fh={},SN=t=>{const e=bT(t);return Object.values(Fh).filter(n=>n.canvas===e).pop()};function A9(t,e,n){const s=Object.keys(t);for(const a of s){const l=+a;if(l>=e){const o=t[a];delete t[a],(n>0||l>e)&&(t[l+n]=o)}}}function D9(t,e,n,s){return!n||t.type==="mouseout"?null:s?e:t}let Zm=class{static defaults=si;static instances=Fh;static overrides=ro;static registry=Ea;static version=S9;static getChart=SN;static register(...e){Ea.add(...e),EN()}static unregister(...e){Ea.remove(...e),EN()}constructor(e,n){const s=this.config=new N9(n),a=bT(e),l=SN(a);if(l)throw new Error("Canvas is already in use. Chart with ID '"+l.id+"' must be destroyed before the canvas with ID '"+l.canvas.id+"' can be reused.");const o=s.createResolver(s.chartOptionScopes(),this.getContext());this.platform=new(s.platform||Y8(a)),this.platform.updateConfig(s);const c=this.platform.acquireContext(a,o.aspectRatio),d=c&&c.canvas,m=d&&d.height,u=d&&d.width;if(this.id=W$(),this.ctx=c,this.canvas=d,this.width=u,this.height=m,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new h9,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=dB(h=>this.update(h),o.resizeDelay||0),this._dataChanges=[],Fh[this.id]=this,!c||!d){console.error("Failed to create chart: can't acquire context from the given item");return}or.listen(this,"complete",_N),or.listen(this,"progress",T9),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:n},width:s,height:a,_aspectRatio:l}=this;return Tn(e)?n&&l?l:a?s/a:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Ea}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():J0(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Y0(this.canvas,this.ctx),this}stop(){return or.stop(this),this}resize(e,n){or.running(this)?this._resizeBeforeDraw={width:e,height:n}:this._resize(e,n)}_resize(e,n){const s=this.options,a=this.canvas,l=s.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(a,e,n,l),c=s.devicePixelRatio||this.platform.getDevicePixelRatio(),d=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,J0(this,c,!0)&&(this.notifyPlugins("resize",{size:o}),qn(s.onResize,[this,o],this),this.attached&&this._doResize(d)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};Nn(n,(s,a)=>{s.id=a})}buildOrUpdateScales(){const e=this.options,n=e.scales,s=this.scales,a=Object.keys(s).reduce((o,c)=>(o[c]=!1,o),{});let l=[];n&&(l=l.concat(Object.keys(n).map(o=>{const c=n[o],d=ny(o,c),m=d==="r",u=d==="x";return{options:c,dposition:m?"chartArea":u?"bottom":"left",dtype:m?"radialLinear":u?"category":"linear"}}))),Nn(l,o=>{const c=o.options,d=c.id,m=ny(d,c),u=sn(c.type,o.dtype);(c.position===void 0||NN(c.position,m)!==NN(o.dposition))&&(c.position=o.dposition),a[d]=!0;let h=null;if(d in s&&s[d].type===u)h=s[d];else{const p=Ea.getScale(u);h=new p({id:d,type:u,ctx:this.ctx,chart:this}),s[h.id]=h}h.init(c,e)}),Nn(a,(o,c)=>{o||delete s[c]}),Nn(s,o=>{Vs.configure(this,o,o.options),Vs.addBox(this,o)})}_updateMetasets(){const e=this._metasets,n=this.data.datasets.length,s=e.length;if(e.sort((a,l)=>a.index-l.index),s>n){for(let a=n;a<s;++a)this._destroyDatasetMeta(a);e.splice(n,s-n)}this._sortedMetasets=e.slice(0).sort(CN("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:n}}=this;e.length>n.length&&delete this._stacks,e.forEach((s,a)=>{n.filter(l=>l===s._dataset).length===0&&this._destroyDatasetMeta(a)})}buildOrUpdateControllers(){const e=[],n=this.data.datasets;let s,a;for(this._removeUnreferencedMetasets(),s=0,a=n.length;s<a;s++){const l=n[s];let o=this.getDatasetMeta(s);const c=l.type||this.config.type;if(o.type&&o.type!==c&&(this._destroyDatasetMeta(s),o=this.getDatasetMeta(s)),o.type=c,o.indexAxis=l.indexAxis||ty(c,this.options),o.order=l.order||0,o.index=s,o.label=""+l.label,o.visible=this.isDatasetVisible(s),o.controller)o.controller.updateIndex(s),o.controller.linkScales();else{const d=Ea.getController(c),{datasetElementType:m,dataElementType:u}=si.datasets[c];Object.assign(d,{dataElementType:Ea.getElement(u),datasetElementType:m&&Ea.getElement(m)}),o.controller=new d(this,s),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){Nn(this.data.datasets,(e,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const n=this.config;n.update();const s=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),a=this._animationsDisabled=!s.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const l=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let m=0,u=this.data.datasets.length;m<u;m++){const{controller:h}=this.getDatasetMeta(m),p=!a&&l.indexOf(h)===-1;h.buildOrUpdateElements(p),o=Math.max(+h.getMaxOverflow(),o)}o=this._minPadding=s.layout.autoPadding?o:0,this._updateLayout(o),a||Nn(l,m=>{m.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(CN("z","_idx"));const{_active:c,_lastEvent:d}=this;d?this._eventHandler(d,!0):c.length&&this._updateHoverStyles(c,c,!0),this.render()}_updateScales(){Nn(this.scales,e=>{Vs.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,n=new Set(Object.keys(this._listeners)),s=new Set(e.events);(!$0(n,s)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,n=this._getUniformDataChanges()||[];for(const{method:s,start:a,count:l}of n){const o=s==="_removeElements"?-l:l;A9(e,a,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const n=this.data.datasets.length,s=l=>new Set(e.filter(o=>o[0]===l).map((o,c)=>c+","+o.splice(1).join(","))),a=s(0);for(let l=1;l<n;l++)if(!$0(a,s(l)))return;return Array.from(a).map(l=>l.split(",")).map(l=>({method:l[1],start:+l[2],count:+l[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Vs.update(this,this.width,this.height,e);const n=this.chartArea,s=n.width<=0||n.height<=0;this._layers=[],Nn(this.boxes,a=>{s&&a.position==="chartArea"||(a.configure&&a.configure(),this._layers.push(...a._layers()))},this),this._layers.forEach((a,l)=>{a._idx=l}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let n=0,s=this.data.datasets.length;n<s;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,s=this.data.datasets.length;n<s;++n)this._updateDataset(n,gl(e)?e({datasetIndex:n}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,n){const s=this.getDatasetMeta(e),a={meta:s,index:e,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",a)!==!1&&(s.controller._update(n),a.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",a))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(or.has(this)?this.attached&&!or.running(this)&&or.start(this):(this.draw(),_N({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:s,height:a}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(s,a)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(this.chartArea);for(this._drawDatasets();e<n.length;++e)n[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const n=this._sortedMetasets,s=[];let a,l;for(a=0,l=n.length;a<l;++a){const o=n[a];(!e||o.visible)&&s.push(o)}return s}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let n=e.length-1;n>=0;--n)this._drawDataset(e[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const n=this.ctx,s={meta:e,index:e.index,cancelable:!0},a=YB(this,e);this.notifyPlugins("beforeDatasetDraw",s)!==!1&&(a&&mk(n,a),e.controller.draw(),a&&uk(n),s.cancelable=!1,this.notifyPlugins("afterDatasetDraw",s))}isPointInArea(e){return tT(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,n,s,a){const l=E8.modes[n];return typeof l=="function"?l(this,e,s,a):[]}getDatasetMeta(e){const n=this.data.datasets[e],s=this._metasets;let a=s.filter(l=>l&&l._dataset===n).pop();return a||(a={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:e,_dataset:n,_parsed:[],_sorted:!1},s.push(a)),a}getContext(){return this.$context||(this.$context=Zc(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const n=this.data.datasets[e];if(!n)return!1;const s=this.getDatasetMeta(e);return typeof s.hidden=="boolean"?!s.hidden:!n.hidden}setDatasetVisibility(e,n){const s=this.getDatasetMeta(e);s.hidden=!n}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,n,s){const a=s?"show":"hide",l=this.getDatasetMeta(e),o=l.controller._resolveAnimations(void 0,a);jm(n)?(l.data[n].hidden=!s,this.update()):(this.setDatasetVisibility(e,s),o.update(l,{visible:s}),this.update(c=>c.datasetIndex===e?a:void 0))}hide(e,n){this._updateVisibility(e,n,!1)}show(e,n){this._updateVisibility(e,n,!0)}_destroyDatasetMeta(e){const n=this._metasets[e];n&&n.controller&&n.controller._destroy(),delete this._metasets[e]}_stop(){let e,n;for(this.stop(),or.remove(this),e=0,n=this.data.datasets.length;e<n;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:n}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),Y0(e,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete Fh[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,n=this.platform,s=(l,o)=>{n.addEventListener(this,l,o),e[l]=o},a=(l,o,c)=>{l.offsetX=o,l.offsetY=c,this._eventHandler(l)};Nn(this.options.events,l=>s(l,a))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,n=this.platform,s=(d,m)=>{n.addEventListener(this,d,m),e[d]=m},a=(d,m)=>{e[d]&&(n.removeEventListener(this,d,m),delete e[d])},l=(d,m)=>{this.canvas&&this.resize(d,m)};let o;const c=()=>{a("attach",c),this.attached=!0,this.resize(),s("resize",l),s("detach",o)};o=()=>{this.attached=!1,a("resize",l),this._stop(),this._resize(0,0),s("attach",c)},n.isAttached(this.canvas)?c():o()}unbindEvents(){Nn(this._listeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._listeners={},Nn(this._responsiveListeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,n,s){const a=s?"set":"remove";let l,o,c,d;for(n==="dataset"&&(l=this.getDatasetMeta(e[0].datasetIndex),l.controller["_"+a+"DatasetHoverStyle"]()),c=0,d=e.length;c<d;++c){o=e[c];const m=o&&this.getDatasetMeta(o.datasetIndex).controller;m&&m[a+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const n=this._active||[],s=e.map(({datasetIndex:l,index:o})=>{const c=this.getDatasetMeta(l);if(!c)throw new Error("No dataset found at index "+l);return{datasetIndex:l,element:c.data[o],index:o}});!gp(s,n)&&(this._active=s,this._lastEvent=null,this._updateHoverStyles(s,n))}notifyPlugins(e,n,s){return this._plugins.notify(this,e,n,s)}isPluginEnabled(e){return this._plugins._cache.filter(n=>n.plugin.id===e).length===1}_updateHoverStyles(e,n,s){const a=this.options.hover,l=(d,m)=>d.filter(u=>!m.some(h=>u.datasetIndex===h.datasetIndex&&u.index===h.index)),o=l(n,e),c=s?e:l(e,n);o.length&&this.updateHoverStyle(o,a.mode,!1),c.length&&a.mode&&this.updateHoverStyle(c,a.mode,!0)}_eventHandler(e,n){const s={event:e,replay:n,cancelable:!0,inChartArea:this.isPointInArea(e)},a=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",s,a)===!1)return;const l=this._handleEvent(e,n,s.inChartArea);return s.cancelable=!1,this.notifyPlugins("afterEvent",s,a),(l||s.changed)&&this.render(),this}_handleEvent(e,n,s){const{_active:a=[],options:l}=this,o=n,c=this._getActiveElements(e,a,s,o),d=X$(e),m=D9(e,this._lastEvent,s,d);s&&(this._lastEvent=null,qn(l.onHover,[e,c,this],this),d&&qn(l.onClick,[e,c,this],this));const u=!gp(c,a);return(u||n)&&(this._active=c,this._updateHoverStyles(c,a,n)),this._lastEvent=m,u}_getActiveElements(e,n,s,a){if(e.type==="mouseout")return[];if(!s)return n;const l=this.options.hover;return this.getElementsAtEventForMode(e,l.mode,l,a)}};function EN(){return Nn(Zm.instances,t=>t._plugins.invalidate())}function R9(t,e,n){const{startAngle:s,x:a,y:l,outerRadius:o,innerRadius:c,options:d}=e,{borderWidth:m,borderJoinStyle:u}=d,h=Math.min(m/o,Ta(s-n));if(t.beginPath(),t.arc(a,l,o-m/2,s+h/2,n-h/2),c>0){const p=Math.min(m/c,Ta(s-n));t.arc(a,l,c+m/2,n-p/2,s+p/2,!0)}else{const p=Math.min(m/2,o*Ta(s-n));if(u==="round")t.arc(a,l,p,n-En/2,s+En/2,!0);else if(u==="bevel"){const g=2*p*p,v=-g*Math.cos(n+En/2)+a,x=-g*Math.sin(n+En/2)+l,y=g*Math.cos(s+En/2)+a,b=g*Math.sin(s+En/2)+l;t.lineTo(v,x),t.lineTo(y,b)}}t.closePath(),t.moveTo(0,0),t.rect(0,0,t.canvas.width,t.canvas.height),t.clip("evenodd")}function P9(t,e,n){const{startAngle:s,pixelMargin:a,x:l,y:o,outerRadius:c,innerRadius:d}=e;let m=a/c;t.beginPath(),t.arc(l,o,c,s-m,n+m),d>a?(m=a/d,t.arc(l,o,d,n+m,s-m,!0)):t.arc(l,o,a,n+pi,s-pi),t.closePath(),t.clip()}function M9(t){return hk(t,["outerStart","outerEnd","innerStart","innerEnd"])}function I9(t,e,n,s){const a=M9(t.options.borderRadius),l=(n-e)/2,o=Math.min(l,s*e/2),c=d=>{const m=(n-Math.min(l,d))*s/2;return as(d,0,Math.min(l,m))};return{outerStart:c(a.outerStart),outerEnd:c(a.outerEnd),innerStart:as(a.innerStart,0,o),innerEnd:as(a.innerEnd,0,o)}}function Go(t,e,n,s){return{x:n+t*Math.cos(e),y:s+t*Math.sin(e)}}function jp(t,e,n,s,a,l){const{x:o,y:c,startAngle:d,pixelMargin:m,innerRadius:u}=e,h=Math.max(e.outerRadius+s+n-m,0),p=u>0?u+s+n+m:0;let g=0;const v=a-d;if(s){const F=u>0?u-s:0,H=h>0?h-s:0,G=(F+H)/2,z=G!==0?v*G/(G+s):v;g=(v-z)/2}const x=Math.max(.001,v*h-n/En)/h,y=(v-x)/2,b=d+y+g,k=a-y-g,{outerStart:w,outerEnd:T,innerStart:j,innerEnd:D}=I9(e,p,h,k-b),_=h-w,N=h-T,A=b+w/_,P=k-T/N,E=p+j,I=p+D,M=b+j/E,O=k-D/I;if(t.beginPath(),l){const F=(A+P)/2;if(t.arc(o,c,h,A,F),t.arc(o,c,h,F,P),T>0){const ie=Go(N,P,o,c);t.arc(ie.x,ie.y,T,P,k+pi)}const H=Go(I,k,o,c);if(t.lineTo(H.x,H.y),D>0){const ie=Go(I,O,o,c);t.arc(ie.x,ie.y,D,k+pi,O+Math.PI)}const G=(k-D/p+(b+j/p))/2;if(t.arc(o,c,p,k-D/p,G,!0),t.arc(o,c,p,G,b+j/p,!0),j>0){const ie=Go(E,M,o,c);t.arc(ie.x,ie.y,j,M+Math.PI,b-pi)}const z=Go(_,b,o,c);if(t.lineTo(z.x,z.y),w>0){const ie=Go(_,A,o,c);t.arc(ie.x,ie.y,w,b-pi,A)}}else{t.moveTo(o,c);const F=Math.cos(A)*h+o,H=Math.sin(A)*h+c;t.lineTo(F,H);const G=Math.cos(P)*h+o,z=Math.sin(P)*h+c;t.lineTo(G,z)}t.closePath()}function O9(t,e,n,s,a){const{fullCircles:l,startAngle:o,circumference:c}=e;let d=e.endAngle;if(l){jp(t,e,n,s,d,a);for(let m=0;m<l;++m)t.fill();isNaN(c)||(d=o+(c%ci||ci))}return jp(t,e,n,s,d,a),t.fill(),d}function F9(t,e,n,s,a){const{fullCircles:l,startAngle:o,circumference:c,options:d}=e,{borderWidth:m,borderJoinStyle:u,borderDash:h,borderDashOffset:p,borderRadius:g}=d,v=d.borderAlign==="inner";if(!m)return;t.setLineDash(h||[]),t.lineDashOffset=p,v?(t.lineWidth=m*2,t.lineJoin=u||"round"):(t.lineWidth=m,t.lineJoin=u||"bevel");let x=e.endAngle;if(l){jp(t,e,n,s,x,a);for(let y=0;y<l;++y)t.stroke();isNaN(c)||(x=o+(c%ci||ci))}v&&P9(t,e,x),d.selfJoin&&x-o>=En&&g===0&&u!=="miter"&&R9(t,e,x),l||(jp(t,e,n,s,x,a),t.stroke())}class kT extends No{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:e=>e!=="borderDash"};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(e){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,n,s){const a=this.getProps(["x","y"],s),{angle:l,distance:o}=K2(a,{x:e,y:n}),{startAngle:c,endAngle:d,innerRadius:m,outerRadius:u,circumference:h}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],s),p=(this.options.spacing+this.options.borderWidth)/2,g=sn(h,d-c),v=yp(l,c,d)&&c!==d,x=g>=ci||v,y=Vl(o,m+p,u+p);return x&&y}getCenterPoint(e){const{x:n,y:s,startAngle:a,endAngle:l,innerRadius:o,outerRadius:c}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:d,spacing:m}=this.options,u=(a+l)/2,h=(o+c+m+d)/2;return{x:n+Math.cos(u)*h,y:s+Math.sin(u)*h}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:n,circumference:s}=this,a=(n.offset||0)/4,l=(n.spacing||0)/2,o=n.circular;if(this.pixelMargin=n.borderAlign==="inner"?.33:0,this.fullCircles=s>ci?Math.floor(s/ci):0,s===0||this.innerRadius<0||this.outerRadius<0)return;e.save();const c=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(c)*a,Math.sin(c)*a);const d=1-Math.sin(Math.min(En,s||0)),m=a*d;e.fillStyle=n.backgroundColor,e.strokeStyle=n.borderColor,O9(e,this,m,l,o),F9(e,this,m,l,o),e.restore()}}function wT(t,e){const{x:n,y:s,base:a,width:l,height:o}=t.getProps(["x","y","base","width","height"],e);let c,d,m,u,h;return t.horizontal?(h=o/2,c=Math.min(n,a),d=Math.max(n,a),m=s-h,u=s+h):(h=l/2,c=n-h,d=n+h,m=Math.min(s,a),u=Math.max(s,a)),{left:c,top:m,right:d,bottom:u}}function Xr(t,e,n,s){return t?0:as(e,n,s)}function L9(t,e,n){const s=t.options.borderWidth,a=t.borderSkipped,l=nT(s);return{t:Xr(a.top,l.top,0,n),r:Xr(a.right,l.right,0,e),b:Xr(a.bottom,l.bottom,0,n),l:Xr(a.left,l.left,0,e)}}function $9(t,e,n){const{enableBorderRadius:s}=t.getProps(["enableBorderRadius"]),a=t.options.borderRadius,l=gc(a),o=Math.min(e,n),c=t.borderSkipped,d=s||an(a);return{topLeft:Xr(!d||c.top||c.left,l.topLeft,0,o),topRight:Xr(!d||c.top||c.right,l.topRight,0,o),bottomLeft:Xr(!d||c.bottom||c.left,l.bottomLeft,0,o),bottomRight:Xr(!d||c.bottom||c.right,l.bottomRight,0,o)}}function B9(t){const e=wT(t),n=e.right-e.left,s=e.bottom-e.top,a=L9(t,n/2,s/2),l=$9(t,n/2,s/2);return{outer:{x:e.left,y:e.top,w:n,h:s,radius:l},inner:{x:e.left+a.l,y:e.top+a.t,w:n-a.l-a.r,h:s-a.t-a.b,radius:{topLeft:Math.max(0,l.topLeft-Math.max(a.t,a.l)),topRight:Math.max(0,l.topRight-Math.max(a.t,a.r)),bottomLeft:Math.max(0,l.bottomLeft-Math.max(a.b,a.l)),bottomRight:Math.max(0,l.bottomRight-Math.max(a.b,a.r))}}}}function bv(t,e,n,s){const a=e===null,l=n===null,c=t&&!(a&&l)&&wT(t,s);return c&&(a||Vl(e,c.left,c.right))&&(l||Vl(n,c.top,c.bottom))}function q9(t){return t.topLeft||t.topRight||t.bottomLeft||t.bottomRight}function H9(t,e){t.rect(e.x,e.y,e.w,e.h)}function kv(t,e,n={}){const s=t.x!==n.x?-e:0,a=t.y!==n.y?-e:0,l=(t.x+t.w!==n.x+n.w?e:0)-s,o=(t.y+t.h!==n.y+n.h?e:0)-a;return{x:t.x+s,y:t.y+a,w:t.w+l,h:t.h+o,radius:t.radius}}class z9 extends No{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:n,options:{borderColor:s,backgroundColor:a}}=this,{inner:l,outer:o}=B9(this),c=q9(o.radius)?bp:H9;e.save(),(o.w!==l.w||o.h!==l.h)&&(e.beginPath(),c(e,kv(o,n,l)),e.clip(),c(e,kv(l,-n,o)),e.fillStyle=s,e.fill("evenodd")),e.beginPath(),c(e,kv(l,n)),e.fillStyle=a,e.fill(),e.restore()}inRange(e,n,s){return bv(this,e,n,s)}inXRange(e,n){return bv(this,e,null,n)}inYRange(e,n){return bv(this,null,e,n)}getCenterPoint(e){const{x:n,y:s,base:a,horizontal:l}=this.getProps(["x","y","base","horizontal"],e);return{x:l?(n+a)/2:n,y:l?s:(s+a)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}const TN=(t,e)=>{let{boxHeight:n=e,boxWidth:s=e}=t;return t.usePointStyle&&(n=Math.min(n,e),s=t.pointStyleWidth||Math.min(s,e)),{boxWidth:s,boxHeight:n,itemHeight:Math.max(e,n)}},V9=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class AN extends No{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n,s){this.maxWidth=e,this.maxHeight=n,this._margins=s,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let n=qn(e.generateLabels,[this.chart],this)||[];e.filter&&(n=n.filter(s=>e.filter(s,this.chart.data))),e.sort&&(n=n.sort((s,a)=>e.sort(s,a,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:e,ctx:n}=this;if(!e.display){this.width=this.height=0;return}const s=e.labels,a=Fi(s.font),l=a.size,o=this._computeTitleHeight(),{boxWidth:c,itemHeight:d}=TN(s,l);let m,u;n.font=a.string,this.isHorizontal()?(m=this.maxWidth,u=this._fitRows(o,l,c,d)+10):(u=this.maxHeight,m=this._fitCols(o,a,c,d)+10),this.width=Math.min(m,e.maxWidth||this.maxWidth),this.height=Math.min(u,e.maxHeight||this.maxHeight)}_fitRows(e,n,s,a){const{ctx:l,maxWidth:o,options:{labels:{padding:c}}}=this,d=this.legendHitBoxes=[],m=this.lineWidths=[0],u=a+c;let h=e;l.textAlign="left",l.textBaseline="middle";let p=-1,g=-u;return this.legendItems.forEach((v,x)=>{const y=s+n/2+l.measureText(v.text).width;(x===0||m[m.length-1]+y+2*c>o)&&(h+=u,m[m.length-(x>0?0:1)]=0,g+=u,p++),d[x]={left:0,top:g,row:p,width:y,height:a},m[m.length-1]+=y+c}),h}_fitCols(e,n,s,a){const{ctx:l,maxHeight:o,options:{labels:{padding:c}}}=this,d=this.legendHitBoxes=[],m=this.columnSizes=[],u=o-e;let h=c,p=0,g=0,v=0,x=0;return this.legendItems.forEach((y,b)=>{const{itemWidth:k,itemHeight:w}=U9(s,n,l,y,a);b>0&&g+w+2*c>u&&(h+=p+c,m.push({width:p,height:g}),v+=p+c,x++,p=g=0),d[b]={left:v,top:g,col:x,width:k,height:w},p=Math.max(p,k),g+=w+c}),h+=p,m.push({width:p,height:g}),h}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:s,labels:{padding:a},rtl:l}}=this,o=fc(l,this.left,this.width);if(this.isHorizontal()){let c=0,d=Di(s,this.left+a,this.right-this.lineWidths[c]);for(const m of n)c!==m.row&&(c=m.row,d=Di(s,this.left+a,this.right-this.lineWidths[c])),m.top+=this.top+e+a,m.left=o.leftForLtr(o.x(d),m.width),d+=m.width+a}else{let c=0,d=Di(s,this.top+e+a,this.bottom-this.columnSizes[c].height);for(const m of n)m.col!==c&&(c=m.col,d=Di(s,this.top+e+a,this.bottom-this.columnSizes[c].height)),m.top=d,m.left+=this.left+a,m.left=o.leftForLtr(o.x(m.left),m.width),d+=m.height+a}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;mk(e,this),this._draw(),uk(e)}}_draw(){const{options:e,columnSizes:n,lineWidths:s,ctx:a}=this,{align:l,labels:o}=e,c=si.color,d=fc(e.rtl,this.left,this.width),m=Fi(o.font),{padding:u}=o,h=m.size,p=h/2;let g;this.drawTitle(),a.textAlign=d.textAlign("left"),a.textBaseline="middle",a.lineWidth=.5,a.font=m.string;const{boxWidth:v,boxHeight:x,itemHeight:y}=TN(o,h),b=function(D,_,N){if(isNaN(v)||v<=0||isNaN(x)||x<0)return;a.save();const A=sn(N.lineWidth,1);if(a.fillStyle=sn(N.fillStyle,c),a.lineCap=sn(N.lineCap,"butt"),a.lineDashOffset=sn(N.lineDashOffset,0),a.lineJoin=sn(N.lineJoin,"miter"),a.lineWidth=A,a.strokeStyle=sn(N.strokeStyle,c),a.setLineDash(sn(N.lineDash,[])),o.usePointStyle){const P={radius:x*Math.SQRT2/2,pointStyle:N.pointStyle,rotation:N.rotation,borderWidth:A},E=d.xPlus(D,v/2),I=_+p;eT(a,P,E,I,o.pointStyleWidth&&v)}else{const P=_+Math.max((h-x)/2,0),E=d.leftForLtr(D,v),I=gc(N.borderRadius);a.beginPath(),Object.values(I).some(M=>M!==0)?bp(a,{x:E,y:P,w:v,h:x,radius:I}):a.rect(E,P,v,x),a.fill(),A!==0&&a.stroke()}a.restore()},k=function(D,_,N){Nm(a,N.text,D,_+y/2,m,{strikethrough:N.hidden,textAlign:d.textAlign(N.textAlign)})},w=this.isHorizontal(),T=this._computeTitleHeight();w?g={x:Di(l,this.left+u,this.right-s[0]),y:this.top+u+T,line:0}:g={x:this.left+u,y:Di(l,this.top+T+u,this.bottom-n[0].height),line:0},lT(this.ctx,e.textDirection);const j=y+u;this.legendItems.forEach((D,_)=>{a.strokeStyle=D.fontColor,a.fillStyle=D.fontColor;const N=a.measureText(D.text).width,A=d.textAlign(D.textAlign||(D.textAlign=o.textAlign)),P=v+p+N;let E=g.x,I=g.y;d.setWidth(this.width),w?_>0&&E+P+u>this.right&&(I=g.y+=j,g.line++,E=g.x=Di(l,this.left+u,this.right-s[g.line])):_>0&&I+j>this.bottom&&(E=g.x=E+n[g.line].width+u,g.line++,I=g.y=Di(l,this.top+T+u,this.bottom-n[g.line].height));const M=d.x(E);if(b(M,I,D),E=mB(A,E+v+p,w?E+P:this.right,e.rtl),k(d.x(E),I,D),w)g.x+=P+u;else if(typeof D.text!="string"){const O=m.lineHeight;g.y+=jT(D,O)+u}else g.y+=j}),oT(this.ctx,e.textDirection)}drawTitle(){const e=this.options,n=e.title,s=Fi(n.font),a=Js(n.padding);if(!n.display)return;const l=fc(e.rtl,this.left,this.width),o=this.ctx,c=n.position,d=s.size/2,m=a.top+d;let u,h=this.left,p=this.width;if(this.isHorizontal())p=Math.max(...this.lineWidths),u=this.top+m,h=Di(e.align,h,this.right-p);else{const v=this.columnSizes.reduce((x,y)=>Math.max(x,y.height),0);u=m+Di(e.align,this.top,this.bottom-v-e.labels.padding-this._computeTitleHeight())}const g=Di(c,h,h+p);o.textAlign=l.textAlign(ck(c)),o.textBaseline="middle",o.strokeStyle=n.color,o.fillStyle=n.color,o.font=s.string,Nm(o,n.text,g,u,s)}_computeTitleHeight(){const e=this.options.title,n=Fi(e.font),s=Js(e.padding);return e.display?n.lineHeight+s.height:0}_getLegendItemAt(e,n){let s,a,l;if(Vl(e,this.left,this.right)&&Vl(n,this.top,this.bottom)){for(l=this.legendHitBoxes,s=0;s<l.length;++s)if(a=l[s],Vl(e,a.left,a.left+a.width)&&Vl(n,a.top,a.top+a.height))return this.legendItems[s]}return null}handleEvent(e){const n=this.options;if(!G9(e.type,n))return;const s=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const a=this._hoveredItem,l=V9(a,s);a&&!l&&qn(n.onLeave,[e,a,this],this),this._hoveredItem=s,s&&!l&&qn(n.onHover,[e,s,this],this)}else s&&qn(n.onClick,[e,s,this],this)}}function U9(t,e,n,s,a){const l=W9(s,t,e,n),o=K9(a,s,e.lineHeight);return{itemWidth:l,itemHeight:o}}function W9(t,e,n,s){let a=t.text;return a&&typeof a!="string"&&(a=a.reduce((l,o)=>l.length>o.length?l:o)),e+n.size/2+s.measureText(a).width}function K9(t,e,n){let s=t;return typeof e.text!="string"&&(s=jT(e,n)),s}function jT(t,e){const n=t.text?t.text.length:0;return e*n}function G9(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var NT={id:"legend",_element:AN,start(t,e,n){const s=t.legend=new AN({ctx:t.ctx,options:n,chart:t});Vs.configure(t,s,n),Vs.addBox(t,s)},stop(t){Vs.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const s=t.legend;Vs.configure(t,s,n),s.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const s=e.datasetIndex,a=n.chart;a.isDatasetVisible(s)?(a.hide(s),e.hidden=!0):(a.show(s),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:s,textAlign:a,color:l,useBorderRadius:o,borderRadius:c}}=t.legend.options;return t._getSortedDatasetMetas().map(d=>{const m=d.controller.getStyle(n?0:void 0),u=Js(m.borderWidth);return{text:e[d.index].label,fillStyle:m.backgroundColor,fontColor:l,hidden:!d.visible,lineCap:m.borderCapStyle,lineDash:m.borderDash,lineDashOffset:m.borderDashOffset,lineJoin:m.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:m.borderColor,pointStyle:s||m.pointStyle,rotation:m.rotation,textAlign:a||m.textAlign,borderRadius:o&&(c||m.borderRadius),datasetIndex:d.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class CT extends No{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n){const s=this.options;if(this.left=0,this.top=0,!s.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=n;const a=hi(s.text)?s.text.length:1;this._padding=Js(s.padding);const l=a*Fi(s.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=l:this.width=l}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:n,left:s,bottom:a,right:l,options:o}=this,c=o.align;let d=0,m,u,h;return this.isHorizontal()?(u=Di(c,s,l),h=n+e,m=l-s):(o.position==="left"?(u=s+e,h=Di(c,a,n),d=En*-.5):(u=l-e,h=Di(c,n,a),d=En*.5),m=a-n),{titleX:u,titleY:h,maxWidth:m,rotation:d}}draw(){const e=this.ctx,n=this.options;if(!n.display)return;const s=Fi(n.font),l=s.lineHeight/2+this._padding.top,{titleX:o,titleY:c,maxWidth:d,rotation:m}=this._drawArgs(l);Nm(e,n.text,0,0,s,{color:n.color,maxWidth:d,rotation:m,textAlign:ck(n.align),textBaseline:"middle",translation:[o,c]})}}function Y9(t,e){const n=new CT({ctx:t.ctx,options:e,chart:t});Vs.configure(t,n,e),Vs.addBox(t,n),t.titleBlock=n}var Q9={id:"title",_element:CT,start(t,e,n){Y9(t,n)},stop(t){const e=t.titleBlock;Vs.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,n){const s=t.titleBlock;Vs.configure(t,s,n),s.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const zd={average(t){if(!t.length)return!1;let e,n,s=new Set,a=0,l=0;for(e=0,n=t.length;e<n;++e){const c=t[e].element;if(c&&c.hasValue()){const d=c.tooltipPosition();s.add(d.x),a+=d.y,++l}}return l===0||s.size===0?!1:{x:[...s].reduce((c,d)=>c+d)/s.size,y:a/l}},nearest(t,e){if(!t.length)return!1;let n=e.x,s=e.y,a=Number.POSITIVE_INFINITY,l,o,c;for(l=0,o=t.length;l<o;++l){const d=t[l].element;if(d&&d.hasValue()){const m=d.getCenterPoint(),u=aB(e,m);u<a&&(a=u,c=d)}}if(c){const d=c.tooltipPosition();n=d.x,s=d.y}return{x:n,y:s}}};function Sa(t,e){return e&&(hi(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function cr(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function Z9(t,e){const{element:n,datasetIndex:s,index:a}=e,l=t.getDatasetMeta(s).controller,{label:o,value:c}=l.getLabelAndValue(a);return{chart:t,label:o,parsed:l.getParsed(a),raw:t.data.datasets[s].data[a],formattedValue:c,dataset:l.getDataset(),dataIndex:a,datasetIndex:s,element:n}}function DN(t,e){const n=t.chart.ctx,{body:s,footer:a,title:l}=t,{boxWidth:o,boxHeight:c}=e,d=Fi(e.bodyFont),m=Fi(e.titleFont),u=Fi(e.footerFont),h=l.length,p=a.length,g=s.length,v=Js(e.padding);let x=v.height,y=0,b=s.reduce((T,j)=>T+j.before.length+j.lines.length+j.after.length,0);if(b+=t.beforeBody.length+t.afterBody.length,h&&(x+=h*m.lineHeight+(h-1)*e.titleSpacing+e.titleMarginBottom),b){const T=e.displayColors?Math.max(c,d.lineHeight):d.lineHeight;x+=g*T+(b-g)*d.lineHeight+(b-1)*e.bodySpacing}p&&(x+=e.footerMarginTop+p*u.lineHeight+(p-1)*e.footerSpacing);let k=0;const w=function(T){y=Math.max(y,n.measureText(T).width+k)};return n.save(),n.font=m.string,Nn(t.title,w),n.font=d.string,Nn(t.beforeBody.concat(t.afterBody),w),k=e.displayColors?o+2+e.boxPadding:0,Nn(s,T=>{Nn(T.before,w),Nn(T.lines,w),Nn(T.after,w)}),k=0,n.font=u.string,Nn(t.footer,w),n.restore(),y+=v.width,{width:y,height:x}}function X9(t,e){const{y:n,height:s}=e;return n<s/2?"top":n>t.height-s/2?"bottom":"center"}function J9(t,e,n,s){const{x:a,width:l}=s,o=n.caretSize+n.caretPadding;if(t==="left"&&a+l+o>e.width||t==="right"&&a-l-o<0)return!0}function eq(t,e,n,s){const{x:a,width:l}=n,{width:o,chartArea:{left:c,right:d}}=t;let m="center";return s==="center"?m=a<=(c+d)/2?"left":"right":a<=l/2?m="left":a>=o-l/2&&(m="right"),J9(m,t,e,n)&&(m="center"),m}function RN(t,e,n){const s=n.yAlign||e.yAlign||X9(t,n);return{xAlign:n.xAlign||e.xAlign||eq(t,e,n,s),yAlign:s}}function tq(t,e){let{x:n,width:s}=t;return e==="right"?n-=s:e==="center"&&(n-=s/2),n}function nq(t,e,n){let{y:s,height:a}=t;return e==="top"?s+=n:e==="bottom"?s-=a+n:s-=a/2,s}function PN(t,e,n,s){const{caretSize:a,caretPadding:l,cornerRadius:o}=t,{xAlign:c,yAlign:d}=n,m=a+l,{topLeft:u,topRight:h,bottomLeft:p,bottomRight:g}=gc(o);let v=tq(e,c);const x=nq(e,d,m);return d==="center"?c==="left"?v+=m:c==="right"&&(v-=m):c==="left"?v-=Math.max(u,p)+a:c==="right"&&(v+=Math.max(h,g)+a),{x:as(v,0,s.width-e.width),y:as(x,0,s.height-e.height)}}function eh(t,e,n){const s=Js(n.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-s.right:t.x+s.left}function MN(t){return Sa([],cr(t))}function iq(t,e,n){return Zc(t,{tooltip:e,tooltipItems:n,type:"tooltip"})}function IN(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const _T={beforeTitle:ar,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,s=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(s>0&&e.dataIndex<s)return n[e.dataIndex]}return""},afterTitle:ar,beforeBody:ar,beforeLabel:ar,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return Tn(n)||(e+=n),e},labelColor(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:ar,afterBody:ar,beforeFooter:ar,footer:ar,afterFooter:ar};function ts(t,e,n,s){const a=t[e].call(n,s);return typeof a>"u"?_T[e].call(n,s):a}let ON=class extends No{static positioners=zd;constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const n=this.chart,s=this.options.setContext(this.getContext()),a=s.enabled&&n.options.animation&&s.animations,l=new cT(this.chart,a);return a._cacheable&&(this._cachedAnimations=Object.freeze(l)),l}getContext(){return this.$context||(this.$context=iq(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){const{callbacks:s}=n,a=ts(s,"beforeTitle",this,e),l=ts(s,"title",this,e),o=ts(s,"afterTitle",this,e);let c=[];return c=Sa(c,cr(a)),c=Sa(c,cr(l)),c=Sa(c,cr(o)),c}getBeforeBody(e,n){return MN(ts(n.callbacks,"beforeBody",this,e))}getBody(e,n){const{callbacks:s}=n,a=[];return Nn(e,l=>{const o={before:[],lines:[],after:[]},c=IN(s,l);Sa(o.before,cr(ts(c,"beforeLabel",this,l))),Sa(o.lines,ts(c,"label",this,l)),Sa(o.after,cr(ts(c,"afterLabel",this,l))),a.push(o)}),a}getAfterBody(e,n){return MN(ts(n.callbacks,"afterBody",this,e))}getFooter(e,n){const{callbacks:s}=n,a=ts(s,"beforeFooter",this,e),l=ts(s,"footer",this,e),o=ts(s,"afterFooter",this,e);let c=[];return c=Sa(c,cr(a)),c=Sa(c,cr(l)),c=Sa(c,cr(o)),c}_createItems(e){const n=this._active,s=this.chart.data,a=[],l=[],o=[];let c=[],d,m;for(d=0,m=n.length;d<m;++d)c.push(Z9(this.chart,n[d]));return e.filter&&(c=c.filter((u,h,p)=>e.filter(u,h,p,s))),e.itemSort&&(c=c.sort((u,h)=>e.itemSort(u,h,s))),Nn(c,u=>{const h=IN(e.callbacks,u);a.push(ts(h,"labelColor",this,u)),l.push(ts(h,"labelPointStyle",this,u)),o.push(ts(h,"labelTextColor",this,u))}),this.labelColors=a,this.labelPointStyles=l,this.labelTextColors=o,this.dataPoints=c,c}update(e,n){const s=this.options.setContext(this.getContext()),a=this._active;let l,o=[];if(!a.length)this.opacity!==0&&(l={opacity:0});else{const c=zd[s.position].call(this,a,this._eventPosition);o=this._createItems(s),this.title=this.getTitle(o,s),this.beforeBody=this.getBeforeBody(o,s),this.body=this.getBody(o,s),this.afterBody=this.getAfterBody(o,s),this.footer=this.getFooter(o,s);const d=this._size=DN(this,s),m=Object.assign({},c,d),u=RN(this.chart,s,m),h=PN(s,m,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,l={opacity:1,x:h.x,y:h.y,width:d.width,height:d.height,caretX:c.x,caretY:c.y}}this._tooltipItems=o,this.$context=void 0,l&&this._resolveAnimations().update(this,l),e&&s.external&&s.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,s,a){const l=this.getCaretPosition(e,s,a);n.lineTo(l.x1,l.y1),n.lineTo(l.x2,l.y2),n.lineTo(l.x3,l.y3)}getCaretPosition(e,n,s){const{xAlign:a,yAlign:l}=this,{caretSize:o,cornerRadius:c}=s,{topLeft:d,topRight:m,bottomLeft:u,bottomRight:h}=gc(c),{x:p,y:g}=e,{width:v,height:x}=n;let y,b,k,w,T,j;return l==="center"?(T=g+x/2,a==="left"?(y=p,b=y-o,w=T+o,j=T-o):(y=p+v,b=y+o,w=T-o,j=T+o),k=y):(a==="left"?b=p+Math.max(d,u)+o:a==="right"?b=p+v-Math.max(m,h)-o:b=this.caretX,l==="top"?(w=g,T=w-o,y=b-o,k=b+o):(w=g+x,T=w+o,y=b+o,k=b-o),j=w),{x1:y,x2:b,x3:k,y1:w,y2:T,y3:j}}drawTitle(e,n,s){const a=this.title,l=a.length;let o,c,d;if(l){const m=fc(s.rtl,this.x,this.width);for(e.x=eh(this,s.titleAlign,s),n.textAlign=m.textAlign(s.titleAlign),n.textBaseline="middle",o=Fi(s.titleFont),c=s.titleSpacing,n.fillStyle=s.titleColor,n.font=o.string,d=0;d<l;++d)n.fillText(a[d],m.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+c,d+1===l&&(e.y+=s.titleMarginBottom-c)}}_drawColorBox(e,n,s,a,l){const o=this.labelColors[s],c=this.labelPointStyles[s],{boxHeight:d,boxWidth:m}=l,u=Fi(l.bodyFont),h=eh(this,"left",l),p=a.x(h),g=d<u.lineHeight?(u.lineHeight-d)/2:0,v=n.y+g;if(l.usePointStyle){const x={radius:Math.min(m,d)/2,pointStyle:c.pointStyle,rotation:c.rotation,borderWidth:1},y=a.leftForLtr(p,m)+m/2,b=v+d/2;e.strokeStyle=l.multiKeyBackground,e.fillStyle=l.multiKeyBackground,Q0(e,x,y,b),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,Q0(e,x,y,b)}else{e.lineWidth=an(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const x=a.leftForLtr(p,m),y=a.leftForLtr(a.xPlus(p,1),m-2),b=gc(o.borderRadius);Object.values(b).some(k=>k!==0)?(e.beginPath(),e.fillStyle=l.multiKeyBackground,bp(e,{x,y:v,w:m,h:d,radius:b}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),bp(e,{x:y,y:v+1,w:m-2,h:d-2,radius:b}),e.fill()):(e.fillStyle=l.multiKeyBackground,e.fillRect(x,v,m,d),e.strokeRect(x,v,m,d),e.fillStyle=o.backgroundColor,e.fillRect(y,v+1,m-2,d-2))}e.fillStyle=this.labelTextColors[s]}drawBody(e,n,s){const{body:a}=this,{bodySpacing:l,bodyAlign:o,displayColors:c,boxHeight:d,boxWidth:m,boxPadding:u}=s,h=Fi(s.bodyFont);let p=h.lineHeight,g=0;const v=fc(s.rtl,this.x,this.width),x=function(N){n.fillText(N,v.x(e.x+g),e.y+p/2),e.y+=p+l},y=v.textAlign(o);let b,k,w,T,j,D,_;for(n.textAlign=o,n.textBaseline="middle",n.font=h.string,e.x=eh(this,y,s),n.fillStyle=s.bodyColor,Nn(this.beforeBody,x),g=c&&y!=="right"?o==="center"?m/2+u:m+2+u:0,T=0,D=a.length;T<D;++T){for(b=a[T],k=this.labelTextColors[T],n.fillStyle=k,Nn(b.before,x),w=b.lines,c&&w.length&&(this._drawColorBox(n,e,T,v,s),p=Math.max(h.lineHeight,d)),j=0,_=w.length;j<_;++j)x(w[j]),p=h.lineHeight;Nn(b.after,x)}g=0,p=h.lineHeight,Nn(this.afterBody,x),e.y-=l}drawFooter(e,n,s){const a=this.footer,l=a.length;let o,c;if(l){const d=fc(s.rtl,this.x,this.width);for(e.x=eh(this,s.footerAlign,s),e.y+=s.footerMarginTop,n.textAlign=d.textAlign(s.footerAlign),n.textBaseline="middle",o=Fi(s.footerFont),n.fillStyle=s.footerColor,n.font=o.string,c=0;c<l;++c)n.fillText(a[c],d.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+s.footerSpacing}}drawBackground(e,n,s,a){const{xAlign:l,yAlign:o}=this,{x:c,y:d}=e,{width:m,height:u}=s,{topLeft:h,topRight:p,bottomLeft:g,bottomRight:v}=gc(a.cornerRadius);n.fillStyle=a.backgroundColor,n.strokeStyle=a.borderColor,n.lineWidth=a.borderWidth,n.beginPath(),n.moveTo(c+h,d),o==="top"&&this.drawCaret(e,n,s,a),n.lineTo(c+m-p,d),n.quadraticCurveTo(c+m,d,c+m,d+p),o==="center"&&l==="right"&&this.drawCaret(e,n,s,a),n.lineTo(c+m,d+u-v),n.quadraticCurveTo(c+m,d+u,c+m-v,d+u),o==="bottom"&&this.drawCaret(e,n,s,a),n.lineTo(c+g,d+u),n.quadraticCurveTo(c,d+u,c,d+u-g),o==="center"&&l==="left"&&this.drawCaret(e,n,s,a),n.lineTo(c,d+h),n.quadraticCurveTo(c,d,c+h,d),n.closePath(),n.fill(),a.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){const n=this.chart,s=this.$animations,a=s&&s.x,l=s&&s.y;if(a||l){const o=zd[e.position].call(this,this._active,this._eventPosition);if(!o)return;const c=this._size=DN(this,e),d=Object.assign({},o,this._size),m=RN(n,e,d),u=PN(e,d,m,n);(a._to!==u.x||l._to!==u.y)&&(this.xAlign=m.xAlign,this.yAlign=m.yAlign,this.width=c.width,this.height=c.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,u))}}_willRender(){return!!this.opacity}draw(e){const n=this.options.setContext(this.getContext());let s=this.opacity;if(!s)return;this._updateAnimationTarget(n);const a={width:this.width,height:this.height},l={x:this.x,y:this.y};s=Math.abs(s)<.001?0:s;const o=Js(n.padding),c=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&c&&(e.save(),e.globalAlpha=s,this.drawBackground(l,e,a,n),lT(e,n.textDirection),l.y+=o.top,this.drawTitle(l,e,n),this.drawBody(l,e,n),this.drawFooter(l,e,n),oT(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){const s=this._active,a=e.map(({datasetIndex:c,index:d})=>{const m=this.chart.getDatasetMeta(c);if(!m)throw new Error("Cannot find a dataset at index "+c);return{datasetIndex:c,element:m.data[d],index:d}}),l=!gp(s,a),o=this._positionChanged(a,n);(l||o)&&(this._active=a,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,s=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const a=this.options,l=this._active||[],o=this._getActiveElements(e,l,n,s),c=this._positionChanged(o,e),d=n||!gp(o,l)||c;return d&&(this._active=o,(a.enabled||a.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),d}_getActiveElements(e,n,s,a){const l=this.options;if(e.type==="mouseout")return[];if(!a)return n.filter(c=>this.chart.data.datasets[c.datasetIndex]&&this.chart.getDatasetMeta(c.datasetIndex).controller.getParsed(c.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,l.mode,l,s);return l.reverse&&o.reverse(),o}_positionChanged(e,n){const{caretX:s,caretY:a,options:l}=this,o=zd[l.position].call(this,e,n);return o!==!1&&(s!==o.x||a!==o.y)}};var ST={id:"tooltip",_element:ON,positioners:zd,afterInit(t,e,n){n&&(t.tooltip=new ON({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:_T},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const sq=(t,e,n,s)=>(typeof e=="string"?(n=t.push(e)-1,s.unshift({index:n,label:e})):isNaN(e)&&(n=null),n);function aq(t,e,n,s){const a=t.indexOf(e);if(a===-1)return sq(t,e,n,s);const l=t.lastIndexOf(e);return a!==l?n:a}const rq=(t,e)=>t===null?null:as(Math.round(t),0,e);function FN(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class lq extends Xc{static id="category";static defaults={ticks:{callback:FN}};constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const n=this._addedLabels;if(n.length){const s=this.getLabels();for(const{index:a,label:l}of n)s[a]===l&&s.splice(a,1);this._addedLabels=[]}super.init(e)}parse(e,n){if(Tn(e))return null;const s=this.getLabels();return n=isFinite(n)&&s[n]===e?n:aq(s,e,sn(n,e),this._addedLabels),rq(n,s.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:s,max:a}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(s=0),n||(a=this.getLabels().length-1)),this.min=s,this.max=a}buildTicks(){const e=this.min,n=this.max,s=this.options.offset,a=[];let l=this.getLabels();l=e===0&&n===l.length-1?l:l.slice(e,n+1),this._valueRange=Math.max(l.length-(s?0:1),1),this._startValue=this.min-(s?.5:0);for(let o=e;o<=n;o++)a.push({value:o});return a}getLabelForValue(e){return FN.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}function oq(t,e){const n=[],{bounds:a,step:l,min:o,max:c,precision:d,count:m,maxTicks:u,maxDigits:h,includeBounds:p}=t,g=l||1,v=u-1,{min:x,max:y}=e,b=!Tn(o),k=!Tn(c),w=!Tn(m),T=(y-x)/(h+1);let j=q0((y-x)/v/g)*g,D,_,N,A;if(j<1e-14&&!b&&!k)return[{value:x},{value:y}];A=Math.ceil(y/j)-Math.floor(x/j),A>v&&(j=q0(A*j/v/g)*g),Tn(d)||(D=Math.pow(10,d),j=Math.ceil(j*D)/D),a==="ticks"?(_=Math.floor(x/j)*j,N=Math.ceil(y/j)*j):(_=x,N=y),b&&k&&l&&nB((c-o)/l,j/1e3)?(A=Math.round(Math.min((c-o)/j,u)),j=(c-o)/A,_=o,N=c):w?(_=b?o:_,N=k?c:N,A=m-1,j=(N-_)/A):(A=(N-_)/j,Ih(A,Math.round(A),j/1e3)?A=Math.round(A):A=Math.ceil(A));const P=Math.max(H0(j),H0(_));D=Math.pow(10,Tn(d)?P:d),_=Math.round(_*D)/D,N=Math.round(N*D)/D;let E=0;for(b&&(p&&_!==o?(n.push({value:o}),_<o&&E++,Ih(Math.round((_+E*j)*D)/D,o,LN(o,T,t))&&E++):_<o&&E++);E<A;++E){const I=Math.round((_+E*j)*D)/D;if(k&&I>c)break;n.push({value:I})}return k&&p&&N!==c?n.length&&Ih(n[n.length-1].value,c,LN(c,T,t))?n[n.length-1].value=c:n.push({value:c}):(!k||N===c)&&n.push({value:N}),n}function LN(t,e,{horizontal:n,minRotation:s}){const a=hr(s),l=(n?Math.sin(a):Math.cos(a))||.001,o=.75*e*(""+t).length;return Math.min(e/l,o)}class cq extends Xc{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,n){return Tn(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:n,maxDefined:s}=this.getUserBounds();let{min:a,max:l}=this;const o=d=>a=n?a:d,c=d=>l=s?l:d;if(e){const d=dl(a),m=dl(l);d<0&&m<0?c(0):d>0&&m>0&&o(0)}if(a===l){let d=l===0?1:Math.abs(l*.05);c(l+d),e||o(a-d)}this.min=a,this.max=l}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:n,stepSize:s}=e,a;return s?(a=Math.ceil(this.max/s)-Math.floor(this.min/s)+1,a>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${s} would result generating up to ${a} ticks. Limiting to 1000.`),a=1e3)):(a=this.computeTickLimit(),n=n||11),n&&(a=Math.min(n,a)),a}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,n=e.ticks;let s=this.getTickLimit();s=Math.max(2,s);const a={maxTicks:s,bounds:e.bounds,min:e.min,max:e.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},l=this._range||this,o=oq(a,l);return e.bounds==="ticks"&&iB(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let n=this.min,s=this.max;if(super.configure(),this.options.offset&&e.length){const a=(s-n)/Math.max(e.length-1,1)/2;n-=a,s+=a}this._startValue=n,this._endValue=s,this._valueRange=s-n}getLabelForValue(e){return dk(e,this.chart.options.locale,this.options.ticks.format)}}class dq extends cq{static id="linear";static defaults={ticks:{callback:J2.formatters.numeric}};determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=Xs(e)?e:0,this.max=Xs(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),n=e?this.width:this.height,s=hr(this.options.ticks.minRotation),a=(e?Math.sin(s):Math.cos(s))||.001,l=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,l.lineHeight/a))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}const Mg={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},ss=Object.keys(Mg);function $N(t,e){return t-e}function BN(t,e){if(Tn(e))return null;const n=t._adapter,{parser:s,round:a,isoWeekday:l}=t._parseOpts;let o=e;return typeof s=="function"&&(o=s(o)),Xs(o)||(o=typeof s=="string"?n.parse(o,s):n.parse(o)),o===null?null:(a&&(o=a==="week"&&(xp(l)||l===!0)?n.startOf(o,"isoWeek",l):n.startOf(o,a)),+o)}function qN(t,e,n,s){const a=ss.length;for(let l=ss.indexOf(t);l<a-1;++l){const o=Mg[ss[l]],c=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-e)/(c*o.size))<=s)return ss[l]}return ss[a-1]}function mq(t,e,n,s,a){for(let l=ss.length-1;l>=ss.indexOf(n);l--){const o=ss[l];if(Mg[o].common&&t._adapter.diff(a,s,o)>=e-1)return o}return ss[n?ss.indexOf(n):0]}function uq(t){for(let e=ss.indexOf(t)+1,n=ss.length;e<n;++e)if(Mg[ss[e]].common)return ss[e]}function HN(t,e,n){if(!n)t[e]=!0;else if(n.length){const{lo:s,hi:a}=ok(n,e),l=n[s]>=e?n[s]:n[a];t[l]=!0}}function hq(t,e,n,s){const a=t._adapter,l=+a.startOf(e[0].value,s),o=e[e.length-1].value;let c,d;for(c=l;c<=o;c=+a.add(c,1,s))d=n[c],d>=0&&(e[d].major=!0);return e}function zN(t,e,n){const s=[],a={},l=e.length;let o,c;for(o=0;o<l;++o)c=e[o],a[c]=o,s.push({value:c,major:!1});return l===0||!n?s:hq(t,s,a,n)}class VN extends Xc{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n={}){const s=e.time||(e.time={}),a=this._adapter=new j8._date(e.adapters.date);a.init(n),tm(s.displayFormats,a.formats()),this._parseOpts={parser:s.parser,round:s.round,isoWeekday:s.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return e===void 0?null:BN(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,n=this._adapter,s=e.time.unit||"day";let{min:a,max:l,minDefined:o,maxDefined:c}=this.getUserBounds();function d(m){!o&&!isNaN(m.min)&&(a=Math.min(a,m.min)),!c&&!isNaN(m.max)&&(l=Math.max(l,m.max))}(!o||!c)&&(d(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&d(this.getMinMax(!1))),a=Xs(a)&&!isNaN(a)?a:+n.startOf(Date.now(),s),l=Xs(l)&&!isNaN(l)?l:+n.endOf(Date.now(),s)+1,this.min=Math.min(a,l-1),this.max=Math.max(a+1,l)}_getLabelBounds(){const e=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],s=e[e.length-1]),{min:n,max:s}}buildTicks(){const e=this.options,n=e.time,s=e.ticks,a=s.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&a.length&&(this.min=this._userMin||a[0],this.max=this._userMax||a[a.length-1]);const l=this.min,o=this.max,c=oB(a,l,o);return this._unit=n.unit||(s.autoSkip?qN(n.minUnit,this.min,this.max,this._getLabelCapacity(l)):mq(this,c.length,n.minUnit,this.min,this.max)),this._majorUnit=!s.major.enabled||this._unit==="year"?void 0:uq(this._unit),this.initOffsets(a),e.reverse&&c.reverse(),zN(this,c,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let n=0,s=0,a,l;this.options.offset&&e.length&&(a=this.getDecimalForValue(e[0]),e.length===1?n=1-a:n=(this.getDecimalForValue(e[1])-a)/2,l=this.getDecimalForValue(e[e.length-1]),e.length===1?s=l:s=(l-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;n=as(n,0,o),s=as(s,0,o),this._offsets={start:n,end:s,factor:1/(n+1+s)}}_generate(){const e=this._adapter,n=this.min,s=this.max,a=this.options,l=a.time,o=l.unit||qN(l.minUnit,n,s,this._getLabelCapacity(n)),c=sn(a.ticks.stepSize,1),d=o==="week"?l.isoWeekday:!1,m=xp(d)||d===!0,u={};let h=n,p,g;if(m&&(h=+e.startOf(h,"isoWeek",d)),h=+e.startOf(h,m?"day":o),e.diff(s,n,o)>1e5*c)throw new Error(n+" and "+s+" are too far apart with stepSize of "+c+" "+o);const v=a.ticks.source==="data"&&this.getDataTimestamps();for(p=h,g=0;p<s;p=+e.add(p,c,o),g++)HN(u,p,v);return(p===s||a.bounds==="ticks"||g===1)&&HN(u,p,v),Object.keys(u).sort($N).map(x=>+x)}getLabelForValue(e){const n=this._adapter,s=this.options.time;return s.tooltipFormat?n.format(e,s.tooltipFormat):n.format(e,s.displayFormats.datetime)}format(e,n){const a=this.options.time.displayFormats,l=this._unit,o=n||a[l];return this._adapter.format(e,o)}_tickFormatFunction(e,n,s,a){const l=this.options,o=l.ticks.callback;if(o)return qn(o,[e,n,s],this);const c=l.time.displayFormats,d=this._unit,m=this._majorUnit,u=d&&c[d],h=m&&c[m],p=s[n],g=m&&h&&p&&p.major;return this._adapter.format(e,a||(g?h:u))}generateTickLabels(e){let n,s,a;for(n=0,s=e.length;n<s;++n)a=e[n],a.label=this._tickFormatFunction(a.value,n,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const n=this._offsets,s=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+s)*n.factor)}getValueForPixel(e){const n=this._offsets,s=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+s*(this.max-this.min)}_getLabelSize(e){const n=this.options.ticks,s=this.ctx.measureText(e).width,a=hr(this.isHorizontal()?n.maxRotation:n.minRotation),l=Math.cos(a),o=Math.sin(a),c=this._resolveTickFontOptions(0).size;return{w:s*l+c*o,h:s*o+c*l}}_getLabelCapacity(e){const n=this.options.time,s=n.displayFormats,a=s[n.unit]||s.millisecond,l=this._tickFormatFunction(e,0,zN(this,[e],this._majorUnit),a),o=this._getLabelSize(l),c=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return c>0?c:1}getDataTimestamps(){let e=this._cache.data||[],n,s;if(e.length)return e;const a=this.getMatchingVisibleMetas();if(this._normalized&&a.length)return this._cache.data=a[0].controller.getAllParsedValues(this);for(n=0,s=a.length;n<s;++n)e=e.concat(a[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let n,s;if(e.length)return e;const a=this.getLabels();for(n=0,s=a.length;n<s;++n)e.push(BN(this,a[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return Y2(e.sort($N))}}function th(t,e,n){let s=0,a=t.length-1,l,o,c,d;n?(e>=t[s].pos&&e<=t[a].pos&&({lo:s,hi:a}=Jx(t,"pos",e)),{pos:l,time:c}=t[s],{pos:o,time:d}=t[a]):(e>=t[s].time&&e<=t[a].time&&({lo:s,hi:a}=Jx(t,"time",e)),{time:l,pos:c}=t[s],{time:o,pos:d}=t[a]);const m=o-l;return m?c+(d-c)*(e-l)/m:c}class wpe extends VN{static id="timeseries";static defaults=VN.defaults;constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(e);this._minPos=th(n,this.min),this._tableRange=th(n,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:n,max:s}=this,a=[],l=[];let o,c,d,m,u;for(o=0,c=e.length;o<c;++o)m=e[o],m>=n&&m<=s&&a.push(m);if(a.length<2)return[{time:n,pos:0},{time:s,pos:1}];for(o=0,c=a.length;o<c;++o)u=a[o+1],d=a[o-1],m=a[o],Math.round((u+d)/2)!==m&&l.push({time:m,pos:o/(c-1)});return l}_generate(){const e=this.min,n=this.max;let s=super.getDataTimestamps();return(!s.includes(e)||!s.length)&&s.splice(0,0,e),(!s.includes(n)||s.length===1)&&s.push(n),s.sort((a,l)=>a-l)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const n=this.getDataTimestamps(),s=this.getLabelTimestamps();return n.length&&s.length?e=this.normalize(n.concat(s)):e=n.length?n:s,e=this._cache.all=e,e}getDecimalForValue(e){return(th(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const n=this._offsets,s=this.getDecimalForPixel(e)/n.factor-n.end;return th(this._table,s*this._tableRange+this._minPos,!0)}}const ET="label";function UN(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function pq(t,e){const n=t.options;n&&e&&Object.assign(n,e)}function TT(t,e){t.labels=e}function AT(t,e,n=ET){const s=[];t.datasets=e.map(a=>{const l=t.datasets.find(o=>o[n]===a[n]);return!l||!a.data||s.includes(l)?{...a}:(s.push(l),Object.assign(l,a),l)})}function gq(t,e=ET){const n={labels:[],datasets:[]};return TT(n,t.labels),AT(n,t.datasets,e),n}function fq(t,e){const{height:n=150,width:s=300,redraw:a=!1,datasetIdKey:l,type:o,data:c,options:d,plugins:m=[],fallbackContent:u,updateMode:h,...p}=t,g=f.useRef(null),v=f.useRef(null),x=()=>{g.current&&(v.current=new Zm(g.current,{type:o,data:gq(c,l),options:d&&{...d},plugins:m}),UN(e,v.current))},y=()=>{UN(e,null),v.current&&(v.current.destroy(),v.current=null)};return f.useEffect(()=>{!a&&v.current&&d&&pq(v.current,d)},[a,d]),f.useEffect(()=>{!a&&v.current&&TT(v.current.config.data,c.labels)},[a,c.labels]),f.useEffect(()=>{!a&&v.current&&c.datasets&&AT(v.current.config.data,c.datasets,l)},[a,c.datasets]),f.useEffect(()=>{v.current&&(a?(y(),setTimeout(x)):v.current.update(h))},[a,d,c.labels,c.datasets,h]),f.useEffect(()=>{v.current&&(y(),setTimeout(x))},[o]),f.useEffect(()=>(x(),()=>y()),[]),i.jsx("canvas",{ref:g,role:"img",height:n,width:s,...p,children:u})}const vq=f.forwardRef(fq);function DT(t,e){return Zm.register(e),f.forwardRef((n,s)=>i.jsx(vq,{...n,ref:s,type:t}))}const xq=DT("bar",b8),RT=DT("doughnut",w8);Zm.register(kT,ST,NT);const yq=({clinicId:t,dateRange:e})=>{const{darkMode:n}=mt(),s=f.useMemo(()=>{const h={clinic_id:t};if(e&&e.length===2){const p=g=>{if(!g)return"";const v=new Date(g),x=v.getFullYear(),y=String(v.getMonth()+1).padStart(2,"0"),b=String(v.getDate()).padStart(2,"0");return`${x}-${y}-${b}`};h.start_date=p(e[0]),h.end_date=p(e[1])}return h},[t,e]),{data:a,isLoading:l}=d$(s),o={booked:{color:"#00C853",label:r("Booked","kivicare-clinic-management-system")},check_in:{color:"#2962FF",label:r("Check-in","kivicare-clinic-management-system")},check_out:{color:"#82B1FF",label:r("Check-out","kivicare-clinic-management-system")},pending:{color:"#FF8A80",label:r("Pending","kivicare-clinic-management-system")},cancelled:{color:"#FF5252",label:r("Cancelled","kivicare-clinic-management-system")}},c=f.useMemo(()=>{if(!a?.data?.status_breakdown)return null;const h=a.data.status_breakdown;return{labels:Object.keys(o).map(p=>o[p].label),datasets:[{data:[h.booked||0,h.check_in||0,h.check_out||0,h.pending||0,h.cancelled||0],backgroundColor:[o.booked.color,o.check_in.color,o.check_out.color,o.pending.color,o.cancelled.color],borderWidth:0,hoverOffset:4}]}},[a]),d=a?.data?.count||0,m=f.useMemo(()=>({id:"centerText",beforeDraw:function(h){const{width:p}=h,{height:g}=h,{ctx:v}=h;v.restore();const x=(g/8).toFixed(2);v.font=`bold ${x}px sans-serif`,v.textBaseline="middle",v.fillStyle=n?"#ffffff":"#333333";const y=d.toLocaleString(),b=Math.round((p-v.measureText(y).width)/2),k=g/2;v.fillText(y,b,k-10);const w=(g/16).toFixed(2);v.font=`${w}px sans-serif`,v.fillStyle=n?"#adb5bd":"#6c757d";const T=r("Total Bookings","kivicare-clinic-management-system"),j=Math.round((p-v.measureText(T).width)/2);v.fillText(T,j,k+25),v.save()}}),[d,n]),u={cutout:"65%",plugins:{legend:{display:!1},tooltip:{callbacks:{label:function(h){const p=h.label||"",g=h.raw||0,v=d>0?Math.round(g/d*100):0;return`${p}: ${g} (${v}%)`}}}},maintainAspectRatio:!1};return l?i.jsxs("div",{className:"card card-block card-stretch card-height",children:[i.jsx("div",{className:"card-header",children:i.jsx("h6",{className:"card-title mb-0",children:r("Booking Status","kivicare-clinic-management-system")})}),i.jsxs("div",{className:"card-body",children:[i.jsx("div",{className:"position-relative mb-4 d-flex align-items-center justify-content-center",style:{height:"220px"},children:i.jsx("div",{className:"skeleton-element rounded-circle",style:{width:"200px",height:"200px"}})}),i.jsx("div",{className:"d-flex flex-wrap justify-content-center gap-3",children:Array.from({length:5}).map((h,p)=>i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsx("div",{className:"skeleton-element rounded-circle",style:{width:"10px",height:"10px"}}),i.jsx("div",{className:"skeleton-element",style:{width:"80px",height:"1rem"}})]},`legend-skeleton-${p}`))})]})]}):i.jsxs("div",{className:"card card-block card-stretch card-height",children:[i.jsx("div",{className:"card-header",children:i.jsx("h6",{className:"card-title mb-0",children:r("Booking Status","kivicare-clinic-management-system")})}),i.jsxs("div",{className:"card-body",children:[i.jsx("div",{className:"position-relative mb-4",style:{height:"220px"},children:c&&i.jsx(RT,{data:c,options:u,plugins:[m]},`${n?"dark":"light"}`)}),i.jsx("div",{className:"d-flex flex-wrap justify-content-center gap-3",children:Object.entries(o).map(([h,p])=>{const g=a?.data?.status_breakdown?.[h]||0,v=d>0?Math.round(g/d*100):0;return i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsx("span",{className:"rounded-circle",style:{width:"10px",height:"10px",backgroundColor:p.color}}),i.jsx("span",{className:"fw-medium text-heading",children:p.label}),i.jsxs("span",{className:"text-muted",style:{color:"rgba(var(--bs-body-color-rgb), var(--bs-text-opacity))"},children:[g," (",v,"%)"]})]},h)})})]})]})};function Ln(){return{accessor:(t,e)=>typeof t=="function"?{...e,accessorFn:t}:{...e,accessorKey:t},display:t=>t,group:t=>t}}function Jr(t,e){return typeof t=="function"?t(e):t}function Ts(t,e){return n=>{e.setState(s=>({...s,[t]:Jr(n,s[t])}))}}function Ig(t){return t instanceof Function}function bq(t){return Array.isArray(t)&&t.every(e=>typeof e=="number")}function kq(t,e){const n=[],s=a=>{a.forEach(l=>{n.push(l);const o=e(l);o!=null&&o.length&&s(o)})};return s(t),n}function Vt(t,e,n){let s=[],a;return l=>{let o;n.key&&n.debug&&(o=Date.now());const c=t(l);if(!(c.length!==s.length||c.some((u,h)=>s[h]!==u)))return a;s=c;let m;if(n.key&&n.debug&&(m=Date.now()),a=e(...c),n==null||n.onChange==null||n.onChange(a),n.key&&n.debug&&n!=null&&n.debug()){const u=Math.round((Date.now()-o)*100)/100,h=Math.round((Date.now()-m)*100)/100,p=h/16,g=(v,x)=>{for(v=String(v);v.length<x;)v=" "+v;return v};console.info(`%c ${g(h,5)} /${g(u,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*p,120))}deg 100% 31%);`,n?.key)}return a}}function Ut(t,e,n,s){return{debug:()=>{var a;return(a=t?.debugAll)!=null?a:t[e]},key:!1,onChange:s}}function wq(t,e,n,s){const a=()=>{var o;return(o=l.getValue())!=null?o:t.options.renderFallbackValue},l={id:`${e.id}_${n.id}`,row:e,column:n,getValue:()=>e.getValue(s),renderValue:a,getContext:Vt(()=>[t,n,e,l],(o,c,d,m)=>({table:o,column:c,row:d,cell:m,getValue:m.getValue,renderValue:m.renderValue}),Ut(t.options,"debugCells"))};return t._features.forEach(o=>{o.createCell==null||o.createCell(l,n,e,t)},{}),l}function jq(t,e,n,s){var a,l;const c={...t._getDefaultColumnDef(),...e},d=c.accessorKey;let m=(a=(l=c.id)!=null?l:d?typeof String.prototype.replaceAll=="function"?d.replaceAll(".","_"):d.replace(/\./g,"_"):void 0)!=null?a:typeof c.header=="string"?c.header:void 0,u;if(c.accessorFn?u=c.accessorFn:d&&(d.includes(".")?u=p=>{let g=p;for(const x of d.split(".")){var v;g=(v=g)==null?void 0:v[x]}return g}:u=p=>p[c.accessorKey]),!m)throw new Error;let h={id:`${String(m)}`,accessorFn:u,parent:s,depth:n,columnDef:c,columns:[],getFlatColumns:Vt(()=>[!0],()=>{var p;return[h,...(p=h.columns)==null?void 0:p.flatMap(g=>g.getFlatColumns())]},Ut(t.options,"debugColumns")),getLeafColumns:Vt(()=>[t._getOrderColumnsFn()],p=>{var g;if((g=h.columns)!=null&&g.length){let v=h.columns.flatMap(x=>x.getLeafColumns());return p(v)}return[h]},Ut(t.options,"debugColumns"))};for(const p of t._features)p.createColumn==null||p.createColumn(h,t);return h}const Ti="debugHeaders";function WN(t,e,n){var s;let l={id:(s=n.id)!=null?s:e.id,column:e,index:n.index,isPlaceholder:!!n.isPlaceholder,placeholderId:n.placeholderId,depth:n.depth,subHeaders:[],colSpan:0,rowSpan:0,headerGroup:null,getLeafHeaders:()=>{const o=[],c=d=>{d.subHeaders&&d.subHeaders.length&&d.subHeaders.map(c),o.push(d)};return c(l),o},getContext:()=>({table:t,header:l,column:e})};return t._features.forEach(o=>{o.createHeader==null||o.createHeader(l,t)}),l}const Nq={createTable:t=>{t.getHeaderGroups=Vt(()=>[t.getAllColumns(),t.getVisibleLeafColumns(),t.getState().columnPinning.left,t.getState().columnPinning.right],(e,n,s,a)=>{var l,o;const c=(l=s?.map(h=>n.find(p=>p.id===h)).filter(Boolean))!=null?l:[],d=(o=a?.map(h=>n.find(p=>p.id===h)).filter(Boolean))!=null?o:[],m=n.filter(h=>!(s!=null&&s.includes(h.id))&&!(a!=null&&a.includes(h.id)));return nh(e,[...c,...m,...d],t)},Ut(t.options,Ti)),t.getCenterHeaderGroups=Vt(()=>[t.getAllColumns(),t.getVisibleLeafColumns(),t.getState().columnPinning.left,t.getState().columnPinning.right],(e,n,s,a)=>(n=n.filter(l=>!(s!=null&&s.includes(l.id))&&!(a!=null&&a.includes(l.id))),nh(e,n,t,"center")),Ut(t.options,Ti)),t.getLeftHeaderGroups=Vt(()=>[t.getAllColumns(),t.getVisibleLeafColumns(),t.getState().columnPinning.left],(e,n,s)=>{var a;const l=(a=s?.map(o=>n.find(c=>c.id===o)).filter(Boolean))!=null?a:[];return nh(e,l,t,"left")},Ut(t.options,Ti)),t.getRightHeaderGroups=Vt(()=>[t.getAllColumns(),t.getVisibleLeafColumns(),t.getState().columnPinning.right],(e,n,s)=>{var a;const l=(a=s?.map(o=>n.find(c=>c.id===o)).filter(Boolean))!=null?a:[];return nh(e,l,t,"right")},Ut(t.options,Ti)),t.getFooterGroups=Vt(()=>[t.getHeaderGroups()],e=>[...e].reverse(),Ut(t.options,Ti)),t.getLeftFooterGroups=Vt(()=>[t.getLeftHeaderGroups()],e=>[...e].reverse(),Ut(t.options,Ti)),t.getCenterFooterGroups=Vt(()=>[t.getCenterHeaderGroups()],e=>[...e].reverse(),Ut(t.options,Ti)),t.getRightFooterGroups=Vt(()=>[t.getRightHeaderGroups()],e=>[...e].reverse(),Ut(t.options,Ti)),t.getFlatHeaders=Vt(()=>[t.getHeaderGroups()],e=>e.map(n=>n.headers).flat(),Ut(t.options,Ti)),t.getLeftFlatHeaders=Vt(()=>[t.getLeftHeaderGroups()],e=>e.map(n=>n.headers).flat(),Ut(t.options,Ti)),t.getCenterFlatHeaders=Vt(()=>[t.getCenterHeaderGroups()],e=>e.map(n=>n.headers).flat(),Ut(t.options,Ti)),t.getRightFlatHeaders=Vt(()=>[t.getRightHeaderGroups()],e=>e.map(n=>n.headers).flat(),Ut(t.options,Ti)),t.getCenterLeafHeaders=Vt(()=>[t.getCenterFlatHeaders()],e=>e.filter(n=>{var s;return!((s=n.subHeaders)!=null&&s.length)}),Ut(t.options,Ti)),t.getLeftLeafHeaders=Vt(()=>[t.getLeftFlatHeaders()],e=>e.filter(n=>{var s;return!((s=n.subHeaders)!=null&&s.length)}),Ut(t.options,Ti)),t.getRightLeafHeaders=Vt(()=>[t.getRightFlatHeaders()],e=>e.filter(n=>{var s;return!((s=n.subHeaders)!=null&&s.length)}),Ut(t.options,Ti)),t.getLeafHeaders=Vt(()=>[t.getLeftHeaderGroups(),t.getCenterHeaderGroups(),t.getRightHeaderGroups()],(e,n,s)=>{var a,l,o,c,d,m;return[...(a=(l=e[0])==null?void 0:l.headers)!=null?a:[],...(o=(c=n[0])==null?void 0:c.headers)!=null?o:[],...(d=(m=s[0])==null?void 0:m.headers)!=null?d:[]].map(u=>u.getLeafHeaders()).flat()},Ut(t.options,Ti))}};function nh(t,e,n,s){var a,l;let o=0;const c=function(p,g){g===void 0&&(g=1),o=Math.max(o,g),p.filter(v=>v.getIsVisible()).forEach(v=>{var x;(x=v.columns)!=null&&x.length&&c(v.columns,g+1)},0)};c(t);let d=[];const m=(p,g)=>{const v={depth:g,id:[s,`${g}`].filter(Boolean).join("_"),headers:[]},x=[];p.forEach(y=>{const b=[...x].reverse()[0],k=y.column.depth===v.depth;let w,T=!1;if(k&&y.column.parent?w=y.column.parent:(w=y.column,T=!0),b&&b?.column===w)b.subHeaders.push(y);else{const j=WN(n,w,{id:[s,g,w.id,y?.id].filter(Boolean).join("_"),isPlaceholder:T,placeholderId:T?`${x.filter(D=>D.column===w).length}`:void 0,depth:g,index:x.length});j.subHeaders.push(y),x.push(j)}v.headers.push(y),y.headerGroup=v}),d.push(v),g>0&&m(x,g-1)},u=e.map((p,g)=>WN(n,p,{depth:o,index:g}));m(u,o-1),d.reverse();const h=p=>p.filter(v=>v.column.getIsVisible()).map(v=>{let x=0,y=0,b=[0];v.subHeaders&&v.subHeaders.length?(b=[],h(v.subHeaders).forEach(w=>{let{colSpan:T,rowSpan:j}=w;x+=T,b.push(j)})):x=1;const k=Math.min(...b);return y=y+k,v.colSpan=x,v.rowSpan=y,{colSpan:x,rowSpan:y}});return h((a=(l=d[0])==null?void 0:l.headers)!=null?a:[]),d}const kk=(t,e,n,s,a,l,o)=>{let c={id:e,index:s,original:n,depth:a,parentId:o,_valuesCache:{},_uniqueValuesCache:{},getValue:d=>{if(c._valuesCache.hasOwnProperty(d))return c._valuesCache[d];const m=t.getColumn(d);if(m!=null&&m.accessorFn)return c._valuesCache[d]=m.accessorFn(c.original,s),c._valuesCache[d]},getUniqueValues:d=>{if(c._uniqueValuesCache.hasOwnProperty(d))return c._uniqueValuesCache[d];const m=t.getColumn(d);if(m!=null&&m.accessorFn)return m.columnDef.getUniqueValues?(c._uniqueValuesCache[d]=m.columnDef.getUniqueValues(c.original,s),c._uniqueValuesCache[d]):(c._uniqueValuesCache[d]=[c.getValue(d)],c._uniqueValuesCache[d])},renderValue:d=>{var m;return(m=c.getValue(d))!=null?m:t.options.renderFallbackValue},subRows:[],getLeafRows:()=>kq(c.subRows,d=>d.subRows),getParentRow:()=>c.parentId?t.getRow(c.parentId,!0):void 0,getParentRows:()=>{let d=[],m=c;for(;;){const u=m.getParentRow();if(!u)break;d.push(u),m=u}return d.reverse()},getAllCells:Vt(()=>[t.getAllLeafColumns()],d=>d.map(m=>wq(t,c,m,m.id)),Ut(t.options,"debugRows")),_getAllCellsByColumnId:Vt(()=>[c.getAllCells()],d=>d.reduce((m,u)=>(m[u.column.id]=u,m),{}),Ut(t.options,"debugRows"))};for(let d=0;d<t._features.length;d++){const m=t._features[d];m==null||m.createRow==null||m.createRow(c,t)}return c},Cq={createColumn:(t,e)=>{t._getFacetedRowModel=e.options.getFacetedRowModel&&e.options.getFacetedRowModel(e,t.id),t.getFacetedRowModel=()=>t._getFacetedRowModel?t._getFacetedRowModel():e.getPreFilteredRowModel(),t._getFacetedUniqueValues=e.options.getFacetedUniqueValues&&e.options.getFacetedUniqueValues(e,t.id),t.getFacetedUniqueValues=()=>t._getFacetedUniqueValues?t._getFacetedUniqueValues():new Map,t._getFacetedMinMaxValues=e.options.getFacetedMinMaxValues&&e.options.getFacetedMinMaxValues(e,t.id),t.getFacetedMinMaxValues=()=>{if(t._getFacetedMinMaxValues)return t._getFacetedMinMaxValues()}}},PT=(t,e,n)=>{var s,a;const l=n==null||(s=n.toString())==null?void 0:s.toLowerCase();return!!(!((a=t.getValue(e))==null||(a=a.toString())==null||(a=a.toLowerCase())==null)&&a.includes(l))};PT.autoRemove=t=>ha(t);const MT=(t,e,n)=>{var s;return!!(!((s=t.getValue(e))==null||(s=s.toString())==null)&&s.includes(n))};MT.autoRemove=t=>ha(t);const IT=(t,e,n)=>{var s;return((s=t.getValue(e))==null||(s=s.toString())==null?void 0:s.toLowerCase())===n?.toLowerCase()};IT.autoRemove=t=>ha(t);const OT=(t,e,n)=>{var s;return(s=t.getValue(e))==null?void 0:s.includes(n)};OT.autoRemove=t=>ha(t);const FT=(t,e,n)=>!n.some(s=>{var a;return!((a=t.getValue(e))!=null&&a.includes(s))});FT.autoRemove=t=>ha(t)||!(t!=null&&t.length);const LT=(t,e,n)=>n.some(s=>{var a;return(a=t.getValue(e))==null?void 0:a.includes(s)});LT.autoRemove=t=>ha(t)||!(t!=null&&t.length);const $T=(t,e,n)=>t.getValue(e)===n;$T.autoRemove=t=>ha(t);const BT=(t,e,n)=>t.getValue(e)==n;BT.autoRemove=t=>ha(t);const wk=(t,e,n)=>{let[s,a]=n;const l=t.getValue(e);return l>=s&&l<=a};wk.resolveFilterValue=t=>{let[e,n]=t,s=typeof e!="number"?parseFloat(e):e,a=typeof n!="number"?parseFloat(n):n,l=e===null||Number.isNaN(s)?-1/0:s,o=n===null||Number.isNaN(a)?1/0:a;if(l>o){const c=l;l=o,o=c}return[l,o]};wk.autoRemove=t=>ha(t)||ha(t[0])&&ha(t[1]);const dr={includesString:PT,includesStringSensitive:MT,equalsString:IT,arrIncludes:OT,arrIncludesAll:FT,arrIncludesSome:LT,equals:$T,weakEquals:BT,inNumberRange:wk};function ha(t){return t==null||t===""}const _q={getDefaultColumnDef:()=>({filterFn:"auto"}),getInitialState:t=>({columnFilters:[],...t}),getDefaultOptions:t=>({onColumnFiltersChange:Ts("columnFilters",t),filterFromLeafRows:!1,maxLeafRowFilterDepth:100}),createColumn:(t,e)=>{t.getAutoFilterFn=()=>{const n=e.getCoreRowModel().flatRows[0],s=n?.getValue(t.id);return typeof s=="string"?dr.includesString:typeof s=="number"?dr.inNumberRange:typeof s=="boolean"||s!==null&&typeof s=="object"?dr.equals:Array.isArray(s)?dr.arrIncludes:dr.weakEquals},t.getFilterFn=()=>{var n,s;return Ig(t.columnDef.filterFn)?t.columnDef.filterFn:t.columnDef.filterFn==="auto"?t.getAutoFilterFn():(n=(s=e.options.filterFns)==null?void 0:s[t.columnDef.filterFn])!=null?n:dr[t.columnDef.filterFn]},t.getCanFilter=()=>{var n,s,a;return((n=t.columnDef.enableColumnFilter)!=null?n:!0)&&((s=e.options.enableColumnFilters)!=null?s:!0)&&((a=e.options.enableFilters)!=null?a:!0)&&!!t.accessorFn},t.getIsFiltered=()=>t.getFilterIndex()>-1,t.getFilterValue=()=>{var n;return(n=e.getState().columnFilters)==null||(n=n.find(s=>s.id===t.id))==null?void 0:n.value},t.getFilterIndex=()=>{var n,s;return(n=(s=e.getState().columnFilters)==null?void 0:s.findIndex(a=>a.id===t.id))!=null?n:-1},t.setFilterValue=n=>{e.setColumnFilters(s=>{const a=t.getFilterFn(),l=s?.find(u=>u.id===t.id),o=Jr(n,l?l.value:void 0);if(KN(a,o,t)){var c;return(c=s?.filter(u=>u.id!==t.id))!=null?c:[]}const d={id:t.id,value:o};if(l){var m;return(m=s?.map(u=>u.id===t.id?d:u))!=null?m:[]}return s!=null&&s.length?[...s,d]:[d]})}},createRow:(t,e)=>{t.columnFilters={},t.columnFiltersMeta={}},createTable:t=>{t.setColumnFilters=e=>{const n=t.getAllLeafColumns(),s=a=>{var l;return(l=Jr(e,a))==null?void 0:l.filter(o=>{const c=n.find(d=>d.id===o.id);if(c){const d=c.getFilterFn();if(KN(d,o.value,c))return!1}return!0})};t.options.onColumnFiltersChange==null||t.options.onColumnFiltersChange(s)},t.resetColumnFilters=e=>{var n,s;t.setColumnFilters(e?[]:(n=(s=t.initialState)==null?void 0:s.columnFilters)!=null?n:[])},t.getPreFilteredRowModel=()=>t.getCoreRowModel(),t.getFilteredRowModel=()=>(!t._getFilteredRowModel&&t.options.getFilteredRowModel&&(t._getFilteredRowModel=t.options.getFilteredRowModel(t)),t.options.manualFiltering||!t._getFilteredRowModel?t.getPreFilteredRowModel():t._getFilteredRowModel())}};function KN(t,e,n){return(t&&t.autoRemove?t.autoRemove(e,n):!1)||typeof e>"u"||typeof e=="string"&&!e}const Sq=(t,e,n)=>n.reduce((s,a)=>{const l=a.getValue(t);return s+(typeof l=="number"?l:0)},0),Eq=(t,e,n)=>{let s;return n.forEach(a=>{const l=a.getValue(t);l!=null&&(s>l||s===void 0&&l>=l)&&(s=l)}),s},Tq=(t,e,n)=>{let s;return n.forEach(a=>{const l=a.getValue(t);l!=null&&(s<l||s===void 0&&l>=l)&&(s=l)}),s},Aq=(t,e,n)=>{let s,a;return n.forEach(l=>{const o=l.getValue(t);o!=null&&(s===void 0?o>=o&&(s=a=o):(s>o&&(s=o),a<o&&(a=o)))}),[s,a]},Dq=(t,e)=>{let n=0,s=0;if(e.forEach(a=>{let l=a.getValue(t);l!=null&&(l=+l)>=l&&(++n,s+=l)}),n)return s/n},Rq=(t,e)=>{if(!e.length)return;const n=e.map(l=>l.getValue(t));if(!bq(n))return;if(n.length===1)return n[0];const s=Math.floor(n.length/2),a=n.sort((l,o)=>l-o);return n.length%2!==0?a[s]:(a[s-1]+a[s])/2},Pq=(t,e)=>Array.from(new Set(e.map(n=>n.getValue(t))).values()),Mq=(t,e)=>new Set(e.map(n=>n.getValue(t))).size,Iq=(t,e)=>e.length,wv={sum:Sq,min:Eq,max:Tq,extent:Aq,mean:Dq,median:Rq,unique:Pq,uniqueCount:Mq,count:Iq},Oq={getDefaultColumnDef:()=>({aggregatedCell:t=>{var e,n;return(e=(n=t.getValue())==null||n.toString==null?void 0:n.toString())!=null?e:null},aggregationFn:"auto"}),getInitialState:t=>({grouping:[],...t}),getDefaultOptions:t=>({onGroupingChange:Ts("grouping",t),groupedColumnMode:"reorder"}),createColumn:(t,e)=>{t.toggleGrouping=()=>{e.setGrouping(n=>n!=null&&n.includes(t.id)?n.filter(s=>s!==t.id):[...n??[],t.id])},t.getCanGroup=()=>{var n,s;return((n=t.columnDef.enableGrouping)!=null?n:!0)&&((s=e.options.enableGrouping)!=null?s:!0)&&(!!t.accessorFn||!!t.columnDef.getGroupingValue)},t.getIsGrouped=()=>{var n;return(n=e.getState().grouping)==null?void 0:n.includes(t.id)},t.getGroupedIndex=()=>{var n;return(n=e.getState().grouping)==null?void 0:n.indexOf(t.id)},t.getToggleGroupingHandler=()=>{const n=t.getCanGroup();return()=>{n&&t.toggleGrouping()}},t.getAutoAggregationFn=()=>{const n=e.getCoreRowModel().flatRows[0],s=n?.getValue(t.id);if(typeof s=="number")return wv.sum;if(Object.prototype.toString.call(s)==="[object Date]")return wv.extent},t.getAggregationFn=()=>{var n,s;if(!t)throw new Error;return Ig(t.columnDef.aggregationFn)?t.columnDef.aggregationFn:t.columnDef.aggregationFn==="auto"?t.getAutoAggregationFn():(n=(s=e.options.aggregationFns)==null?void 0:s[t.columnDef.aggregationFn])!=null?n:wv[t.columnDef.aggregationFn]}},createTable:t=>{t.setGrouping=e=>t.options.onGroupingChange==null?void 0:t.options.onGroupingChange(e),t.resetGrouping=e=>{var n,s;t.setGrouping(e?[]:(n=(s=t.initialState)==null?void 0:s.grouping)!=null?n:[])},t.getPreGroupedRowModel=()=>t.getFilteredRowModel(),t.getGroupedRowModel=()=>(!t._getGroupedRowModel&&t.options.getGroupedRowModel&&(t._getGroupedRowModel=t.options.getGroupedRowModel(t)),t.options.manualGrouping||!t._getGroupedRowModel?t.getPreGroupedRowModel():t._getGroupedRowModel())},createRow:(t,e)=>{t.getIsGrouped=()=>!!t.groupingColumnId,t.getGroupingValue=n=>{if(t._groupingValuesCache.hasOwnProperty(n))return t._groupingValuesCache[n];const s=e.getColumn(n);return s!=null&&s.columnDef.getGroupingValue?(t._groupingValuesCache[n]=s.columnDef.getGroupingValue(t.original),t._groupingValuesCache[n]):t.getValue(n)},t._groupingValuesCache={}},createCell:(t,e,n,s)=>{t.getIsGrouped=()=>e.getIsGrouped()&&e.id===n.groupingColumnId,t.getIsPlaceholder=()=>!t.getIsGrouped()&&e.getIsGrouped(),t.getIsAggregated=()=>{var a;return!t.getIsGrouped()&&!t.getIsPlaceholder()&&!!((a=n.subRows)!=null&&a.length)}}};function Fq(t,e,n){if(!(e!=null&&e.length)||!n)return t;const s=t.filter(l=>!e.includes(l.id));return n==="remove"?s:[...e.map(l=>t.find(o=>o.id===l)).filter(Boolean),...s]}const Lq={getInitialState:t=>({columnOrder:[],...t}),getDefaultOptions:t=>({onColumnOrderChange:Ts("columnOrder",t)}),createColumn:(t,e)=>{t.getIndex=Vt(n=>[sm(e,n)],n=>n.findIndex(s=>s.id===t.id),Ut(e.options,"debugColumns")),t.getIsFirstColumn=n=>{var s;return((s=sm(e,n)[0])==null?void 0:s.id)===t.id},t.getIsLastColumn=n=>{var s;const a=sm(e,n);return((s=a[a.length-1])==null?void 0:s.id)===t.id}},createTable:t=>{t.setColumnOrder=e=>t.options.onColumnOrderChange==null?void 0:t.options.onColumnOrderChange(e),t.resetColumnOrder=e=>{var n;t.setColumnOrder(e?[]:(n=t.initialState.columnOrder)!=null?n:[])},t._getOrderColumnsFn=Vt(()=>[t.getState().columnOrder,t.getState().grouping,t.options.groupedColumnMode],(e,n,s)=>a=>{let l=[];if(!(e!=null&&e.length))l=a;else{const o=[...e],c=[...a];for(;c.length&&o.length;){const d=o.shift(),m=c.findIndex(u=>u.id===d);m>-1&&l.push(c.splice(m,1)[0])}l=[...l,...c]}return Fq(l,n,s)},Ut(t.options,"debugTable"))}},jv=()=>({left:[],right:[]}),$q={getInitialState:t=>({columnPinning:jv(),...t}),getDefaultOptions:t=>({onColumnPinningChange:Ts("columnPinning",t)}),createColumn:(t,e)=>{t.pin=n=>{const s=t.getLeafColumns().map(a=>a.id).filter(Boolean);e.setColumnPinning(a=>{var l,o;if(n==="right"){var c,d;return{left:((c=a?.left)!=null?c:[]).filter(h=>!(s!=null&&s.includes(h))),right:[...((d=a?.right)!=null?d:[]).filter(h=>!(s!=null&&s.includes(h))),...s]}}if(n==="left"){var m,u;return{left:[...((m=a?.left)!=null?m:[]).filter(h=>!(s!=null&&s.includes(h))),...s],right:((u=a?.right)!=null?u:[]).filter(h=>!(s!=null&&s.includes(h)))}}return{left:((l=a?.left)!=null?l:[]).filter(h=>!(s!=null&&s.includes(h))),right:((o=a?.right)!=null?o:[]).filter(h=>!(s!=null&&s.includes(h)))}})},t.getCanPin=()=>t.getLeafColumns().some(s=>{var a,l,o;return((a=s.columnDef.enablePinning)!=null?a:!0)&&((l=(o=e.options.enableColumnPinning)!=null?o:e.options.enablePinning)!=null?l:!0)}),t.getIsPinned=()=>{const n=t.getLeafColumns().map(c=>c.id),{left:s,right:a}=e.getState().columnPinning,l=n.some(c=>s?.includes(c)),o=n.some(c=>a?.includes(c));return l?"left":o?"right":!1},t.getPinnedIndex=()=>{var n,s;const a=t.getIsPinned();return a?(n=(s=e.getState().columnPinning)==null||(s=s[a])==null?void 0:s.indexOf(t.id))!=null?n:-1:0}},createRow:(t,e)=>{t.getCenterVisibleCells=Vt(()=>[t._getAllVisibleCells(),e.getState().columnPinning.left,e.getState().columnPinning.right],(n,s,a)=>{const l=[...s??[],...a??[]];return n.filter(o=>!l.includes(o.column.id))},Ut(e.options,"debugRows")),t.getLeftVisibleCells=Vt(()=>[t._getAllVisibleCells(),e.getState().columnPinning.left],(n,s)=>(s??[]).map(l=>n.find(o=>o.column.id===l)).filter(Boolean).map(l=>({...l,position:"left"})),Ut(e.options,"debugRows")),t.getRightVisibleCells=Vt(()=>[t._getAllVisibleCells(),e.getState().columnPinning.right],(n,s)=>(s??[]).map(l=>n.find(o=>o.column.id===l)).filter(Boolean).map(l=>({...l,position:"right"})),Ut(e.options,"debugRows"))},createTable:t=>{t.setColumnPinning=e=>t.options.onColumnPinningChange==null?void 0:t.options.onColumnPinningChange(e),t.resetColumnPinning=e=>{var n,s;return t.setColumnPinning(e?jv():(n=(s=t.initialState)==null?void 0:s.columnPinning)!=null?n:jv())},t.getIsSomeColumnsPinned=e=>{var n;const s=t.getState().columnPinning;if(!e){var a,l;return!!((a=s.left)!=null&&a.length||(l=s.right)!=null&&l.length)}return!!((n=s[e])!=null&&n.length)},t.getLeftLeafColumns=Vt(()=>[t.getAllLeafColumns(),t.getState().columnPinning.left],(e,n)=>(n??[]).map(s=>e.find(a=>a.id===s)).filter(Boolean),Ut(t.options,"debugColumns")),t.getRightLeafColumns=Vt(()=>[t.getAllLeafColumns(),t.getState().columnPinning.right],(e,n)=>(n??[]).map(s=>e.find(a=>a.id===s)).filter(Boolean),Ut(t.options,"debugColumns")),t.getCenterLeafColumns=Vt(()=>[t.getAllLeafColumns(),t.getState().columnPinning.left,t.getState().columnPinning.right],(e,n,s)=>{const a=[...n??[],...s??[]];return e.filter(l=>!a.includes(l.id))},Ut(t.options,"debugColumns"))}};function Bq(t){return t||(typeof document<"u"?document:null)}const ih={size:150,minSize:20,maxSize:Number.MAX_SAFE_INTEGER},Nv=()=>({startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,isResizingColumn:!1,columnSizingStart:[]}),qq={getDefaultColumnDef:()=>ih,getInitialState:t=>({columnSizing:{},columnSizingInfo:Nv(),...t}),getDefaultOptions:t=>({columnResizeMode:"onEnd",columnResizeDirection:"ltr",onColumnSizingChange:Ts("columnSizing",t),onColumnSizingInfoChange:Ts("columnSizingInfo",t)}),createColumn:(t,e)=>{t.getSize=()=>{var n,s,a;const l=e.getState().columnSizing[t.id];return Math.min(Math.max((n=t.columnDef.minSize)!=null?n:ih.minSize,(s=l??t.columnDef.size)!=null?s:ih.size),(a=t.columnDef.maxSize)!=null?a:ih.maxSize)},t.getStart=Vt(n=>[n,sm(e,n),e.getState().columnSizing],(n,s)=>s.slice(0,t.getIndex(n)).reduce((a,l)=>a+l.getSize(),0),Ut(e.options,"debugColumns")),t.getAfter=Vt(n=>[n,sm(e,n),e.getState().columnSizing],(n,s)=>s.slice(t.getIndex(n)+1).reduce((a,l)=>a+l.getSize(),0),Ut(e.options,"debugColumns")),t.resetSize=()=>{e.setColumnSizing(n=>{let{[t.id]:s,...a}=n;return a})},t.getCanResize=()=>{var n,s;return((n=t.columnDef.enableResizing)!=null?n:!0)&&((s=e.options.enableColumnResizing)!=null?s:!0)},t.getIsResizing=()=>e.getState().columnSizingInfo.isResizingColumn===t.id},createHeader:(t,e)=>{t.getSize=()=>{let n=0;const s=a=>{if(a.subHeaders.length)a.subHeaders.forEach(s);else{var l;n+=(l=a.column.getSize())!=null?l:0}};return s(t),n},t.getStart=()=>{if(t.index>0){const n=t.headerGroup.headers[t.index-1];return n.getStart()+n.getSize()}return 0},t.getResizeHandler=n=>{const s=e.getColumn(t.column.id),a=s?.getCanResize();return l=>{if(!s||!a||(l.persist==null||l.persist(),Cv(l)&&l.touches&&l.touches.length>1))return;const o=t.getSize(),c=t?t.getLeafHeaders().map(b=>[b.column.id,b.column.getSize()]):[[s.id,s.getSize()]],d=Cv(l)?Math.round(l.touches[0].clientX):l.clientX,m={},u=(b,k)=>{typeof k=="number"&&(e.setColumnSizingInfo(w=>{var T,j;const D=e.options.columnResizeDirection==="rtl"?-1:1,_=(k-((T=w?.startOffset)!=null?T:0))*D,N=Math.max(_/((j=w?.startSize)!=null?j:0),-.999999);return w.columnSizingStart.forEach(A=>{let[P,E]=A;m[P]=Math.round(Math.max(E+E*N,0)*100)/100}),{...w,deltaOffset:_,deltaPercentage:N}}),(e.options.columnResizeMode==="onChange"||b==="end")&&e.setColumnSizing(w=>({...w,...m})))},h=b=>u("move",b),p=b=>{u("end",b),e.setColumnSizingInfo(k=>({...k,isResizingColumn:!1,startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,columnSizingStart:[]}))},g=Bq(n),v={moveHandler:b=>h(b.clientX),upHandler:b=>{g?.removeEventListener("mousemove",v.moveHandler),g?.removeEventListener("mouseup",v.upHandler),p(b.clientX)}},x={moveHandler:b=>(b.cancelable&&(b.preventDefault(),b.stopPropagation()),h(b.touches[0].clientX),!1),upHandler:b=>{var k;g?.removeEventListener("touchmove",x.moveHandler),g?.removeEventListener("touchend",x.upHandler),b.cancelable&&(b.preventDefault(),b.stopPropagation()),p((k=b.touches[0])==null?void 0:k.clientX)}},y=Hq()?{passive:!1}:!1;Cv(l)?(g?.addEventListener("touchmove",x.moveHandler,y),g?.addEventListener("touchend",x.upHandler,y)):(g?.addEventListener("mousemove",v.moveHandler,y),g?.addEventListener("mouseup",v.upHandler,y)),e.setColumnSizingInfo(b=>({...b,startOffset:d,startSize:o,deltaOffset:0,deltaPercentage:0,columnSizingStart:c,isResizingColumn:s.id}))}}},createTable:t=>{t.setColumnSizing=e=>t.options.onColumnSizingChange==null?void 0:t.options.onColumnSizingChange(e),t.setColumnSizingInfo=e=>t.options.onColumnSizingInfoChange==null?void 0:t.options.onColumnSizingInfoChange(e),t.resetColumnSizing=e=>{var n;t.setColumnSizing(e?{}:(n=t.initialState.columnSizing)!=null?n:{})},t.resetHeaderSizeInfo=e=>{var n;t.setColumnSizingInfo(e?Nv():(n=t.initialState.columnSizingInfo)!=null?n:Nv())},t.getTotalSize=()=>{var e,n;return(e=(n=t.getHeaderGroups()[0])==null?void 0:n.headers.reduce((s,a)=>s+a.getSize(),0))!=null?e:0},t.getLeftTotalSize=()=>{var e,n;return(e=(n=t.getLeftHeaderGroups()[0])==null?void 0:n.headers.reduce((s,a)=>s+a.getSize(),0))!=null?e:0},t.getCenterTotalSize=()=>{var e,n;return(e=(n=t.getCenterHeaderGroups()[0])==null?void 0:n.headers.reduce((s,a)=>s+a.getSize(),0))!=null?e:0},t.getRightTotalSize=()=>{var e,n;return(e=(n=t.getRightHeaderGroups()[0])==null?void 0:n.headers.reduce((s,a)=>s+a.getSize(),0))!=null?e:0}}};let sh=null;function Hq(){if(typeof sh=="boolean")return sh;let t=!1;try{const e={get passive(){return t=!0,!1}},n=()=>{};window.addEventListener("test",n,e),window.removeEventListener("test",n)}catch{t=!1}return sh=t,sh}function Cv(t){return t.type==="touchstart"}const zq={getInitialState:t=>({columnVisibility:{},...t}),getDefaultOptions:t=>({onColumnVisibilityChange:Ts("columnVisibility",t)}),createColumn:(t,e)=>{t.toggleVisibility=n=>{t.getCanHide()&&e.setColumnVisibility(s=>({...s,[t.id]:n??!t.getIsVisible()}))},t.getIsVisible=()=>{var n,s;const a=t.columns;return(n=a.length?a.some(l=>l.getIsVisible()):(s=e.getState().columnVisibility)==null?void 0:s[t.id])!=null?n:!0},t.getCanHide=()=>{var n,s;return((n=t.columnDef.enableHiding)!=null?n:!0)&&((s=e.options.enableHiding)!=null?s:!0)},t.getToggleVisibilityHandler=()=>n=>{t.toggleVisibility==null||t.toggleVisibility(n.target.checked)}},createRow:(t,e)=>{t._getAllVisibleCells=Vt(()=>[t.getAllCells(),e.getState().columnVisibility],n=>n.filter(s=>s.column.getIsVisible()),Ut(e.options,"debugRows")),t.getVisibleCells=Vt(()=>[t.getLeftVisibleCells(),t.getCenterVisibleCells(),t.getRightVisibleCells()],(n,s,a)=>[...n,...s,...a],Ut(e.options,"debugRows"))},createTable:t=>{const e=(n,s)=>Vt(()=>[s(),s().filter(a=>a.getIsVisible()).map(a=>a.id).join("_")],a=>a.filter(l=>l.getIsVisible==null?void 0:l.getIsVisible()),Ut(t.options,"debugColumns"));t.getVisibleFlatColumns=e("getVisibleFlatColumns",()=>t.getAllFlatColumns()),t.getVisibleLeafColumns=e("getVisibleLeafColumns",()=>t.getAllLeafColumns()),t.getLeftVisibleLeafColumns=e("getLeftVisibleLeafColumns",()=>t.getLeftLeafColumns()),t.getRightVisibleLeafColumns=e("getRightVisibleLeafColumns",()=>t.getRightLeafColumns()),t.getCenterVisibleLeafColumns=e("getCenterVisibleLeafColumns",()=>t.getCenterLeafColumns()),t.setColumnVisibility=n=>t.options.onColumnVisibilityChange==null?void 0:t.options.onColumnVisibilityChange(n),t.resetColumnVisibility=n=>{var s;t.setColumnVisibility(n?{}:(s=t.initialState.columnVisibility)!=null?s:{})},t.toggleAllColumnsVisible=n=>{var s;n=(s=n)!=null?s:!t.getIsAllColumnsVisible(),t.setColumnVisibility(t.getAllLeafColumns().reduce((a,l)=>({...a,[l.id]:n||!(l.getCanHide!=null&&l.getCanHide())}),{}))},t.getIsAllColumnsVisible=()=>!t.getAllLeafColumns().some(n=>!(n.getIsVisible!=null&&n.getIsVisible())),t.getIsSomeColumnsVisible=()=>t.getAllLeafColumns().some(n=>n.getIsVisible==null?void 0:n.getIsVisible()),t.getToggleAllColumnsVisibilityHandler=()=>n=>{var s;t.toggleAllColumnsVisible((s=n.target)==null?void 0:s.checked)}}};function sm(t,e){return e?e==="center"?t.getCenterVisibleLeafColumns():e==="left"?t.getLeftVisibleLeafColumns():t.getRightVisibleLeafColumns():t.getVisibleLeafColumns()}const Vq={createTable:t=>{t._getGlobalFacetedRowModel=t.options.getFacetedRowModel&&t.options.getFacetedRowModel(t,"__global__"),t.getGlobalFacetedRowModel=()=>t.options.manualFiltering||!t._getGlobalFacetedRowModel?t.getPreFilteredRowModel():t._getGlobalFacetedRowModel(),t._getGlobalFacetedUniqueValues=t.options.getFacetedUniqueValues&&t.options.getFacetedUniqueValues(t,"__global__"),t.getGlobalFacetedUniqueValues=()=>t._getGlobalFacetedUniqueValues?t._getGlobalFacetedUniqueValues():new Map,t._getGlobalFacetedMinMaxValues=t.options.getFacetedMinMaxValues&&t.options.getFacetedMinMaxValues(t,"__global__"),t.getGlobalFacetedMinMaxValues=()=>{if(t._getGlobalFacetedMinMaxValues)return t._getGlobalFacetedMinMaxValues()}}},Uq={getInitialState:t=>({globalFilter:void 0,...t}),getDefaultOptions:t=>({onGlobalFilterChange:Ts("globalFilter",t),globalFilterFn:"auto",getColumnCanGlobalFilter:e=>{var n;const s=(n=t.getCoreRowModel().flatRows[0])==null||(n=n._getAllCellsByColumnId()[e.id])==null?void 0:n.getValue();return typeof s=="string"||typeof s=="number"}}),createColumn:(t,e)=>{t.getCanGlobalFilter=()=>{var n,s,a,l;return((n=t.columnDef.enableGlobalFilter)!=null?n:!0)&&((s=e.options.enableGlobalFilter)!=null?s:!0)&&((a=e.options.enableFilters)!=null?a:!0)&&((l=e.options.getColumnCanGlobalFilter==null?void 0:e.options.getColumnCanGlobalFilter(t))!=null?l:!0)&&!!t.accessorFn}},createTable:t=>{t.getGlobalAutoFilterFn=()=>dr.includesString,t.getGlobalFilterFn=()=>{var e,n;const{globalFilterFn:s}=t.options;return Ig(s)?s:s==="auto"?t.getGlobalAutoFilterFn():(e=(n=t.options.filterFns)==null?void 0:n[s])!=null?e:dr[s]},t.setGlobalFilter=e=>{t.options.onGlobalFilterChange==null||t.options.onGlobalFilterChange(e)},t.resetGlobalFilter=e=>{t.setGlobalFilter(e?void 0:t.initialState.globalFilter)}}},Wq={getInitialState:t=>({expanded:{},...t}),getDefaultOptions:t=>({onExpandedChange:Ts("expanded",t),paginateExpandedRows:!0}),createTable:t=>{let e=!1,n=!1;t._autoResetExpanded=()=>{var s,a;if(!e){t._queue(()=>{e=!0});return}if((s=(a=t.options.autoResetAll)!=null?a:t.options.autoResetExpanded)!=null?s:!t.options.manualExpanding){if(n)return;n=!0,t._queue(()=>{t.resetExpanded(),n=!1})}},t.setExpanded=s=>t.options.onExpandedChange==null?void 0:t.options.onExpandedChange(s),t.toggleAllRowsExpanded=s=>{s??!t.getIsAllRowsExpanded()?t.setExpanded(!0):t.setExpanded({})},t.resetExpanded=s=>{var a,l;t.setExpanded(s?{}:(a=(l=t.initialState)==null?void 0:l.expanded)!=null?a:{})},t.getCanSomeRowsExpand=()=>t.getPrePaginationRowModel().flatRows.some(s=>s.getCanExpand()),t.getToggleAllRowsExpandedHandler=()=>s=>{s.persist==null||s.persist(),t.toggleAllRowsExpanded()},t.getIsSomeRowsExpanded=()=>{const s=t.getState().expanded;return s===!0||Object.values(s).some(Boolean)},t.getIsAllRowsExpanded=()=>{const s=t.getState().expanded;return typeof s=="boolean"?s===!0:!(!Object.keys(s).length||t.getRowModel().flatRows.some(a=>!a.getIsExpanded()))},t.getExpandedDepth=()=>{let s=0;return(t.getState().expanded===!0?Object.keys(t.getRowModel().rowsById):Object.keys(t.getState().expanded)).forEach(l=>{const o=l.split(".");s=Math.max(s,o.length)}),s},t.getPreExpandedRowModel=()=>t.getSortedRowModel(),t.getExpandedRowModel=()=>(!t._getExpandedRowModel&&t.options.getExpandedRowModel&&(t._getExpandedRowModel=t.options.getExpandedRowModel(t)),t.options.manualExpanding||!t._getExpandedRowModel?t.getPreExpandedRowModel():t._getExpandedRowModel())},createRow:(t,e)=>{t.toggleExpanded=n=>{e.setExpanded(s=>{var a;const l=s===!0?!0:!!(s!=null&&s[t.id]);let o={};if(s===!0?Object.keys(e.getRowModel().rowsById).forEach(c=>{o[c]=!0}):o=s,n=(a=n)!=null?a:!l,!l&&n)return{...o,[t.id]:!0};if(l&&!n){const{[t.id]:c,...d}=o;return d}return s})},t.getIsExpanded=()=>{var n;const s=e.getState().expanded;return!!((n=e.options.getIsRowExpanded==null?void 0:e.options.getIsRowExpanded(t))!=null?n:s===!0||s?.[t.id])},t.getCanExpand=()=>{var n,s,a;return(n=e.options.getRowCanExpand==null?void 0:e.options.getRowCanExpand(t))!=null?n:((s=e.options.enableExpanding)!=null?s:!0)&&!!((a=t.subRows)!=null&&a.length)},t.getIsAllParentsExpanded=()=>{let n=!0,s=t;for(;n&&s.parentId;)s=e.getRow(s.parentId,!0),n=s.getIsExpanded();return n},t.getToggleExpandedHandler=()=>{const n=t.getCanExpand();return()=>{n&&t.toggleExpanded()}}}},iy=0,sy=10,_v=()=>({pageIndex:iy,pageSize:sy}),Kq={getInitialState:t=>({...t,pagination:{..._v(),...t?.pagination}}),getDefaultOptions:t=>({onPaginationChange:Ts("pagination",t)}),createTable:t=>{let e=!1,n=!1;t._autoResetPageIndex=()=>{var s,a;if(!e){t._queue(()=>{e=!0});return}if((s=(a=t.options.autoResetAll)!=null?a:t.options.autoResetPageIndex)!=null?s:!t.options.manualPagination){if(n)return;n=!0,t._queue(()=>{t.resetPageIndex(),n=!1})}},t.setPagination=s=>{const a=l=>Jr(s,l);return t.options.onPaginationChange==null?void 0:t.options.onPaginationChange(a)},t.resetPagination=s=>{var a;t.setPagination(s?_v():(a=t.initialState.pagination)!=null?a:_v())},t.setPageIndex=s=>{t.setPagination(a=>{let l=Jr(s,a.pageIndex);const o=typeof t.options.pageCount>"u"||t.options.pageCount===-1?Number.MAX_SAFE_INTEGER:t.options.pageCount-1;return l=Math.max(0,Math.min(l,o)),{...a,pageIndex:l}})},t.resetPageIndex=s=>{var a,l;t.setPageIndex(s?iy:(a=(l=t.initialState)==null||(l=l.pagination)==null?void 0:l.pageIndex)!=null?a:iy)},t.resetPageSize=s=>{var a,l;t.setPageSize(s?sy:(a=(l=t.initialState)==null||(l=l.pagination)==null?void 0:l.pageSize)!=null?a:sy)},t.setPageSize=s=>{t.setPagination(a=>{const l=Math.max(1,Jr(s,a.pageSize)),o=a.pageSize*a.pageIndex,c=Math.floor(o/l);return{...a,pageIndex:c,pageSize:l}})},t.setPageCount=s=>t.setPagination(a=>{var l;let o=Jr(s,(l=t.options.pageCount)!=null?l:-1);return typeof o=="number"&&(o=Math.max(-1,o)),{...a,pageCount:o}}),t.getPageOptions=Vt(()=>[t.getPageCount()],s=>{let a=[];return s&&s>0&&(a=[...new Array(s)].fill(null).map((l,o)=>o)),a},Ut(t.options,"debugTable")),t.getCanPreviousPage=()=>t.getState().pagination.pageIndex>0,t.getCanNextPage=()=>{const{pageIndex:s}=t.getState().pagination,a=t.getPageCount();return a===-1?!0:a===0?!1:s<a-1},t.previousPage=()=>t.setPageIndex(s=>s-1),t.nextPage=()=>t.setPageIndex(s=>s+1),t.firstPage=()=>t.setPageIndex(0),t.lastPage=()=>t.setPageIndex(t.getPageCount()-1),t.getPrePaginationRowModel=()=>t.getExpandedRowModel(),t.getPaginationRowModel=()=>(!t._getPaginationRowModel&&t.options.getPaginationRowModel&&(t._getPaginationRowModel=t.options.getPaginationRowModel(t)),t.options.manualPagination||!t._getPaginationRowModel?t.getPrePaginationRowModel():t._getPaginationRowModel()),t.getPageCount=()=>{var s;return(s=t.options.pageCount)!=null?s:Math.ceil(t.getRowCount()/t.getState().pagination.pageSize)},t.getRowCount=()=>{var s;return(s=t.options.rowCount)!=null?s:t.getPrePaginationRowModel().rows.length}}},Sv=()=>({top:[],bottom:[]}),Gq={getInitialState:t=>({rowPinning:Sv(),...t}),getDefaultOptions:t=>({onRowPinningChange:Ts("rowPinning",t)}),createRow:(t,e)=>{t.pin=(n,s,a)=>{const l=s?t.getLeafRows().map(d=>{let{id:m}=d;return m}):[],o=a?t.getParentRows().map(d=>{let{id:m}=d;return m}):[],c=new Set([...o,t.id,...l]);e.setRowPinning(d=>{var m,u;if(n==="bottom"){var h,p;return{top:((h=d?.top)!=null?h:[]).filter(x=>!(c!=null&&c.has(x))),bottom:[...((p=d?.bottom)!=null?p:[]).filter(x=>!(c!=null&&c.has(x))),...Array.from(c)]}}if(n==="top"){var g,v;return{top:[...((g=d?.top)!=null?g:[]).filter(x=>!(c!=null&&c.has(x))),...Array.from(c)],bottom:((v=d?.bottom)!=null?v:[]).filter(x=>!(c!=null&&c.has(x)))}}return{top:((m=d?.top)!=null?m:[]).filter(x=>!(c!=null&&c.has(x))),bottom:((u=d?.bottom)!=null?u:[]).filter(x=>!(c!=null&&c.has(x)))}})},t.getCanPin=()=>{var n;const{enableRowPinning:s,enablePinning:a}=e.options;return typeof s=="function"?s(t):(n=s??a)!=null?n:!0},t.getIsPinned=()=>{const n=[t.id],{top:s,bottom:a}=e.getState().rowPinning,l=n.some(c=>s?.includes(c)),o=n.some(c=>a?.includes(c));return l?"top":o?"bottom":!1},t.getPinnedIndex=()=>{var n,s;const a=t.getIsPinned();if(!a)return-1;const l=(n=a==="top"?e.getTopRows():e.getBottomRows())==null?void 0:n.map(o=>{let{id:c}=o;return c});return(s=l?.indexOf(t.id))!=null?s:-1}},createTable:t=>{t.setRowPinning=e=>t.options.onRowPinningChange==null?void 0:t.options.onRowPinningChange(e),t.resetRowPinning=e=>{var n,s;return t.setRowPinning(e?Sv():(n=(s=t.initialState)==null?void 0:s.rowPinning)!=null?n:Sv())},t.getIsSomeRowsPinned=e=>{var n;const s=t.getState().rowPinning;if(!e){var a,l;return!!((a=s.top)!=null&&a.length||(l=s.bottom)!=null&&l.length)}return!!((n=s[e])!=null&&n.length)},t._getPinnedRows=(e,n,s)=>{var a;return((a=t.options.keepPinnedRows)==null||a?(n??[]).map(o=>{const c=t.getRow(o,!0);return c.getIsAllParentsExpanded()?c:null}):(n??[]).map(o=>e.find(c=>c.id===o))).filter(Boolean).map(o=>({...o,position:s}))},t.getTopRows=Vt(()=>[t.getRowModel().rows,t.getState().rowPinning.top],(e,n)=>t._getPinnedRows(e,n,"top"),Ut(t.options,"debugRows")),t.getBottomRows=Vt(()=>[t.getRowModel().rows,t.getState().rowPinning.bottom],(e,n)=>t._getPinnedRows(e,n,"bottom"),Ut(t.options,"debugRows")),t.getCenterRows=Vt(()=>[t.getRowModel().rows,t.getState().rowPinning.top,t.getState().rowPinning.bottom],(e,n,s)=>{const a=new Set([...n??[],...s??[]]);return e.filter(l=>!a.has(l.id))},Ut(t.options,"debugRows"))}},Yq={getInitialState:t=>({rowSelection:{},...t}),getDefaultOptions:t=>({onRowSelectionChange:Ts("rowSelection",t),enableRowSelection:!0,enableMultiRowSelection:!0,enableSubRowSelection:!0}),createTable:t=>{t.setRowSelection=e=>t.options.onRowSelectionChange==null?void 0:t.options.onRowSelectionChange(e),t.resetRowSelection=e=>{var n;return t.setRowSelection(e?{}:(n=t.initialState.rowSelection)!=null?n:{})},t.toggleAllRowsSelected=e=>{t.setRowSelection(n=>{e=typeof e<"u"?e:!t.getIsAllRowsSelected();const s={...n},a=t.getPreGroupedRowModel().flatRows;return e?a.forEach(l=>{l.getCanSelect()&&(s[l.id]=!0)}):a.forEach(l=>{delete s[l.id]}),s})},t.toggleAllPageRowsSelected=e=>t.setRowSelection(n=>{const s=typeof e<"u"?e:!t.getIsAllPageRowsSelected(),a={...n};return t.getRowModel().rows.forEach(l=>{ay(a,l.id,s,!0,t)}),a}),t.getPreSelectedRowModel=()=>t.getCoreRowModel(),t.getSelectedRowModel=Vt(()=>[t.getState().rowSelection,t.getCoreRowModel()],(e,n)=>Object.keys(e).length?Ev(t,n):{rows:[],flatRows:[],rowsById:{}},Ut(t.options,"debugTable")),t.getFilteredSelectedRowModel=Vt(()=>[t.getState().rowSelection,t.getFilteredRowModel()],(e,n)=>Object.keys(e).length?Ev(t,n):{rows:[],flatRows:[],rowsById:{}},Ut(t.options,"debugTable")),t.getGroupedSelectedRowModel=Vt(()=>[t.getState().rowSelection,t.getSortedRowModel()],(e,n)=>Object.keys(e).length?Ev(t,n):{rows:[],flatRows:[],rowsById:{}},Ut(t.options,"debugTable")),t.getIsAllRowsSelected=()=>{const e=t.getFilteredRowModel().flatRows,{rowSelection:n}=t.getState();let s=!!(e.length&&Object.keys(n).length);return s&&e.some(a=>a.getCanSelect()&&!n[a.id])&&(s=!1),s},t.getIsAllPageRowsSelected=()=>{const e=t.getPaginationRowModel().flatRows.filter(a=>a.getCanSelect()),{rowSelection:n}=t.getState();let s=!!e.length;return s&&e.some(a=>!n[a.id])&&(s=!1),s},t.getIsSomeRowsSelected=()=>{var e;const n=Object.keys((e=t.getState().rowSelection)!=null?e:{}).length;return n>0&&n<t.getFilteredRowModel().flatRows.length},t.getIsSomePageRowsSelected=()=>{const e=t.getPaginationRowModel().flatRows;return t.getIsAllPageRowsSelected()?!1:e.filter(n=>n.getCanSelect()).some(n=>n.getIsSelected()||n.getIsSomeSelected())},t.getToggleAllRowsSelectedHandler=()=>e=>{t.toggleAllRowsSelected(e.target.checked)},t.getToggleAllPageRowsSelectedHandler=()=>e=>{t.toggleAllPageRowsSelected(e.target.checked)}},createRow:(t,e)=>{t.toggleSelected=(n,s)=>{const a=t.getIsSelected();e.setRowSelection(l=>{var o;if(n=typeof n<"u"?n:!a,t.getCanSelect()&&a===n)return l;const c={...l};return ay(c,t.id,n,(o=s?.selectChildren)!=null?o:!0,e),c})},t.getIsSelected=()=>{const{rowSelection:n}=e.getState();return jk(t,n)},t.getIsSomeSelected=()=>{const{rowSelection:n}=e.getState();return ry(t,n)==="some"},t.getIsAllSubRowsSelected=()=>{const{rowSelection:n}=e.getState();return ry(t,n)==="all"},t.getCanSelect=()=>{var n;return typeof e.options.enableRowSelection=="function"?e.options.enableRowSelection(t):(n=e.options.enableRowSelection)!=null?n:!0},t.getCanSelectSubRows=()=>{var n;return typeof e.options.enableSubRowSelection=="function"?e.options.enableSubRowSelection(t):(n=e.options.enableSubRowSelection)!=null?n:!0},t.getCanMultiSelect=()=>{var n;return typeof e.options.enableMultiRowSelection=="function"?e.options.enableMultiRowSelection(t):(n=e.options.enableMultiRowSelection)!=null?n:!0},t.getToggleSelectedHandler=()=>{const n=t.getCanSelect();return s=>{var a;n&&t.toggleSelected((a=s.target)==null?void 0:a.checked)}}}},ay=(t,e,n,s,a)=>{var l;const o=a.getRow(e,!0);n?(o.getCanMultiSelect()||Object.keys(t).forEach(c=>delete t[c]),o.getCanSelect()&&(t[e]=!0)):delete t[e],s&&(l=o.subRows)!=null&&l.length&&o.getCanSelectSubRows()&&o.subRows.forEach(c=>ay(t,c.id,n,s,a))};function Ev(t,e){const n=t.getState().rowSelection,s=[],a={},l=function(o,c){return o.map(d=>{var m;const u=jk(d,n);if(u&&(s.push(d),a[d.id]=d),(m=d.subRows)!=null&&m.length&&(d={...d,subRows:l(d.subRows)}),u)return d}).filter(Boolean)};return{rows:l(e.rows),flatRows:s,rowsById:a}}function jk(t,e){var n;return(n=e[t.id])!=null?n:!1}function ry(t,e,n){var s;if(!((s=t.subRows)!=null&&s.length))return!1;let a=!0,l=!1;return t.subRows.forEach(o=>{if(!(l&&!a)&&(o.getCanSelect()&&(jk(o,e)?l=!0:a=!1),o.subRows&&o.subRows.length)){const c=ry(o,e);c==="all"?l=!0:(c==="some"&&(l=!0),a=!1)}}),a?"all":l?"some":!1}const ly=/([0-9]+)/gm,Qq=(t,e,n)=>qT(fl(t.getValue(n)).toLowerCase(),fl(e.getValue(n)).toLowerCase()),Zq=(t,e,n)=>qT(fl(t.getValue(n)),fl(e.getValue(n))),Xq=(t,e,n)=>Nk(fl(t.getValue(n)).toLowerCase(),fl(e.getValue(n)).toLowerCase()),Jq=(t,e,n)=>Nk(fl(t.getValue(n)),fl(e.getValue(n))),e7=(t,e,n)=>{const s=t.getValue(n),a=e.getValue(n);return s>a?1:s<a?-1:0},t7=(t,e,n)=>Nk(t.getValue(n),e.getValue(n));function Nk(t,e){return t===e?0:t>e?1:-1}function fl(t){return typeof t=="number"?isNaN(t)||t===1/0||t===-1/0?"":String(t):typeof t=="string"?t:""}function qT(t,e){const n=t.split(ly).filter(Boolean),s=e.split(ly).filter(Boolean);for(;n.length&&s.length;){const a=n.shift(),l=s.shift(),o=parseInt(a,10),c=parseInt(l,10),d=[o,c].sort();if(isNaN(d[0])){if(a>l)return 1;if(l>a)return-1;continue}if(isNaN(d[1]))return isNaN(o)?-1:1;if(o>c)return 1;if(c>o)return-1}return n.length-s.length}const Td={alphanumeric:Qq,alphanumericCaseSensitive:Zq,text:Xq,textCaseSensitive:Jq,datetime:e7,basic:t7},n7={getInitialState:t=>({sorting:[],...t}),getDefaultColumnDef:()=>({sortingFn:"auto",sortUndefined:1}),getDefaultOptions:t=>({onSortingChange:Ts("sorting",t),isMultiSortEvent:e=>e.shiftKey}),createColumn:(t,e)=>{t.getAutoSortingFn=()=>{const n=e.getFilteredRowModel().flatRows.slice(10);let s=!1;for(const a of n){const l=a?.getValue(t.id);if(Object.prototype.toString.call(l)==="[object Date]")return Td.datetime;if(typeof l=="string"&&(s=!0,l.split(ly).length>1))return Td.alphanumeric}return s?Td.text:Td.basic},t.getAutoSortDir=()=>{const n=e.getFilteredRowModel().flatRows[0];return typeof n?.getValue(t.id)=="string"?"asc":"desc"},t.getSortingFn=()=>{var n,s;if(!t)throw new Error;return Ig(t.columnDef.sortingFn)?t.columnDef.sortingFn:t.columnDef.sortingFn==="auto"?t.getAutoSortingFn():(n=(s=e.options.sortingFns)==null?void 0:s[t.columnDef.sortingFn])!=null?n:Td[t.columnDef.sortingFn]},t.toggleSorting=(n,s)=>{const a=t.getNextSortingOrder(),l=typeof n<"u"&&n!==null;e.setSorting(o=>{const c=o?.find(g=>g.id===t.id),d=o?.findIndex(g=>g.id===t.id);let m=[],u,h=l?n:a==="desc";if(o!=null&&o.length&&t.getCanMultiSort()&&s?c?u="toggle":u="add":o!=null&&o.length&&d!==o.length-1?u="replace":c?u="toggle":u="replace",u==="toggle"&&(l||a||(u="remove")),u==="add"){var p;m=[...o,{id:t.id,desc:h}],m.splice(0,m.length-((p=e.options.maxMultiSortColCount)!=null?p:Number.MAX_SAFE_INTEGER))}else u==="toggle"?m=o.map(g=>g.id===t.id?{...g,desc:h}:g):u==="remove"?m=o.filter(g=>g.id!==t.id):m=[{id:t.id,desc:h}];return m})},t.getFirstSortDir=()=>{var n,s;return((n=(s=t.columnDef.sortDescFirst)!=null?s:e.options.sortDescFirst)!=null?n:t.getAutoSortDir()==="desc")?"desc":"asc"},t.getNextSortingOrder=n=>{var s,a;const l=t.getFirstSortDir(),o=t.getIsSorted();return o?o!==l&&((s=e.options.enableSortingRemoval)==null||s)&&(!(n&&(a=e.options.enableMultiRemove)!=null)||a)?!1:o==="desc"?"asc":"desc":l},t.getCanSort=()=>{var n,s;return((n=t.columnDef.enableSorting)!=null?n:!0)&&((s=e.options.enableSorting)!=null?s:!0)&&!!t.accessorFn},t.getCanMultiSort=()=>{var n,s;return(n=(s=t.columnDef.enableMultiSort)!=null?s:e.options.enableMultiSort)!=null?n:!!t.accessorFn},t.getIsSorted=()=>{var n;const s=(n=e.getState().sorting)==null?void 0:n.find(a=>a.id===t.id);return s?s.desc?"desc":"asc":!1},t.getSortIndex=()=>{var n,s;return(n=(s=e.getState().sorting)==null?void 0:s.findIndex(a=>a.id===t.id))!=null?n:-1},t.clearSorting=()=>{e.setSorting(n=>n!=null&&n.length?n.filter(s=>s.id!==t.id):[])},t.getToggleSortingHandler=()=>{const n=t.getCanSort();return s=>{n&&(s.persist==null||s.persist(),t.toggleSorting==null||t.toggleSorting(void 0,t.getCanMultiSort()?e.options.isMultiSortEvent==null?void 0:e.options.isMultiSortEvent(s):!1))}}},createTable:t=>{t.setSorting=e=>t.options.onSortingChange==null?void 0:t.options.onSortingChange(e),t.resetSorting=e=>{var n,s;t.setSorting(e?[]:(n=(s=t.initialState)==null?void 0:s.sorting)!=null?n:[])},t.getPreSortedRowModel=()=>t.getGroupedRowModel(),t.getSortedRowModel=()=>(!t._getSortedRowModel&&t.options.getSortedRowModel&&(t._getSortedRowModel=t.options.getSortedRowModel(t)),t.options.manualSorting||!t._getSortedRowModel?t.getPreSortedRowModel():t._getSortedRowModel())}},i7=[Nq,zq,Lq,$q,Cq,_q,Vq,Uq,n7,Oq,Wq,Kq,Gq,Yq,qq];function s7(t){var e,n;const s=[...i7,...(e=t._features)!=null?e:[]];let a={_features:s};const l=a._features.reduce((p,g)=>Object.assign(p,g.getDefaultOptions==null?void 0:g.getDefaultOptions(a)),{}),o=p=>a.options.mergeOptions?a.options.mergeOptions(l,p):{...l,...p};let d={...{},...(n=t.initialState)!=null?n:{}};a._features.forEach(p=>{var g;d=(g=p.getInitialState==null?void 0:p.getInitialState(d))!=null?g:d});const m=[];let u=!1;const h={_features:s,options:{...l,...t},initialState:d,_queue:p=>{m.push(p),u||(u=!0,Promise.resolve().then(()=>{for(;m.length;)m.shift()();u=!1}).catch(g=>setTimeout(()=>{throw g})))},reset:()=>{a.setState(a.initialState)},setOptions:p=>{const g=Jr(p,a.options);a.options=o(g)},getState:()=>a.options.state,setState:p=>{a.options.onStateChange==null||a.options.onStateChange(p)},_getRowId:(p,g,v)=>{var x;return(x=a.options.getRowId==null?void 0:a.options.getRowId(p,g,v))!=null?x:`${v?[v.id,g].join("."):g}`},getCoreRowModel:()=>(a._getCoreRowModel||(a._getCoreRowModel=a.options.getCoreRowModel(a)),a._getCoreRowModel()),getRowModel:()=>a.getPaginationRowModel(),getRow:(p,g)=>{let v=(g?a.getPrePaginationRowModel():a.getRowModel()).rowsById[p];if(!v&&(v=a.getCoreRowModel().rowsById[p],!v))throw new Error;return v},_getDefaultColumnDef:Vt(()=>[a.options.defaultColumn],p=>{var g;return p=(g=p)!=null?g:{},{header:v=>{const x=v.header.column.columnDef;return x.accessorKey?x.accessorKey:x.accessorFn?x.id:null},cell:v=>{var x,y;return(x=(y=v.renderValue())==null||y.toString==null?void 0:y.toString())!=null?x:null},...a._features.reduce((v,x)=>Object.assign(v,x.getDefaultColumnDef==null?void 0:x.getDefaultColumnDef()),{}),...p}},Ut(t,"debugColumns")),_getColumnDefs:()=>a.options.columns,getAllColumns:Vt(()=>[a._getColumnDefs()],p=>{const g=function(v,x,y){return y===void 0&&(y=0),v.map(b=>{const k=jq(a,b,y,x),w=b;return k.columns=w.columns?g(w.columns,k,y+1):[],k})};return g(p)},Ut(t,"debugColumns")),getAllFlatColumns:Vt(()=>[a.getAllColumns()],p=>p.flatMap(g=>g.getFlatColumns()),Ut(t,"debugColumns")),_getAllFlatColumnsById:Vt(()=>[a.getAllFlatColumns()],p=>p.reduce((g,v)=>(g[v.id]=v,g),{}),Ut(t,"debugColumns")),getAllLeafColumns:Vt(()=>[a.getAllColumns(),a._getOrderColumnsFn()],(p,g)=>{let v=p.flatMap(x=>x.getLeafColumns());return g(v)},Ut(t,"debugColumns")),getColumn:p=>a._getAllFlatColumnsById()[p]};Object.assign(a,h);for(let p=0;p<a._features.length;p++){const g=a._features[p];g==null||g.createTable==null||g.createTable(a)}return a}function HT(){return t=>Vt(()=>[t.options.data],e=>{const n={rows:[],flatRows:[],rowsById:{}},s=function(a,l,o){l===void 0&&(l=0);const c=[];for(let m=0;m<a.length;m++){const u=kk(t,t._getRowId(a[m],m,o),a[m],m,l,void 0,o?.id);if(n.flatRows.push(u),n.rowsById[u.id]=u,c.push(u),t.options.getSubRows){var d;u.originalSubRows=t.options.getSubRows(a[m],m),(d=u.originalSubRows)!=null&&d.length&&(u.subRows=s(u.originalSubRows,l+1,u))}}return c};return n.rows=s(e),n},Ut(t.options,"debugTable","getRowModel",()=>t._autoResetPageIndex()))}function a7(t,e,n){return n.options.filterFromLeafRows?r7(t,e,n):l7(t,e,n)}function r7(t,e,n){var s;const a=[],l={},o=(s=n.options.maxLeafRowFilterDepth)!=null?s:100,c=function(d,m){m===void 0&&(m=0);const u=[];for(let p=0;p<d.length;p++){var h;let g=d[p];const v=kk(n,g.id,g.original,g.index,g.depth,void 0,g.parentId);if(v.columnFilters=g.columnFilters,(h=g.subRows)!=null&&h.length&&m<o){if(v.subRows=c(g.subRows,m+1),g=v,e(g)&&!v.subRows.length){u.push(g),l[g.id]=g,a.push(g);continue}if(e(g)||v.subRows.length){u.push(g),l[g.id]=g,a.push(g);continue}}else g=v,e(g)&&(u.push(g),l[g.id]=g,a.push(g))}return u};return{rows:c(t),flatRows:a,rowsById:l}}function l7(t,e,n){var s;const a=[],l={},o=(s=n.options.maxLeafRowFilterDepth)!=null?s:100,c=function(d,m){m===void 0&&(m=0);const u=[];for(let p=0;p<d.length;p++){let g=d[p];if(e(g)){var h;if((h=g.subRows)!=null&&h.length&&m<o){const x=kk(n,g.id,g.original,g.index,g.depth,void 0,g.parentId);x.subRows=c(g.subRows,m+1),g=x}u.push(g),a.push(g),l[g.id]=g}}return u};return{rows:c(t),flatRows:a,rowsById:l}}function o7(){return t=>Vt(()=>[t.getPreFilteredRowModel(),t.getState().columnFilters,t.getState().globalFilter],(e,n,s)=>{if(!e.rows.length||!(n!=null&&n.length)&&!s){for(let p=0;p<e.flatRows.length;p++)e.flatRows[p].columnFilters={},e.flatRows[p].columnFiltersMeta={};return e}const a=[],l=[];(n??[]).forEach(p=>{var g;const v=t.getColumn(p.id);if(!v)return;const x=v.getFilterFn();x&&a.push({id:p.id,filterFn:x,resolvedValue:(g=x.resolveFilterValue==null?void 0:x.resolveFilterValue(p.value))!=null?g:p.value})});const o=(n??[]).map(p=>p.id),c=t.getGlobalFilterFn(),d=t.getAllLeafColumns().filter(p=>p.getCanGlobalFilter());s&&c&&d.length&&(o.push("__global__"),d.forEach(p=>{var g;l.push({id:p.id,filterFn:c,resolvedValue:(g=c.resolveFilterValue==null?void 0:c.resolveFilterValue(s))!=null?g:s})}));let m,u;for(let p=0;p<e.flatRows.length;p++){const g=e.flatRows[p];if(g.columnFilters={},a.length)for(let v=0;v<a.length;v++){m=a[v];const x=m.id;g.columnFilters[x]=m.filterFn(g,x,m.resolvedValue,y=>{g.columnFiltersMeta[x]=y})}if(l.length){for(let v=0;v<l.length;v++){u=l[v];const x=u.id;if(u.filterFn(g,x,u.resolvedValue,y=>{g.columnFiltersMeta[x]=y})){g.columnFilters.__global__=!0;break}}g.columnFilters.__global__!==!0&&(g.columnFilters.__global__=!1)}}const h=p=>{for(let g=0;g<o.length;g++)if(p.columnFilters[o[g]]===!1)return!1;return!0};return a7(e.rows,h,t)},Ut(t.options,"debugTable","getFilteredRowModel",()=>t._autoResetPageIndex()))}function c7(){return t=>Vt(()=>[t.getState().sorting,t.getPreSortedRowModel()],(e,n)=>{if(!n.rows.length||!(e!=null&&e.length))return n;const s=t.getState().sorting,a=[],l=s.filter(d=>{var m;return(m=t.getColumn(d.id))==null?void 0:m.getCanSort()}),o={};l.forEach(d=>{const m=t.getColumn(d.id);m&&(o[d.id]={sortUndefined:m.columnDef.sortUndefined,invertSorting:m.columnDef.invertSorting,sortingFn:m.getSortingFn()})});const c=d=>{const m=d.map(u=>({...u}));return m.sort((u,h)=>{for(let g=0;g<l.length;g+=1){var p;const v=l[g],x=o[v.id],y=x.sortUndefined,b=(p=v?.desc)!=null?p:!1;let k=0;if(y){const w=u.getValue(v.id),T=h.getValue(v.id),j=w===void 0,D=T===void 0;if(j||D){if(y==="first")return j?-1:1;if(y==="last")return j?1:-1;k=j&&D?0:j?y:-y}}if(k===0&&(k=x.sortingFn(u,h,v.id)),k!==0)return b&&(k*=-1),x.invertSorting&&(k*=-1),k}return u.index-h.index}),m.forEach(u=>{var h;a.push(u),(h=u.subRows)!=null&&h.length&&(u.subRows=c(u.subRows))}),m};return{rows:c(n.rows),flatRows:a,rowsById:n.rowsById}},Ut(t.options,"debugTable","getSortedRowModel",()=>t._autoResetPageIndex()))}function Np(t,e){return t?d7(t)?f.createElement(t,e):t:null}function d7(t){return m7(t)||typeof t=="function"||u7(t)}function m7(t){return typeof t=="function"&&(()=>{const e=Object.getPrototypeOf(t);return e.prototype&&e.prototype.isReactComponent})()}function u7(t){return typeof t=="object"&&typeof t.$$typeof=="symbol"&&["react.memo","react.forward_ref"].includes(t.$$typeof.description)}function zT(t){const e={state:{},onStateChange:()=>{},renderFallbackValue:null,...t},[n]=f.useState(()=>({current:s7(e)})),[s,a]=f.useState(()=>n.current.initialState);return n.current.setOptions(l=>({...l,...t,state:{...s,...t.state},onStateChange:o=>{a(o),t.onStateChange==null||t.onStateChange(o)}})),n.current}const _n=({columns:t=5,rows:e=5,showHeader:n=!0,showActions:s=!0,showPagination:a=!0,showBreadcrumb:l=!1,showPageHeader:o=!1,showFilterBar:c=!1})=>{const d=s?t+1:t;return i.jsxs(i.Fragment,{children:[l&&i.jsxs("div",{className:"d-flex justify-content-between align-items-center gap-3 flex-wrap mb-4",children:[i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsx(S,{width:"60px",height:"1rem"}),i.jsx("span",{className:"text-muted",children:i.jsx("i",{className:"ph ph-caret-double-right"})}),i.jsx(S,{width:"100px",height:"1rem"}),i.jsx("span",{className:"text-muted",children:i.jsx("i",{className:"ph ph-caret-double-right"})}),i.jsx(S,{width:"120px",height:"1rem"})]}),i.jsx(S,{width:"80px",height:"2.5rem",className:"rounded"})]}),o&&i.jsxs("div",{className:"d-flex align-items-md-center justify-content-between flex-column flex-lg-row gap-3 mb-4",children:[i.jsx("div",{className:"page-title",children:i.jsx(S,{width:"200px",height:"1.75rem"})}),i.jsxs("div",{className:"d-flex align-items-center flex-wrap gap-3",children:[i.jsx(S,{width:"140px",height:"2.5rem",className:"rounded"}),i.jsx(S,{width:"100px",height:"2.5rem",className:"rounded"})]})]}),c&&i.jsxs("div",{className:"d-flex justify-content-between flex-column flex-lg-row gap-3 mb-4 px-0 pt-4",children:[i.jsxs("div",{className:"d-flex gap-3 flex-column flex-sm-row",children:[i.jsx(S,{width:"180px",height:"2.5rem"}),i.jsx(S,{width:"120px",height:"2.5rem"})]}),i.jsxs("div",{className:"d-flex gap-3 align-items-center",children:[i.jsx(S,{width:"200px",height:"2.5rem"}),i.jsxs("div",{className:"d-flex gap-2",children:[i.jsx(S,{width:"40px",height:"2.5rem",className:"rounded"}),i.jsx(S,{width:"40px",height:"2.5rem",className:"rounded"}),i.jsx(S,{width:"40px",height:"2.5rem",className:"rounded"})]})]})]}),i.jsx("div",{className:"card",children:i.jsxs("div",{className:"card-body p-0",children:[i.jsx("div",{className:"table-responsive",children:i.jsxs("table",{className:"table",children:[n&&i.jsx("thead",{children:i.jsx("tr",{children:Array.from({length:d}).map((m,u)=>i.jsx("th",{className:"py-3",children:i.jsx(S,{width:"80%",height:"1rem"})},`th-${u}`))})}),i.jsx("tbody",{children:Array.from({length:e}).map((m,u)=>i.jsx("tr",{children:Array.from({length:d}).map((h,p)=>i.jsx("td",{className:"py-3",children:p===0?i.jsx(S,{width:"1rem",height:"1rem",className:"rounded"}):p===1?i.jsx(S,{width:"30px",height:"1rem"}):p>=2&&p<=d-2?i.jsx(Ys,{avatarSize:"2.5rem",nameWidth:"120px",detailWidth:"150px"}):p===d-1&&s?i.jsxs("div",{className:"d-flex gap-1",children:[i.jsx(S,{width:"2rem",height:"2rem",className:"rounded"}),i.jsx(S,{width:"2rem",height:"2rem",className:"rounded"}),i.jsx(S,{width:"2rem",height:"2rem",className:"rounded"})]}):i.jsx(S,{width:"90%",height:"1rem"})},`cell-${u}-${p}`))},`row-${u}`))})]})}),a&&i.jsxs("div",{className:"d-flex align-items-center justify-content-between mt-3 flex-wrap gap-2 pb-3 px-4",children:[i.jsx(S,{width:"150px",height:"1rem"}),i.jsx("div",{className:"d-flex gap-1",children:Array.from({length:5}).map((m,u)=>i.jsx(S,{width:"2.5rem",height:"2.5rem",className:"rounded"},`page-${u}`))})]})]})})]})},wn=({data:t=[],columns:e=[],pagination:n=null,isLoading:s=!1,error:a=null,bordered:l=!0,responsive:o=!0,onPageChange:c=()=>{},onPerPageChange:d=()=>{},onSortingChange:m=()=>{},currentPage:u=1,perPage:h=10,totalItems:p=0,lastPage:g=1,enableSelection:v=!0,manualPagination:x=!0,manualFiltering:y=!0,manualSorting:b=!1,moduleNamePlural:k="",renderEmptyState:w=null,bulkActionsButtonText:T="",bulkActions:j=[],isBulkActionShow:D=()=>{},skeletonColumns:_=null,skeletonRows:N=null,rowIdField:A="id",enableHighlightNewItems:P=!0,className:E=""})=>{const I=Ln(),M=f.useRef(null),[O,F]=f.useState({sorting:[],page:u,perPage:h}),[H,G]=f.useState(""),[z,ie]=f.useState(new Set),W=f.useRef([]);f.useEffect(()=>{if(P&&t?.length>W.current?.length){const oe=new Set(W.current.map(R=>R[A]||R.id)),C=t.filter(R=>!oe.has(R[A]||R.id)).map(R=>R[A]||R.id);if(C.length>0){ie(te=>{const ne=new Set(te);return C.forEach(Y=>ne.add(Y)),ne});const R=setTimeout(()=>{ie(te=>{const ne=new Set(te);return C.forEach(Y=>ne.delete(Y)),ne})},3e3);return()=>clearTimeout(R)}}W.current=t},[t,P,A]),f.useEffect(()=>{F(oe=>({...oe,page:u,perPage:h})),J(h==="all"||h===p)},[u,h,p]);const ge=f.useMemo(()=>{let oe=[...e];return v&&oe.unshift(I.display({id:"selection",header:({table:C})=>i.jsx("input",{type:"checkbox",className:"form-check-input",checked:C.getIsAllRowsSelected(),onChange:C.getToggleAllRowsSelectedHandler()}),cell:({row:C})=>i.jsx("input",{type:"checkbox",className:"form-check-input",checked:C.getIsSelected(),onChange:C.getToggleSelectedHandler()})})),oe},[e,v,I]),ae=(oe,C)=>{F(R=>({...R,[oe]:C}))},U=oe=>{ae("page",oe),c(oe)},[X,J]=f.useState(!1),he=oe=>{if(oe==="all")J(!0),ae("perPage","all"),d("all");else{J(!1);const C=Number(oe);ae("perPage",C),d(C)}},le=zT({data:t,columns:ge,state:{sorting:Array.isArray(O.sorting)?O.sorting:[]},onSortingChange:oe=>{const C=typeof oe=="function"?oe(Array.isArray(O.sorting)?O.sorting:[]):Array.isArray(oe)?oe:[];ae("sorting",C),m(C)},getCoreRowModel:HT(),getFilteredRowModel:o7(),getSortedRowModel:b?void 0:c7(),enableRowSelection:v,enableSorting:!0,manualPagination:x,manualFiltering:y,manualSorting:b}),ee=le.getSelectedRowModel().rows;f.useEffect(()=>{D(ee.length>0&&j?.length>0)},[ee]);const me=()=>{if(!H)return;const oe=(j||[]).find(C=>C.label===H);oe&&typeof oe.action=="function"&&oe.action(ee.map(C=>C.original),()=>le.resetRowSelection())},K=f.useMemo(()=>{const C=O.page-1,R=O.page+1,te=[],ne=[];let Y;for(let q=1;q<=g;q++)(q===1||q===g||q>=C&&q<=R)&&te.push(q);for(let q of te)Y&&(q-Y===2?ne.push(Y+1):q-Y!==1&&ne.push("...")),ne.push(q),Y=q;return ne},[O.page,g]),re=()=>i.jsx("tr",{children:i.jsx("td",{colSpan:ge.length,className:"text-center py-5 border-start border-end",children:i.jsx("h6",{className:"text-secondary fw-normal mb-0",children:r(`No ${k||"items"} found`,"kivicare-clinic-management-system")})})});return i.jsxs(i.Fragment,{children:[a&&i.jsx("div",{className:"alert alert-danger",role:"alert",children:typeof a=="string"?a:a.message||r("An error occurred while loading data.","kivicare-clinic-management-system")}),s?i.jsx(_n,{columns:_||ge.length,rows:N||(h==="all"?10:Math.min(h,10)),showActions:v}):i.jsxs(i.Fragment,{children:[i.jsx(Ci,{in:ee.length>0&&j?.length>0,timeout:100,classNames:"fade-top-bottom",unmountOnExit:!0,appear:!0,nodeRef:M,children:i.jsx("div",{ref:M,className:"position-absolute top-0 rounded w-100 card",style:{zIndex:10},children:i.jsxs("div",{className:"card-body d-flex justify-content-between align-items-center py-2 px-3 rounded",children:[i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsxs("span",{children:[ee.length," ",ee.length===1?r("row selected","kivicare-clinic-management-system"):r("rows selected","kivicare-clinic-management-system")]}),i.jsx("button",{type:"button",className:"btn btn-link ",onClick:()=>le.resetRowSelection(),children:r("Clear","kivicare-clinic-management-system")})]}),i.jsxs("div",{className:"d-flex gap-2",children:[i.jsx(ct,{value:H?{value:H,label:H}:null,onChange:oe=>G(oe?oe.value:""),options:j.map(oe=>({value:oe.label,label:oe.label})),placeholder:T||r("Bulk Actions","kivicare-clinic-management-system"),className:"react-select-box kc-react-select-h-auto",classNamePrefix:"react-select",isSearchable:!1,styles:{menuPortal:oe=>({...oe,zIndex:9999})}}),i.jsx("button",{className:"btn btn-primary btn-sm px-3",onClick:me,disabled:!H||ee.length===0,children:r("Apply","kivicare-clinic-management-system")})]})]})})}),i.jsxs("div",{className:"position-relative",children:[i.jsx("div",{className:o?"table-responsive":"",children:i.jsxs("table",{className:`table table-bordered  rounded ${E}`,children:[i.jsx("thead",{children:le.getHeaderGroups().map(oe=>i.jsx("tr",{children:oe.headers.map(C=>i.jsx("th",{colSpan:C.colSpan,className:`align-middle ${C.column.columnDef.headerClassName||""}`,children:C.isPlaceholder?null:i.jsxs("div",{className:C.column.getCanSort()?"cursor-pointer user-select-none d-flex align-items-center justify-content-between":"",onClick:C.column.getToggleSortingHandler(),children:[Np(C.column.columnDef.header,C.getContext()),C.column.getCanSort()&&i.jsx("span",{className:"ms-2",children:(()=>{const R=C.column.getIsSorted();return R==="asc"?i.jsx("i",{className:"ph ph-arrow-up"}):R==="desc"?i.jsx("i",{className:"ph ph-arrow-down"}):i.jsx("i",{className:"ph ph-arrows-vertical opacity-50"})})()})]})},C.id))},oe.id))}),i.jsx("tbody",{children:le.getRowModel().rows.length>0?le.getRowModel().rows.map(oe=>{const C=oe.original[A]||oe.original.id,R=z.has(C);return i.jsx("tr",{className:`align-middle ${oe.getIsSelected()?"table-row-selected":""} ${R?"new-row-highlight":""}`,children:oe.getVisibleCells().map(te=>i.jsx("td",{children:Np(te.column.columnDef.cell,te.getContext())},te.id))},oe.id)}):w?w():re()})]})}),(n||p>0)&&i.jsxs("div",{className:"d-flex flex-wrap justify-content-around justify-content-md-between align-items-center gap-3 mt-4",children:[i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsx("span",{children:r("Show","kivicare-clinic-management-system")}),i.jsxs("select",{className:"form-select form-select-sm w-auto",value:X?"all":O.perPage,onChange:oe=>he(oe.target.value),children:[i.jsx("option",{value:"5",children:"5"}),i.jsx("option",{value:"10",children:"10"}),i.jsx("option",{value:"25",children:"25"}),i.jsx("option",{value:"50",children:"50"}),i.jsx("option",{value:"100",children:"100"}),i.jsx("option",{value:"all",children:r("All","kivicare-clinic-management-system")})]}),i.jsx("span",{children:r("entries","kivicare-clinic-management-system")})]}),i.jsx("div",{children:X?Pi(r("Showing all entries","kivicare-clinic-management-system")):Pi(r("Showing %1$d to %2$d of %3$d entries","kivicare-clinic-management-system"),Math.min((O.page-1)*O.perPage+1,p),Math.min(O.page*O.perPage,p),p)}),(n||p>0)&&!X&&i.jsx("nav",{"aria-label":"Page navigation",children:p>0&&i.jsxs("ul",{className:"pagination pagination-sm",children:[i.jsx("li",{className:`page-item ${O.page===1?"disabled":""}`,children:i.jsx("button",{className:"page-link",onClick:()=>U(Math.max(O.page-1,1)),disabled:O.page===1,children:r("Previous","kivicare-clinic-management-system")})}),K.map((oe,C)=>i.jsx("li",{className:`page-item ${O.page===oe?"active":""} ${oe==="..."?"disabled":""}`,children:i.jsx("button",{className:"page-link",onClick:()=>typeof oe=="number"&&U(oe),disabled:oe==="...",children:oe})},C)),i.jsx("li",{className:`page-item ${O.page===g?"disabled":""}`,children:i.jsx("button",{className:"page-link",onClick:()=>U(Math.min(O.page+1,g)),disabled:O.page===g,children:r("Next","kivicare-clinic-management-system")})})]})})]})]})]})]})};wn.propTypes={data:Ae.array.isRequired,columns:Ae.array.isRequired,pagination:Ae.object,isLoading:Ae.bool,error:Ae.oneOfType([Ae.string,Ae.object]),bulkActionsButtonText:Ae.string,bulkActions:Ae.arrayOf(Ae.shape({label:Ae.string.isRequired,action:Ae.func.isRequired})),striped:Ae.bool,bordered:Ae.bool,hover:Ae.bool,responsive:Ae.bool,onPageChange:Ae.func,onPerPageChange:Ae.func,onSortingChange:Ae.func,onRowSelect:Ae.func,currentPage:Ae.number,perPage:Ae.number,totalItems:Ae.number,lastPage:Ae.number,enableSelection:Ae.bool,manualPagination:Ae.bool,manualFiltering:Ae.bool,manualSorting:Ae.bool,moduleBaseUrl:Ae.string,moduleNameSingular:Ae.string,moduleNamePlural:Ae.string,renderCustomActions:Ae.func,renderEmptyState:Ae.func,beforeTable:Ae.node,afterTable:Ae.node,customBulkActions:Ae.arrayOf(Ae.shape({label:Ae.string.isRequired,action:Ae.func.isRequired})),isBulkActionShow:Ae.func,rowIdField:Ae.string,enableHighlightNewItems:Ae.bool};function Oc({src:t,variant:e="primary",size:n="md",alt:s="Avatar",text:a="",badge:l=null,className:o="",onClick:c=null}){const d={xs:"avatar-40",sm:"avatar-40",md:"avatar-50",lg:"avatar-40",xl:"avatar-40"},m=typeof n=="string"?d[n]||d.md:`${n}px`,u=l?{position:"absolute",bottom:"0",right:"0",transform:"translate(20%, 20%)",border:"1px solid white",borderRadius:"50%",width:`calc(${m} * 0.4)`,height:`calc(${m} * 0.4)`,backgroundColor:`var(--bs-${l.variant||"danger"})`,display:"flex",alignItems:"center",justifyContent:"center",fontSize:`calc(${m} * 0.2)`,color:"white"}:{},h=()=>a?a.substring(0,2).toUpperCase():s.substring(0,2).toUpperCase();return i.jsxs("div",{onClick:c,role:c?"button":void 0,children:[t?i.jsx(iE,{src:t,alt:s,className:`avatar  ${o} ${m}`}):i.jsx("div",{className:`avatar  ${o} ${m}`,children:i.jsx("span",{children:h()})}),l&&i.jsx("div",{style:u,children:l.text})]})}Oc.propTypes={src:Ae.string,variant:Ae.string,size:Ae.oneOfType([Ae.string,Ae.number]),alt:Ae.string,text:Ae.string,badge:Ae.shape({variant:Ae.string,text:Ae.oneOfType([Ae.string,Ae.number])}),className:Ae.string,onClick:Ae.func};const dn=({profileUrl:t=null,name:e="",email:n="",gender:s="",phone:a="",address:l="",dob:o="",clinicName:c="",fallbackText:d=null,variant:m="primary",size:u="md",nameLabel:h=r("User Name","kivicare-clinic-management-system"),className:p="",onClick:g=null,rounded:v=!0})=>{const y=t?"":(w=>{if(!w)return"U";const T=w.trim().split(" ");return T.length===1?T[0].charAt(0).toUpperCase():(T[0].charAt(0)+T[1].charAt(0)).toUpperCase()})(e),b=typeof g=="function",k=i.jsxs("div",{className:`d-flex align-items-center gap-3 ${p} ${b?"cursor-pointer":""}`,children:[i.jsx(Oc,{src:t,alt:e||h,text:y,variant:m,size:u,className:`flex-shrink-0 bg-primary-subtle  ${v?"rounded-circle":"rounded"} `}),i.jsxs("div",{className:"user-data",children:[i.jsx("h6",{className:"font-size-14 mb-0",children:e||h}),c&&i.jsx("p",{className:"font-size-12 text-muted mb-1",children:c}),i.jsxs("div",{className:"d-flex align-items-center column-gap-5 row-gap-1 flex-wrap",children:[n&&i.jsx(i.Fragment,{children:i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsx("i",{className:"ph ph-envelope"}),i.jsxs("span",{className:"text-muted line-anywhere",children:[" ",n]})]})}),a&&i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsx("i",{className:"ph ph-phone"}),i.jsx("span",{className:"font-size-14 line-anywhere",children:a})]}),s&&i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsx("i",{className:"ph ph-gender-"+s}),i.jsx("span",{className:"font-size-14",children:s})]}),o&&i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsx("i",{className:"ph ph-cake"}),i.jsx("span",{className:"font-size-14",children:o})]}),l&&i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsx("i",{className:"ph ph-map-pin"}),i.jsx("span",{className:"font-size-14",children:l})]})]})]})]});return b?i.jsx("div",{onClick:g,role:"button",tabIndex:0,onKeyDown:w=>{(w.key==="Enter"||w.key===" ")&&(w.preventDefault(),g())},style:{cursor:"pointer"},children:k}):k};var ah={},GN;function h7(){if(GN)return ah;GN=1,Object.defineProperty(ah,"__esModule",{value:!0});function t(){for(var a=[],l=0;l<arguments.length;l++)a[l]=arguments[l];if(a.length===2)return n(a[0],a[1])||null;var o=a.slice(1).reduce(function(c,d){return n(c,d)},a[0]);return o||null}ah.default=t;var e=new WeakMap;function n(a,l){if(a&&l){var o=e.get(a)||new WeakMap;e.set(a,o);var c=o.get(l)||(function(d){s(a,d),s(l,d)});return o.set(l,c),c}return a||l}function s(a,l){typeof a=="function"?a(l):a.current=l}return ah}var p7=h7();const g7=ya(p7);var YN=Symbol("useLazyRef empty value"),f7=t=>{const e=f.useRef(YN);return e.current===YN&&(e.current=t()),e};function v7(){var t=f.useRef(!1);return f.useEffect(function(){return t.current=!0,function(){t.current=!1}},[]),t}var rh=function(e){var n=He.useRef(e);return op(function(){n.current=e}),n};function Ul(t){return{isOk:()=>!0,isOkAnd:n=>n(t),isErr:()=>!1,isErrAnd:()=>!1,ok:()=>Ck(t),err:()=>Ql(),map:n=>Ul(n(t)),mapOr:(n,s)=>s(t),mapOrElse:(n,s)=>s(t),mapErr:()=>Ul(t),expect:()=>t,expectErr:n=>{throw new Error(n)},unwrap:()=>t,unwrapErr:()=>{throw new Error(`${t}`)},unwrapOr:()=>t,unwrapOrElse:()=>t,and:n=>n,andThen:n=>n(t),or:()=>Ul(t),orElse:()=>Ul(t)}}function Wl(t){return{isOk:()=>!1,isOkAnd:()=>!1,isErr:()=>!0,isErrAnd:n=>n(t),ok:()=>Ql(),err:()=>Ck(t),map:()=>Wl(t),mapOr:n=>n,mapOrElse:n=>n(t),mapErr:n=>Wl(n(t)),expect:n=>{throw new Error(n)},expectErr:()=>t,unwrap:()=>{throw new Error(`${t}`)},unwrapErr:()=>t,unwrapOr:n=>n,unwrapOrElse:n=>n(t),and:()=>Wl(t),andThen:()=>Wl(t),or:n=>n,orElse:n=>n(t)}}function Ql(){const t={and:()=>Ql(),andThen:()=>Ql(),expect:e=>{throw new Error(e)},filter:()=>t,isSome:()=>!1,isSomeAnd:()=>!1,isNone:()=>!0,map:()=>Ql(),mapOr:e=>e,mapOrElse:e=>e(),okOr:e=>Wl(e),okOrElse:e=>Wl(e()),or:e=>e,orElse:e=>e(),unwrap:()=>{throw new Error("panic! call `unwrap` on a `None` value")},unwrapOr:e=>e,unwrapOrElse:e=>e(),xor:e=>e.isSome()?e:t};return t}function Ck(t){const e={and:n=>n,andThen:n=>n(t),expect:()=>t,filter:n=>n(t)?e:Ql(),isSome:()=>!0,isSomeAnd:n=>n(t),isNone:()=>!1,map:n=>Ck(n(t)),mapOr:(n,s)=>s(t),mapOrElse:(n,s)=>s(t),okOr:()=>Ul(t),okOrElse:()=>Ul(t),or:()=>e,orElse:()=>e,unwrap:()=>t,unwrapOr:()=>t,unwrapOrElse:()=>t,xor:n=>n.isNone()?e:Ql()};return e}function x7(t){return t.then(e=>Ul(e),e=>Wl(e))}var y7=setTimeout;function b7(t,e){var n=e.useCachedSetTimeout?y7:setTimeout;return new Promise((function(s){n(s,t)}))}function k7(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.useCachedSetTimeout,s=b7(t,{useCachedSetTimeout:n});function a(l){return s.then((function(){return l}))}return a.then=function(){return s.then.apply(s,arguments)},a.catch=Promise.resolve().catch,a}var w7=300;function j7(t){function e(n){const{selectProps:s,innerRef:a}=n,{handleScrolledToBottom:l,shouldLoadMore:o}=s,c=f.useRef(null),d=f.useRef(null),m=f.useCallback(()=>{const p=d.current;if(!p)return!1;const{scrollTop:g,scrollHeight:v,clientHeight:x}=p;return o(v,x,g)},[o]),u=f.useCallback(()=>{m()&&l&&l()},[m,l]),h=f.useMemo(()=>{const p=()=>{u(),c.current=setTimeout(p,w7)};return p},[u]);return f.useEffect(()=>(h(),()=>{c.current&&clearTimeout(c.current)}),[]),i.jsx(t,{...n,innerRef:g7(a,d)})}return e}var N7=j7(N2.MenuList),C7=t=>f.useMemo(()=>({MenuList:N7,...t}),[t]),_7=(t,e)=>[...t,...e],S7=10,E7=(t,e,n)=>t-e-S7<n,VT=t=>({isFirstLoad:!0,options:[],hasMore:!0,isLoading:!1,lockedUntil:0,additional:t.additional}),T7=({options:t,defaultOptions:e,additional:n,defaultAdditional:s})=>{const a=e===!0?null:Array.isArray(e)?e:t;return a?{"":{isFirstLoad:!1,isLoading:!1,options:a,hasMore:!0,lockedUntil:0,additional:s||n}}:{}},QN='[react-select-async-paginate] response of "loadOptions" should be an object with "options" prop, which contains array of options.',A7=t=>{if(!t)return!1;const{options:e,hasMore:n}=t;return!(!Array.isArray(e)||typeof n!="boolean"&&typeof n<"u")},D7=t=>{if(!A7(t))throw console.error(QN,"Received:",t),new Error(QN);return!0},R7=async(t,e,n,s,a,l,o,c)=>{const d=e.current.inputValue,m=!n.current[d],u=m?VT(e.current):n.current[d];if(u.isLoading||!u.hasMore||u.lockedUntil>Date.now())return;if(a(x=>c&&t==="input-change"?{[d]:{...u,isLoading:!0}}:{...x,[d]:{...u,isLoading:!0}}),s>0&&t==="input-change"){await k7(s);const x=e.current.inputValue;if(d!==x){a(y=>{if(m){const{[d]:b,...k}=y;return k}return{...y,[d]:{...u,isLoading:!1}}});return}}const{loadOptions:h,reloadOnErrorTimeout:p=0}=e.current,g=await x7(Promise.resolve().then(()=>h(d,u.options,u.additional)));if(!o.current)return;if(g.isErr()){a(x=>({...x,[d]:{...u,isLoading:!1,lockedUntil:Date.now()+p}}));return}const v=g.unwrap();if(D7(v)){const{options:x,hasMore:y}=v,b=Object.hasOwn(v,"additional")?v.additional:u.additional;a(k=>({...k,[d]:{...u,options:l(u.options,x,b),hasMore:!!y,isLoading:!1,isFirstLoad:!1,additional:b}}))}},Tv=t=>t+1,P7=(t,e=[])=>{const{clearCacheOnSearchChange:n=!1,clearCacheOnMenuClose:s=!1,defaultOptions:a,loadOptionsOnMenuOpen:l=!0,debounceTimeout:o=0,inputValue:c,menuIsOpen:d,filterOption:m=null,reduceOptions:u=_7,shouldLoadMore:h=E7,mapOptionsForMenu:p=void 0}=t,g=rh(d),v=v7(),x=rh(u),y=rh(l),b=f.useRef(!0),k=f.useRef(t);k.current=t;const[w,T]=f.useState(0),j=f7(()=>T7(t)),D=rh(P=>{R7(P,k,j,o,E=>{j.current=E(j.current),v.current&&T(Tv)},x.current,v,n)}),_=f.useCallback(()=>{const P=k.current.inputValue;j.current[P]&&D.current("menu-scroll")},[D,j]);f.useEffect(()=>{b.current?b.current=!1:(j.current={},T(Tv)),a===!0&&D.current("autoload")},e),f.useEffect(()=>{g.current&&!j.current[c]&&D.current("input-change")},[D,c,g,j]),f.useEffect(()=>{if(d){if(!j.current[""]&&y.current){D.current("menu-toggle");return}return}s&&(j.current={},T(Tv))},[D,y,d,j,s]);const N=j.current[c]||VT(t),A=f.useMemo(()=>p?p(N.options):N.options,[N.options,p]);return{handleScrolledToBottom:_,shouldLoadMore:h,filterOption:m,isLoading:N.isLoading||N.lockedUntil>Date.now(),isFirstLoad:N.isFirstLoad,options:A}},M7=(t,e=[])=>{const{inputValue:n,menuIsOpen:s,defaultInputValue:a,defaultMenuIsOpen:l,onInputChange:o,onMenuClose:c,onMenuOpen:d}=t,[m,u]=f.useState(a||""),[h,p]=f.useState(!!l),g=typeof n=="string"?n:m,v=typeof s=="boolean"?s:h,x=f.useCallback((w,T)=>{o&&o(w,T),u(w)},[o]),y=f.useCallback(()=>{c&&c(),p(!1)},[c]),b=f.useCallback(()=>{d&&d(),p(!0)},[d]);return{...P7({...t,inputValue:g,menuIsOpen:v},e),inputValue:g,menuIsOpen:v,onInputChange:x,onMenuClose:y,onMenuOpen:b}},I7=[],O7={};function F7(t){function e(n){const{components:s=O7,selectRef:a=void 0,isLoading:l,cacheUniqs:o=I7,menuPlacement:c,menuShouldScrollIntoView:d,...m}=n,u=M7(m,o),h=C7(s),p=typeof l=="boolean"?l:u.isLoading;return i.jsx(t,{...n,...u,menuPlacement:c,menuShouldScrollIntoView:c==="auto"&&p?!1:d,isLoading:p,components:h,ref:a})}return e}var L7=F7(ct);const rn=({id:t,value:e,onChange:n,placeholder:s,isSearchable:a=!0,isLoading:l=!1,isDisabled:o=!1,isMulti:c=!1,closeMenuOnSelect:d=!0,getOptionValue:m,getOptionLabel:u,customComponents:h={},loadOptions:p,dependencies:g={},searchPlaceholder:v=r("Search...","kivicare-clinic-management-system"),noOptionsMessage:x=r("No options available","kivicare-clinic-management-system"),loadingMessage:y=r("Loading...","kivicare-clinic-management-system"),debounceTimeout:b=300,additional:k={},isCreatable:w=!1,onCreateOption:T,formatCreateLabel:j=_=>`Create "${_}"`,...D})=>{const[_,N]=f.useState({page:1}),A=JSON.stringify(g),P=f.useCallback(async(O,F,{page:H})=>{if(console.log(" asyncLoadOptions called:",{searchQuery:O,page:H,dependencies:g}),!p)return{options:[],hasMore:!1,additional:{page:1}};try{const G={page:H||1,per_page:10,search:O||"",...g};console.log(" Calling loadOptions with params:",G);const z=await p(G);console.log(" Received result:",z);const ie=z?.data??z??[],W=z?.pagination??{},ge=Array.isArray(ie)?ie:[],ae=!!(W.has_more||W.current_page<W.total_pages);return console.log(" Returning options:",{optionsCount:ge.length,hasMore:ae,nextPage:(H||1)+1}),w&&O&&ge.length===0&&ge.push({value:"__create__",label:j(O),isCreateOption:!0,inputValue:O}),{options:ge,hasMore:ae,additional:{page:(H||1)+1}}}catch(G){return console.error(" Async load options error:",G),{options:[],hasMore:!1,additional:{page:1}}}},[p,A]);f.useEffect(()=>{console.log(" Dependencies changed! Resetting page to 1. New dependencies:",g),N({page:1})},[A]);const E=O=>{try{const F=m?m(O):O?.value??O?.id??"";return String(F??"")}catch{return""}},I=O=>{try{return u?u(O):O?.label??O?.name??O?.title??""}catch{return""}},M=(O,F)=>{if(O&&O.isCreateOption){T&&T(O.inputValue);return}if(c&&Array.isArray(O)){const H=new Set,G=[];O.forEach(z=>{const ie=E(z);H.has(ie)||(H.add(ie),G.push(z))}),n(G,F);return}n(O,F)};return i.jsx(L7,{id:t,value:e,loadOptions:P,onChange:M,additional:_,placeholder:s,isDisabled:o,isMulti:c,closeMenuOnSelect:d,debounceTimeout:b,isSearchable:a,getOptionValue:E,getOptionLabel:I,components:{...h||{}},styles:{menuPortal:O=>({...O,zIndex:9999})},cacheUniqueValue:A,...D})},jl={getDoctorServices:(t={})=>ve({endpoint:"doctor-services",method:"GET",data:t}),getDoctorService:t=>ve({endpoint:`doctor-services/${t}`,method:"GET"}),createDoctorService:t=>ve({endpoint:"doctor-services",method:"POST",data:t}),updateDoctorService:(t,e)=>ve({endpoint:`doctor-services/${t}`,method:"PUT",data:e}),resendCredentials:t=>ve({endpoint:`doctor-services/${t}/resend-credentials`,method:"POST"}),deleteDoctorService:t=>ve({endpoint:`doctor-services/${t}`,method:"DELETE"}),bulkDeleteDoctorServices:t=>ve({endpoint:"doctor-services/bulk/delete",method:"POST",data:{ids:t}}),bulkUpdateDoctorServiceStatus:(t,e)=>ve({endpoint:"doctor-services/bulk/status",method:"PUT",data:{ids:t,status:e}}),exportServices:(t={})=>ve({endpoint:"doctor-services/export",method:"GET",data:t})};class $7{async getStaticData(e={}){const{dataType:n="staticData",staticDataType:s,...a}=e,l=new URLSearchParams({dataType:n,...s&&{staticDataType:s},...a});return ve({endpoint:`static-data?${l}`,method:"GET"})}async getClinics(e={}){const n={dataType:"clinicList",page:e.page||1,per_page:e.per_page||10};return e.search&&e.search!=="undefined"&&e.search!=="null"&&(n.search=e.search),this.getStaticData(n)}async getStaticDataByType(e){return this.getStaticData({dataType:"staticData",staticDataType:"staticData",type:e})}async getStaticDataWithLabel(e){return this.getStaticData({dataType:"staticData",staticDataType:"staticDataWithLabel",type:e})}async getStaticDataWithPagination(e,n={}){const s={dataType:"staticData",staticDataType:"staticDataWithLabel",type:e,page:n.page||1,per_page:n.per_page||10};return n.search&&n.search!=="undefined"&&n.search!=="null"&&(s.search=n.search),this.getStaticData(s)}async getStaticDataTypes(){return this.getStaticData({dataType:"staticData",staticDataType:"staticDataTypes"})}async getDoctors(e=null){const n={dataType:"staticData",staticDataType:"doctors"};return e&&(n.clinic_ids=e),this.getStaticData(n)}async getClinicDoctors(e,n={}){const s={};return e&&typeof e=="object"&&e!==null?e.length>0&&(s.clinic_ids=e.join(",")):e&&(s.clinic_id=e),this.getStaticData({dataType:"staticData",staticDataType:"clinicDoctors",...s,...n})}async getDefaultClinic(){return this.getStaticData({dataType:"staticData",staticDataType:"defaultClinic"})}async getServicesWithPrice(e=null,n=null){const s={dataType:"staticData",staticDataType:"servicesWithPrice"};return e&&(s.clinic_id=e),n&&(Array.isArray(n)?s.doctor_ids=n.join(","):s.doctor_id=n),this.getStaticData(s)}async getPatientClinics(e){return this.getStaticData({dataType:"staticData",staticDataType:"patientClinic",patient_id:e})}async getPrescriptions(){return this.getStaticData({dataType:"staticData",staticDataType:"prescriptions"})}async getEmailTemplateTypes(){return this.getStaticData({dataType:"staticData",staticDataType:"emailTemplateType"})}async getEmailTemplateKeys(){return this.getStaticData({dataType:"staticData",staticDataType:"emailTemplateKey"})}async getUsersByClinic(e,n={}){return this.getStaticData({dataType:"staticData",staticDataType:"getUsersByClinic",clinic_id:e,...n})}async getUsersByRole(e,n={}){return this.getStaticData({dataType:"staticData",staticDataType:"users",role:e,...n})}async createSpecialty(e,n="specialization"){try{const s=await ve({endpoint:"static-data/add-specialty",method:"POST",data:{label:e,type:n}});return console.log("StaticDataService.createSpecialty response:",s),s}catch(s){throw console.error("StaticDataService.createSpecialty error:",s),s}}async createProblem(e){try{return await ve({endpoint:"static-data/add-specialty",method:"POST",data:{label:e,type:"clinical_problems"}})}catch(n){throw console.error("StaticDataService.createProblem error:",n),n}}async createObservation(e){try{return await ve({endpoint:"static-data/add-specialty",method:"POST",data:{label:e,type:"clinical_observations"}})}catch(n){throw console.error("StaticDataService.createObservation error:",n),n}}}const Dt=new $7,Nl=()=>typeof window<"u"&&window.kc_frontend&&window.kc_frontend.prefix?window.kc_frontend.prefix:"kiviCare_";Nl();const pt={all:["staticData"],lists:()=>[...pt.all,"list"],list:t=>[...pt.lists(),{params:t}],types:()=>[...pt.all,"types"],type:t=>[...pt.types(),t],clinics:()=>[...pt.all,"clinics"],doctors:()=>[...pt.all,"doctors"],doctorsByClinic:t=>[...pt.doctors(),"clinic",t],services:()=>[...pt.all,"services"],servicesWithPrice:t=>[...pt.services(),"withPrice",t],users:()=>[...pt.all,"users"],usersByRole:t=>[...pt.users(),"role",t],usersByClinic:t=>[...pt.users(),"clinic",t],prescriptions:()=>[...pt.all,"prescriptions"],emailTemplates:()=>[...pt.all,"emailTemplates"],patientClinics:t=>[...pt.all,"patientClinics",t]},Cp=(t={},e={})=>ft({queryKey:pt.list(t),queryFn:()=>Dt.getStaticData(t),staleTime:300*1e3,...e}),Og=(t={},e)=>ft({queryKey:pt.clinics(),queryFn:()=>Dt.getClinics(e),staleTime:600*1e3,...t}),Ha=(t,e={})=>ft({queryKey:[...pt.type(t),"withLabel"],queryFn:()=>Dt.getStaticDataWithLabel(t),enabled:!!t,staleTime:900*1e3,...e}),UT=(t=null,e={})=>{const n=t?pt.doctorsByClinic(t):pt.doctors();return ft({queryKey:n,queryFn:()=>Dt.getDoctors(t),staleTime:300*1e3,...e})},WT=(t,e={},n={})=>ft({queryKey:[...pt.doctorsByClinic(t),"detailed",e],queryFn:()=>Dt.getClinicDoctors(t,e),enabled:!!t,staleTime:300*1e3,...n}),B7=(t={})=>ft({queryKey:[...pt.clinics(),"default"],queryFn:()=>Dt.getDefaultClinic(),staleTime:1800*1e3,...t}),q7=(t={},e={})=>{const{clinicId:n,doctorId:s}=t;return ft({queryKey:pt.servicesWithPrice({clinicId:n,doctorId:s}),queryFn:()=>Dt.getServicesWithPrice(n,s),staleTime:300*1e3,...e})},H7=()=>{const t=ze();return{prefetchClinics:()=>{t.prefetchQuery({queryKey:pt.clinics(),queryFn:()=>Dt.getClinics(),staleTime:600*1e3})},prefetchDoctors:(a=null)=>{const l=a?pt.doctorsByClinic(a):pt.doctors();t.prefetchQuery({queryKey:l,queryFn:()=>Dt.getDoctors(a),staleTime:300*1e3})},prefetchStaticDataTypes:()=>{t.prefetchQuery({queryKey:pt.types(),queryFn:()=>Dt.getStaticDataTypes(),staleTime:1800*1e3})}}},Fg=({specialty_type:t="specialization"}={})=>{const e=ze();return Le({mutationFn:n=>Dt.createSpecialty(n,t),onSuccess:()=>{e.invalidateQueries({queryKey:[...pt.type(t),"withLabel"]})}})},z7=()=>{const t=ze();return Le({mutationFn:e=>Dt.createProblem(e),onSuccess:()=>{t.invalidateQueries({queryKey:[...pt.type("clinical_problems"),"withLabel"]})}})},V7=()=>{const t=ze();return Le({mutationFn:e=>Dt.createObservation(e),onSuccess:()=>{t.invalidateQueries({queryKey:[...pt.type("clinical_observations"),"withLabel"]})}})},U7=()=>{const t=ze();return Le({mutationFn:e=>Dt.createSpecialty(e,"prescription_medicine"),onSuccess:()=>{t.invalidateQueries({queryKey:[...pt.type("prescription_medicine"),"withLabel"]})}})},W7=()=>{const t=Nl();return["administrator",`${t}clinic_admin`,`${t}doctor`,`${t}receptionist`]},K7=()=>{const t=Nl();return["administrator",`${t}clinic_admin`,`${t}doctor`,`${t}receptionist`]},G7=()=>(Nl(),["administrator"]),Y7=()=>["administrator",`${Nl()}clinic_admin`],Q7=()=>{const t=Nl();return["administrator",`${t}clinic_admin`,`${t}doctor`,`${t}receptionist`]},Z7=()=>{const t=Nl();return["administrator",`${t}clinic_admin`,`${t}receptionist`]},X7=()=>{const t=Nl();return[`${t}doctor`,`${t}receptionist`]},Us={all:["doctorServices"],lists:()=>[...Us.all,"list"],list:t=>[...Us.lists(),{filters:t}],details:()=>[...Us.all,"detail"],detail:t=>[...Us.details(),t]},J7=(t={},e={})=>ft({queryKey:Us.list(t),queryFn:()=>jl.getDoctorServices(t),...e}),eH=(t,e={})=>ft({queryKey:Us.detail(t),queryFn:()=>jl.getDoctorService(t),enabled:!!t,...e}),tH=()=>{const t=ze();return Le({mutationFn:e=>jl.createDoctorService(e),onSuccess:()=>{t.invalidateQueries({queryKey:Us.lists()}),t.invalidateQueries({queryKey:pt.services()}),t.invalidateQueries({queryKey:["stats","service"]})}})},nH=()=>{const t=ze();return Le({mutationFn:({id:e,...n})=>jl.updateDoctorService(e,n),onSuccess:(e,n)=>{t.invalidateQueries({queryKey:Us.detail(n.id)}),t.invalidateQueries({queryKey:Us.lists()})}})},iH=()=>{const t=ze();return Le({mutationFn:e=>jl.deleteDoctorService(e),onSuccess:()=>{t.invalidateQueries({queryKey:Us.lists()}),t.invalidateQueries({queryKey:["stats","service"]})}})},sH=()=>{const t=ze();return Le({mutationFn:e=>jl.bulkDeleteDoctorServices(e),onSuccess:()=>{t.invalidateQueries({queryKey:Us.lists()}),t.invalidateQueries({queryKey:["stats","service"]})}})},aH=()=>{const t=ze();return Le({mutationFn:({ids:e,status:n})=>jl.bulkUpdateDoctorServiceStatus(e,n),onSuccess:()=>{t.invalidateQueries({queryKey:Us.lists()}),t.invalidateQueries({queryKey:["stats","service"]})}})};function KT(t,e,n){if(typeof t=="function"?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}function rH(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function ZN(t,e){return t.get(KT(t,e))}function lH(t,e,n){rH(t,e),e.set(t,n)}function oH(t,e,n){return t.set(KT(t,e),n),n}const cH=100,Lt={},dH=()=>{Lt.previousActiveElement instanceof HTMLElement?(Lt.previousActiveElement.focus(),Lt.previousActiveElement=null):document.body&&document.body.focus()},mH=t=>new Promise(e=>{if(!t)return e();const n=window.scrollX,s=window.scrollY;Lt.restoreFocusTimeout=setTimeout(()=>{dH(),e()},cH),window.scrollTo(n,s)}),GT="swal2-",uH=["container","shown","height-auto","iosfix","popup","modal","no-backdrop","no-transition","toast","toast-shown","show","hide","close","title","html-container","actions","confirm","deny","cancel","default-outline","footer","icon","icon-content","image","input","file","range","select","radio","checkbox","label","textarea","inputerror","input-label","validation-message","progress-steps","active-progress-step","progress-step","progress-step-line","loader","loading","styled","top","top-start","top-end","top-left","top-right","center","center-start","center-end","center-left","center-right","bottom","bottom-start","bottom-end","bottom-left","bottom-right","grow-row","grow-column","grow-fullscreen","rtl","timer-progress-bar","timer-progress-bar-container","scrollbar-measure","icon-success","icon-warning","icon-info","icon-question","icon-error","draggable","dragging"],Fe=uH.reduce((t,e)=>(t[e]=GT+e,t),{}),hH=["success","warning","info","question","error"],_p=hH.reduce((t,e)=>(t[e]=GT+e,t),{}),YT="SweetAlert2:",_k=t=>t.charAt(0).toUpperCase()+t.slice(1),Qi=t=>{console.warn(`${YT} ${typeof t=="object"?t.join(" "):t}`)},Co=t=>{console.error(`${YT} ${t}`)},XN=[],pH=t=>{XN.includes(t)||(XN.push(t),Qi(t))},QT=function(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;pH(`"${t}" is deprecated and will be removed in the next major release.${e?` Use "${e}" instead.`:""}`)},Lg=t=>typeof t=="function"?t():t,Sk=t=>t&&typeof t.toPromise=="function",Xm=t=>Sk(t)?t.toPromise():Promise.resolve(t),Ek=t=>t&&Promise.resolve(t)===t,Zi=()=>document.body.querySelector(`.${Fe.container}`),Jm=t=>{const e=Zi();return e?e.querySelector(t):null},Ds=t=>Jm(`.${t}`),mn=()=>Ds(Fe.popup),Jc=()=>Ds(Fe.icon),gH=()=>Ds(Fe["icon-content"]),ZT=()=>Ds(Fe.title),Tk=()=>Ds(Fe["html-container"]),XT=()=>Ds(Fe.image),Ak=()=>Ds(Fe["progress-steps"]),$g=()=>Ds(Fe["validation-message"]),za=()=>Jm(`.${Fe.actions} .${Fe.confirm}`),ed=()=>Jm(`.${Fe.actions} .${Fe.cancel}`),_o=()=>Jm(`.${Fe.actions} .${Fe.deny}`),fH=()=>Ds(Fe["input-label"]),td=()=>Jm(`.${Fe.loader}`),eu=()=>Ds(Fe.actions),JT=()=>Ds(Fe.footer),Bg=()=>Ds(Fe["timer-progress-bar"]),Dk=()=>Ds(Fe.close),vH=`
  a[href],
  area[href],
  input:not([disabled]),
  select:not([disabled]),
  textarea:not([disabled]),
  button:not([disabled]),
  iframe,
  object,
  embed,
  [tabindex="0"],
  [contenteditable],
  audio[controls],
  video[controls],
  summary
`,Rk=()=>{const t=mn();if(!t)return[];const e=t.querySelectorAll('[tabindex]:not([tabindex="-1"]):not([tabindex="0"])'),n=Array.from(e).sort((l,o)=>{const c=parseInt(l.getAttribute("tabindex")||"0"),d=parseInt(o.getAttribute("tabindex")||"0");return c>d?1:c<d?-1:0}),s=t.querySelectorAll(vH),a=Array.from(s).filter(l=>l.getAttribute("tabindex")!=="-1");return[...new Set(n.concat(a))].filter(l=>ms(l))},Pk=()=>jr(document.body,Fe.shown)&&!jr(document.body,Fe["toast-shown"])&&!jr(document.body,Fe["no-backdrop"]),qg=()=>{const t=mn();return t?jr(t,Fe.toast):!1},xH=()=>{const t=mn();return t?t.hasAttribute("data-loading"):!1},Rs=(t,e)=>{if(t.textContent="",e){const s=new DOMParser().parseFromString(e,"text/html"),a=s.querySelector("head");a&&Array.from(a.childNodes).forEach(o=>{t.appendChild(o)});const l=s.querySelector("body");l&&Array.from(l.childNodes).forEach(o=>{o instanceof HTMLVideoElement||o instanceof HTMLAudioElement?t.appendChild(o.cloneNode(!0)):t.appendChild(o)})}},jr=(t,e)=>{if(!e)return!1;const n=e.split(/\s+/);for(let s=0;s<n.length;s++)if(!t.classList.contains(n[s]))return!1;return!0},yH=(t,e)=>{Array.from(t.classList).forEach(n=>{!Object.values(Fe).includes(n)&&!Object.values(_p).includes(n)&&!Object.values(e.showClass||{}).includes(n)&&t.classList.remove(n)})},As=(t,e,n)=>{if(yH(t,e),!e.customClass)return;const s=e.customClass[n];if(s){if(typeof s!="string"&&!s.forEach){Qi(`Invalid type of customClass.${n}! Expected string or iterable object, got "${typeof s}"`);return}tn(t,s)}},Hg=(t,e)=>{if(!e)return null;switch(e){case"select":case"textarea":case"file":return t.querySelector(`.${Fe.popup} > .${Fe[e]}`);case"checkbox":return t.querySelector(`.${Fe.popup} > .${Fe.checkbox} input`);case"radio":return t.querySelector(`.${Fe.popup} > .${Fe.radio} input:checked`)||t.querySelector(`.${Fe.popup} > .${Fe.radio} input:first-child`);case"range":return t.querySelector(`.${Fe.popup} > .${Fe.range} input`);default:return t.querySelector(`.${Fe.popup} > .${Fe.input}`)}},eA=t=>{if(t.focus(),t.type!=="file"){const e=t.value;t.value="",t.value=e}},tA=(t,e,n)=>{!t||!e||(typeof e=="string"&&(e=e.split(/\s+/).filter(Boolean)),e.forEach(s=>{Array.isArray(t)?t.forEach(a=>{n?a.classList.add(s):a.classList.remove(s)}):n?t.classList.add(s):t.classList.remove(s)}))},tn=(t,e)=>{tA(t,e,!0)},ea=(t,e)=>{tA(t,e,!1)},el=(t,e)=>{const n=Array.from(t.children);for(let s=0;s<n.length;s++){const a=n[s];if(a instanceof HTMLElement&&jr(a,e))return a}},Zl=(t,e,n)=>{n===`${parseInt(n)}`&&(n=parseInt(n)),n||parseInt(n)===0?t.style.setProperty(e,typeof n=="number"?`${n}px`:n):t.style.removeProperty(e)},yi=function(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"flex";t&&(t.style.display=e)},$i=t=>{t&&(t.style.display="none")},Mk=function(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"block";t&&new MutationObserver(()=>{tu(t,t.innerHTML,e)}).observe(t,{childList:!0,subtree:!0})},JN=(t,e,n,s)=>{const a=t.querySelector(e);a&&a.style.setProperty(n,s)},tu=function(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"flex";e?yi(t,n):$i(t)},ms=t=>!!(t&&(t.offsetWidth||t.offsetHeight||t.getClientRects().length)),bH=()=>!ms(za())&&!ms(_o())&&!ms(ed()),e1=t=>t.scrollHeight>t.clientHeight,nA=t=>{const e=window.getComputedStyle(t),n=parseFloat(e.getPropertyValue("animation-duration")||"0"),s=parseFloat(e.getPropertyValue("transition-duration")||"0");return n>0||s>0},Ik=function(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const n=Bg();n&&ms(n)&&(e&&(n.style.transition="none",n.style.width="100%"),setTimeout(()=>{n.style.transition=`width ${t/1e3}s linear`,n.style.width="0%"},10))},kH=()=>{const t=Bg();if(!t)return;const e=parseInt(window.getComputedStyle(t).width);t.style.removeProperty("transition"),t.style.width="100%";const n=parseInt(window.getComputedStyle(t).width),s=e/n*100;t.style.width=`${s}%`},wH=()=>typeof window>"u"||typeof document>"u",jH=`
 <div aria-labelledby="${Fe.title}" aria-describedby="${Fe["html-container"]}" class="${Fe.popup}" tabindex="-1">
   <button type="button" class="${Fe.close}"></button>
   <ul class="${Fe["progress-steps"]}"></ul>
   <div class="${Fe.icon}"></div>
   <img class="${Fe.image}" />
   <h2 class="${Fe.title}" id="${Fe.title}"></h2>
   <div class="${Fe["html-container"]}" id="${Fe["html-container"]}"></div>
   <input class="${Fe.input}" id="${Fe.input}" />
   <input type="file" class="${Fe.file}" />
   <div class="${Fe.range}">
     <input type="range" />
     <output></output>
   </div>
   <select class="${Fe.select}" id="${Fe.select}"></select>
   <div class="${Fe.radio}"></div>
   <label class="${Fe.checkbox}">
     <input type="checkbox" id="${Fe.checkbox}" />
     <span class="${Fe.label}"></span>
   </label>
   <textarea class="${Fe.textarea}" id="${Fe.textarea}"></textarea>
   <div class="${Fe["validation-message"]}" id="${Fe["validation-message"]}"></div>
   <div class="${Fe.actions}">
     <div class="${Fe.loader}"></div>
     <button type="button" class="${Fe.confirm}"></button>
     <button type="button" class="${Fe.deny}"></button>
     <button type="button" class="${Fe.cancel}"></button>
   </div>
   <div class="${Fe.footer}"></div>
   <div class="${Fe["timer-progress-bar-container"]}">
     <div class="${Fe["timer-progress-bar"]}"></div>
   </div>
 </div>
`.replace(/(^|\n)\s*/g,""),NH=()=>{const t=Zi();return t?(t.remove(),ea([document.documentElement,document.body],[Fe["no-backdrop"],Fe["toast-shown"],Fe["has-column"]]),!0):!1},Ol=()=>{Lt.currentInstance.resetValidationMessage()},CH=()=>{const t=mn(),e=el(t,Fe.input),n=el(t,Fe.file),s=t.querySelector(`.${Fe.range} input`),a=t.querySelector(`.${Fe.range} output`),l=el(t,Fe.select),o=t.querySelector(`.${Fe.checkbox} input`),c=el(t,Fe.textarea);e.oninput=Ol,n.onchange=Ol,l.onchange=Ol,o.onchange=Ol,c.oninput=Ol,s.oninput=()=>{Ol(),a.value=s.value},s.onchange=()=>{Ol(),a.value=s.value}},_H=t=>typeof t=="string"?document.querySelector(t):t,SH=t=>{const e=mn();e.setAttribute("role",t.toast?"alert":"dialog"),e.setAttribute("aria-live",t.toast?"polite":"assertive"),t.toast||e.setAttribute("aria-modal","true")},EH=t=>{window.getComputedStyle(t).direction==="rtl"&&tn(Zi(),Fe.rtl)},TH=t=>{const e=NH();if(wH()){Co("SweetAlert2 requires document to initialize");return}const n=document.createElement("div");n.className=Fe.container,e&&tn(n,Fe["no-transition"]),Rs(n,jH),n.dataset.swal2Theme=t.theme;const s=_H(t.target);s.appendChild(n),SH(t),EH(s),CH()},Ok=(t,e)=>{t instanceof HTMLElement?e.appendChild(t):typeof t=="object"?AH(t,e):t&&Rs(e,t)},AH=(t,e)=>{t.jquery?DH(e,t):Rs(e,t.toString())},DH=(t,e)=>{if(t.textContent="",0 in e)for(let n=0;n in e;n++)t.appendChild(e[n].cloneNode(!0));else t.appendChild(e.cloneNode(!0))},RH=(t,e)=>{const n=eu(),s=td();!n||!s||(!e.showConfirmButton&&!e.showDenyButton&&!e.showCancelButton?$i(n):yi(n),As(n,e,"actions"),PH(n,s,e),Rs(s,e.loaderHtml||""),As(s,e,"loader"))};function PH(t,e,n){const s=za(),a=_o(),l=ed();!s||!a||!l||(Av(s,"confirm",n),Av(a,"deny",n),Av(l,"cancel",n),MH(s,a,l,n),n.reverseButtons&&(n.toast?(t.insertBefore(l,s),t.insertBefore(a,s)):(t.insertBefore(l,e),t.insertBefore(a,e),t.insertBefore(s,e))))}function MH(t,e,n,s){if(!s.buttonsStyling){ea([t,e,n],Fe.styled);return}tn([t,e,n],Fe.styled),s.confirmButtonColor&&(t.style.backgroundColor=s.confirmButtonColor,tn(t,Fe["default-outline"])),s.denyButtonColor&&(e.style.backgroundColor=s.denyButtonColor,tn(e,Fe["default-outline"])),s.cancelButtonColor&&(n.style.backgroundColor=s.cancelButtonColor,tn(n,Fe["default-outline"]))}function Av(t,e,n){const s=_k(e);tu(t,n[`show${s}Button`],"inline-block"),Rs(t,n[`${e}ButtonText`]||""),t.setAttribute("aria-label",n[`${e}ButtonAriaLabel`]||""),t.className=Fe[e],As(t,n,`${e}Button`)}const IH=(t,e)=>{const n=Dk();n&&(Rs(n,e.closeButtonHtml||""),As(n,e,"closeButton"),tu(n,e.showCloseButton),n.setAttribute("aria-label",e.closeButtonAriaLabel||""))},OH=(t,e)=>{const n=Zi();n&&(FH(n,e.backdrop),LH(n,e.position),$H(n,e.grow),As(n,e,"container"))};function FH(t,e){typeof e=="string"?t.style.background=e:e||tn([document.documentElement,document.body],Fe["no-backdrop"])}function LH(t,e){e&&(e in Fe?tn(t,Fe[e]):(Qi('The "position" parameter is not valid, defaulting to "center"'),tn(t,Fe.center)))}function $H(t,e){e&&tn(t,Fe[`grow-${e}`])}var Fn={innerParams:new WeakMap,domCache:new WeakMap};const BH=["input","file","range","select","radio","checkbox","textarea"],qH=(t,e)=>{const n=mn();if(!n)return;const s=Fn.innerParams.get(t),a=!s||e.input!==s.input;BH.forEach(l=>{const o=el(n,Fe[l]);o&&(VH(l,e.inputAttributes),o.className=Fe[l],a&&$i(o))}),e.input&&(a&&HH(e),UH(e))},HH=t=>{if(!t.input)return;if(!ni[t.input]){Co(`Unexpected type of input! Expected ${Object.keys(ni).join(" | ")}, got "${t.input}"`);return}const e=iA(t.input);if(!e)return;const n=ni[t.input](e,t);yi(e),t.inputAutoFocus&&setTimeout(()=>{eA(n)})},zH=t=>{for(let e=0;e<t.attributes.length;e++){const n=t.attributes[e].name;["id","type","value","style"].includes(n)||t.removeAttribute(n)}},VH=(t,e)=>{const n=mn();if(!n)return;const s=Hg(n,t);if(s){zH(s);for(const a in e)s.setAttribute(a,e[a])}},UH=t=>{if(!t.input)return;const e=iA(t.input);e&&As(e,t,"input")},Fk=(t,e)=>{!t.placeholder&&e.inputPlaceholder&&(t.placeholder=e.inputPlaceholder)},nu=(t,e,n)=>{if(n.inputLabel){const s=document.createElement("label"),a=Fe["input-label"];s.setAttribute("for",t.id),s.className=a,typeof n.customClass=="object"&&tn(s,n.customClass.inputLabel),s.innerText=n.inputLabel,e.insertAdjacentElement("beforebegin",s)}},iA=t=>{const e=mn();if(e)return el(e,Fe[t]||Fe.input)},Sp=(t,e)=>{["string","number"].includes(typeof e)?t.value=`${e}`:Ek(e)||Qi(`Unexpected type of inputValue! Expected "string", "number" or "Promise", got "${typeof e}"`)},ni={};ni.text=ni.email=ni.password=ni.number=ni.tel=ni.url=ni.search=ni.date=ni["datetime-local"]=ni.time=ni.week=ni.month=(t,e)=>(Sp(t,e.inputValue),nu(t,t,e),Fk(t,e),t.type=e.input,t);ni.file=(t,e)=>(nu(t,t,e),Fk(t,e),t);ni.range=(t,e)=>{const n=t.querySelector("input"),s=t.querySelector("output");return Sp(n,e.inputValue),n.type=e.input,Sp(s,e.inputValue),nu(n,t,e),t};ni.select=(t,e)=>{if(t.textContent="",e.inputPlaceholder){const n=document.createElement("option");Rs(n,e.inputPlaceholder),n.value="",n.disabled=!0,n.selected=!0,t.appendChild(n)}return nu(t,t,e),t};ni.radio=t=>(t.textContent="",t);ni.checkbox=(t,e)=>{const n=Hg(mn(),"checkbox");n.value="1",n.checked=!!e.inputValue;const s=t.querySelector("span");return Rs(s,e.inputPlaceholder||e.inputLabel),n};ni.textarea=(t,e)=>{Sp(t,e.inputValue),Fk(t,e),nu(t,t,e);const n=s=>parseInt(window.getComputedStyle(s).marginLeft)+parseInt(window.getComputedStyle(s).marginRight);return setTimeout(()=>{if("MutationObserver"in window){const s=parseInt(window.getComputedStyle(mn()).width),a=()=>{if(!document.body.contains(t))return;const l=t.offsetWidth+n(t);l>s?mn().style.width=`${l}px`:Zl(mn(),"width",e.width)};new MutationObserver(a).observe(t,{attributes:!0,attributeFilter:["style"]})}}),t};const WH=(t,e)=>{const n=Tk();n&&(Mk(n),As(n,e,"htmlContainer"),e.html?(Ok(e.html,n),yi(n,"block")):e.text?(n.textContent=e.text,yi(n,"block")):$i(n),qH(t,e))},KH=(t,e)=>{const n=JT();n&&(Mk(n),tu(n,e.footer,"block"),e.footer&&Ok(e.footer,n),As(n,e,"footer"))},GH=(t,e)=>{const n=Fn.innerParams.get(t),s=Jc();if(!s)return;if(n&&e.icon===n.icon){n1(s,e),t1(s,e);return}if(!e.icon&&!e.iconHtml){$i(s);return}if(e.icon&&Object.keys(_p).indexOf(e.icon)===-1){Co(`Unknown icon! Expected "success", "error", "warning", "info" or "question", got "${e.icon}"`),$i(s);return}yi(s),n1(s,e),t1(s,e),tn(s,e.showClass&&e.showClass.icon),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",sA)},t1=(t,e)=>{for(const[n,s]of Object.entries(_p))e.icon!==n&&ea(t,s);tn(t,e.icon&&_p[e.icon]),ZH(t,e),sA(),As(t,e,"icon")},sA=()=>{const t=mn();if(!t)return;const e=window.getComputedStyle(t).getPropertyValue("background-color"),n=t.querySelectorAll("[class^=swal2-success-circular-line], .swal2-success-fix");for(let s=0;s<n.length;s++)n[s].style.backgroundColor=e},YH=`
  <div class="swal2-success-circular-line-left"></div>
  <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>
  <div class="swal2-success-ring"></div> <div class="swal2-success-fix"></div>
  <div class="swal2-success-circular-line-right"></div>
`,QH=`
  <span class="swal2-x-mark">
    <span class="swal2-x-mark-line-left"></span>
    <span class="swal2-x-mark-line-right"></span>
  </span>
`,n1=(t,e)=>{if(!e.icon&&!e.iconHtml)return;let n=t.innerHTML,s="";e.iconHtml?s=i1(e.iconHtml):e.icon==="success"?(s=YH,n=n.replace(/ style=".*?"/g,"")):e.icon==="error"?s=QH:e.icon&&(s=i1({question:"?",warning:"!",info:"i"}[e.icon])),n.trim()!==s.trim()&&Rs(t,s)},ZH=(t,e)=>{if(e.iconColor){t.style.color=e.iconColor,t.style.borderColor=e.iconColor;for(const n of[".swal2-success-line-tip",".swal2-success-line-long",".swal2-x-mark-line-left",".swal2-x-mark-line-right"])JN(t,n,"background-color",e.iconColor);JN(t,".swal2-success-ring","border-color",e.iconColor)}},i1=t=>`<div class="${Fe["icon-content"]}">${t}</div>`,XH=(t,e)=>{const n=XT();if(n){if(!e.imageUrl){$i(n);return}yi(n,""),n.setAttribute("src",e.imageUrl),n.setAttribute("alt",e.imageAlt||""),Zl(n,"width",e.imageWidth),Zl(n,"height",e.imageHeight),n.className=Fe.image,As(n,e,"image")}};let Lk=!1,aA=0,rA=0,lA=0,oA=0;const JH=t=>{t.addEventListener("mousedown",Ep),document.body.addEventListener("mousemove",Tp),t.addEventListener("mouseup",Ap),t.addEventListener("touchstart",Ep),document.body.addEventListener("touchmove",Tp),t.addEventListener("touchend",Ap)},ez=t=>{t.removeEventListener("mousedown",Ep),document.body.removeEventListener("mousemove",Tp),t.removeEventListener("mouseup",Ap),t.removeEventListener("touchstart",Ep),document.body.removeEventListener("touchmove",Tp),t.removeEventListener("touchend",Ap)},Ep=t=>{const e=mn();if(t.target===e||Jc().contains(t.target)){Lk=!0;const n=cA(t);aA=n.clientX,rA=n.clientY,lA=parseInt(e.style.insetInlineStart)||0,oA=parseInt(e.style.insetBlockStart)||0,tn(e,"swal2-dragging")}},Tp=t=>{const e=mn();if(Lk){let{clientX:n,clientY:s}=cA(t);e.style.insetInlineStart=`${lA+(n-aA)}px`,e.style.insetBlockStart=`${oA+(s-rA)}px`}},Ap=()=>{const t=mn();Lk=!1,ea(t,"swal2-dragging")},cA=t=>{let e=0,n=0;return t.type.startsWith("mouse")?(e=t.clientX,n=t.clientY):t.type.startsWith("touch")&&(e=t.touches[0].clientX,n=t.touches[0].clientY),{clientX:e,clientY:n}},tz=(t,e)=>{const n=Zi(),s=mn();if(!(!n||!s)){if(e.toast){Zl(n,"width",e.width),s.style.width="100%";const a=td();a&&s.insertBefore(a,Jc())}else Zl(s,"width",e.width);Zl(s,"padding",e.padding),e.color&&(s.style.color=e.color),e.background&&(s.style.background=e.background),$i($g()),nz(s,e),e.draggable&&!e.toast?(tn(s,Fe.draggable),JH(s)):(ea(s,Fe.draggable),ez(s))}},nz=(t,e)=>{const n=e.showClass||{};t.className=`${Fe.popup} ${ms(t)?n.popup:""}`,e.toast?(tn([document.documentElement,document.body],Fe["toast-shown"]),tn(t,Fe.toast)):tn(t,Fe.modal),As(t,e,"popup"),typeof e.customClass=="string"&&tn(t,e.customClass),e.icon&&tn(t,Fe[`icon-${e.icon}`])},iz=(t,e)=>{const n=Ak();if(!n)return;const{progressSteps:s,currentProgressStep:a}=e;if(!s||s.length===0||a===void 0){$i(n);return}yi(n),n.textContent="",a>=s.length&&Qi("Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)"),s.forEach((l,o)=>{const c=sz(l);if(n.appendChild(c),o===a&&tn(c,Fe["active-progress-step"]),o!==s.length-1){const d=az(e);n.appendChild(d)}})},sz=t=>{const e=document.createElement("li");return tn(e,Fe["progress-step"]),Rs(e,t),e},az=t=>{const e=document.createElement("li");return tn(e,Fe["progress-step-line"]),t.progressStepsDistance&&Zl(e,"width",t.progressStepsDistance),e},rz=(t,e)=>{const n=ZT();n&&(Mk(n),tu(n,e.title||e.titleText,"block"),e.title&&Ok(e.title,n),e.titleText&&(n.innerText=e.titleText),As(n,e,"title"))},dA=(t,e)=>{tz(t,e),OH(t,e),iz(t,e),GH(t,e),XH(t,e),rz(t,e),IH(t,e),WH(t,e),RH(t,e),KH(t,e);const n=mn();typeof e.didRender=="function"&&n&&e.didRender(n),Lt.eventEmitter.emit("didRender",n)},lz=()=>ms(mn()),mA=()=>{var t;return(t=za())===null||t===void 0?void 0:t.click()},oz=()=>{var t;return(t=_o())===null||t===void 0?void 0:t.click()},cz=()=>{var t;return(t=ed())===null||t===void 0?void 0:t.click()},nd=Object.freeze({cancel:"cancel",backdrop:"backdrop",close:"close",esc:"esc",timer:"timer"}),uA=t=>{t.keydownTarget&&t.keydownHandlerAdded&&(t.keydownTarget.removeEventListener("keydown",t.keydownHandler,{capture:t.keydownListenerCapture}),t.keydownHandlerAdded=!1)},dz=(t,e,n)=>{uA(t),e.toast||(t.keydownHandler=s=>uz(e,s,n),t.keydownTarget=e.keydownListenerCapture?window:mn(),t.keydownListenerCapture=e.keydownListenerCapture,t.keydownTarget.addEventListener("keydown",t.keydownHandler,{capture:t.keydownListenerCapture}),t.keydownHandlerAdded=!0)},oy=(t,e)=>{var n;const s=Rk();if(s.length){t=t+e,t===s.length?t=0:t===-1&&(t=s.length-1),s[t].focus();return}(n=mn())===null||n===void 0||n.focus()},hA=["ArrowRight","ArrowDown"],mz=["ArrowLeft","ArrowUp"],uz=(t,e,n)=>{t&&(e.isComposing||e.keyCode===229||(t.stopKeydownPropagation&&e.stopPropagation(),e.key==="Enter"?hz(e,t):e.key==="Tab"?pz(e):[...hA,...mz].includes(e.key)?gz(e.key):e.key==="Escape"&&fz(e,t,n)))},hz=(t,e)=>{if(!Lg(e.allowEnterKey))return;const n=Hg(mn(),e.input);if(t.target&&n&&t.target instanceof HTMLElement&&t.target.outerHTML===n.outerHTML){if(["textarea","file"].includes(e.input))return;mA(),t.preventDefault()}},pz=t=>{const e=t.target,n=Rk();let s=-1;for(let a=0;a<n.length;a++)if(e===n[a]){s=a;break}t.shiftKey?oy(s,-1):oy(s,1),t.stopPropagation(),t.preventDefault()},gz=t=>{const e=eu(),n=za(),s=_o(),a=ed();if(!e||!n||!s||!a)return;const l=[n,s,a];if(document.activeElement instanceof HTMLElement&&!l.includes(document.activeElement))return;const o=hA.includes(t)?"nextElementSibling":"previousElementSibling";let c=document.activeElement;if(c){for(let d=0;d<e.children.length;d++){if(c=c[o],!c)return;if(c instanceof HTMLButtonElement&&ms(c))break}c instanceof HTMLButtonElement&&c.focus()}},fz=(t,e,n)=>{Lg(e.allowEscapeKey)&&(t.preventDefault(),n(nd.esc))};var Fc={swalPromiseResolve:new WeakMap,swalPromiseReject:new WeakMap};const vz=()=>{const t=Zi();Array.from(document.body.children).forEach(n=>{n.contains(t)||(n.hasAttribute("aria-hidden")&&n.setAttribute("data-previous-aria-hidden",n.getAttribute("aria-hidden")||""),n.setAttribute("aria-hidden","true"))})},pA=()=>{Array.from(document.body.children).forEach(e=>{e.hasAttribute("data-previous-aria-hidden")?(e.setAttribute("aria-hidden",e.getAttribute("data-previous-aria-hidden")||""),e.removeAttribute("data-previous-aria-hidden")):e.removeAttribute("aria-hidden")})},gA=typeof window<"u"&&!!window.GestureEvent,xz=()=>{if(gA&&!jr(document.body,Fe.iosfix)){const t=document.body.scrollTop;document.body.style.top=`${t*-1}px`,tn(document.body,Fe.iosfix),yz()}},yz=()=>{const t=Zi();if(!t)return;let e;t.ontouchstart=n=>{e=bz(n)},t.ontouchmove=n=>{e&&(n.preventDefault(),n.stopPropagation())}},bz=t=>{const e=t.target,n=Zi(),s=Tk();return!n||!s||kz(t)||wz(t)?!1:e===n||!e1(n)&&e instanceof HTMLElement&&e.tagName!=="INPUT"&&e.tagName!=="TEXTAREA"&&!(e1(s)&&s.contains(e))},kz=t=>t.touches&&t.touches.length&&t.touches[0].touchType==="stylus",wz=t=>t.touches&&t.touches.length>1,jz=()=>{if(jr(document.body,Fe.iosfix)){const t=parseInt(document.body.style.top,10);ea(document.body,Fe.iosfix),document.body.style.top="",document.body.scrollTop=t*-1}},Nz=()=>{const t=document.createElement("div");t.className=Fe["scrollbar-measure"],document.body.appendChild(t);const e=t.getBoundingClientRect().width-t.clientWidth;return document.body.removeChild(t),e};let vc=null;const Cz=t=>{vc===null&&(document.body.scrollHeight>window.innerHeight||t==="scroll")&&(vc=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")),document.body.style.paddingRight=`${vc+Nz()}px`)},_z=()=>{vc!==null&&(document.body.style.paddingRight=`${vc}px`,vc=null)};function fA(t,e,n,s){qg()?s1(t,s):(mH(n).then(()=>s1(t,s)),uA(Lt)),gA?(e.setAttribute("style","display:none !important"),e.removeAttribute("class"),e.innerHTML=""):e.remove(),Pk()&&(_z(),jz(),pA()),Sz()}function Sz(){ea([document.documentElement,document.body],[Fe.shown,Fe["height-auto"],Fe["no-backdrop"],Fe["toast-shown"]])}function tl(t){t=Tz(t);const e=Fc.swalPromiseResolve.get(this),n=Ez(this);this.isAwaitingPromise?t.isDismissed||(iu(this),e(t)):n&&e(t)}const Ez=t=>{const e=mn();if(!e)return!1;const n=Fn.innerParams.get(t);if(!n||jr(e,n.hideClass.popup))return!1;ea(e,n.showClass.popup),tn(e,n.hideClass.popup);const s=Zi();return ea(s,n.showClass.backdrop),tn(s,n.hideClass.backdrop),Az(t,e,n),!0};function vA(t){const e=Fc.swalPromiseReject.get(this);iu(this),e&&e(t)}const iu=t=>{t.isAwaitingPromise&&(delete t.isAwaitingPromise,Fn.innerParams.get(t)||t._destroy())},Tz=t=>typeof t>"u"?{isConfirmed:!1,isDenied:!1,isDismissed:!0}:Object.assign({isConfirmed:!1,isDenied:!1,isDismissed:!1},t),Az=(t,e,n)=>{var s;const a=Zi(),l=nA(e);typeof n.willClose=="function"&&n.willClose(e),(s=Lt.eventEmitter)===null||s===void 0||s.emit("willClose",e),l?Dz(t,e,a,n.returnFocus,n.didClose):fA(t,a,n.returnFocus,n.didClose)},Dz=(t,e,n,s,a)=>{Lt.swalCloseEventFinishedCallback=fA.bind(null,t,n,s,a);const l=function(o){if(o.target===e){var c;(c=Lt.swalCloseEventFinishedCallback)===null||c===void 0||c.call(Lt),delete Lt.swalCloseEventFinishedCallback,e.removeEventListener("animationend",l),e.removeEventListener("transitionend",l)}};e.addEventListener("animationend",l),e.addEventListener("transitionend",l)},s1=(t,e)=>{setTimeout(()=>{var n;typeof e=="function"&&e.bind(t.params)(),(n=Lt.eventEmitter)===null||n===void 0||n.emit("didClose"),t._destroy&&t._destroy()})},Lc=t=>{let e=mn();if(e||new At,e=mn(),!e)return;const n=td();qg()?$i(Jc()):Rz(e,t),yi(n),e.setAttribute("data-loading","true"),e.setAttribute("aria-busy","true"),e.focus()},Rz=(t,e)=>{const n=eu(),s=td();!n||!s||(!e&&ms(za())&&(e=za()),yi(n),e&&($i(e),s.setAttribute("data-button-to-replace",e.className),n.insertBefore(s,e)),tn([t,n],Fe.loading))},Pz=(t,e)=>{e.input==="select"||e.input==="radio"?Lz(t,e):["text","email","number","tel","textarea"].some(n=>n===e.input)&&(Sk(e.inputValue)||Ek(e.inputValue))&&(Lc(za()),$z(t,e))},Mz=(t,e)=>{const n=t.getInput();if(!n)return null;switch(e.input){case"checkbox":return Iz(n);case"radio":return Oz(n);case"file":return Fz(n);default:return e.inputAutoTrim?n.value.trim():n.value}},Iz=t=>t.checked?1:0,Oz=t=>t.checked?t.value:null,Fz=t=>t.files&&t.files.length?t.getAttribute("multiple")!==null?t.files:t.files[0]:null,Lz=(t,e)=>{const n=mn();if(!n)return;const s=a=>{e.input==="select"?Bz(n,Dp(a),e):e.input==="radio"&&qz(n,Dp(a),e)};Sk(e.inputOptions)||Ek(e.inputOptions)?(Lc(za()),Xm(e.inputOptions).then(a=>{t.hideLoading(),s(a)})):typeof e.inputOptions=="object"?s(e.inputOptions):Co(`Unexpected type of inputOptions! Expected object, Map or Promise, got ${typeof e.inputOptions}`)},$z=(t,e)=>{const n=t.getInput();n&&($i(n),Xm(e.inputValue).then(s=>{n.value=e.input==="number"?`${parseFloat(s)||0}`:`${s}`,yi(n),n.focus(),t.hideLoading()}).catch(s=>{Co(`Error in inputValue promise: ${s}`),n.value="",yi(n),n.focus(),t.hideLoading()}))};function Bz(t,e,n){const s=el(t,Fe.select);if(!s)return;const a=(l,o,c)=>{const d=document.createElement("option");d.value=c,Rs(d,o),d.selected=xA(c,n.inputValue),l.appendChild(d)};e.forEach(l=>{const o=l[0],c=l[1];if(Array.isArray(c)){const d=document.createElement("optgroup");d.label=o,d.disabled=!1,s.appendChild(d),c.forEach(m=>a(d,m[1],m[0]))}else a(s,c,o)}),s.focus()}function qz(t,e,n){const s=el(t,Fe.radio);if(!s)return;e.forEach(l=>{const o=l[0],c=l[1],d=document.createElement("input"),m=document.createElement("label");d.type="radio",d.name=Fe.radio,d.value=o,xA(o,n.inputValue)&&(d.checked=!0);const u=document.createElement("span");Rs(u,c),u.className=Fe.label,m.appendChild(d),m.appendChild(u),s.appendChild(m)});const a=s.querySelectorAll("input");a.length&&a[0].focus()}const Dp=t=>{const e=[];return t instanceof Map?t.forEach((n,s)=>{let a=n;typeof a=="object"&&(a=Dp(a)),e.push([s,a])}):Object.keys(t).forEach(n=>{let s=t[n];typeof s=="object"&&(s=Dp(s)),e.push([n,s])}),e},xA=(t,e)=>!!e&&e.toString()===t.toString(),Hz=t=>{const e=Fn.innerParams.get(t);t.disableButtons(),e.input?yA(t,"confirm"):Bk(t,!0)},zz=t=>{const e=Fn.innerParams.get(t);t.disableButtons(),e.returnInputValueOnDeny?yA(t,"deny"):$k(t,!1)},Vz=(t,e)=>{t.disableButtons(),e(nd.cancel)},yA=(t,e)=>{const n=Fn.innerParams.get(t);if(!n.input){Co(`The "input" parameter is needed to be set when using returnInputValueOn${_k(e)}`);return}const s=t.getInput(),a=Mz(t,n);n.inputValidator?Uz(t,a,e):s&&!s.checkValidity()?(t.enableButtons(),t.showValidationMessage(n.validationMessage||s.validationMessage)):e==="deny"?$k(t,a):Bk(t,a)},Uz=(t,e,n)=>{const s=Fn.innerParams.get(t);t.disableInput(),Promise.resolve().then(()=>Xm(s.inputValidator(e,s.validationMessage))).then(l=>{t.enableButtons(),t.enableInput(),l?t.showValidationMessage(l):n==="deny"?$k(t,e):Bk(t,e)})},$k=(t,e)=>{const n=Fn.innerParams.get(t||void 0);n.showLoaderOnDeny&&Lc(_o()),n.preDeny?(t.isAwaitingPromise=!0,Promise.resolve().then(()=>Xm(n.preDeny(e,n.validationMessage))).then(a=>{a===!1?(t.hideLoading(),iu(t)):t.close({isDenied:!0,value:typeof a>"u"?e:a})}).catch(a=>bA(t||void 0,a))):t.close({isDenied:!0,value:e})},a1=(t,e)=>{t.close({isConfirmed:!0,value:e})},bA=(t,e)=>{t.rejectPromise(e)},Bk=(t,e)=>{const n=Fn.innerParams.get(t||void 0);n.showLoaderOnConfirm&&Lc(),n.preConfirm?(t.resetValidationMessage(),t.isAwaitingPromise=!0,Promise.resolve().then(()=>Xm(n.preConfirm(e,n.validationMessage))).then(a=>{ms($g())||a===!1?(t.hideLoading(),iu(t)):a1(t,typeof a>"u"?e:a)}).catch(a=>bA(t||void 0,a))):a1(t,e)};function Rp(){const t=Fn.innerParams.get(this);if(!t)return;const e=Fn.domCache.get(this);$i(e.loader),qg()?t.icon&&yi(Jc()):Wz(e),ea([e.popup,e.actions],Fe.loading),e.popup.removeAttribute("aria-busy"),e.popup.removeAttribute("data-loading"),e.confirmButton.disabled=!1,e.denyButton.disabled=!1,e.cancelButton.disabled=!1}const Wz=t=>{const e=t.popup.getElementsByClassName(t.loader.getAttribute("data-button-to-replace"));e.length?yi(e[0],"inline-block"):bH()&&$i(t.actions)};function kA(){const t=Fn.innerParams.get(this),e=Fn.domCache.get(this);return e?Hg(e.popup,t.input):null}function wA(t,e,n){const s=Fn.domCache.get(t);e.forEach(a=>{s[a].disabled=n})}function jA(t,e){const n=mn();if(!(!n||!t))if(t.type==="radio"){const s=n.querySelectorAll(`[name="${Fe.radio}"]`);for(let a=0;a<s.length;a++)s[a].disabled=e}else t.disabled=e}function NA(){wA(this,["confirmButton","denyButton","cancelButton"],!1)}function CA(){wA(this,["confirmButton","denyButton","cancelButton"],!0)}function _A(){jA(this.getInput(),!1)}function SA(){jA(this.getInput(),!0)}function EA(t){const e=Fn.domCache.get(this),n=Fn.innerParams.get(this);Rs(e.validationMessage,t),e.validationMessage.className=Fe["validation-message"],n.customClass&&n.customClass.validationMessage&&tn(e.validationMessage,n.customClass.validationMessage),yi(e.validationMessage);const s=this.getInput();s&&(s.setAttribute("aria-invalid","true"),s.setAttribute("aria-describedby",Fe["validation-message"]),eA(s),tn(s,Fe.inputerror))}function TA(){const t=Fn.domCache.get(this);t.validationMessage&&$i(t.validationMessage);const e=this.getInput();e&&(e.removeAttribute("aria-invalid"),e.removeAttribute("aria-describedby"),ea(e,Fe.inputerror))}const xc={title:"",titleText:"",text:"",html:"",footer:"",icon:void 0,iconColor:void 0,iconHtml:void 0,template:void 0,toast:!1,draggable:!1,animation:!0,theme:"light",showClass:{popup:"swal2-show",backdrop:"swal2-backdrop-show",icon:"swal2-icon-show"},hideClass:{popup:"swal2-hide",backdrop:"swal2-backdrop-hide",icon:"swal2-icon-hide"},customClass:{},target:"body",color:void 0,backdrop:!0,heightAuto:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,stopKeydownPropagation:!0,keydownListenerCapture:!1,showConfirmButton:!0,showDenyButton:!1,showCancelButton:!1,preConfirm:void 0,preDeny:void 0,confirmButtonText:"OK",confirmButtonAriaLabel:"",confirmButtonColor:void 0,denyButtonText:"No",denyButtonAriaLabel:"",denyButtonColor:void 0,cancelButtonText:"Cancel",cancelButtonAriaLabel:"",cancelButtonColor:void 0,buttonsStyling:!0,reverseButtons:!1,focusConfirm:!0,focusDeny:!1,focusCancel:!1,returnFocus:!0,showCloseButton:!1,closeButtonHtml:"&times;",closeButtonAriaLabel:"Close this dialog",loaderHtml:"",showLoaderOnConfirm:!1,showLoaderOnDeny:!1,imageUrl:void 0,imageWidth:void 0,imageHeight:void 0,imageAlt:"",timer:void 0,timerProgressBar:!1,width:void 0,padding:void 0,background:void 0,input:void 0,inputPlaceholder:"",inputLabel:"",inputValue:"",inputOptions:{},inputAutoFocus:!0,inputAutoTrim:!0,inputAttributes:{},inputValidator:void 0,returnInputValueOnDeny:!1,validationMessage:void 0,grow:!1,position:"center",progressSteps:[],currentProgressStep:void 0,progressStepsDistance:void 0,willOpen:void 0,didOpen:void 0,didRender:void 0,willClose:void 0,didClose:void 0,didDestroy:void 0,scrollbarPadding:!0},Kz=["allowEscapeKey","allowOutsideClick","background","buttonsStyling","cancelButtonAriaLabel","cancelButtonColor","cancelButtonText","closeButtonAriaLabel","closeButtonHtml","color","confirmButtonAriaLabel","confirmButtonColor","confirmButtonText","currentProgressStep","customClass","denyButtonAriaLabel","denyButtonColor","denyButtonText","didClose","didDestroy","draggable","footer","hideClass","html","icon","iconColor","iconHtml","imageAlt","imageHeight","imageUrl","imageWidth","preConfirm","preDeny","progressSteps","returnFocus","reverseButtons","showCancelButton","showCloseButton","showConfirmButton","showDenyButton","text","title","titleText","theme","willClose"],Gz={allowEnterKey:void 0},Yz=["allowOutsideClick","allowEnterKey","backdrop","draggable","focusConfirm","focusDeny","focusCancel","returnFocus","heightAuto","keydownListenerCapture"],AA=t=>Object.prototype.hasOwnProperty.call(xc,t),DA=t=>Kz.indexOf(t)!==-1,RA=t=>Gz[t],Qz=t=>{AA(t)||Qi(`Unknown parameter "${t}"`)},Zz=t=>{Yz.includes(t)&&Qi(`The parameter "${t}" is incompatible with toasts`)},Xz=t=>{const e=RA(t);e&&QT(t,e)},PA=t=>{t.backdrop===!1&&t.allowOutsideClick&&Qi('"allowOutsideClick" parameter requires `backdrop` parameter to be set to `true`'),t.theme&&!["light","dark","auto","borderless","embed-iframe"].includes(t.theme)&&Qi(`Invalid theme "${t.theme}". Expected "light", "dark", "auto", "borderless", or "embed-iframe"`);for(const e in t)Qz(e),t.toast&&Zz(e),Xz(e)};function MA(t){const e=Zi(),n=mn(),s=Fn.innerParams.get(this);if(!n||jr(n,s.hideClass.popup)){Qi("You're trying to update the closed or closing popup, that won't work. Use the update() method in preConfirm parameter or show a new popup.");return}const a=Jz(t),l=Object.assign({},s,a);PA(l),e.dataset.swal2Theme=l.theme,dA(this,l),Fn.innerParams.set(this,l),Object.defineProperties(this,{params:{value:Object.assign({},this.params,t),writable:!1,enumerable:!0}})}const Jz=t=>{const e={};return Object.keys(t).forEach(n=>{DA(n)?e[n]=t[n]:Qi(`Invalid parameter to update: ${n}`)}),e};function IA(){const t=Fn.domCache.get(this),e=Fn.innerParams.get(this);if(!e){OA(this);return}t.popup&&Lt.swalCloseEventFinishedCallback&&(Lt.swalCloseEventFinishedCallback(),delete Lt.swalCloseEventFinishedCallback),typeof e.didDestroy=="function"&&e.didDestroy(),Lt.eventEmitter.emit("didDestroy"),eV(this)}const eV=t=>{OA(t),delete t.params,delete Lt.keydownHandler,delete Lt.keydownTarget,delete Lt.currentInstance},OA=t=>{t.isAwaitingPromise?(Dv(Fn,t),t.isAwaitingPromise=!0):(Dv(Fc,t),Dv(Fn,t),delete t.isAwaitingPromise,delete t.disableButtons,delete t.enableButtons,delete t.getInput,delete t.disableInput,delete t.enableInput,delete t.hideLoading,delete t.disableLoading,delete t.showValidationMessage,delete t.resetValidationMessage,delete t.close,delete t.closePopup,delete t.closeModal,delete t.closeToast,delete t.rejectPromise,delete t.update,delete t._destroy)},Dv=(t,e)=>{for(const n in t)t[n].delete(e)};var tV=Object.freeze({__proto__:null,_destroy:IA,close:tl,closeModal:tl,closePopup:tl,closeToast:tl,disableButtons:CA,disableInput:SA,disableLoading:Rp,enableButtons:NA,enableInput:_A,getInput:kA,handleAwaitingPromise:iu,hideLoading:Rp,rejectPromise:vA,resetValidationMessage:TA,showValidationMessage:EA,update:MA});const nV=(t,e,n)=>{t.toast?iV(t,e,n):(aV(e),rV(e),lV(t,e,n))},iV=(t,e,n)=>{e.popup.onclick=()=>{t&&(sV(t)||t.timer||t.input)||n(nd.close)}},sV=t=>!!(t.showConfirmButton||t.showDenyButton||t.showCancelButton||t.showCloseButton);let Pp=!1;const aV=t=>{t.popup.onmousedown=()=>{t.container.onmouseup=function(e){t.container.onmouseup=()=>{},e.target===t.container&&(Pp=!0)}}},rV=t=>{t.container.onmousedown=e=>{e.target===t.container&&e.preventDefault(),t.popup.onmouseup=function(n){t.popup.onmouseup=()=>{},(n.target===t.popup||n.target instanceof HTMLElement&&t.popup.contains(n.target))&&(Pp=!0)}}},lV=(t,e,n)=>{e.container.onclick=s=>{if(Pp){Pp=!1;return}s.target===e.container&&Lg(t.allowOutsideClick)&&n(nd.backdrop)}},oV=t=>typeof t=="object"&&t.jquery,r1=t=>t instanceof Element||oV(t),cV=t=>{const e={};return typeof t[0]=="object"&&!r1(t[0])?Object.assign(e,t[0]):["title","html","icon"].forEach((n,s)=>{const a=t[s];typeof a=="string"||r1(a)?e[n]=a:a!==void 0&&Co(`Unexpected type of ${n}! Expected "string" or "Element", got ${typeof a}`)}),e};function dV(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return new this(...e)}function mV(t){class e extends this{_main(s,a){return super._main(s,Object.assign({},t,a))}}return e}const uV=()=>Lt.timeout&&Lt.timeout.getTimerLeft(),FA=()=>{if(Lt.timeout)return kH(),Lt.timeout.stop()},LA=()=>{if(Lt.timeout){const t=Lt.timeout.start();return Ik(t),t}},hV=()=>{const t=Lt.timeout;return t&&(t.running?FA():LA())},pV=t=>{if(Lt.timeout){const e=Lt.timeout.increase(t);return Ik(e,!0),e}},gV=()=>!!(Lt.timeout&&Lt.timeout.isRunning());let l1=!1;const cy={};function fV(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"data-swal-template";cy[t]=this,l1||(document.body.addEventListener("click",vV),l1=!0)}const vV=t=>{for(let e=t.target;e&&e!==document;e=e.parentNode)for(const n in cy){const s=e.getAttribute(n);if(s){cy[n].fire({template:s});return}}};let xV=class{constructor(){this.events={}}_getHandlersByEventName(e){return typeof this.events[e]>"u"&&(this.events[e]=[]),this.events[e]}on(e,n){const s=this._getHandlersByEventName(e);s.includes(n)||s.push(n)}once(e,n){var s=this;const a=function(){s.removeListener(e,a);for(var l=arguments.length,o=new Array(l),c=0;c<l;c++)o[c]=arguments[c];n.apply(s,o)};this.on(e,a)}emit(e){for(var n=arguments.length,s=new Array(n>1?n-1:0),a=1;a<n;a++)s[a-1]=arguments[a];this._getHandlersByEventName(e).forEach(l=>{try{l.apply(this,s)}catch(o){console.error(o)}})}removeListener(e,n){const s=this._getHandlersByEventName(e),a=s.indexOf(n);a>-1&&s.splice(a,1)}removeAllListeners(e){this.events[e]!==void 0&&(this.events[e].length=0)}reset(){this.events={}}};Lt.eventEmitter=new xV;const yV=(t,e)=>{Lt.eventEmitter.on(t,e)},bV=(t,e)=>{Lt.eventEmitter.once(t,e)},kV=(t,e)=>{if(!t){Lt.eventEmitter.reset();return}e?Lt.eventEmitter.removeListener(t,e):Lt.eventEmitter.removeAllListeners(t)};var wV=Object.freeze({__proto__:null,argsToParams:cV,bindClickHandler:fV,clickCancel:cz,clickConfirm:mA,clickDeny:oz,enableLoading:Lc,fire:dV,getActions:eu,getCancelButton:ed,getCloseButton:Dk,getConfirmButton:za,getContainer:Zi,getDenyButton:_o,getFocusableElements:Rk,getFooter:JT,getHtmlContainer:Tk,getIcon:Jc,getIconContent:gH,getImage:XT,getInputLabel:fH,getLoader:td,getPopup:mn,getProgressSteps:Ak,getTimerLeft:uV,getTimerProgressBar:Bg,getTitle:ZT,getValidationMessage:$g,increaseTimer:pV,isDeprecatedParameter:RA,isLoading:xH,isTimerRunning:gV,isUpdatableParameter:DA,isValidParameter:AA,isVisible:lz,mixin:mV,off:kV,on:yV,once:bV,resumeTimer:LA,showLoading:Lc,stopTimer:FA,toggleTimer:hV});class jV{constructor(e,n){this.callback=e,this.remaining=n,this.running=!1,this.start()}start(){return this.running||(this.running=!0,this.started=new Date,this.id=setTimeout(this.callback,this.remaining)),this.remaining}stop(){return this.started&&this.running&&(this.running=!1,clearTimeout(this.id),this.remaining-=new Date().getTime()-this.started.getTime()),this.remaining}increase(e){const n=this.running;return n&&this.stop(),this.remaining+=e,n&&this.start(),this.remaining}getTimerLeft(){return this.running&&(this.stop(),this.start()),this.remaining}isRunning(){return this.running}}const $A=["swal-title","swal-html","swal-footer"],NV=t=>{const e=typeof t.template=="string"?document.querySelector(t.template):t.template;if(!e)return{};const n=e.content;return RV(n),Object.assign(CV(n),_V(n),SV(n),EV(n),TV(n),AV(n),DV(n,$A))},CV=t=>{const e={};return Array.from(t.querySelectorAll("swal-param")).forEach(s=>{lo(s,["name","value"]);const a=s.getAttribute("name"),l=s.getAttribute("value");!a||!l||(typeof xc[a]=="boolean"?e[a]=l!=="false":typeof xc[a]=="object"?e[a]=JSON.parse(l):e[a]=l)}),e},_V=t=>{const e={};return Array.from(t.querySelectorAll("swal-function-param")).forEach(s=>{const a=s.getAttribute("name"),l=s.getAttribute("value");!a||!l||(e[a]=new Function(`return ${l}`)())}),e},SV=t=>{const e={};return Array.from(t.querySelectorAll("swal-button")).forEach(s=>{lo(s,["type","color","aria-label"]);const a=s.getAttribute("type");!a||!["confirm","cancel","deny"].includes(a)||(e[`${a}ButtonText`]=s.innerHTML,e[`show${_k(a)}Button`]=!0,s.hasAttribute("color")&&(e[`${a}ButtonColor`]=s.getAttribute("color")),s.hasAttribute("aria-label")&&(e[`${a}ButtonAriaLabel`]=s.getAttribute("aria-label")))}),e},EV=t=>{const e={},n=t.querySelector("swal-image");return n&&(lo(n,["src","width","height","alt"]),n.hasAttribute("src")&&(e.imageUrl=n.getAttribute("src")||void 0),n.hasAttribute("width")&&(e.imageWidth=n.getAttribute("width")||void 0),n.hasAttribute("height")&&(e.imageHeight=n.getAttribute("height")||void 0),n.hasAttribute("alt")&&(e.imageAlt=n.getAttribute("alt")||void 0)),e},TV=t=>{const e={},n=t.querySelector("swal-icon");return n&&(lo(n,["type","color"]),n.hasAttribute("type")&&(e.icon=n.getAttribute("type")),n.hasAttribute("color")&&(e.iconColor=n.getAttribute("color")),e.iconHtml=n.innerHTML),e},AV=t=>{const e={},n=t.querySelector("swal-input");n&&(lo(n,["type","label","placeholder","value"]),e.input=n.getAttribute("type")||"text",n.hasAttribute("label")&&(e.inputLabel=n.getAttribute("label")),n.hasAttribute("placeholder")&&(e.inputPlaceholder=n.getAttribute("placeholder")),n.hasAttribute("value")&&(e.inputValue=n.getAttribute("value")));const s=Array.from(t.querySelectorAll("swal-input-option"));return s.length&&(e.inputOptions={},s.forEach(a=>{lo(a,["value"]);const l=a.getAttribute("value");if(!l)return;const o=a.innerHTML;e.inputOptions[l]=o})),e},DV=(t,e)=>{const n={};for(const s in e){const a=e[s],l=t.querySelector(a);l&&(lo(l,[]),n[a.replace(/^swal-/,"")]=l.innerHTML.trim())}return n},RV=t=>{const e=$A.concat(["swal-param","swal-function-param","swal-button","swal-image","swal-icon","swal-input","swal-input-option"]);Array.from(t.children).forEach(n=>{const s=n.tagName.toLowerCase();e.includes(s)||Qi(`Unrecognized element <${s}>`)})},lo=(t,e)=>{Array.from(t.attributes).forEach(n=>{e.indexOf(n.name)===-1&&Qi([`Unrecognized attribute "${n.name}" on <${t.tagName.toLowerCase()}>.`,`${e.length?`Allowed attributes are: ${e.join(", ")}`:"To set the value, use HTML within the element."}`])})},BA=10,PV=t=>{const e=Zi(),n=mn();typeof t.willOpen=="function"&&t.willOpen(n),Lt.eventEmitter.emit("willOpen",n);const a=window.getComputedStyle(document.body).overflowY;OV(e,n,t),setTimeout(()=>{MV(e,n)},BA),Pk()&&(IV(e,t.scrollbarPadding,a),vz()),!qg()&&!Lt.previousActiveElement&&(Lt.previousActiveElement=document.activeElement),typeof t.didOpen=="function"&&setTimeout(()=>t.didOpen(n)),Lt.eventEmitter.emit("didOpen",n),ea(e,Fe["no-transition"])},Mp=t=>{const e=mn();if(t.target!==e)return;const n=Zi();e.removeEventListener("animationend",Mp),e.removeEventListener("transitionend",Mp),n.style.overflowY="auto"},MV=(t,e)=>{nA(e)?(t.style.overflowY="hidden",e.addEventListener("animationend",Mp),e.addEventListener("transitionend",Mp)):t.style.overflowY="auto"},IV=(t,e,n)=>{xz(),e&&n!=="hidden"&&Cz(n),setTimeout(()=>{t.scrollTop=0})},OV=(t,e,n)=>{tn(t,n.showClass.backdrop),n.animation?(e.style.setProperty("opacity","0","important"),yi(e,"grid"),setTimeout(()=>{tn(e,n.showClass.popup),e.style.removeProperty("opacity")},BA)):yi(e,"grid"),tn([document.documentElement,document.body],Fe.shown),n.heightAuto&&n.backdrop&&!n.toast&&tn([document.documentElement,document.body],Fe["height-auto"])};var o1={email:(t,e)=>/^[a-zA-Z0-9.+_'-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9-]+$/.test(t)?Promise.resolve():Promise.resolve(e||"Invalid email address"),url:(t,e)=>/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(t)?Promise.resolve():Promise.resolve(e||"Invalid URL")};function FV(t){t.inputValidator||(t.input==="email"&&(t.inputValidator=o1.email),t.input==="url"&&(t.inputValidator=o1.url))}function LV(t){(!t.target||typeof t.target=="string"&&!document.querySelector(t.target)||typeof t.target!="string"&&!t.target.appendChild)&&(Qi('Target parameter is not valid, defaulting to "body"'),t.target="body")}function $V(t){FV(t),t.showLoaderOnConfirm&&!t.preConfirm&&Qi(`showLoaderOnConfirm is set to true, but preConfirm is not defined.
showLoaderOnConfirm should be used together with preConfirm, see usage example:
https://sweetalert2.github.io/#ajax-request`),LV(t),typeof t.title=="string"&&(t.title=t.title.split(`
`).join("<br />")),TH(t)}let Aa;var lh=new WeakMap;class ai{constructor(){if(lH(this,lh,void 0),typeof window>"u")return;Aa=this;for(var e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];const a=Object.freeze(this.constructor.argsToParams(n));this.params=a,this.isAwaitingPromise=!1,oH(lh,this,this._main(Aa.params))}_main(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(PA(Object.assign({},n,e)),Lt.currentInstance){const l=Fc.swalPromiseResolve.get(Lt.currentInstance),{isAwaitingPromise:o}=Lt.currentInstance;Lt.currentInstance._destroy(),o||l({isDismissed:!0}),Pk()&&pA()}Lt.currentInstance=Aa;const s=qV(e,n);$V(s),Object.freeze(s),Lt.timeout&&(Lt.timeout.stop(),delete Lt.timeout),clearTimeout(Lt.restoreFocusTimeout);const a=HV(Aa);return dA(Aa,s),Fn.innerParams.set(Aa,s),BV(Aa,a,s)}then(e){return ZN(lh,this).then(e)}finally(e){return ZN(lh,this).finally(e)}}const BV=(t,e,n)=>new Promise((s,a)=>{const l=o=>{t.close({isDismissed:!0,dismiss:o})};Fc.swalPromiseResolve.set(t,s),Fc.swalPromiseReject.set(t,a),e.confirmButton.onclick=()=>{Hz(t)},e.denyButton.onclick=()=>{zz(t)},e.cancelButton.onclick=()=>{Vz(t,l)},e.closeButton.onclick=()=>{l(nd.close)},nV(n,e,l),dz(Lt,n,l),Pz(t,n),PV(n),zV(Lt,n,l),VV(e,n),setTimeout(()=>{e.container.scrollTop=0})}),qV=(t,e)=>{const n=NV(t),s=Object.assign({},xc,e,n,t);return s.showClass=Object.assign({},xc.showClass,s.showClass),s.hideClass=Object.assign({},xc.hideClass,s.hideClass),s.animation===!1&&(s.showClass={backdrop:"swal2-noanimation"},s.hideClass={}),s},HV=t=>{const e={popup:mn(),container:Zi(),actions:eu(),confirmButton:za(),denyButton:_o(),cancelButton:ed(),loader:td(),closeButton:Dk(),validationMessage:$g(),progressSteps:Ak()};return Fn.domCache.set(t,e),e},zV=(t,e,n)=>{const s=Bg();$i(s),e.timer&&(t.timeout=new jV(()=>{n("timer"),delete t.timeout},e.timer),e.timerProgressBar&&(yi(s),As(s,e,"timerProgressBar"),setTimeout(()=>{t.timeout&&t.timeout.running&&Ik(e.timer)})))},VV=(t,e)=>{if(!e.toast){if(!Lg(e.allowEnterKey)){QT("allowEnterKey"),KV();return}UV(t)||WV(t,e)||oy(-1,1)}},UV=t=>{const e=Array.from(t.popup.querySelectorAll("[autofocus]"));for(const n of e)if(n instanceof HTMLElement&&ms(n))return n.focus(),!0;return!1},WV=(t,e)=>e.focusDeny&&ms(t.denyButton)?(t.denyButton.focus(),!0):e.focusCancel&&ms(t.cancelButton)?(t.cancelButton.focus(),!0):e.focusConfirm&&ms(t.confirmButton)?(t.confirmButton.focus(),!0):!1,KV=()=>{document.activeElement instanceof HTMLElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur()};ai.prototype.disableButtons=CA;ai.prototype.enableButtons=NA;ai.prototype.getInput=kA;ai.prototype.disableInput=SA;ai.prototype.enableInput=_A;ai.prototype.hideLoading=Rp;ai.prototype.disableLoading=Rp;ai.prototype.showValidationMessage=EA;ai.prototype.resetValidationMessage=TA;ai.prototype.close=tl;ai.prototype.closePopup=tl;ai.prototype.closeModal=tl;ai.prototype.closeToast=tl;ai.prototype.rejectPromise=vA;ai.prototype.update=MA;ai.prototype._destroy=IA;Object.assign(ai,wV);Object.keys(tV).forEach(t=>{ai[t]=function(){return Aa&&Aa[t]?Aa[t](...arguments):null}});ai.DismissReason=nd;ai.version="11.18.0";const At=ai;At.default=At;typeof document<"u"&&(function(t,e){var n=t.createElement("style");if(t.getElementsByTagName("head")[0].appendChild(n),n.styleSheet)n.styleSheet.disabled||(n.styleSheet.cssText=e);else try{n.innerHTML=e}catch{n.innerText=e}})(document,':root{--swal2-container-padding: 0.625em;--swal2-backdrop: rgba(0, 0, 0, 0.4);--swal2-width: 32em;--swal2-padding: 0 0 1.25em;--swal2-border: none;--swal2-border-radius: 0.3125rem;--swal2-background: white;--swal2-color: #545454;--swal2-footer-border-color: #eee;--swal2-show-animation: swal2-show 0.3s;--swal2-hide-animation: swal2-hide 0.15s forwards;--swal2-title-padding: 0.8em 1em 0;--swal2-html-container-padding: 1em 1.6em 0.3em;--swal2-input-background: transparent;--swal2-progress-step-background: #add8e6;--swal2-validation-message-background: #f0f0f0;--swal2-validation-message-color: #666;--swal2-close-button-position: initial;--swal2-close-button-inset: auto;--swal2-close-button-font-size: 2.5em;--swal2-close-button-color: #ccc;--swal2-close-button-transition: color 0.1s, box-shadow 0.1s;--swal2-close-button-outline: initial;--swal2-close-button-hover-transform: none}[data-swal2-theme=dark]{--swal2-dark-theme-black: #19191a;--swal2-dark-theme-white: #e1e1e1;--swal2-background: var(--swal2-dark-theme-black);--swal2-color: var(--swal2-dark-theme-white);--swal2-footer-border-color: #555;--swal2-input-background: color-mix(in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10%);--swal2-validation-message-background: color-mix( in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10% );--swal2-validation-message-color: var(--swal2-dark-theme-white)}@media(prefers-color-scheme: dark){[data-swal2-theme=auto]{--swal2-dark-theme-black: #19191a;--swal2-dark-theme-white: #e1e1e1;--swal2-background: var(--swal2-dark-theme-black);--swal2-color: var(--swal2-dark-theme-white);--swal2-footer-border-color: #555;--swal2-input-background: color-mix(in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10%);--swal2-validation-message-background: color-mix( in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10% );--swal2-validation-message-color: var(--swal2-dark-theme-white)}}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown){overflow:hidden}body.swal2-height-auto{height:auto !important}body.swal2-no-backdrop .swal2-container{background-color:rgba(0,0,0,0) !important;pointer-events:none}body.swal2-no-backdrop .swal2-container .swal2-popup{pointer-events:all}body.swal2-no-backdrop .swal2-container .swal2-modal{box-shadow:0 0 10px var(--swal2-backdrop)}body.swal2-toast-shown .swal2-container{box-sizing:border-box;width:360px;max-width:100%;background-color:rgba(0,0,0,0);pointer-events:none}body.swal2-toast-shown .swal2-container.swal2-top{inset:0 auto auto 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-top-end,body.swal2-toast-shown .swal2-container.swal2-top-right{inset:0 0 auto auto}body.swal2-toast-shown .swal2-container.swal2-top-start,body.swal2-toast-shown .swal2-container.swal2-top-left{inset:0 auto auto 0}body.swal2-toast-shown .swal2-container.swal2-center-start,body.swal2-toast-shown .swal2-container.swal2-center-left{inset:50% auto auto 0;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-center{inset:50% auto auto 50%;transform:translate(-50%, -50%)}body.swal2-toast-shown .swal2-container.swal2-center-end,body.swal2-toast-shown .swal2-container.swal2-center-right{inset:50% 0 auto auto;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-start,body.swal2-toast-shown .swal2-container.swal2-bottom-left{inset:auto auto 0 0}body.swal2-toast-shown .swal2-container.swal2-bottom{inset:auto auto 0 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-end,body.swal2-toast-shown .swal2-container.swal2-bottom-right{inset:auto 0 0 auto}@media print{body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown){overflow-y:scroll !important}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown)>[aria-hidden=true]{display:none}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown) .swal2-container{position:static !important}}div:where(.swal2-container){display:grid;position:fixed;z-index:1060;inset:0;box-sizing:border-box;grid-template-areas:"top-start     top            top-end" "center-start  center         center-end" "bottom-start  bottom-center  bottom-end";grid-template-rows:minmax(min-content, auto) minmax(min-content, auto) minmax(min-content, auto);height:100%;padding:var(--swal2-container-padding);overflow-x:hidden;transition:background-color .1s;-webkit-overflow-scrolling:touch}div:where(.swal2-container).swal2-backdrop-show,div:where(.swal2-container).swal2-noanimation{background:var(--swal2-backdrop)}div:where(.swal2-container).swal2-backdrop-hide{background:rgba(0,0,0,0) !important}div:where(.swal2-container).swal2-top-start,div:where(.swal2-container).swal2-center-start,div:where(.swal2-container).swal2-bottom-start{grid-template-columns:minmax(0, 1fr) auto auto}div:where(.swal2-container).swal2-top,div:where(.swal2-container).swal2-center,div:where(.swal2-container).swal2-bottom{grid-template-columns:auto minmax(0, 1fr) auto}div:where(.swal2-container).swal2-top-end,div:where(.swal2-container).swal2-center-end,div:where(.swal2-container).swal2-bottom-end{grid-template-columns:auto auto minmax(0, 1fr)}div:where(.swal2-container).swal2-top-start>.swal2-popup{align-self:start}div:where(.swal2-container).swal2-top>.swal2-popup{grid-column:2;place-self:start center}div:where(.swal2-container).swal2-top-end>.swal2-popup,div:where(.swal2-container).swal2-top-right>.swal2-popup{grid-column:3;place-self:start end}div:where(.swal2-container).swal2-center-start>.swal2-popup,div:where(.swal2-container).swal2-center-left>.swal2-popup{grid-row:2;align-self:center}div:where(.swal2-container).swal2-center>.swal2-popup{grid-column:2;grid-row:2;place-self:center center}div:where(.swal2-container).swal2-center-end>.swal2-popup,div:where(.swal2-container).swal2-center-right>.swal2-popup{grid-column:3;grid-row:2;place-self:center end}div:where(.swal2-container).swal2-bottom-start>.swal2-popup,div:where(.swal2-container).swal2-bottom-left>.swal2-popup{grid-column:1;grid-row:3;align-self:end}div:where(.swal2-container).swal2-bottom>.swal2-popup{grid-column:2;grid-row:3;place-self:end center}div:where(.swal2-container).swal2-bottom-end>.swal2-popup,div:where(.swal2-container).swal2-bottom-right>.swal2-popup{grid-column:3;grid-row:3;place-self:end end}div:where(.swal2-container).swal2-grow-row>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-column:1/4;width:100%}div:where(.swal2-container).swal2-grow-column>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-row:1/4;align-self:stretch}div:where(.swal2-container).swal2-no-transition{transition:none !important}div:where(.swal2-container) div:where(.swal2-popup){display:none;position:relative;box-sizing:border-box;grid-template-columns:minmax(0, 100%);width:var(--swal2-width);max-width:100%;padding:var(--swal2-padding);border:var(--swal2-border);border-radius:var(--swal2-border-radius);background:var(--swal2-background);color:var(--swal2-color);font-family:inherit;font-size:1rem}div:where(.swal2-container) div:where(.swal2-popup):focus{outline:none}div:where(.swal2-container) div:where(.swal2-popup).swal2-loading{overflow-y:hidden}div:where(.swal2-container) div:where(.swal2-popup).swal2-draggable{cursor:grab}div:where(.swal2-container) div:where(.swal2-popup).swal2-draggable div:where(.swal2-icon){cursor:grab}div:where(.swal2-container) div:where(.swal2-popup).swal2-dragging{cursor:grabbing}div:where(.swal2-container) div:where(.swal2-popup).swal2-dragging div:where(.swal2-icon){cursor:grabbing}div:where(.swal2-container) h2:where(.swal2-title){position:relative;max-width:100%;margin:0;padding:var(--swal2-title-padding);color:inherit;font-size:1.875em;font-weight:600;text-align:center;text-transform:none;word-wrap:break-word;cursor:initial}div:where(.swal2-container) div:where(.swal2-actions){display:flex;z-index:1;box-sizing:border-box;flex-wrap:wrap;align-items:center;justify-content:center;width:auto;margin:1.25em auto 0;padding:0}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled[disabled]{opacity:.4}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled:hover{background-image:linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.1))}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled:active{background-image:linear-gradient(rgba(0, 0, 0, 0.2), rgba(0, 0, 0, 0.2))}div:where(.swal2-container) div:where(.swal2-loader){display:none;align-items:center;justify-content:center;width:2.2em;height:2.2em;margin:0 1.875em;animation:swal2-rotate-loading 1.5s linear 0s infinite normal;border-width:.25em;border-style:solid;border-radius:100%;border-color:#2778c4 rgba(0,0,0,0) #2778c4 rgba(0,0,0,0)}div:where(.swal2-container) button:where(.swal2-styled){margin:.3125em;padding:.625em 1.1em;transition:box-shadow .1s;box-shadow:0 0 0 3px rgba(0,0,0,0);font-weight:500}div:where(.swal2-container) button:where(.swal2-styled):not([disabled]){cursor:pointer}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm){border:0;border-radius:.25em;background:initial;background-color:#7066e0;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm):focus-visible{box-shadow:0 0 0 3px rgba(112,102,224,.5)}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny){border:0;border-radius:.25em;background:initial;background-color:#dc3741;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny):focus-visible{box-shadow:0 0 0 3px rgba(220,55,65,.5)}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel){border:0;border-radius:.25em;background:initial;background-color:#6e7881;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel):focus-visible{box-shadow:0 0 0 3px rgba(110,120,129,.5)}div:where(.swal2-container) button:where(.swal2-styled).swal2-default-outline:focus-visible{box-shadow:0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) button:where(.swal2-styled):focus-visible{outline:none}div:where(.swal2-container) button:where(.swal2-styled)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-footer){margin:1em 0 0;padding:1em 1em 0;border-top:1px solid var(--swal2-footer-border-color);color:inherit;font-size:1em;text-align:center;cursor:initial}div:where(.swal2-container) .swal2-timer-progress-bar-container{position:absolute;right:0;bottom:0;left:0;grid-column:auto !important;overflow:hidden;border-bottom-right-radius:var(--swal2-border-radius);border-bottom-left-radius:var(--swal2-border-radius)}div:where(.swal2-container) div:where(.swal2-timer-progress-bar){width:100%;height:.25em;background:rgba(0,0,0,.2)}div:where(.swal2-container) img:where(.swal2-image){max-width:100%;margin:2em auto 1em;cursor:initial}div:where(.swal2-container) button:where(.swal2-close){position:var(--swal2-close-button-position);inset:var(--swal2-close-button-inset);z-index:2;align-items:center;justify-content:center;width:1.2em;height:1.2em;margin-top:0;margin-right:0;margin-bottom:-1.2em;padding:0;overflow:hidden;transition:var(--swal2-close-button-transition);border:none;border-radius:var(--swal2-border-radius);outline:var(--swal2-close-button-outline);background:rgba(0,0,0,0);color:var(--swal2-close-button-color);font-family:monospace;font-size:var(--swal2-close-button-font-size);cursor:pointer;justify-self:end}div:where(.swal2-container) button:where(.swal2-close):hover{transform:var(--swal2-close-button-hover-transform);background:rgba(0,0,0,0);color:#f27474}div:where(.swal2-container) button:where(.swal2-close):focus-visible{outline:none;box-shadow:inset 0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) button:where(.swal2-close)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-html-container){z-index:1;justify-content:center;margin:0;padding:var(--swal2-html-container-padding);overflow:auto;color:inherit;font-size:1.125em;font-weight:normal;line-height:normal;text-align:center;word-wrap:break-word;word-break:break-word;cursor:initial}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea),div:where(.swal2-container) select:where(.swal2-select),div:where(.swal2-container) div:where(.swal2-radio),div:where(.swal2-container) label:where(.swal2-checkbox){margin:1em 2em 3px}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea){box-sizing:border-box;width:auto;transition:border-color .1s,box-shadow .1s;border:1px solid #d9d9d9;border-radius:.1875em;background:var(--swal2-input-background);box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(0,0,0,0);color:inherit;font-size:1.125em}div:where(.swal2-container) input:where(.swal2-input).swal2-inputerror,div:where(.swal2-container) input:where(.swal2-file).swal2-inputerror,div:where(.swal2-container) textarea:where(.swal2-textarea).swal2-inputerror{border-color:#f27474 !important;box-shadow:0 0 2px #f27474 !important}div:where(.swal2-container) input:where(.swal2-input):focus,div:where(.swal2-container) input:where(.swal2-file):focus,div:where(.swal2-container) textarea:where(.swal2-textarea):focus{border:1px solid #b4dbed;outline:none;box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) input:where(.swal2-input)::placeholder,div:where(.swal2-container) input:where(.swal2-file)::placeholder,div:where(.swal2-container) textarea:where(.swal2-textarea)::placeholder{color:#ccc}div:where(.swal2-container) .swal2-range{margin:1em 2em 3px;background:var(--swal2-background)}div:where(.swal2-container) .swal2-range input{width:80%}div:where(.swal2-container) .swal2-range output{width:20%;color:inherit;font-weight:600;text-align:center}div:where(.swal2-container) .swal2-range input,div:where(.swal2-container) .swal2-range output{height:2.625em;padding:0;font-size:1.125em;line-height:2.625em}div:where(.swal2-container) .swal2-input{height:2.625em;padding:0 .75em}div:where(.swal2-container) .swal2-file{width:75%;margin-right:auto;margin-left:auto;background:var(--swal2-input-background);font-size:1.125em}div:where(.swal2-container) .swal2-textarea{height:6.75em;padding:.75em}div:where(.swal2-container) .swal2-select{min-width:50%;max-width:100%;padding:.375em .625em;background:var(--swal2-input-background);color:inherit;font-size:1.125em}div:where(.swal2-container) .swal2-radio,div:where(.swal2-container) .swal2-checkbox{align-items:center;justify-content:center;background:var(--swal2-background);color:inherit}div:where(.swal2-container) .swal2-radio label,div:where(.swal2-container) .swal2-checkbox label{margin:0 .6em;font-size:1.125em}div:where(.swal2-container) .swal2-radio input,div:where(.swal2-container) .swal2-checkbox input{flex-shrink:0;margin:0 .4em}div:where(.swal2-container) label:where(.swal2-input-label){display:flex;justify-content:center;margin:1em auto 0}div:where(.swal2-container) div:where(.swal2-validation-message){align-items:center;justify-content:center;margin:1em 0 0;padding:.625em;overflow:hidden;background:var(--swal2-validation-message-background);color:var(--swal2-validation-message-color);font-size:1em;font-weight:300}div:where(.swal2-container) div:where(.swal2-validation-message)::before{content:"!";display:inline-block;width:1.5em;min-width:1.5em;height:1.5em;margin:0 .625em;border-radius:50%;background-color:#f27474;color:#fff;font-weight:600;line-height:1.5em;text-align:center}div:where(.swal2-container) .swal2-progress-steps{flex-wrap:wrap;align-items:center;max-width:100%;margin:1.25em auto;padding:0;background:rgba(0,0,0,0);font-weight:600}div:where(.swal2-container) .swal2-progress-steps li{display:inline-block;position:relative}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step{z-index:20;flex-shrink:0;width:2em;height:2em;border-radius:2em;background:#2778c4;color:#fff;line-height:2em;text-align:center}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step{background:#2778c4}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step{background:var(--swal2-progress-step-background);color:#fff}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step-line{background:var(--swal2-progress-step-background)}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step-line{z-index:10;flex-shrink:0;width:2.5em;height:.4em;margin:0 -1px;background:#2778c4}div:where(.swal2-icon){position:relative;box-sizing:content-box;justify-content:center;width:5em;height:5em;margin:2.5em auto .6em;border:.25em solid rgba(0,0,0,0);border-radius:50%;border-color:#000;font-family:inherit;line-height:5em;cursor:default;user-select:none}div:where(.swal2-icon) .swal2-icon-content{display:flex;align-items:center;font-size:3.75em}div:where(.swal2-icon).swal2-error{border-color:#f27474;color:#f27474}div:where(.swal2-icon).swal2-error .swal2-x-mark{position:relative;flex-grow:1}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line]{display:block;position:absolute;top:2.3125em;width:2.9375em;height:.3125em;border-radius:.125em;background-color:#f27474}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=left]{left:1.0625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=right]{right:1em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-error.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-error.swal2-icon-show .swal2-x-mark{animation:swal2-animate-error-x-mark .5s}div:where(.swal2-icon).swal2-warning{border-color:#f8bb86;color:#f8bb86}div:where(.swal2-icon).swal2-warning.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-warning.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .5s}div:where(.swal2-icon).swal2-info{border-color:#3fc3ee;color:#3fc3ee}div:where(.swal2-icon).swal2-info.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-info.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .8s}div:where(.swal2-icon).swal2-question{border-color:#87adbd;color:#87adbd}div:where(.swal2-icon).swal2-question.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-question.swal2-icon-show .swal2-icon-content{animation:swal2-animate-question-mark .8s}div:where(.swal2-icon).swal2-success{border-color:#a5dc86;color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line]{position:absolute;width:3.75em;height:7.5em;border-radius:50%}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.4375em;left:-2.0635em;transform:rotate(-45deg);transform-origin:3.75em 3.75em;border-radius:7.5em 0 0 7.5em}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.6875em;left:1.875em;transform:rotate(-45deg);transform-origin:0 3.75em;border-radius:0 7.5em 7.5em 0}div:where(.swal2-icon).swal2-success .swal2-success-ring{position:absolute;z-index:2;top:-0.25em;left:-0.25em;box-sizing:content-box;width:100%;height:100%;border:.25em solid rgba(165,220,134,.3);border-radius:50%}div:where(.swal2-icon).swal2-success .swal2-success-fix{position:absolute;z-index:1;top:.5em;left:1.625em;width:.4375em;height:5.625em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line]{display:block;position:absolute;z-index:2;height:.3125em;border-radius:.125em;background-color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=tip]{top:2.875em;left:.8125em;width:1.5625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=long]{top:2.375em;right:.5em;width:2.9375em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-animate-success-line-tip .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-animate-success-line-long .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-circular-line-right{animation:swal2-rotate-success-circular-line 4.25s ease-in}[class^=swal2]{-webkit-tap-highlight-color:rgba(0,0,0,0)}.swal2-show{animation:var(--swal2-show-animation)}.swal2-hide{animation:var(--swal2-hide-animation)}.swal2-noanimation{transition:none}.swal2-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}.swal2-rtl .swal2-close{margin-right:initial;margin-left:0}.swal2-rtl .swal2-timer-progress-bar{right:0;left:auto}.swal2-toast{box-sizing:border-box;grid-column:1/4 !important;grid-row:1/4 !important;grid-template-columns:min-content auto min-content;padding:1em;overflow-y:hidden;background:var(--swal2-background);box-shadow:0 0 1px rgba(0,0,0,.075),0 1px 2px rgba(0,0,0,.075),1px 2px 4px rgba(0,0,0,.075),1px 3px 8px rgba(0,0,0,.075),2px 4px 16px rgba(0,0,0,.075);pointer-events:all}.swal2-toast>*{grid-column:2}.swal2-toast h2:where(.swal2-title){margin:.5em 1em;padding:0;font-size:1em;text-align:initial}.swal2-toast .swal2-loading{justify-content:center}.swal2-toast input:where(.swal2-input){height:2em;margin:.5em;font-size:1em}.swal2-toast .swal2-validation-message{font-size:1em}.swal2-toast div:where(.swal2-footer){margin:.5em 0 0;padding:.5em 0 0;font-size:.8em}.swal2-toast button:where(.swal2-close){grid-column:3/3;grid-row:1/99;align-self:center;width:.8em;height:.8em;margin:0;font-size:2em}.swal2-toast div:where(.swal2-html-container){margin:.5em 1em;padding:0;overflow:initial;font-size:1em;text-align:initial}.swal2-toast div:where(.swal2-html-container):empty{padding:0}.swal2-toast .swal2-loader{grid-column:1;grid-row:1/99;align-self:center;width:2em;height:2em;margin:.25em}.swal2-toast .swal2-icon{grid-column:1;grid-row:1/99;align-self:center;width:2em;min-width:2em;height:2em;margin:0 .5em 0 0}.swal2-toast .swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:1.8em;font-weight:bold}.swal2-toast .swal2-icon.swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line]{top:.875em;width:1.375em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:.3125em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:.3125em}.swal2-toast div:where(.swal2-actions){justify-content:flex-start;height:auto;margin:0;margin-top:.5em;padding:0 .5em}.swal2-toast button:where(.swal2-styled){margin:.25em .5em;padding:.4em .6em;font-size:1em}.swal2-toast .swal2-success{border-color:#a5dc86}.swal2-toast .swal2-success [class^=swal2-success-circular-line]{position:absolute;width:1.6em;height:3em;border-radius:50%}.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.8em;left:-0.5em;transform:rotate(-45deg);transform-origin:2em 2em;border-radius:4em 0 0 4em}.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.25em;left:.9375em;transform-origin:0 1.5em;border-radius:0 4em 4em 0}.swal2-toast .swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-toast .swal2-success .swal2-success-fix{top:0;left:.4375em;width:.4375em;height:2.6875em}.swal2-toast .swal2-success [class^=swal2-success-line]{height:.3125em}.swal2-toast .swal2-success [class^=swal2-success-line][class$=tip]{top:1.125em;left:.1875em;width:.75em}.swal2-toast .swal2-success [class^=swal2-success-line][class$=long]{top:.9375em;right:.1875em;width:1.375em}.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-toast-animate-success-line-tip .75s}.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-toast-animate-success-line-long .75s}.swal2-toast.swal2-show{animation:swal2-toast-show .5s}.swal2-toast.swal2-hide{animation:swal2-toast-hide .1s forwards}@keyframes swal2-show{0%{transform:scale(0.7)}45%{transform:scale(1.05)}80%{transform:scale(0.95)}100%{transform:scale(1)}}@keyframes swal2-hide{0%{transform:scale(1);opacity:1}100%{transform:scale(0.5);opacity:0}}@keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-0.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(0.4);opacity:0}50%{margin-top:1.625em;transform:scale(0.4);opacity:0}80%{margin-top:-0.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0deg);opacity:1}}@keyframes swal2-rotate-loading{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes swal2-animate-question-mark{0%{transform:rotateY(-360deg)}100%{transform:rotateY(0)}}@keyframes swal2-animate-i-mark{0%{transform:rotateZ(45deg);opacity:0}25%{transform:rotateZ(-25deg);opacity:.4}50%{transform:rotateZ(15deg);opacity:.8}75%{transform:rotateZ(-5deg);opacity:1}100%{transform:rotateX(0);opacity:1}}@keyframes swal2-toast-show{0%{transform:translateY(-0.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(0.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0deg)}}@keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-0.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}');const ta={getBills:(t={})=>ve({endpoint:"bills",method:"GET",data:t}),getBill:t=>ve({endpoint:`bills/${t}`,method:"GET"}),createBill:t=>ve({endpoint:"bills",method:"POST",data:t}),updateBill:(t,e)=>ve({endpoint:`bills/${t}`,method:"PUT",data:e}),calculateTaxForService:({service_id:t,clinic_id:e,doctor_id:n,amount:s,quantity:a,serviceItems:l})=>ve({endpoint:"bills/calculate-tax",method:"POST",data:{service_id:t,clinic_id:e,doctor_id:n,amount:s,quantity:a,serviceItems:l}}),getEncountersWithoutBill:()=>ve({endpoint:"bills/encounters-without-bill",method:"GET"}),getBillByEncounterId:t=>ve({endpoint:`bills/by-encounter/${t}`,method:"GET"}),deleteBillItem:t=>ve({endpoint:`bills/item/${t}`,method:"DELETE"}),updateBillItem:(t,e)=>ve({endpoint:`bills/item/${t}`,method:"PUT",data:e}),exportBills:(t={})=>ve({endpoint:"bills/export",method:"GET",data:t}),printBill:t=>ve({endpoint:`bills/${t}/print`,method:"GET",responseType:"blob"}),emailBill:t=>ve({endpoint:`bills/${t}/email`,method:"POST"})},pr={all:["bills"],lists:()=>[...pr.all,"list"],list:t=>[...pr.lists(),{filters:t}],details:()=>[...pr.all,"detail"],detail:t=>[...pr.details(),t]},GV=(t={},e={})=>ft({queryKey:pr.list(t),queryFn:()=>ta.getBills(t),...e}),qk=(t,e={})=>ft({queryKey:pr.detail(t),queryFn:()=>ta.getBill(t),enabled:!!t,...e}),YV=()=>{const t=ze();return Le({mutationFn:e=>ta.createBill(e),onSuccess:()=>{t.invalidateQueries({queryKey:pr.lists()})}})},QV=()=>{const t=ze();return Le({mutationFn:({id:e,...n})=>ta.updateBill(e,n),onSuccess:(e,n)=>{t.invalidateQueries({queryKey:pr.detail(n.id)}),t.invalidateQueries({queryKey:pr.lists()})}})},ZV=()=>Le({mutationFn:t=>ta.calculateTaxForService(t)}),XV=(t={})=>ft({queryKey:["encountersWithoutBill"],queryFn:()=>ta.getEncountersWithoutBill(),...t}),qA=(t,e={})=>ft({queryKey:["billByEncounterId",t],queryFn:()=>ta.getBillByEncounterId(t),enabled:!!t,...e}),JV=()=>Le({mutationFn:t=>ta.deleteBillItem(t)}),eU=()=>Le({mutationFn:({itemId:t,...e})=>ta.updateBillItem(t,e)}),tU=()=>Le({mutationFn:t=>ta.exportBills(t)}),nU=()=>Le({mutationFn:t=>ta.printBill(t)}),iU=()=>Le({mutationFn:t=>ta.emailBill(t)}),Hk=({show:t,onHide:e,editFormData:n,setEditFormData:s,showAddServiceItemForm:a,setShowAddServiceItemForm:l,editBillId:o,handleCloseEditModal:c,onBillSaved:d,appointmentId:m})=>{const{getCurrencyDetail:u}=mt(),h=u(),p=h.prefix,g=h.postfix,v=QV(),[x,y]=f.useState([]),[b,k]=f.useState([]),w=ZV(),[T,j]=f.useState(!1),D=YV(),[_,N]=f.useState(!0),A=JV(),P=eU(),[E,I]=f.useState({service_name:"",price:"",quantity:"",total:""}),[M,O]=f.useState({clinic_id:"",doctor_id:""});f.useEffect(()=>{n?.clinic?.id&&n?.doctor?.id&&O({clinic_id:n.clinic.id,doctor_id:n.doctor.id})},[n?.clinic?.id,n?.doctor?.id]),f.useEffect(()=>{t&&n?.serviceItems?.length>0&&(!n?.taxItems||n.taxItems.length===0)&&w.mutate({clinic_id:n.clinic?.id,doctor_id:n.doctor?.id,serviceItems:n.serviceItems},{onSuccess:Q=>{s(pe=>({...pe,taxItems:Q?.data?.calculated_taxes||[]}))}})},[t,o]);const[F,H]=f.useState(!1);f.useEffect(()=>{if(!F&&n?.serviceItems?.length>0){const pe=n.serviceItems.every($=>$.isPaid===!0)?"paid":"unpaid";n.status!==pe&&s($=>({...$,status:pe})),H(!0)}t||H(!1)},[n?.serviceItems,t,F]);const G=Q=>{const{name:pe,value:$}=Q.target;s(ce=>({...ce,[pe]:$}))},[z,ie]=f.useState(""),W=Q=>{const pe=Q.target.value;ie(""),pe===""||pe===null?ie(r("Discount value is required","kivicare-clinic-management-system")):Number(pe)<0?ie(r("Discount value cannot be negative","kivicare-clinic-management-system")):Number(pe)>ae+Y&&ie(r("Discount value cannot be greater than subtotal + tax","kivicare-clinic-management-system")),s($=>({...$,discount:pe}))},ge=(Q=!1)=>{if(!n)return;if(!n?.serviceItems||n.serviceItems.length===0){At.fire(r("Error!","kivicare-clinic-management-system"),r("Please add at least one bill item before saving.","kivicare-clinic-management-system"),"error");return}if(z){At.fire(r("Error!","kivicare-clinic-management-system"),z,"error");return}const pe=n.serviceItems.map(ce=>({...ce,name:ce.service_name||ce.name,isPaid:ce.isPaid??!1})),$={...n,serviceItems:pe};o?v.mutate({id:o,...$,checkout:Q},{onSuccess:()=>{At.fire(r("Updated!","kivicare-clinic-management-system"),r("The bill has been updated.","kivicare-clinic-management-system"),"success"),c(),d&&d()},onError:()=>{At.fire(r("Error!","kivicare-clinic-management-system"),r("Failed to update bill.","kivicare-clinic-management-system"),"error")}}):D.mutate({...$,checkout:Q},{onSuccess:()=>{At.fire(r("Created!","kivicare-clinic-management-system"),r("The bill has been created.","kivicare-clinic-management-system"),"success"),c(),d&&d()},onError:()=>{At.fire(r("Error!","kivicare-clinic-management-system"),r("Failed to create bill.","kivicare-clinic-management-system"),"error")}})},ae=f.useMemo(()=>(n?.serviceItems||[]).reduce((Q,pe)=>Q+Number(pe.total||0),0),[n?.serviceItems]),U=Q=>{I(Q?pe=>({...pe,serviceId:Q.value,service_name:Q.label,price:Q.charges,quantity:1,total:Q.charges}):{service_name:"",price:"",quantity:"",total:""})},[X,J]=f.useState(""),he=Q=>{const pe=Q.target.value;pe<0?J(r("Price cannot be negative","kivicare-clinic-management-system")):J(""),I($=>({...$,price:pe,total:pe&&$.quantity?Number(pe)*Number($.quantity):""}))},le=Q=>{const pe=Q.target.value;I($=>({...$,quantity:pe,total:$.price&&pe?Number($.price)*Number(pe):""}))},ee=Q=>{const pe={value:`custom-${Date.now()}`,label:Q,charges:0,isCustom:!0};y($=>[...$,pe]),I($=>({...$,serviceId:pe.value,service_name:pe.label,price:pe.charges,quantity:1,total:pe.charges}))},me=He.useRef(n);f.useEffect(()=>{me.current=n},[n]);const K=async Q=>{const $=(me.current?.serviceItems||[])[Q];let ce=$.serviceId||$.value||"";if(typeof ce=="string"&&ce.startsWith("custom-")){const De=$.service_name||$.name;if(!x.find(Re=>Re.value===ce)&&De){const Re={value:ce,label:De,charges:$.price,isCustom:!0};y(nt=>[...nt,Re])}}else ce&&(ce=parseInt(ce));I({serviceId:ce,service_name:$.service_name||$.name,price:$.price,quantity:$.quantity,total:$.total,editIndex:Q}),l(!0)},re=Q=>{const pe=me.current?.serviceItems[Q];if(pe.id)At.fire({title:r("Are you sure?","kivicare-clinic-management-system"),text:r("This will delete the service item from the bill.","kivicare-clinic-management-system"),icon:"warning",showCancelButton:!0,confirmButtonText:r("Yes, delete it!","kivicare-clinic-management-system"),cancelButtonText:r("Cancel","kivicare-clinic-management-system")}).then($=>{$.isConfirmed&&A.mutate(pe.id,{onSuccess:()=>{const ce=me.current?.serviceItems.filter((De,xe)=>xe!==Q);s(De=>({...De,serviceItems:ce})),w.mutate({clinic_id:me.current?.clinic?.id,doctor_id:me.current?.doctor?.id,serviceItems:ce},{onSuccess:De=>{s(xe=>({...xe,taxItems:De?.data?.calculated_taxes||[]}))}}),At.fire(r("Deleted!","kivicare-clinic-management-system"),r("Service item deleted.","kivicare-clinic-management-system"),"success")},onError:()=>{At.fire(r("Error!","kivicare-clinic-management-system"),r("Failed to delete service item.","kivicare-clinic-management-system"),"error")}})});else{const $=me.current?.serviceItems.filter((ce,De)=>De!==Q);s(ce=>({...ce,serviceItems:$})),w.mutate({clinic_id:me.current?.clinic?.id,doctor_id:me.current?.doctor?.id,serviceItems:$},{onSuccess:ce=>{s(De=>({...De,taxItems:ce?.data?.calculated_taxes||[]}))}})}},oe=async()=>{if(!E.quantity)return;if(E.price===""||E.price===null||E.price===void 0){J(r("Price is required","kivicare-clinic-management-system"));return}if(Number(E.price)<0){J(r("Price cannot be negative","kivicare-clinic-management-system"));return}const Q=E.serviceId||E.value;if(!Q){At.fire(r("Error!","kivicare-clinic-management-system"),r("Service ID missing.","kivicare-clinic-management-system"),"error");return}if(typeof E.editIndex=="number"&&n.serviceItems[E.editIndex]?.id){const $=n.serviceItems[E.editIndex].id;P.mutate({itemId:$,serviceId:Q,quantity:E.quantity,price:E.price},{onSuccess:()=>{const ce=n.serviceItems.map((De,xe)=>xe===E.editIndex?{...De,serviceId:Q,service_name:E.service_name,price:E.price,quantity:E.quantity,total:E.total}:De);s(De=>({...De,serviceItems:ce})),w.mutate({clinic_id:n.clinic?.id,doctor_id:n.doctor?.id,serviceItems:ce},{onSuccess:De=>{s(xe=>({...xe,taxItems:De?.data?.calculated_taxes||[]}))}}),I({service_name:"",price:"",quantity:"",total:""}),l(!1),At.fire(r("Updated!","kivicare-clinic-management-system"),r("Service item updated.","kivicare-clinic-management-system"),"success")},onError:()=>{At.fire(r("Error!","kivicare-clinic-management-system"),r("Failed to update service item.","kivicare-clinic-management-system"),"error")}});return}let pe;typeof E.editIndex=="number"?pe=n.serviceItems.map(($,ce)=>ce===E.editIndex?{...E,serviceId:Q,editIndex:void 0,isPaid:$.isPaid??!1}:$):pe=[...n.serviceItems,{...E,serviceId:Q,isPaid:!1}],s($=>({...$,serviceItems:pe,status:typeof E.editIndex!="number"?"unpaid":$.status})),w.mutate({quantity:E.quantity,clinic_id:n.clinic?.id,doctor_id:n.doctor?.id,amount:E.price,service_id:Q,serviceItems:pe},{onSuccess:$=>{s(ce=>({...ce,taxItems:$?.data?.calculated_taxes||[]}))}}),I({service_name:"",price:"",quantity:"",total:""}),l(!1)},C=Ln(),R=f.useMemo(()=>[C.accessor("sr",{id:"sr",header:()=>r("Sr. No","kivicare-clinic-management-system"),cell:Q=>Q.row.index+1,enableSorting:!1}),C.accessor("service_name",{id:"service_name",header:()=>r("Services","kivicare-clinic-management-system"),cell:Q=>Q.getValue(),enableSorting:!1}),C.accessor("quantity",{id:"quantity",header:()=>r("Quantity","kivicare-clinic-management-system"),cell:Q=>Q.getValue(),enableSorting:!1}),C.accessor("price",{id:"price",header:()=>r("Price","kivicare-clinic-management-system"),cell:Q=>p+Q.getValue()+g,enableSorting:!1}),C.accessor("total",{id:"total",header:()=>r("Total Amount","kivicare-clinic-management-system"),cell:Q=>p+Q.getValue()+g,enableSorting:!1}),C.accessor("payment_status",{id:"payment_status",header:()=>r("Payment Status","kivicare-clinic-management-system"),cell:Q=>Q.row.original.isPaid?i.jsx("span",{className:"badge bg-success-subtle text-success px-2 py-1",children:r("Paid","kivicare-clinic-management-system")}):i.jsx("span",{className:"badge bg-warning-subtle text-warning px-2 py-1",children:r("Unpaid","kivicare-clinic-management-system")}),enableSorting:!1}),C.display({id:"actions",header:()=>r("Actions","kivicare-clinic-management-system"),cell:Q=>Q.row.original.isPaid?i.jsx("span",{className:"text-muted font-size-12",children:r("-","kivicare-clinic-management-system")}):i.jsxs("div",{className:"d-flex gap-2",children:[i.jsx("button",{className:"btn btn-sm btn-outline-primary",title:r("Edit","kivicare-clinic-management-system"),onClick:()=>K(Q.row.index),children:i.jsx("i",{className:"ph ph-pencil"})}),i.jsx("button",{className:"btn btn-sm btn-outline-danger",title:r("Delete","kivicare-clinic-management-system"),onClick:()=>re(Q.row.index),children:i.jsx("i",{className:"ph ph-trash"})})]}),enableSorting:!1})],[p,g]),te=()=>{I({service_name:"",price:"",quantity:"",total:"",serviceId:""})},ne=Q=>{Q||te(),l(Q)},Y=f.useMemo(()=>(n?.taxItems||[]).reduce((Q,pe)=>Q+Number(pe.tax_amount||0),0),[n?.taxItems]),q=Number(n?.discountEnabled&&n?.discount||0),B=ae-q+Y,se=f.useMemo(()=>{const Q={};return(n?.taxItems||[]).forEach(pe=>{pe.tax_name&&(Q[pe.tax_name]?(Q[pe.tax_name].count+=1,Q[pe.tax_name].totalAmount+=Number(pe.tax_amount)):Q[pe.tax_name]={...pe,count:1,totalAmount:Number(pe.tax_amount)})}),Object.values(Q)},[n?.taxItems]);return f.useEffect(()=>{s(Q=>({...Q,service_total:ae,taxTotal:Y,discountValue:q,total_amount:B}))},[ae,Y,q,B,s]),f.useEffect(()=>{n?.discountEnabled||ie("")},[n?.discountEnabled]),i.jsx(lt,{show:t,backdrop:"static",onHide:e,centered:!0,size:"xl",dialogClassName:"edit-bill-model",children:n&&i.jsxs(i.Fragment,{children:[i.jsxs(lt.Header,{children:[i.jsx(lt.Title,{id:"closeEncounterModalLabel",children:o?r("Edit Bill","kivicare-clinic-management-system"):r("Generate Invoice","kivicare-clinic-management-system")}),i.jsx("button",{type:"button",className:"btn btn-link p-0",onClick:e,"aria-label":"Close",children:i.jsx("i",{className:"ph ph-x-circle h4 mb-0 icon-color fw-normal"})})]}),i.jsxs(lt.Body,{children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between gap-2 flex-wrap mb-3",children:[i.jsx("h6",{className:"m-0",children:r("Add items in billing","kivicare-clinic-management-system")}),i.jsx("button",{className:"btn btn-sm btn-secondary d-flex align-items-center gap-2",onClick:()=>ne(!a),children:a?i.jsxs(i.Fragment,{children:[i.jsx("i",{className:"ph ph-minus-circle"}),i.jsx("span",{children:r("Close","kivicare-clinic-management-system")})]}):i.jsxs(i.Fragment,{children:[i.jsx("i",{className:"ph ph-plus-circle"}),i.jsx("span",{children:r("Add New","kivicare-clinic-management-system")})]})})]}),a&&i.jsxs("div",{className:"encounter-box mb-5",children:[i.jsx("div",{className:"card bg-body mb-2",children:i.jsx("div",{className:"card-body",children:i.jsxs("div",{className:"row gy-4",children:[i.jsxs("div",{className:"col-md-6",children:[i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[r("Service","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-reuquired",children:"*"})]}),i.jsx(rn,{id:"doctor-service-select",value:E.serviceId?{value:E.serviceId,label:E.service_name,charges:E.price,isCustom:typeof E.serviceId=="string"&&E.serviceId.startsWith("custom-")}:null,onChange:U,className:"react-select-box",classNamePrefix:"react-select",formatCreateLabel:Q=>r("Create service","kivicare-clinic-management-system")+`: "${Q}"`,onCreateOption:ee,placeholder:r("Select or create service","kivicare-clinic-management-system"),loadOptions:async Q=>{if(!M.clinic_id||!M.doctor_id)return{data:[],pagination:{current_page:1,total_pages:1}};const pe=await jl.getDoctorServices({page:Q.page,perPage:Q.per_page,search:Q.search,clinic_id:M.clinic_id,doctor_id:M.doctor_id,status:"1"}),$=(pe?.data?.doctorServices||[]).map(De=>({value:De.serviceId,label:De.serviceName,charges:De.charges,isCustom:!1,...De}));let ce=$;return Q.page===1&&(ce=[...x.filter(xe=>!Q.search||xe.label.toLowerCase().includes(Q.search.toLowerCase())),...$]),{data:ce,pagination:{current_page:pe?.data?.pagination?.currentPage||1,total_pages:pe?.data?.pagination?.lastPage||1}}},dependencies:M,isSearchable:!0,isCreatable:!0})]}),i.jsxs("p",{className:"mt-3 mb-0 text-primary font-size-12 fw-semibold",children:[r("Note: Type and press enter to create new service","kivicare-clinic-management-system")," "]})]}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{className:"form-label",children:r("Price","kivicare-clinic-management-system")}),i.jsx("span",{className:"input-field-reuquired",children:"*"}),i.jsx("input",{className:`form-control ${X?"is-invalid":""}`,type:"number",name:"price",value:E.price,onChange:he,placeholder:r("eg $12","kivicare-clinic-management-system"),required:!0}),X&&i.jsx("div",{className:"invalid-feedback",children:X})]})}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[r("Quantity","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-reuquired",children:"*"})]}),i.jsx("input",{className:"form-control",type:"number",name:"quantity",value:E.quantity,onChange:le,min:1,placeholder:r("eg 1","kivicare-clinic-management-system"),disabled:!E.serviceId})]})}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[r("Total","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-reuquired",children:"*"})]}),i.jsx("input",{className:"form-control",type:"number",name:"total",value:E.total,readOnly:!0,disabled:!0,placeholder:r("eg $12","kivicare-clinic-management-system")})]})})]})})}),i.jsx("button",{type:"button",className:"btn m-2 btn-secondary",onClick:()=>l(!1),children:r("Cancel","kivicare-clinic-management-system")}),i.jsx("button",{type:"button",className:"btn m-2 btn-primary",onClick:oe,disabled:!E.serviceId||!E.quantity,children:r("Add","kivicare-clinic-management-system")})]}),i.jsx(wn,{data:n.serviceItems,columns:R,isLoading:!1,error:null,enableSelection:!1,renderEmptyState:()=>i.jsx("tr",{children:i.jsx("td",{colSpan:R.length,className:"text-center py-4 border-start border-end",children:r("No service data found","kivicare-clinic-management-system")})})}),i.jsxs("div",{className:"d-flex align-items-center justify-content-between gap-2 flex-wrap form-check form-switch p-0 mb-2",children:[i.jsx("label",{htmlFor:"switchCheckDiscount",className:"form-label m-0",children:r("Discount","kivicare-clinic-management-system")}),i.jsx("input",{className:"form-check-input",type:"checkbox",role:"switch",name:"discountEnabled",id:"switchCheckDiscount",checked:n.discountEnabled||!1,onChange:Q=>s(pe=>({...pe,discountEnabled:Q.target.checked,discount:Q.target.checked?pe.discount:0}))})]}),i.jsx("div",{className:"encounter-box mb-5",children:n.discountEnabled&&i.jsx("div",{className:"card bg-body mb-2",children:i.jsx("div",{className:"card-body",children:i.jsx("div",{className:"row gy-4",children:i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{htmlFor:"",className:"form-label",children:[r("Discount Value","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-reuquired",children:"*"})]}),i.jsx("input",{className:`form-control ${z?"is-invalid":""}`,type:"number",placeholder:r("eg $12","kivicare-clinic-management-system"),value:n.discount,onChange:W,name:"discount",required:!0}),z&&i.jsx("div",{className:"invalid-feedback",children:z})]})})})})})}),i.jsxs("div",{children:[i.jsx("h6",{children:r("Payment","kivicare-clinic-management-system")}),i.jsx("div",{className:"card bg-body",children:i.jsxs("div",{className:"card-body",children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap gap-2 mb-2",children:[i.jsx("span",{className:"font-size-14",children:r("Subtotal","kivicare-clinic-management-system")}),i.jsx("h6",{className:"m-0",children:p+ae+g})]}),i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap gap-2",children:[i.jsx("span",{className:"font-size-14",children:r("Tax","kivicare-clinic-management-system")}),i.jsxs("div",{className:"cursor-pointer applied-tax d-flex align-items-center",onClick:()=>N(Q=>!Q),style:{userSelect:"none"},children:[i.jsx("i",{className:`ph ${_?"ph-caret-up":"ph-caret-down"} fw-semibold`}),i.jsxs("span",{className:"text-danger h6 m-0 ms-1",children:[p,Y.toFixed(2),g]})]})]}),_&&i.jsxs("div",{className:"mt-2 p-3 section-bg rounded",children:[i.jsx("h6",{className:"font-size-14",children:r("Applied Tax","kivicare-clinic-management-system")}),se.length===0&&i.jsx("div",{className:"text-muted",children:r("No tax applied","kivicare-clinic-management-system")}),i.jsx("div",{className:"tax-spacing2",children:se.map((Q,pe)=>i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap gap-2 tax-spacing2-item",children:[i.jsxs("span",{className:"font-size-14",children:[Q.tax_name,Q.count>1?` x${Q.count}`:"",Q.rate?` (${Q.rate}%)`:""]}),i.jsxs("h6",{className:"font-size-14 m-0 text-danger",children:[p,Q.totalAmount.toFixed(2),g]})]},pe))})]}),i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap mt-2",children:[i.jsx("span",{className:"font-size-14",children:r("Discount","kivicare-clinic-management-system")}),i.jsx("h6",{className:"m-0",children:p+q+g})]}),i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap gap-2 mt-4",children:[i.jsx("h6",{className:"font-size-14 m-0",children:r("Grand Total","kivicare-clinic-management-system")}),B>=0?i.jsx("h5",{className:"m-0 text-primary",children:p+B.toFixed(2)+g}):i.jsx("h5",{className:"m-0 text-primary",children:p+0+g})]})]})})]}),i.jsxs("div",{children:[i.jsx("div",{className:"row gy-5",children:i.jsx("div",{className:"col-12",children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{htmlFor:"",className:"form-label",children:r("Payment Status","kivicare-clinic-management-system")}),i.jsxs("div",{className:"d-flex align-items-center flex-wrap column-gap-5 row-gap-1",children:[i.jsxs("div",{className:"form-check",children:[i.jsx("input",{className:"form-check-input",type:"radio",name:"status",id:"pending",value:"unpaid",checked:n.status==="unpaid",onChange:G}),i.jsx("label",{className:"form-check-label",htmlFor:"pending",children:r("Pending","kivicare-clinic-management-system")})]}),i.jsxs("div",{className:"form-check",children:[i.jsx("input",{className:"form-check-input",type:"radio",name:"status",id:"paid",value:"paid",checked:n.status==="paid",onChange:G}),i.jsx("label",{className:"form-check-label",htmlFor:"paid",children:r("Paid","kivicare-clinic-management-system")})]})]})]})})}),i.jsx("p",{className:"mt-3 mb-0 text-danger font-size-12 fw-semibold",children:r("Note: To close encounter, invoice payment is mandatory","kivicare-clinic-management-system")})]})]}),i.jsxs(lt.Footer,{className:"gap-3",children:[i.jsx(Xt,{variant:"secondary",onClick:c,children:r("Cancel","kivicare-clinic-management-system")}),n.status==="paid"?i.jsxs(i.Fragment,{children:[i.jsx(Xt,{variant:"primary",onClick:()=>ge(!1),disabled:D?.isLoading||v?.isLoading,children:r("Close encounter","kivicare-clinic-management-system")}),Number(m)>0&&i.jsx(Xt,{variant:"primary",onClick:()=>ge(!0),disabled:D?.isLoading||v?.isLoading,children:r("Close and checkout","kivicare-clinic-management-system")})]}):i.jsx(Xt,{variant:"primary",onClick:()=>ge(!1),disabled:D?.isLoading||v?.isLoading,children:r("Save","kivicare-clinic-management-system")})]})]})})},sU=({limit:t=3})=>{const e=Ln(),{user:n,isAddonActive:s,getPriceFormat:a}=mt(),[l,o]=f.useState(!1),[c,d]=f.useState(null),[m,u]=f.useState({serviceItems:[],discount:0,status:"unpaid"}),[h,p]=f.useState(!1),{data:g,isLoading:v}=qk(c,{enabled:!!c&&l});f.useEffect(()=>{g&&u(g?.data)},[g]);const x=A=>{d(A.id),o(!0)},y=()=>{o(!1),d(null),p(!1)},b=n?.clinic_id||0,{data:k,isLoading:w,error:T}=o$({limit:t,clinic_id:b>0?b:void 0}),j=f.useMemo(()=>k?k.data&&Array.isArray(k.data.data)?k.data.data:Array.isArray(k.data)?k.data:Array.isArray(k)?k:[]:[],[k]),D=s("kiviPro"),_=f.useMemo(()=>[e.accessor("patient",{enableSorting:!1,header:()=>r("Patient","kivicare-clinic-management-system"),cell:({getValue:A})=>{const P=A();return P?i.jsx(dn,{profileUrl:P.avatar,name:P.name,email:P.email,fallbackText:P.name?.charAt(0)||"P",variant:"primary",size:"sm"}):"-"}}),e.accessor("dateTime",{enableSorting:!1,header:()=>r("Date and time","kivicare-clinic-management-system"),cell:({getValue:A})=>{const P=A();return P||"-"}}),e.accessor("doctor",{enableSorting:!1,header:()=>r("Doctor","kivicare-clinic-management-system")}),...D?[e.accessor("clinic",{enableSorting:!1,header:()=>r("Clinic","kivicare-clinic-management-system"),cell:({getValue:A})=>A()||"-"})]:[],e.accessor("service",{enableSorting:!1,header:()=>r("Services","kivicare-clinic-management-system")}),e.accessor("charges",{enableSorting:!1,header:()=>r("Charges","kivicare-clinic-management-system"),cell:({getValue:A})=>a(parseFloat(String(A()||0).replace(/[^0-9.]/g,"")||"0"))}),e.accessor("paymentMode",{enableSorting:!1,header:()=>r("Payment Mode","kivicare-clinic-management-system")}),e.accessor("paymentStatus",{enableSorting:!1,header:()=>r("Status","kivicare-clinic-management-system"),cell:({getValue:A})=>{const P=A(),I=String(P||"").toLowerCase()==="paid";return i.jsx("span",{className:`badge ${I?"bg-success-subtle text-success":"bg-danger-subtle text-danger"} px-3 py-2`,children:I?r("Paid","kivicare-clinic-management-system"):r("Unpaid","kivicare-clinic-management-system")})}}),e.display({enableSorting:!1,id:"actions",header:()=>r("Actions","kivicare-clinic-management-system"),cell:({row:A})=>{const P=A.original,I=String(P.paymentStatus||"").toLowerCase()==="paid";return i.jsxs("div",{className:"d-flex align-items-center gap-2 fs-5",children:[i.jsx(ht,{to:`/billings/view/${P.id}`,className:"text-secondary",title:r("View Bill","kivicare-clinic-management-system"),children:i.jsx("i",{className:"ph ph-eye"})}),!I&&i.jsx("button",{className:"btn btn-link text-success fs-5 p-0",onClick:()=>x(P),title:r("Edit Bill","kivicare-clinic-management-system"),children:i.jsx("i",{className:"ph ph-pencil-simple-line"})})]})}})],[D,e]);if(T)return i.jsxs("div",{className:"alert alert-danger",role:"alert",children:[r("Error loading payment data:","kivicare-clinic-management-system")," ",T.message||r("Unknown error","kivicare-clinic-management-system")]});const N={currentPage:1,perPage:t,totalItems:j.length,lastPage:1};return i.jsxs(i.Fragment,{children:[i.jsx(wn,{data:j,columns:_,isLoading:w,currentPage:N.currentPage,perPage:N.perPage,totalItems:N.totalItems,lastPage:N.lastPage,bordered:!0,striped:!0,hover:!0,enableSelection:!1,manualPagination:!1,moduleNamePlural:"payments",renderEmptyState:()=>i.jsx("tr",{children:i.jsx("td",{colSpan:10,className:"text-center py-4 border-start border-end",children:r("No payment records found","kivicare-clinic-management-system")})})}),i.jsx(Hk,{show:l,onHide:y,editFormData:m,setEditFormData:u,showAddServiceItemForm:h,setShowAddServiceItemForm:p,editBillId:c,handleCloseEditModal:y})]})};var zg,$t,HA,zA,$c,Hl,c1,VA,UA,Ip={},WA=[],aU=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function nl(t,e){for(var n in e)t[n]=e[n];return t}function KA(t){var e=t.parentNode;e&&e.removeChild(t)}function we(t,e,n){var s,a,l,o={};for(l in e)l=="key"?s=e[l]:l=="ref"?a=e[l]:o[l]=e[l];if(arguments.length>2&&(o.children=arguments.length>3?zg.call(arguments,2):n),typeof t=="function"&&t.defaultProps!=null)for(l in t.defaultProps)o[l]===void 0&&(o[l]=t.defaultProps[l]);return Lh(t,o,s,a,null)}function Lh(t,e,n,s,a){var l={type:t,props:e,key:n,ref:s,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:a??++HA};return a==null&&$t.vnode!=null&&$t.vnode(l),l}function Ui(){return{current:null}}function In(t){return t.children}function rU(t,e,n,s,a){var l;for(l in n)l==="children"||l==="key"||l in e||Op(t,l,null,n[l],s);for(l in e)a&&typeof e[l]!="function"||l==="children"||l==="key"||l==="value"||l==="checked"||n[l]===e[l]||Op(t,l,e[l],n[l],s)}function d1(t,e,n){e[0]==="-"?t.setProperty(e,n??""):t[e]=n==null?"":typeof n!="number"||aU.test(e)?n:n+"px"}function Op(t,e,n,s,a){var l;e:if(e==="style")if(typeof n=="string")t.style.cssText=n;else{if(typeof s=="string"&&(t.style.cssText=s=""),s)for(e in s)n&&e in n||d1(t.style,e,"");if(n)for(e in n)s&&n[e]===s[e]||d1(t.style,e,n[e])}else if(e[0]==="o"&&e[1]==="n")l=e!==(e=e.replace(/Capture$/,"")),e=e.toLowerCase()in t?e.toLowerCase().slice(2):e.slice(2),t.l||(t.l={}),t.l[e+l]=n,n?s||t.addEventListener(e,l?u1:m1,l):t.removeEventListener(e,l?u1:m1,l);else if(e!=="dangerouslySetInnerHTML"){if(a)e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!=="width"&&e!=="height"&&e!=="href"&&e!=="list"&&e!=="form"&&e!=="tabIndex"&&e!=="download"&&e in t)try{t[e]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&e.indexOf("-")==-1?t.removeAttribute(e):t.setAttribute(e,n))}}function m1(t){$c=!0;try{return this.l[t.type+!1]($t.event?$t.event(t):t)}finally{$c=!1}}function u1(t){$c=!0;try{return this.l[t.type+!0]($t.event?$t.event(t):t)}finally{$c=!1}}function _s(t,e){this.props=t,this.context=e}function _m(t,e){if(e==null)return t.__?_m(t.__,t.__.__k.indexOf(t)+1):null;for(var n;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null)return n.__e;return typeof t.type=="function"?_m(t):null}function GA(t){var e,n;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null){t.__e=t.__c.base=n.__e;break}return GA(t)}}function lU(t){$c?setTimeout(t):VA(t)}function dy(t){(!t.__d&&(t.__d=!0)&&Hl.push(t)&&!Fp.__r++||c1!==$t.debounceRendering)&&((c1=$t.debounceRendering)||lU)(Fp)}function Fp(){var t,e,n,s,a,l,o,c;for(Hl.sort(function(d,m){return d.__v.__b-m.__v.__b});t=Hl.shift();)t.__d&&(e=Hl.length,s=void 0,a=void 0,o=(l=(n=t).__v).__e,(c=n.__P)&&(s=[],(a=nl({},l)).__v=l.__v+1,zk(c,l,a,n.__n,c.ownerSVGElement!==void 0,l.__h!=null?[o]:null,s,o??_m(l),l.__h),JA(s,l),l.__e!=o&&GA(l)),Hl.length>e&&Hl.sort(function(d,m){return d.__v.__b-m.__v.__b}));Fp.__r=0}function YA(t,e,n,s,a,l,o,c,d,m){var u,h,p,g,v,x,y,b=s&&s.__k||WA,k=b.length;for(n.__k=[],u=0;u<e.length;u++)if((g=n.__k[u]=(g=e[u])==null||typeof g=="boolean"?null:typeof g=="string"||typeof g=="number"||typeof g=="bigint"?Lh(null,g,null,null,g):Array.isArray(g)?Lh(In,{children:g},null,null,null):g.__b>0?Lh(g.type,g.props,g.key,g.ref?g.ref:null,g.__v):g)!=null){if(g.__=n,g.__b=n.__b+1,(p=b[u])===null||p&&g.key==p.key&&g.type===p.type)b[u]=void 0;else for(h=0;h<k;h++){if((p=b[h])&&g.key==p.key&&g.type===p.type){b[h]=void 0;break}p=null}zk(t,g,p=p||Ip,a,l,o,c,d,m),v=g.__e,(h=g.ref)&&p.ref!=h&&(y||(y=[]),p.ref&&y.push(p.ref,null,g),y.push(h,g.__c||v,g)),v!=null?(x==null&&(x=v),typeof g.type=="function"&&g.__k===p.__k?g.__d=d=QA(g,d,t):d=ZA(t,g,p,b,v,d),typeof n.type=="function"&&(n.__d=d)):d&&p.__e==d&&d.parentNode!=t&&(d=_m(p))}for(n.__e=x,u=k;u--;)b[u]!=null&&(typeof n.type=="function"&&b[u].__e!=null&&b[u].__e==n.__d&&(n.__d=XA(s).nextSibling),tD(b[u],b[u]));if(y)for(u=0;u<y.length;u++)eD(y[u],y[++u],y[++u])}function QA(t,e,n){for(var s,a=t.__k,l=0;a&&l<a.length;l++)(s=a[l])&&(s.__=t,e=typeof s.type=="function"?QA(s,e,n):ZA(n,s,s,a,s.__e,e));return e}function Lp(t,e){return e=e||[],t==null||typeof t=="boolean"||(Array.isArray(t)?t.some(function(n){Lp(n,e)}):e.push(t)),e}function ZA(t,e,n,s,a,l){var o,c,d;if(e.__d!==void 0)o=e.__d,e.__d=void 0;else if(n==null||a!=l||a.parentNode==null)e:if(l==null||l.parentNode!==t)t.appendChild(a),o=null;else{for(c=l,d=0;(c=c.nextSibling)&&d<s.length;d+=1)if(c==a)break e;t.insertBefore(a,l),o=l}return o!==void 0?o:a.nextSibling}function XA(t){var e,n,s;if(t.type==null||typeof t.type=="string")return t.__e;if(t.__k){for(e=t.__k.length-1;e>=0;e--)if((n=t.__k[e])&&(s=XA(n)))return s}return null}function zk(t,e,n,s,a,l,o,c,d){var m,u,h,p,g,v,x,y,b,k,w,T,j,D,_,N=e.type;if(e.constructor!==void 0)return null;n.__h!=null&&(d=n.__h,c=e.__e=n.__e,e.__h=null,l=[c]),(m=$t.__b)&&m(e);try{e:if(typeof N=="function"){if(y=e.props,b=(m=N.contextType)&&s[m.__c],k=m?b?b.props.value:m.__:s,n.__c?x=(u=e.__c=n.__c).__=u.__E:("prototype"in N&&N.prototype.render?e.__c=u=new N(y,k):(e.__c=u=new _s(y,k),u.constructor=N,u.render=cU),b&&b.sub(u),u.props=y,u.state||(u.state={}),u.context=k,u.__n=s,h=u.__d=!0,u.__h=[],u._sb=[]),u.__s==null&&(u.__s=u.state),N.getDerivedStateFromProps!=null&&(u.__s==u.state&&(u.__s=nl({},u.__s)),nl(u.__s,N.getDerivedStateFromProps(y,u.__s))),p=u.props,g=u.state,u.__v=e,h)N.getDerivedStateFromProps==null&&u.componentWillMount!=null&&u.componentWillMount(),u.componentDidMount!=null&&u.__h.push(u.componentDidMount);else{if(N.getDerivedStateFromProps==null&&y!==p&&u.componentWillReceiveProps!=null&&u.componentWillReceiveProps(y,k),!u.__e&&u.shouldComponentUpdate!=null&&u.shouldComponentUpdate(y,u.__s,k)===!1||e.__v===n.__v){for(e.__v!==n.__v&&(u.props=y,u.state=u.__s,u.__d=!1),e.__e=n.__e,e.__k=n.__k,e.__k.forEach(function(A){A&&(A.__=e)}),w=0;w<u._sb.length;w++)u.__h.push(u._sb[w]);u._sb=[],u.__h.length&&o.push(u);break e}u.componentWillUpdate!=null&&u.componentWillUpdate(y,u.__s,k),u.componentDidUpdate!=null&&u.__h.push(function(){u.componentDidUpdate(p,g,v)})}if(u.context=k,u.props=y,u.__P=t,T=$t.__r,j=0,"prototype"in N&&N.prototype.render){for(u.state=u.__s,u.__d=!1,T&&T(e),m=u.render(u.props,u.state,u.context),D=0;D<u._sb.length;D++)u.__h.push(u._sb[D]);u._sb=[]}else do u.__d=!1,T&&T(e),m=u.render(u.props,u.state,u.context),u.state=u.__s;while(u.__d&&++j<25);u.state=u.__s,u.getChildContext!=null&&(s=nl(nl({},s),u.getChildContext())),h||u.getSnapshotBeforeUpdate==null||(v=u.getSnapshotBeforeUpdate(p,g)),_=m!=null&&m.type===In&&m.key==null?m.props.children:m,YA(t,Array.isArray(_)?_:[_],e,n,s,a,l,o,c,d),u.base=e.__e,e.__h=null,u.__h.length&&o.push(u),x&&(u.__E=u.__=null),u.__e=!1}else l==null&&e.__v===n.__v?(e.__k=n.__k,e.__e=n.__e):e.__e=oU(n.__e,e,n,s,a,l,o,d);(m=$t.diffed)&&m(e)}catch(A){e.__v=null,(d||l!=null)&&(e.__e=c,e.__h=!!d,l[l.indexOf(c)]=null),$t.__e(A,e,n)}}function JA(t,e){$t.__c&&$t.__c(e,t),t.some(function(n){try{t=n.__h,n.__h=[],t.some(function(s){s.call(n)})}catch(s){$t.__e(s,n.__v)}})}function oU(t,e,n,s,a,l,o,c){var d,m,u,h=n.props,p=e.props,g=e.type,v=0;if(g==="svg"&&(a=!0),l!=null){for(;v<l.length;v++)if((d=l[v])&&"setAttribute"in d==!!g&&(g?d.localName===g:d.nodeType===3)){t=d,l[v]=null;break}}if(t==null){if(g===null)return document.createTextNode(p);t=a?document.createElementNS("http://www.w3.org/2000/svg",g):document.createElement(g,p.is&&p),l=null,c=!1}if(g===null)h===p||c&&t.data===p||(t.data=p);else{if(l=l&&zg.call(t.childNodes),m=(h=n.props||Ip).dangerouslySetInnerHTML,u=p.dangerouslySetInnerHTML,!c){if(l!=null)for(h={},v=0;v<t.attributes.length;v++)h[t.attributes[v].name]=t.attributes[v].value;(u||m)&&(u&&(m&&u.__html==m.__html||u.__html===t.innerHTML)||(t.innerHTML=u&&u.__html||""))}if(rU(t,p,h,a,c),u)e.__k=[];else if(v=e.props.children,YA(t,Array.isArray(v)?v:[v],e,n,s,a&&g!=="foreignObject",l,o,l?l[0]:n.__k&&_m(n,0),c),l!=null)for(v=l.length;v--;)l[v]!=null&&KA(l[v]);c||("value"in p&&(v=p.value)!==void 0&&(v!==t.value||g==="progress"&&!v||g==="option"&&v!==h.value)&&Op(t,"value",v,h.value,!1),"checked"in p&&(v=p.checked)!==void 0&&v!==t.checked&&Op(t,"checked",v,h.checked,!1))}return t}function eD(t,e,n){try{typeof t=="function"?t(e):t.current=e}catch(s){$t.__e(s,n)}}function tD(t,e,n){var s,a;if($t.unmount&&$t.unmount(t),(s=t.ref)&&(s.current&&s.current!==t.__e||eD(s,null,e)),(s=t.__c)!=null){if(s.componentWillUnmount)try{s.componentWillUnmount()}catch(l){$t.__e(l,e)}s.base=s.__P=null,t.__c=void 0}if(s=t.__k)for(a=0;a<s.length;a++)s[a]&&tD(s[a],e,n||typeof t.type!="function");n||t.__e==null||KA(t.__e),t.__=t.__e=t.__d=void 0}function cU(t,e,n){return this.constructor(t,n)}function Sm(t,e,n){var s,a,l;$t.__&&$t.__(t,e),a=(s=!1)?null:e.__k,l=[],zk(e,t=e.__k=we(In,null,[t]),a||Ip,Ip,e.ownerSVGElement!==void 0,a?null:e.firstChild?zg.call(e.childNodes):null,l,a?a.__e:e.firstChild,s),JA(l,t)}function dU(t,e){var n={__c:e="__cC"+UA++,__:t,Consumer:function(s,a){return s.children(a)},Provider:function(s){var a,l;return this.getChildContext||(a=[],(l={})[e]=this,this.getChildContext=function(){return l},this.shouldComponentUpdate=function(o){this.props.value!==o.value&&a.some(function(c){c.__e=!0,dy(c)})},this.sub=function(o){a.push(o);var c=o.componentWillUnmount;o.componentWillUnmount=function(){a.splice(a.indexOf(o),1),c&&c.call(o)}}),s.children}};return n.Provider.__=n.Consumer.contextType=n}zg=WA.slice,$t={__e:function(t,e,n,s){for(var a,l,o;e=e.__;)if((a=e.__c)&&!a.__)try{if((l=a.constructor)&&l.getDerivedStateFromError!=null&&(a.setState(l.getDerivedStateFromError(t)),o=a.__d),a.componentDidCatch!=null&&(a.componentDidCatch(t,s||{}),o=a.__d),o)return a.__E=a}catch(c){t=c}throw t}},HA=0,zA=function(t){return t!=null&&t.constructor===void 0},$c=!1,_s.prototype.setState=function(t,e){var n;n=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=nl({},this.state),typeof t=="function"&&(t=t(nl({},n),this.props)),t&&nl(n,t),t!=null&&this.__v&&(e&&this._sb.push(e),dy(this))},_s.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),dy(this))},_s.prototype.render=In,Hl=[],VA=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Fp.__r=0,UA=0;var Pa,Rv,h1,nD=[],Pv=[],p1=$t.__b,g1=$t.__r,f1=$t.diffed,v1=$t.__c,x1=$t.unmount;function mU(){for(var t;t=nD.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach($h),t.__H.__h.forEach(my),t.__H.__h=[]}catch(e){t.__H.__h=[],$t.__e(e,t.__v)}}$t.__b=function(t){Pa=null,p1&&p1(t)},$t.__r=function(t){g1&&g1(t);var e=(Pa=t.__c).__H;e&&(Rv===Pa?(e.__h=[],Pa.__h=[],e.__.forEach(function(n){n.__N&&(n.__=n.__N),n.__V=Pv,n.__N=n.i=void 0})):(e.__h.forEach($h),e.__h.forEach(my),e.__h=[])),Rv=Pa},$t.diffed=function(t){f1&&f1(t);var e=t.__c;e&&e.__H&&(e.__H.__h.length&&(nD.push(e)!==1&&h1===$t.requestAnimationFrame||((h1=$t.requestAnimationFrame)||uU)(mU)),e.__H.__.forEach(function(n){n.i&&(n.__H=n.i),n.__V!==Pv&&(n.__=n.__V),n.i=void 0,n.__V=Pv})),Rv=Pa=null},$t.__c=function(t,e){e.some(function(n){try{n.__h.forEach($h),n.__h=n.__h.filter(function(s){return!s.__||my(s)})}catch(s){e.some(function(a){a.__h&&(a.__h=[])}),e=[],$t.__e(s,n.__v)}}),v1&&v1(t,e)},$t.unmount=function(t){x1&&x1(t);var e,n=t.__c;n&&n.__H&&(n.__H.__.forEach(function(s){try{$h(s)}catch(a){e=a}}),n.__H=void 0,e&&$t.__e(e,n.__v))};var y1=typeof requestAnimationFrame=="function";function uU(t){var e,n=function(){clearTimeout(s),y1&&cancelAnimationFrame(e),setTimeout(t)},s=setTimeout(n,100);y1&&(e=requestAnimationFrame(n))}function $h(t){var e=Pa,n=t.__c;typeof n=="function"&&(t.__c=void 0,n()),Pa=e}function my(t){var e=Pa;t.__c=t.__(),Pa=e}function hU(t,e){for(var n in e)t[n]=e[n];return t}function b1(t,e){for(var n in t)if(n!=="__source"&&!(n in e))return!0;for(var s in e)if(s!=="__source"&&t[s]!==e[s])return!0;return!1}function k1(t){this.props=t}(k1.prototype=new _s).isPureReactComponent=!0,k1.prototype.shouldComponentUpdate=function(t,e){return b1(this.props,t)||b1(this.state,e)};var w1=$t.__b;$t.__b=function(t){t.type&&t.type.__f&&t.ref&&(t.props.ref=t.ref,t.ref=null),w1&&w1(t)};var pU=$t.__e;$t.__e=function(t,e,n,s){if(t.then){for(var a,l=e;l=l.__;)if((a=l.__c)&&a.__c)return e.__e==null&&(e.__e=n.__e,e.__k=n.__k),a.__c(t,e)}pU(t,e,n,s)};var j1=$t.unmount;function iD(t,e,n){return t&&(t.__c&&t.__c.__H&&(t.__c.__H.__.forEach(function(s){typeof s.__c=="function"&&s.__c()}),t.__c.__H=null),(t=hU({},t)).__c!=null&&(t.__c.__P===n&&(t.__c.__P=e),t.__c=null),t.__k=t.__k&&t.__k.map(function(s){return iD(s,e,n)})),t}function sD(t,e,n){return t&&(t.__v=null,t.__k=t.__k&&t.__k.map(function(s){return sD(s,e,n)}),t.__c&&t.__c.__P===e&&(t.__e&&n.insertBefore(t.__e,t.__d),t.__c.__e=!0,t.__c.__P=n)),t}function Mv(){this.__u=0,this.t=null,this.__b=null}function aD(t){var e=t.__.__c;return e&&e.__a&&e.__a(t)}function oh(){this.u=null,this.o=null}$t.unmount=function(t){var e=t.__c;e&&e.__R&&e.__R(),e&&t.__h===!0&&(t.type=null),j1&&j1(t)},(Mv.prototype=new _s).__c=function(t,e){var n=e.__c,s=this;s.t==null&&(s.t=[]),s.t.push(n);var a=aD(s.__v),l=!1,o=function(){l||(l=!0,n.__R=null,a?a(c):c())};n.__R=o;var c=function(){if(!--s.__u){if(s.state.__a){var m=s.state.__a;s.__v.__k[0]=sD(m,m.__c.__P,m.__c.__O)}var u;for(s.setState({__a:s.__b=null});u=s.t.pop();)u.forceUpdate()}},d=e.__h===!0;s.__u++||d||s.setState({__a:s.__b=s.__v.__k[0]}),t.then(o,o)},Mv.prototype.componentWillUnmount=function(){this.t=[]},Mv.prototype.render=function(t,e){if(this.__b){if(this.__v.__k){var n=document.createElement("div"),s=this.__v.__k[0].__c;this.__v.__k[0]=iD(this.__b,n,s.__O=s.__P)}this.__b=null}var a=e.__a&&we(In,null,t.fallback);return a&&(a.__h=null),[we(In,null,e.__a?null:t.children),a]};var N1=function(t,e,n){if(++n[1]===n[0]&&t.o.delete(e),t.props.revealOrder&&(t.props.revealOrder[0]!=="t"||!t.o.size))for(n=t.u;n;){for(;n.length>3;)n.pop()();if(n[1]<n[0])break;t.u=n=n[2]}};function gU(t){return this.getChildContext=function(){return t.context},t.children}function fU(t){var e=this,n=t.i;e.componentWillUnmount=function(){Sm(null,e.l),e.l=null,e.i=null},e.i&&e.i!==n&&e.componentWillUnmount(),t.__v?(e.l||(e.i=n,e.l={nodeType:1,parentNode:n,childNodes:[],appendChild:function(s){this.childNodes.push(s),e.i.appendChild(s)},insertBefore:function(s,a){this.childNodes.push(s),e.i.appendChild(s)},removeChild:function(s){this.childNodes.splice(this.childNodes.indexOf(s)>>>1,1),e.i.removeChild(s)}}),Sm(we(gU,{context:e.context},t.__v),e.l)):e.l&&e.componentWillUnmount()}function vU(t,e){var n=we(fU,{__v:t,i:e});return n.containerInfo=e,n}(oh.prototype=new _s).__a=function(t){var e=this,n=aD(e.__v),s=e.o.get(t);return s[0]++,function(a){var l=function(){e.props.revealOrder?(s.push(a),N1(e,t,s)):a()};n?n(l):l()}},oh.prototype.render=function(t){this.u=null,this.o=new Map;var e=Lp(t.children);t.revealOrder&&t.revealOrder[0]==="b"&&e.reverse();for(var n=e.length;n--;)this.o.set(e[n],this.u=[1,0,this.u]);return t.children},oh.prototype.componentDidUpdate=oh.prototype.componentDidMount=function(){var t=this;this.o.forEach(function(e,n){N1(t,n,e)})};var xU=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,yU=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,bU=typeof document<"u",kU=function(t){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/i:/fil|che|ra/i).test(t)};_s.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(t){Object.defineProperty(_s.prototype,t,{configurable:!0,get:function(){return this["UNSAFE_"+t]},set:function(e){Object.defineProperty(this,t,{configurable:!0,writable:!0,value:e})}})});var C1=$t.event;function wU(){}function jU(){return this.cancelBubble}function NU(){return this.defaultPrevented}$t.event=function(t){return C1&&(t=C1(t)),t.persist=wU,t.isPropagationStopped=jU,t.isDefaultPrevented=NU,t.nativeEvent=t};var _1={configurable:!0,get:function(){return this.class}},S1=$t.vnode;$t.vnode=function(t){var e=t.type,n=t.props,s=n;if(typeof e=="string"){var a=e.indexOf("-")===-1;for(var l in s={},n){var o=n[l];bU&&l==="children"&&e==="noscript"||l==="value"&&"defaultValue"in n&&o==null||(l==="defaultValue"&&"value"in n&&n.value==null?l="value":l==="download"&&o===!0?o="":/ondoubleclick/i.test(l)?l="ondblclick":/^onchange(textarea|input)/i.test(l+e)&&!kU(n.type)?l="oninput":/^onfocus$/i.test(l)?l="onfocusin":/^onblur$/i.test(l)?l="onfocusout":/^on(Ani|Tra|Tou|BeforeInp|Compo)/.test(l)?l=l.toLowerCase():a&&yU.test(l)?l=l.replace(/[A-Z0-9]/g,"-$&").toLowerCase():o===null&&(o=void 0),/^oninput$/i.test(l)&&(l=l.toLowerCase(),s[l]&&(l="oninputCapture")),s[l]=o)}e=="select"&&s.multiple&&Array.isArray(s.value)&&(s.value=Lp(n.children).forEach(function(c){c.props.selected=s.value.indexOf(c.props.value)!=-1})),e=="select"&&s.defaultValue!=null&&(s.value=Lp(n.children).forEach(function(c){c.props.selected=s.multiple?s.defaultValue.indexOf(c.props.value)!=-1:s.defaultValue==c.props.value})),t.props=s,n.class!=n.className&&(_1.enumerable="className"in n,n.className!=null&&(s.class=n.className),Object.defineProperty(s,"className",_1))}t.$$typeof=xU,S1&&S1(t)};var E1=$t.__r;$t.__r=function(t){E1&&E1(t),t.__c};const rD=[],uy=new Map;function Vk(t){rD.push(t),uy.forEach(e=>{oD(e,t)})}function CU(t){t.isConnected&&t.getRootNode&&lD(t.getRootNode())}function lD(t){let e=uy.get(t);if(!e||!e.isConnected){if(e=t.querySelector("style[data-fullcalendar]"),!e){e=document.createElement("style"),e.setAttribute("data-fullcalendar","");const n=SU();n&&(e.nonce=n);const s=t===document?document.head:t,a=t===document?s.querySelector("script,link[rel=stylesheet],link[as=style],style"):s.firstChild;s.insertBefore(e,a)}uy.set(t,e),_U(e)}}function _U(t){for(const e of rD)oD(t,e)}function oD(t,e){const{sheet:n}=t,s=n.cssRules.length;e.split("}").forEach((a,l)=>{a=a.trim(),a&&n.insertRule(a+"}",s+l)})}let Iv;function SU(){return Iv===void 0&&(Iv=EU()),Iv}function EU(){const t=document.querySelector('meta[name="csp-nonce"]');if(t&&t.hasAttribute("content"))return t.getAttribute("content");const e=document.querySelector("script[nonce]");return e&&e.nonce||""}typeof document<"u"&&lD(document);var TU=':root{--fc-small-font-size:.85em;--fc-page-bg-color:#fff;--fc-neutral-bg-color:hsla(0,0%,82%,.3);--fc-neutral-text-color:grey;--fc-border-color:#ddd;--fc-button-text-color:#fff;--fc-button-bg-color:#2c3e50;--fc-button-border-color:#2c3e50;--fc-button-hover-bg-color:#1e2b37;--fc-button-hover-border-color:#1a252f;--fc-button-active-bg-color:#1a252f;--fc-button-active-border-color:#151e27;--fc-event-bg-color:#3788d8;--fc-event-border-color:#3788d8;--fc-event-text-color:#fff;--fc-event-selected-overlay-color:rgba(0,0,0,.25);--fc-more-link-bg-color:#d0d0d0;--fc-more-link-text-color:inherit;--fc-event-resizer-thickness:8px;--fc-event-resizer-dot-total-width:8px;--fc-event-resizer-dot-border-width:1px;--fc-non-business-color:hsla(0,0%,84%,.3);--fc-bg-event-color:#8fdf82;--fc-bg-event-opacity:0.3;--fc-highlight-color:rgba(188,232,241,.3);--fc-today-bg-color:rgba(255,220,40,.15);--fc-now-indicator-color:red}.fc-not-allowed,.fc-not-allowed .fc-event{cursor:not-allowed}.fc{display:flex;flex-direction:column;font-size:1em}.fc,.fc *,.fc :after,.fc :before{box-sizing:border-box}.fc table{border-collapse:collapse;border-spacing:0;font-size:1em}.fc th{text-align:center}.fc td,.fc th{padding:0;vertical-align:top}.fc a[data-navlink]{cursor:pointer}.fc a[data-navlink]:hover{text-decoration:underline}.fc-direction-ltr{direction:ltr;text-align:left}.fc-direction-rtl{direction:rtl;text-align:right}.fc-theme-standard td,.fc-theme-standard th{border:1px solid var(--fc-border-color)}.fc-liquid-hack td,.fc-liquid-hack th{position:relative}@font-face{font-family:fcicons;font-style:normal;font-weight:400;src:url("data:application/x-font-ttf;charset=utf-8;base64,AAEAAAALAIAAAwAwT1MvMg8SBfAAAAC8AAAAYGNtYXAXVtKNAAABHAAAAFRnYXNwAAAAEAAAAXAAAAAIZ2x5ZgYydxIAAAF4AAAFNGhlYWQUJ7cIAAAGrAAAADZoaGVhB20DzAAABuQAAAAkaG10eCIABhQAAAcIAAAALGxvY2ED4AU6AAAHNAAAABhtYXhwAA8AjAAAB0wAAAAgbmFtZXsr690AAAdsAAABhnBvc3QAAwAAAAAI9AAAACAAAwPAAZAABQAAApkCzAAAAI8CmQLMAAAB6wAzAQkAAAAAAAAAAAAAAAAAAAABEAAAAAAAAAAAAAAAAAAAAABAAADpBgPA/8AAQAPAAEAAAAABAAAAAAAAAAAAAAAgAAAAAAADAAAAAwAAABwAAQADAAAAHAADAAEAAAAcAAQAOAAAAAoACAACAAIAAQAg6Qb//f//AAAAAAAg6QD//f//AAH/4xcEAAMAAQAAAAAAAAAAAAAAAQAB//8ADwABAAAAAAAAAAAAAgAANzkBAAAAAAEAAAAAAAAAAAACAAA3OQEAAAAAAQAAAAAAAAAAAAIAADc5AQAAAAABAWIAjQKeAskAEwAAJSc3NjQnJiIHAQYUFwEWMjc2NCcCnuLiDQ0MJAz/AA0NAQAMJAwNDcni4gwjDQwM/wANIwz/AA0NDCMNAAAAAQFiAI0CngLJABMAACUBNjQnASYiBwYUHwEHBhQXFjI3AZ4BAA0N/wAMJAwNDeLiDQ0MJAyNAQAMIw0BAAwMDSMM4uINIwwNDQAAAAIA4gC3Ax4CngATACcAACUnNzY0JyYiDwEGFB8BFjI3NjQnISc3NjQnJiIPAQYUHwEWMjc2NCcB87e3DQ0MIw3VDQ3VDSMMDQ0BK7e3DQ0MJAzVDQ3VDCQMDQ3zuLcMJAwNDdUNIwzWDAwNIwy4twwkDA0N1Q0jDNYMDA0jDAAAAgDiALcDHgKeABMAJwAAJTc2NC8BJiIHBhQfAQcGFBcWMjchNzY0LwEmIgcGFB8BBwYUFxYyNwJJ1Q0N1Q0jDA0Nt7cNDQwjDf7V1Q0N1QwkDA0Nt7cNDQwkDLfWDCMN1Q0NDCQMt7gMIw0MDNYMIw3VDQ0MJAy3uAwjDQwMAAADAFUAAAOrA1UAMwBoAHcAABMiBgcOAQcOAQcOARURFBYXHgEXHgEXHgEzITI2Nz4BNz4BNz4BNRE0JicuAScuAScuASMFITIWFx4BFx4BFx4BFREUBgcOAQcOAQcOASMhIiYnLgEnLgEnLgE1ETQ2Nz4BNz4BNz4BMxMhMjY1NCYjISIGFRQWM9UNGAwLFQkJDgUFBQUFBQ4JCRULDBgNAlYNGAwLFQkJDgUFBQUFBQ4JCRULDBgN/aoCVgQIBAQHAwMFAQIBAQIBBQMDBwQECAT9qgQIBAQHAwMFAQIBAQIBBQMDBwQECASAAVYRGRkR/qoRGRkRA1UFBAUOCQkVDAsZDf2rDRkLDBUJCA4FBQUFBQUOCQgVDAsZDQJVDRkLDBUJCQ4FBAVVAgECBQMCBwQECAX9qwQJAwQHAwMFAQICAgIBBQMDBwQDCQQCVQUIBAQHAgMFAgEC/oAZEhEZGRESGQAAAAADAFUAAAOrA1UAMwBoAIkAABMiBgcOAQcOAQcOARURFBYXHgEXHgEXHgEzITI2Nz4BNz4BNz4BNRE0JicuAScuAScuASMFITIWFx4BFx4BFx4BFREUBgcOAQcOAQcOASMhIiYnLgEnLgEnLgE1ETQ2Nz4BNz4BNz4BMxMzFRQWMzI2PQEzMjY1NCYrATU0JiMiBh0BIyIGFRQWM9UNGAwLFQkJDgUFBQUFBQ4JCRULDBgNAlYNGAwLFQkJDgUFBQUFBQ4JCRULDBgN/aoCVgQIBAQHAwMFAQIBAQIBBQMDBwQECAT9qgQIBAQHAwMFAQIBAQIBBQMDBwQECASAgBkSEhmAERkZEYAZEhIZgBEZGREDVQUEBQ4JCRUMCxkN/asNGQsMFQkIDgUFBQUFBQ4JCBUMCxkNAlUNGQsMFQkJDgUEBVUCAQIFAwIHBAQIBf2rBAkDBAcDAwUBAgICAgEFAwMHBAMJBAJVBQgEBAcCAwUCAQL+gIASGRkSgBkSERmAEhkZEoAZERIZAAABAOIAjQMeAskAIAAAExcHBhQXFjI/ARcWMjc2NC8BNzY0JyYiDwEnJiIHBhQX4uLiDQ0MJAzi4gwkDA0N4uINDQwkDOLiDCQMDQ0CjeLiDSMMDQ3h4Q0NDCMN4uIMIw0MDOLiDAwNIwwAAAABAAAAAQAAa5n0y18PPPUACwQAAAAAANivOVsAAAAA2K85WwAAAAADqwNVAAAACAACAAAAAAAAAAEAAAPA/8AAAAQAAAAAAAOrAAEAAAAAAAAAAAAAAAAAAAALBAAAAAAAAAAAAAAAAgAAAAQAAWIEAAFiBAAA4gQAAOIEAABVBAAAVQQAAOIAAAAAAAoAFAAeAEQAagCqAOoBngJkApoAAQAAAAsAigADAAAAAAACAAAAAAAAAAAAAAAAAAAAAAAAAA4ArgABAAAAAAABAAcAAAABAAAAAAACAAcAYAABAAAAAAADAAcANgABAAAAAAAEAAcAdQABAAAAAAAFAAsAFQABAAAAAAAGAAcASwABAAAAAAAKABoAigADAAEECQABAA4ABwADAAEECQACAA4AZwADAAEECQADAA4APQADAAEECQAEAA4AfAADAAEECQAFABYAIAADAAEECQAGAA4AUgADAAEECQAKADQApGZjaWNvbnMAZgBjAGkAYwBvAG4Ac1ZlcnNpb24gMS4wAFYAZQByAHMAaQBvAG4AIAAxAC4AMGZjaWNvbnMAZgBjAGkAYwBvAG4Ac2ZjaWNvbnMAZgBjAGkAYwBvAG4Ac1JlZ3VsYXIAUgBlAGcAdQBsAGEAcmZjaWNvbnMAZgBjAGkAYwBvAG4Ac0ZvbnQgZ2VuZXJhdGVkIGJ5IEljb01vb24uAEYAbwBuAHQAIABnAGUAbgBlAHIAYQB0AGUAZAAgAGIAeQAgAEkAYwBvAE0AbwBvAG4ALgAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA=") format("truetype")}.fc-icon{speak:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;display:inline-block;font-family:fcicons!important;font-style:normal;font-variant:normal;font-weight:400;height:1em;line-height:1;text-align:center;text-transform:none;-webkit-user-select:none;-moz-user-select:none;user-select:none;width:1em}.fc-icon-chevron-left:before{content:"\\e900"}.fc-icon-chevron-right:before{content:"\\e901"}.fc-icon-chevrons-left:before{content:"\\e902"}.fc-icon-chevrons-right:before{content:"\\e903"}.fc-icon-minus-square:before{content:"\\e904"}.fc-icon-plus-square:before{content:"\\e905"}.fc-icon-x:before{content:"\\e906"}.fc .fc-button{border-radius:0;font-family:inherit;font-size:inherit;line-height:inherit;margin:0;overflow:visible;text-transform:none}.fc .fc-button:focus{outline:1px dotted;outline:5px auto -webkit-focus-ring-color}.fc .fc-button{-webkit-appearance:button}.fc .fc-button:not(:disabled){cursor:pointer}.fc .fc-button{background-color:transparent;border:1px solid transparent;border-radius:.25em;display:inline-block;font-size:1em;font-weight:400;line-height:1.5;padding:.4em .65em;text-align:center;-webkit-user-select:none;-moz-user-select:none;user-select:none;vertical-align:middle}.fc .fc-button:hover{text-decoration:none}.fc .fc-button:focus{box-shadow:0 0 0 .2rem rgba(44,62,80,.25);outline:0}.fc .fc-button:disabled{opacity:.65}.fc .fc-button-primary{background-color:var(--fc-button-bg-color);border-color:var(--fc-button-border-color);color:var(--fc-button-text-color)}.fc .fc-button-primary:hover{background-color:var(--fc-button-hover-bg-color);border-color:var(--fc-button-hover-border-color);color:var(--fc-button-text-color)}.fc .fc-button-primary:disabled{background-color:var(--fc-button-bg-color);border-color:var(--fc-button-border-color);color:var(--fc-button-text-color)}.fc .fc-button-primary:focus{box-shadow:0 0 0 .2rem rgba(76,91,106,.5)}.fc .fc-button-primary:not(:disabled).fc-button-active,.fc .fc-button-primary:not(:disabled):active{background-color:var(--fc-button-active-bg-color);border-color:var(--fc-button-active-border-color);color:var(--fc-button-text-color)}.fc .fc-button-primary:not(:disabled).fc-button-active:focus,.fc .fc-button-primary:not(:disabled):active:focus{box-shadow:0 0 0 .2rem rgba(76,91,106,.5)}.fc .fc-button .fc-icon{font-size:1.5em;vertical-align:middle}.fc .fc-button-group{display:inline-flex;position:relative;vertical-align:middle}.fc .fc-button-group>.fc-button{flex:1 1 auto;position:relative}.fc .fc-button-group>.fc-button.fc-button-active,.fc .fc-button-group>.fc-button:active,.fc .fc-button-group>.fc-button:focus,.fc .fc-button-group>.fc-button:hover{z-index:1}.fc-direction-ltr .fc-button-group>.fc-button:not(:first-child){border-bottom-left-radius:0;border-top-left-radius:0;margin-left:-1px}.fc-direction-ltr .fc-button-group>.fc-button:not(:last-child){border-bottom-right-radius:0;border-top-right-radius:0}.fc-direction-rtl .fc-button-group>.fc-button:not(:first-child){border-bottom-right-radius:0;border-top-right-radius:0;margin-right:-1px}.fc-direction-rtl .fc-button-group>.fc-button:not(:last-child){border-bottom-left-radius:0;border-top-left-radius:0}.fc .fc-toolbar{align-items:center;display:flex;justify-content:space-between}.fc .fc-toolbar.fc-header-toolbar{margin-bottom:1.5em}.fc .fc-toolbar.fc-footer-toolbar{margin-top:1.5em}.fc .fc-toolbar-title{font-size:1.75em;margin:0}.fc-direction-ltr .fc-toolbar>*>:not(:first-child){margin-left:.75em}.fc-direction-rtl .fc-toolbar>*>:not(:first-child){margin-right:.75em}.fc-direction-rtl .fc-toolbar-ltr{flex-direction:row-reverse}.fc .fc-scroller{-webkit-overflow-scrolling:touch;position:relative}.fc .fc-scroller-liquid{height:100%}.fc .fc-scroller-liquid-absolute{bottom:0;left:0;position:absolute;right:0;top:0}.fc .fc-scroller-harness{direction:ltr;overflow:hidden;position:relative}.fc .fc-scroller-harness-liquid{height:100%}.fc-direction-rtl .fc-scroller-harness>.fc-scroller{direction:rtl}.fc-theme-standard .fc-scrollgrid{border:1px solid var(--fc-border-color)}.fc .fc-scrollgrid,.fc .fc-scrollgrid table{table-layout:fixed;width:100%}.fc .fc-scrollgrid table{border-left-style:hidden;border-right-style:hidden;border-top-style:hidden}.fc .fc-scrollgrid{border-bottom-width:0;border-collapse:separate;border-right-width:0}.fc .fc-scrollgrid-liquid{height:100%}.fc .fc-scrollgrid-section,.fc .fc-scrollgrid-section table,.fc .fc-scrollgrid-section>td{height:1px}.fc .fc-scrollgrid-section-liquid>td{height:100%}.fc .fc-scrollgrid-section>*{border-left-width:0;border-top-width:0}.fc .fc-scrollgrid-section-footer>*,.fc .fc-scrollgrid-section-header>*{border-bottom-width:0}.fc .fc-scrollgrid-section-body table,.fc .fc-scrollgrid-section-footer table{border-bottom-style:hidden}.fc .fc-scrollgrid-section-sticky>*{background:var(--fc-page-bg-color);position:sticky;z-index:3}.fc .fc-scrollgrid-section-header.fc-scrollgrid-section-sticky>*{top:0}.fc .fc-scrollgrid-section-footer.fc-scrollgrid-section-sticky>*{bottom:0}.fc .fc-scrollgrid-sticky-shim{height:1px;margin-bottom:-1px}.fc-sticky{position:sticky}.fc .fc-view-harness{flex-grow:1;position:relative}.fc .fc-view-harness-active>.fc-view{bottom:0;left:0;position:absolute;right:0;top:0}.fc .fc-col-header-cell-cushion{display:inline-block;padding:2px 4px}.fc .fc-bg-event,.fc .fc-highlight,.fc .fc-non-business{bottom:0;left:0;position:absolute;right:0;top:0}.fc .fc-non-business{background:var(--fc-non-business-color)}.fc .fc-bg-event{background:var(--fc-bg-event-color);opacity:var(--fc-bg-event-opacity)}.fc .fc-bg-event .fc-event-title{font-size:var(--fc-small-font-size);font-style:italic;margin:.5em}.fc .fc-highlight{background:var(--fc-highlight-color)}.fc .fc-cell-shaded,.fc .fc-day-disabled{background:var(--fc-neutral-bg-color)}a.fc-event,a.fc-event:hover{text-decoration:none}.fc-event.fc-event-draggable,.fc-event[href]{cursor:pointer}.fc-event .fc-event-main{position:relative;z-index:2}.fc-event-dragging:not(.fc-event-selected){opacity:.75}.fc-event-dragging.fc-event-selected{box-shadow:0 2px 7px rgba(0,0,0,.3)}.fc-event .fc-event-resizer{display:none;position:absolute;z-index:4}.fc-event-selected .fc-event-resizer,.fc-event:hover .fc-event-resizer{display:block}.fc-event-selected .fc-event-resizer{background:var(--fc-page-bg-color);border-color:inherit;border-radius:calc(var(--fc-event-resizer-dot-total-width)/2);border-style:solid;border-width:var(--fc-event-resizer-dot-border-width);height:var(--fc-event-resizer-dot-total-width);width:var(--fc-event-resizer-dot-total-width)}.fc-event-selected .fc-event-resizer:before{bottom:-20px;content:"";left:-20px;position:absolute;right:-20px;top:-20px}.fc-event-selected,.fc-event:focus{box-shadow:0 2px 5px rgba(0,0,0,.2)}.fc-event-selected:before,.fc-event:focus:before{bottom:0;content:"";left:0;position:absolute;right:0;top:0;z-index:3}.fc-event-selected:after,.fc-event:focus:after{background:var(--fc-event-selected-overlay-color);bottom:-1px;content:"";left:-1px;position:absolute;right:-1px;top:-1px;z-index:1}.fc-h-event{background-color:var(--fc-event-bg-color);border:1px solid var(--fc-event-border-color);display:block}.fc-h-event .fc-event-main{color:var(--fc-event-text-color)}.fc-h-event .fc-event-main-frame{display:flex}.fc-h-event .fc-event-time{max-width:100%;overflow:hidden}.fc-h-event .fc-event-title-container{flex-grow:1;flex-shrink:1;min-width:0}.fc-h-event .fc-event-title{display:inline-block;left:0;max-width:100%;overflow:hidden;right:0;vertical-align:top}.fc-h-event.fc-event-selected:before{bottom:-10px;top:-10px}.fc-direction-ltr .fc-daygrid-block-event:not(.fc-event-start),.fc-direction-rtl .fc-daygrid-block-event:not(.fc-event-end){border-bottom-left-radius:0;border-left-width:0;border-top-left-radius:0}.fc-direction-ltr .fc-daygrid-block-event:not(.fc-event-end),.fc-direction-rtl .fc-daygrid-block-event:not(.fc-event-start){border-bottom-right-radius:0;border-right-width:0;border-top-right-radius:0}.fc-h-event:not(.fc-event-selected) .fc-event-resizer{bottom:0;top:0;width:var(--fc-event-resizer-thickness)}.fc-direction-ltr .fc-h-event:not(.fc-event-selected) .fc-event-resizer-start,.fc-direction-rtl .fc-h-event:not(.fc-event-selected) .fc-event-resizer-end{cursor:w-resize;left:calc(var(--fc-event-resizer-thickness)*-.5)}.fc-direction-ltr .fc-h-event:not(.fc-event-selected) .fc-event-resizer-end,.fc-direction-rtl .fc-h-event:not(.fc-event-selected) .fc-event-resizer-start{cursor:e-resize;right:calc(var(--fc-event-resizer-thickness)*-.5)}.fc-h-event.fc-event-selected .fc-event-resizer{margin-top:calc(var(--fc-event-resizer-dot-total-width)*-.5);top:50%}.fc-direction-ltr .fc-h-event.fc-event-selected .fc-event-resizer-start,.fc-direction-rtl .fc-h-event.fc-event-selected .fc-event-resizer-end{left:calc(var(--fc-event-resizer-dot-total-width)*-.5)}.fc-direction-ltr .fc-h-event.fc-event-selected .fc-event-resizer-end,.fc-direction-rtl .fc-h-event.fc-event-selected .fc-event-resizer-start{right:calc(var(--fc-event-resizer-dot-total-width)*-.5)}.fc .fc-popover{box-shadow:0 2px 6px rgba(0,0,0,.15);position:absolute;z-index:9999}.fc .fc-popover-header{align-items:center;display:flex;flex-direction:row;justify-content:space-between;padding:3px 4px}.fc .fc-popover-title{margin:0 2px}.fc .fc-popover-close{cursor:pointer;font-size:1.1em;opacity:.65}.fc-theme-standard .fc-popover{background:var(--fc-page-bg-color);border:1px solid var(--fc-border-color)}.fc-theme-standard .fc-popover-header{background:var(--fc-neutral-bg-color)}';Vk(TU);class Uk{constructor(e){this.drainedOption=e,this.isRunning=!1,this.isDirty=!1,this.pauseDepths={},this.timeoutId=0}request(e){this.isDirty=!0,this.isPaused()||(this.clearTimeout(),e==null?this.tryDrain():this.timeoutId=setTimeout(this.tryDrain.bind(this),e))}pause(e=""){let{pauseDepths:n}=this;n[e]=(n[e]||0)+1,this.clearTimeout()}resume(e="",n){let{pauseDepths:s}=this;e in s&&(n?delete s[e]:(s[e]-=1,s[e]<=0&&delete s[e]),this.tryDrain())}isPaused(){return Object.keys(this.pauseDepths).length}tryDrain(){if(!this.isRunning&&!this.isPaused()){for(this.isRunning=!0;this.isDirty;)this.isDirty=!1,this.drained();this.isRunning=!1}}clear(){this.clearTimeout(),this.isDirty=!1,this.pauseDepths={}}clearTimeout(){this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=0)}drained(){this.drainedOption&&this.drainedOption()}}function Wk(t){t.parentNode&&t.parentNode.removeChild(t)}function Ii(t,e){if(t.closest)return t.closest(e);if(!document.documentElement.contains(t))return null;do{if(AU(t,e))return t;t=t.parentElement||t.parentNode}while(t!==null&&t.nodeType===1);return null}function AU(t,e){return(t.matches||t.matchesSelector||t.msMatchesSelector).call(t,e)}function DU(t,e){let n=t instanceof HTMLElement?[t]:t,s=[];for(let a=0;a<n.length;a+=1){let l=n[a].querySelectorAll(e);for(let o=0;o<l.length;o+=1)s.push(l[o])}return s}const RU=/(top|left|right|bottom|width|height)$/i;function am(t,e){for(let n in e)cD(t,n,e[n])}function cD(t,e,n){n==null?t.style[e]="":typeof n=="number"&&RU.test(e)?t.style[e]=`${n}px`:t.style[e]=n}function dD(t){var e,n;return(n=(e=t.composedPath)===null||e===void 0?void 0:e.call(t)[0])!==null&&n!==void 0?n:t.target}let T1=0;function Vg(){return T1+=1,"fc-dom-"+T1}function Ug(t){t.preventDefault()}function PU(t,e){return n=>{let s=Ii(n.target,t);s&&e.call(s,n,s)}}function mD(t,e,n,s){let a=PU(n,s);return t.addEventListener(e,a),()=>{t.removeEventListener(e,a)}}function MU(t,e,n,s){let a;return mD(t,"mouseover",e,(l,o)=>{if(o!==a){a=o,n(l,o);let c=d=>{a=null,s(d,o),o.removeEventListener("mouseleave",c)};o.addEventListener("mouseleave",c)}})}const A1=["webkitTransitionEnd","otransitionend","oTransitionEnd","msTransitionEnd","transitionend"];function IU(t,e){let n=s=>{e(s),A1.forEach(a=>{t.removeEventListener(a,n)})};A1.forEach(s=>{t.addEventListener(s,n)})}function uD(t){return Object.assign({onClick:t},hD(t))}function hD(t){return{tabIndex:0,onKeyDown(e){(e.key==="Enter"||e.key===" ")&&(t(e),e.preventDefault())}}}let D1=0;function So(){return D1+=1,String(D1)}function Kk(){document.body.classList.add("fc-not-allowed")}function Gk(){document.body.classList.remove("fc-not-allowed")}function OU(t){t.style.userSelect="none",t.style.webkitUserSelect="none",t.addEventListener("selectstart",Ug)}function FU(t){t.style.userSelect="",t.style.webkitUserSelect="",t.removeEventListener("selectstart",Ug)}function LU(t){t.addEventListener("contextmenu",Ug)}function $U(t){t.removeEventListener("contextmenu",Ug)}function BU(t){let e=[],n=[],s,a;for(typeof t=="string"?n=t.split(/\s*,\s*/):typeof t=="function"?n=[t]:Array.isArray(t)&&(n=t),s=0;s<n.length;s+=1)a=n[s],typeof a=="string"?e.push(a.charAt(0)==="-"?{field:a.substring(1),order:-1}:{field:a,order:1}):typeof a=="function"&&e.push({func:a});return e}function qU(t,e,n){let s,a;for(s=0;s<n.length;s+=1)if(a=HU(t,e,n[s]),a)return a;return 0}function HU(t,e,n){return n.func?n.func(t,e):zU(t[n.field],e[n.field])*(n.order||1)}function zU(t,e){return!t&&!e?0:e==null?-1:t==null?1:typeof t=="string"||typeof e=="string"?String(t).localeCompare(String(e)):t-e}function yc(t,e){let n=String(t);return"000".substr(0,e-n.length)+n}function rm(t,e,n){return typeof t=="function"?t(...e):typeof t=="string"?e.reduce((s,a,l)=>s.replace("$"+l,a||""),t):n}function VU(t,e){return t-e}function Bh(t){return t%1===0}function UU(t){let e=t.querySelector(".fc-scrollgrid-shrink-frame"),n=t.querySelector(".fc-scrollgrid-shrink-cushion");if(!e)throw new Error("needs fc-scrollgrid-shrink-frame className");if(!n)throw new Error("needs fc-scrollgrid-shrink-cushion className");return t.getBoundingClientRect().width-e.getBoundingClientRect().width+n.getBoundingClientRect().width}const R1=["years","months","days","milliseconds"],WU=/^(-?)(?:(\d+)\.)?(\d+):(\d\d)(?::(\d\d)(?:\.(\d\d\d))?)?/;function Jt(t,e){return typeof t=="string"?KU(t):typeof t=="object"&&t?P1(t):typeof t=="number"?P1({[e||"milliseconds"]:t}):null}function KU(t){let e=WU.exec(t);if(e){let n=e[1]?-1:1;return{years:0,months:0,days:n*(e[2]?parseInt(e[2],10):0),milliseconds:n*((e[3]?parseInt(e[3],10):0)*60*60*1e3+(e[4]?parseInt(e[4],10):0)*60*1e3+(e[5]?parseInt(e[5],10):0)*1e3+(e[6]?parseInt(e[6],10):0))}}return null}function P1(t){let e={years:t.years||t.year||0,months:t.months||t.month||0,days:t.days||t.day||0,milliseconds:(t.hours||t.hour||0)*60*60*1e3+(t.minutes||t.minute||0)*60*1e3+(t.seconds||t.second||0)*1e3+(t.milliseconds||t.millisecond||t.ms||0)},n=t.weeks||t.week;return n&&(e.days+=n*7,e.specifiedWeeks=!0),e}function GU(t,e){return t.years===e.years&&t.months===e.months&&t.days===e.days&&t.milliseconds===e.milliseconds}function hy(t,e){return{years:t.years+e.years,months:t.months+e.months,days:t.days+e.days,milliseconds:t.milliseconds+e.milliseconds}}function YU(t,e){return{years:t.years-e.years,months:t.months-e.months,days:t.days-e.days,milliseconds:t.milliseconds-e.milliseconds}}function QU(t,e){return{years:t.years*e,months:t.months*e,days:t.days*e,milliseconds:t.milliseconds*e}}function ZU(t){return bc(t)/365}function XU(t){return bc(t)/30}function bc(t){return ma(t)/864e5}function ma(t){return t.years*(365*864e5)+t.months*(30*864e5)+t.days*864e5+t.milliseconds}function Yk(t,e){let n=null;for(let s=0;s<R1.length;s+=1){let a=R1[s];if(e[a]){let l=t[a]/e[a];if(!Bh(l)||n!==null&&n!==l)return null;n=l}else if(t[a])return null}return n}function py(t){let e=t.milliseconds;if(e){if(e%1e3!==0)return{unit:"millisecond",value:e};if(e%(1e3*60)!==0)return{unit:"second",value:e/1e3};if(e%(1e3*60*60)!==0)return{unit:"minute",value:e/(1e3*60)};if(e)return{unit:"hour",value:e/(1e3*60*60)}}return t.days?t.specifiedWeeks&&t.days%7===0?{unit:"week",value:t.days/7}:{unit:"day",value:t.days}:t.months?{unit:"month",value:t.months}:t.years?{unit:"year",value:t.years}:{unit:"millisecond",value:0}}function vl(t,e,n){if(t===e)return!0;let s=t.length,a;if(s!==e.length)return!1;for(a=0;a<s;a+=1)if(!(n?n(t[a],e[a]):t[a]===e[a]))return!1;return!0}const JU=["sun","mon","tue","wed","thu","fri","sat"];function M1(t,e){let n=il(t);return n[2]+=e*7,rs(n)}function vi(t,e){let n=il(t);return n[2]+=e,rs(n)}function xl(t,e){let n=il(t);return n[6]+=e,rs(n)}function eW(t,e){return Eo(t,e)/7}function Eo(t,e){return(e.valueOf()-t.valueOf())/(1e3*60*60*24)}function tW(t,e){return(e.valueOf()-t.valueOf())/(1e3*60*60)}function nW(t,e){return(e.valueOf()-t.valueOf())/(1e3*60)}function iW(t,e){return(e.valueOf()-t.valueOf())/1e3}function sW(t,e){let n=On(t),s=On(e);return{years:0,months:0,days:Math.round(Eo(n,s)),milliseconds:e.valueOf()-s.valueOf()-(t.valueOf()-n.valueOf())}}function aW(t,e){let n=$p(t,e);return n!==null&&n%7===0?n/7:null}function $p(t,e){return sl(t)===sl(e)?Math.round(Eo(t,e)):null}function On(t){return rs([t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()])}function rW(t){return rs([t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours()])}function lW(t){return rs([t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes()])}function oW(t){return rs([t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds()])}function cW(t,e,n){let s=t.getUTCFullYear(),a=Ov(t,s,e,n);if(a<1)return Ov(t,s-1,e,n);let l=Ov(t,s+1,e,n);return l>=1?Math.min(a,l):a}function Ov(t,e,n,s){let a=rs([e,0,1+dW(e,n,s)]),l=On(t),o=Math.round(Eo(a,l));return Math.floor(o/7)+1}function dW(t,e,n){let s=7+e-n;return-((7+rs([t,0,s]).getUTCDay()-e)%7)+s-1}function I1(t){return[t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()]}function O1(t){return new Date(t[0],t[1]||0,t[2]==null?1:t[2],t[3]||0,t[4]||0,t[5]||0)}function il(t){return[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds(),t.getUTCMilliseconds()]}function rs(t){return t.length===1&&(t=t.concat([0])),new Date(Date.UTC(...t))}function pD(t){return!isNaN(t.valueOf())}function sl(t){return t.getUTCHours()*1e3*60*60+t.getUTCMinutes()*1e3*60+t.getUTCSeconds()*1e3+t.getUTCMilliseconds()}function gD(t,e,n=!1){let s=t.toISOString();return s=s.replace(".000",""),n&&(s=s.replace("T00:00:00Z","")),s.length>10&&(e==null?s=s.replace("Z",""):e!==0&&(s=s.replace("Z",Zk(e,!0)))),s}function Qk(t){return t.toISOString().replace(/T.*$/,"")}function mW(t){return t.toISOString().match(/^\d{4}-\d{2}/)[0]}function uW(t){return yc(t.getUTCHours(),2)+":"+yc(t.getUTCMinutes(),2)+":"+yc(t.getUTCSeconds(),2)}function Zk(t,e=!1){let n=t<0?"-":"+",s=Math.abs(t),a=Math.floor(s/60),l=Math.round(s%60);return e?`${n+yc(a,2)}:${yc(l,2)}`:`GMT${n}${a}${l?`:${yc(l,2)}`:""}`}function qt(t,e,n){let s,a;return function(...l){if(!s)a=t.apply(this,l);else if(!vl(s,l)){let o=t.apply(this,l);(!e||!e(o,a))&&(a=o)}return s=l,a}}function qh(t,e,n){let s,a;return l=>(s?ga(s,l)||(a=t.call(this,l)):a=t.call(this,l),s=l,a)}const Fv={week:3,separator:9,omitZeroMinute:9,meridiem:9,omitCommas:9},Bp={timeZoneName:7,era:6,year:5,month:4,day:2,weekday:2,hour:1,minute:1,second:1},ch=/\s*([ap])\.?m\.?/i,hW=/,/g,pW=/\s+/g,gW=/\u200e/g,fW=/UTC|GMT/;class vW{constructor(e){let n={},s={},a=9;for(let l in e)l in Fv?(s[l]=e[l],Fv[l]<9&&(a=Math.min(Fv[l],a))):(n[l]=e[l],l in Bp&&(a=Math.min(Bp[l],a)));this.standardDateProps=n,this.extendedSettings=s,this.smallestUnitNum=a,this.buildFormattingFunc=qt(F1)}format(e,n){return this.buildFormattingFunc(this.standardDateProps,this.extendedSettings,n)(e)}formatRange(e,n,s,a){let{standardDateProps:l,extendedSettings:o}=this,c=jW(e.marker,n.marker,s.calendarSystem);if(!c)return this.format(e,s);let d=c;d>1&&(l.year==="numeric"||l.year==="2-digit")&&(l.month==="numeric"||l.month==="2-digit")&&(l.day==="numeric"||l.day==="2-digit")&&(d=1);let m=this.format(e,s),u=this.format(n,s);if(m===u)return m;let h=NW(l,d),p=F1(h,o,s),g=p(e),v=p(n),x=CW(m,g,u,v),y=o.separator||a||s.defaultSeparator||"";return x?x.before+g+y+v+x.after:m+y+u}getSmallestUnit(){switch(this.smallestUnitNum){case 7:case 6:case 5:return"year";case 4:return"month";case 3:return"week";case 2:return"day";default:return"time"}}}function F1(t,e,n){let s=Object.keys(t).length;return s===1&&t.timeZoneName==="short"?a=>Zk(a.timeZoneOffset):s===0&&e.week?a=>wW(n.computeWeekNumber(a.marker),n.weekText,n.weekTextLong,n.locale,e.week):xW(t,e,n)}function xW(t,e,n){t=Object.assign({},t),e=Object.assign({},e),yW(t,e),t.timeZone="UTC";let s=new Intl.DateTimeFormat(n.locale.codes,t),a;if(e.omitZeroMinute){let l=Object.assign({},t);delete l.minute,a=new Intl.DateTimeFormat(n.locale.codes,l)}return l=>{let{marker:o}=l,c;a&&!o.getUTCMinutes()?c=a:c=s;let d=c.format(o);return bW(d,l,t,e,n)}}function yW(t,e){t.timeZoneName&&(t.hour||(t.hour="2-digit"),t.minute||(t.minute="2-digit")),t.timeZoneName==="long"&&(t.timeZoneName="short"),e.omitZeroMinute&&(t.second||t.millisecond)&&delete e.omitZeroMinute}function bW(t,e,n,s,a){return t=t.replace(gW,""),n.timeZoneName==="short"&&(t=kW(t,a.timeZone==="UTC"||e.timeZoneOffset==null?"UTC":Zk(e.timeZoneOffset))),s.omitCommas&&(t=t.replace(hW,"").trim()),s.omitZeroMinute&&(t=t.replace(":00","")),s.meridiem===!1?t=t.replace(ch,"").trim():s.meridiem==="narrow"?t=t.replace(ch,(l,o)=>o.toLocaleLowerCase()):s.meridiem==="short"?t=t.replace(ch,(l,o)=>`${o.toLocaleLowerCase()}m`):s.meridiem==="lowercase"&&(t=t.replace(ch,l=>l.toLocaleLowerCase())),t=t.replace(pW," "),t=t.trim(),t}function kW(t,e){let n=!1;return t=t.replace(fW,()=>(n=!0,e)),n||(t+=` ${e}`),t}function wW(t,e,n,s,a){let l=[];return a==="long"?l.push(n):(a==="short"||a==="narrow")&&l.push(e),(a==="long"||a==="short")&&l.push(" "),l.push(s.simpleNumberFormat.format(t)),s.options.direction==="rtl"&&l.reverse(),l.join("")}function jW(t,e,n){return n.getMarkerYear(t)!==n.getMarkerYear(e)?5:n.getMarkerMonth(t)!==n.getMarkerMonth(e)?4:n.getMarkerDay(t)!==n.getMarkerDay(e)?2:sl(t)!==sl(e)?1:0}function NW(t,e){let n={};for(let s in t)(!(s in Bp)||Bp[s]<=e)&&(n[s]=t[s]);return n}function CW(t,e,n,s){let a=0;for(;a<t.length;){let l=t.indexOf(e,a);if(l===-1)break;let o=t.substr(0,l);a=l+e.length;let c=t.substr(a),d=0;for(;d<n.length;){let m=n.indexOf(s,d);if(m===-1)break;let u=n.substr(0,m);d=m+s.length;let h=n.substr(d);if(o===u&&c===h)return{before:o,after:c}}}return null}function L1(t,e){let n=e.markerToArray(t.marker);return{marker:t.marker,timeZoneOffset:t.timeZoneOffset,array:n,year:n[0],month:n[1],day:n[2],hour:n[3],minute:n[4],second:n[5],millisecond:n[6]}}function qp(t,e,n,s){let a=L1(t,n.calendarSystem),l=e?L1(e,n.calendarSystem):null;return{date:a,start:a,end:l,timeZone:n.timeZone,localeCodes:n.locale.codes,defaultSeparator:s||n.defaultSeparator}}class _W{constructor(e){this.cmdStr=e}format(e,n,s){return n.cmdFormatter(this.cmdStr,qp(e,null,n,s))}formatRange(e,n,s,a){return s.cmdFormatter(this.cmdStr,qp(e,n,s,a))}}class SW{constructor(e){this.func=e}format(e,n,s){return this.func(qp(e,null,n,s))}formatRange(e,n,s,a){return this.func(qp(e,n,s,a))}}function Vn(t){return typeof t=="object"&&t?new vW(t):typeof t=="string"?new _W(t):typeof t=="function"?new SW(t):null}const $1={navLinkDayClick:Me,navLinkWeekClick:Me,duration:Jt,bootstrapFontAwesome:Me,buttonIcons:Me,customButtons:Me,defaultAllDayEventDuration:Jt,defaultTimedEventDuration:Jt,nextDayThreshold:Jt,scrollTime:Jt,scrollTimeReset:Boolean,slotMinTime:Jt,slotMaxTime:Jt,dayPopoverFormat:Vn,slotDuration:Jt,snapDuration:Jt,headerToolbar:Me,footerToolbar:Me,defaultRangeSeparator:String,titleRangeSeparator:String,forceEventDuration:Boolean,dayHeaders:Boolean,dayHeaderFormat:Vn,dayHeaderClassNames:Me,dayHeaderContent:Me,dayHeaderDidMount:Me,dayHeaderWillUnmount:Me,dayCellClassNames:Me,dayCellContent:Me,dayCellDidMount:Me,dayCellWillUnmount:Me,initialView:String,aspectRatio:Number,weekends:Boolean,weekNumberCalculation:Me,weekNumbers:Boolean,weekNumberClassNames:Me,weekNumberContent:Me,weekNumberDidMount:Me,weekNumberWillUnmount:Me,editable:Boolean,viewClassNames:Me,viewDidMount:Me,viewWillUnmount:Me,nowIndicator:Boolean,nowIndicatorSnap:Me,nowIndicatorClassNames:Me,nowIndicatorContent:Me,nowIndicatorDidMount:Me,nowIndicatorWillUnmount:Me,showNonCurrentDates:Boolean,lazyFetching:Boolean,startParam:String,endParam:String,timeZoneParam:String,timeZone:String,locales:Me,locale:Me,themeSystem:String,dragRevertDuration:Number,dragScroll:Boolean,allDayMaintainDuration:Boolean,unselectAuto:Boolean,dropAccept:Me,eventOrder:BU,eventOrderStrict:Boolean,handleWindowResize:Boolean,windowResizeDelay:Number,longPressDelay:Number,eventDragMinDistance:Number,expandRows:Boolean,height:Me,contentHeight:Me,direction:String,weekNumberFormat:Vn,eventResizableFromStart:Boolean,displayEventTime:Boolean,displayEventEnd:Boolean,weekText:String,weekTextLong:String,progressiveEventRendering:Boolean,businessHours:Me,initialDate:Me,now:Me,eventDataTransform:Me,stickyHeaderDates:Me,stickyFooterScrollbar:Me,viewHeight:Me,defaultAllDay:Boolean,eventSourceFailure:Me,eventSourceSuccess:Me,eventDisplay:String,eventStartEditable:Boolean,eventDurationEditable:Boolean,eventOverlap:Me,eventConstraint:Me,eventAllow:Me,eventBackgroundColor:String,eventBorderColor:String,eventTextColor:String,eventColor:String,eventClassNames:Me,eventContent:Me,eventDidMount:Me,eventWillUnmount:Me,selectConstraint:Me,selectOverlap:Me,selectAllow:Me,droppable:Boolean,unselectCancel:String,slotLabelFormat:Me,slotLaneClassNames:Me,slotLaneContent:Me,slotLaneDidMount:Me,slotLaneWillUnmount:Me,slotLabelClassNames:Me,slotLabelContent:Me,slotLabelDidMount:Me,slotLabelWillUnmount:Me,dayMaxEvents:Me,dayMaxEventRows:Me,dayMinWidth:Number,slotLabelInterval:Jt,allDayText:String,allDayClassNames:Me,allDayContent:Me,allDayDidMount:Me,allDayWillUnmount:Me,slotMinWidth:Number,navLinks:Boolean,eventTimeFormat:Vn,rerenderDelay:Number,moreLinkText:Me,moreLinkHint:Me,selectMinDistance:Number,selectable:Boolean,selectLongPressDelay:Number,eventLongPressDelay:Number,selectMirror:Boolean,eventMaxStack:Number,eventMinHeight:Number,eventMinWidth:Number,eventShortHeight:Number,slotEventOverlap:Boolean,plugins:Me,firstDay:Number,dayCount:Number,dateAlignment:String,dateIncrement:Jt,hiddenDays:Me,fixedWeekCount:Boolean,validRange:Me,visibleRange:Me,titleFormat:Me,eventInteractive:Boolean,noEventsText:String,viewHint:Me,navLinkHint:Me,closeHint:String,timeHint:String,eventHint:String,moreLinkClick:Me,moreLinkClassNames:Me,moreLinkContent:Me,moreLinkDidMount:Me,moreLinkWillUnmount:Me,monthStartFormat:Vn,handleCustomRendering:Me,customRenderingMetaMap:Me,customRenderingReplaces:Boolean},lm={eventDisplay:"auto",defaultRangeSeparator:" - ",titleRangeSeparator:"  ",defaultTimedEventDuration:"01:00:00",defaultAllDayEventDuration:{day:1},forceEventDuration:!1,nextDayThreshold:"00:00:00",dayHeaders:!0,initialView:"",aspectRatio:1.35,headerToolbar:{start:"title",center:"",end:"today prev,next"},weekends:!0,weekNumbers:!1,weekNumberCalculation:"local",editable:!1,nowIndicator:!1,scrollTime:"06:00:00",scrollTimeReset:!0,slotMinTime:"00:00:00",slotMaxTime:"24:00:00",showNonCurrentDates:!0,lazyFetching:!0,startParam:"start",endParam:"end",timeZoneParam:"timeZone",timeZone:"local",locales:[],locale:"",themeSystem:"standard",dragRevertDuration:500,dragScroll:!0,allDayMaintainDuration:!1,unselectAuto:!0,dropAccept:"*",eventOrder:"start,-duration,allDay,title",dayPopoverFormat:{month:"long",day:"numeric",year:"numeric"},handleWindowResize:!0,windowResizeDelay:100,longPressDelay:1e3,eventDragMinDistance:5,expandRows:!1,navLinks:!1,selectable:!1,eventMinHeight:15,eventMinWidth:30,eventShortHeight:30,monthStartFormat:{month:"long",day:"numeric"},nowIndicatorSnap:"auto"},B1={datesSet:Me,eventsSet:Me,eventAdd:Me,eventChange:Me,eventRemove:Me,windowResize:Me,eventClick:Me,eventMouseEnter:Me,eventMouseLeave:Me,select:Me,unselect:Me,loading:Me,_unmount:Me,_beforeprint:Me,_afterprint:Me,_noEventDrop:Me,_noEventResize:Me,_resize:Me,_scrollRequest:Me},q1={buttonText:Me,buttonHints:Me,views:Me,plugins:Me,initialEvents:Me,events:Me,eventSources:Me},$l={headerToolbar:Bl,footerToolbar:Bl,buttonText:Bl,buttonHints:Bl,buttonIcons:Bl,dateIncrement:Bl,plugins:dh,events:dh,eventSources:dh,resources:dh};function Bl(t,e){return typeof t=="object"&&typeof e=="object"&&t&&e?ga(t,e):t===e}function dh(t,e){return Array.isArray(t)&&Array.isArray(e)?vl(t,e):t===e}const EW={type:String,component:Me,buttonText:String,buttonTextKey:String,dateProfileGeneratorClass:Me,usesMinMaxTime:Boolean,classNames:Me,content:Me,didMount:Me,willUnmount:Me};function Lv(t){return Jk(t,$l)}function Xk(t,e){let n={},s={};for(let a in e)a in t&&(n[a]=e[a](t[a]));for(let a in t)a in e||(s[a]=t[a]);return{refined:n,extra:s}}function Me(t){return t}const{hasOwnProperty:Hp}=Object.prototype;function Jk(t,e){let n={};if(e){for(let s in e)if(e[s]===Bl){let a=[];for(let l=t.length-1;l>=0;l-=1){let o=t[l][s];if(typeof o=="object"&&o)a.unshift(o);else if(o!==void 0){n[s]=o;break}}a.length&&(n[s]=Jk(a))}}for(let s=t.length-1;s>=0;s-=1){let a=t[s];for(let l in a)l in n||(n[l]=a[l])}return n}function oo(t,e){let n={};for(let s in t)e(t[s],s)&&(n[s]=t[s]);return n}function Tr(t,e){let n={};for(let s in t)n[s]=e(t[s],s);return n}function fD(t){let e={};for(let n of t)e[n]=!0;return e}function ew(t){let e=[];for(let n in t)e.push(t[n]);return e}function ga(t,e){if(t===e)return!0;for(let n in t)if(Hp.call(t,n)&&!(n in e))return!1;for(let n in e)if(Hp.call(e,n)&&t[n]!==e[n])return!1;return!0}const TW=/^on[A-Z]/;function AW(t,e){const n=DW(t,e);for(let s of n)if(!TW.test(s))return!1;return!0}function DW(t,e){let n=[];for(let s in t)Hp.call(t,s)&&(s in e||n.push(s));for(let s in e)Hp.call(e,s)&&t[s]!==e[s]&&n.push(s);return n}function $v(t,e,n={}){if(t===e)return!0;for(let s in e)if(!(s in t&&RW(t[s],e[s],n[s])))return!1;for(let s in t)if(!(s in e))return!1;return!0}function RW(t,e,n){return t===e||n===!0?!0:n?n(t,e):!1}function PW(t,e=0,n,s=1){let a=[];n==null&&(n=Object.keys(t).length);for(let l=e;l<n;l+=s){let o=t[l];o!==void 0&&a.push(o)}return a}let vD={};function MW(t,e){vD[t]=e}function IW(t){return new vD[t]}class OW{getMarkerYear(e){return e.getUTCFullYear()}getMarkerMonth(e){return e.getUTCMonth()}getMarkerDay(e){return e.getUTCDate()}arrayToMarker(e){return rs(e)}markerToArray(e){return il(e)}}MW("gregory",OW);const FW=/^\s*(\d{4})(-?(\d{2})(-?(\d{2})([T ](\d{2}):?(\d{2})(:?(\d{2})(\.(\d+))?)?(Z|(([-+])(\d{2})(:?(\d{2}))?))?)?)?)?$/;function LW(t){let e=FW.exec(t);if(e){let n=new Date(Date.UTC(Number(e[1]),e[3]?Number(e[3])-1:0,Number(e[5]||1),Number(e[7]||0),Number(e[8]||0),Number(e[10]||0),e[12]?+`0.${e[12]}`*1e3:0));if(pD(n)){let s=null;return e[13]&&(s=(e[15]==="-"?-1:1)*(Number(e[16]||0)*60+Number(e[18]||0))),{marker:n,isTimeUnspecified:!e[6],timeZoneOffset:s}}}return null}class $W{constructor(e){let n=this.timeZone=e.timeZone,s=n!=="local"&&n!=="UTC";e.namedTimeZoneImpl&&s&&(this.namedTimeZoneImpl=new e.namedTimeZoneImpl(n)),this.canComputeOffset=!!(!s||this.namedTimeZoneImpl),this.calendarSystem=IW(e.calendarSystem),this.locale=e.locale,this.weekDow=e.locale.week.dow,this.weekDoy=e.locale.week.doy,e.weekNumberCalculation==="ISO"&&(this.weekDow=1,this.weekDoy=4),typeof e.firstDay=="number"&&(this.weekDow=e.firstDay),typeof e.weekNumberCalculation=="function"&&(this.weekNumberFunc=e.weekNumberCalculation),this.weekText=e.weekText!=null?e.weekText:e.locale.options.weekText,this.weekTextLong=(e.weekTextLong!=null?e.weekTextLong:e.locale.options.weekTextLong)||this.weekText,this.cmdFormatter=e.cmdFormatter,this.defaultSeparator=e.defaultSeparator}createMarker(e){let n=this.createMarkerMeta(e);return n===null?null:n.marker}createNowMarker(){return this.canComputeOffset?this.timestampToMarker(new Date().valueOf()):rs(I1(new Date))}createMarkerMeta(e){if(typeof e=="string")return this.parse(e);let n=null;return typeof e=="number"?n=this.timestampToMarker(e):e instanceof Date?(e=e.valueOf(),isNaN(e)||(n=this.timestampToMarker(e))):Array.isArray(e)&&(n=rs(e)),n===null||!pD(n)?null:{marker:n,isTimeUnspecified:!1,forcedTzo:null}}parse(e){let n=LW(e);if(n===null)return null;let{marker:s}=n,a=null;return n.timeZoneOffset!==null&&(this.canComputeOffset?s=this.timestampToMarker(s.valueOf()-n.timeZoneOffset*60*1e3):a=n.timeZoneOffset),{marker:s,isTimeUnspecified:n.isTimeUnspecified,forcedTzo:a}}getYear(e){return this.calendarSystem.getMarkerYear(e)}getMonth(e){return this.calendarSystem.getMarkerMonth(e)}getDay(e){return this.calendarSystem.getMarkerDay(e)}add(e,n){let s=this.calendarSystem.markerToArray(e);return s[0]+=n.years,s[1]+=n.months,s[2]+=n.days,s[6]+=n.milliseconds,this.calendarSystem.arrayToMarker(s)}subtract(e,n){let s=this.calendarSystem.markerToArray(e);return s[0]-=n.years,s[1]-=n.months,s[2]-=n.days,s[6]-=n.milliseconds,this.calendarSystem.arrayToMarker(s)}addYears(e,n){let s=this.calendarSystem.markerToArray(e);return s[0]+=n,this.calendarSystem.arrayToMarker(s)}addMonths(e,n){let s=this.calendarSystem.markerToArray(e);return s[1]+=n,this.calendarSystem.arrayToMarker(s)}diffWholeYears(e,n){let{calendarSystem:s}=this;return sl(e)===sl(n)&&s.getMarkerDay(e)===s.getMarkerDay(n)&&s.getMarkerMonth(e)===s.getMarkerMonth(n)?s.getMarkerYear(n)-s.getMarkerYear(e):null}diffWholeMonths(e,n){let{calendarSystem:s}=this;return sl(e)===sl(n)&&s.getMarkerDay(e)===s.getMarkerDay(n)?s.getMarkerMonth(n)-s.getMarkerMonth(e)+(s.getMarkerYear(n)-s.getMarkerYear(e))*12:null}greatestWholeUnit(e,n){let s=this.diffWholeYears(e,n);return s!==null?{unit:"year",value:s}:(s=this.diffWholeMonths(e,n),s!==null?{unit:"month",value:s}:(s=aW(e,n),s!==null?{unit:"week",value:s}:(s=$p(e,n),s!==null?{unit:"day",value:s}:(s=tW(e,n),Bh(s)?{unit:"hour",value:s}:(s=nW(e,n),Bh(s)?{unit:"minute",value:s}:(s=iW(e,n),Bh(s)?{unit:"second",value:s}:{unit:"millisecond",value:n.valueOf()-e.valueOf()}))))))}countDurationsBetween(e,n,s){let a;return s.years&&(a=this.diffWholeYears(e,n),a!==null)?a/ZU(s):s.months&&(a=this.diffWholeMonths(e,n),a!==null)?a/XU(s):s.days&&(a=$p(e,n),a!==null)?a/bc(s):(n.valueOf()-e.valueOf())/ma(s)}startOf(e,n){return n==="year"?this.startOfYear(e):n==="month"?this.startOfMonth(e):n==="week"?this.startOfWeek(e):n==="day"?On(e):n==="hour"?rW(e):n==="minute"?lW(e):n==="second"?oW(e):null}startOfYear(e){return this.calendarSystem.arrayToMarker([this.calendarSystem.getMarkerYear(e)])}startOfMonth(e){return this.calendarSystem.arrayToMarker([this.calendarSystem.getMarkerYear(e),this.calendarSystem.getMarkerMonth(e)])}startOfWeek(e){return this.calendarSystem.arrayToMarker([this.calendarSystem.getMarkerYear(e),this.calendarSystem.getMarkerMonth(e),e.getUTCDate()-(e.getUTCDay()-this.weekDow+7)%7])}computeWeekNumber(e){return this.weekNumberFunc?this.weekNumberFunc(this.toDate(e)):cW(e,this.weekDow,this.weekDoy)}format(e,n,s={}){return n.format({marker:e,timeZoneOffset:s.forcedTzo!=null?s.forcedTzo:this.offsetForMarker(e)},this)}formatRange(e,n,s,a={}){return a.isEndExclusive&&(n=xl(n,-1)),s.formatRange({marker:e,timeZoneOffset:a.forcedStartTzo!=null?a.forcedStartTzo:this.offsetForMarker(e)},{marker:n,timeZoneOffset:a.forcedEndTzo!=null?a.forcedEndTzo:this.offsetForMarker(n)},this,a.defaultSeparator)}formatIso(e,n={}){let s=null;return n.omitTimeZoneOffset||(n.forcedTzo!=null?s=n.forcedTzo:s=this.offsetForMarker(e)),gD(e,s,n.omitTime)}timestampToMarker(e){return this.timeZone==="local"?rs(I1(new Date(e))):this.timeZone==="UTC"||!this.namedTimeZoneImpl?new Date(e):rs(this.namedTimeZoneImpl.timestampToArray(e))}offsetForMarker(e){return this.timeZone==="local"?-O1(il(e)).getTimezoneOffset():this.timeZone==="UTC"?0:this.namedTimeZoneImpl?this.namedTimeZoneImpl.offsetForArray(il(e)):null}toDate(e,n){return this.timeZone==="local"?O1(il(e)):this.timeZone==="UTC"?new Date(e.valueOf()):this.namedTimeZoneImpl?new Date(e.valueOf()-this.namedTimeZoneImpl.offsetForArray(il(e))*1e3*60):new Date(e.valueOf()-(n||0))}}let su=class{constructor(e){this.iconOverrideOption&&this.setIconOverride(e[this.iconOverrideOption])}setIconOverride(e){let n,s;if(typeof e=="object"&&e){n=Object.assign({},this.iconClasses);for(s in e)n[s]=this.applyIconOverridePrefix(e[s]);this.iconClasses=n}else e===!1&&(this.iconClasses={})}applyIconOverridePrefix(e){let n=this.iconOverridePrefix;return n&&e.indexOf(n)!==0&&(e=n+e),e}getClass(e){return this.classes[e]||""}getIconClass(e,n){let s;return n&&this.rtlIconClasses?s=this.rtlIconClasses[e]||this.iconClasses[e]:s=this.iconClasses[e],s?`${this.baseIconClass} ${s}`:""}getCustomButtonIconClass(e){let n;return this.iconOverrideCustomButtonOption&&(n=e[this.iconOverrideCustomButtonOption],n)?`${this.baseIconClass} ${this.applyIconOverridePrefix(n)}`:""}};su.prototype.classes={};su.prototype.iconClasses={};su.prototype.baseIconClass="";su.prototype.iconOverridePrefix="";function zp(t){t();let e=$t.debounceRendering,n=[];function s(a){n.push(a)}for($t.debounceRendering=s,Sm(we(BW,{}),document.createElement("div"));n.length;)n.shift()();$t.debounceRendering=e}class BW extends _s{render(){return we("div",{})}componentDidMount(){this.setState({})}}function xD(t){let e=dU(t),n=e.Provider;return e.Provider=function(){let s=!this.getChildContext,a=n.apply(this,arguments);if(s){let l=[];this.shouldComponentUpdate=o=>{this.props.value!==o.value&&l.forEach(c=>{c.context=o.value,c.forceUpdate()})},this.sub=o=>{l.push(o);let c=o.componentWillUnmount;o.componentWillUnmount=()=>{l.splice(l.indexOf(o),1),c&&c.call(o)}}}return a},e}class qW{constructor(e,n,s,a){this.execFunc=e,this.emitter=n,this.scrollTime=s,this.scrollTimeReset=a,this.handleScrollRequest=l=>{this.queuedRequest=Object.assign({},this.queuedRequest||{},l),this.drain()},n.on("_scrollRequest",this.handleScrollRequest),this.fireInitialScroll()}detach(){this.emitter.off("_scrollRequest",this.handleScrollRequest)}update(e){e&&this.scrollTimeReset?this.fireInitialScroll():this.drain()}fireInitialScroll(){this.handleScrollRequest({time:this.scrollTime})}drain(){this.queuedRequest&&this.execFunc(this.queuedRequest)&&(this.queuedRequest=null)}}const Or=xD({});function HW(t,e,n,s,a,l,o,c,d,m,u,h,p,g){return{dateEnv:a,nowManager:l,options:n,pluginHooks:c,emitter:u,dispatch:d,getCurrentData:m,calendarApi:h,viewSpec:t,viewApi:e,dateProfileGenerator:s,theme:o,isRtl:n.direction==="rtl",addResizeHandler(v){u.on("_resize",v)},removeResizeHandler(v){u.off("_resize",v)},createScrollResponder(v){return new qW(v,u,Jt(n.scrollTime),n.scrollTimeReset)},registerInteractiveComponent:p,unregisterInteractiveComponent:g}}class To extends _s{shouldComponentUpdate(e,n){return!$v(this.props,e,this.propEquality)||!$v(this.state,n,this.stateEquality)}safeSetState(e){$v(this.state,Object.assign(Object.assign({},this.state),e),this.stateEquality)||this.setState(e)}}To.addPropsEquality=zW;To.addStateEquality=VW;To.contextType=Or;To.prototype.propEquality={};To.prototype.stateEquality={};class jn extends To{}jn.contextType=Or;function zW(t){let e=Object.create(this.prototype.propEquality);Object.assign(e,t),this.prototype.propEquality=e}function VW(t){let e=Object.create(this.prototype.stateEquality);Object.assign(e,t),this.prototype.stateEquality=e}function Va(t,e){typeof t=="function"?t(e):t&&(t.current=e)}class tw extends jn{constructor(){super(...arguments),this.id=So(),this.queuedDomNodes=[],this.currentDomNodes=[],this.handleEl=e=>{const{options:n}=this.context,{generatorName:s}=this.props;(!n.customRenderingReplaces||!gy(s,n))&&this.updateElRef(e)},this.updateElRef=e=>{this.props.elRef&&Va(this.props.elRef,e)}}render(){const{props:e,context:n}=this,{options:s}=n,{customGenerator:a,defaultGenerator:l,renderProps:o}=e,c=yD(e,[],this.handleEl);let d=!1,m,u=[],h;if(a!=null){const p=typeof a=="function"?a(o,we):a;if(p===!0)d=!0;else{const g=p&&typeof p=="object";g&&"html"in p?c.dangerouslySetInnerHTML={__html:p.html}:g&&"domNodes"in p?u=Array.prototype.slice.call(p.domNodes):(g?zA(p):typeof p!="function")?m=p:h=p}}else d=!gy(e.generatorName,s);return d&&l&&(m=l(o)),this.queuedDomNodes=u,this.currentGeneratorMeta=h,we(e.elTag,c,m)}componentDidMount(){this.applyQueueudDomNodes(),this.triggerCustomRendering(!0)}componentDidUpdate(){this.applyQueueudDomNodes(),this.triggerCustomRendering(!0)}componentWillUnmount(){this.triggerCustomRendering(!1)}triggerCustomRendering(e){var n;const{props:s,context:a}=this,{handleCustomRendering:l,customRenderingMetaMap:o}=a.options;if(l){const c=(n=this.currentGeneratorMeta)!==null&&n!==void 0?n:o?.[s.generatorName];c&&l(Object.assign(Object.assign({id:this.id,isActive:e,containerEl:this.base,reportNewContainerEl:this.updateElRef,generatorMeta:c},s),{elClasses:(s.elClasses||[]).filter(UW)}))}}applyQueueudDomNodes(){const{queuedDomNodes:e,currentDomNodes:n}=this,s=this.base;if(!vl(e,n)){n.forEach(Wk);for(let a of e)s.appendChild(a);this.currentDomNodes=e}}}tw.addPropsEquality({elClasses:vl,elStyle:ga,elAttrs:AW,renderProps:ga});function gy(t,e){var n;return!!(e.handleCustomRendering&&t&&(!((n=e.customRenderingMetaMap)===null||n===void 0)&&n[t]))}function yD(t,e,n){const s=Object.assign(Object.assign({},t.elAttrs),{ref:n});return(t.elClasses||e)&&(s.className=(t.elClasses||[]).concat(e||[]).concat(s.className||[]).filter(Boolean).join(" ")),t.elStyle&&(s.style=t.elStyle),s}function UW(t){return!!t}const bD=xD(0);class Ps extends _s{constructor(){super(...arguments),this.InnerContent=WW.bind(void 0,this),this.handleEl=e=>{this.el=e,this.props.elRef&&(Va(this.props.elRef,e),e&&this.didMountMisfire&&this.componentDidMount())}}render(){const{props:e}=this,n=KW(e.classNameGenerator,e.renderProps);if(e.children){const s=yD(e,n,this.handleEl),a=e.children(this.InnerContent,e.renderProps,s);return e.elTag?we(e.elTag,s,a):a}else return we(tw,Object.assign(Object.assign({},e),{elRef:this.handleEl,elTag:e.elTag||"div",elClasses:(e.elClasses||[]).concat(n),renderId:this.context}))}componentDidMount(){var e,n;this.el?(n=(e=this.props).didMount)===null||n===void 0||n.call(e,Object.assign(Object.assign({},this.props.renderProps),{el:this.el})):this.didMountMisfire=!0}componentWillUnmount(){var e,n;(n=(e=this.props).willUnmount)===null||n===void 0||n.call(e,Object.assign(Object.assign({},this.props.renderProps),{el:this.el}))}}Ps.contextType=bD;function WW(t,e){const n=t.props;return we(tw,Object.assign({renderProps:n.renderProps,generatorName:n.generatorName,customGenerator:n.customGenerator,defaultGenerator:n.defaultGenerator,renderId:t.context},e))}function KW(t,e){const n=typeof t=="function"?t(e):t||[];return typeof n=="string"?[n]:n}class Vp extends jn{render(){let{props:e,context:n}=this,{options:s}=n,a={view:n.viewApi};return we(Ps,{elRef:e.elRef,elTag:e.elTag||"div",elAttrs:e.elAttrs,elClasses:[...kD(e.viewSpec),...e.elClasses||[]],elStyle:e.elStyle,renderProps:a,classNameGenerator:s.viewClassNames,generatorName:void 0,didMount:s.viewDidMount,willUnmount:s.viewWillUnmount},()=>e.children)}}function kD(t){return[`fc-${t.type}-view`,"fc-view"]}function GW(t,e){let n=null,s=null;return t.start&&(n=e.createMarker(t.start)),t.end&&(s=e.createMarker(t.end)),!n&&!s||n&&s&&s<n?null:{start:n,end:s}}function H1(t,e){let n=[],{start:s}=e,a,l;for(t.sort(YW),a=0;a<t.length;a+=1)l=t[a],l.start>s&&n.push({start:s,end:l.start}),l.end>s&&(s=l.end);return s<e.end&&n.push({start:s,end:e.end}),n}function YW(t,e){return t.start.valueOf()-e.start.valueOf()}function co(t,e){let{start:n,end:s}=t,a=null;return e.start!==null&&(n===null?n=e.start:n=new Date(Math.max(n.valueOf(),e.start.valueOf()))),e.end!=null&&(s===null?s=e.end:s=new Date(Math.min(s.valueOf(),e.end.valueOf()))),(n===null||s===null||n<s)&&(a={start:n,end:s}),a}function QW(t,e){return(t.start===null?null:t.start.valueOf())===(e.start===null?null:e.start.valueOf())&&(t.end===null?null:t.end.valueOf())===(e.end===null?null:e.end.valueOf())}function nw(t,e){return(t.end===null||e.start===null||t.end>e.start)&&(t.start===null||e.end===null||t.start<e.end)}function Wg(t,e){return(t.start===null||e.start!==null&&e.start>=t.start)&&(t.end===null||e.end!==null&&e.end<=t.end)}function Nr(t,e){return(t.start===null||e>=t.start)&&(t.end===null||e<t.end)}function ZW(t,e){return e.start!=null&&t<e.start?e.start:e.end!=null&&t>=e.end?new Date(e.end.valueOf()-1):t}function wD(t){let e=Math.floor(Eo(t.start,t.end))||1,n=On(t.start),s=vi(n,e);return{start:n,end:s}}function jD(t,e=Jt(0)){let n=null,s=null;if(t.end){s=On(t.end);let a=t.end.valueOf()-s.valueOf();a&&a>=ma(e)&&(s=vi(s,1))}return t.start&&(n=On(t.start),s&&s<=n&&(s=vi(n,1))),{start:n,end:s}}function ac(t,e,n,s){return s==="year"?Jt(n.diffWholeYears(t,e),"year"):s==="month"?Jt(n.diffWholeMonths(t,e),"month"):sW(t,e)}class ND{constructor(e){this.props=e,this.initHiddenDays()}buildPrev(e,n,s){let{dateEnv:a}=this.props,l=a.subtract(a.startOf(n,e.currentRangeUnit),e.dateIncrement);return this.build(l,-1,s)}buildNext(e,n,s){let{dateEnv:a}=this.props,l=a.add(a.startOf(n,e.currentRangeUnit),e.dateIncrement);return this.build(l,1,s)}build(e,n,s=!0){let{props:a}=this,l,o,c,d,m,u;return l=this.buildValidRange(),l=this.trimHiddenDays(l),s&&(e=ZW(e,l)),o=this.buildCurrentRangeInfo(e,n),c=/^(year|month|week|day)$/.test(o.unit),d=this.buildRenderRange(this.trimHiddenDays(o.range),o.unit,c),d=this.trimHiddenDays(d),m=d,a.showNonCurrentDates||(m=co(m,o.range)),m=this.adjustActiveRange(m),m=co(m,l),u=nw(o.range,l),Nr(d,e)||(e=d.start),{currentDate:e,validRange:l,currentRange:o.range,currentRangeUnit:o.unit,isRangeAllDay:c,activeRange:m,renderRange:d,slotMinTime:a.slotMinTime,slotMaxTime:a.slotMaxTime,isValid:u,dateIncrement:this.buildDateIncrement(o.duration)}}buildValidRange(){let e=this.props.validRangeInput,n=typeof e=="function"?e.call(this.props.calendarApi,this.props.dateEnv.toDate(this.props.nowManager.getDateMarker())):e;return this.refineRange(n)||{start:null,end:null}}buildCurrentRangeInfo(e,n){let{props:s}=this,a=null,l=null,o=null,c;return s.duration?(a=s.duration,l=s.durationUnit,o=this.buildRangeFromDuration(e,n,a,l)):(c=this.props.dayCount)?(l="day",o=this.buildRangeFromDayCount(e,n,c)):(o=this.buildCustomVisibleRange(e))?l=s.dateEnv.greatestWholeUnit(o.start,o.end).unit:(a=this.getFallbackDuration(),l=py(a).unit,o=this.buildRangeFromDuration(e,n,a,l)),{duration:a,unit:l,range:o}}getFallbackDuration(){return Jt({day:1})}adjustActiveRange(e){let{dateEnv:n,usesMinMaxTime:s,slotMinTime:a,slotMaxTime:l}=this.props,{start:o,end:c}=e;return s&&(bc(a)<0&&(o=On(o),o=n.add(o,a)),bc(l)>1&&(c=On(c),c=vi(c,-1),c=n.add(c,l))),{start:o,end:c}}buildRangeFromDuration(e,n,s,a){let{dateEnv:l,dateAlignment:o}=this.props,c,d,m;if(!o){let{dateIncrement:h}=this.props;h&&ma(h)<ma(s)?o=py(h).unit:o=a}bc(s)<=1&&this.isHiddenDay(c)&&(c=this.skipHiddenDays(c,n),c=On(c));function u(){c=l.startOf(e,o),d=l.add(c,s),m={start:c,end:d}}return u(),this.trimHiddenDays(m)||(e=this.skipHiddenDays(e,n),u()),m}buildRangeFromDayCount(e,n,s){let{dateEnv:a,dateAlignment:l}=this.props,o=0,c=e,d;l&&(c=a.startOf(c,l)),c=On(c),c=this.skipHiddenDays(c,n),d=c;do d=vi(d,1),this.isHiddenDay(d)||(o+=1);while(o<s);return{start:c,end:d}}buildCustomVisibleRange(e){let{props:n}=this,s=n.visibleRangeInput,a=typeof s=="function"?s.call(n.calendarApi,n.dateEnv.toDate(e)):s,l=this.refineRange(a);return l&&(l.start==null||l.end==null)?null:l}buildRenderRange(e,n,s){return e}buildDateIncrement(e){let{dateIncrement:n}=this.props,s;return n||((s=this.props.dateAlignment)?Jt(1,s):e||Jt({days:1}))}refineRange(e){if(e){let n=GW(e,this.props.dateEnv);return n&&(n=jD(n)),n}return null}initHiddenDays(){let e=this.props.hiddenDays||[],n=[],s=0,a;for(this.props.weekends===!1&&e.push(0,6),a=0;a<7;a+=1)(n[a]=e.indexOf(a)!==-1)||(s+=1);if(!s)throw new Error("invalid hiddenDays");this.isHiddenDayHash=n}trimHiddenDays(e){let{start:n,end:s}=e;return n&&(n=this.skipHiddenDays(n)),s&&(s=this.skipHiddenDays(s,-1,!0)),n==null||s==null||n<s?{start:n,end:s}:null}isHiddenDay(e){return e instanceof Date&&(e=e.getUTCDay()),this.isHiddenDayHash[e]}skipHiddenDays(e,n=1,s=!1){for(;this.isHiddenDayHash[(e.getUTCDay()+(s?n:0)+7)%7];)e=vi(e,n);return e}}function iw(t,e,n,s){return{instanceId:So(),defId:t,range:e,forcedStartTzo:n??null,forcedEndTzo:s??null}}function XW(t,e,n,s){for(let a=0;a<s.length;a+=1){let l=s[a].parse(t,n);if(l){let{allDay:o}=t;return o==null&&(o=e,o==null&&(o=l.allDayGuess,o==null&&(o=!1))),{allDay:o,duration:l.duration,typeData:l.typeData,typeId:a}}}return null}function mo(t,e,n){let{dateEnv:s,pluginHooks:a,options:l}=n,{defs:o,instances:c}=t;c=oo(c,d=>!o[d.defId].recurringDef);for(let d in o){let m=o[d];if(m.recurringDef){let{duration:u}=m.recurringDef;u||(u=m.allDay?l.defaultAllDayEventDuration:l.defaultTimedEventDuration);let h=JW(m,u,e,s,a.recurringTypes);for(let p of h){let g=iw(d,{start:p,end:s.add(p,u)});c[g.instanceId]=g}}}return{defs:o,instances:c}}function JW(t,e,n,s,a){let o=a[t.recurringDef.typeId].expand(t.recurringDef.typeData,{start:s.subtract(n.start,e),end:n.end},s);return t.allDay&&(o=o.map(On)),o}const Hh={id:String,groupId:String,title:String,url:String,interactive:Boolean},CD={start:Me,end:Me,date:Me,allDay:Boolean},eK=Object.assign(Object.assign(Object.assign({},Hh),CD),{extendedProps:Me});function _D(t,e,n,s,a=sw(n),l,o){let{refined:c,extra:d}=SD(t,n,a),m=nK(e,n),u=XW(c,m,n.dateEnv,n.pluginHooks.recurringTypes);if(u){let p=fy(c,d,e?e.sourceId:"",u.allDay,!!u.duration,n,l);return p.recurringDef={typeId:u.typeId,typeData:u.typeData,duration:u.duration},{def:p,instance:null}}let h=tK(c,m,n,s);if(h){let p=fy(c,d,e?e.sourceId:"",h.allDay,h.hasEnd,n,l),g=iw(p.defId,h.range,h.forcedStartTzo,h.forcedEndTzo);return o&&p.publicId&&o[p.publicId]&&(g.instanceId=o[p.publicId]),{def:p,instance:g}}return null}function SD(t,e,n=sw(e)){return Xk(t,n)}function sw(t){return Object.assign(Object.assign(Object.assign({},Up),eK),t.pluginHooks.eventRefiners)}function fy(t,e,n,s,a,l,o){let c={title:t.title||"",groupId:t.groupId||"",publicId:t.id||"",url:t.url||"",recurringDef:null,defId:(o&&t.id?o[t.id]:"")||So(),sourceId:n,allDay:s,hasEnd:a,interactive:t.interactive,ui:Wp(t,l),extendedProps:Object.assign(Object.assign({},t.extendedProps||{}),e)};for(let d of l.pluginHooks.eventDefMemberAdders)Object.assign(c,d(t));return Object.freeze(c.ui.classNames),Object.freeze(c.extendedProps),c}function tK(t,e,n,s){let{allDay:a}=t,l,o=null,c=!1,d,m=null,u=t.start!=null?t.start:t.date;if(l=n.dateEnv.createMarkerMeta(u),l)o=l.marker;else if(!s)return null;return t.end!=null&&(d=n.dateEnv.createMarkerMeta(t.end)),a==null&&(e!=null?a=e:a=(!l||l.isTimeUnspecified)&&(!d||d.isTimeUnspecified)),a&&o&&(o=On(o)),d&&(m=d.marker,a&&(m=On(m)),o&&m<=o&&(m=null)),m?c=!0:s||(c=n.options.forceEventDuration||!1,m=n.dateEnv.add(o,a?n.options.defaultAllDayEventDuration:n.options.defaultTimedEventDuration)),{allDay:a,hasEnd:c,range:{start:o,end:m},forcedStartTzo:l?l.forcedTzo:null,forcedEndTzo:d?d.forcedTzo:null}}function nK(t,e){let n=null;return t&&(n=t.defaultAllDay),n==null&&(n=e.options.defaultAllDay),n}function Em(t,e,n,s,a,l){let o=Ss(),c=sw(n);for(let d of t){let m=_D(d,e,n,s,c,a,l);m&&vy(m,o)}return o}function vy(t,e=Ss()){return e.defs[t.def.defId]=t.def,t.instance&&(e.instances[t.instance.instanceId]=t.instance),e}function aw(t,e){let n=t.instances[e];if(n){let s=t.defs[n.defId],a=Kg(t,l=>iK(s,l));return a.defs[s.defId]=s,a.instances[n.instanceId]=n,a}return Ss()}function iK(t,e){return!!(t.groupId&&t.groupId===e.groupId)}function Ss(){return{defs:{},instances:{}}}function rw(t,e){return{defs:Object.assign(Object.assign({},t.defs),e.defs),instances:Object.assign(Object.assign({},t.instances),e.instances)}}function Kg(t,e){let n=oo(t.defs,e),s=oo(t.instances,a=>n[a.defId]);return{defs:n,instances:s}}function sK(t,e){let{defs:n,instances:s}=t,a={},l={};for(let o in n)e.defs[o]||(a[o]=n[o]);for(let o in s)!e.instances[o]&&a[s[o].defId]&&(l[o]=s[o]);return{defs:a,instances:l}}function aK(t,e){return Array.isArray(t)?Em(t,null,e,!0):typeof t=="object"&&t?Em([t],null,e,!0):t!=null?String(t):null}function z1(t){return Array.isArray(t)?t:typeof t=="string"?t.split(/\s+/):[]}const Up={display:String,editable:Boolean,startEditable:Boolean,durationEditable:Boolean,constraint:Me,overlap:Me,allow:Me,className:z1,classNames:z1,color:String,backgroundColor:String,borderColor:String,textColor:String},rK={display:null,startEditable:null,durationEditable:null,constraints:[],overlap:null,allows:[],backgroundColor:"",borderColor:"",textColor:"",classNames:[]};function Wp(t,e){let n=aK(t.constraint,e);return{display:t.display||null,startEditable:t.startEditable!=null?t.startEditable:t.editable,durationEditable:t.durationEditable!=null?t.durationEditable:t.editable,constraints:n!=null?[n]:[],overlap:t.overlap!=null?t.overlap:null,allows:t.allow!=null?[t.allow]:[],backgroundColor:t.backgroundColor||t.color||"",borderColor:t.borderColor||t.color||"",textColor:t.textColor||"",classNames:(t.className||[]).concat(t.classNames||[])}}function ED(t){return t.reduce(lK,rK)}function lK(t,e){return{display:e.display!=null?e.display:t.display,startEditable:e.startEditable!=null?e.startEditable:t.startEditable,durationEditable:e.durationEditable!=null?e.durationEditable:t.durationEditable,constraints:t.constraints.concat(e.constraints),overlap:typeof e.overlap=="boolean"?e.overlap:t.overlap,allows:t.allows.concat(e.allows),backgroundColor:e.backgroundColor||t.backgroundColor,borderColor:e.borderColor||t.borderColor,textColor:e.textColor||t.textColor,classNames:t.classNames.concat(e.classNames)}}const oK={id:String,defaultAllDay:Boolean,url:String,format:String,events:Me,eventDataTransform:Me,success:Me,failure:Me};function TD(t,e,n=AD(e)){let s;if(typeof t=="string"?s={url:t}:typeof t=="function"||Array.isArray(t)?s={events:t}:typeof t=="object"&&t&&(s=t),s){let{refined:a,extra:l}=Xk(s,n),o=cK(a,e);if(o)return{_raw:t,isFetching:!1,latestFetchId:"",fetchRange:null,defaultAllDay:a.defaultAllDay,eventDataTransform:a.eventDataTransform,success:a.success,failure:a.failure,publicId:a.id||"",sourceId:So(),sourceDefId:o.sourceDefId,meta:o.meta,ui:Wp(a,e),extendedProps:l}}return null}function AD(t){return Object.assign(Object.assign(Object.assign({},Up),oK),t.pluginHooks.eventSourceRefiners)}function cK(t,e){let n=e.pluginHooks.eventSourceDefs;for(let s=n.length-1;s>=0;s-=1){let l=n[s].parseMeta(t);if(l)return{sourceDefId:s,meta:l}}return null}function dK(t,e,n,s,a){switch(e.type){case"RECEIVE_EVENTS":return mK(t,n[e.sourceId],e.fetchId,e.fetchRange,e.rawEvents,a);case"RESET_RAW_EVENTS":return uK(t,n[e.sourceId],e.rawEvents,s.activeRange,a);case"ADD_EVENTS":return hK(t,e.eventStore,s?s.activeRange:null,a);case"RESET_EVENTS":return e.eventStore;case"MERGE_EVENTS":return rw(t,e.eventStore);case"PREV":case"NEXT":case"CHANGE_DATE":case"CHANGE_VIEW_TYPE":return s?mo(t,s.activeRange,a):t;case"REMOVE_EVENTS":return sK(t,e.eventStore);case"REMOVE_EVENT_SOURCE":return RD(t,e.sourceId);case"REMOVE_ALL_EVENT_SOURCES":return Kg(t,l=>!l.sourceId);case"REMOVE_ALL_EVENTS":return Ss();default:return t}}function mK(t,e,n,s,a,l){if(e&&n===e.latestFetchId){let o=Em(DD(a,e,l),e,l);return s&&(o=mo(o,s,l)),rw(RD(t,e.sourceId),o)}return t}function uK(t,e,n,s,a){const{defIdMap:l,instanceIdMap:o}=gK(t);let c=Em(DD(n,e,a),e,a,!1,l,o);return mo(c,s,a)}function DD(t,e,n){let s=n.options.eventDataTransform,a=e?e.eventDataTransform:null;return a&&(t=V1(t,a)),s&&(t=V1(t,s)),t}function V1(t,e){let n;if(!e)n=t;else{n=[];for(let s of t){let a=e(s);a?n.push(a):a==null&&n.push(s)}}return n}function hK(t,e,n,s){return n&&(e=mo(e,n,s)),rw(t,e)}function U1(t,e,n){let{defs:s}=t,a=Tr(t.instances,l=>s[l.defId].allDay?l:Object.assign(Object.assign({},l),{range:{start:n.createMarker(e.toDate(l.range.start,l.forcedStartTzo)),end:n.createMarker(e.toDate(l.range.end,l.forcedEndTzo))},forcedStartTzo:n.canComputeOffset?null:l.forcedStartTzo,forcedEndTzo:n.canComputeOffset?null:l.forcedEndTzo}));return{defs:s,instances:a}}function RD(t,e){return Kg(t,n=>n.sourceId!==e)}function pK(t,e){return{defs:t.defs,instances:oo(t.instances,n=>!e[n.instanceId])}}function gK(t){const{defs:e,instances:n}=t,s={},a={};for(let l in e){const o=e[l],{publicId:c}=o;c&&(s[c]=l)}for(let l in n){const o=n[l],c=e[o.defId],{publicId:d}=c;d&&(a[d]=l)}return{defIdMap:s,instanceIdMap:a}}let Gg=class{constructor(){this.handlers={},this.thisContext=null}setThisContext(e){this.thisContext=e}setOptions(e){this.options=e}on(e,n){fK(this.handlers,e,n)}off(e,n){vK(this.handlers,e,n)}trigger(e,...n){let s=this.handlers[e]||[],a=this.options&&this.options[e],l=[].concat(a||[],s);for(let o of l)o.apply(this.thisContext,n)}hasHandlers(e){return!!(this.handlers[e]&&this.handlers[e].length||this.options&&this.options[e])}};function fK(t,e,n){(t[e]||(t[e]=[])).push(n)}function vK(t,e,n){n?t[e]&&(t[e]=t[e].filter(s=>s!==n)):delete t[e]}const xK={startTime:"09:00",endTime:"17:00",daysOfWeek:[1,2,3,4,5],display:"inverse-background",classNames:"fc-non-business",groupId:"_businessHours"};function yK(t,e){return Em(bK(t),null,e)}function bK(t){let e;return t===!0?e=[{}]:Array.isArray(t)?e=t.filter(n=>n.daysOfWeek):typeof t=="object"&&t?e=[t]:e=[],e=e.map(n=>Object.assign(Object.assign({},xK),n)),e}function PD(t,e,n){n.emitter.trigger("select",Object.assign(Object.assign({},lw(t,n)),{jsEvent:e?e.origEvent:null,view:n.viewApi||n.calendarApi.view}))}function kK(t,e){e.emitter.trigger("unselect",{jsEvent:t?t.origEvent:null,view:e.viewApi||e.calendarApi.view})}function lw(t,e){let n={};for(let s of e.pluginHooks.dateSpanTransforms)Object.assign(n,s(t,e));return Object.assign(n,IK(t,e.dateEnv)),n}function W1(t,e,n){let{dateEnv:s,options:a}=n,l=e;return t?(l=On(l),l=s.add(l,a.defaultAllDayEventDuration)):l=s.add(l,a.defaultTimedEventDuration),l}function ow(t,e,n,s){let a=Kp(t.defs,e),l=Ss();for(let o in t.defs){let c=t.defs[o];l.defs[o]=wK(c,a[o],n,s)}for(let o in t.instances){let c=t.instances[o],d=l.defs[c.defId];l.instances[o]=jK(c,d,a[c.defId],n,s)}return l}function wK(t,e,n,s){let a=n.standardProps||{};a.hasEnd==null&&e.durationEditable&&(n.startDelta||n.endDelta)&&(a.hasEnd=!0);let l=Object.assign(Object.assign(Object.assign({},t),a),{ui:Object.assign(Object.assign({},t.ui),a.ui)});n.extendedProps&&(l.extendedProps=Object.assign(Object.assign({},l.extendedProps),n.extendedProps));for(let o of s.pluginHooks.eventDefMutationAppliers)o(l,n,s);return!l.hasEnd&&s.options.forceEventDuration&&(l.hasEnd=!0),l}function jK(t,e,n,s,a){let{dateEnv:l}=a,o=s.standardProps&&s.standardProps.allDay===!0,c=s.standardProps&&s.standardProps.hasEnd===!1,d=Object.assign({},t);return o&&(d.range=wD(d.range)),s.datesDelta&&n.startEditable&&(d.range={start:l.add(d.range.start,s.datesDelta),end:l.add(d.range.end,s.datesDelta)}),s.startDelta&&n.durationEditable&&(d.range={start:l.add(d.range.start,s.startDelta),end:d.range.end}),s.endDelta&&n.durationEditable&&(d.range={start:d.range.start,end:l.add(d.range.end,s.endDelta)}),c&&(d.range={start:d.range.start,end:W1(e.allDay,d.range.start,a)}),e.allDay&&(d.range={start:On(d.range.start),end:On(d.range.end)}),d.range.end<d.range.start&&(d.range.end=W1(e.allDay,d.range.start,a)),d}class Jo{constructor(e,n){this.context=e,this.internalEventSource=n}remove(){this.context.dispatch({type:"REMOVE_EVENT_SOURCE",sourceId:this.internalEventSource.sourceId})}refetch(){this.context.dispatch({type:"FETCH_EVENT_SOURCES",sourceIds:[this.internalEventSource.sourceId],isRefetch:!0})}get id(){return this.internalEventSource.publicId}get url(){return this.internalEventSource.meta.url}get format(){return this.internalEventSource.meta.format}}class zn{constructor(e,n,s){this._context=e,this._def=n,this._instance=s||null}setProp(e,n){if(e in CD)console.warn("Could not set date-related prop 'name'. Use one of the date-related methods instead.");else if(e==="id")n=Hh[e](n),this.mutate({standardProps:{publicId:n}});else if(e in Hh)n=Hh[e](n),this.mutate({standardProps:{[e]:n}});else if(e in Up){let s=Up[e](n);e==="color"?s={backgroundColor:n,borderColor:n}:e==="editable"?s={startEditable:n,durationEditable:n}:s={[e]:n},this.mutate({standardProps:{ui:s}})}else console.warn(`Could not set prop '${e}'. Use setExtendedProp instead.`)}setExtendedProp(e,n){this.mutate({extendedProps:{[e]:n}})}setStart(e,n={}){let{dateEnv:s}=this._context,a=s.createMarker(e);if(a&&this._instance){let l=this._instance.range,o=ac(l.start,a,s,n.granularity);n.maintainDuration?this.mutate({datesDelta:o}):this.mutate({startDelta:o})}}setEnd(e,n={}){let{dateEnv:s}=this._context,a;if(!(e!=null&&(a=s.createMarker(e),!a))&&this._instance)if(a){let l=ac(this._instance.range.end,a,s,n.granularity);this.mutate({endDelta:l})}else this.mutate({standardProps:{hasEnd:!1}})}setDates(e,n,s={}){let{dateEnv:a}=this._context,l={allDay:s.allDay},o=a.createMarker(e),c;if(o&&!(n!=null&&(c=a.createMarker(n),!c))&&this._instance){let d=this._instance.range;s.allDay===!0&&(d=wD(d));let m=ac(d.start,o,a,s.granularity);if(c){let u=ac(d.end,c,a,s.granularity);GU(m,u)?this.mutate({datesDelta:m,standardProps:l}):this.mutate({startDelta:m,endDelta:u,standardProps:l})}else l.hasEnd=!1,this.mutate({datesDelta:m,standardProps:l})}}moveStart(e){let n=Jt(e);n&&this.mutate({startDelta:n})}moveEnd(e){let n=Jt(e);n&&this.mutate({endDelta:n})}moveDates(e){let n=Jt(e);n&&this.mutate({datesDelta:n})}setAllDay(e,n={}){let s={allDay:e},{maintainDuration:a}=n;a==null&&(a=this._context.options.allDayMaintainDuration),this._def.allDay!==e&&(s.hasEnd=a),this.mutate({standardProps:s})}formatRange(e){let{dateEnv:n}=this._context,s=this._instance,a=Vn(e);return this._def.hasEnd?n.formatRange(s.range.start,s.range.end,a,{forcedStartTzo:s.forcedStartTzo,forcedEndTzo:s.forcedEndTzo}):n.format(s.range.start,a,{forcedTzo:s.forcedStartTzo})}mutate(e){let n=this._instance;if(n){let s=this._def,a=this._context,{eventStore:l}=a.getCurrentData(),o=aw(l,n.instanceId);o=ow(o,{"":{display:"",startEditable:!0,durationEditable:!0,constraints:[],overlap:null,allows:[],backgroundColor:"",borderColor:"",textColor:"",classNames:[]}},e,a);let d=new zn(a,s,n);this._def=o.defs[s.defId],this._instance=o.instances[n.instanceId],a.dispatch({type:"MERGE_EVENTS",eventStore:o}),a.emitter.trigger("eventChange",{oldEvent:d,event:this,relatedEvents:Xl(o,a,n),revert(){a.dispatch({type:"RESET_EVENTS",eventStore:l})}})}}remove(){let e=this._context,n=MD(this);e.dispatch({type:"REMOVE_EVENTS",eventStore:n}),e.emitter.trigger("eventRemove",{event:this,relatedEvents:[],revert(){e.dispatch({type:"MERGE_EVENTS",eventStore:n})}})}get source(){let{sourceId:e}=this._def;return e?new Jo(this._context,this._context.getCurrentData().eventSources[e]):null}get start(){return this._instance?this._context.dateEnv.toDate(this._instance.range.start):null}get end(){return this._instance&&this._def.hasEnd?this._context.dateEnv.toDate(this._instance.range.end):null}get startStr(){let e=this._instance;return e?this._context.dateEnv.formatIso(e.range.start,{omitTime:this._def.allDay,forcedTzo:e.forcedStartTzo}):""}get endStr(){let e=this._instance;return e&&this._def.hasEnd?this._context.dateEnv.formatIso(e.range.end,{omitTime:this._def.allDay,forcedTzo:e.forcedEndTzo}):""}get id(){return this._def.publicId}get groupId(){return this._def.groupId}get allDay(){return this._def.allDay}get title(){return this._def.title}get url(){return this._def.url}get display(){return this._def.ui.display||"auto"}get startEditable(){return this._def.ui.startEditable}get durationEditable(){return this._def.ui.durationEditable}get constraint(){return this._def.ui.constraints[0]||null}get overlap(){return this._def.ui.overlap}get allow(){return this._def.ui.allows[0]||null}get backgroundColor(){return this._def.ui.backgroundColor}get borderColor(){return this._def.ui.borderColor}get textColor(){return this._def.ui.textColor}get classNames(){return this._def.ui.classNames}get extendedProps(){return this._def.extendedProps}toPlainObject(e={}){let n=this._def,{ui:s}=n,{startStr:a,endStr:l}=this,o={allDay:n.allDay};return n.title&&(o.title=n.title),a&&(o.start=a),l&&(o.end=l),n.publicId&&(o.id=n.publicId),n.groupId&&(o.groupId=n.groupId),n.url&&(o.url=n.url),s.display&&s.display!=="auto"&&(o.display=s.display),e.collapseColor&&s.backgroundColor&&s.backgroundColor===s.borderColor?o.color=s.backgroundColor:(s.backgroundColor&&(o.backgroundColor=s.backgroundColor),s.borderColor&&(o.borderColor=s.borderColor)),s.textColor&&(o.textColor=s.textColor),s.classNames.length&&(o.classNames=s.classNames),Object.keys(n.extendedProps).length&&(e.collapseExtendedProps?Object.assign(o,n.extendedProps):o.extendedProps=n.extendedProps),o}toJSON(){return this.toPlainObject()}}function MD(t){let e=t._def,n=t._instance;return{defs:{[e.defId]:e},instances:n?{[n.instanceId]:n}:{}}}function Xl(t,e,n){let{defs:s,instances:a}=t,l=[],o=n?n.instanceId:"";for(let c in a){let d=a[c],m=s[d.defId];d.instanceId!==o&&l.push(new zn(e,m,d))}return l}function K1(t,e,n,s){let a={},l={},o={},c=[],d=[],m=Kp(t.defs,e);for(let u in t.defs){let h=t.defs[u];m[h.defId].display==="inverse-background"&&(h.groupId?(a[h.groupId]=[],o[h.groupId]||(o[h.groupId]=h)):l[u]=[])}for(let u in t.instances){let h=t.instances[u],p=t.defs[h.defId],g=m[p.defId],v=h.range,x=!p.allDay&&s?jD(v,s):v,y=co(x,n);y&&(g.display==="inverse-background"?p.groupId?a[p.groupId].push(y):l[h.defId].push(y):g.display!=="none"&&(g.display==="background"?c:d).push({def:p,ui:g,instance:h,range:y,isStart:x.start&&x.start.valueOf()===y.start.valueOf(),isEnd:x.end&&x.end.valueOf()===y.end.valueOf()}))}for(let u in a){let h=a[u],p=H1(h,n);for(let g of p){let v=o[u],x=m[v.defId];c.push({def:v,ui:x,instance:null,range:g,isStart:!1,isEnd:!1})}}for(let u in l){let h=l[u],p=H1(h,n);for(let g of p)c.push({def:t.defs[u],ui:m[u],instance:null,range:g,isStart:!1,isEnd:!1})}return{bg:c,fg:d}}function NK(t){return t.ui.display==="background"||t.ui.display==="inverse-background"}function G1(t,e){t.fcSeg=e}function Bc(t){return t.fcSeg||t.parentNode.fcSeg||null}function Kp(t,e){return Tr(t,n=>ID(n,e))}function ID(t,e){let n=[];return e[""]&&n.push(e[""]),e[t.defId]&&n.push(e[t.defId]),n.push(t.ui),ED(n)}function OD(t,e){let n=t.map(CK);return n.sort((s,a)=>qU(s,a,e)),n.map(s=>s._seg)}function CK(t){let{eventRange:e}=t,n=e.def,s=e.instance?e.instance.range:e.range,a=s.start?s.start.valueOf():0,l=s.end?s.end.valueOf():0;return Object.assign(Object.assign(Object.assign({},n.extendedProps),n),{id:n.publicId,start:a,end:l,duration:l-a,allDay:Number(n.allDay),_seg:t})}function _K(t,e){let{pluginHooks:n}=e,s=n.isDraggableTransformers,{def:a,ui:l}=t.eventRange,o=l.startEditable;for(let c of s)o=c(o,a,l,e);return o}function SK(t,e){return t.isStart&&t.eventRange.ui.durationEditable&&e.options.eventResizableFromStart}function EK(t,e){return t.isEnd&&t.eventRange.ui.durationEditable}function FD(t,e,n,s,a,l,o){let{dateEnv:c,options:d}=n,{displayEventTime:m,displayEventEnd:u}=d,h=t.eventRange.def,p=t.eventRange.instance;m==null&&(m=s!==!1),u==null&&(u=a!==!1);let g=p.range.start,v=p.range.end,x=t.start||t.eventRange.range.start,y=t.end||t.eventRange.range.end,b=On(g).valueOf()===On(x).valueOf(),k=On(xl(v,-1)).valueOf()===On(xl(y,-1)).valueOf();return m&&!h.allDay&&(b||k)?(x=b?g:x,y=k?v:y,u&&h.hasEnd?c.formatRange(x,y,e,{forcedStartTzo:p.forcedStartTzo,forcedEndTzo:p.forcedEndTzo}):c.format(x,e,{forcedTzo:p.forcedStartTzo})):""}function ml(t,e,n){let s=t.eventRange.range;return{isPast:s.end<=(n||e.start),isFuture:s.start>=(n||e.end),isToday:e&&Nr(e,s.start)}}function TK(t){let e=["fc-event"];return t.isMirror&&e.push("fc-event-mirror"),t.isDraggable&&e.push("fc-event-draggable"),(t.isStartResizable||t.isEndResizable)&&e.push("fc-event-resizable"),t.isDragging&&e.push("fc-event-dragging"),t.isResizing&&e.push("fc-event-resizing"),t.isSelected&&e.push("fc-event-selected"),t.isStart&&e.push("fc-event-start"),t.isEnd&&e.push("fc-event-end"),t.isPast&&e.push("fc-event-past"),t.isToday&&e.push("fc-event-today"),t.isFuture&&e.push("fc-event-future"),e}function LD(t){return t.instance?t.instance.instanceId:`${t.def.defId}:${t.range.start.toISOString()}`}function $D(t,e){let{def:n,instance:s}=t.eventRange,{url:a}=n;if(a)return{href:a};let{emitter:l,options:o}=e,{eventInteractive:c}=o;return c==null&&(c=n.interactive,c==null&&(c=!!l.hasHandlers("eventClick"))),c?hD(d=>{l.trigger("eventClick",{el:d.target,event:new zn(e,n,s),jsEvent:d,view:e.viewApi})}):{}}const AK={start:Me,end:Me,allDay:Boolean};function DK(t,e,n){let s=RK(t,e),{range:a}=s;if(!a.start)return null;if(!a.end){if(n==null)return null;a.end=e.add(a.start,n)}return s}function RK(t,e){let{refined:n,extra:s}=Xk(t,AK),a=n.start?e.createMarkerMeta(n.start):null,l=n.end?e.createMarkerMeta(n.end):null,{allDay:o}=n;return o==null&&(o=a&&a.isTimeUnspecified&&(!l||l.isTimeUnspecified)),Object.assign({range:{start:a?a.marker:null,end:l?l.marker:null},allDay:o},s)}function PK(t,e){return QW(t.range,e.range)&&t.allDay===e.allDay&&MK(t,e)}function MK(t,e){for(let n in e)if(n!=="range"&&n!=="allDay"&&t[n]!==e[n])return!1;for(let n in t)if(!(n in e))return!1;return!0}function IK(t,e){return Object.assign(Object.assign({},qD(t.range,e,t.allDay)),{allDay:t.allDay})}function BD(t,e,n){return Object.assign(Object.assign({},qD(t,e,n)),{timeZone:e.timeZone})}function qD(t,e,n){return{start:e.toDate(t.start),end:e.toDate(t.end),startStr:e.formatIso(t.start,{omitTime:n}),endStr:e.formatIso(t.end,{omitTime:n})}}function OK(t,e,n){let s=SD({editable:!1},n),a=fy(s.refined,s.extra,"",t.allDay,!0,n);return{def:a,ui:ID(a,e),instance:iw(a.defId,t.range),range:t.range,isStart:!0,isEnd:!0}}function FK(t,e,n){let s=!1,a=function(c){s||(s=!0,e(c))},l=function(c){s||(s=!0,n(c))},o=t(a,l);o&&typeof o.then=="function"&&o.then(a,l)}class Y1 extends Error{constructor(e,n){super(e),this.response=n}}function LK(t,e,n){t=t.toUpperCase();const s={method:t};return t==="GET"?e+=(e.indexOf("?")===-1?"?":"&")+new URLSearchParams(n):(s.body=new URLSearchParams(n),s.headers={"Content-Type":"application/x-www-form-urlencoded"}),fetch(e,s).then(a=>{if(a.ok)return a.json().then(l=>[l,a],()=>{throw new Y1("Failure parsing JSON",a)});throw new Y1("Request failed",a)})}let Bv;function HD(){return Bv==null&&(Bv=$K()),Bv}function $K(){if(typeof document>"u")return!0;let t=document.createElement("div");t.style.position="absolute",t.style.top="0px",t.style.left="0px",t.innerHTML="<table><tr><td><div></div></td></tr></table>",t.querySelector("table").style.height="100px",t.querySelector("div").style.height="100%",document.body.appendChild(t);let n=t.querySelector("div").offsetHeight>0;return document.body.removeChild(t),n}class BK extends jn{constructor(){super(...arguments),this.state={forPrint:!1},this.handleBeforePrint=()=>{zp(()=>{this.setState({forPrint:!0})})},this.handleAfterPrint=()=>{zp(()=>{this.setState({forPrint:!1})})}}render(){let{props:e}=this,{options:n}=e,{forPrint:s}=this.state,a=s||n.height==="auto"||n.contentHeight==="auto",l=!a&&n.height!=null?n.height:"",o=["fc",s?"fc-media-print":"fc-media-screen",`fc-direction-${n.direction}`,e.theme.getClass("root")];return HD()||o.push("fc-liquid-hack"),e.children(o,l,a,s)}componentDidMount(){let{emitter:e}=this.props;e.on("_beforeprint",this.handleBeforePrint),e.on("_afterprint",this.handleAfterPrint)}componentWillUnmount(){let{emitter:e}=this.props;e.off("_beforeprint",this.handleBeforePrint),e.off("_afterprint",this.handleAfterPrint)}}class id{constructor(e){this.component=e.component,this.isHitComboAllowed=e.isHitComboAllowed||null}destroy(){}}function qK(t,e){return{component:t,el:e.el,useEventCenter:e.useEventCenter!=null?e.useEventCenter:!0,isHitComboAllowed:e.isHitComboAllowed||null}}function cw(t){return{[t.component.uid]:t}}const xy={};class sd extends _s{constructor(e,n){super(e,n),this.handleRefresh=()=>{let s=this.computeTiming();s.state.nowDate.valueOf()!==this.state.nowDate.valueOf()&&this.setState(s.state),this.clearTimeout(),this.setTimeout(s.waitMs)},this.handleVisibilityChange=()=>{document.hidden||this.handleRefresh()},this.state=this.computeTiming().state}render(){let{props:e,state:n}=this;return e.children(n.nowDate,n.todayRange)}componentDidMount(){this.setTimeout(),this.context.nowManager.addResetListener(this.handleRefresh),document.addEventListener("visibilitychange",this.handleVisibilityChange)}componentDidUpdate(e){e.unit!==this.props.unit&&(this.clearTimeout(),this.setTimeout())}componentWillUnmount(){this.clearTimeout(),this.context.nowManager.removeResetListener(this.handleRefresh),document.removeEventListener("visibilitychange",this.handleVisibilityChange)}computeTiming(){let{props:e,context:n}=this,s=n.nowManager.getDateMarker(),{nowIndicatorSnap:a}=n.options;a==="auto"&&(a=/year|month|week|day/.test(e.unit)||(e.unitValue||1)===1);let l,o;return a?(l=n.dateEnv.startOf(s,e.unit),o=n.dateEnv.add(l,Jt(1,e.unit)).valueOf()-s.valueOf()):(l=s,o=1e3*60),o=Math.min(1e3*60*60*24,o),{state:{nowDate:l,todayRange:HK(l)},waitMs:o}}setTimeout(e=this.computeTiming().waitMs){this.timeoutId=setTimeout(()=>{const n=this.computeTiming();this.setState(n.state,()=>{this.setTimeout(n.waitMs)})},e)}clearTimeout(){this.timeoutId&&clearTimeout(this.timeoutId)}}sd.contextType=Or;function HK(t){let e=On(t),n=vi(e,1);return{start:e,end:n}}class zK{getCurrentData(){return this.currentDataManager.getCurrentData()}dispatch(e){this.currentDataManager.dispatch(e)}get view(){return this.getCurrentData().viewApi}batchRendering(e){e()}updateSize(){this.trigger("_resize",!0)}setOption(e,n){this.dispatch({type:"SET_OPTION",optionName:e,rawOptionValue:n})}getOption(e){return this.currentDataManager.currentCalendarOptionsInput[e]}getAvailableLocaleCodes(){return Object.keys(this.getCurrentData().availableRawLocales)}on(e,n){let{currentDataManager:s}=this;s.currentCalendarOptionsRefiners[e]?s.emitter.on(e,n):console.warn(`Unknown listener name '${e}'`)}off(e,n){this.currentDataManager.emitter.off(e,n)}trigger(e,...n){this.currentDataManager.emitter.trigger(e,...n)}changeView(e,n){this.batchRendering(()=>{if(this.unselect(),n)if(n.start&&n.end)this.dispatch({type:"CHANGE_VIEW_TYPE",viewType:e}),this.dispatch({type:"SET_OPTION",optionName:"visibleRange",rawOptionValue:n});else{let{dateEnv:s}=this.getCurrentData();this.dispatch({type:"CHANGE_VIEW_TYPE",viewType:e,dateMarker:s.createMarker(n)})}else this.dispatch({type:"CHANGE_VIEW_TYPE",viewType:e})})}zoomTo(e,n){let s=this.getCurrentData(),a;n=n||"day",a=s.viewSpecs[n]||this.getUnitViewSpec(n),this.unselect(),a?this.dispatch({type:"CHANGE_VIEW_TYPE",viewType:a.type,dateMarker:e}):this.dispatch({type:"CHANGE_DATE",dateMarker:e})}getUnitViewSpec(e){let{viewSpecs:n,toolbarConfig:s}=this.getCurrentData(),a=[].concat(s.header?s.header.viewsWithButtons:[],s.footer?s.footer.viewsWithButtons:[]),l,o;for(let c in n)a.push(c);for(l=0;l<a.length;l+=1)if(o=n[a[l]],o&&o.singleUnit===e)return o;return null}prev(){this.unselect(),this.dispatch({type:"PREV"})}next(){this.unselect(),this.dispatch({type:"NEXT"})}prevYear(){let e=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:e.dateEnv.addYears(e.currentDate,-1)})}nextYear(){let e=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:e.dateEnv.addYears(e.currentDate,1)})}today(){let e=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:e.nowManager.getDateMarker()})}gotoDate(e){let n=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:n.dateEnv.createMarker(e)})}incrementDate(e){let n=this.getCurrentData(),s=Jt(e);s&&(this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:n.dateEnv.add(n.currentDate,s)}))}getDate(){let e=this.getCurrentData();return e.dateEnv.toDate(e.currentDate)}formatDate(e,n){let{dateEnv:s}=this.getCurrentData();return s.format(s.createMarker(e),Vn(n))}formatRange(e,n,s){let{dateEnv:a}=this.getCurrentData();return a.formatRange(a.createMarker(e),a.createMarker(n),Vn(s),s)}formatIso(e,n){let{dateEnv:s}=this.getCurrentData();return s.formatIso(s.createMarker(e),{omitTime:n})}select(e,n){let s;n==null?e.start!=null?s=e:s={start:e,end:null}:s={start:e,end:n};let a=this.getCurrentData(),l=DK(s,a.dateEnv,Jt({days:1}));l&&(this.dispatch({type:"SELECT_DATES",selection:l}),PD(l,null,a))}unselect(e){let n=this.getCurrentData();n.dateSelection&&(this.dispatch({type:"UNSELECT_DATES"}),kK(e,n))}addEvent(e,n){if(e instanceof zn){let o=e._def,c=e._instance;return this.getCurrentData().eventStore.defs[o.defId]||(this.dispatch({type:"ADD_EVENTS",eventStore:vy({def:o,instance:c})}),this.triggerEventAdd(e)),e}let s=this.getCurrentData(),a;if(n instanceof Jo)a=n.internalEventSource;else if(typeof n=="boolean")n&&([a]=ew(s.eventSources));else if(n!=null){let o=this.getEventSourceById(n);if(!o)return console.warn(`Could not find an event source with ID "${n}"`),null;a=o.internalEventSource}let l=_D(e,a,s,!1);if(l){let o=new zn(s,l.def,l.def.recurringDef?null:l.instance);return this.dispatch({type:"ADD_EVENTS",eventStore:vy(l)}),this.triggerEventAdd(o),o}return null}triggerEventAdd(e){let{emitter:n}=this.getCurrentData();n.trigger("eventAdd",{event:e,relatedEvents:[],revert:()=>{this.dispatch({type:"REMOVE_EVENTS",eventStore:MD(e)})}})}getEventById(e){let n=this.getCurrentData(),{defs:s,instances:a}=n.eventStore;e=String(e);for(let l in s){let o=s[l];if(o.publicId===e){if(o.recurringDef)return new zn(n,o,null);for(let c in a){let d=a[c];if(d.defId===o.defId)return new zn(n,o,d)}}}return null}getEvents(){let e=this.getCurrentData();return Xl(e.eventStore,e)}removeAllEvents(){this.dispatch({type:"REMOVE_ALL_EVENTS"})}getEventSources(){let e=this.getCurrentData(),n=e.eventSources,s=[];for(let a in n)s.push(new Jo(e,n[a]));return s}getEventSourceById(e){let n=this.getCurrentData(),s=n.eventSources;e=String(e);for(let a in s)if(s[a].publicId===e)return new Jo(n,s[a]);return null}addEventSource(e){let n=this.getCurrentData();if(e instanceof Jo)return n.eventSources[e.internalEventSource.sourceId]||this.dispatch({type:"ADD_EVENT_SOURCES",sources:[e.internalEventSource]}),e;let s=TD(e,n);return s?(this.dispatch({type:"ADD_EVENT_SOURCES",sources:[s]}),new Jo(n,s)):null}removeAllEventSources(){this.dispatch({type:"REMOVE_ALL_EVENT_SOURCES"})}refetchEvents(){this.dispatch({type:"FETCH_EVENT_SOURCES",isRefetch:!0})}scrollToTime(e){let n=Jt(e);n&&this.trigger("_scrollRequest",{time:n})}}function VK(t,e){return t.left>=e.left&&t.left<e.right&&t.top>=e.top&&t.top<e.bottom}function zD(t,e){let n={left:Math.max(t.left,e.left),right:Math.min(t.right,e.right),top:Math.max(t.top,e.top),bottom:Math.min(t.bottom,e.bottom)};return n.left<n.right&&n.top<n.bottom?n:!1}function UK(t,e){return{left:Math.min(Math.max(t.left,e.left),e.right),top:Math.min(Math.max(t.top,e.top),e.bottom)}}function WK(t){return{left:(t.left+t.right)/2,top:(t.top+t.bottom)/2}}function KK(t,e){return{left:t.left-e.left,top:t.top-e.top}}const qv=Ss();class GK{constructor(){this.getKeysForEventDefs=qt(this._getKeysForEventDefs),this.splitDateSelection=qt(this._splitDateSpan),this.splitEventStore=qt(this._splitEventStore),this.splitIndividualUi=qt(this._splitIndividualUi),this.splitEventDrag=qt(this._splitInteraction),this.splitEventResize=qt(this._splitInteraction),this.eventUiBuilders={}}splitProps(e){let n=this.getKeyInfo(e),s=this.getKeysForEventDefs(e.eventStore),a=this.splitDateSelection(e.dateSelection),l=this.splitIndividualUi(e.eventUiBases,s),o=this.splitEventStore(e.eventStore,s),c=this.splitEventDrag(e.eventDrag),d=this.splitEventResize(e.eventResize),m={};this.eventUiBuilders=Tr(n,(u,h)=>this.eventUiBuilders[h]||qt(YK));for(let u in n){let h=n[u],p=o[u]||qv,g=this.eventUiBuilders[u];m[u]={businessHours:h.businessHours||e.businessHours,dateSelection:a[u]||null,eventStore:p,eventUiBases:g(e.eventUiBases[""],h.ui,l[u]),eventSelection:p.instances[e.eventSelection]?e.eventSelection:"",eventDrag:c[u]||null,eventResize:d[u]||null}}return m}_splitDateSpan(e){let n={};if(e){let s=this.getKeysForDateSpan(e);for(let a of s)n[a]=e}return n}_getKeysForEventDefs(e){return Tr(e.defs,n=>this.getKeysForEventDef(n))}_splitEventStore(e,n){let{defs:s,instances:a}=e,l={};for(let o in s)for(let c of n[o])l[c]||(l[c]=Ss()),l[c].defs[o]=s[o];for(let o in a){let c=a[o];for(let d of n[c.defId])l[d]&&(l[d].instances[o]=c)}return l}_splitIndividualUi(e,n){let s={};for(let a in e)if(a)for(let l of n[a])s[l]||(s[l]={}),s[l][a]=e[a];return s}_splitInteraction(e){let n={};if(e){let s=this._splitEventStore(e.affectedEvents,this._getKeysForEventDefs(e.affectedEvents)),a=this._getKeysForEventDefs(e.mutatedEvents),l=this._splitEventStore(e.mutatedEvents,a),o=c=>{n[c]||(n[c]={affectedEvents:s[c]||qv,mutatedEvents:l[c]||qv,isEvent:e.isEvent})};for(let c in s)o(c);for(let c in l)o(c)}return n}}function YK(t,e,n){let s=[];t&&s.push(t),e&&s.push(e);let a={"":ED(s)};return n&&Object.assign(a,n),a}function VD(t,e,n,s){return{dow:t.getUTCDay(),isDisabled:!!(s&&(!s.activeRange||!Nr(s.activeRange,t))),isOther:!!(s&&!Nr(s.currentRange,t)),isToday:!!(e&&Nr(e,t)),isPast:!!(e&&t<e.start),isFuture:!!(e&&t>=e.end)}}function dw(t,e){let n=["fc-day",`fc-day-${JU[t.dow]}`];return t.isDisabled?n.push("fc-day-disabled"):(t.isToday&&(n.push("fc-day-today"),n.push(e.getClass("today"))),t.isPast&&n.push("fc-day-past"),t.isFuture&&n.push("fc-day-future"),t.isOther&&n.push("fc-day-other")),n}const QK=Vn({year:"numeric",month:"long",day:"numeric"}),ZK=Vn({week:"long"});function Gp(t,e,n="day",s=!0){const{dateEnv:a,options:l,calendarApi:o}=t;let c=a.format(e,n==="week"?ZK:QK);if(l.navLinks){let d=a.toDate(e);const m=u=>{let h=n==="day"?l.navLinkDayClick:n==="week"?l.navLinkWeekClick:null;typeof h=="function"?h.call(o,a.toDate(e),u):(typeof h=="string"&&(n=h),o.zoomTo(e,n))};return Object.assign({title:rm(l.navLinkHint,[c,d],c),"data-navlink":""},s?uD(m):{onClick:m})}return{"aria-label":c}}let Hv=null;function XK(){return Hv===null&&(Hv=JK()),Hv}function JK(){let t=document.createElement("div");am(t,{position:"absolute",top:-1e3,left:0,border:0,padding:0,overflow:"scroll",direction:"rtl"}),t.innerHTML="<div></div>",document.body.appendChild(t);let n=t.firstChild.getBoundingClientRect().left>t.getBoundingClientRect().left;return Wk(t),n}let zv;function eG(){return zv||(zv=tG()),zv}function tG(){let t=document.createElement("div");t.style.overflow="scroll",t.style.position="absolute",t.style.top="-9999px",t.style.left="-9999px",document.body.appendChild(t);let e=UD(t);return document.body.removeChild(t),e}function UD(t){return{x:t.offsetHeight-t.clientHeight,y:t.offsetWidth-t.clientWidth}}function nG(t,e=!1){let n=window.getComputedStyle(t),s=parseInt(n.borderLeftWidth,10)||0,a=parseInt(n.borderRightWidth,10)||0,l=parseInt(n.borderTopWidth,10)||0,o=parseInt(n.borderBottomWidth,10)||0,c=UD(t),d=c.y-s-a,m=c.x-l-o,u={borderLeft:s,borderRight:a,borderTop:l,borderBottom:o,scrollbarBottom:m,scrollbarLeft:0,scrollbarRight:0};return XK()&&n.direction==="rtl"?u.scrollbarLeft=d:u.scrollbarRight=d,e&&(u.paddingLeft=parseInt(n.paddingLeft,10)||0,u.paddingRight=parseInt(n.paddingRight,10)||0,u.paddingTop=parseInt(n.paddingTop,10)||0,u.paddingBottom=parseInt(n.paddingBottom,10)||0),u}function iG(t,e=!1,n){let s=mw(t),a=nG(t,e),l={left:s.left+a.borderLeft+a.scrollbarLeft,right:s.right-a.borderRight-a.scrollbarRight,top:s.top+a.borderTop,bottom:s.bottom-a.borderBottom-a.scrollbarBottom};return e&&(l.left+=a.paddingLeft,l.right-=a.paddingRight,l.top+=a.paddingTop,l.bottom-=a.paddingBottom),l}function mw(t){let e=t.getBoundingClientRect();return{left:e.left+window.scrollX,top:e.top+window.scrollY,right:e.right+window.scrollX,bottom:e.bottom+window.scrollY}}function sG(t){let e=WD(t),n=t.getBoundingClientRect();for(let s of e){let a=zD(n,s.getBoundingClientRect());if(a)n=a;else return null}return n}function WD(t){let e=[];for(;t instanceof HTMLElement;){let n=window.getComputedStyle(t);if(n.position==="fixed")break;/(auto|scroll)/.test(n.overflow+n.overflowY+n.overflowX)&&e.push(t),t=t.parentNode}return e}class qc{constructor(e,n,s,a){this.els=n;let l=this.originClientRect=e.getBoundingClientRect();s&&this.buildElHorizontals(l.left),a&&this.buildElVerticals(l.top)}buildElHorizontals(e){let n=[],s=[];for(let a of this.els){let l=a.getBoundingClientRect();n.push(l.left-e),s.push(l.right-e)}this.lefts=n,this.rights=s}buildElVerticals(e){let n=[],s=[];for(let a of this.els){let l=a.getBoundingClientRect();n.push(l.top-e),s.push(l.bottom-e)}this.tops=n,this.bottoms=s}leftToIndex(e){let{lefts:n,rights:s}=this,a=n.length,l;for(l=0;l<a;l+=1)if(e>=n[l]&&e<s[l])return l}topToIndex(e){let{tops:n,bottoms:s}=this,a=n.length,l;for(l=0;l<a;l+=1)if(e>=n[l]&&e<s[l])return l}getWidth(e){return this.rights[e]-this.lefts[e]}getHeight(e){return this.bottoms[e]-this.tops[e]}similarTo(e){return mh(this.tops||[],e.tops||[])&&mh(this.bottoms||[],e.bottoms||[])&&mh(this.lefts||[],e.lefts||[])&&mh(this.rights||[],e.rights||[])}}function mh(t,e){const n=t.length;if(n!==e.length)return!1;for(let s=0;s<n;s++)if(Math.round(t[s])!==Math.round(e[s]))return!1;return!0}class uw{getMaxScrollTop(){return this.getScrollHeight()-this.getClientHeight()}getMaxScrollLeft(){return this.getScrollWidth()-this.getClientWidth()}canScrollVertically(){return this.getMaxScrollTop()>0}canScrollHorizontally(){return this.getMaxScrollLeft()>0}canScrollUp(){return this.getScrollTop()>0}canScrollDown(){return this.getScrollTop()<this.getMaxScrollTop()}canScrollLeft(){return this.getScrollLeft()>0}canScrollRight(){return this.getScrollLeft()<this.getMaxScrollLeft()}}class aG extends uw{constructor(e){super(),this.el=e}getScrollTop(){return this.el.scrollTop}getScrollLeft(){return this.el.scrollLeft}setScrollTop(e){this.el.scrollTop=e}setScrollLeft(e){this.el.scrollLeft=e}getScrollWidth(){return this.el.scrollWidth}getScrollHeight(){return this.el.scrollHeight}getClientHeight(){return this.el.clientHeight}getClientWidth(){return this.el.clientWidth}}class rG extends uw{getScrollTop(){return window.scrollY}getScrollLeft(){return window.scrollX}setScrollTop(e){window.scroll(window.scrollX,e)}setScrollLeft(e){window.scroll(e,window.scrollY)}getScrollWidth(){return document.documentElement.scrollWidth}getScrollHeight(){return document.documentElement.scrollHeight}getClientHeight(){return document.documentElement.clientHeight}getClientWidth(){return document.documentElement.clientWidth}}class Za extends jn{constructor(){super(...arguments),this.uid=So()}prepareHits(){}queryHit(e,n,s,a){return null}isValidSegDownEl(e){return!this.props.eventDrag&&!this.props.eventResize&&!Ii(e,".fc-event-mirror")}isValidDateDownEl(e){return!Ii(e,".fc-event:not(.fc-bg-event)")&&!Ii(e,".fc-more-link")&&!Ii(e,"a[data-navlink]")&&!Ii(e,".fc-popover")}}class KD{constructor(e=n=>n.thickness||1){this.getEntryThickness=e,this.strictOrder=!1,this.allowReslicing=!1,this.maxCoord=-1,this.maxStackCnt=-1,this.levelCoords=[],this.entriesByLevel=[],this.stackCnts={}}addSegs(e){let n=[];for(let s of e)this.insertEntry(s,n);return n}insertEntry(e,n){let s=this.findInsertion(e);this.isInsertionValid(s,e)?this.insertEntryAt(e,s):this.handleInvalidInsertion(s,e,n)}isInsertionValid(e,n){return(this.maxCoord===-1||e.levelCoord+this.getEntryThickness(n)<=this.maxCoord)&&(this.maxStackCnt===-1||e.stackCnt<this.maxStackCnt)}handleInvalidInsertion(e,n,s){if(this.allowReslicing&&e.touchingEntry){const a=Object.assign(Object.assign({},n),{span:hw(n.span,e.touchingEntry.span)});s.push(a),this.splitEntry(n,e.touchingEntry,s)}else s.push(n)}splitEntry(e,n,s){let a=e.span,l=n.span;a.start<l.start&&this.insertEntry({index:e.index,thickness:e.thickness,span:{start:a.start,end:l.start}},s),a.end>l.end&&this.insertEntry({index:e.index,thickness:e.thickness,span:{start:l.end,end:a.end}},s)}insertEntryAt(e,n){let{entriesByLevel:s,levelCoords:a}=this;n.lateral===-1?(Vv(a,n.level,n.levelCoord),Vv(s,n.level,[e])):Vv(s[n.level],n.lateral,e),this.stackCnts[Jl(e)]=n.stackCnt}findInsertion(e){let{levelCoords:n,entriesByLevel:s,strictOrder:a,stackCnts:l}=this,o=n.length,c=0,d=-1,m=-1,u=null,h=0;for(let v=0;v<o;v+=1){const x=n[v];if(!a&&x>=c+this.getEntryThickness(e))break;let y=s[v],b,k=by(y,e.span.start,yy),w=k[0]+k[1];for(;(b=y[w])&&b.span.start<e.span.end;){let T=x+this.getEntryThickness(b);T>c&&(c=T,u=b,d=v,m=w),T===c&&(h=Math.max(h,l[Jl(b)]+1)),w+=1}}let p=0;if(u)for(p=d+1;p<o&&n[p]<c;)p+=1;let g=-1;return p<o&&n[p]===c&&(g=by(s[p],e.span.end,yy)[0]),{touchingLevel:d,touchingLateral:m,touchingEntry:u,stackCnt:h,levelCoord:c,level:p,lateral:g}}toRects(){let{entriesByLevel:e,levelCoords:n}=this,s=e.length,a=[];for(let l=0;l<s;l+=1){let o=e[l],c=n[l];for(let d of o)a.push(Object.assign(Object.assign({},d),{thickness:this.getEntryThickness(d),levelCoord:c}))}return a}}function yy(t){return t.span.end}function Jl(t){return t.index+":"+t.span.start}function lG(t){let e=[];for(let n of t){let s=[],a={span:n.span,entries:[n]};for(let l of e)hw(l.span,a.span)?a={entries:l.entries.concat(a.entries),span:oG(l.span,a.span)}:s.push(l);s.push(a),e=s}return e}function oG(t,e){return{start:Math.min(t.start,e.start),end:Math.max(t.end,e.end)}}function hw(t,e){let n=Math.max(t.start,e.start),s=Math.min(t.end,e.end);return n<s?{start:n,end:s}:null}function Vv(t,e,n){t.splice(e,0,n)}function by(t,e,n){let s=0,a=t.length;if(!a||e<n(t[s]))return[0,0];if(e>n(t[a-1]))return[a,0];for(;s<a;){let l=Math.floor(s+(a-s)/2),o=n(t[l]);if(e<o)a=l;else if(e>o)s=l+1;else return[l,1]}return[s,0]}class cG{constructor(e,n){this.emitter=new Gg}destroy(){}setMirrorIsVisible(e){}setMirrorNeedsRevert(e){}setAutoScrollEnabled(e){}}const pw={};function dG(t,e){return!t||e>10?Vn({weekday:"short"}):e>1?Vn({weekday:"short",month:"numeric",day:"numeric",omitCommas:!0}):Vn({weekday:"long"})}const GD="fc-col-header-cell";function YD(t){return t.text}class mG extends jn{render(){let{dateEnv:e,options:n,theme:s,viewApi:a}=this.context,{props:l}=this,{date:o,dateProfile:c}=l,d=VD(o,l.todayRange,null,c),m=[GD].concat(dw(d,s)),u=e.format(o,l.dayHeaderFormat),h=!d.isDisabled&&l.colCnt>1?Gp(this.context,o):{},p=e.toDate(o);e.namedTimeZoneImpl&&(p=xl(p,36e5));let g=Object.assign(Object.assign(Object.assign({date:p,view:a},l.extraRenderProps),{text:u}),d);return we(Ps,{elTag:"th",elClasses:m,elAttrs:Object.assign({role:"columnheader",colSpan:l.colSpan,"data-date":d.isDisabled?void 0:Qk(o)},l.extraDataAttrs),renderProps:g,generatorName:"dayHeaderContent",customGenerator:n.dayHeaderContent,defaultGenerator:YD,classNameGenerator:n.dayHeaderClassNames,didMount:n.dayHeaderDidMount,willUnmount:n.dayHeaderWillUnmount},v=>we("div",{className:"fc-scrollgrid-sync-inner"},!d.isDisabled&&we(v,{elTag:"a",elAttrs:h,elClasses:["fc-col-header-cell-cushion",l.isSticky&&"fc-sticky"]})))}}const uG=Vn({weekday:"long"});class hG extends jn{render(){let{props:e}=this,{dateEnv:n,theme:s,viewApi:a,options:l}=this.context,o=vi(new Date(2592e5),e.dow),c={dow:e.dow,isDisabled:!1,isFuture:!1,isPast:!1,isToday:!1,isOther:!1},d=n.format(o,e.dayHeaderFormat),m=Object.assign(Object.assign(Object.assign(Object.assign({date:o},c),{view:a}),e.extraRenderProps),{text:d});return we(Ps,{elTag:"th",elClasses:[GD,...dw(c,s),...e.extraClassNames||[]],elAttrs:Object.assign({role:"columnheader",colSpan:e.colSpan},e.extraDataAttrs),renderProps:m,generatorName:"dayHeaderContent",customGenerator:l.dayHeaderContent,defaultGenerator:YD,classNameGenerator:l.dayHeaderClassNames,didMount:l.dayHeaderDidMount,willUnmount:l.dayHeaderWillUnmount},u=>we("div",{className:"fc-scrollgrid-sync-inner"},we(u,{elTag:"a",elClasses:["fc-col-header-cell-cushion",e.isSticky&&"fc-sticky"],elAttrs:{"aria-label":n.format(o,uG)}})))}}class QD extends jn{constructor(){super(...arguments),this.createDayHeaderFormatter=qt(pG)}render(){let{context:e}=this,{dates:n,dateProfile:s,datesRepDistinctDays:a,renderIntro:l}=this.props,o=this.createDayHeaderFormatter(e.options.dayHeaderFormat,a,n.length);return we(sd,{unit:"day"},(c,d)=>we("tr",{role:"row"},l&&l("day"),n.map(m=>a?we(mG,{key:m.toISOString(),date:m,dateProfile:s,todayRange:d,colCnt:n.length,dayHeaderFormat:o}):we(hG,{key:m.getUTCDay(),dow:m.getUTCDay(),dayHeaderFormat:o}))))}}function pG(t,e,n){return t||dG(e,n)}class ZD{constructor(e,n){let s=e.start,{end:a}=e,l=[],o=[],c=-1;for(;s<a;)n.isHiddenDay(s)?l.push(c+.5):(c+=1,l.push(c),o.push(s)),s=vi(s,1);this.dates=o,this.indices=l,this.cnt=o.length}sliceRange(e){let n=this.getDateDayIndex(e.start),s=this.getDateDayIndex(vi(e.end,-1)),a=Math.max(0,n),l=Math.min(this.cnt-1,s);return a=Math.ceil(a),l=Math.floor(l),a<=l?{firstIndex:a,lastIndex:l,isStart:n===a,isEnd:s===l}:null}getDateDayIndex(e){let{indices:n}=this,s=Math.floor(Eo(this.dates[0],e));return s<0?n[0]-1:s>=n.length?n[n.length-1]+1:n[s]}}class XD{constructor(e,n){let{dates:s}=e,a,l,o;if(n){for(l=s[0].getUTCDay(),a=1;a<s.length&&s[a].getUTCDay()!==l;a+=1);o=Math.ceil(s.length/a)}else o=1,a=s.length;this.rowCnt=o,this.colCnt=a,this.daySeries=e,this.cells=this.buildCells(),this.headerDates=this.buildHeaderDates()}buildCells(){let e=[];for(let n=0;n<this.rowCnt;n+=1){let s=[];for(let a=0;a<this.colCnt;a+=1)s.push(this.buildCell(n,a));e.push(s)}return e}buildCell(e,n){let s=this.daySeries.dates[e*this.colCnt+n];return{key:s.toISOString(),date:s}}buildHeaderDates(){let e=[];for(let n=0;n<this.colCnt;n+=1)e.push(this.cells[0][n].date);return e}sliceRange(e){let{colCnt:n}=this,s=this.daySeries.sliceRange(e),a=[];if(s){let{firstIndex:l,lastIndex:o}=s,c=l;for(;c<=o;){let d=Math.floor(c/n),m=Math.min((d+1)*n,o+1);a.push({row:d,firstCol:c%n,lastCol:(m-1)%n,isStart:s.isStart&&c===l,isEnd:s.isEnd&&m-1===o}),c=m}}return a}}class JD{constructor(){this.sliceBusinessHours=qt(this._sliceBusinessHours),this.sliceDateSelection=qt(this._sliceDateSpan),this.sliceEventStore=qt(this._sliceEventStore),this.sliceEventDrag=qt(this._sliceInteraction),this.sliceEventResize=qt(this._sliceInteraction),this.forceDayIfListItem=!1}sliceProps(e,n,s,a,...l){let{eventUiBases:o}=e,c=this.sliceEventStore(e.eventStore,o,n,s,...l);return{dateSelectionSegs:this.sliceDateSelection(e.dateSelection,n,s,o,a,...l),businessHourSegs:this.sliceBusinessHours(e.businessHours,n,s,a,...l),fgEventSegs:c.fg,bgEventSegs:c.bg,eventDrag:this.sliceEventDrag(e.eventDrag,o,n,s,...l),eventResize:this.sliceEventResize(e.eventResize,o,n,s,...l),eventSelection:e.eventSelection}}sliceNowDate(e,n,s,a,...l){return this._sliceDateSpan({range:{start:e,end:xl(e,1)},allDay:!1},n,s,{},a,...l)}_sliceBusinessHours(e,n,s,a,...l){return e?this._sliceEventStore(mo(e,uh(n,!!s),a),{},n,s,...l).bg:[]}_sliceEventStore(e,n,s,a,...l){if(e){let o=K1(e,n,uh(s,!!a),a);return{bg:this.sliceEventRanges(o.bg,l),fg:this.sliceEventRanges(o.fg,l)}}return{bg:[],fg:[]}}_sliceInteraction(e,n,s,a,...l){if(!e)return null;let o=K1(e.mutatedEvents,n,uh(s,!!a),a);return{segs:this.sliceEventRanges(o.fg,l),affectedInstances:e.affectedEvents.instances,isEvent:e.isEvent}}_sliceDateSpan(e,n,s,a,l,...o){if(!e)return[];let c=uh(n,!!s),d=co(e.range,c);if(d){e=Object.assign(Object.assign({},e),{range:d});let m=OK(e,a,l),u=this.sliceRange(e.range,...o);for(let h of u)h.eventRange=m;return u}return[]}sliceEventRanges(e,n){let s=[];for(let a of e)s.push(...this.sliceEventRange(a,n));return s}sliceEventRange(e,n){let s=e.range;this.forceDayIfListItem&&e.ui.display==="list-item"&&(s={start:s.start,end:vi(s.start,1)});let a=this.sliceRange(s,...n);for(let l of a)l.eventRange=e,l.isStart=e.isStart&&l.isStart,l.isEnd=e.isEnd&&l.isEnd;return a}}function uh(t,e){let n=t.activeRange;return e?n:{start:xl(n.start,t.slotMinTime.milliseconds),end:xl(n.end,t.slotMaxTime.milliseconds-864e5)}}function eR(t,e,n){let{instances:s}=t.mutatedEvents;for(let a in s)if(!Wg(e.validRange,s[a].range))return!1;return tR({eventDrag:t},n)}function gG(t,e,n){return Wg(e.validRange,t.range)?tR({dateSelection:t},n):!1}function tR(t,e){let n=e.getCurrentData(),s=Object.assign({businessHours:n.businessHours,dateSelection:"",eventStore:n.eventStore,eventUiBases:n.eventUiBases,eventSelection:"",eventDrag:null,eventResize:null},t);return(e.pluginHooks.isPropsValid||fG)(s,e)}function fG(t,e,n={},s){return!(t.eventDrag&&!vG(t,e,n,s)||t.dateSelection&&!xG(t,e,n,s))}function vG(t,e,n,s){let a=e.getCurrentData(),l=t.eventDrag,o=l.mutatedEvents,c=o.defs,d=o.instances,m=Kp(c,l.isEvent?t.eventUiBases:{"":a.selectionConfig});s&&(m=Tr(m,s));let u=pK(t.eventStore,l.affectedEvents.instances),h=u.defs,p=u.instances,g=Kp(h,t.eventUiBases);for(let v in d){let x=d[v],y=x.range,b=m[x.defId],k=c[x.defId];if(!nR(b.constraints,y,u,t.businessHours,e))return!1;let{eventOverlap:w}=e.options,T=typeof w=="function"?w:null;for(let D in p){let _=p[D];if(nw(y,_.range)&&(g[_.defId].overlap===!1&&l.isEvent||b.overlap===!1||T&&!T(new zn(e,h[_.defId],_),new zn(e,k,x))))return!1}let j=a.eventStore;for(let D of b.allows){let _=Object.assign(Object.assign({},n),{range:x.range,allDay:k.allDay}),N=j.defs[k.defId],A=j.instances[v],P;if(N?P=new zn(e,N,A):P=new zn(e,k),!D(lw(_,e),P))return!1}}return!0}function xG(t,e,n,s){let a=t.eventStore,l=a.defs,o=a.instances,c=t.dateSelection,d=c.range,{selectionConfig:m}=e.getCurrentData();if(s&&(m=s(m)),!nR(m.constraints,d,a,t.businessHours,e))return!1;let{selectOverlap:u}=e.options,h=typeof u=="function"?u:null;for(let p in o){let g=o[p];if(nw(d,g.range)&&(m.overlap===!1||h&&!h(new zn(e,l[g.defId],g),null)))return!1}for(let p of m.allows){let g=Object.assign(Object.assign({},n),c);if(!p(lw(g,e),null))return!1}return!0}function nR(t,e,n,s,a){for(let l of t)if(!bG(yG(l,e,n,s,a),e))return!1;return!0}function yG(t,e,n,s,a){return t==="businessHours"?Uv(mo(s,e,a)):typeof t=="string"?Uv(Kg(n,l=>l.groupId===t)):typeof t=="object"&&t?Uv(mo(t,e,a)):[]}function Uv(t){let{instances:e}=t,n=[];for(let s in e)n.push(e[s].range);return n}function bG(t,e){for(let n of t)if(Wg(n,e))return!0;return!1}const hh=/^(visible|hidden)$/;class kG extends jn{constructor(){super(...arguments),this.handleEl=e=>{this.el=e,Va(this.props.elRef,e)}}render(){let{props:e}=this,{liquid:n,liquidIsAbsolute:s}=e,a=n&&s,l=["fc-scroller"];return n&&(s?l.push("fc-scroller-liquid-absolute"):l.push("fc-scroller-liquid")),we("div",{ref:this.handleEl,className:l.join(" "),style:{overflowX:e.overflowX,overflowY:e.overflowY,left:a&&-(e.overcomeLeft||0)||"",right:a&&-(e.overcomeRight||0)||"",bottom:a&&-(e.overcomeBottom||0)||"",marginLeft:!a&&-(e.overcomeLeft||0)||"",marginRight:!a&&-(e.overcomeRight||0)||"",marginBottom:!a&&-(e.overcomeBottom||0)||"",maxHeight:e.maxHeight||""}},e.children)}needsXScrolling(){if(hh.test(this.props.overflowX))return!1;let{el:e}=this,n=this.el.getBoundingClientRect().width-this.getYScrollbarWidth(),{children:s}=e;for(let a=0;a<s.length;a+=1)if(s[a].getBoundingClientRect().width>n)return!0;return!1}needsYScrolling(){if(hh.test(this.props.overflowY))return!1;let{el:e}=this,n=this.el.getBoundingClientRect().height-this.getXScrollbarWidth(),{children:s}=e;for(let a=0;a<s.length;a+=1)if(s[a].getBoundingClientRect().height>n)return!0;return!1}getXScrollbarWidth(){return hh.test(this.props.overflowX)?0:this.el.offsetHeight-this.el.clientHeight}getYScrollbarWidth(){return hh.test(this.props.overflowY)?0:this.el.offsetWidth-this.el.clientWidth}}class gr{constructor(e){this.masterCallback=e,this.currentMap={},this.depths={},this.callbackMap={},this.handleValue=(n,s)=>{let{depths:a,currentMap:l}=this,o=!1,c=!1;n!==null?(o=s in l,l[s]=n,a[s]=(a[s]||0)+1,c=!0):(a[s]-=1,a[s]||(delete l[s],delete this.callbackMap[s],o=!0)),this.masterCallback&&(o&&this.masterCallback(null,String(s)),c&&this.masterCallback(n,String(s)))}}createRef(e){let n=this.callbackMap[e];return n||(n=this.callbackMap[e]=s=>{this.handleValue(s,String(e))}),n}collect(e,n,s){return PW(this.currentMap,e,n,s)}getAll(){return ew(this.currentMap)}}function wG(t){let e=DU(t,".fc-scrollgrid-shrink"),n=0;for(let s of e)n=Math.max(n,UU(s));return Math.ceil(n)}function iR(t,e){return t.liquid&&e.liquid}function jG(t,e){return e.maxHeight!=null||iR(t,e)}function NG(t,e,n,s){let{expandRows:a}=n;return typeof e.content=="function"?e.content(n):we("table",{role:"presentation",className:[e.tableClassName,t.syncRowHeights?"fc-scrollgrid-sync-table":""].join(" "),style:{minWidth:n.tableMinWidth,width:n.clientWidth,height:a?n.clientHeight:""}},n.tableColGroupNode,we(s?"thead":"tbody",{role:"presentation"},typeof e.rowContent=="function"?e.rowContent(n):e.rowContent))}function CG(t,e){return vl(t,e,ga)}function _G(t,e){let n=[];for(let s of t){let a=s.span||1;for(let l=0;l<a;l+=1)n.push(we("col",{style:{width:s.width==="shrink"?SG(e):s.width||"",minWidth:s.minWidth||""}}))}return we("colgroup",{},...n)}function SG(t){return t??4}function EG(t){for(let e of t)if(e.width==="shrink")return!0;return!1}function TG(t,e){let n=["fc-scrollgrid",e.theme.getClass("table")];return t&&n.push("fc-scrollgrid-liquid"),n}function AG(t,e){let n=["fc-scrollgrid-section",`fc-scrollgrid-section-${t.type}`,t.className];return e&&t.liquid&&t.maxHeight==null&&n.push("fc-scrollgrid-section-liquid"),t.isSticky&&n.push("fc-scrollgrid-section-sticky"),n}function ky(t){return we("div",{className:"fc-scrollgrid-sticky-shim",style:{width:t.clientWidth,minWidth:t.tableMinWidth}})}function Yp(t){let{stickyHeaderDates:e}=t;return(e==null||e==="auto")&&(e=t.height==="auto"||t.viewHeight==="auto"),e}function sR(t){let{stickyFooterScrollbar:e}=t;return(e==null||e==="auto")&&(e=t.height==="auto"||t.viewHeight==="auto"),e}class gw extends jn{constructor(){super(...arguments),this.processCols=qt(e=>e,CG),this.renderMicroColGroup=qt(_G),this.scrollerRefs=new gr,this.scrollerElRefs=new gr(this._handleScrollerEl.bind(this)),this.state={shrinkWidth:null,forceYScrollbars:!1,scrollerClientWidths:{},scrollerClientHeights:{}},this.handleSizing=()=>{this.safeSetState(Object.assign({shrinkWidth:this.computeShrinkWidth()},this.computeScrollerDims()))}}render(){let{props:e,state:n,context:s}=this,a=e.sections||[],l=this.processCols(e.cols),o=this.renderMicroColGroup(l,n.shrinkWidth),c=TG(e.liquid,s);e.collapsibleWidth&&c.push("fc-scrollgrid-collapsible");let d=a.length,m=0,u,h=[],p=[],g=[];for(;m<d&&(u=a[m]).type==="header";)h.push(this.renderSection(u,o,!0)),m+=1;for(;m<d&&(u=a[m]).type==="body";)p.push(this.renderSection(u,o,!1)),m+=1;for(;m<d&&(u=a[m]).type==="footer";)g.push(this.renderSection(u,o,!0)),m+=1;let v=!HD();const x={role:"rowgroup"};return we("table",{role:"grid",className:c.join(" "),style:{height:e.height}},!!(!v&&h.length)&&we("thead",x,...h),!!(!v&&p.length)&&we("tbody",x,...p),!!(!v&&g.length)&&we("tfoot",x,...g),v&&we("tbody",x,...h,...p,...g))}renderSection(e,n,s){return"outerContent"in e?we(In,{key:e.key},e.outerContent):we("tr",{key:e.key,role:"presentation",className:AG(e,this.props.liquid).join(" ")},this.renderChunkTd(e,n,e.chunk,s))}renderChunkTd(e,n,s,a){if("outerContent"in s)return s.outerContent;let{props:l}=this,{forceYScrollbars:o,scrollerClientWidths:c,scrollerClientHeights:d}=this.state,m=jG(l,e),u=iR(l,e),h=l.liquid?o?"scroll":m?"auto":"hidden":"visible",p=e.key,g=NG(e,s,{tableColGroupNode:n,tableMinWidth:"",clientWidth:!l.collapsibleWidth&&c[p]!==void 0?c[p]:null,clientHeight:d[p]!==void 0?d[p]:null,expandRows:e.expandRows,syncRowHeights:!1,rowSyncHeights:[],reportRowHeightChange:()=>{}},a);return we(a?"th":"td",{ref:s.elRef,role:"presentation"},we("div",{className:`fc-scroller-harness${u?" fc-scroller-harness-liquid":""}`},we(kG,{ref:this.scrollerRefs.createRef(p),elRef:this.scrollerElRefs.createRef(p),overflowY:h,overflowX:l.liquid?"hidden":"visible",maxHeight:e.maxHeight,liquid:u,liquidIsAbsolute:!0},g)))}_handleScrollerEl(e,n){let s=DG(this.props.sections,n);s&&Va(s.chunk.scrollerElRef,e)}componentDidMount(){this.handleSizing(),this.context.addResizeHandler(this.handleSizing)}componentDidUpdate(){this.handleSizing()}componentWillUnmount(){this.context.removeResizeHandler(this.handleSizing)}computeShrinkWidth(){return EG(this.props.cols)?wG(this.scrollerElRefs.getAll()):0}computeScrollerDims(){let e=eG(),{scrollerRefs:n,scrollerElRefs:s}=this,a=!1,l={},o={};for(let c in n.currentMap){let d=n.currentMap[c];if(d&&d.needsYScrolling()){a=!0;break}}for(let c of this.props.sections){let d=c.key,m=s.currentMap[d];if(m){let u=m.parentNode;l[d]=Math.floor(u.getBoundingClientRect().width-(a?e.y:0)),o[d]=Math.floor(u.getBoundingClientRect().height)}}return{forceYScrollbars:a,scrollerClientWidths:l,scrollerClientHeights:o}}}gw.addStateEquality({scrollerClientWidths:ga,scrollerClientHeights:ga});function DG(t,e){for(let n of t)if(n.key===e)return n;return null}class fw extends jn{constructor(){super(...arguments),this.buildPublicEvent=qt((e,n,s)=>new zn(e,n,s)),this.handleEl=e=>{this.el=e,Va(this.props.elRef,e),e&&G1(e,this.props.seg)}}render(){const{props:e,context:n}=this,{options:s}=n,{seg:a}=e,{eventRange:l}=a,{ui:o}=l,c={event:this.buildPublicEvent(n,l.def,l.instance),view:n.viewApi,timeText:e.timeText,textColor:o.textColor,backgroundColor:o.backgroundColor,borderColor:o.borderColor,isDraggable:!e.disableDragging&&_K(a,n),isStartResizable:!e.disableResizing&&SK(a,n),isEndResizable:!e.disableResizing&&EK(a),isMirror:!!(e.isDragging||e.isResizing||e.isDateSelecting),isStart:!!a.isStart,isEnd:!!a.isEnd,isPast:!!e.isPast,isFuture:!!e.isFuture,isToday:!!e.isToday,isSelected:!!e.isSelected,isDragging:!!e.isDragging,isResizing:!!e.isResizing};return we(Ps,{elRef:this.handleEl,elTag:e.elTag,elAttrs:e.elAttrs,elClasses:[...TK(c),...a.eventRange.ui.classNames,...e.elClasses||[]],elStyle:e.elStyle,renderProps:c,generatorName:"eventContent",customGenerator:s.eventContent,defaultGenerator:e.defaultGenerator,classNameGenerator:s.eventClassNames,didMount:s.eventDidMount,willUnmount:s.eventWillUnmount},e.children)}componentDidUpdate(e){this.el&&this.props.seg!==e.seg&&G1(this.el,this.props.seg)}}class vw extends jn{render(){let{props:e,context:n}=this,{options:s}=n,{seg:a}=e,{ui:l}=a.eventRange,o=s.eventTimeFormat||e.defaultTimeFormat,c=FD(a,o,n,e.defaultDisplayEventTime,e.defaultDisplayEventEnd);return we(fw,Object.assign({},e,{elTag:"a",elStyle:{borderColor:l.borderColor,backgroundColor:l.backgroundColor},elAttrs:$D(a,n),defaultGenerator:RG,timeText:c}),(d,m)=>we(In,null,we(d,{elTag:"div",elClasses:["fc-event-main"],elStyle:{color:m.textColor}}),!!m.isStartResizable&&we("div",{className:"fc-event-resizer fc-event-resizer-start"}),!!m.isEndResizable&&we("div",{className:"fc-event-resizer fc-event-resizer-end"})))}}vw.addPropsEquality({seg:ga});function RG(t){return we("div",{className:"fc-event-main-frame"},t.timeText&&we("div",{className:"fc-event-time"},t.timeText),we("div",{className:"fc-event-title-container"},we("div",{className:"fc-event-title fc-sticky"},t.event.title||we(In,null,""))))}const xw=t=>we(Or.Consumer,null,e=>{let{options:n}=e,s={isAxis:t.isAxis,date:e.dateEnv.toDate(t.date),view:e.viewApi};return we(Ps,{elRef:t.elRef,elTag:t.elTag||"div",elAttrs:t.elAttrs,elClasses:t.elClasses,elStyle:t.elStyle,renderProps:s,generatorName:"nowIndicatorContent",customGenerator:n.nowIndicatorContent,classNameGenerator:n.nowIndicatorClassNames,didMount:n.nowIndicatorDidMount,willUnmount:n.nowIndicatorWillUnmount},t.children)}),PG=Vn({day:"numeric"});class yw extends jn{constructor(){super(...arguments),this.refineRenderProps=qh(MG)}render(){let{props:e,context:n}=this,{options:s}=n,a=this.refineRenderProps({date:e.date,dateProfile:e.dateProfile,todayRange:e.todayRange,isMonthStart:e.isMonthStart||!1,showDayNumber:e.showDayNumber,extraRenderProps:e.extraRenderProps,viewApi:n.viewApi,dateEnv:n.dateEnv,monthStartFormat:s.monthStartFormat});return we(Ps,{elRef:e.elRef,elTag:e.elTag,elAttrs:Object.assign(Object.assign({},e.elAttrs),a.isDisabled?{}:{"data-date":Qk(e.date)}),elClasses:[...dw(a,n.theme),...e.elClasses||[]],elStyle:e.elStyle,renderProps:a,generatorName:"dayCellContent",customGenerator:s.dayCellContent,defaultGenerator:e.defaultGenerator,classNameGenerator:a.isDisabled?void 0:s.dayCellClassNames,didMount:s.dayCellDidMount,willUnmount:s.dayCellWillUnmount},e.children)}}function bw(t){return!!(t.dayCellContent||gy("dayCellContent",t))}function MG(t){let{date:e,dateEnv:n,dateProfile:s,isMonthStart:a}=t,l=VD(e,t.todayRange,null,s),o=t.showDayNumber?n.format(e,a?t.monthStartFormat:PG):"";return Object.assign(Object.assign(Object.assign({date:n.toDate(e),view:t.viewApi},l),{isMonthStart:a,dayNumberText:o}),t.extraRenderProps)}class aR extends jn{render(){let{props:e}=this,{seg:n}=e;return we(fw,{elTag:"div",elClasses:["fc-bg-event"],elStyle:{backgroundColor:n.eventRange.ui.backgroundColor},defaultGenerator:IG,seg:n,timeText:"",isDragging:!1,isResizing:!1,isDateSelecting:!1,isSelected:!1,isPast:e.isPast,isFuture:e.isFuture,isToday:e.isToday,disableDragging:!0,disableResizing:!0})}}function IG(t){let{title:e}=t.event;return e&&we("div",{className:"fc-event-title"},t.event.title)}function rR(t){return we("div",{className:`fc-${t}`})}const lR=t=>we(Or.Consumer,null,e=>{let{dateEnv:n,options:s}=e,{date:a}=t,l=s.weekNumberFormat||t.defaultFormat,o=n.computeWeekNumber(a),c=n.format(a,l),d={num:o,text:c,date:a};return we(Ps,{elRef:t.elRef,elTag:t.elTag,elAttrs:t.elAttrs,elClasses:t.elClasses,elStyle:t.elStyle,renderProps:d,generatorName:"weekNumberContent",customGenerator:s.weekNumberContent,defaultGenerator:OG,classNameGenerator:s.weekNumberClassNames,didMount:s.weekNumberDidMount,willUnmount:s.weekNumberWillUnmount},t.children)});function OG(t){return t.text}const Wv=10;class FG extends jn{constructor(){super(...arguments),this.state={titleId:Vg()},this.handleRootEl=e=>{this.rootEl=e,this.props.elRef&&Va(this.props.elRef,e)},this.handleDocumentMouseDown=e=>{const n=dD(e);this.rootEl.contains(n)||this.handleCloseClick()},this.handleDocumentKeyDown=e=>{e.key==="Escape"&&this.handleCloseClick()},this.handleCloseClick=()=>{let{onClose:e}=this.props;e&&e()}}render(){let{theme:e,options:n}=this.context,{props:s,state:a}=this,l=["fc-popover",e.getClass("popover")].concat(s.extraClassNames||[]);return vU(we("div",Object.assign({},s.extraAttrs,{id:s.id,className:l.join(" "),"aria-labelledby":a.titleId,ref:this.handleRootEl}),we("div",{className:"fc-popover-header "+e.getClass("popoverHeader")},we("span",{className:"fc-popover-title",id:a.titleId},s.title),we("span",{className:"fc-popover-close "+e.getIconClass("close"),title:n.closeHint,onClick:this.handleCloseClick})),we("div",{className:"fc-popover-body "+e.getClass("popoverContent")},s.children)),s.parentEl)}componentDidMount(){document.addEventListener("mousedown",this.handleDocumentMouseDown),document.addEventListener("keydown",this.handleDocumentKeyDown),this.updateSize()}componentWillUnmount(){document.removeEventListener("mousedown",this.handleDocumentMouseDown),document.removeEventListener("keydown",this.handleDocumentKeyDown)}updateSize(){let{isRtl:e}=this.context,{alignmentEl:n,alignGridTop:s}=this.props,{rootEl:a}=this,l=sG(n);if(l){let o=a.getBoundingClientRect(),c=s?Ii(n,".fc-scrollgrid").getBoundingClientRect().top:l.top,d=e?l.right-o.width:l.left;c=Math.max(c,Wv),d=Math.min(d,document.documentElement.clientWidth-Wv-o.width),d=Math.max(d,Wv);let m=a.offsetParent.getBoundingClientRect();am(a,{top:c-m.top,left:d-m.left})}}}class LG extends Za{constructor(){super(...arguments),this.handleRootEl=e=>{this.rootEl=e,e?this.context.registerInteractiveComponent(this,{el:e,useEventCenter:!1}):this.context.unregisterInteractiveComponent(this)}}render(){let{options:e,dateEnv:n}=this.context,{props:s}=this,{startDate:a,todayRange:l,dateProfile:o}=s,c=n.format(a,e.dayPopoverFormat);return we(yw,{elRef:this.handleRootEl,date:a,dateProfile:o,todayRange:l},(d,m,u)=>we(FG,{elRef:u.ref,id:s.id,title:c,extraClassNames:["fc-more-popover"].concat(u.className||[]),extraAttrs:u,parentEl:s.parentEl,alignmentEl:s.alignmentEl,alignGridTop:s.alignGridTop,onClose:s.onClose},bw(e)&&we(d,{elTag:"div",elClasses:["fc-more-popover-misc"]}),s.children))}queryHit(e,n,s,a){let{rootEl:l,props:o}=this;return e>=0&&e<s&&n>=0&&n<a?{dateProfile:o.dateProfile,dateSpan:Object.assign({allDay:!o.forceTimed,range:{start:o.startDate,end:o.endDate}},o.extraDateSpan),dayEl:l,rect:{left:0,top:0,right:s,bottom:a},layer:1}:null}}class oR extends jn{constructor(){super(...arguments),this.state={isPopoverOpen:!1,popoverId:Vg()},this.handleLinkEl=e=>{this.linkEl=e,this.props.elRef&&Va(this.props.elRef,e)},this.handleClick=e=>{let{props:n,context:s}=this,{moreLinkClick:a}=s.options,l=Q1(n).start;function o(c){let{def:d,instance:m,range:u}=c.eventRange;return{event:new zn(s,d,m),start:s.dateEnv.toDate(u.start),end:s.dateEnv.toDate(u.end),isStart:c.isStart,isEnd:c.isEnd}}typeof a=="function"&&(a=a({date:l,allDay:!!n.allDayDate,allSegs:n.allSegs.map(o),hiddenSegs:n.hiddenSegs.map(o),jsEvent:e,view:s.viewApi})),!a||a==="popover"?this.setState({isPopoverOpen:!0}):typeof a=="string"&&s.calendarApi.zoomTo(l,a)},this.handlePopoverClose=()=>{this.setState({isPopoverOpen:!1})}}render(){let{props:e,state:n}=this;return we(Or.Consumer,null,s=>{let{viewApi:a,options:l,calendarApi:o}=s,{moreLinkText:c}=l,{moreCnt:d}=e,m=Q1(e),u=typeof c=="function"?c.call(o,d):`+${d} ${c}`,h=rm(l.moreLinkHint,[d],u),p={num:d,shortText:`+${d}`,text:u,view:a};return we(In,null,!!e.moreCnt&&we(Ps,{elTag:e.elTag||"a",elRef:this.handleLinkEl,elClasses:[...e.elClasses||[],"fc-more-link"],elStyle:e.elStyle,elAttrs:Object.assign(Object.assign(Object.assign({},e.elAttrs),uD(this.handleClick)),{title:h,"aria-expanded":n.isPopoverOpen,"aria-controls":n.isPopoverOpen?n.popoverId:""}),renderProps:p,generatorName:"moreLinkContent",customGenerator:l.moreLinkContent,defaultGenerator:e.defaultGenerator||$G,classNameGenerator:l.moreLinkClassNames,didMount:l.moreLinkDidMount,willUnmount:l.moreLinkWillUnmount},e.children),n.isPopoverOpen&&we(LG,{id:n.popoverId,startDate:m.start,endDate:m.end,dateProfile:e.dateProfile,todayRange:e.todayRange,extraDateSpan:e.extraDateSpan,parentEl:this.parentEl,alignmentEl:e.alignmentElRef?e.alignmentElRef.current:this.linkEl,alignGridTop:e.alignGridTop,forceTimed:e.forceTimed,onClose:this.handlePopoverClose},e.popoverContent()))})}componentDidMount(){this.updateParentEl()}componentDidUpdate(){this.updateParentEl()}updateParentEl(){this.linkEl&&(this.parentEl=Ii(this.linkEl,".fc-view-harness"))}}function $G(t){return t.text}function Q1(t){if(t.allDayDate)return{start:t.allDayDate,end:vi(t.allDayDate,1)};let{hiddenSegs:e}=t;return{start:cR(e),end:qG(e)}}function cR(t){return t.reduce(BG).eventRange.range.start}function BG(t,e){return t.eventRange.range.start<e.eventRange.range.start?t:e}function qG(t){return t.reduce(HG).eventRange.range.end}function HG(t,e){return t.eventRange.range.end>e.eventRange.range.end?t:e}class zG{constructor(){this.handlers=[]}set(e){this.currentValue=e;for(let n of this.handlers)n(e)}subscribe(e){this.handlers.push(e),this.currentValue!==void 0&&e(this.currentValue)}}class VG extends zG{constructor(){super(...arguments),this.map=new Map}handle(e){const{map:n}=this;let s=!1;e.isActive?(n.set(e.id,e),s=!0):n.has(e.id)&&(n.delete(e.id),s=!0),s&&this.set(n)}}const UG=[],dR={code:"en",week:{dow:0,doy:4},direction:"ltr",buttonText:{prev:"prev",next:"next",prevYear:"prev year",nextYear:"next year",year:"year",today:"today",month:"month",week:"week",day:"day",list:"list"},weekText:"W",weekTextLong:"Week",closeHint:"Close",timeHint:"Time",eventHint:"Event",allDayText:"all-day",moreLinkText:"more",noEventsText:"No events to display"},mR=Object.assign(Object.assign({},dR),{buttonHints:{prev:"Previous $0",next:"Next $0",today(t,e){return e==="day"?"Today":`This ${t}`}},viewHint:"$0 view",navLinkHint:"Go to $0",moreLinkHint(t){return`Show ${t} more event${t===1?"":"s"}`}});function WG(t){let e=t.length>0?t[0].code:"en",n=UG.concat(t),s={en:mR};for(let a of n)s[a.code]=a;return{map:s,defaultCode:e}}function uR(t,e){return typeof t=="object"&&!Array.isArray(t)?hR(t.code,[t.code],t):KG(t,e)}function KG(t,e){let n=[].concat(t||[]),s=GG(n,e)||mR;return hR(t,n,s)}function GG(t,e){for(let n=0;n<t.length;n+=1){let s=t[n].toLocaleLowerCase().split("-");for(let a=s.length;a>0;a-=1){let l=s.slice(0,a).join("-");if(e[l])return e[l]}}return null}function hR(t,e,n){let s=Jk([dR,n],["buttonText"]);delete s.code;let{week:a}=s;return delete s.week,{codeArg:t,codes:e,week:a,simpleNumberFormat:new Intl.NumberFormat(t),options:s}}function Fr(t){return{id:So(),name:t.name,premiumReleaseDate:t.premiumReleaseDate?new Date(t.premiumReleaseDate):void 0,deps:t.deps||[],reducers:t.reducers||[],isLoadingFuncs:t.isLoadingFuncs||[],contextInit:[].concat(t.contextInit||[]),eventRefiners:t.eventRefiners||{},eventDefMemberAdders:t.eventDefMemberAdders||[],eventSourceRefiners:t.eventSourceRefiners||{},isDraggableTransformers:t.isDraggableTransformers||[],eventDragMutationMassagers:t.eventDragMutationMassagers||[],eventDefMutationAppliers:t.eventDefMutationAppliers||[],dateSelectionTransformers:t.dateSelectionTransformers||[],datePointTransforms:t.datePointTransforms||[],dateSpanTransforms:t.dateSpanTransforms||[],views:t.views||{},viewPropsTransformers:t.viewPropsTransformers||[],isPropsValid:t.isPropsValid||null,externalDefTransforms:t.externalDefTransforms||[],viewContainerAppends:t.viewContainerAppends||[],eventDropTransformers:t.eventDropTransformers||[],componentInteractions:t.componentInteractions||[],calendarInteractions:t.calendarInteractions||[],themeClasses:t.themeClasses||{},eventSourceDefs:t.eventSourceDefs||[],cmdFormatter:t.cmdFormatter,recurringTypes:t.recurringTypes||[],namedTimeZonedImpl:t.namedTimeZonedImpl,initialView:t.initialView||"",elementDraggingImpl:t.elementDraggingImpl,optionChangeHandlers:t.optionChangeHandlers||{},scrollGridImpl:t.scrollGridImpl||null,listenerRefiners:t.listenerRefiners||{},optionRefiners:t.optionRefiners||{},propSetHandlers:t.propSetHandlers||{}}}function YG(t,e){let n={},s={premiumReleaseDate:void 0,reducers:[],isLoadingFuncs:[],contextInit:[],eventRefiners:{},eventDefMemberAdders:[],eventSourceRefiners:{},isDraggableTransformers:[],eventDragMutationMassagers:[],eventDefMutationAppliers:[],dateSelectionTransformers:[],datePointTransforms:[],dateSpanTransforms:[],views:{},viewPropsTransformers:[],isPropsValid:null,externalDefTransforms:[],viewContainerAppends:[],eventDropTransformers:[],componentInteractions:[],calendarInteractions:[],themeClasses:{},eventSourceDefs:[],cmdFormatter:null,recurringTypes:[],namedTimeZonedImpl:null,initialView:"",elementDraggingImpl:null,optionChangeHandlers:{},scrollGridImpl:null,listenerRefiners:{},optionRefiners:{},propSetHandlers:{}};function a(l){for(let o of l){const c=o.name,d=n[c];d===void 0?(n[c]=o.id,a(o.deps),s=ZG(s,o)):d!==o.id&&console.warn(`Duplicate plugin '${c}'`)}}return t&&a(t),a(e),s}function QG(){let t=[],e=[],n;return(s,a)=>((!n||!vl(s,t)||!vl(a,e))&&(n=YG(s,a)),t=s,e=a,n)}function ZG(t,e){return{premiumReleaseDate:XG(t.premiumReleaseDate,e.premiumReleaseDate),reducers:t.reducers.concat(e.reducers),isLoadingFuncs:t.isLoadingFuncs.concat(e.isLoadingFuncs),contextInit:t.contextInit.concat(e.contextInit),eventRefiners:Object.assign(Object.assign({},t.eventRefiners),e.eventRefiners),eventDefMemberAdders:t.eventDefMemberAdders.concat(e.eventDefMemberAdders),eventSourceRefiners:Object.assign(Object.assign({},t.eventSourceRefiners),e.eventSourceRefiners),isDraggableTransformers:t.isDraggableTransformers.concat(e.isDraggableTransformers),eventDragMutationMassagers:t.eventDragMutationMassagers.concat(e.eventDragMutationMassagers),eventDefMutationAppliers:t.eventDefMutationAppliers.concat(e.eventDefMutationAppliers),dateSelectionTransformers:t.dateSelectionTransformers.concat(e.dateSelectionTransformers),datePointTransforms:t.datePointTransforms.concat(e.datePointTransforms),dateSpanTransforms:t.dateSpanTransforms.concat(e.dateSpanTransforms),views:Object.assign(Object.assign({},t.views),e.views),viewPropsTransformers:t.viewPropsTransformers.concat(e.viewPropsTransformers),isPropsValid:e.isPropsValid||t.isPropsValid,externalDefTransforms:t.externalDefTransforms.concat(e.externalDefTransforms),viewContainerAppends:t.viewContainerAppends.concat(e.viewContainerAppends),eventDropTransformers:t.eventDropTransformers.concat(e.eventDropTransformers),calendarInteractions:t.calendarInteractions.concat(e.calendarInteractions),componentInteractions:t.componentInteractions.concat(e.componentInteractions),themeClasses:Object.assign(Object.assign({},t.themeClasses),e.themeClasses),eventSourceDefs:t.eventSourceDefs.concat(e.eventSourceDefs),cmdFormatter:e.cmdFormatter||t.cmdFormatter,recurringTypes:t.recurringTypes.concat(e.recurringTypes),namedTimeZonedImpl:e.namedTimeZonedImpl||t.namedTimeZonedImpl,initialView:t.initialView||e.initialView,elementDraggingImpl:t.elementDraggingImpl||e.elementDraggingImpl,optionChangeHandlers:Object.assign(Object.assign({},t.optionChangeHandlers),e.optionChangeHandlers),scrollGridImpl:e.scrollGridImpl||t.scrollGridImpl,listenerRefiners:Object.assign(Object.assign({},t.listenerRefiners),e.listenerRefiners),optionRefiners:Object.assign(Object.assign({},t.optionRefiners),e.optionRefiners),propSetHandlers:Object.assign(Object.assign({},t.propSetHandlers),e.propSetHandlers)}}function XG(t,e){return t===void 0?e:e===void 0?t:new Date(Math.max(t.valueOf(),e.valueOf()))}class Cl extends su{}Cl.prototype.classes={root:"fc-theme-standard",tableCellShaded:"fc-cell-shaded",buttonGroup:"fc-button-group",button:"fc-button fc-button-primary",buttonActive:"fc-button-active"};Cl.prototype.baseIconClass="fc-icon";Cl.prototype.iconClasses={close:"fc-icon-x",prev:"fc-icon-chevron-left",next:"fc-icon-chevron-right",prevYear:"fc-icon-chevrons-left",nextYear:"fc-icon-chevrons-right"};Cl.prototype.rtlIconClasses={prev:"fc-icon-chevron-right",next:"fc-icon-chevron-left",prevYear:"fc-icon-chevrons-right",nextYear:"fc-icon-chevrons-left"};Cl.prototype.iconOverrideOption="buttonIcons";Cl.prototype.iconOverrideCustomButtonOption="icon";Cl.prototype.iconOverridePrefix="fc-icon-";function JG(t,e){let n={},s;for(s in t)wy(s,n,t,e);for(s in e)wy(s,n,t,e);return n}function wy(t,e,n,s){if(e[t])return e[t];let a=eY(t,e,n,s);return a&&(e[t]=a),a}function eY(t,e,n,s){let a=n[t],l=s[t],o=u=>a&&a[u]!==null?a[u]:l&&l[u]!==null?l[u]:null,c=o("component"),d=o("superType"),m=null;if(d){if(d===t)throw new Error("Can't have a custom view type that references itself");m=wy(d,e,n,s)}return!c&&m&&(c=m.component),c?{type:t,component:c,defaults:Object.assign(Object.assign({},m?m.defaults:{}),a?a.rawOptions:{}),overrides:Object.assign(Object.assign({},m?m.overrides:{}),l?l.rawOptions:{})}:null}function Z1(t){return Tr(t,tY)}function tY(t){let e=typeof t=="function"?{component:t}:t,{component:n}=e;return e.content?n=X1(e):n&&!(n.prototype instanceof jn)&&(n=X1(Object.assign(Object.assign({},e),{content:n}))),{superType:e.type,component:n,rawOptions:e}}function X1(t){return e=>we(Or.Consumer,null,n=>we(Ps,{elTag:"div",elClasses:kD(n.viewSpec),renderProps:Object.assign(Object.assign({},e),{nextDayThreshold:n.options.nextDayThreshold}),generatorName:void 0,customGenerator:t.content,classNameGenerator:t.classNames,didMount:t.didMount,willUnmount:t.willUnmount}))}function nY(t,e,n,s){let a=Z1(t),l=Z1(e.views),o=JG(a,l);return Tr(o,c=>iY(c,l,e,n,s))}function iY(t,e,n,s,a){let l=t.overrides.duration||t.defaults.duration||s.duration||n.duration,o=null,c="",d="",m={};if(l&&(o=sY(l),o)){let p=py(o);c=p.unit,p.value===1&&(d=c,m=e[c]?e[c].rawOptions:{})}let u=p=>{let g=p.buttonText||{},v=t.defaults.buttonTextKey;return v!=null&&g[v]!=null?g[v]:g[t.type]!=null?g[t.type]:g[d]!=null?g[d]:null},h=p=>{let g=p.buttonHints||{},v=t.defaults.buttonTextKey;return v!=null&&g[v]!=null?g[v]:g[t.type]!=null?g[t.type]:g[d]!=null?g[d]:null};return{type:t.type,component:t.component,duration:o,durationUnit:c,singleUnit:d,optionDefaults:t.defaults,optionOverrides:Object.assign(Object.assign({},m),t.overrides),buttonTextOverride:u(s)||u(n)||t.overrides.buttonText,buttonTextDefault:u(a)||t.defaults.buttonText||u(lm)||t.type,buttonTitleOverride:h(s)||h(n)||t.overrides.buttonHint,buttonTitleDefault:h(a)||t.defaults.buttonHint||h(lm)}}let J1={};function sY(t){let e=JSON.stringify(t),n=J1[e];return n===void 0&&(n=Jt(t),J1[e]=n),n}function aY(t,e){switch(e.type){case"CHANGE_VIEW_TYPE":t=e.viewType}return t}function rY(t,e){switch(e.type){case"CHANGE_DATE":return e.dateMarker;default:return t}}function lY(t,e,n){let s=t.initialDate;return s!=null?e.createMarker(s):n.getDateMarker()}function oY(t,e){switch(e.type){case"SET_OPTION":return Object.assign(Object.assign({},t),{[e.optionName]:e.rawOptionValue});default:return t}}function cY(t,e,n,s){let a;switch(e.type){case"CHANGE_VIEW_TYPE":return s.build(e.dateMarker||n);case"CHANGE_DATE":return s.build(e.dateMarker);case"PREV":if(a=s.buildPrev(t,n),a.isValid)return a;break;case"NEXT":if(a=s.buildNext(t,n),a.isValid)return a;break}return t}function dY(t,e,n){let s=e?e.activeRange:null;return gR({},vY(t,n),s,n)}function mY(t,e,n,s){let a=n?n.activeRange:null;switch(e.type){case"ADD_EVENT_SOURCES":return gR(t,e.sources,a,s);case"REMOVE_EVENT_SOURCE":return hY(t,e.sourceId);case"PREV":case"NEXT":case"CHANGE_DATE":case"CHANGE_VIEW_TYPE":return n?fR(t,a,s):t;case"FETCH_EVENT_SOURCES":return kw(t,e.sourceIds?fD(e.sourceIds):vR(t,s),a,e.isRefetch||!1,s);case"RECEIVE_EVENTS":case"RECEIVE_EVENT_ERROR":return fY(t,e.sourceId,e.fetchId,e.fetchRange);case"REMOVE_ALL_EVENT_SOURCES":return{};default:return t}}function uY(t,e,n){let s=e?e.activeRange:null;return kw(t,vR(t,n),s,!0,n)}function pR(t){for(let e in t)if(t[e].isFetching)return!0;return!1}function gR(t,e,n,s){let a={};for(let l of e)a[l.sourceId]=l;return n&&(a=fR(a,n,s)),Object.assign(Object.assign({},t),a)}function hY(t,e){return oo(t,n=>n.sourceId!==e)}function fR(t,e,n){return kw(t,oo(t,s=>pY(s,e,n)),e,!1,n)}function pY(t,e,n){return xR(t,n)?!n.options.lazyFetching||!t.fetchRange||t.isFetching||e.start<t.fetchRange.start||e.end>t.fetchRange.end:!t.latestFetchId}function kw(t,e,n,s,a){let l={};for(let o in t){let c=t[o];e[o]?l[o]=gY(c,n,s,a):l[o]=c}return l}function gY(t,e,n,s){let{options:a,calendarApi:l}=s,o=s.pluginHooks.eventSourceDefs[t.sourceDefId],c=So();return o.fetch({eventSource:t,range:e,isRefetch:n,context:s},d=>{let{rawEvents:m}=d;a.eventSourceSuccess&&(m=a.eventSourceSuccess.call(l,m,d.response)||m),t.success&&(m=t.success.call(l,m,d.response)||m),s.dispatch({type:"RECEIVE_EVENTS",sourceId:t.sourceId,fetchId:c,fetchRange:e,rawEvents:m})},d=>{let m=!1;a.eventSourceFailure&&(a.eventSourceFailure.call(l,d),m=!0),t.failure&&(t.failure(d),m=!0),m||console.warn(d.message,d),s.dispatch({type:"RECEIVE_EVENT_ERROR",sourceId:t.sourceId,fetchId:c,fetchRange:e,error:d})}),Object.assign(Object.assign({},t),{isFetching:!0,latestFetchId:c})}function fY(t,e,n,s){let a=t[e];return a&&n===a.latestFetchId?Object.assign(Object.assign({},t),{[e]:Object.assign(Object.assign({},a),{isFetching:!1,fetchRange:s})}):t}function vR(t,e){return oo(t,n=>xR(n,e))}function vY(t,e){let n=AD(e),s=[].concat(t.eventSources||[]),a=[];t.initialEvents&&s.unshift(t.initialEvents),t.events&&s.unshift(t.events);for(let l of s){let o=TD(l,e,n);o&&a.push(o)}return a}function xR(t,e){return!e.pluginHooks.eventSourceDefs[t.sourceDefId].ignoreRange}function xY(t,e){switch(e.type){case"UNSELECT_DATES":return null;case"SELECT_DATES":return e.selection;default:return t}}function yY(t,e){switch(e.type){case"UNSELECT_EVENT":return"";case"SELECT_EVENT":return e.eventInstanceId;default:return t}}function bY(t,e){let n;switch(e.type){case"UNSET_EVENT_DRAG":return null;case"SET_EVENT_DRAG":return n=e.state,{affectedEvents:n.affectedEvents,mutatedEvents:n.mutatedEvents,isEvent:n.isEvent};default:return t}}function kY(t,e){let n;switch(e.type){case"UNSET_EVENT_RESIZE":return null;case"SET_EVENT_RESIZE":return n=e.state,{affectedEvents:n.affectedEvents,mutatedEvents:n.mutatedEvents,isEvent:n.isEvent};default:return t}}function wY(t,e,n,s,a){let l=t.headerToolbar?eC(t.headerToolbar,t,e,n,s,a):null,o=t.footerToolbar?eC(t.footerToolbar,t,e,n,s,a):null;return{header:l,footer:o}}function eC(t,e,n,s,a,l){let o={},c=[],d=!1;for(let m in t){let u=t[m],h=jY(u,e,n,s,a,l);o[m]=h.widgets,c.push(...h.viewsWithButtons),d=d||h.hasTitle}return{sectionWidgets:o,viewsWithButtons:c,hasTitle:d}}function jY(t,e,n,s,a,l){let o=e.direction==="rtl",c=e.customButtons||{},d=n.buttonText||{},m=e.buttonText||{},u=n.buttonHints||{},h=e.buttonHints||{},p=t?t.split(" "):[],g=[],v=!1;return{widgets:p.map(y=>y.split(",").map(b=>{if(b==="title")return v=!0,{buttonName:b};let k,w,T,j,D,_;if(k=c[b])T=N=>{k.click&&k.click.call(N.target,N,N.target)},(j=s.getCustomButtonIconClass(k))||(j=s.getIconClass(b,o))||(D=k.text),_=k.hint||k.text;else if(w=a[b]){g.push(b),T=()=>{l.changeView(b)},(D=w.buttonTextOverride)||(j=s.getIconClass(b,o))||(D=w.buttonTextDefault);let N=w.buttonTextOverride||w.buttonTextDefault;_=rm(w.buttonTitleOverride||w.buttonTitleDefault||e.viewHint,[N,b],N)}else if(l[b])if(T=()=>{l[b]()},(D=d[b])||(j=s.getIconClass(b,o))||(D=m[b]),b==="prevYear"||b==="nextYear"){let N=b==="prevYear"?"prev":"next";_=rm(u[N]||h[N],[m.year||"year","year"],m[b])}else _=N=>rm(u[b]||h[b],[m[N]||N,N],m[b]);return{buttonName:b,buttonClick:T,buttonIcon:j,buttonText:D,buttonHint:_}})),viewsWithButtons:g,hasTitle:v}}class NY{constructor(e,n,s){this.type=e,this.getCurrentData=n,this.dateEnv=s}get calendar(){return this.getCurrentData().calendarApi}get title(){return this.getCurrentData().viewTitle}get activeStart(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.activeRange.start)}get activeEnd(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.activeRange.end)}get currentStart(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.currentRange.start)}get currentEnd(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.currentRange.end)}getOption(e){return this.getCurrentData().options[e]}}let CY={ignoreRange:!0,parseMeta(t){return Array.isArray(t.events)?t.events:null},fetch(t,e){e({rawEvents:t.eventSource.meta})}};const _Y=Fr({name:"array-event-source",eventSourceDefs:[CY]});let SY={parseMeta(t){return typeof t.events=="function"?t.events:null},fetch(t,e,n){const{dateEnv:s}=t.context,a=t.eventSource.meta;FK(a.bind(null,BD(t.range,s)),l=>e({rawEvents:l}),n)}};const EY=Fr({name:"func-event-source",eventSourceDefs:[SY]}),TY={method:String,extraParams:Me,startParam:String,endParam:String,timeZoneParam:String};let AY={parseMeta(t){return t.url&&(t.format==="json"||!t.format)?{url:t.url,format:"json",method:(t.method||"GET").toUpperCase(),extraParams:t.extraParams,startParam:t.startParam,endParam:t.endParam,timeZoneParam:t.timeZoneParam}:null},fetch(t,e,n){const{meta:s}=t.eventSource,a=RY(s,t.range,t.context);LK(s.method,s.url,a).then(([l,o])=>{e({rawEvents:l,response:o})},n)}};const DY=Fr({name:"json-event-source",eventSourceRefiners:TY,eventSourceDefs:[AY]});function RY(t,e,n){let{dateEnv:s,options:a}=n,l,o,c,d,m={};return l=t.startParam,l==null&&(l=a.startParam),o=t.endParam,o==null&&(o=a.endParam),c=t.timeZoneParam,c==null&&(c=a.timeZoneParam),typeof t.extraParams=="function"?d=t.extraParams():d=t.extraParams||{},Object.assign(m,d),m[l]=s.formatIso(e.start),m[o]=s.formatIso(e.end),s.timeZone!=="local"&&(m[c]=s.timeZone),m}const PY={daysOfWeek:Me,startTime:Jt,endTime:Jt,duration:Jt,startRecur:Me,endRecur:Me};let MY={parse(t,e){if(t.daysOfWeek||t.startTime||t.endTime||t.startRecur||t.endRecur){let n={daysOfWeek:t.daysOfWeek||null,startTime:t.startTime||null,endTime:t.endTime||null,startRecur:t.startRecur?e.createMarker(t.startRecur):null,endRecur:t.endRecur?e.createMarker(t.endRecur):null,dateEnv:e},s;return t.duration&&(s=t.duration),!s&&t.startTime&&t.endTime&&(s=YU(t.endTime,t.startTime)),{allDayGuess:!t.startTime&&!t.endTime,duration:s,typeData:n}}return null},expand(t,e,n){let s=co(e,{start:t.startRecur,end:t.endRecur});return s?OY(t.daysOfWeek,t.startTime,t.dateEnv,n,s):[]}};const IY=Fr({name:"simple-recurring-event",recurringTypes:[MY],eventRefiners:PY});function OY(t,e,n,s,a){let l=t?fD(t):null,o=On(a.start),c=a.end,d=[];for(e&&(e.milliseconds<0?c=vi(c,1):e.milliseconds>=1e3*60*60*24&&(o=vi(o,-1)));o<c;){let m;(!l||l[o.getUTCDay()])&&(e?m=s.add(o,e):m=o,d.push(s.createMarker(n.toDate(m)))),o=vi(o,1)}return d}const FY=Fr({name:"change-handler",optionChangeHandlers:{events(t,e){tC([t],e)},eventSources:tC}});function tC(t,e){let n=ew(e.getCurrentData().eventSources);if(n.length===1&&t.length===1&&Array.isArray(n[0]._raw)&&Array.isArray(t[0])){e.dispatch({type:"RESET_RAW_EVENTS",sourceId:n[0].sourceId,rawEvents:t[0]});return}let s=[];for(let a of t){let l=!1;for(let o=0;o<n.length;o+=1)if(n[o]._raw===a){n.splice(o,1),l=!0;break}l||s.push(a)}for(let a of n)e.dispatch({type:"REMOVE_EVENT_SOURCE",sourceId:a.sourceId});for(let a of s)e.calendarApi.addEventSource(a)}function LY(t,e){e.emitter.trigger("datesSet",Object.assign(Object.assign({},BD(t.activeRange,e.dateEnv)),{view:e.viewApi}))}function $Y(t,e){let{emitter:n}=e;n.hasHandlers("eventsSet")&&n.trigger("eventsSet",Xl(t,e))}const BY=[_Y,EY,DY,IY,FY,Fr({name:"misc",isLoadingFuncs:[t=>pR(t.eventSources)],propSetHandlers:{dateProfile:LY,eventStore:$Y}})];class qY{constructor(e,n){this.runTaskOption=e,this.drainedOption=n,this.queue=[],this.delayedRunner=new Uk(this.drain.bind(this))}request(e,n){this.queue.push(e),this.delayedRunner.request(n)}pause(e){this.delayedRunner.pause(e)}resume(e,n){this.delayedRunner.resume(e,n)}drain(){let{queue:e}=this;for(;e.length;){let n=[],s;for(;s=e.shift();)this.runTask(s),n.push(s);this.drained(n)}}runTask(e){this.runTaskOption&&this.runTaskOption(e)}drained(e){this.drainedOption&&this.drainedOption(e)}}function HY(t,e,n){let s;return/^(year|month)$/.test(t.currentRangeUnit)?s=t.currentRange:s=t.activeRange,n.formatRange(s.start,s.end,Vn(e.titleFormat||zY(t)),{isEndExclusive:t.isRangeAllDay,defaultSeparator:e.titleRangeSeparator})}function zY(t){let{currentRangeUnit:e}=t;if(e==="year")return{year:"numeric"};if(e==="month")return{year:"numeric",month:"long"};let n=$p(t.currentRange.start,t.currentRange.end);return n!==null&&n>1?{year:"numeric",month:"short",day:"numeric"}:{year:"numeric",month:"long",day:"numeric"}}class nC{constructor(){this.resetListeners=new Set}handleInput(e,n){const s=this.dateEnv;if(e!==s&&(typeof n=="function"?this.nowFn=n:s||(this.nowAnchorDate=e.toDate(n?e.createMarker(n):e.createNowMarker()),this.nowAnchorQueried=Date.now()),this.dateEnv=e,s))for(const a of this.resetListeners.values())a()}getDateMarker(){return this.nowAnchorDate?this.dateEnv.timestampToMarker(this.nowAnchorDate.valueOf()+(Date.now()-this.nowAnchorQueried)):this.dateEnv.createMarker(this.nowFn())}addResetListener(e){this.resetListeners.add(e)}removeResetListener(e){this.resetListeners.delete(e)}}class VY{constructor(e){this.computeCurrentViewData=qt(this._computeCurrentViewData),this.organizeRawLocales=qt(WG),this.buildLocale=qt(uR),this.buildPluginHooks=QG(),this.buildDateEnv=qt(UY),this.buildTheme=qt(WY),this.parseToolbars=qt(wY),this.buildViewSpecs=qt(nY),this.buildDateProfileGenerator=qh(KY),this.buildViewApi=qt(GY),this.buildViewUiProps=qh(ZY),this.buildEventUiBySource=qt(YY,ga),this.buildEventUiBases=qt(QY),this.parseContextBusinessHours=qh(XY),this.buildTitle=qt(HY),this.nowManager=new nC,this.emitter=new Gg,this.actionRunner=new qY(this._handleAction.bind(this),this.updateData.bind(this)),this.currentCalendarOptionsInput={},this.currentCalendarOptionsRefined={},this.currentViewOptionsInput={},this.currentViewOptionsRefined={},this.currentCalendarOptionsRefiners={},this.optionsForRefining=[],this.optionsForHandling=[],this.getCurrentData=()=>this.data,this.dispatch=p=>{this.actionRunner.request(p)},this.props=e,this.actionRunner.pause(),this.nowManager=new nC;let n={},s=this.computeOptionsData(e.optionOverrides,n,e.calendarApi),a=s.calendarOptions.initialView||s.pluginHooks.initialView,l=this.computeCurrentViewData(a,s,e.optionOverrides,n);e.calendarApi.currentDataManager=this,this.emitter.setThisContext(e.calendarApi),this.emitter.setOptions(l.options);let o={nowManager:this.nowManager,dateEnv:s.dateEnv,options:s.calendarOptions,pluginHooks:s.pluginHooks,calendarApi:e.calendarApi,dispatch:this.dispatch,emitter:this.emitter,getCurrentData:this.getCurrentData},c=lY(s.calendarOptions,s.dateEnv,this.nowManager),d=l.dateProfileGenerator.build(c);Nr(d.activeRange,c)||(c=d.currentRange.start);for(let p of s.pluginHooks.contextInit)p(o);let m=dY(s.calendarOptions,d,o),u={dynamicOptionOverrides:n,currentViewType:a,currentDate:c,dateProfile:d,businessHours:this.parseContextBusinessHours(o),eventSources:m,eventUiBases:{},eventStore:Ss(),renderableEventStore:Ss(),dateSelection:null,eventSelection:"",eventDrag:null,eventResize:null,selectionConfig:this.buildViewUiProps(o).selectionConfig},h=Object.assign(Object.assign({},o),u);for(let p of s.pluginHooks.reducers)Object.assign(u,p(null,null,h));Kv(u,o)&&this.emitter.trigger("loading",!0),this.state=u,this.updateData(),this.actionRunner.resume()}resetOptions(e,n){let{props:s}=this;n===void 0?s.optionOverrides=e:(s.optionOverrides=Object.assign(Object.assign({},s.optionOverrides||{}),e),this.optionsForRefining.push(...n)),(n===void 0||n.length)&&this.actionRunner.request({type:"NOTHING"})}_handleAction(e){let{props:n,state:s,emitter:a}=this,l=oY(s.dynamicOptionOverrides,e),o=this.computeOptionsData(n.optionOverrides,l,n.calendarApi),c=aY(s.currentViewType,e),d=this.computeCurrentViewData(c,o,n.optionOverrides,l);n.calendarApi.currentDataManager=this,a.setThisContext(n.calendarApi),a.setOptions(d.options);let m={nowManager:this.nowManager,dateEnv:o.dateEnv,options:o.calendarOptions,pluginHooks:o.pluginHooks,calendarApi:n.calendarApi,dispatch:this.dispatch,emitter:a,getCurrentData:this.getCurrentData},{currentDate:u,dateProfile:h}=s;this.data&&this.data.dateProfileGenerator!==d.dateProfileGenerator&&(h=d.dateProfileGenerator.build(u)),u=rY(u,e),h=cY(h,e,u,d.dateProfileGenerator),(e.type==="PREV"||e.type==="NEXT"||!Nr(h.currentRange,u))&&(u=h.currentRange.start);let p=mY(s.eventSources,e,h,m),g=dK(s.eventStore,e,p,h,m),x=pR(p)&&!d.options.progressiveEventRendering&&s.renderableEventStore||g,{eventUiSingleBase:y,selectionConfig:b}=this.buildViewUiProps(m),k=this.buildEventUiBySource(p),w=this.buildEventUiBases(x.defs,y,k),T={dynamicOptionOverrides:l,currentViewType:c,currentDate:u,dateProfile:h,eventSources:p,eventStore:g,renderableEventStore:x,selectionConfig:b,eventUiBases:w,businessHours:this.parseContextBusinessHours(m),dateSelection:xY(s.dateSelection,e),eventSelection:yY(s.eventSelection,e),eventDrag:bY(s.eventDrag,e),eventResize:kY(s.eventResize,e)},j=Object.assign(Object.assign({},m),T);for(let N of o.pluginHooks.reducers)Object.assign(T,N(s,e,j));let D=Kv(s,m),_=Kv(T,m);!D&&_?a.trigger("loading",!0):D&&!_&&a.trigger("loading",!1),this.state=T,n.onAction&&n.onAction(e)}updateData(){let{props:e,state:n}=this,s=this.data,a=this.computeOptionsData(e.optionOverrides,n.dynamicOptionOverrides,e.calendarApi),l=this.computeCurrentViewData(n.currentViewType,a,e.optionOverrides,n.dynamicOptionOverrides),o=this.data=Object.assign(Object.assign(Object.assign({nowManager:this.nowManager,viewTitle:this.buildTitle(n.dateProfile,l.options,a.dateEnv),calendarApi:e.calendarApi,dispatch:this.dispatch,emitter:this.emitter,getCurrentData:this.getCurrentData},a),l),n),c=a.pluginHooks.optionChangeHandlers,d=s&&s.calendarOptions,m=a.calendarOptions;if(d&&d!==m){d.timeZone!==m.timeZone&&(n.eventSources=o.eventSources=uY(o.eventSources,n.dateProfile,o),n.eventStore=o.eventStore=U1(o.eventStore,s.dateEnv,o.dateEnv),n.renderableEventStore=o.renderableEventStore=U1(o.renderableEventStore,s.dateEnv,o.dateEnv));for(let u in c)(this.optionsForHandling.indexOf(u)!==-1||d[u]!==m[u])&&c[u](m[u],o)}this.optionsForHandling=[],e.onData&&e.onData(o)}computeOptionsData(e,n,s){if(!this.optionsForRefining.length&&e===this.stableOptionOverrides&&n===this.stableDynamicOptionOverrides)return this.stableCalendarOptionsData;let{refinedOptions:a,pluginHooks:l,localeDefaults:o,availableLocaleData:c,extra:d}=this.processRawCalendarOptions(e,n);iC(d);let m=this.buildDateEnv(a.timeZone,a.locale,a.weekNumberCalculation,a.firstDay,a.weekText,l,c,a.defaultRangeSeparator),u=this.buildViewSpecs(l.views,this.stableOptionOverrides,this.stableDynamicOptionOverrides,o),h=this.buildTheme(a,l),p=this.parseToolbars(a,this.stableOptionOverrides,h,u,s);return this.stableCalendarOptionsData={calendarOptions:a,pluginHooks:l,dateEnv:m,viewSpecs:u,theme:h,toolbarConfig:p,localeDefaults:o,availableRawLocales:c.map}}processRawCalendarOptions(e,n){let{locales:s,locale:a}=Lv([lm,e,n]),l=this.organizeRawLocales(s),o=l.map,c=this.buildLocale(a||l.defaultCode,o).options,d=this.buildPluginHooks(e.plugins||[],BY),m=this.currentCalendarOptionsRefiners=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},$1),B1),q1),d.listenerRefiners),d.optionRefiners),u={},h=Lv([lm,c,e,n]),p={},g=this.currentCalendarOptionsInput,v=this.currentCalendarOptionsRefined,x=!1;for(let y in h)this.optionsForRefining.indexOf(y)===-1&&(h[y]===g[y]||$l[y]&&y in g&&$l[y](g[y],h[y]))?p[y]=v[y]:m[y]?(p[y]=m[y](h[y]),x=!0):u[y]=g[y];return x&&(this.currentCalendarOptionsInput=h,this.currentCalendarOptionsRefined=p,this.stableOptionOverrides=e,this.stableDynamicOptionOverrides=n),this.optionsForHandling.push(...this.optionsForRefining),this.optionsForRefining=[],{rawOptions:this.currentCalendarOptionsInput,refinedOptions:this.currentCalendarOptionsRefined,pluginHooks:d,availableLocaleData:l,localeDefaults:c,extra:u}}_computeCurrentViewData(e,n,s,a){let l=n.viewSpecs[e];if(!l)throw new Error(`viewType "${e}" is not available. Please make sure you've loaded all neccessary plugins`);let{refinedOptions:o,extra:c}=this.processRawViewOptions(l,n.pluginHooks,n.localeDefaults,s,a);iC(c),this.nowManager.handleInput(n.dateEnv,o.now);let d=this.buildDateProfileGenerator({dateProfileGeneratorClass:l.optionDefaults.dateProfileGeneratorClass,nowManager:this.nowManager,duration:l.duration,durationUnit:l.durationUnit,usesMinMaxTime:l.optionDefaults.usesMinMaxTime,dateEnv:n.dateEnv,calendarApi:this.props.calendarApi,slotMinTime:o.slotMinTime,slotMaxTime:o.slotMaxTime,showNonCurrentDates:o.showNonCurrentDates,dayCount:o.dayCount,dateAlignment:o.dateAlignment,dateIncrement:o.dateIncrement,hiddenDays:o.hiddenDays,weekends:o.weekends,validRangeInput:o.validRange,visibleRangeInput:o.visibleRange,fixedWeekCount:o.fixedWeekCount}),m=this.buildViewApi(e,this.getCurrentData,n.dateEnv);return{viewSpec:l,options:o,dateProfileGenerator:d,viewApi:m}}processRawViewOptions(e,n,s,a,l){let o=Lv([lm,e.optionDefaults,s,a,e.optionOverrides,l]),c=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},$1),B1),q1),EW),n.listenerRefiners),n.optionRefiners),d={},m=this.currentViewOptionsInput,u=this.currentViewOptionsRefined,h=!1,p={};for(let g in o)o[g]===m[g]||$l[g]&&$l[g](o[g],m[g])?d[g]=u[g]:(o[g]===this.currentCalendarOptionsInput[g]||$l[g]&&$l[g](o[g],this.currentCalendarOptionsInput[g])?g in this.currentCalendarOptionsRefined&&(d[g]=this.currentCalendarOptionsRefined[g]):c[g]?d[g]=c[g](o[g]):p[g]=o[g],h=!0);return h&&(this.currentViewOptionsInput=o,this.currentViewOptionsRefined=d),{rawOptions:this.currentViewOptionsInput,refinedOptions:this.currentViewOptionsRefined,extra:p}}}function UY(t,e,n,s,a,l,o,c){let d=uR(e||o.defaultCode,o.map);return new $W({calendarSystem:"gregory",timeZone:t,namedTimeZoneImpl:l.namedTimeZonedImpl,locale:d,weekNumberCalculation:n,firstDay:s,weekText:a,cmdFormatter:l.cmdFormatter,defaultSeparator:c})}function WY(t,e){let n=e.themeClasses[t.themeSystem]||Cl;return new n(t)}function KY(t){let e=t.dateProfileGeneratorClass||ND;return new e(t)}function GY(t,e,n){return new NY(t,e,n)}function YY(t){return Tr(t,e=>e.ui)}function QY(t,e,n){let s={"":e};for(let a in t){let l=t[a];l.sourceId&&n[l.sourceId]&&(s[a]=n[l.sourceId])}return s}function ZY(t){let{options:e}=t;return{eventUiSingleBase:Wp({display:e.eventDisplay,editable:e.editable,startEditable:e.eventStartEditable,durationEditable:e.eventDurationEditable,constraint:e.eventConstraint,overlap:typeof e.eventOverlap=="boolean"?e.eventOverlap:void 0,allow:e.eventAllow,backgroundColor:e.eventBackgroundColor,borderColor:e.eventBorderColor,textColor:e.eventTextColor,color:e.eventColor},t),selectionConfig:Wp({constraint:e.selectConstraint,overlap:typeof e.selectOverlap=="boolean"?e.selectOverlap:void 0,allow:e.selectAllow},t)}}function Kv(t,e){for(let n of e.pluginHooks.isLoadingFuncs)if(n(t))return!0;return!1}function XY(t){return yK(t.options.businessHours,t)}function iC(t,e){for(let n in t)console.warn(`Unknown option '${n}'`)}class JY extends jn{render(){let e=this.props.widgetGroups.map(n=>this.renderWidgetGroup(n));return we("div",{className:"fc-toolbar-chunk"},...e)}renderWidgetGroup(e){let{props:n}=this,{theme:s}=this.context,a=[],l=!0;for(let o of e){let{buttonName:c,buttonClick:d,buttonText:m,buttonIcon:u,buttonHint:h}=o;if(c==="title")l=!1,a.push(we("h2",{className:"fc-toolbar-title",id:n.titleId},n.title));else{let p=c===n.activeButton,g=!n.isTodayEnabled&&c==="today"||!n.isPrevEnabled&&c==="prev"||!n.isNextEnabled&&c==="next",v=[`fc-${c}-button`,s.getClass("button")];p&&v.push(s.getClass("buttonActive")),a.push(we("button",{type:"button",title:typeof h=="function"?h(n.navUnit):h,disabled:g,"aria-pressed":p,className:v.join(" "),onClick:d},m||(u?we("span",{className:u,role:"img"}):"")))}}if(a.length>1){let o=l&&s.getClass("buttonGroup")||"";return we("div",{className:o},...a)}return a[0]}}let sC=class extends jn{render(){let{model:e,extraClassName:n}=this.props,s=!1,a,l,o=e.sectionWidgets,c=o.center;return o.left?(s=!0,a=o.left):a=o.start,o.right?(s=!0,l=o.right):l=o.end,we("div",{className:[n||"","fc-toolbar",s?"fc-toolbar-ltr":""].join(" ")},this.renderSection("start",a||[]),this.renderSection("center",c||[]),this.renderSection("end",l||[]))}renderSection(e,n){let{props:s}=this;return we(JY,{key:e,widgetGroups:n,title:s.title,navUnit:s.navUnit,activeButton:s.activeButton,isTodayEnabled:s.isTodayEnabled,isPrevEnabled:s.isPrevEnabled,isNextEnabled:s.isNextEnabled,titleId:s.titleId})}};class eQ extends jn{constructor(){super(...arguments),this.state={availableWidth:null},this.handleEl=e=>{this.el=e,Va(this.props.elRef,e),this.updateAvailableWidth()},this.handleResize=()=>{this.updateAvailableWidth()}}render(){let{props:e,state:n}=this,{aspectRatio:s}=e,a=["fc-view-harness",s||e.liquid||e.height?"fc-view-harness-active":"fc-view-harness-passive"],l="",o="";return s?n.availableWidth!==null?l=n.availableWidth/s:o=`${1/s*100}%`:l=e.height||"",we("div",{"aria-labelledby":e.labeledById,ref:this.handleEl,className:a.join(" "),style:{height:l,paddingBottom:o}},e.children)}componentDidMount(){this.context.addResizeHandler(this.handleResize)}componentWillUnmount(){this.context.removeResizeHandler(this.handleResize)}updateAvailableWidth(){this.el&&this.props.aspectRatio&&this.setState({availableWidth:this.el.offsetWidth})}}class tQ extends id{constructor(e){super(e),this.handleSegClick=(n,s)=>{let{component:a}=this,{context:l}=a,o=Bc(s);if(o&&a.isValidSegDownEl(n.target)){let c=Ii(n.target,".fc-event-forced-url"),d=c?c.querySelector("a[href]").href:"";l.emitter.trigger("eventClick",{el:s,event:new zn(a.context,o.eventRange.def,o.eventRange.instance),jsEvent:n,view:l.viewApi}),d&&!n.defaultPrevented&&(window.location.href=d)}},this.destroy=mD(e.el,"click",".fc-event",this.handleSegClick)}}class nQ extends id{constructor(e){super(e),this.handleEventElRemove=n=>{n===this.currentSegEl&&this.handleSegLeave(null,this.currentSegEl)},this.handleSegEnter=(n,s)=>{Bc(s)&&(this.currentSegEl=s,this.triggerEvent("eventMouseEnter",n,s))},this.handleSegLeave=(n,s)=>{this.currentSegEl&&(this.currentSegEl=null,this.triggerEvent("eventMouseLeave",n,s))},this.removeHoverListeners=MU(e.el,".fc-event",this.handleSegEnter,this.handleSegLeave)}destroy(){this.removeHoverListeners()}triggerEvent(e,n,s){let{component:a}=this,{context:l}=a,o=Bc(s);(!n||a.isValidSegDownEl(n.target))&&l.emitter.trigger(e,{el:s,event:new zn(l,o.eventRange.def,o.eventRange.instance),jsEvent:n,view:l.viewApi})}}class iQ extends To{constructor(){super(...arguments),this.buildViewContext=qt(HW),this.buildViewPropTransformers=qt(aQ),this.buildToolbarProps=qt(sQ),this.headerRef=Ui(),this.footerRef=Ui(),this.interactionsStore={},this.state={viewLabelId:Vg()},this.registerInteractiveComponent=(e,n)=>{let s=qK(e,n),o=[tQ,nQ].concat(this.props.pluginHooks.componentInteractions).map(c=>new c(s));this.interactionsStore[e.uid]=o,xy[e.uid]=s},this.unregisterInteractiveComponent=e=>{let n=this.interactionsStore[e.uid];if(n){for(let s of n)s.destroy();delete this.interactionsStore[e.uid]}delete xy[e.uid]},this.resizeRunner=new Uk(()=>{this.props.emitter.trigger("_resize",!0),this.props.emitter.trigger("windowResize",{view:this.props.viewApi})}),this.handleWindowResize=e=>{let{options:n}=this.props;n.handleWindowResize&&e.target===window&&this.resizeRunner.request(n.windowResizeDelay)}}render(){let{props:e}=this,{toolbarConfig:n,options:s}=e,a=!1,l="",o;e.isHeightAuto||e.forPrint?l="":s.height!=null?a=!0:s.contentHeight!=null?l=s.contentHeight:o=Math.max(s.aspectRatio,.5);let c=this.buildViewContext(e.viewSpec,e.viewApi,e.options,e.dateProfileGenerator,e.dateEnv,e.nowManager,e.theme,e.pluginHooks,e.dispatch,e.getCurrentData,e.emitter,e.calendarApi,this.registerInteractiveComponent,this.unregisterInteractiveComponent),d=n.header&&n.header.hasTitle?this.state.viewLabelId:void 0;return we(Or.Provider,{value:c},we(sd,{unit:"day"},m=>{let u=this.buildToolbarProps(e.viewSpec,e.dateProfile,e.dateProfileGenerator,e.currentDate,m,e.viewTitle);return we(In,null,n.header&&we(sC,Object.assign({ref:this.headerRef,extraClassName:"fc-header-toolbar",model:n.header,titleId:d},u)),we(eQ,{liquid:a,height:l,aspectRatio:o,labeledById:d},this.renderView(e),this.buildAppendContent()),n.footer&&we(sC,Object.assign({ref:this.footerRef,extraClassName:"fc-footer-toolbar",model:n.footer,titleId:""},u)))}))}componentDidMount(){let{props:e}=this;this.calendarInteractions=e.pluginHooks.calendarInteractions.map(s=>new s(e)),window.addEventListener("resize",this.handleWindowResize);let{propSetHandlers:n}=e.pluginHooks;for(let s in n)n[s](e[s],e)}componentDidUpdate(e){let{props:n}=this,{propSetHandlers:s}=n.pluginHooks;for(let a in s)n[a]!==e[a]&&s[a](n[a],n)}componentWillUnmount(){window.removeEventListener("resize",this.handleWindowResize),this.resizeRunner.clear();for(let e of this.calendarInteractions)e.destroy();this.props.emitter.trigger("_unmount")}buildAppendContent(){let{props:e}=this,n=e.pluginHooks.viewContainerAppends.map(s=>s(e));return we(In,{},...n)}renderView(e){let{pluginHooks:n}=e,{viewSpec:s}=e,a={dateProfile:e.dateProfile,businessHours:e.businessHours,eventStore:e.renderableEventStore,eventUiBases:e.eventUiBases,dateSelection:e.dateSelection,eventSelection:e.eventSelection,eventDrag:e.eventDrag,eventResize:e.eventResize,isHeightAuto:e.isHeightAuto,forPrint:e.forPrint},l=this.buildViewPropTransformers(n.viewPropsTransformers);for(let c of l)Object.assign(a,c.transform(a,e));let o=s.component;return we(o,Object.assign({},a))}}function sQ(t,e,n,s,a,l){let o=n.build(a,void 0,!1),c=n.buildPrev(e,s,!1),d=n.buildNext(e,s,!1);return{title:l,activeButton:t.type,navUnit:t.singleUnit,isTodayEnabled:o.isValid&&!Nr(e.currentRange,a),isPrevEnabled:c.isValid,isNextEnabled:d.isValid}}function aQ(t){return t.map(e=>new e)}class rQ extends zK{constructor(e,n={}){super(),this.isRendering=!1,this.isRendered=!1,this.currentClassNames=[],this.customContentRenderId=0,this.handleAction=s=>{switch(s.type){case"SET_EVENT_DRAG":case"SET_EVENT_RESIZE":this.renderRunner.tryDrain()}},this.handleData=s=>{this.currentData=s,this.renderRunner.request(s.calendarOptions.rerenderDelay)},this.handleRenderRequest=()=>{if(this.isRendering){this.isRendered=!0;let{currentData:s}=this;zp(()=>{Sm(we(BK,{options:s.calendarOptions,theme:s.theme,emitter:s.emitter},(a,l,o,c)=>(this.setClassNames(a),this.setHeight(l),we(bD.Provider,{value:this.customContentRenderId},we(iQ,Object.assign({isHeightAuto:o,forPrint:c},s))))),this.el)})}else this.isRendered&&(this.isRendered=!1,Sm(null,this.el),this.setClassNames([]),this.setHeight(""))},CU(e),this.el=e,this.renderRunner=new Uk(this.handleRenderRequest),new VY({optionOverrides:n,calendarApi:this,onAction:this.handleAction,onData:this.handleData})}render(){let e=this.isRendering;e?this.customContentRenderId+=1:this.isRendering=!0,this.renderRunner.request(),e&&this.updateSize()}destroy(){this.isRendering&&(this.isRendering=!1,this.renderRunner.request())}updateSize(){zp(()=>{super.updateSize()})}batchRendering(e){this.renderRunner.pause("batchRendering"),e(),this.renderRunner.resume("batchRendering")}pauseRendering(){this.renderRunner.pause("pauseRendering")}resumeRendering(){this.renderRunner.resume("pauseRendering",!0)}resetOptions(e,n){this.currentDataManager.resetOptions(e,n)}setClassNames(e){if(!vl(e,this.currentClassNames)){let{classList:n}=this.el;for(let s of this.currentClassNames)n.remove(s);for(let s of e)n.add(s);this.currentClassNames=e}}setHeight(e){cD(this.el,"height",e)}}const lQ=parseInt(String(He.version).split(".")[0]),oQ=lQ<18;class yR extends f.Component{constructor(){super(...arguments),this.elRef=f.createRef(),this.isUpdating=!1,this.isUnmounting=!1,this.state={customRenderingMap:new Map},this.requestResize=()=>{this.isUnmounting||(this.cancelResize(),this.resizeId=requestAnimationFrame(()=>{this.doResize()}))}}render(){const e=[];for(const n of this.state.customRenderingMap.values())e.push(He.createElement(cQ,{key:n.id,customRendering:n}));return He.createElement("div",{ref:this.elRef},e)}componentDidMount(){this.isUnmounting=!1;const e=new VG;this.handleCustomRendering=e.handle.bind(e),this.calendar=new rQ(this.elRef.current,Object.assign(Object.assign({},this.props),{handleCustomRendering:this.handleCustomRendering})),this.calendar.render(),this.calendar.on("_beforeprint",()=>{Ma.flushSync(()=>{})});let n;e.subscribe(s=>{const a=Date.now(),l=!n;(oQ||l||this.isUpdating||this.isUnmounting||a-n<100?bR:Ma.flushSync)(()=>{this.setState({customRenderingMap:s},()=>{n=a,l?this.doResize():this.requestResize()})})})}componentDidUpdate(){this.isUpdating=!0,this.calendar.resetOptions(Object.assign(Object.assign({},this.props),{handleCustomRendering:this.handleCustomRendering})),this.isUpdating=!1}componentWillUnmount(){this.isUnmounting=!0,this.cancelResize(),this.calendar.destroy()}doResize(){this.calendar.updateSize()}cancelResize(){this.resizeId!==void 0&&(cancelAnimationFrame(this.resizeId),this.resizeId=void 0)}getApi(){return this.calendar}}yR.act=bR;class cQ extends f.PureComponent{render(){const{customRendering:e}=this.props,{generatorMeta:n}=e,s=typeof n=="function"?n(e.renderProps):n;return Ma.createPortal(s,e.containerEl)}}function bR(t){t()}class dQ extends Za{constructor(){super(...arguments),this.headerElRef=Ui()}renderSimpleLayout(e,n){let{props:s,context:a}=this,l=[],o=Yp(a.options);return e&&l.push({type:"header",key:"header",isSticky:o,chunk:{elRef:this.headerElRef,tableClassName:"fc-col-header",rowContent:e}}),l.push({type:"body",key:"body",liquid:!0,chunk:{content:n}}),we(Vp,{elClasses:["fc-daygrid"],viewSpec:a.viewSpec},we(gw,{liquid:!s.isHeightAuto&&!s.forPrint,collapsibleWidth:s.forPrint,cols:[],sections:l}))}renderHScrollLayout(e,n,s,a){let l=this.context.pluginHooks.scrollGridImpl;if(!l)throw new Error("No ScrollGrid implementation");let{props:o,context:c}=this,d=!o.forPrint&&Yp(c.options),m=!o.forPrint&&sR(c.options),u=[];return e&&u.push({type:"header",key:"header",isSticky:d,chunks:[{key:"main",elRef:this.headerElRef,tableClassName:"fc-col-header",rowContent:e}]}),u.push({type:"body",key:"body",liquid:!0,chunks:[{key:"main",content:n}]}),m&&u.push({type:"footer",key:"footer",isSticky:!0,chunks:[{key:"main",content:ky}]}),we(Vp,{elClasses:["fc-daygrid"],viewSpec:c.viewSpec},we(l,{liquid:!o.isHeightAuto&&!o.forPrint,forPrint:o.forPrint,collapsibleWidth:o.forPrint,colGroups:[{cols:[{span:s,minWidth:a}]}],sections:u}))}}function zh(t,e){let n=[];for(let s=0;s<e;s+=1)n[s]=[];for(let s of t)n[s.row].push(s);return n}function ph(t,e){let n=[];for(let s=0;s<e;s+=1)n[s]=[];for(let s of t)n[s.firstCol].push(s);return n}function aC(t,e){let n=[];if(t){for(let s=0;s<e;s+=1)n[s]={affectedInstances:t.affectedInstances,isEvent:t.isEvent,segs:[]};for(let s of t.segs)n[s.row].segs.push(s)}else for(let s=0;s<e;s+=1)n[s]=null;return n}const kR=Vn({hour:"numeric",minute:"2-digit",omitZeroMinute:!0,meridiem:"narrow"});function wR(t){let{display:e}=t.eventRange.ui;return e==="list-item"||e==="auto"&&!t.eventRange.def.allDay&&t.firstCol===t.lastCol&&t.isStart&&t.isEnd}class jR extends jn{render(){let{props:e}=this;return we(vw,Object.assign({},e,{elClasses:["fc-daygrid-event","fc-daygrid-block-event","fc-h-event"],defaultTimeFormat:kR,defaultDisplayEventEnd:e.defaultDisplayEventEnd,disableResizing:!e.seg.eventRange.def.allDay}))}}class NR extends jn{render(){let{props:e,context:n}=this,{options:s}=n,{seg:a}=e,l=s.eventTimeFormat||kR,o=FD(a,l,n,!0,e.defaultDisplayEventEnd);return we(fw,Object.assign({},e,{elTag:"a",elClasses:["fc-daygrid-event","fc-daygrid-dot-event"],elAttrs:$D(e.seg,n),defaultGenerator:mQ,timeText:o,isResizing:!1,isDateSelecting:!1}))}}function mQ(t){return we(In,null,we("div",{className:"fc-daygrid-event-dot",style:{borderColor:t.borderColor||t.backgroundColor}}),t.timeText&&we("div",{className:"fc-event-time"},t.timeText),we("div",{className:"fc-event-title"},t.event.title||we(In,null,"")))}class uQ extends jn{constructor(){super(...arguments),this.compileSegs=qt(hQ)}render(){let{props:e}=this,{allSegs:n,invisibleSegs:s}=this.compileSegs(e.singlePlacements);return we(oR,{elClasses:["fc-daygrid-more-link"],dateProfile:e.dateProfile,todayRange:e.todayRange,allDayDate:e.allDayDate,moreCnt:e.moreCnt,allSegs:n,hiddenSegs:s,alignmentElRef:e.alignmentElRef,alignGridTop:e.alignGridTop,extraDateSpan:e.extraDateSpan,popoverContent:()=>{let a=(e.eventDrag?e.eventDrag.affectedInstances:null)||(e.eventResize?e.eventResize.affectedInstances:null)||{};return we(In,null,n.map(l=>{let o=l.eventRange.instance.instanceId;return we("div",{className:"fc-daygrid-event-harness",key:o,style:{visibility:a[o]?"hidden":""}},wR(l)?we(NR,Object.assign({seg:l,isDragging:!1,isSelected:o===e.eventSelection,defaultDisplayEventEnd:!1},ml(l,e.todayRange))):we(jR,Object.assign({seg:l,isDragging:!1,isResizing:!1,isDateSelecting:!1,isSelected:o===e.eventSelection,defaultDisplayEventEnd:!1},ml(l,e.todayRange))))}))}})}}function hQ(t){let e=[],n=[];for(let s of t)e.push(s.seg),s.isVisible||n.push(s.seg);return{allSegs:e,invisibleSegs:n}}const pQ=Vn({week:"narrow"});let gQ=class extends Za{constructor(){super(...arguments),this.rootElRef=Ui(),this.state={dayNumberId:Vg()},this.handleRootEl=e=>{Va(this.rootElRef,e),Va(this.props.elRef,e)}}render(){let{context:e,props:n,state:s,rootElRef:a}=this,{options:l,dateEnv:o}=e,{date:c,dateProfile:d}=n;const m=n.showDayNumber&&vQ(c,d.currentRange,o);return we(yw,{elTag:"td",elRef:this.handleRootEl,elClasses:["fc-daygrid-day",...n.extraClassNames||[]],elAttrs:Object.assign(Object.assign(Object.assign({},n.extraDataAttrs),n.showDayNumber?{"aria-labelledby":s.dayNumberId}:{}),{role:"gridcell"}),defaultGenerator:fQ,date:c,dateProfile:d,todayRange:n.todayRange,showDayNumber:n.showDayNumber,isMonthStart:m,extraRenderProps:n.extraRenderProps},(u,h)=>we("div",{ref:n.innerElRef,className:"fc-daygrid-day-frame fc-scrollgrid-sync-inner",style:{minHeight:n.minHeight}},n.showWeekNumber&&we(lR,{elTag:"a",elClasses:["fc-daygrid-week-number"],elAttrs:Gp(e,c,"week"),date:c,defaultFormat:pQ}),!h.isDisabled&&(n.showDayNumber||bw(l)||n.forceDayTop)?we("div",{className:"fc-daygrid-day-top"},we(u,{elTag:"a",elClasses:["fc-daygrid-day-number",m&&"fc-daygrid-month-start"],elAttrs:Object.assign(Object.assign({},Gp(e,c)),{id:s.dayNumberId})})):n.showDayNumber?we("div",{className:"fc-daygrid-day-top",style:{visibility:"hidden"}},we("a",{className:"fc-daygrid-day-number"},"")):void 0,we("div",{className:"fc-daygrid-day-events",ref:n.fgContentElRef},n.fgContent,we("div",{className:"fc-daygrid-day-bottom",style:{marginTop:n.moreMarginTop}},we(uQ,{allDayDate:c,singlePlacements:n.singlePlacements,moreCnt:n.moreCnt,alignmentElRef:a,alignGridTop:!n.showDayNumber,extraDateSpan:n.extraDateSpan,dateProfile:n.dateProfile,eventSelection:n.eventSelection,eventDrag:n.eventDrag,eventResize:n.eventResize,todayRange:n.todayRange}))),we("div",{className:"fc-daygrid-day-bg"},n.bgContent)))}};function fQ(t){return t.dayNumberText||we(In,null,"")}function vQ(t,e,n){const{start:s,end:a}=e,l=xl(a,-1),o=n.getYear(s),c=n.getMonth(s),d=n.getYear(l),m=n.getMonth(l);return!(o===d&&c===m)&&(t.valueOf()===s.valueOf()||n.getDay(t)===1&&t.valueOf()<a.valueOf())}function CR(t){return t.eventRange.instance.instanceId+":"+t.firstCol}function _R(t){return CR(t)+":"+t.lastCol}function xQ(t,e,n,s,a,l,o){let c=new kQ(b=>{let k=t[b.index].eventRange.instance.instanceId+":"+b.span.start+":"+(b.span.end-1);return a[k]||1});c.allowReslicing=!0,c.strictOrder=s,e===!0||n===!0?(c.maxCoord=l,c.hiddenConsumes=!0):typeof e=="number"?c.maxStackCnt=e:typeof n=="number"&&(c.maxStackCnt=n,c.hiddenConsumes=!0);let d=[],m=[];for(let b=0;b<t.length;b+=1){let k=t[b],w=_R(k);a[w]!=null?d.push({index:b,span:{start:k.firstCol,end:k.lastCol+1}}):m.push(k)}let u=c.addSegs(d),h=c.toRects(),{singleColPlacements:p,multiColPlacements:g,leftoverMargins:v}=yQ(h,t,o),x=[],y=[];for(let b of m){g[b.firstCol].push({seg:b,isVisible:!1,isAbsolute:!0,absoluteTop:0,marginTop:0});for(let k=b.firstCol;k<=b.lastCol;k+=1)p[k].push({seg:kc(b,k,k+1,o),isVisible:!1,isAbsolute:!1,absoluteTop:0,marginTop:0})}for(let b=0;b<o.length;b+=1)x.push(0);for(let b of u){let k=t[b.index],w=b.span;g[w.start].push({seg:kc(k,w.start,w.end,o),isVisible:!1,isAbsolute:!0,absoluteTop:0,marginTop:0});for(let T=w.start;T<w.end;T+=1)x[T]+=1,p[T].push({seg:kc(k,T,T+1,o),isVisible:!1,isAbsolute:!1,absoluteTop:0,marginTop:0})}for(let b=0;b<o.length;b+=1)y.push(v[b]);return{singleColPlacements:p,multiColPlacements:g,moreCnts:x,moreMarginTops:y}}function yQ(t,e,n){let s=bQ(t,n.length),a=[],l=[],o=[];for(let c=0;c<n.length;c+=1){let d=s[c],m=[],u=0,h=0;for(let g of d){let v=e[g.index];m.push({seg:kc(v,c,c+1,n),isVisible:!0,isAbsolute:!1,absoluteTop:g.levelCoord,marginTop:g.levelCoord-u}),u=g.levelCoord+g.thickness}let p=[];u=0,h=0;for(let g of d){let v=e[g.index],x=g.span.end-g.span.start>1,y=g.span.start===c;h+=g.levelCoord-u,u=g.levelCoord+g.thickness,x?(h+=g.thickness,y&&p.push({seg:kc(v,g.span.start,g.span.end,n),isVisible:!0,isAbsolute:!0,absoluteTop:g.levelCoord,marginTop:0})):y&&(p.push({seg:kc(v,g.span.start,g.span.end,n),isVisible:!0,isAbsolute:!1,absoluteTop:g.levelCoord,marginTop:h}),h=0)}a.push(m),l.push(p),o.push(h)}return{singleColPlacements:a,multiColPlacements:l,leftoverMargins:o}}function bQ(t,e){let n=[];for(let s=0;s<e;s+=1)n.push([]);for(let s of t)for(let a=s.span.start;a<s.span.end;a+=1)n[a].push(s);return n}function kc(t,e,n,s){if(t.firstCol===e&&t.lastCol===n-1)return t;let a=t.eventRange,l=a.range,o=co(l,{start:s[e].date,end:vi(s[n-1].date,1)});return Object.assign(Object.assign({},t),{firstCol:e,lastCol:n-1,eventRange:{def:a.def,ui:Object.assign(Object.assign({},a.ui),{durationEditable:!1}),instance:a.instance,range:o},isStart:t.isStart&&o.start.valueOf()===l.start.valueOf(),isEnd:t.isEnd&&o.end.valueOf()===l.end.valueOf()})}class kQ extends KD{constructor(){super(...arguments),this.hiddenConsumes=!1,this.forceHidden={}}addSegs(e){const n=super.addSegs(e),{entriesByLevel:s}=this,a=l=>!this.forceHidden[Jl(l)];for(let l=0;l<s.length;l+=1)s[l]=s[l].filter(a);return n}handleInvalidInsertion(e,n,s){const{entriesByLevel:a,forceHidden:l}=this,{touchingEntry:o,touchingLevel:c,touchingLateral:d}=e;if(this.hiddenConsumes&&o){const m=Jl(o);if(!l[m])if(this.allowReslicing){const u=Object.assign(Object.assign({},o),{span:hw(o.span,n.span)}),h=Jl(u);l[h]=!0,a[c][d]=u,s.push(u),this.splitEntry(o,n,s)}else l[m]=!0,s.push(o)}super.handleInvalidInsertion(e,n,s)}}let SR=class extends Za{constructor(){super(...arguments),this.cellElRefs=new gr,this.frameElRefs=new gr,this.fgElRefs=new gr,this.segHarnessRefs=new gr,this.rootElRef=Ui(),this.state={framePositions:null,maxContentHeight:null,segHeights:{}},this.handleResize=e=>{e&&this.updateSizing(!0)}}render(){let{props:e,state:n,context:s}=this,{options:a}=s,l=e.cells.length,o=ph(e.businessHourSegs,l),c=ph(e.bgEventSegs,l),d=ph(this.getHighlightSegs(),l),m=ph(this.getMirrorSegs(),l),{singleColPlacements:u,multiColPlacements:h,moreCnts:p,moreMarginTops:g}=xQ(OD(e.fgEventSegs,a.eventOrder),e.dayMaxEvents,e.dayMaxEventRows,a.eventOrderStrict,n.segHeights,n.maxContentHeight,e.cells),v=e.eventDrag&&e.eventDrag.affectedInstances||e.eventResize&&e.eventResize.affectedInstances||{};return we("tr",{ref:this.rootElRef,role:"row"},e.renderIntro&&e.renderIntro(),e.cells.map((x,y)=>{let b=this.renderFgSegs(y,e.forPrint?u[y]:h[y],e.todayRange,v),k=this.renderFgSegs(y,wQ(m[y],h),e.todayRange,{},!!e.eventDrag,!!e.eventResize,!1);return we(gQ,{key:x.key,elRef:this.cellElRefs.createRef(x.key),innerElRef:this.frameElRefs.createRef(x.key),dateProfile:e.dateProfile,date:x.date,showDayNumber:e.showDayNumbers,showWeekNumber:e.showWeekNumbers&&y===0,forceDayTop:e.showWeekNumbers,todayRange:e.todayRange,eventSelection:e.eventSelection,eventDrag:e.eventDrag,eventResize:e.eventResize,extraRenderProps:x.extraRenderProps,extraDataAttrs:x.extraDataAttrs,extraClassNames:x.extraClassNames,extraDateSpan:x.extraDateSpan,moreCnt:p[y],moreMarginTop:g[y],singlePlacements:u[y],fgContentElRef:this.fgElRefs.createRef(x.key),fgContent:we(In,null,we(In,null,b),we(In,null,k)),bgContent:we(In,null,this.renderFillSegs(d[y],"highlight"),this.renderFillSegs(o[y],"non-business"),this.renderFillSegs(c[y],"bg-event")),minHeight:e.cellMinHeight})}))}componentDidMount(){this.updateSizing(!0),this.context.addResizeHandler(this.handleResize)}componentDidUpdate(e,n){let s=this.props;this.updateSizing(!ga(e,s))}componentWillUnmount(){this.context.removeResizeHandler(this.handleResize)}getHighlightSegs(){let{props:e}=this;return e.eventDrag&&e.eventDrag.segs.length?e.eventDrag.segs:e.eventResize&&e.eventResize.segs.length?e.eventResize.segs:e.dateSelectionSegs}getMirrorSegs(){let{props:e}=this;return e.eventResize&&e.eventResize.segs.length?e.eventResize.segs:[]}renderFgSegs(e,n,s,a,l,o,c){let{context:d}=this,{eventSelection:m}=this.props,{framePositions:u}=this.state,h=this.props.cells.length===1,p=l||o||c,g=[];if(u)for(let v of n){let{seg:x}=v,{instanceId:y}=x.eventRange.instance,b=v.isVisible&&!a[y],k=v.isAbsolute,w="",T="";k&&(d.isRtl?(T=0,w=u.lefts[x.lastCol]-u.lefts[x.firstCol]):(w=0,T=u.rights[x.firstCol]-u.rights[x.lastCol])),g.push(we("div",{className:"fc-daygrid-event-harness"+(k?" fc-daygrid-event-harness-abs":""),key:CR(x),ref:p?null:this.segHarnessRefs.createRef(_R(x)),style:{visibility:b?"":"hidden",marginTop:k?"":v.marginTop,top:k?v.absoluteTop:"",left:w,right:T}},wR(x)?we(NR,Object.assign({seg:x,isDragging:l,isSelected:y===m,defaultDisplayEventEnd:h},ml(x,s))):we(jR,Object.assign({seg:x,isDragging:l,isResizing:o,isDateSelecting:c,isSelected:y===m,defaultDisplayEventEnd:h},ml(x,s)))))}return g}renderFillSegs(e,n){let{isRtl:s}=this.context,{todayRange:a}=this.props,{framePositions:l}=this.state,o=[];if(l)for(let c of e){let d=s?{right:0,left:l.lefts[c.lastCol]-l.lefts[c.firstCol]}:{left:0,right:l.rights[c.firstCol]-l.rights[c.lastCol]};o.push(we("div",{key:LD(c.eventRange),className:"fc-daygrid-bg-harness",style:d},n==="bg-event"?we(aR,Object.assign({seg:c},ml(c,a))):rR(n)))}return we(In,{},...o)}updateSizing(e){let{props:n,state:s,frameElRefs:a}=this;if(!n.forPrint&&n.clientWidth!==null){if(e){let d=n.cells.map(m=>a.currentMap[m.key]);if(d.length){let m=this.rootElRef.current,u=new qc(m,d,!0,!1);(!s.framePositions||!s.framePositions.similarTo(u))&&this.setState({framePositions:new qc(m,d,!0,!1)})}}const l=this.state.segHeights,o=this.querySegHeights(),c=n.dayMaxEvents===!0||n.dayMaxEventRows===!0;this.safeSetState({segHeights:Object.assign(Object.assign({},l),o),maxContentHeight:c?this.computeMaxContentHeight():null})}}querySegHeights(){let e=this.segHarnessRefs.currentMap,n={};for(let s in e){let a=Math.round(e[s].getBoundingClientRect().height);n[s]=Math.max(n[s]||0,a)}return n}computeMaxContentHeight(){let e=this.props.cells[0].key,n=this.cellElRefs.currentMap[e],s=this.fgElRefs.currentMap[e];return n.getBoundingClientRect().bottom-s.getBoundingClientRect().top}getCellEls(){let e=this.cellElRefs.currentMap;return this.props.cells.map(n=>e[n.key])}};SR.addStateEquality({segHeights:ga});function wQ(t,e){if(!t.length)return[];let n=jQ(e);return t.map(s=>({seg:s,isVisible:!0,isAbsolute:!0,absoluteTop:n[s.eventRange.instance.instanceId],marginTop:0}))}function jQ(t){let e={};for(let n of t)for(let s of n)e[s.seg.eventRange.instance.instanceId]=s.absoluteTop;return e}class NQ extends Za{constructor(){super(...arguments),this.splitBusinessHourSegs=qt(zh),this.splitBgEventSegs=qt(CQ),this.splitFgEventSegs=qt(zh),this.splitDateSelectionSegs=qt(zh),this.splitEventDrag=qt(aC),this.splitEventResize=qt(aC),this.rowRefs=new gr}render(){let{props:e,context:n}=this,s=e.cells.length,a=this.splitBusinessHourSegs(e.businessHourSegs,s),l=this.splitBgEventSegs(e.bgEventSegs,s),o=this.splitFgEventSegs(e.fgEventSegs,s),c=this.splitDateSelectionSegs(e.dateSelectionSegs,s),d=this.splitEventDrag(e.eventDrag,s),m=this.splitEventResize(e.eventResize,s),u=s>=7&&e.clientWidth?e.clientWidth/n.options.aspectRatio/6:null;return we(sd,{unit:"day"},(h,p)=>we(In,null,e.cells.map((g,v)=>we(SR,{ref:this.rowRefs.createRef(v),key:g.length?g[0].date.toISOString():v,showDayNumbers:s>1,showWeekNumbers:e.showWeekNumbers,todayRange:p,dateProfile:e.dateProfile,cells:g,renderIntro:e.renderRowIntro,businessHourSegs:a[v],eventSelection:e.eventSelection,bgEventSegs:l[v],fgEventSegs:o[v],dateSelectionSegs:c[v],eventDrag:d[v],eventResize:m[v],dayMaxEvents:e.dayMaxEvents,dayMaxEventRows:e.dayMaxEventRows,clientWidth:e.clientWidth,clientHeight:e.clientHeight,cellMinHeight:u,forPrint:e.forPrint}))))}componentDidMount(){this.registerInteractiveComponent()}componentDidUpdate(){this.registerInteractiveComponent()}registerInteractiveComponent(){if(!this.rootEl){const e=this.rowRefs.currentMap[0].getCellEls()[0],n=e?e.closest(".fc-daygrid-body"):null;n&&(this.rootEl=n,this.context.registerInteractiveComponent(this,{el:n,isHitComboAllowed:this.props.isHitComboAllowed}))}}componentWillUnmount(){this.rootEl&&(this.context.unregisterInteractiveComponent(this),this.rootEl=null)}prepareHits(){this.rowPositions=new qc(this.rootEl,this.rowRefs.collect().map(e=>e.getCellEls()[0]),!1,!0),this.colPositions=new qc(this.rootEl,this.rowRefs.currentMap[0].getCellEls(),!0,!1)}queryHit(e,n){let{colPositions:s,rowPositions:a}=this,l=s.leftToIndex(e),o=a.topToIndex(n);if(o!=null&&l!=null){let c=this.props.cells[o][l];return{dateProfile:this.props.dateProfile,dateSpan:Object.assign({range:this.getCellRange(o,l),allDay:!0},c.extraDateSpan),dayEl:this.getCellEl(o,l),rect:{left:s.lefts[l],right:s.rights[l],top:a.tops[o],bottom:a.bottoms[o]},layer:0}}return null}getCellEl(e,n){return this.rowRefs.currentMap[e].getCellEls()[n]}getCellRange(e,n){let s=this.props.cells[e][n].date,a=vi(s,1);return{start:s,end:a}}}function CQ(t,e){return zh(t.filter(_Q),e)}function _Q(t){return t.eventRange.def.allDay}let SQ=class extends Za{constructor(){super(...arguments),this.elRef=Ui(),this.needsScrollReset=!1}render(){let{props:e}=this,{dayMaxEventRows:n,dayMaxEvents:s,expandRows:a}=e,l=s===!0||n===!0;l&&!a&&(l=!1,n=null,s=null);let o=["fc-daygrid-body",l?"fc-daygrid-body-balanced":"fc-daygrid-body-unbalanced",a?"":"fc-daygrid-body-natural"];return we("div",{ref:this.elRef,className:o.join(" "),style:{width:e.clientWidth,minWidth:e.tableMinWidth}},we("table",{role:"presentation",className:"fc-scrollgrid-sync-table",style:{width:e.clientWidth,minWidth:e.tableMinWidth,height:a?e.clientHeight:""}},e.colGroupNode,we("tbody",{role:"presentation"},we(NQ,{dateProfile:e.dateProfile,cells:e.cells,renderRowIntro:e.renderRowIntro,showWeekNumbers:e.showWeekNumbers,clientWidth:e.clientWidth,clientHeight:e.clientHeight,businessHourSegs:e.businessHourSegs,bgEventSegs:e.bgEventSegs,fgEventSegs:e.fgEventSegs,dateSelectionSegs:e.dateSelectionSegs,eventSelection:e.eventSelection,eventDrag:e.eventDrag,eventResize:e.eventResize,dayMaxEvents:s,dayMaxEventRows:n,forPrint:e.forPrint,isHitComboAllowed:e.isHitComboAllowed}))))}componentDidMount(){this.requestScrollReset()}componentDidUpdate(e){e.dateProfile!==this.props.dateProfile?this.requestScrollReset():this.flushScrollReset()}requestScrollReset(){this.needsScrollReset=!0,this.flushScrollReset()}flushScrollReset(){if(this.needsScrollReset&&this.props.clientWidth){const e=EQ(this.elRef.current,this.props.dateProfile);if(e){const n=e.closest(".fc-daygrid-body"),s=n.closest(".fc-scroller"),a=e.getBoundingClientRect().top-n.getBoundingClientRect().top;s.scrollTop=a?a+1:0}this.needsScrollReset=!1}}};function EQ(t,e){let n;return e.currentRangeUnit.match(/year|month/)&&(n=t.querySelector(`[data-date="${mW(e.currentDate)}-01"]`)),n||(n=t.querySelector(`[data-date="${Qk(e.currentDate)}"]`)),n}class TQ extends JD{constructor(){super(...arguments),this.forceDayIfListItem=!0}sliceRange(e,n){return n.sliceRange(e)}}class ER extends Za{constructor(){super(...arguments),this.slicer=new TQ,this.tableRef=Ui()}render(){let{props:e,context:n}=this;return we(SQ,Object.assign({ref:this.tableRef},this.slicer.sliceProps(e,e.dateProfile,e.nextDayThreshold,n,e.dayTableModel),{dateProfile:e.dateProfile,cells:e.dayTableModel.cells,colGroupNode:e.colGroupNode,tableMinWidth:e.tableMinWidth,renderRowIntro:e.renderRowIntro,dayMaxEvents:e.dayMaxEvents,dayMaxEventRows:e.dayMaxEventRows,showWeekNumbers:e.showWeekNumbers,expandRows:e.expandRows,headerAlignElRef:e.headerAlignElRef,clientWidth:e.clientWidth,clientHeight:e.clientHeight,forPrint:e.forPrint}))}}class AQ extends dQ{constructor(){super(...arguments),this.buildDayTableModel=qt(DQ),this.headerRef=Ui(),this.tableRef=Ui()}render(){let{options:e,dateProfileGenerator:n}=this.context,{props:s}=this,a=this.buildDayTableModel(s.dateProfile,n),l=e.dayHeaders&&we(QD,{ref:this.headerRef,dateProfile:s.dateProfile,dates:a.headerDates,datesRepDistinctDays:a.rowCnt===1}),o=c=>we(ER,{ref:this.tableRef,dateProfile:s.dateProfile,dayTableModel:a,businessHours:s.businessHours,dateSelection:s.dateSelection,eventStore:s.eventStore,eventUiBases:s.eventUiBases,eventSelection:s.eventSelection,eventDrag:s.eventDrag,eventResize:s.eventResize,nextDayThreshold:e.nextDayThreshold,colGroupNode:c.tableColGroupNode,tableMinWidth:c.tableMinWidth,dayMaxEvents:e.dayMaxEvents,dayMaxEventRows:e.dayMaxEventRows,showWeekNumbers:e.weekNumbers,expandRows:!s.isHeightAuto,headerAlignElRef:this.headerElRef,clientWidth:c.clientWidth,clientHeight:c.clientHeight,forPrint:s.forPrint});return e.dayMinWidth?this.renderHScrollLayout(l,o,a.colCnt,e.dayMinWidth):this.renderSimpleLayout(l,o)}}function DQ(t,e){let n=new ZD(t.renderRange,e);return new XD(n,/year|month|week/.test(t.currentRangeUnit))}class RQ extends ND{buildRenderRange(e,n,s){let a=super.buildRenderRange(e,n,s),{props:l}=this;return PQ({currentRange:a,snapToWeek:/^(year|month)$/.test(n),fixedWeekCount:l.fixedWeekCount,dateEnv:l.dateEnv})}}function PQ(t){let{dateEnv:e,currentRange:n}=t,{start:s,end:a}=n,l;if(t.snapToWeek&&(s=e.startOfWeek(s),l=e.startOfWeek(a),l.valueOf()!==a.valueOf()&&(a=M1(l,1))),t.fixedWeekCount){let o=e.startOfWeek(e.startOfMonth(vi(n.end,-1))),c=Math.ceil(eW(o,a));a=M1(a,6-c)}return{start:s,end:a}}var MQ=':root{--fc-daygrid-event-dot-width:8px}.fc-daygrid-day-events:after,.fc-daygrid-day-events:before,.fc-daygrid-day-frame:after,.fc-daygrid-day-frame:before,.fc-daygrid-event-harness:after,.fc-daygrid-event-harness:before{clear:both;content:"";display:table}.fc .fc-daygrid-body{position:relative;z-index:1}.fc .fc-daygrid-day.fc-day-today{background-color:var(--fc-today-bg-color)}.fc .fc-daygrid-day-frame{min-height:100%;position:relative}.fc .fc-daygrid-day-top{display:flex;flex-direction:row-reverse}.fc .fc-day-other .fc-daygrid-day-top{opacity:.3}.fc .fc-daygrid-day-number{padding:4px;position:relative;z-index:4}.fc .fc-daygrid-month-start{font-size:1.1em;font-weight:700}.fc .fc-daygrid-day-events{margin-top:1px}.fc .fc-daygrid-body-balanced .fc-daygrid-day-events{left:0;position:absolute;right:0}.fc .fc-daygrid-body-unbalanced .fc-daygrid-day-events{min-height:2em;position:relative}.fc .fc-daygrid-body-natural .fc-daygrid-day-events{margin-bottom:1em}.fc .fc-daygrid-event-harness{position:relative}.fc .fc-daygrid-event-harness-abs{left:0;position:absolute;right:0;top:0}.fc .fc-daygrid-bg-harness{bottom:0;position:absolute;top:0}.fc .fc-daygrid-day-bg .fc-non-business{z-index:1}.fc .fc-daygrid-day-bg .fc-bg-event{z-index:2}.fc .fc-daygrid-day-bg .fc-highlight{z-index:3}.fc .fc-daygrid-event{margin-top:1px;z-index:6}.fc .fc-daygrid-event.fc-event-mirror{z-index:7}.fc .fc-daygrid-day-bottom{font-size:.85em;margin:0 2px}.fc .fc-daygrid-day-bottom:after,.fc .fc-daygrid-day-bottom:before{clear:both;content:"";display:table}.fc .fc-daygrid-more-link{border-radius:3px;cursor:pointer;line-height:1;margin-top:1px;max-width:100%;overflow:hidden;padding:2px;position:relative;white-space:nowrap;z-index:4}.fc .fc-daygrid-more-link:hover{background-color:rgba(0,0,0,.1)}.fc .fc-daygrid-week-number{background-color:var(--fc-neutral-bg-color);color:var(--fc-neutral-text-color);min-width:1.5em;padding:2px;position:absolute;text-align:center;top:0;z-index:5}.fc .fc-more-popover .fc-popover-body{min-width:220px;padding:10px}.fc-direction-ltr .fc-daygrid-event.fc-event-start,.fc-direction-rtl .fc-daygrid-event.fc-event-end{margin-left:2px}.fc-direction-ltr .fc-daygrid-event.fc-event-end,.fc-direction-rtl .fc-daygrid-event.fc-event-start{margin-right:2px}.fc-direction-ltr .fc-daygrid-more-link{float:left}.fc-direction-ltr .fc-daygrid-week-number{border-radius:0 0 3px 0;left:0}.fc-direction-rtl .fc-daygrid-more-link{float:right}.fc-direction-rtl .fc-daygrid-week-number{border-radius:0 0 0 3px;right:0}.fc-liquid-hack .fc-daygrid-day-frame{position:static}.fc-daygrid-event{border-radius:3px;font-size:var(--fc-small-font-size);position:relative;white-space:nowrap}.fc-daygrid-block-event .fc-event-time{font-weight:700}.fc-daygrid-block-event .fc-event-time,.fc-daygrid-block-event .fc-event-title{padding:1px}.fc-daygrid-dot-event{align-items:center;display:flex;padding:2px 0}.fc-daygrid-dot-event .fc-event-title{flex-grow:1;flex-shrink:1;font-weight:700;min-width:0;overflow:hidden}.fc-daygrid-dot-event.fc-event-mirror,.fc-daygrid-dot-event:hover{background:rgba(0,0,0,.1)}.fc-daygrid-dot-event.fc-event-selected:before{bottom:-10px;top:-10px}.fc-daygrid-event-dot{border:calc(var(--fc-daygrid-event-dot-width)/2) solid var(--fc-event-border-color);border-radius:calc(var(--fc-daygrid-event-dot-width)/2);box-sizing:content-box;height:0;margin:0 4px;width:0}.fc-direction-ltr .fc-daygrid-event .fc-event-time{margin-right:3px}.fc-direction-rtl .fc-daygrid-event .fc-event-time{margin-left:3px}';Vk(MQ);var IQ=Fr({name:"@fullcalendar/daygrid",initialView:"dayGridMonth",views:{dayGrid:{component:AQ,dateProfileGeneratorClass:RQ},dayGridDay:{type:"dayGrid",duration:{days:1}},dayGridWeek:{type:"dayGrid",duration:{weeks:1}},dayGridMonth:{type:"dayGrid",duration:{months:1},fixedWeekCount:!0},dayGridYear:{type:"dayGrid",duration:{years:1}}}});class OQ extends GK{getKeyInfo(){return{allDay:{},timed:{}}}getKeysForDateSpan(e){return e.allDay?["allDay"]:["timed"]}getKeysForEventDef(e){return e.allDay?NK(e)?["timed","allDay"]:["allDay"]:["timed"]}}const FQ=Vn({hour:"numeric",minute:"2-digit",omitZeroMinute:!0,meridiem:"short"});function TR(t){let e=["fc-timegrid-slot","fc-timegrid-slot-label",t.isLabeled?"fc-scrollgrid-shrink":"fc-timegrid-slot-minor"];return we(Or.Consumer,null,n=>{if(!t.isLabeled)return we("td",{className:e.join(" "),"data-time":t.isoTimeStr});let{dateEnv:s,options:a,viewApi:l}=n,o=a.slotLabelFormat==null?FQ:Array.isArray(a.slotLabelFormat)?Vn(a.slotLabelFormat[0]):Vn(a.slotLabelFormat),c={level:0,time:t.time,date:s.toDate(t.date),view:l,text:s.format(t.date,o)};return we(Ps,{elTag:"td",elClasses:e,elAttrs:{"data-time":t.isoTimeStr},renderProps:c,generatorName:"slotLabelContent",customGenerator:a.slotLabelContent,defaultGenerator:LQ,classNameGenerator:a.slotLabelClassNames,didMount:a.slotLabelDidMount,willUnmount:a.slotLabelWillUnmount},d=>we("div",{className:"fc-timegrid-slot-label-frame fc-scrollgrid-shrink-frame"},we(d,{elTag:"div",elClasses:["fc-timegrid-slot-label-cushion","fc-scrollgrid-shrink-cushion"]})))})}function LQ(t){return t.text}class $Q extends jn{render(){return this.props.slatMetas.map(e=>we("tr",{key:e.key},we(TR,Object.assign({},e))))}}const BQ=Vn({week:"short"}),qQ=5;class HQ extends Za{constructor(){super(...arguments),this.allDaySplitter=new OQ,this.headerElRef=Ui(),this.rootElRef=Ui(),this.scrollerElRef=Ui(),this.state={slatCoords:null},this.handleScrollTopRequest=e=>{let n=this.scrollerElRef.current;n&&(n.scrollTop=e)},this.renderHeadAxis=(e,n="")=>{let{options:s}=this.context,{dateProfile:a}=this.props,l=a.renderRange,c=Eo(l.start,l.end)===1?Gp(this.context,l.start,"week"):{};return s.weekNumbers&&e==="day"?we(lR,{elTag:"th",elClasses:["fc-timegrid-axis","fc-scrollgrid-shrink"],elAttrs:{"aria-hidden":!0},date:l.start,defaultFormat:BQ},d=>we("div",{className:["fc-timegrid-axis-frame","fc-scrollgrid-shrink-frame","fc-timegrid-axis-frame-liquid"].join(" "),style:{height:n}},we(d,{elTag:"a",elClasses:["fc-timegrid-axis-cushion","fc-scrollgrid-shrink-cushion","fc-scrollgrid-sync-inner"],elAttrs:c}))):we("th",{"aria-hidden":!0,className:"fc-timegrid-axis"},we("div",{className:"fc-timegrid-axis-frame",style:{height:n}}))},this.renderTableRowAxis=e=>{let{options:n,viewApi:s}=this.context,a={text:n.allDayText,view:s};return we(Ps,{elTag:"td",elClasses:["fc-timegrid-axis","fc-scrollgrid-shrink"],elAttrs:{"aria-hidden":!0},renderProps:a,generatorName:"allDayContent",customGenerator:n.allDayContent,defaultGenerator:zQ,classNameGenerator:n.allDayClassNames,didMount:n.allDayDidMount,willUnmount:n.allDayWillUnmount},l=>we("div",{className:["fc-timegrid-axis-frame","fc-scrollgrid-shrink-frame",e==null?" fc-timegrid-axis-frame-liquid":""].join(" "),style:{height:e}},we(l,{elTag:"span",elClasses:["fc-timegrid-axis-cushion","fc-scrollgrid-shrink-cushion","fc-scrollgrid-sync-inner"]})))},this.handleSlatCoords=e=>{this.setState({slatCoords:e})}}renderSimpleLayout(e,n,s){let{context:a,props:l}=this,o=[],c=Yp(a.options);return e&&o.push({type:"header",key:"header",isSticky:c,chunk:{elRef:this.headerElRef,tableClassName:"fc-col-header",rowContent:e}}),n&&(o.push({type:"body",key:"all-day",chunk:{content:n}}),o.push({type:"body",key:"all-day-divider",outerContent:we("tr",{role:"presentation",className:"fc-scrollgrid-section"},we("td",{className:"fc-timegrid-divider "+a.theme.getClass("tableCellShaded")}))})),o.push({type:"body",key:"body",liquid:!0,expandRows:!!a.options.expandRows,chunk:{scrollerElRef:this.scrollerElRef,content:s}}),we(Vp,{elRef:this.rootElRef,elClasses:["fc-timegrid"],viewSpec:a.viewSpec},we(gw,{liquid:!l.isHeightAuto&&!l.forPrint,collapsibleWidth:l.forPrint,cols:[{width:"shrink"}],sections:o}))}renderHScrollLayout(e,n,s,a,l,o,c){let d=this.context.pluginHooks.scrollGridImpl;if(!d)throw new Error("No ScrollGrid implementation");let{context:m,props:u}=this,h=!u.forPrint&&Yp(m.options),p=!u.forPrint&&sR(m.options),g=[];e&&g.push({type:"header",key:"header",isSticky:h,syncRowHeights:!0,chunks:[{key:"axis",rowContent:x=>we("tr",{role:"presentation"},this.renderHeadAxis("day",x.rowSyncHeights[0]))},{key:"cols",elRef:this.headerElRef,tableClassName:"fc-col-header",rowContent:e}]}),n&&(g.push({type:"body",key:"all-day",syncRowHeights:!0,chunks:[{key:"axis",rowContent:x=>we("tr",{role:"presentation"},this.renderTableRowAxis(x.rowSyncHeights[0]))},{key:"cols",content:n}]}),g.push({key:"all-day-divider",type:"body",outerContent:we("tr",{role:"presentation",className:"fc-scrollgrid-section"},we("td",{colSpan:2,className:"fc-timegrid-divider "+m.theme.getClass("tableCellShaded")}))}));let v=m.options.nowIndicator;return g.push({type:"body",key:"body",liquid:!0,expandRows:!!m.options.expandRows,chunks:[{key:"axis",content:x=>we("div",{className:"fc-timegrid-axis-chunk"},we("table",{"aria-hidden":!0,style:{height:x.expandRows?x.clientHeight:""}},x.tableColGroupNode,we("tbody",null,we($Q,{slatMetas:o}))),we("div",{className:"fc-timegrid-now-indicator-container"},we(sd,{unit:v?"minute":"day"},y=>{let b=v&&c&&c.safeComputeTop(y);return typeof b=="number"?we(xw,{elClasses:["fc-timegrid-now-indicator-arrow"],elStyle:{top:b},isAxis:!0,date:y}):null})))},{key:"cols",scrollerElRef:this.scrollerElRef,content:s}]}),p&&g.push({key:"footer",type:"footer",isSticky:!0,chunks:[{key:"axis",content:ky},{key:"cols",content:ky}]}),we(Vp,{elRef:this.rootElRef,elClasses:["fc-timegrid"],viewSpec:m.viewSpec},we(d,{liquid:!u.isHeightAuto&&!u.forPrint,forPrint:u.forPrint,collapsibleWidth:!1,colGroups:[{width:"shrink",cols:[{width:"shrink"}]},{cols:[{span:a,minWidth:l}]}],sections:g}))}getAllDayMaxEventProps(){let{dayMaxEvents:e,dayMaxEventRows:n}=this.context.options;return(e===!0||n===!0)&&(e=void 0,n=qQ),{dayMaxEvents:e,dayMaxEventRows:n}}}function zQ(t){return t.text}class VQ{constructor(e,n,s){this.positions=e,this.dateProfile=n,this.slotDuration=s}safeComputeTop(e){let{dateProfile:n}=this;if(Nr(n.currentRange,e)){let s=On(e),a=e.valueOf()-s.valueOf();if(a>=ma(n.slotMinTime)&&a<ma(n.slotMaxTime))return this.computeTimeTop(Jt(a))}return null}computeDateTop(e,n){return n||(n=On(e)),this.computeTimeTop(Jt(e.valueOf()-n.valueOf()))}computeTimeTop(e){let{positions:n,dateProfile:s}=this,a=n.els.length,l=(e.milliseconds-ma(s.slotMinTime))/ma(this.slotDuration),o,c;return l=Math.max(0,l),l=Math.min(a,l),o=Math.floor(l),o=Math.min(o,a-1),c=l-o,n.tops[o]+n.getHeight(o)*c}}class UQ extends jn{render(){let{props:e,context:n}=this,{options:s}=n,{slatElRefs:a}=e;return we("tbody",null,e.slatMetas.map((l,o)=>{let c={time:l.time,date:n.dateEnv.toDate(l.date),view:n.viewApi};return we("tr",{key:l.key,ref:a.createRef(l.key)},e.axis&&we(TR,Object.assign({},l)),we(Ps,{elTag:"td",elClasses:["fc-timegrid-slot","fc-timegrid-slot-lane",!l.isLabeled&&"fc-timegrid-slot-minor"],elAttrs:{"data-time":l.isoTimeStr},renderProps:c,generatorName:"slotLaneContent",customGenerator:s.slotLaneContent,classNameGenerator:s.slotLaneClassNames,didMount:s.slotLaneDidMount,willUnmount:s.slotLaneWillUnmount}))}))}}class WQ extends jn{constructor(){super(...arguments),this.rootElRef=Ui(),this.slatElRefs=new gr}render(){let{props:e,context:n}=this;return we("div",{ref:this.rootElRef,className:"fc-timegrid-slots"},we("table",{"aria-hidden":!0,className:n.theme.getClass("table"),style:{minWidth:e.tableMinWidth,width:e.clientWidth,height:e.minHeight}},e.tableColGroupNode,we(UQ,{slatElRefs:this.slatElRefs,axis:e.axis,slatMetas:e.slatMetas})))}componentDidMount(){this.updateSizing()}componentDidUpdate(){this.updateSizing()}componentWillUnmount(){this.props.onCoords&&this.props.onCoords(null)}updateSizing(){let{context:e,props:n}=this;n.onCoords&&n.clientWidth!==null&&this.rootElRef.current.offsetHeight&&n.onCoords(new VQ(new qc(this.rootElRef.current,KQ(this.slatElRefs.currentMap,n.slatMetas),!1,!0),this.props.dateProfile,e.options.slotDuration))}}function KQ(t,e){return e.map(n=>t[n.key])}function Ad(t,e){let n=[],s;for(s=0;s<e;s+=1)n.push([]);if(t)for(s=0;s<t.length;s+=1)n[t[s].col].push(t[s]);return n}function rC(t,e){let n=[];if(t){for(let s=0;s<e;s+=1)n[s]={affectedInstances:t.affectedInstances,isEvent:t.isEvent,segs:[]};for(let s of t.segs)n[s.col].segs.push(s)}else for(let s=0;s<e;s+=1)n[s]=null;return n}class GQ extends jn{render(){let{props:e}=this;return we(oR,{elClasses:["fc-timegrid-more-link"],elStyle:{top:e.top,bottom:e.bottom},allDayDate:null,moreCnt:e.hiddenSegs.length,allSegs:e.hiddenSegs,hiddenSegs:e.hiddenSegs,extraDateSpan:e.extraDateSpan,dateProfile:e.dateProfile,todayRange:e.todayRange,popoverContent:()=>DR(e.hiddenSegs,e),defaultGenerator:YQ,forceTimed:!0},n=>we(n,{elTag:"div",elClasses:["fc-timegrid-more-link-inner","fc-sticky"]}))}}function YQ(t){return t.shortText}function QQ(t,e,n){let s=new KD;e!=null&&(s.strictOrder=e),n!=null&&(s.maxStackCnt=n);let a=s.addSegs(t),l=lG(a),o=ZQ(s);return o=tZ(o,1),{segRects:nZ(o),hiddenGroups:l}}function ZQ(t){const{entriesByLevel:e}=t,n=ww((s,a)=>s+":"+a,(s,a)=>{let l=eZ(t,s,a),o=lC(l,n),c=e[s][a];return[Object.assign(Object.assign({},c),{nextLevelNodes:o[0]}),c.thickness+o[1]]});return lC(e.length?{level:0,lateralStart:0,lateralEnd:e[0].length}:null,n)[0]}function lC(t,e){if(!t)return[[],0];let{level:n,lateralStart:s,lateralEnd:a}=t,l=s,o=[];for(;l<a;)o.push(e(n,l)),l+=1;return o.sort(XQ),[o.map(JQ),o[0][1]]}function XQ(t,e){return e[1]-t[1]}function JQ(t){return t[0]}function eZ(t,e,n){let{levelCoords:s,entriesByLevel:a}=t,l=a[e][n],o=s[e]+l.thickness,c=s.length,d=e;for(;d<c&&s[d]<o;d+=1);for(;d<c;d+=1){let m=a[d],u,h=by(m,l.span.start,yy),p=h[0]+h[1],g=p;for(;(u=m[g])&&u.span.start<l.span.end;)g+=1;if(p<g)return{level:d,lateralStart:p,lateralEnd:g}}return null}function tZ(t,e){const n=ww((s,a,l)=>Jl(s),(s,a,l)=>{let{nextLevelNodes:o,thickness:c}=s,d=c+l,m=c/d,u,h=[];if(!o.length)u=e;else for(let g of o)if(u===void 0){let v=n(g,a,d);u=v[0],h.push(v[1])}else{let v=n(g,u,0);h.push(v[1])}let p=(u-a)*m;return[u-p,Object.assign(Object.assign({},s),{thickness:p,nextLevelNodes:h})]});return t.map(s=>n(s,0,0)[1])}function nZ(t){let e=[];const n=ww((a,l,o)=>Jl(a),(a,l,o)=>{let c=Object.assign(Object.assign({},a),{levelCoord:l,stackDepth:o,stackForward:0});return e.push(c),c.stackForward=s(a.nextLevelNodes,l+a.thickness,o+1)+1});function s(a,l,o){let c=0;for(let d of a)c=Math.max(n(d,l,o),c);return c}return s(t,0,0),e}function ww(t,e){const n={};return(...s)=>{let a=t(...s);return a in n?n[a]:n[a]=e(...s)}}function oC(t,e,n=null,s=0){let a=[];if(n)for(let l=0;l<t.length;l+=1){let o=t[l],c=n.computeDateTop(o.start,e),d=Math.max(c+(s||0),n.computeDateTop(o.end,e));a.push({start:Math.round(c),end:Math.round(d)})}return a}function iZ(t,e,n,s){let a=[],l=[];for(let m=0;m<t.length;m+=1){let u=e[m];u?a.push({index:m,thickness:1,span:u}):l.push(t[m])}let{segRects:o,hiddenGroups:c}=QQ(a,n,s),d=[];for(let m of o)d.push({seg:t[m.index],rect:m});for(let m of l)d.push({seg:m,rect:null});return{segPlacements:d,hiddenGroups:c}}const sZ=Vn({hour:"numeric",minute:"2-digit",meridiem:!1});class AR extends jn{render(){return we(vw,Object.assign({},this.props,{elClasses:["fc-timegrid-event","fc-v-event",this.props.isShort&&"fc-timegrid-event-short"],defaultTimeFormat:sZ}))}}class aZ extends jn{constructor(){super(...arguments),this.sortEventSegs=qt(OD)}render(){let{props:e,context:n}=this,{options:s}=n,a=s.selectMirror,l=e.eventDrag&&e.eventDrag.segs||e.eventResize&&e.eventResize.segs||a&&e.dateSelectionSegs||[],o=e.eventDrag&&e.eventDrag.affectedInstances||e.eventResize&&e.eventResize.affectedInstances||{},c=this.sortEventSegs(e.fgEventSegs,s.eventOrder);return we(yw,{elTag:"td",elRef:e.elRef,elClasses:["fc-timegrid-col",...e.extraClassNames||[]],elAttrs:Object.assign({role:"gridcell"},e.extraDataAttrs),date:e.date,dateProfile:e.dateProfile,todayRange:e.todayRange,extraRenderProps:e.extraRenderProps},d=>we("div",{className:"fc-timegrid-col-frame"},we("div",{className:"fc-timegrid-col-bg"},this.renderFillSegs(e.businessHourSegs,"non-business"),this.renderFillSegs(e.bgEventSegs,"bg-event"),this.renderFillSegs(e.dateSelectionSegs,"highlight")),we("div",{className:"fc-timegrid-col-events"},this.renderFgSegs(c,o,!1,!1,!1)),we("div",{className:"fc-timegrid-col-events"},this.renderFgSegs(l,{},!!e.eventDrag,!!e.eventResize,!!a,"mirror")),we("div",{className:"fc-timegrid-now-indicator-container"},this.renderNowIndicator(e.nowIndicatorSegs)),bw(s)&&we(d,{elTag:"div",elClasses:["fc-timegrid-col-misc"]})))}renderFgSegs(e,n,s,a,l,o){let{props:c}=this;return c.forPrint?DR(e,c):this.renderPositionedFgSegs(e,n,s,a,l,o)}renderPositionedFgSegs(e,n,s,a,l,o){let{eventMaxStack:c,eventShortHeight:d,eventOrderStrict:m,eventMinHeight:u}=this.context.options,{date:h,slatCoords:p,eventSelection:g,todayRange:v,nowDate:x}=this.props,y=s||a||l,b=oC(e,h,p,u),{segPlacements:k,hiddenGroups:w}=iZ(e,b,m,c);return we(In,null,this.renderHiddenGroups(w,e),k.map(T=>{let{seg:j,rect:D}=T,_=j.eventRange.instance.instanceId,N=y||!!(!n[_]&&D),A=Gv(D&&D.span),P=!y&&D?this.computeSegHStyle(D):{left:0,right:0},E=!!D&&D.stackForward>0,I=!!D&&D.span.end-D.span.start<d;return we("div",{className:"fc-timegrid-event-harness"+(E?" fc-timegrid-event-harness-inset":""),key:o||_,style:Object.assign(Object.assign({visibility:N?"":"hidden"},A),P)},we(AR,Object.assign({seg:j,isDragging:s,isResizing:a,isDateSelecting:l,isSelected:_===g,isShort:I},ml(j,v,x))))}))}renderHiddenGroups(e,n){let{extraDateSpan:s,dateProfile:a,todayRange:l,nowDate:o,eventSelection:c,eventDrag:d,eventResize:m}=this.props;return we(In,null,e.map(u=>{let h=Gv(u.span),p=rZ(u.entries,n);return we(GQ,{key:gD(cR(p)),hiddenSegs:p,top:h.top,bottom:h.bottom,extraDateSpan:s,dateProfile:a,todayRange:l,nowDate:o,eventSelection:c,eventDrag:d,eventResize:m})}))}renderFillSegs(e,n){let{props:s,context:a}=this,o=oC(e,s.date,s.slatCoords,a.options.eventMinHeight).map((c,d)=>{let m=e[d];return we("div",{key:LD(m.eventRange),className:"fc-timegrid-bg-harness",style:Gv(c)},n==="bg-event"?we(aR,Object.assign({seg:m},ml(m,s.todayRange,s.nowDate))):rR(n))});return we(In,null,o)}renderNowIndicator(e){let{slatCoords:n,date:s}=this.props;return n?e.map((a,l)=>we(xw,{key:l,elClasses:["fc-timegrid-now-indicator-line"],elStyle:{top:n.computeDateTop(a.start,s)},isAxis:!1,date:s})):null}computeSegHStyle(e){let{isRtl:n,options:s}=this.context,a=s.slotEventOverlap,l=e.levelCoord,o=e.levelCoord+e.thickness,c,d;a&&(o=Math.min(1,l+(o-l)*2)),n?(c=1-o,d=l):(c=l,d=1-o);let m={zIndex:e.stackDepth+1,left:c*100+"%",right:d*100+"%"};return a&&!e.stackForward&&(m[n?"marginLeft":"marginRight"]=20),m}}function DR(t,{todayRange:e,nowDate:n,eventSelection:s,eventDrag:a,eventResize:l}){let o=(a?a.affectedInstances:null)||(l?l.affectedInstances:null)||{};return we(In,null,t.map(c=>{let d=c.eventRange.instance.instanceId;return we("div",{key:d,style:{visibility:o[d]?"hidden":""}},we(AR,Object.assign({seg:c,isDragging:!1,isResizing:!1,isDateSelecting:!1,isSelected:d===s,isShort:!1},ml(c,e,n))))}))}function Gv(t){return t?{top:t.start,bottom:-t.end}:{top:"",bottom:""}}function rZ(t,e){return t.map(n=>e[n.index])}class lZ extends jn{constructor(){super(...arguments),this.splitFgEventSegs=qt(Ad),this.splitBgEventSegs=qt(Ad),this.splitBusinessHourSegs=qt(Ad),this.splitNowIndicatorSegs=qt(Ad),this.splitDateSelectionSegs=qt(Ad),this.splitEventDrag=qt(rC),this.splitEventResize=qt(rC),this.rootElRef=Ui(),this.cellElRefs=new gr}render(){let{props:e,context:n}=this,s=n.options.nowIndicator&&e.slatCoords&&e.slatCoords.safeComputeTop(e.nowDate),a=e.cells.length,l=this.splitFgEventSegs(e.fgEventSegs,a),o=this.splitBgEventSegs(e.bgEventSegs,a),c=this.splitBusinessHourSegs(e.businessHourSegs,a),d=this.splitNowIndicatorSegs(e.nowIndicatorSegs,a),m=this.splitDateSelectionSegs(e.dateSelectionSegs,a),u=this.splitEventDrag(e.eventDrag,a),h=this.splitEventResize(e.eventResize,a);return we("div",{className:"fc-timegrid-cols",ref:this.rootElRef},we("table",{role:"presentation",style:{minWidth:e.tableMinWidth,width:e.clientWidth}},e.tableColGroupNode,we("tbody",{role:"presentation"},we("tr",{role:"row"},e.axis&&we("td",{"aria-hidden":!0,className:"fc-timegrid-col fc-timegrid-axis"},we("div",{className:"fc-timegrid-col-frame"},we("div",{className:"fc-timegrid-now-indicator-container"},typeof s=="number"&&we(xw,{elClasses:["fc-timegrid-now-indicator-arrow"],elStyle:{top:s},isAxis:!0,date:e.nowDate})))),e.cells.map((p,g)=>we(aZ,{key:p.key,elRef:this.cellElRefs.createRef(p.key),dateProfile:e.dateProfile,date:p.date,nowDate:e.nowDate,todayRange:e.todayRange,extraRenderProps:p.extraRenderProps,extraDataAttrs:p.extraDataAttrs,extraClassNames:p.extraClassNames,extraDateSpan:p.extraDateSpan,fgEventSegs:l[g],bgEventSegs:o[g],businessHourSegs:c[g],nowIndicatorSegs:d[g],dateSelectionSegs:m[g],eventDrag:u[g],eventResize:h[g],slatCoords:e.slatCoords,eventSelection:e.eventSelection,forPrint:e.forPrint}))))))}componentDidMount(){this.updateCoords()}componentDidUpdate(){this.updateCoords()}updateCoords(){let{props:e}=this;e.onColCoords&&e.clientWidth!==null&&e.onColCoords(new qc(this.rootElRef.current,oZ(this.cellElRefs.currentMap,e.cells),!0,!1))}}function oZ(t,e){return e.map(n=>t[n.key])}class cZ extends Za{constructor(){super(...arguments),this.processSlotOptions=qt(dZ),this.state={slatCoords:null},this.handleRootEl=e=>{e?this.context.registerInteractiveComponent(this,{el:e,isHitComboAllowed:this.props.isHitComboAllowed}):this.context.unregisterInteractiveComponent(this)},this.handleScrollRequest=e=>{let{onScrollTopRequest:n}=this.props,{slatCoords:s}=this.state;if(n&&s){if(e.time){let a=s.computeTimeTop(e.time);a=Math.ceil(a),a&&(a+=1),n(a)}return!0}return!1},this.handleColCoords=e=>{this.colCoords=e},this.handleSlatCoords=e=>{this.setState({slatCoords:e}),this.props.onSlatCoords&&this.props.onSlatCoords(e)}}render(){let{props:e,state:n}=this;return we("div",{className:"fc-timegrid-body",ref:this.handleRootEl,style:{width:e.clientWidth,minWidth:e.tableMinWidth}},we(WQ,{axis:e.axis,dateProfile:e.dateProfile,slatMetas:e.slatMetas,clientWidth:e.clientWidth,minHeight:e.expandRows?e.clientHeight:"",tableMinWidth:e.tableMinWidth,tableColGroupNode:e.axis?e.tableColGroupNode:null,onCoords:this.handleSlatCoords}),we(lZ,{cells:e.cells,axis:e.axis,dateProfile:e.dateProfile,businessHourSegs:e.businessHourSegs,bgEventSegs:e.bgEventSegs,fgEventSegs:e.fgEventSegs,dateSelectionSegs:e.dateSelectionSegs,eventSelection:e.eventSelection,eventDrag:e.eventDrag,eventResize:e.eventResize,todayRange:e.todayRange,nowDate:e.nowDate,nowIndicatorSegs:e.nowIndicatorSegs,clientWidth:e.clientWidth,tableMinWidth:e.tableMinWidth,tableColGroupNode:e.tableColGroupNode,slatCoords:n.slatCoords,onColCoords:this.handleColCoords,forPrint:e.forPrint}))}componentDidMount(){this.scrollResponder=this.context.createScrollResponder(this.handleScrollRequest)}componentDidUpdate(e){this.scrollResponder.update(e.dateProfile!==this.props.dateProfile)}componentWillUnmount(){this.scrollResponder.detach()}queryHit(e,n){let{dateEnv:s,options:a}=this.context,{colCoords:l}=this,{dateProfile:o}=this.props,{slatCoords:c}=this.state,{snapDuration:d,snapsPerSlot:m}=this.processSlotOptions(this.props.slotDuration,a.snapDuration),u=l.leftToIndex(e),h=c.positions.topToIndex(n);if(u!=null&&h!=null){let p=this.props.cells[u],g=c.positions.tops[h],v=c.positions.getHeight(h),x=(n-g)/v,y=Math.floor(x*m),b=h*m+y,k=this.props.cells[u].date,w=hy(o.slotMinTime,QU(d,b)),T=s.add(k,w),j=s.add(T,d);return{dateProfile:o,dateSpan:Object.assign({range:{start:T,end:j},allDay:!1},p.extraDateSpan),dayEl:l.els[u],rect:{left:l.lefts[u],right:l.rights[u],top:g,bottom:g+v},layer:0}}return null}}function dZ(t,e){let n=e||t,s=Yk(t,n);return s===null&&(n=t,s=1),{snapDuration:n,snapsPerSlot:s}}class mZ extends JD{sliceRange(e,n){let s=[];for(let a=0;a<n.length;a+=1){let l=co(e,n[a]);l&&s.push({start:l.start,end:l.end,isStart:l.start.valueOf()===e.start.valueOf(),isEnd:l.end.valueOf()===e.end.valueOf(),col:a})}return s}}class uZ extends Za{constructor(){super(...arguments),this.buildDayRanges=qt(hZ),this.slicer=new mZ,this.timeColsRef=Ui()}render(){let{props:e,context:n}=this,{dateProfile:s,dayTableModel:a}=e,{nowIndicator:l,nextDayThreshold:o}=n.options,c=this.buildDayRanges(a,s,n.dateEnv);return we(sd,{unit:l?"minute":"day"},(d,m)=>we(cZ,Object.assign({ref:this.timeColsRef},this.slicer.sliceProps(e,s,null,n,c),{forPrint:e.forPrint,axis:e.axis,dateProfile:s,slatMetas:e.slatMetas,slotDuration:e.slotDuration,cells:a.cells[0],tableColGroupNode:e.tableColGroupNode,tableMinWidth:e.tableMinWidth,clientWidth:e.clientWidth,clientHeight:e.clientHeight,expandRows:e.expandRows,nowDate:d,nowIndicatorSegs:l&&this.slicer.sliceNowDate(d,s,o,n,c),todayRange:m,onScrollTopRequest:e.onScrollTopRequest,onSlatCoords:e.onSlatCoords})))}}function hZ(t,e,n){let s=[];for(let a of t.headerDates)s.push({start:n.add(a,e.slotMinTime),end:n.add(a,e.slotMaxTime)});return s}const cC=[{hours:1},{minutes:30},{minutes:15},{seconds:30},{seconds:15}];function pZ(t,e,n,s,a){let l=new Date(0),o=t,c=Jt(0),d=n||gZ(s),m=[];for(;ma(o)<ma(e);){let u=a.add(l,o),h=Yk(c,d)!==null;m.push({date:u,time:o,key:u.toISOString(),isoTimeStr:uW(u),isLabeled:h}),o=hy(o,s),c=hy(c,s)}return m}function gZ(t){let e,n,s;for(e=cC.length-1;e>=0;e-=1)if(n=Jt(cC[e]),s=Yk(n,t),s!==null&&s>1)return n;return t}class fZ extends HQ{constructor(){super(...arguments),this.buildTimeColsModel=qt(vZ),this.buildSlatMetas=qt(pZ)}render(){let{options:e,dateEnv:n,dateProfileGenerator:s}=this.context,{props:a}=this,{dateProfile:l}=a,o=this.buildTimeColsModel(l,s),c=this.allDaySplitter.splitProps(a),d=this.buildSlatMetas(l.slotMinTime,l.slotMaxTime,e.slotLabelInterval,e.slotDuration,n),{dayMinWidth:m}=e,u=!m,h=m,p=e.dayHeaders&&we(QD,{dates:o.headerDates,dateProfile:l,datesRepDistinctDays:!0,renderIntro:u?this.renderHeadAxis:null}),g=e.allDaySlot!==!1&&(x=>we(ER,Object.assign({},c.allDay,{dateProfile:l,dayTableModel:o,nextDayThreshold:e.nextDayThreshold,tableMinWidth:x.tableMinWidth,colGroupNode:x.tableColGroupNode,renderRowIntro:u?this.renderTableRowAxis:null,showWeekNumbers:!1,expandRows:!1,headerAlignElRef:this.headerElRef,clientWidth:x.clientWidth,clientHeight:x.clientHeight,forPrint:a.forPrint},this.getAllDayMaxEventProps()))),v=x=>we(uZ,Object.assign({},c.timed,{dayTableModel:o,dateProfile:l,axis:u,slotDuration:e.slotDuration,slatMetas:d,forPrint:a.forPrint,tableColGroupNode:x.tableColGroupNode,tableMinWidth:x.tableMinWidth,clientWidth:x.clientWidth,clientHeight:x.clientHeight,onSlatCoords:this.handleSlatCoords,expandRows:x.expandRows,onScrollTopRequest:this.handleScrollTopRequest}));return h?this.renderHScrollLayout(p,g,v,o.colCnt,m,d,this.state.slatCoords):this.renderSimpleLayout(p,g,v)}}function vZ(t,e){let n=new ZD(t.renderRange,e);return new XD(n,!1)}var xZ='.fc-v-event{background-color:var(--fc-event-bg-color);border:1px solid var(--fc-event-border-color);display:block}.fc-v-event .fc-event-main{color:var(--fc-event-text-color);height:100%}.fc-v-event .fc-event-main-frame{display:flex;flex-direction:column;height:100%}.fc-v-event .fc-event-time{flex-grow:0;flex-shrink:0;max-height:100%;overflow:hidden}.fc-v-event .fc-event-title-container{flex-grow:1;flex-shrink:1;min-height:0}.fc-v-event .fc-event-title{bottom:0;max-height:100%;overflow:hidden;top:0}.fc-v-event:not(.fc-event-start){border-top-left-radius:0;border-top-right-radius:0;border-top-width:0}.fc-v-event:not(.fc-event-end){border-bottom-left-radius:0;border-bottom-right-radius:0;border-bottom-width:0}.fc-v-event.fc-event-selected:before{left:-10px;right:-10px}.fc-v-event .fc-event-resizer-start{cursor:n-resize}.fc-v-event .fc-event-resizer-end{cursor:s-resize}.fc-v-event:not(.fc-event-selected) .fc-event-resizer{height:var(--fc-event-resizer-thickness);left:0;right:0}.fc-v-event:not(.fc-event-selected) .fc-event-resizer-start{top:calc(var(--fc-event-resizer-thickness)/-2)}.fc-v-event:not(.fc-event-selected) .fc-event-resizer-end{bottom:calc(var(--fc-event-resizer-thickness)/-2)}.fc-v-event.fc-event-selected .fc-event-resizer{left:50%;margin-left:calc(var(--fc-event-resizer-dot-total-width)/-2)}.fc-v-event.fc-event-selected .fc-event-resizer-start{top:calc(var(--fc-event-resizer-dot-total-width)/-2)}.fc-v-event.fc-event-selected .fc-event-resizer-end{bottom:calc(var(--fc-event-resizer-dot-total-width)/-2)}.fc .fc-timegrid .fc-daygrid-body{z-index:2}.fc .fc-timegrid-divider{padding:0 0 2px}.fc .fc-timegrid-body{min-height:100%;position:relative;z-index:1}.fc .fc-timegrid-axis-chunk{position:relative}.fc .fc-timegrid-axis-chunk>table,.fc .fc-timegrid-slots{position:relative;z-index:1}.fc .fc-timegrid-slot{border-bottom:0;height:1.5em}.fc .fc-timegrid-slot:empty:before{content:"\\00a0"}.fc .fc-timegrid-slot-minor{border-top-style:dotted}.fc .fc-timegrid-slot-label-cushion{display:inline-block;white-space:nowrap}.fc .fc-timegrid-slot-label{vertical-align:middle}.fc .fc-timegrid-axis-cushion,.fc .fc-timegrid-slot-label-cushion{padding:0 4px}.fc .fc-timegrid-axis-frame-liquid{height:100%}.fc .fc-timegrid-axis-frame{align-items:center;display:flex;justify-content:flex-end;overflow:hidden}.fc .fc-timegrid-axis-cushion{flex-shrink:0;max-width:60px}.fc-direction-ltr .fc-timegrid-slot-label-frame{text-align:right}.fc-direction-rtl .fc-timegrid-slot-label-frame{text-align:left}.fc-liquid-hack .fc-timegrid-axis-frame-liquid{bottom:0;height:auto;left:0;position:absolute;right:0;top:0}.fc .fc-timegrid-col.fc-day-today{background-color:var(--fc-today-bg-color)}.fc .fc-timegrid-col-frame{min-height:100%;position:relative}.fc-media-screen.fc-liquid-hack .fc-timegrid-col-frame{bottom:0;height:auto;left:0;position:absolute;right:0;top:0}.fc-media-screen .fc-timegrid-cols{bottom:0;left:0;position:absolute;right:0;top:0}.fc-media-screen .fc-timegrid-cols>table{height:100%}.fc-media-screen .fc-timegrid-col-bg,.fc-media-screen .fc-timegrid-col-events,.fc-media-screen .fc-timegrid-now-indicator-container{left:0;position:absolute;right:0;top:0}.fc .fc-timegrid-col-bg{z-index:2}.fc .fc-timegrid-col-bg .fc-non-business{z-index:1}.fc .fc-timegrid-col-bg .fc-bg-event{z-index:2}.fc .fc-timegrid-col-bg .fc-highlight{z-index:3}.fc .fc-timegrid-bg-harness{left:0;position:absolute;right:0}.fc .fc-timegrid-col-events{z-index:3}.fc .fc-timegrid-now-indicator-container{bottom:0;overflow:hidden}.fc-direction-ltr .fc-timegrid-col-events{margin:0 2.5% 0 2px}.fc-direction-rtl .fc-timegrid-col-events{margin:0 2px 0 2.5%}.fc-timegrid-event-harness{position:absolute}.fc-timegrid-event-harness>.fc-timegrid-event{bottom:0;left:0;position:absolute;right:0;top:0}.fc-timegrid-event-harness-inset .fc-timegrid-event,.fc-timegrid-event.fc-event-mirror,.fc-timegrid-more-link{box-shadow:0 0 0 1px var(--fc-page-bg-color)}.fc-timegrid-event,.fc-timegrid-more-link{border-radius:3px;font-size:var(--fc-small-font-size)}.fc-timegrid-event{margin-bottom:1px}.fc-timegrid-event .fc-event-main{padding:1px 1px 0}.fc-timegrid-event .fc-event-time{font-size:var(--fc-small-font-size);margin-bottom:1px;white-space:nowrap}.fc-timegrid-event-short .fc-event-main-frame{flex-direction:row;overflow:hidden}.fc-timegrid-event-short .fc-event-time:after{content:"\\00a0-\\00a0"}.fc-timegrid-event-short .fc-event-title{font-size:var(--fc-small-font-size)}.fc-timegrid-more-link{background:var(--fc-more-link-bg-color);color:var(--fc-more-link-text-color);cursor:pointer;margin-bottom:1px;position:absolute;z-index:9999}.fc-timegrid-more-link-inner{padding:3px 2px;top:0}.fc-direction-ltr .fc-timegrid-more-link{right:0}.fc-direction-rtl .fc-timegrid-more-link{left:0}.fc .fc-timegrid-now-indicator-arrow,.fc .fc-timegrid-now-indicator-line{pointer-events:none}.fc .fc-timegrid-now-indicator-line{border-color:var(--fc-now-indicator-color);border-style:solid;border-width:1px 0 0;left:0;position:absolute;right:0;z-index:4}.fc .fc-timegrid-now-indicator-arrow{border-color:var(--fc-now-indicator-color);border-style:solid;margin-top:-5px;position:absolute;z-index:4}.fc-direction-ltr .fc-timegrid-now-indicator-arrow{border-bottom-color:transparent;border-top-color:transparent;border-width:5px 0 5px 6px;left:0}.fc-direction-rtl .fc-timegrid-now-indicator-arrow{border-bottom-color:transparent;border-top-color:transparent;border-width:5px 6px 5px 0;right:0}';Vk(xZ);const yZ={allDaySlot:Boolean};var bZ=Fr({name:"@fullcalendar/timegrid",initialView:"timeGridWeek",optionRefiners:yZ,views:{timeGrid:{component:fZ,usesMinMaxTime:!0,allDaySlot:!0,slotDuration:"00:30:00",slotEventOverlap:!0},timeGridDay:{type:"timeGrid",duration:{days:1}},timeGridWeek:{type:"timeGrid",duration:{weeks:1}}}});pw.touchMouseIgnoreWait=500;let jy=0,Qp=0,Ny=!1;class RR{constructor(e){this.subjectEl=null,this.selector="",this.handleSelector="",this.shouldIgnoreMove=!1,this.shouldWatchScroll=!0,this.isDragging=!1,this.isTouchDragging=!1,this.wasTouchScroll=!1,this.handleMouseDown=n=>{if(!this.shouldIgnoreMouse()&&kZ(n)&&this.tryStart(n)){let s=this.createEventFromMouse(n,!0);this.emitter.trigger("pointerdown",s),this.initScrollWatch(s),this.shouldIgnoreMove||document.addEventListener("mousemove",this.handleMouseMove),document.addEventListener("mouseup",this.handleMouseUp)}},this.handleMouseMove=n=>{let s=this.createEventFromMouse(n);this.recordCoords(s),this.emitter.trigger("pointermove",s)},this.handleMouseUp=n=>{document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("mouseup",this.handleMouseUp),this.emitter.trigger("pointerup",this.createEventFromMouse(n)),this.cleanup()},this.handleTouchStart=n=>{if(this.tryStart(n)){this.isTouchDragging=!0;let s=this.createEventFromTouch(n,!0);this.emitter.trigger("pointerdown",s),this.initScrollWatch(s);let a=n.target;this.shouldIgnoreMove||a.addEventListener("touchmove",this.handleTouchMove),a.addEventListener("touchend",this.handleTouchEnd),a.addEventListener("touchcancel",this.handleTouchEnd),window.addEventListener("scroll",this.handleTouchScroll,!0)}},this.handleTouchMove=n=>{let s=this.createEventFromTouch(n);this.recordCoords(s),this.emitter.trigger("pointermove",s)},this.handleTouchEnd=n=>{if(this.isDragging){let s=n.target;s.removeEventListener("touchmove",this.handleTouchMove),s.removeEventListener("touchend",this.handleTouchEnd),s.removeEventListener("touchcancel",this.handleTouchEnd),window.removeEventListener("scroll",this.handleTouchScroll,!0),this.emitter.trigger("pointerup",this.createEventFromTouch(n)),this.cleanup(),this.isTouchDragging=!1,wZ()}},this.handleTouchScroll=()=>{this.wasTouchScroll=!0},this.handleScroll=n=>{if(!this.shouldIgnoreMove){let s=window.scrollX-this.prevScrollX+this.prevPageX,a=window.scrollY-this.prevScrollY+this.prevPageY;this.emitter.trigger("pointermove",{origEvent:n,isTouch:this.isTouchDragging,subjectEl:this.subjectEl,pageX:s,pageY:a,deltaX:s-this.origPageX,deltaY:a-this.origPageY})}},this.containerEl=e,this.emitter=new Gg,e.addEventListener("mousedown",this.handleMouseDown),e.addEventListener("touchstart",this.handleTouchStart,{passive:!0}),jZ()}destroy(){this.containerEl.removeEventListener("mousedown",this.handleMouseDown),this.containerEl.removeEventListener("touchstart",this.handleTouchStart,{passive:!0}),NZ()}tryStart(e){let n=this.querySubjectEl(e),s=e.target;return n&&(!this.handleSelector||Ii(s,this.handleSelector))?(this.subjectEl=n,this.isDragging=!0,this.wasTouchScroll=!1,!0):!1}cleanup(){Ny=!1,this.isDragging=!1,this.subjectEl=null,this.destroyScrollWatch()}querySubjectEl(e){return this.selector?Ii(e.target,this.selector):this.containerEl}shouldIgnoreMouse(){return jy||this.isTouchDragging}cancelTouchScroll(){this.isDragging&&(Ny=!0)}initScrollWatch(e){this.shouldWatchScroll&&(this.recordCoords(e),window.addEventListener("scroll",this.handleScroll,!0))}recordCoords(e){this.shouldWatchScroll&&(this.prevPageX=e.pageX,this.prevPageY=e.pageY,this.prevScrollX=window.scrollX,this.prevScrollY=window.scrollY)}destroyScrollWatch(){this.shouldWatchScroll&&window.removeEventListener("scroll",this.handleScroll,!0)}createEventFromMouse(e,n){let s=0,a=0;return n?(this.origPageX=e.pageX,this.origPageY=e.pageY):(s=e.pageX-this.origPageX,a=e.pageY-this.origPageY),{origEvent:e,isTouch:!1,subjectEl:this.subjectEl,pageX:e.pageX,pageY:e.pageY,deltaX:s,deltaY:a}}createEventFromTouch(e,n){let s=e.touches,a,l,o=0,c=0;return s&&s.length?(a=s[0].pageX,l=s[0].pageY):(a=e.pageX,l=e.pageY),n?(this.origPageX=a,this.origPageY=l):(o=a-this.origPageX,c=l-this.origPageY),{origEvent:e,isTouch:!0,subjectEl:this.subjectEl,pageX:a,pageY:l,deltaX:o,deltaY:c}}}function kZ(t){return t.button===0&&!t.ctrlKey}function wZ(){jy+=1,setTimeout(()=>{jy-=1},pw.touchMouseIgnoreWait)}function jZ(){Qp+=1,Qp===1&&window.addEventListener("touchmove",PR,{passive:!1})}function NZ(){Qp-=1,Qp||window.removeEventListener("touchmove",PR,{passive:!1})}function PR(t){Ny&&t.preventDefault()}class CZ{constructor(){this.isVisible=!1,this.sourceEl=null,this.mirrorEl=null,this.sourceElRect=null,this.parentNode=document.body,this.zIndex=9999,this.revertDuration=0}start(e,n,s){this.sourceEl=e,this.sourceElRect=this.sourceEl.getBoundingClientRect(),this.origScreenX=n-window.scrollX,this.origScreenY=s-window.scrollY,this.deltaX=0,this.deltaY=0,this.updateElPosition()}handleMove(e,n){this.deltaX=e-window.scrollX-this.origScreenX,this.deltaY=n-window.scrollY-this.origScreenY,this.updateElPosition()}setIsVisible(e){e?this.isVisible||(this.mirrorEl&&(this.mirrorEl.style.display=""),this.isVisible=e,this.updateElPosition()):this.isVisible&&(this.mirrorEl&&(this.mirrorEl.style.display="none"),this.isVisible=e)}stop(e,n){let s=()=>{this.cleanup(),n()};e&&this.mirrorEl&&this.isVisible&&this.revertDuration&&(this.deltaX||this.deltaY)?this.doRevertAnimation(s,this.revertDuration):setTimeout(s,0)}doRevertAnimation(e,n){let s=this.mirrorEl,a=this.sourceEl.getBoundingClientRect();s.style.transition="top "+n+"ms,left "+n+"ms",am(s,{left:a.left,top:a.top}),IU(s,()=>{s.style.transition="",e()})}cleanup(){this.mirrorEl&&(Wk(this.mirrorEl),this.mirrorEl=null),this.sourceEl=null}updateElPosition(){this.sourceEl&&this.isVisible&&am(this.getMirrorEl(),{left:this.sourceElRect.left+this.deltaX,top:this.sourceElRect.top+this.deltaY})}getMirrorEl(){let e=this.sourceElRect,n=this.mirrorEl;return n||(n=this.mirrorEl=this.sourceEl.cloneNode(!0),n.style.userSelect="none",n.style.webkitUserSelect="none",n.style.pointerEvents="none",n.classList.add("fc-event-dragging"),am(n,{position:"fixed",zIndex:this.zIndex,visibility:"",boxSizing:"border-box",width:e.right-e.left,height:e.bottom-e.top,right:"auto",bottom:"auto",margin:0}),this.parentNode.appendChild(n)),n}}class MR extends uw{constructor(e,n){super(),this.handleScroll=()=>{this.scrollTop=this.scrollController.getScrollTop(),this.scrollLeft=this.scrollController.getScrollLeft(),this.handleScrollChange()},this.scrollController=e,this.doesListening=n,this.scrollTop=this.origScrollTop=e.getScrollTop(),this.scrollLeft=this.origScrollLeft=e.getScrollLeft(),this.scrollWidth=e.getScrollWidth(),this.scrollHeight=e.getScrollHeight(),this.clientWidth=e.getClientWidth(),this.clientHeight=e.getClientHeight(),this.clientRect=this.computeClientRect(),this.doesListening&&this.getEventTarget().addEventListener("scroll",this.handleScroll)}destroy(){this.doesListening&&this.getEventTarget().removeEventListener("scroll",this.handleScroll)}getScrollTop(){return this.scrollTop}getScrollLeft(){return this.scrollLeft}setScrollTop(e){this.scrollController.setScrollTop(e),this.doesListening||(this.scrollTop=Math.max(Math.min(e,this.getMaxScrollTop()),0),this.handleScrollChange())}setScrollLeft(e){this.scrollController.setScrollLeft(e),this.doesListening||(this.scrollLeft=Math.max(Math.min(e,this.getMaxScrollLeft()),0),this.handleScrollChange())}getClientWidth(){return this.clientWidth}getClientHeight(){return this.clientHeight}getScrollWidth(){return this.scrollWidth}getScrollHeight(){return this.scrollHeight}handleScrollChange(){}}class IR extends MR{constructor(e,n){super(new aG(e),n)}getEventTarget(){return this.scrollController.el}computeClientRect(){return iG(this.scrollController.el)}}class _Z extends MR{constructor(e){super(new rG,e)}getEventTarget(){return window}computeClientRect(){return{left:this.scrollLeft,right:this.scrollLeft+this.clientWidth,top:this.scrollTop,bottom:this.scrollTop+this.clientHeight}}handleScrollChange(){this.clientRect=this.computeClientRect()}}const dC=typeof performance=="function"?performance.now:Date.now;class SZ{constructor(){this.isEnabled=!0,this.scrollQuery=[window,".fc-scroller"],this.edgeThreshold=50,this.maxVelocity=300,this.pointerScreenX=null,this.pointerScreenY=null,this.isAnimating=!1,this.scrollCaches=null,this.everMovedUp=!1,this.everMovedDown=!1,this.everMovedLeft=!1,this.everMovedRight=!1,this.animate=()=>{if(this.isAnimating){let e=this.computeBestEdge(this.pointerScreenX+window.scrollX,this.pointerScreenY+window.scrollY);if(e){let n=dC();this.handleSide(e,(n-this.msSinceRequest)/1e3),this.requestAnimation(n)}else this.isAnimating=!1}}}start(e,n,s){this.isEnabled&&(this.scrollCaches=this.buildCaches(s),this.pointerScreenX=null,this.pointerScreenY=null,this.everMovedUp=!1,this.everMovedDown=!1,this.everMovedLeft=!1,this.everMovedRight=!1,this.handleMove(e,n))}handleMove(e,n){if(this.isEnabled){let s=e-window.scrollX,a=n-window.scrollY,l=this.pointerScreenY===null?0:a-this.pointerScreenY,o=this.pointerScreenX===null?0:s-this.pointerScreenX;l<0?this.everMovedUp=!0:l>0&&(this.everMovedDown=!0),o<0?this.everMovedLeft=!0:o>0&&(this.everMovedRight=!0),this.pointerScreenX=s,this.pointerScreenY=a,this.isAnimating||(this.isAnimating=!0,this.requestAnimation(dC()))}}stop(){if(this.isEnabled){this.isAnimating=!1;for(let e of this.scrollCaches)e.destroy();this.scrollCaches=null}}requestAnimation(e){this.msSinceRequest=e,requestAnimationFrame(this.animate)}handleSide(e,n){let{scrollCache:s}=e,{edgeThreshold:a}=this,l=a-e.distance,o=l*l/(a*a)*this.maxVelocity*n,c=1;switch(e.name){case"left":c=-1;case"right":s.setScrollLeft(s.getScrollLeft()+o*c);break;case"top":c=-1;case"bottom":s.setScrollTop(s.getScrollTop()+o*c);break}}computeBestEdge(e,n){let{edgeThreshold:s}=this,a=null,l=this.scrollCaches||[];for(let o of l){let c=o.clientRect,d=e-c.left,m=c.right-e,u=n-c.top,h=c.bottom-n;d>=0&&m>=0&&u>=0&&h>=0&&(u<=s&&this.everMovedUp&&o.canScrollUp()&&(!a||a.distance>u)&&(a={scrollCache:o,name:"top",distance:u}),h<=s&&this.everMovedDown&&o.canScrollDown()&&(!a||a.distance>h)&&(a={scrollCache:o,name:"bottom",distance:h}),d<=s&&this.everMovedLeft&&o.canScrollLeft()&&(!a||a.distance>d)&&(a={scrollCache:o,name:"left",distance:d}),m<=s&&this.everMovedRight&&o.canScrollRight()&&(!a||a.distance>m)&&(a={scrollCache:o,name:"right",distance:m}))}return a}buildCaches(e){return this.queryScrollEls(e).map(n=>n===window?new _Z(!1):new IR(n,!1))}queryScrollEls(e){let n=[];for(let s of this.scrollQuery)typeof s=="object"?n.push(s):n.push(...Array.prototype.slice.call(e.getRootNode().querySelectorAll(s)));return n}}class au extends cG{constructor(e,n){super(e),this.containerEl=e,this.delay=null,this.minDistance=0,this.touchScrollAllowed=!0,this.mirrorNeedsRevert=!1,this.isInteracting=!1,this.isDragging=!1,this.isDelayEnded=!1,this.isDistanceSurpassed=!1,this.delayTimeoutId=null,this.onPointerDown=a=>{this.isDragging||(this.isInteracting=!0,this.isDelayEnded=!1,this.isDistanceSurpassed=!1,OU(document.body),LU(document.body),a.isTouch||a.origEvent.preventDefault(),this.emitter.trigger("pointerdown",a),this.isInteracting&&!this.pointer.shouldIgnoreMove&&(this.mirror.setIsVisible(!1),this.mirror.start(a.subjectEl,a.pageX,a.pageY),this.startDelay(a),this.minDistance||this.handleDistanceSurpassed(a)))},this.onPointerMove=a=>{if(this.isInteracting){if(this.emitter.trigger("pointermove",a),!this.isDistanceSurpassed){let l=this.minDistance,o,{deltaX:c,deltaY:d}=a;o=c*c+d*d,o>=l*l&&this.handleDistanceSurpassed(a)}this.isDragging&&(a.origEvent.type!=="scroll"&&(this.mirror.handleMove(a.pageX,a.pageY),this.autoScroller.handleMove(a.pageX,a.pageY)),this.emitter.trigger("dragmove",a))}},this.onPointerUp=a=>{this.isInteracting&&(this.isInteracting=!1,FU(document.body),$U(document.body),this.emitter.trigger("pointerup",a),this.isDragging&&(this.autoScroller.stop(),this.tryStopDrag(a)),this.delayTimeoutId&&(clearTimeout(this.delayTimeoutId),this.delayTimeoutId=null))};let s=this.pointer=new RR(e);s.emitter.on("pointerdown",this.onPointerDown),s.emitter.on("pointermove",this.onPointerMove),s.emitter.on("pointerup",this.onPointerUp),n&&(s.selector=n),this.mirror=new CZ,this.autoScroller=new SZ}destroy(){this.pointer.destroy(),this.onPointerUp({})}startDelay(e){typeof this.delay=="number"?this.delayTimeoutId=setTimeout(()=>{this.delayTimeoutId=null,this.handleDelayEnd(e)},this.delay):this.handleDelayEnd(e)}handleDelayEnd(e){this.isDelayEnded=!0,this.tryStartDrag(e)}handleDistanceSurpassed(e){this.isDistanceSurpassed=!0,this.tryStartDrag(e)}tryStartDrag(e){this.isDelayEnded&&this.isDistanceSurpassed&&(!this.pointer.wasTouchScroll||this.touchScrollAllowed)&&(this.isDragging=!0,this.mirrorNeedsRevert=!1,this.autoScroller.start(e.pageX,e.pageY,this.containerEl),this.emitter.trigger("dragstart",e),this.touchScrollAllowed===!1&&this.pointer.cancelTouchScroll())}tryStopDrag(e){this.mirror.stop(this.mirrorNeedsRevert,this.stopDrag.bind(this,e))}stopDrag(e){this.isDragging=!1,this.emitter.trigger("dragend",e)}setIgnoreMove(e){this.pointer.shouldIgnoreMove=e}setMirrorIsVisible(e){this.mirror.setIsVisible(e)}setMirrorNeedsRevert(e){this.mirrorNeedsRevert=e}setAutoScrollEnabled(e){this.autoScroller.isEnabled=e}}class EZ{constructor(e){this.el=e,this.origRect=mw(e),this.scrollCaches=WD(e).map(n=>new IR(n,!0))}destroy(){for(let e of this.scrollCaches)e.destroy()}computeLeft(){let e=this.origRect.left;for(let n of this.scrollCaches)e+=n.origScrollLeft-n.getScrollLeft();return e}computeTop(){let e=this.origRect.top;for(let n of this.scrollCaches)e+=n.origScrollTop-n.getScrollTop();return e}isWithinClipping(e,n){let s={left:e,top:n};for(let a of this.scrollCaches)if(!TZ(a.getEventTarget())&&!VK(s,a.clientRect))return!1;return!0}}function TZ(t){let e=t.tagName;return e==="HTML"||e==="BODY"}class Yg{constructor(e,n){this.useSubjectCenter=!1,this.requireInitial=!0,this.disablePointCheck=!1,this.initialHit=null,this.movingHit=null,this.finalHit=null,this.handlePointerDown=s=>{let{dragging:a}=this;this.initialHit=null,this.movingHit=null,this.finalHit=null,this.prepareHits(),this.processFirstCoord(s),this.initialHit||!this.requireInitial?(a.setIgnoreMove(!1),this.emitter.trigger("pointerdown",s)):a.setIgnoreMove(!0)},this.handleDragStart=s=>{this.emitter.trigger("dragstart",s),this.handleMove(s,!0)},this.handleDragMove=s=>{this.emitter.trigger("dragmove",s),this.handleMove(s)},this.handlePointerUp=s=>{this.releaseHits(),this.emitter.trigger("pointerup",s)},this.handleDragEnd=s=>{this.movingHit&&this.emitter.trigger("hitupdate",null,!0,s),this.finalHit=this.movingHit,this.movingHit=null,this.emitter.trigger("dragend",s)},this.droppableStore=n,e.emitter.on("pointerdown",this.handlePointerDown),e.emitter.on("dragstart",this.handleDragStart),e.emitter.on("dragmove",this.handleDragMove),e.emitter.on("pointerup",this.handlePointerUp),e.emitter.on("dragend",this.handleDragEnd),this.dragging=e,this.emitter=new Gg}processFirstCoord(e){let n={left:e.pageX,top:e.pageY},s=n,a=e.subjectEl,l;a instanceof HTMLElement&&(l=mw(a),s=UK(s,l));let o=this.initialHit=this.queryHitForOffset(s.left,s.top);if(o){if(this.useSubjectCenter&&l){let c=zD(l,o.rect);c&&(s=WK(c))}this.coordAdjust=KK(s,n)}else this.coordAdjust={left:0,top:0}}handleMove(e,n){let s=this.queryHitForOffset(e.pageX+this.coordAdjust.left,e.pageY+this.coordAdjust.top);(n||!Qg(this.movingHit,s))&&(this.movingHit=s,this.emitter.trigger("hitupdate",s,!1,e))}prepareHits(){this.offsetTrackers=Tr(this.droppableStore,e=>(e.component.prepareHits(),new EZ(e.el)))}releaseHits(){let{offsetTrackers:e}=this;for(let n in e)e[n].destroy();this.offsetTrackers={}}queryHitForOffset(e,n){let{droppableStore:s,offsetTrackers:a}=this,l=null;for(let o in s){let c=s[o].component,d=a[o];if(d&&d.isWithinClipping(e,n)){let m=d.computeLeft(),u=d.computeTop(),h=e-m,p=n-u,{origRect:g}=d,v=g.right-g.left,x=g.bottom-g.top;if(h>=0&&h<v&&p>=0&&p<x){let y=c.queryHit(h,p,v,x);y&&Wg(y.dateProfile.activeRange,y.dateSpan.range)&&(this.disablePointCheck||d.el.contains(d.el.getRootNode().elementFromPoint(h+m-window.scrollX,p+u-window.scrollY)))&&(!l||y.layer>l.layer)&&(y.componentId=o,y.context=c.context,y.rect.left+=m,y.rect.right+=m,y.rect.top+=u,y.rect.bottom+=u,l=y)}}}return l}}function Qg(t,e){return!t&&!e?!0:!!t!=!!e?!1:PK(t.dateSpan,e.dateSpan)}function OR(t,e){let n={};for(let s of e.pluginHooks.datePointTransforms)Object.assign(n,s(t,e));return Object.assign(n,AZ(t,e.dateEnv)),n}function AZ(t,e){return{date:e.toDate(t.range.start),dateStr:e.formatIso(t.range.start,{omitTime:t.allDay}),allDay:t.allDay}}class DZ extends id{constructor(e){super(e),this.handlePointerDown=s=>{let{dragging:a}=this,l=s.origEvent.target;a.setIgnoreMove(!this.component.isValidDateDownEl(l))},this.handleDragEnd=s=>{let{component:a}=this,{pointer:l}=this.dragging;if(!l.wasTouchScroll){let{initialHit:o,finalHit:c}=this.hitDragging;if(o&&c&&Qg(o,c)){let{context:d}=a,m=Object.assign(Object.assign({},OR(o.dateSpan,d)),{dayEl:o.dayEl,jsEvent:s.origEvent,view:d.viewApi||d.calendarApi.view});d.emitter.trigger("dateClick",m)}}},this.dragging=new au(e.el),this.dragging.autoScroller.isEnabled=!1;let n=this.hitDragging=new Yg(this.dragging,cw(e));n.emitter.on("pointerdown",this.handlePointerDown),n.emitter.on("dragend",this.handleDragEnd)}destroy(){this.dragging.destroy()}}class RZ extends id{constructor(e){super(e),this.dragSelection=null,this.handlePointerDown=o=>{let{component:c,dragging:d}=this,{options:m}=c.context,u=m.selectable&&c.isValidDateDownEl(o.origEvent.target);d.setIgnoreMove(!u),d.delay=o.isTouch?PZ(c):null},this.handleDragStart=o=>{this.component.context.calendarApi.unselect(o)},this.handleHitUpdate=(o,c)=>{let{context:d}=this.component,m=null,u=!1;if(o){let h=this.hitDragging.initialHit;o.componentId===h.componentId&&this.isHitComboAllowed&&!this.isHitComboAllowed(h,o)||(m=MZ(h,o,d.pluginHooks.dateSelectionTransformers)),(!m||!gG(m,o.dateProfile,d))&&(u=!0,m=null)}m?d.dispatch({type:"SELECT_DATES",selection:m}):c||d.dispatch({type:"UNSELECT_DATES"}),u?Kk():Gk(),c||(this.dragSelection=m)},this.handlePointerUp=o=>{this.dragSelection&&(PD(this.dragSelection,o,this.component.context),this.dragSelection=null)};let{component:n}=e,{options:s}=n.context,a=this.dragging=new au(e.el);a.touchScrollAllowed=!1,a.minDistance=s.selectMinDistance||0,a.autoScroller.isEnabled=s.dragScroll;let l=this.hitDragging=new Yg(this.dragging,cw(e));l.emitter.on("pointerdown",this.handlePointerDown),l.emitter.on("dragstart",this.handleDragStart),l.emitter.on("hitupdate",this.handleHitUpdate),l.emitter.on("pointerup",this.handlePointerUp)}destroy(){this.dragging.destroy()}}function PZ(t){let{options:e}=t.context,n=e.selectLongPressDelay;return n==null&&(n=e.longPressDelay),n}function MZ(t,e,n){let s=t.dateSpan,a=e.dateSpan,l=[s.range.start,s.range.end,a.range.start,a.range.end];l.sort(VU);let o={};for(let c of n){let d=c(t,e);if(d===!1)return null;d&&Object.assign(o,d)}return o.range={start:l[0],end:l[3]},o.allDay=s.allDay,o}class ru extends id{constructor(e){super(e),this.subjectEl=null,this.subjectSeg=null,this.isDragging=!1,this.eventRange=null,this.relevantEvents=null,this.receivingContext=null,this.validMutation=null,this.mutatedRelevantEvents=null,this.handlePointerDown=o=>{let c=o.origEvent.target,{component:d,dragging:m}=this,{mirror:u}=m,{options:h}=d.context,p=d.context;this.subjectEl=o.subjectEl;let g=this.subjectSeg=Bc(o.subjectEl),x=(this.eventRange=g.eventRange).instance.instanceId;this.relevantEvents=aw(p.getCurrentData().eventStore,x),m.minDistance=o.isTouch?0:h.eventDragMinDistance,m.delay=o.isTouch&&x!==d.props.eventSelection?OZ(d):null,h.fixedMirrorParent?u.parentNode=h.fixedMirrorParent:u.parentNode=Ii(c,".fc"),u.revertDuration=h.dragRevertDuration;let y=d.isValidSegDownEl(c)&&!Ii(c,".fc-event-resizer");m.setIgnoreMove(!y),this.isDragging=y&&o.subjectEl.classList.contains("fc-event-draggable")},this.handleDragStart=o=>{let c=this.component.context,d=this.eventRange,m=d.instance.instanceId;o.isTouch?m!==this.component.props.eventSelection&&c.dispatch({type:"SELECT_EVENT",eventInstanceId:m}):c.dispatch({type:"UNSELECT_EVENT"}),this.isDragging&&(c.calendarApi.unselect(o),c.emitter.trigger("eventDragStart",{el:this.subjectEl,event:new zn(c,d.def,d.instance),jsEvent:o.origEvent,view:c.viewApi}))},this.handleHitUpdate=(o,c)=>{if(!this.isDragging)return;let d=this.relevantEvents,m=this.hitDragging.initialHit,u=this.component.context,h=null,p=null,g=null,v=!1,x={affectedEvents:d,mutatedEvents:Ss(),isEvent:!0};if(o){h=o.context;let y=h.options;u===h||y.editable&&y.droppable?(p=IZ(m,o,this.eventRange.instance.range.start,h.getCurrentData().pluginHooks.eventDragMutationMassagers),p&&(g=ow(d,h.getCurrentData().eventUiBases,p,h),x.mutatedEvents=g,eR(x,o.dateProfile,h)||(v=!0,p=null,g=null,x.mutatedEvents=Ss()))):h=null}this.displayDrag(h,x),v?Kk():Gk(),c||(u===h&&Qg(m,o)&&(p=null),this.dragging.setMirrorNeedsRevert(!p),this.dragging.setMirrorIsVisible(!o||!this.subjectEl.getRootNode().querySelector(".fc-event-mirror")),this.receivingContext=h,this.validMutation=p,this.mutatedRelevantEvents=g)},this.handlePointerUp=()=>{this.isDragging||this.cleanup()},this.handleDragEnd=o=>{if(this.isDragging){let c=this.component.context,d=c.viewApi,{receivingContext:m,validMutation:u}=this,h=this.eventRange.def,p=this.eventRange.instance,g=new zn(c,h,p),v=this.relevantEvents,x=this.mutatedRelevantEvents,{finalHit:y}=this.hitDragging;if(this.clearDrag(),c.emitter.trigger("eventDragStop",{el:this.subjectEl,event:g,jsEvent:o.origEvent,view:d}),u){if(m===c){let b=new zn(c,x.defs[h.defId],p?x.instances[p.instanceId]:null);c.dispatch({type:"MERGE_EVENTS",eventStore:x});let k={oldEvent:g,event:b,relatedEvents:Xl(x,c,p),revert(){c.dispatch({type:"MERGE_EVENTS",eventStore:v})}},w={};for(let T of c.getCurrentData().pluginHooks.eventDropTransformers)Object.assign(w,T(u,c));c.emitter.trigger("eventDrop",Object.assign(Object.assign(Object.assign({},k),w),{el:o.subjectEl,delta:u.datesDelta,jsEvent:o.origEvent,view:d})),c.emitter.trigger("eventChange",k)}else if(m){let b={event:g,relatedEvents:Xl(v,c,p),revert(){c.dispatch({type:"MERGE_EVENTS",eventStore:v})}};c.emitter.trigger("eventLeave",Object.assign(Object.assign({},b),{draggedEl:o.subjectEl,view:d})),c.dispatch({type:"REMOVE_EVENTS",eventStore:v}),c.emitter.trigger("eventRemove",b);let k=x.defs[h.defId],w=x.instances[p.instanceId],T=new zn(m,k,w);m.dispatch({type:"MERGE_EVENTS",eventStore:x});let j={event:T,relatedEvents:Xl(x,m,w),revert(){m.dispatch({type:"REMOVE_EVENTS",eventStore:x})}};m.emitter.trigger("eventAdd",j),o.isTouch&&m.dispatch({type:"SELECT_EVENT",eventInstanceId:p.instanceId}),m.emitter.trigger("drop",Object.assign(Object.assign({},OR(y.dateSpan,m)),{draggedEl:o.subjectEl,jsEvent:o.origEvent,view:y.context.viewApi})),m.emitter.trigger("eventReceive",Object.assign(Object.assign({},j),{draggedEl:o.subjectEl,view:y.context.viewApi}))}}else c.emitter.trigger("_noEventDrop")}this.cleanup()};let{component:n}=this,{options:s}=n.context,a=this.dragging=new au(e.el);a.pointer.selector=ru.SELECTOR,a.touchScrollAllowed=!1,a.autoScroller.isEnabled=s.dragScroll;let l=this.hitDragging=new Yg(this.dragging,xy);l.useSubjectCenter=e.useEventCenter,l.emitter.on("pointerdown",this.handlePointerDown),l.emitter.on("dragstart",this.handleDragStart),l.emitter.on("hitupdate",this.handleHitUpdate),l.emitter.on("pointerup",this.handlePointerUp),l.emitter.on("dragend",this.handleDragEnd)}destroy(){this.dragging.destroy()}displayDrag(e,n){let s=this.component.context,a=this.receivingContext;a&&a!==e&&(a===s?a.dispatch({type:"SET_EVENT_DRAG",state:{affectedEvents:n.affectedEvents,mutatedEvents:Ss(),isEvent:!0}}):a.dispatch({type:"UNSET_EVENT_DRAG"})),e&&e.dispatch({type:"SET_EVENT_DRAG",state:n})}clearDrag(){let e=this.component.context,{receivingContext:n}=this;n&&n.dispatch({type:"UNSET_EVENT_DRAG"}),e!==n&&e.dispatch({type:"UNSET_EVENT_DRAG"})}cleanup(){this.subjectSeg=null,this.isDragging=!1,this.eventRange=null,this.relevantEvents=null,this.receivingContext=null,this.validMutation=null,this.mutatedRelevantEvents=null}}ru.SELECTOR=".fc-event-draggable, .fc-event-resizable";function IZ(t,e,n,s){let a=t.dateSpan,l=e.dateSpan,o=a.range.start,c=l.range.start,d={};a.allDay!==l.allDay&&(d.allDay=l.allDay,d.hasEnd=e.context.options.allDayMaintainDuration,l.allDay?o=On(n):o=n);let m=ac(o,c,t.context.dateEnv,t.componentId===e.componentId?t.largeUnit:null);m.milliseconds&&(d.allDay=!1);let u={datesDelta:m,standardProps:d};for(let h of s)h(u,t,e);return u}function OZ(t){let{options:e}=t.context,n=e.eventLongPressDelay;return n==null&&(n=e.longPressDelay),n}class FZ extends id{constructor(e){super(e),this.draggingSegEl=null,this.draggingSeg=null,this.eventRange=null,this.relevantEvents=null,this.validMutation=null,this.mutatedRelevantEvents=null,this.handlePointerDown=l=>{let{component:o}=this,c=this.querySegEl(l),d=Bc(c),m=this.eventRange=d.eventRange;this.dragging.minDistance=o.context.options.eventDragMinDistance,this.dragging.setIgnoreMove(!this.component.isValidSegDownEl(l.origEvent.target)||l.isTouch&&this.component.props.eventSelection!==m.instance.instanceId)},this.handleDragStart=l=>{let{context:o}=this.component,c=this.eventRange;this.relevantEvents=aw(o.getCurrentData().eventStore,this.eventRange.instance.instanceId);let d=this.querySegEl(l);this.draggingSegEl=d,this.draggingSeg=Bc(d),o.calendarApi.unselect(),o.emitter.trigger("eventResizeStart",{el:d,event:new zn(o,c.def,c.instance),jsEvent:l.origEvent,view:o.viewApi})},this.handleHitUpdate=(l,o,c)=>{let{context:d}=this.component,m=this.relevantEvents,u=this.hitDragging.initialHit,h=this.eventRange.instance,p=null,g=null,v=!1,x={affectedEvents:m,mutatedEvents:Ss(),isEvent:!0};l&&(l.componentId===u.componentId&&this.isHitComboAllowed&&!this.isHitComboAllowed(u,l)||(p=LZ(u,l,c.subjectEl.classList.contains("fc-event-resizer-start"),h.range))),p&&(g=ow(m,d.getCurrentData().eventUiBases,p,d),x.mutatedEvents=g,eR(x,l.dateProfile,d)||(v=!0,p=null,g=null,x.mutatedEvents=null)),g?d.dispatch({type:"SET_EVENT_RESIZE",state:x}):d.dispatch({type:"UNSET_EVENT_RESIZE"}),v?Kk():Gk(),o||(p&&Qg(u,l)&&(p=null),this.validMutation=p,this.mutatedRelevantEvents=g)},this.handleDragEnd=l=>{let{context:o}=this.component,c=this.eventRange.def,d=this.eventRange.instance,m=new zn(o,c,d),u=this.relevantEvents,h=this.mutatedRelevantEvents;if(o.emitter.trigger("eventResizeStop",{el:this.draggingSegEl,event:m,jsEvent:l.origEvent,view:o.viewApi}),this.validMutation){let p=new zn(o,h.defs[c.defId],d?h.instances[d.instanceId]:null);o.dispatch({type:"MERGE_EVENTS",eventStore:h});let g={oldEvent:m,event:p,relatedEvents:Xl(h,o,d),revert(){o.dispatch({type:"MERGE_EVENTS",eventStore:u})}};o.emitter.trigger("eventResize",Object.assign(Object.assign({},g),{el:this.draggingSegEl,startDelta:this.validMutation.startDelta||Jt(0),endDelta:this.validMutation.endDelta||Jt(0),jsEvent:l.origEvent,view:o.viewApi})),o.emitter.trigger("eventChange",g)}else o.emitter.trigger("_noEventResize");this.draggingSeg=null,this.relevantEvents=null,this.validMutation=null};let{component:n}=e,s=this.dragging=new au(e.el);s.pointer.selector=".fc-event-resizer",s.touchScrollAllowed=!1,s.autoScroller.isEnabled=n.context.options.dragScroll;let a=this.hitDragging=new Yg(this.dragging,cw(e));a.emitter.on("pointerdown",this.handlePointerDown),a.emitter.on("dragstart",this.handleDragStart),a.emitter.on("hitupdate",this.handleHitUpdate),a.emitter.on("dragend",this.handleDragEnd)}destroy(){this.dragging.destroy()}querySegEl(e){return Ii(e.subjectEl,".fc-event")}}function LZ(t,e,n,s){let a=t.context.dateEnv,l=t.dateSpan.range.start,o=e.dateSpan.range.start,c=ac(l,o,a,t.largeUnit);if(n){if(a.add(s.start,c)<s.end)return{startDelta:c}}else if(a.add(s.end,c)>s.start)return{endDelta:c};return null}class $Z{constructor(e){this.context=e,this.isRecentPointerDateSelect=!1,this.matchesCancel=!1,this.matchesEvent=!1,this.onSelect=s=>{s.jsEvent&&(this.isRecentPointerDateSelect=!0)},this.onDocumentPointerDown=s=>{let a=this.context.options.unselectCancel,l=dD(s.origEvent);this.matchesCancel=!!Ii(l,a),this.matchesEvent=!!Ii(l,ru.SELECTOR)},this.onDocumentPointerUp=s=>{let{context:a}=this,{documentPointer:l}=this,o=a.getCurrentData();if(!l.wasTouchScroll){if(o.dateSelection&&!this.isRecentPointerDateSelect){let c=a.options.unselectAuto;c&&(!c||!this.matchesCancel)&&a.calendarApi.unselect(s)}o.eventSelection&&!this.matchesEvent&&a.dispatch({type:"UNSELECT_EVENT"})}this.isRecentPointerDateSelect=!1};let n=this.documentPointer=new RR(document);n.shouldIgnoreMove=!0,n.shouldWatchScroll=!1,n.emitter.on("pointerdown",this.onDocumentPointerDown),n.emitter.on("pointerup",this.onDocumentPointerUp),e.emitter.on("select",this.onSelect)}destroy(){this.context.emitter.off("select",this.onSelect),this.documentPointer.destroy()}}const BZ={fixedMirrorParent:Me},qZ={dateClick:Me,eventDragStart:Me,eventDragStop:Me,eventDrop:Me,eventResizeStart:Me,eventResizeStop:Me,eventResize:Me,drop:Me,eventReceive:Me,eventLeave:Me};pw.dataAttrPrefix="";var HZ=Fr({name:"@fullcalendar/interaction",componentInteractions:[DZ,RZ,ru,FZ],calendarInteractions:[$Z],elementDraggingImpl:au,optionRefiners:BZ,listenerRefiners:qZ});const zZ=()=>i.jsx("div",{className:"mb-4",children:i.jsx("div",{className:"card",children:i.jsxs("div",{className:"card-body",children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-3",children:[i.jsx(S,{width:"200px",height:"1.5rem"}),i.jsxs("div",{className:"d-flex gap-2",children:[i.jsx(S,{width:"100px",height:"2rem"}),i.jsx(S,{width:"100px",height:"2rem"}),i.jsx(S,{width:"100px",height:"2rem"})]})]}),i.jsxs("div",{className:"calendar-skeleton",children:[i.jsx("div",{className:"d-flex mb-2",children:Array.from({length:7}).map((t,e)=>i.jsx("div",{className:"flex-fill text-center p-2",children:i.jsx(S,{width:"60px",height:"1rem"})},`day-${e}`))}),Array.from({length:5}).map((t,e)=>i.jsx("div",{className:"d-flex mb-1",children:Array.from({length:7}).map((n,s)=>i.jsx("div",{className:"flex-fill p-1",children:i.jsxs("div",{className:"calendar-day-skeleton border rounded p-2",style:{minHeight:"80px"},children:[i.jsx(S,{width:"20px",height:"1rem",className:"mb-2"}),Math.random()>.7&&i.jsxs("div",{className:"d-flex flex-column gap-1",children:[i.jsx(S,{width:"100%",height:"6px",className:"rounded"}),i.jsx(S,{width:"80%",height:"6px",className:"rounded"})]})]})},`day-${e}-${s}`))},`week-${e}`))]})]})})}),VZ=()=>(window.kiviCareData?.locale||window.wp?.i18n?.getLocaleData?.()?.[""]?.lang||"en").replace("_","-").toLowerCase(),UZ=t=>{switch(String(t)){case"0":return"#f5365c";case"1":return"#23a359";case"2":return"#efc51c";case"3":return"#78c0fb";case"4":return"#4874dc";default:return"#007bff"}},WZ=({events:t=[],onEventClick:e,onViewChange:n,loading:s=!1,eventContent:a})=>{const[l,o]=f.useState("dayGridMonth"),[c,d]=f.useState(!1);f.useEffect(()=>{!s&&!c&&d(!0)},[s,c]);const m=f.useCallback(p=>{e&&typeof e=="function"&&e(p)},[e]),u=f.useCallback(p=>{const g=p.view?.type||"dayGridMonth";o(g),n&&typeof n=="function"&&n(p)},[n]),h=He.useMemo(()=>t.map(p=>{const g=p.color||UZ(p.status);return{id:parseInt(p.id,10),title:p.title||`${p.doctorName} - ${p.patientName||r("Patient","kivicare-clinic-management-system")}`,start:p.start||p.appointmentStartDateWF,end:p.end||p.appointmentEndDateWF,backgroundColor:g,borderColor:g,textColor:"#ffffff",allDay:!1,extendedProps:{...p}}}),[t]);return s&&!c?i.jsx(zZ,{}):i.jsx("div",{className:"card",children:i.jsx("div",{className:"card-body",children:i.jsx("div",{className:"calendar-container",style:{position:"relative"},children:i.jsx(yR,{plugins:[IQ,bZ,HZ],initialView:l,locale:VZ(),headerToolbar:{left:"prev,next today",center:"title",right:"dayGridMonth,timeGridWeek,timeGridDay"},buttonText:{today:r("Today","kivicare-clinic-management-system"),month:r("Month","kivicare-clinic-management-system"),week:r("Week","kivicare-clinic-management-system"),day:r("Day","kivicare-clinic-management-system")},events:h,eventDisplay:"block",eventTimeFormat:{hour:"2-digit",minute:"2-digit",meridiem:!0},dayMaxEvents:3,navLinks:!0,selectable:!0,editable:!1,eventClick:m,datesSet:u,eventContent:a,height:"auto",contentHeight:"auto",windowResize:()=>{}})})})})},jw={getSystemNotices:()=>ve({endpoint:"system/notices",method:"GET"}),sendTestEmail:(t={})=>ve({endpoint:"system/notices/test-email",method:"POST",data:t}),runMigrations:()=>ve({endpoint:"system/notices/run-migrations",method:"POST"})},KZ=(t={})=>ft({queryKey:["system","notices"],queryFn:()=>jw.getSystemNotices(),staleTime:300*1e3,...t}),GZ=()=>Le({mutationFn:t=>jw.sendTestEmail(t)}),YZ=()=>Le({mutationFn:()=>jw.runMigrations()}),kt=({title:t,text:e,icon:n="ph-warning",iconColor:s="text-warning",bgIconColor:a="bg-warning",confirmButtonText:l=r("Yes","kivicare-clinic-management-system"),cancelButtonText:o=r("No","kivicare-clinic-management-system"),confirmButtonClass:c="btn-danger",cancelButtonClass:d="btn-light",...m})=>At.fire({html:`
        <div class="text-center">
          <div class="mb-4">
            <span
              class="d-inline-flex align-items-center justify-content-center rounded-circle ${a} bg-opacity-25 avatar-70"
            >
              <i class="ph ${n} ${s} fs-1"></i>
            </span>
          </div>

          <h4 class="fw-semibold mb-2">
            ${t}
          </h4>

          <p class="text-muted mb-0">
            ${e}
          </p>
        </div>
      `,showCancelButton:!0,focusConfirm:!1,reverseButtons:!0,confirmButtonText:l,cancelButtonText:o,customClass:{popup:"rounded-4 p-4",confirmButton:`btn ${c} px-4`,cancelButton:`btn ${d} px-4`,actions:"justify-content-center gap-2 mt-4"},buttonsStyling:!1,...m}),yt=({title:t=r("Loading...","kivicare-clinic-management-system"),text:e=r("Please wait...","kivicare-clinic-management-system"),...n}={})=>At.fire({allowOutsideClick:!1,allowEscapeKey:!1,showConfirmButton:!1,showCancelButton:!1,background:"transparent",customClass:{popup:"border-0 shadow-none"},html:`
            <div class="bg-white rounded-4 shadow-lg px-5 py-5 text-center">
                <!-- Spinner -->
                <div class="mb-4 d-flex justify-content-center">
                    <div class="spinner-grow text-primary me-1"></div>
                    <div class="spinner-grow text-primary me-1" style="animation-delay:0.1s"></div>
                    <div class="spinner-grow text-primary me-1" style="animation-delay:0.2s"></div>
                </div>
                <!-- Title -->
                <h4 class="fw-semibold mb-2">
                    ${t||r("Deleting...","kivicare-clinic-management-system")}
                </h4>

                <!-- Description -->
                <p class="text-muted mb-1">
                    ${e||r("Please wait.","kivicare-clinic-management-system")}
                </p>

                <p class="text-muted small mb-0">
                    ${r("This wont take long.","kivicare-clinic-management-system")}
                </p>
            </div>
          `,...n}),Tt=({title:t=r("Success","kivicare-clinic-management-system"),text:e,confirmButtonText:n=r("OK","kivicare-clinic-management-system"),...s})=>At.fire({html:`
        <div class="text-center">
          <div class="mb-4">
            <span
              class="d-inline-flex align-items-center justify-content-center rounded-circle bg-success bg-opacity-25 avatar-70"
            >
              <i class="ph ph-check text-success fs-1"></i>
            </span>
          </div>

          <h4 class="fw-semibold mb-2">
            ${t}
          </h4>

          <p class="text-muted mb-0">
            ${e}
          </p>
        </div>
      `,showCancelButton:!1,focusConfirm:!1,confirmButtonText:n,customClass:{popup:"rounded-4 p-4",confirmButton:"btn btn-primary px-4",actions:"justify-content-center gap-2 mt-4"},buttonsStyling:!1,...s}),rt=({title:t=r("Error","kivicare-clinic-management-system"),text:e,confirmButtonText:n=r("OK","kivicare-clinic-management-system"),...s})=>At.fire({html:`
        <div class="text-center">
          <div class="mb-4">
            <span
              class="d-inline-flex align-items-center justify-content-center rounded-circle bg-danger bg-opacity-25 avatar-70"
            >
              <i class="ph ph-x text-danger fs-1"></i>
            </span>
          </div>

          <h4 class="fw-semibold mb-2">
            ${t}
          </h4>

          <p class="text-muted mb-0">
            ${e}
          </p>
        </div>
      `,showCancelButton:!1,focusConfirm:!1,confirmButtonText:n,customClass:{popup:"rounded-4 p-4",confirmButton:"btn btn-danger px-4",actions:"justify-content-center gap-2 mt-4"},buttonsStyling:!1,...s}),Wi=()=>{At.close()},QZ=()=>{const[t,e]=f.useState([]),{data:n,isLoading:s,refetch:a}=KZ(),{mutate:l,isLoading:o}=GZ(),{mutate:c,isLoading:d}=YZ();if(f.useEffect(()=>{n?.data&&e(n.data)},[n]),t.length===0||s)return null;const m=async()=>{const h=window.kiviCareData?.admin_email||"",p=await kt({html:`
            <div class="pt-3 pb-4 text-start">
                <h4 class="fs-5 mb-0">
                    Add New Bill
                </h4>
            </div>
                <form id="test-email-form">
                    <div class="mb-3 text-start">
                        <label for="swal-email" class="form-label">
                            ${r("Email Address","kivicare-clinic-management-system")}
                        </label>
                        <input 
                            type="email" 
                            class="form-control" 
                            id="swal-email" 
                            value="${h}"
                            placeholder="${r("Enter email address","kivicare-clinic-management-system")}"
                            required
                        />
                        <div class="form-text text-start mt-2">
                            ${r("Test email will be sent to this address","kivicare-clinic-management-system")}
                        </div>
                    </div>
                </form>
            `,showCancelButton:!0,confirmButtonText:r("Send Email","kivicare-clinic-management-system"),cancelButtonText:r("Cancel","kivicare-clinic-management-system"),confirmButtonClass:"btn-primary",cancelButtonClass:"btn-secondary",focusConfirm:!1,allowOutsideClick:!1,customClass:{popup:"rounded-4 p-4",confirmButton:"btn btn-primary px-4",cancelButton:"btn btn-secondary px-4",actions:"justify-content-end gap-2 mt-4 mx-0 px-3"},reverseButtons:!0,didOpen:()=>{const g=document.getElementById("swal-email");g&&g.focus()},preConfirm:()=>{const g=document.getElementById("swal-email").value;return g?{email:g}:(rt({text:r("Please enter an email address","kivicare-clinic-management-system")}),!1)}});if(p.isConfirmed&&p.value){const{email:g}=p.value;yt({title:r("Sending Email...","kivicare-clinic-management-system"),text:r("Please wait while we send the test email.","kivicare-clinic-management-system"),didOpen:()=>{l({email:g},{onSuccess:v=>{if(v.status===500){rt({title:r("Email Failed","kivicare-clinic-management-system"),text:v.data?.message||v.message||r("Failed to send test email. Please check your SMTP configuration.","kivicare-clinic-management-system")});return}Tt({title:r("Email Sent!","kivicare-clinic-management-system"),text:r("Test email has been sent successfully. Please check your inbox.","kivicare-clinic-management-system")}),e(x=>x.filter(y=>y.type!=="smtp"))},onError:v=>{console.error("Email sending error:",v),rt({title:r("Email Failed","kivicare-clinic-management-system"),text:v.response?.data?.message||v.message||r("Failed to send test email. Please check your SMTP configuration.","kivicare-clinic-management-system")})}})}})}},u=async h=>{const p=h.details?.pending_count||0,g=h.details?.plugin_count||1,v=h.details?.migrations_by_plugin||{},x=h.details?.migrations||[];let y="";Object.keys(v).length>1?y=Object.entries(v).map(([k,w])=>`
                <div class="mb-2">
                    <strong class="text-primary">${k}:</strong>
                    <div class="ms-3">
                        ${w.map(T=>`
                            <div class="small text-muted py-1"> ${T}</div>
                        `).join("")}
                    </div>
                </div>
            `).join(""):y=x.map(k=>`
                <div class="small text-muted py-1"> ${k}</div>
            `).join(""),(await kt({title:r("Run Database Migrations","kivicare-clinic-management-system"),html:`
                <div class="text-start">
                    <div class="mb-4 text-center">
                        <span class="d-inline-flex align-items-center justify-content-center rounded-circle bg-primary bg-opacity-25 avatar-70">
                            <i class="ph ph-database fs-1"></i>
                        </span>
                    </div>
                    
                    <p class="mb-3">
                        ${g>1?Pi(r("This will run database migrations from %1$d plugins:","kivicare-clinic-management-system"),g):r("This will run the following database migrations:","kivicare-clinic-management-system")}
                    </p>
                    <div class="mb-3">
                        <strong>
                            ${Pi(r("Total Pending Migrations: %1$d","kivicare-clinic-management-system"),p)}
                            ${g>1?Pi(r(" (from %1$d plugins)","kivicare-clinic-management-system"),g):""}
                        </strong>
                    </div>
                    ${x.length>0?`
                        <div class="mb-3">
                            <div class="border rounded p-3 bg-body" style="max-height: 300px; overflow-y: auto;">
                                ${y}
                            </div>
                        </div>
                    `:""}
                    <div class="alert alert-warning bg-warning-subtle small">
                        <i class="ph ph-warning-circle me-2"></i>
                        ${r("It is recommended to backup your database before running migrations.","kivicare-clinic-management-system")}
                    </div>
                    ${g>1?`
                        <div class="alert alert-info bg-info-subtle small">
                            <i class="ph ph-info me-2"></i>
                            ${r("Migrations from all plugins will be executed in the correct order.","kivicare-clinic-management-system")}
                        </div>
                    `:""}
                </div>
            `,icon:"ph-question",iconColor:"text-primary",bgIconColor:"bg-primary",showCancelButton:!0,confirmButtonText:r("Run Migrations","kivicare-clinic-management-system"),cancelButtonText:r("Cancel","kivicare-clinic-management-system"),confirmButtonClass:"btn-primary",cancelButtonClass:"btn-secondary",allowOutsideClick:!1,focusCancel:!0,width:"600px"})).isConfirmed&&yt({title:r("Running Migrations...","kivicare-clinic-management-system"),text:r("Please wait while we update your database. This may take a few moments.","kivicare-clinic-management-system"),didOpen:()=>{c({},{onSuccess:k=>{const w=k.data?.migrations_run||0;Tt({title:r("Migrations Completed!","kivicare-clinic-management-system"),text:w>0?Pi(r("%1$d migrations have been executed successfully.","kivicare-clinic-management-system"),w):r("No migrations were needed.","kivicare-clinic-management-system")}),e(T=>T.filter(j=>j.type!=="migration")),setTimeout(()=>{a()},1e3)},onError:k=>{console.error("Migration error:",k),rt({title:r("Migration Failed","kivicare-clinic-management-system"),text:k.response?.data?.message||k.message||r("Failed to run migrations. Please try again or contact support.","kivicare-clinic-management-system")})}})}})};return i.jsx(i.Fragment,{children:t.map((h,p)=>{if(h.type==="version")return i.jsx("div",{className:"desktop-warning px-5 my-1 py-3 bg-warning-subtle border-bottom border-warning d-flex align-items-center justify-content-between gap-3 flex-wrap",children:i.jsx("div",{className:"d-flex align-items-center gap-2",children:i.jsx("h6",{className:"setting-title mb-0",children:h.message})})},"version");if(h.type==="smtp")return i.jsxs("div",{className:"desktop-warning px-5 py-3 bg-warning-subtle border-bottom border-warning d-flex align-items-center justify-content-between gap-3 flex-wrap",children:[i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsx("h6",{className:"setting-title mb-0",children:h.message}),i.jsx("a",{href:"https://kivicare.io/docs/email-configuration/",target:"_blank",rel:"noopener noreferrer","data-bs-toggle":"tooltip",title:r("Learn more about SMTP configuration","kivicare-clinic-management-system"),"data-bs-placement":"right",children:i.jsx("i",{className:"ph ph-question fs-5 icon-color"})})]}),i.jsx("div",{className:"d-flex gap-2 align-items-center",children:i.jsx("button",{className:"btn btn-sm btn-secondary",onClick:m,disabled:o,children:r("Send Test Email","kivicare-clinic-management-system")})})]},"smtp");if(h.type==="migration"){const g=h.details?.pending_count||0,v=h.details?.plugin_count||1;return i.jsxs("div",{className:"desktop-warning px-5 py-3 bg-danger-subtle border-bottom border-danger d-flex align-items-center justify-content-between gap-3 flex-wrap",children:[i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsx("i",{className:"ph ph-database text-danger fs-5 me-1"}),i.jsxs("div",{children:[i.jsx("h6",{className:"setting-title mb-0 text-danger",children:h.message}),g>0&&i.jsx("small",{className:"text-muted",children:v>1?Pi(r("%1$d pending migrations from %2$d plugins","kivicare-clinic-management-system"),g,v):Pi(r("%1$d pending migrations found","kivicare-clinic-management-system"),g)})]}),i.jsx("a",{href:"https://kivicare.io/docs/database-migrations/",target:"_blank",rel:"noopener noreferrer","data-bs-toggle":"tooltip",title:r("Learn more about database migrations","kivicare-clinic-management-system"),"data-bs-placement":"right",children:i.jsx("i",{className:"ph ph-question fs-5 icon-color"})})]}),i.jsx("div",{className:"d-flex gap-2 align-items-center",children:i.jsxs("button",{className:"btn btn-sm btn-danger",onClick:()=>u(h),disabled:d,children:[i.jsx("i",{className:"ph ph-play me-1"}),d?r("Running...","kivicare-clinic-management-system"):r("Run Migrations","kivicare-clinic-management-system")]})})]},"migration")}return h.type==="error"?i.jsx("div",{className:"desktop-warning px-5 py-3 bg-danger-subtle border-bottom border-danger d-flex align-items-center justify-content-between gap-3 flex-wrap",children:i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsx("i",{className:"ph ph-warning-circle text-danger fs-5 me-1"}),i.jsx("h6",{className:"setting-title mb-0 text-danger",children:h.message})]})},"error"):null})})},La=t=>{if(!t)return"";const e=t.getFullYear(),n=String(t.getMonth()+1).padStart(2,"0"),s=String(t.getDate()).padStart(2,"0");return`${e}-${n}-${s}`},Nw=(t,e)=>e?Array.isArray(e)?t.filter(n=>e.includes(n.value)||e.includes(String(n.value))):t.find(n=>n.value===e||n.value===String(e))||null:null,FR=t=>{if(!t)return"";const e=document.createElement("div");e.innerHTML=t;const n=["script","style","iframe","object","embed","form","input","button","link","meta"],s=["onload","onerror","onclick","onmouseover","onmouseout","onkeydown","onkeyup","onkeypress","javascript:"];return n.forEach(l=>{e.querySelectorAll(l).forEach(c=>c.remove())}),e.querySelectorAll("*").forEach(l=>{Array.from(l.attributes).forEach(o=>{s.some(c=>o.name.toLowerCase().includes(c)||o.value.toLowerCase().includes("javascript:"))&&l.removeAttribute(o.name)})}),e.innerHTML},LR=(t,e,n)=>{function s(o){return o.toString(16)}function a(o){return parseInt(o,16)}n=typeof n<"u"?n:50;let l="#";for(let o=0;o<=5;o+=2){const c=a(t.substr(o,2)),d=a(e.substr(o,2));let m=s(Math.floor(d+(c-d)*(n/100)));for(;m.length<2;)m="0"+m;l+=m}return l},Yv=(t,e)=>{e=typeof e<"u"?e:50;const n=t.substr(1);return LR("FFFFFF",n,e)},Qv=(t,e)=>{e=typeof e<"u"?e:50;const n=t.substr(1);return LR("000000",n,e)},ZZ=t=>{const e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?`${parseInt(e[1],16)}, ${parseInt(e[2],16)}, ${parseInt(e[3],16)}`:null},mC=(t,e=null)=>{let n=document.getElementById("kivicare-dashboard-colors-style");const s=(o,c=!1)=>{let d="";return Object.entries(o).forEach(([m,u])=>{const h=`--bs-${m}`,p=ZZ(u),g=c?Qv(u,80):Yv(u,80),v=c?Qv(u,20):Yv(u,20),x=c?Qv(u,30):Yv(u,30);d+=`
                ${h}: ${u};
                ${h}-rgb: ${p};
                ${h}-bg-subtle: ${g};
                ${h}-border-subtle: ${g};
                --bs-link-color-rgb: ${p};
                ${h}-hover-bg: ${v};
                ${h}-hover-border: ${x};
                ${h}-active-bg: ${v};
                ${h}-active-border: ${x};`}),d};let a=`[data-bs-theme="light"],:root {
`+s(t,!1)+`
}
`;return e&&Object.keys(e).length>0&&(a+=`[data-bs-theme="dark"] {
`+s(e,!0)+`
}`),n||(n=document.createElement("style"),n.setAttribute("id","kivicare-dashboard-colors-style"),document.head.appendChild(n)),n.innerHTML=a,document.querySelectorAll("style.custom-color").forEach(o=>o.remove()),a},Wn=()=>({firstDayOfWeek:window.kc_frontend?.start_of_week?parseInt(window.kc_frontend.start_of_week,10):0,weekdays:{shorthand:[r("Sun","kivicare-clinic-management-system"),r("Mon","kivicare-clinic-management-system"),r("Tue","kivicare-clinic-management-system"),r("Wed","kivicare-clinic-management-system"),r("Thu","kivicare-clinic-management-system"),r("Fri","kivicare-clinic-management-system"),r("Sat","kivicare-clinic-management-system")],longhand:[r("Sunday","kivicare-clinic-management-system"),r("Monday","kivicare-clinic-management-system"),r("Tuesday","kivicare-clinic-management-system"),r("Wednesday","kivicare-clinic-management-system"),r("Thursday","kivicare-clinic-management-system"),r("Friday","kivicare-clinic-management-system"),r("Saturday","kivicare-clinic-management-system")]},months:{shorthand:[r("Jan","kivicare-clinic-management-system"),r("Feb","kivicare-clinic-management-system"),r("Mar","kivicare-clinic-management-system"),r("Apr","kivicare-clinic-management-system"),r("May","kivicare-clinic-management-system"),r("Jun","kivicare-clinic-management-system"),r("Jul","kivicare-clinic-management-system"),r("Aug","kivicare-clinic-management-system"),r("Sep","kivicare-clinic-management-system"),r("Oct","kivicare-clinic-management-system"),r("Nov","kivicare-clinic-management-system"),r("Dec","kivicare-clinic-management-system")],longhand:[r("January","kivicare-clinic-management-system"),r("February","kivicare-clinic-management-system"),r("March","kivicare-clinic-management-system"),r("April","kivicare-clinic-management-system"),r("May","kivicare-clinic-management-system"),r("June","kivicare-clinic-management-system"),r("July","kivicare-clinic-management-system"),r("August","kivicare-clinic-management-system"),r("September","kivicare-clinic-management-system"),r("October","kivicare-clinic-management-system"),r("November","kivicare-clinic-management-system"),r("December","kivicare-clinic-management-system")]}}),XZ=t=>{let e=document.documentElement.lang||"en-US";try{return new Intl.NumberFormat(e).format(t)}catch{return new Intl.NumberFormat("en-US").format(t)}},xi=t=>{if(!t)return"Y-m-d";const e={d:"d",D:"D",j:"j",l:"l",N:"N",S:"S",w:"w",z:"z",W:"W",F:"F",m:"m",M:"M",n:"n",t:"K",L:"",o:"Y",Y:"Y",y:"y",a:"K",A:"K",B:"",g:"h",G:"H",h:"h",H:"H",i:"i",s:"S",u:"",v:"",e:"",I:"",O:"",P:"",T:"",Z:"",c:"",r:"",U:"U"};let n="",s=!1;for(let a=0;a<t.length;a++){const l=t[a];s?(n+=l,s=!1):l==="\\"?(s=!0,n+="\\"):n+=e[l]!==void 0?e[l]:l}return n},JZ=t=>{if(!t)return"YYYY-MM-DD";const e={d:"DD",D:"ddd",j:"D",l:"dddd",N:"E",S:"",w:"d",z:"DDD",W:"W",F:"MMMM",m:"MM",M:"MMM",n:"M",t:"",L:"",o:"YYYY",Y:"YYYY",y:"YY",a:"a",A:"A",B:"",g:"h",G:"H",h:"hh",H:"HH",i:"mm",s:"ss",u:"SSS",v:"SSS",e:"",I:"",O:"",P:"",T:"",Z:"",c:"",r:"",U:"X"};let n="",s=!1;for(let a=0;a<t.length;a++){const l=t[a];s?(n+=l,s=!1):l==="\\"?s=!0:n+=e[l]!==void 0?e[l]:l}return n},Zn=t=>{if(!t)return null;const[e,n,s]=t.split("-").map(Number);return new Date(e,n-1,s)};var Vh={exports:{}},eX=Vh.exports,uC;function tX(){return uC||(uC=1,(function(t,e){(function(n,s){t.exports=s()})(eX,(function(){var n=1e3,s=6e4,a=36e5,l="millisecond",o="second",c="minute",d="hour",m="day",u="week",h="month",p="quarter",g="year",v="date",x="Invalid Date",y=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,b=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,k={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(O){var F=["th","st","nd","rd"],H=O%100;return"["+O+(F[(H-20)%10]||F[H]||F[0])+"]"}},w=function(O,F,H){var G=String(O);return!G||G.length>=F?O:""+Array(F+1-G.length).join(H)+O},T={s:w,z:function(O){var F=-O.utcOffset(),H=Math.abs(F),G=Math.floor(H/60),z=H%60;return(F<=0?"+":"-")+w(G,2,"0")+":"+w(z,2,"0")},m:function O(F,H){if(F.date()<H.date())return-O(H,F);var G=12*(H.year()-F.year())+(H.month()-F.month()),z=F.clone().add(G,h),ie=H-z<0,W=F.clone().add(G+(ie?-1:1),h);return+(-(G+(H-z)/(ie?z-W:W-z))||0)},a:function(O){return O<0?Math.ceil(O)||0:Math.floor(O)},p:function(O){return{M:h,y:g,w:u,d:m,D:v,h:d,m:c,s:o,ms:l,Q:p}[O]||String(O||"").toLowerCase().replace(/s$/,"")},u:function(O){return O===void 0}},j="en",D={};D[j]=k;var _="$isDayjsObject",N=function(O){return O instanceof I||!(!O||!O[_])},A=function O(F,H,G){var z;if(!F)return j;if(typeof F=="string"){var ie=F.toLowerCase();D[ie]&&(z=ie),H&&(D[ie]=H,z=ie);var W=F.split("-");if(!z&&W.length>1)return O(W[0])}else{var ge=F.name;D[ge]=F,z=ge}return!G&&z&&(j=z),z||!G&&j},P=function(O,F){if(N(O))return O.clone();var H=typeof F=="object"?F:{};return H.date=O,H.args=arguments,new I(H)},E=T;E.l=A,E.i=N,E.w=function(O,F){return P(O,{locale:F.$L,utc:F.$u,x:F.$x,$offset:F.$offset})};var I=(function(){function O(H){this.$L=A(H.locale,null,!0),this.parse(H),this.$x=this.$x||H.x||{},this[_]=!0}var F=O.prototype;return F.parse=function(H){this.$d=(function(G){var z=G.date,ie=G.utc;if(z===null)return new Date(NaN);if(E.u(z))return new Date;if(z instanceof Date)return new Date(z);if(typeof z=="string"&&!/Z$/i.test(z)){var W=z.match(y);if(W){var ge=W[2]-1||0,ae=(W[7]||"0").substring(0,3);return ie?new Date(Date.UTC(W[1],ge,W[3]||1,W[4]||0,W[5]||0,W[6]||0,ae)):new Date(W[1],ge,W[3]||1,W[4]||0,W[5]||0,W[6]||0,ae)}}return new Date(z)})(H),this.init()},F.init=function(){var H=this.$d;this.$y=H.getFullYear(),this.$M=H.getMonth(),this.$D=H.getDate(),this.$W=H.getDay(),this.$H=H.getHours(),this.$m=H.getMinutes(),this.$s=H.getSeconds(),this.$ms=H.getMilliseconds()},F.$utils=function(){return E},F.isValid=function(){return this.$d.toString()!==x},F.isSame=function(H,G){var z=P(H);return this.startOf(G)<=z&&z<=this.endOf(G)},F.isAfter=function(H,G){return P(H)<this.startOf(G)},F.isBefore=function(H,G){return this.endOf(G)<P(H)},F.$g=function(H,G,z){return E.u(H)?this[G]:this.set(z,H)},F.unix=function(){return Math.floor(this.valueOf()/1e3)},F.valueOf=function(){return this.$d.getTime()},F.startOf=function(H,G){var z=this,ie=!!E.u(G)||G,W=E.p(H),ge=function(me,K){var re=E.w(z.$u?Date.UTC(z.$y,K,me):new Date(z.$y,K,me),z);return ie?re:re.endOf(m)},ae=function(me,K){return E.w(z.toDate()[me].apply(z.toDate("s"),(ie?[0,0,0,0]:[23,59,59,999]).slice(K)),z)},U=this.$W,X=this.$M,J=this.$D,he="set"+(this.$u?"UTC":"");switch(W){case g:return ie?ge(1,0):ge(31,11);case h:return ie?ge(1,X):ge(0,X+1);case u:var le=this.$locale().weekStart||0,ee=(U<le?U+7:U)-le;return ge(ie?J-ee:J+(6-ee),X);case m:case v:return ae(he+"Hours",0);case d:return ae(he+"Minutes",1);case c:return ae(he+"Seconds",2);case o:return ae(he+"Milliseconds",3);default:return this.clone()}},F.endOf=function(H){return this.startOf(H,!1)},F.$set=function(H,G){var z,ie=E.p(H),W="set"+(this.$u?"UTC":""),ge=(z={},z[m]=W+"Date",z[v]=W+"Date",z[h]=W+"Month",z[g]=W+"FullYear",z[d]=W+"Hours",z[c]=W+"Minutes",z[o]=W+"Seconds",z[l]=W+"Milliseconds",z)[ie],ae=ie===m?this.$D+(G-this.$W):G;if(ie===h||ie===g){var U=this.clone().set(v,1);U.$d[ge](ae),U.init(),this.$d=U.set(v,Math.min(this.$D,U.daysInMonth())).$d}else ge&&this.$d[ge](ae);return this.init(),this},F.set=function(H,G){return this.clone().$set(H,G)},F.get=function(H){return this[E.p(H)]()},F.add=function(H,G){var z,ie=this;H=Number(H);var W=E.p(G),ge=function(X){var J=P(ie);return E.w(J.date(J.date()+Math.round(X*H)),ie)};if(W===h)return this.set(h,this.$M+H);if(W===g)return this.set(g,this.$y+H);if(W===m)return ge(1);if(W===u)return ge(7);var ae=(z={},z[c]=s,z[d]=a,z[o]=n,z)[W]||1,U=this.$d.getTime()+H*ae;return E.w(U,this)},F.subtract=function(H,G){return this.add(-1*H,G)},F.format=function(H){var G=this,z=this.$locale();if(!this.isValid())return z.invalidDate||x;var ie=H||"YYYY-MM-DDTHH:mm:ssZ",W=E.z(this),ge=this.$H,ae=this.$m,U=this.$M,X=z.weekdays,J=z.months,he=z.meridiem,le=function(K,re,oe,C){return K&&(K[re]||K(G,ie))||oe[re].slice(0,C)},ee=function(K){return E.s(ge%12||12,K,"0")},me=he||function(K,re,oe){var C=K<12?"AM":"PM";return oe?C.toLowerCase():C};return ie.replace(b,(function(K,re){return re||(function(oe){switch(oe){case"YY":return String(G.$y).slice(-2);case"YYYY":return E.s(G.$y,4,"0");case"M":return U+1;case"MM":return E.s(U+1,2,"0");case"MMM":return le(z.monthsShort,U,J,3);case"MMMM":return le(J,U);case"D":return G.$D;case"DD":return E.s(G.$D,2,"0");case"d":return String(G.$W);case"dd":return le(z.weekdaysMin,G.$W,X,2);case"ddd":return le(z.weekdaysShort,G.$W,X,3);case"dddd":return X[G.$W];case"H":return String(ge);case"HH":return E.s(ge,2,"0");case"h":return ee(1);case"hh":return ee(2);case"a":return me(ge,ae,!0);case"A":return me(ge,ae,!1);case"m":return String(ae);case"mm":return E.s(ae,2,"0");case"s":return String(G.$s);case"ss":return E.s(G.$s,2,"0");case"SSS":return E.s(G.$ms,3,"0");case"Z":return W}return null})(K)||W.replace(":","")}))},F.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},F.diff=function(H,G,z){var ie,W=this,ge=E.p(G),ae=P(H),U=(ae.utcOffset()-this.utcOffset())*s,X=this-ae,J=function(){return E.m(W,ae)};switch(ge){case g:ie=J()/12;break;case h:ie=J();break;case p:ie=J()/3;break;case u:ie=(X-U)/6048e5;break;case m:ie=(X-U)/864e5;break;case d:ie=X/a;break;case c:ie=X/s;break;case o:ie=X/n;break;default:ie=X}return z?ie:E.a(ie)},F.daysInMonth=function(){return this.endOf(h).$D},F.$locale=function(){return D[this.$L]},F.locale=function(H,G){if(!H)return this.$L;var z=this.clone(),ie=A(H,G,!0);return ie&&(z.$L=ie),z},F.clone=function(){return E.w(this.$d,this)},F.toDate=function(){return new Date(this.valueOf())},F.toJSON=function(){return this.isValid()?this.toISOString():null},F.toISOString=function(){return this.$d.toISOString()},F.toString=function(){return this.$d.toUTCString()},O})(),M=I.prototype;return P.prototype=M,[["$ms",l],["$s",o],["$m",c],["$H",d],["$W",m],["$M",h],["$y",g],["$D",v]].forEach((function(O){M[O[1]]=function(F){return this.$g(F,O[0],O[1])}})),P.extend=function(O,F){return O.$i||(O(F,I,P),O.$i=!0),P},P.locale=A,P.isDayjs=N,P.unix=function(O){return P(1e3*O)},P.en=D[j],P.Ls=D,P.p={},P}))})(Vh)),Vh.exports}var nX=tX();const Rn=ya(nX),na=({show:t,onHide:e,queryParams:n,onApplyFilters:s,onResetFilters:a,title:l=r("Filters","kivicare-clinic-management-system"),fields:o=[],hasAppliedFilters:c=!1,width:d="400px"})=>{const[m,u]=f.useState({...n}),[h,p]=f.useState(!1),g=["clinicAddress","clinicName","clinic","id","specialization","status","date_from","date_to","patientName","doctorAddress","doctorName","receptionistAddress","receptionistName","serviceName","charges","category","patient","search","startDate","endDate","taxName","service","doctor","encounter_id","serviceName","patient_unique_id"];f.useEffect(()=>{const D=g.some(_=>{const N=m[_];return Array.isArray(N)?N.length>0:typeof N=="number"?N!==0:N!=null&&N!==""});p(D)},[m]);const[v,x]=f.useState({});f.useEffect(()=>{u({...n});const D={};o.forEach(_=>{if(_.type==="dateRange"||_.type==="inlineDateRange"){const N=n[_.startDateKey],A=n[_.endDateKey];N&&A?D[_.name]=[new Date(N),new Date(A)]:D[_.name]=[]}}),x(D)},[n]);const y=(D,_)=>{u(N=>{const A={...N,[D]:_};return o.forEach(P=>{P.dependencies&&Object.values(P.dependencies).includes(D)&&(A[P.name]=P.type==="multiSelect"||P.isMulti?[]:"")}),A})},b=(D,_)=>{y(D,_?_.value:"")},k=(D,_,N,A)=>{if(x(P=>({...P,[D]:A})),A.length===2){const P=La(A[0]),E=La(A[1]);u(I=>({...I,[_]:P,[N]:E}))}},w=(D,_)=>{y(D,_)},T=()=>{s(m)},j=D=>{const{type:_,name:N,label:A,placeholder:P,options:E=[],isLoading:I=!1,optionLoader:M,dependencies:O,...F}=D;switch(_){case"select":const H=E.find(R=>R.value===m[N])||null;return i.jsxs("div",{className:"col-12 from-group",children:[i.jsx(Mt.Label,{children:A}),i.jsx(ct,{value:H,onChange:R=>b(N,R),options:E,menuShouldScrollIntoView:!1,maxMenuHeight:220,menuPosition:"fixed",isLoading:I,noOptionsMessage:()=>r("No options found","kivicare-clinic-management-system"),isClearable:!0,placeholder:P||A,className:"react-select-box",classNamePrefix:"react-select",isDisabled:I,styles:{menuPortal:R=>({...R,zIndex:1050}),menu:R=>({...R,zIndex:1050})},...F})]},N);case"paginatedSelect":const G=D.storeObject?m[N]:D.value||E.find(R=>R.value===m[N])||null,z=D.dependencies?Object.keys(D.dependencies).reduce((R,te)=>{const ne=m[D.dependencies[te]];return R[te]=ne&&typeof ne=="object"&&"value"in ne?ne.value:ne,R},{}):{},ie=D.key||`${N}-${JSON.stringify(z)}`;return i.jsxs("div",{className:"col-12 from-group",children:[i.jsx(Mt.Label,{children:A}),i.jsx(rn,{value:G,id:`filter-${N}`,placeholder:P||A,className:"react-select-box",classNamePrefix:"react-select",loadOptions:M,dependencies:z,isDisabled:D.isDisabled,onChange:R=>{D.storeObject?y(N,R):y(N,R?R.value:""),D.onChange&&typeof D.onChange=="function"&&D.onChange(R)},isClearable:!0,menuShouldScrollIntoView:!1,styles:{menuPortal:R=>({...R,zIndex:1050}),menu:R=>({...R,zIndex:1050})}},ie)]},N);case"dateRange":const{startDateKey:W,endDateKey:ge}=D,ae=v[N]&&v[N].length>0;return i.jsxs("div",{className:"col-12 from-group",children:[i.jsx(Mt.Label,{children:A}),i.jsxs("div",{className:"input-group",children:[i.jsx(Un,{value:(v[N]||[]).map(R=>typeof R=="string"?Zn(R):R),onChange:R=>{R.length===2?k(N,W,ge,R):R.length===0&&(x(te=>({...te,[N]:[]})),u(te=>({...te,[W]:"",[ge]:""})))},options:{mode:"range",dateFormat:xi(window.kc_frontend.date_format),locale:Wn(),...F.flatpickrOptions},className:"form-control",placeholder:P||r("Select date range","kivicare-clinic-management-system")}),i.jsx("div",{className:"input-group-text",children:i.jsx("i",{className:"ph ph-calendar"})}),ae&&i.jsx("button",{type:"button",className:"btn btn-sm position-absolute btn-flatpickr-clear",onClick:()=>{x(R=>({...R,[N]:[]})),u(R=>({...R,[W]:"",[ge]:""}))},title:r("Clear date range","kivicare-clinic-management-system"),children:i.jsx("i",{className:"ph ph-x"})})]})]},N);case"inlineDateRange":const{startDateKey:U,endDateKey:X}=D,J=v[N]||[],he=JZ(window.kc_frontend.date_format),le=J[0]?Rn(J[0]).format(he):"-",ee=J[1]?Rn(J[1]).format(he):"-",me=[{id:"today",label:r("Today","kivicare-clinic-management-system"),getRange:()=>[Rn(),Rn()]},{id:"last_30_days",label:r("Last 30 Days","kivicare-clinic-management-system"),getRange:()=>[Rn().subtract(30,"day"),Rn()]},{id:"this_month",label:r("This Month","kivicare-clinic-management-system"),getRange:()=>[Rn().startOf("month"),Rn().endOf("month")]},{id:"last_month",label:r("Last Month","kivicare-clinic-management-system"),getRange:()=>[Rn().subtract(1,"month").startOf("month"),Rn().subtract(1,"month").endOf("month")]},{id:"last_90_days",label:r("Last 90 Days","kivicare-clinic-management-system"),getRange:()=>[Rn().subtract(90,"day"),Rn()]},{id:"last_6_months",label:r("Last 6 Months","kivicare-clinic-management-system"),getRange:()=>[Rn().subtract(6,"month"),Rn()]},{id:"last_1_year",label:r("Last 1 Year","kivicare-clinic-management-system"),getRange:()=>[Rn().subtract(1,"year"),Rn()]}],K=(R,te)=>{R.preventDefault();const ne=[te[0].toDate(),te[1].toDate()];k(N,U,X,ne)},re=R=>J.length!==2?!1:Rn(J[0]).isSame(R[0],"day")&&Rn(J[1]).isSame(R[1],"day");return i.jsxs("div",{className:"col-12 from-group inline-flatpickr-wrapper",children:[i.jsx(Mt.Label,{children:A}),i.jsx("div",{className:"bg-body ranges rounded overflow-hidden border",children:i.jsxs("div",{className:"row p-0 m-0",children:[i.jsx("div",{className:"col-lg-4 p-0 border-end border-bottom-lg-0",children:i.jsx("ul",{className:"list-unstyled m-0 range-list",children:me.map(R=>{const te=R.getRange(),ne=re(te);return i.jsx("li",{className:`range-list-item ${ne?"active":""}`,children:i.jsx("a",{href:"#",onClick:Y=>K(Y,te),children:R.label})},R.id)})})}),i.jsxs("div",{className:"calender-list-box col-lg-8 p-0",children:[i.jsx("div",{className:"calender-header rounded-top-end bg-primary p-2",children:i.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[i.jsx("div",{className:"btn bg-gray-900 text-primary btn-sm pe-none fw-bold",style:{minWidth:"100px"},children:le}),i.jsx("div",{className:"btn text-white pe-none btn-sm fw-bold",children:r("To","kivicare-clinic-management-system")}),i.jsx("div",{className:"btn bg-gray-900 text-primary btn-sm pe-none fw-bold",style:{minWidth:"100px"},children:ee})]})}),i.jsx("div",{className:"calander-body",children:i.jsx("div",{className:"form-group mb-0",children:i.jsx(Un,{value:J.map(R=>typeof R=="string"?Zn(R):R),onChange:R=>{R.length===2?k(N,U,X,R):R.length===0&&(x(te=>({...te,[N]:[]})),u(te=>({...te,[U]:"",[X]:""})))},options:{mode:"range",inline:!0,dateFormat:xi(window.kc_frontend.date_format),locale:Wn(),...F.flatpickrOptions,static:!0,showMonths:1},className:"d-none"})})})]})]})})]},N);case"date":const oe=m[N];return i.jsxs("div",{className:"col-12 from-group",children:[i.jsx(Mt.Label,{children:A}),i.jsxs("div",{className:"position-relative",children:[i.jsx(Un,{value:m[N]?Zn(m[N]):"",onChange:R=>{if(R.length>0){const te=La(R[0]);y(N,te)}else y(N,"")},options:{dateFormat:xi(window.kc_frontend.date_format),locale:Wn(),...F.flatpickrOptions},className:"form-control",placeholder:P||r("Select date","kivicare-clinic-management-system")}),oe&&i.jsx("button",{type:"button",className:"btn btn-sm position-absolute btn-flatpickr-clear",onClick:()=>y(N,""),title:r("Clear date","kivicare-clinic-management-system"),children:i.jsx("i",{className:"ph ph-x"})})]})]},N);case"text":case"search":return i.jsxs("div",{className:"col-12 from-group",children:[i.jsx(Mt.Label,{children:A}),i.jsx(Mt.Control,{type:"text",value:m[N]||"",onChange:R=>w(N,R.target.value),placeholder:P||A,...F})]},N);case"number":return i.jsxs("div",{className:"col-12 from-group",children:[i.jsx(Mt.Label,{children:A}),i.jsx(Mt.Control,{type:"number",value:m[N]||"",onChange:R=>w(N,R.target.value),placeholder:P||A,...F})]},N);case"multiSelect":const C=E.filter(R=>Array.isArray(m[N])?m[N].includes(R.value):!1);return i.jsxs("div",{className:"col-12 from-group",children:[i.jsx(Mt.Label,{children:A}),i.jsx(ct,{value:C,onChange:R=>{const te=R?R.map(ne=>ne.value):[];y(N,te)},className:"react-select-box",classNamePrefix:"react-select",options:E,isMulti:!0,isLoading:I,noOptionsMessage:()=>r("No options found","kivicare-clinic-management-system"),isClearable:!0,placeholder:P||A,isDisabled:I,menuShouldScrollIntoView:!1,styles:{menuPortal:R=>({...R,zIndex:1050}),menu:R=>({...R,zIndex:1050})},...F})]},N);default:return null}};return i.jsxs(Iu,{show:t,onHide:e,placement:"end",backdrop:!0,className:"on-rtl end",style:{width:d},children:[i.jsx(Iu.Header,{closeButton:!0,className:"border-bottom",children:i.jsx(Iu.Title,{as:"h6",className:"mb-0",children:l})}),i.jsx(Iu.Body,{children:i.jsx(Mt,{children:i.jsx("div",{className:"row gy-4",children:o.map(D=>j(D))})})}),i.jsx("div",{className:"offcanvas-footer p-3 border-top",children:i.jsxs("div",{className:"d-flex align-items-center justify-content-end flex-wrap gap-3",children:[i.jsx(Xt,{variant:"secondary",onClick:()=>{a(),e()},disabled:!c,children:r("Reset","kivicare-clinic-management-system")}),i.jsx(Xt,{variant:"primary",onClick:T,disabled:!h,children:r("Apply","kivicare-clinic-management-system")})]})})]})};na.propTypes={show:Ae.bool.isRequired,onHide:Ae.func.isRequired,queryParams:Ae.object.isRequired,onApplyFilters:Ae.func.isRequired,onResetFilters:Ae.func.isRequired,title:Ae.string,fields:Ae.arrayOf(Ae.shape({type:Ae.oneOf(["select","multiSelect","dateRange","inlineDateRange","date","text","search","number"]).isRequired,name:Ae.string.isRequired,label:Ae.string.isRequired,placeholder:Ae.string,options:Ae.array,isLoading:Ae.bool,startDateKey:Ae.string,endDateKey:Ae.string,flatpickrOptions:Ae.object})).isRequired,hasAppliedFilters:Ae.bool,width:Ae.string};const Yo=t=>{if(!t)return"";const e=new Date(t),n=e.getFullYear(),s=String(e.getMonth()+1).padStart(2,"0"),a=String(e.getDate()).padStart(2,"0");return`${n}-${s}-${a}`},hC=t=>{if(!t)return"";const e=new Date(t),n=String(e.getDate()).padStart(2,"0"),s=e.toLocaleString("default",{month:"short"}),a=e.getFullYear();return`${n} ${s} ${a}`},pC=()=>{const t=ze(),e=f.useRef(null),[n,s]=f.useState([]),[a,l]=f.useState(null),[o,c]=f.useState(!1),[d,m]=f.useState({start:new Date(new Date().setDate(1)),end:new Date(new Date().getDate()+30)}),[u,h]=f.useState(!1),[p,g]=f.useState(null),{hasCapability:v,userRole:x,user:y,module_config:b}=mt(),k=gI(x||"patient"),w=fI(),T=vI(),j=xI(),D=yI(),_=Yi()||Xn()||Li(),N=Yi(),A=Li(),P=Xn(),E=Jn(),[I,M]=f.useState(!1),[O,F]=f.useState([]),[H,G]=f.useState([]),[z,ie]=f.useState([]),[W,ge]=f.useState({clinic:"",patient:N&&y?.id||"",doctor:A&&y?.id||"",status:"",date_from:"",date_to:""}),ae=f.useMemo(()=>!a||a.length!==2?{}:{start_date:Yo(a[0]),end_date:Yo(a[1])},[a]),{data:U,isLoading:X}=l$({limit:3,...ae},{enabled:w}),J=He.useMemo(()=>U?.data?U.data.map(Be=>({id:Be.id,name:Be.name||Be.doctor_name,clinic:Be.clinic||"",appointments:Be.appointments||`${Be.appointment_count}+`,image:Be.image||Be.doctor_image_url||null,speciality:Be.speciality||""})):[],[U]),{isAddonActive:he,defaultClinicId:le}=mt(),ee=he("kiviPro"),me=f.useMemo(()=>[{title:r("Total Appointments","kivicare-clinic-management-system"),component:"appointment",iconKey:"appointment",color:"primary",key:"total_appointments",roles:W7(),capability:"dashboard_total_appointment",linkTo:"/appointments"},{title:r("Total Patients","kivicare-clinic-management-system"),component:"patient",iconKey:"patient",color:"success",key:"total_patients",roles:K7(),capability:"dashboard_total_patient",linkTo:"/patient"},...ee?[{title:r("Total Clinics","kivicare-clinic-management-system"),component:"clinic",iconKey:"clinic",color:"info",key:"total_clinics",roles:G7(),capability:"dashboard_total_clinic",linkTo:"/clinic"}]:[],{title:r("Total Doctors","kivicare-clinic-management-system"),component:"doctor",iconKey:"doctor",color:"warning",key:"total_doctors",roles:Y7(),capability:"dashboard_total_doctor",linkTo:"/doctor"},{title:r("Active Services","kivicare-clinic-management-system"),component:"service",iconKey:"service",color:"secondary",key:"active_services",roles:Q7(),capability:"dashboard_total_service",linkTo:"/service"},...(b.billing??"1")==="1"?[{title:r("Total Revenue","kivicare-clinic-management-system"),component:"revenue",iconKey:"revenue",color:"success",key:"total_revenue",roles:Z7(),capability:"dashboard_total_revenue"}]:[],{title:r("Today's Appointments","kivicare-clinic-management-system"),component:"today-appointment",iconKey:"appointment",color:"primary",key:"today_appointments",roles:X7(),capability:"dashboard_total_today_appointment",linkTo:"/appointments"}],[]),K=f.useMemo(()=>bI(me,k),[me,k]),re=f.useMemo(()=>{const Be=K.length;if(Be===0)return"";let ke="insights-container dashboard-insights-container stash-cards";return ke+=` grid-count-${Be}`,ke},[K.length]),{data:oe,isLoading:C}=a$({params:ae,queryKey:["upcomingAppointments",ae?.start_date,ae?.end_date],enabled:D}),R=oe?.data||[],te=Be=>i.jsx(ht,{to:`/appointments/view/${Be.id}`,className:"kc-link-wrapper",children:i.jsxs("div",{className:"bg-body p-3 rounded-3",children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between gap-3 flex-wrap mb-2",children:[i.jsx(dn,{profileUrl:Be.patient_image_url||null,name:Be.patientName,linkTo:`/patient/edit/${Be.patientId}`,variant:"primary",size:"md",className:"flex-grow-1",fallbackText:"PT"}),i.jsxs("div",{className:"d-flex align-items-center gap-2 text-nowrap",children:[i.jsx("span",{className:"fw-bold font-size-14 text-secondary",children:Be.appointmentStartDateFormated}),i.jsx("span",{className:"fw-bold font-size-14 text-secondary",children:Be.appointmentStartTimeFormated})]})]}),i.jsx("div",{className:"mb-2",children:i.jsx("span",{className:"font-size-14",children:Be.clinicName})}),i.jsxs("div",{className:"d-flex align-items-center justify-content-between gap-1 flex-wrap",children:[i.jsxs("div",{className:"font-siz-14",children:[Be.serviceListName," ",r("By ","kivicare-clinic-management-system"),i.jsx("span",{className:"font-size-14 heading-color fw-semibold",children:i.jsx(ht,{to:`/doctor/edit/${Be.doctorId}`,className:"heading-color fw-semibold",children:Be.doctorName})})]}),Be.video_consultation&&i.jsxs("div",{className:"d-flex align-items-center gap-1",children:[i.jsx("i",{className:"ph ph-video text-success align-middle"}),i.jsx("span",{className:"font-size-12 heading-color fw-semibold",children:r("Telemed","kivicare-clinic-management-system")})]})]})]})}),ne=Be=>i.jsx(ht,{to:`/doctor/edit/${Be.id}`,className:"kc-link-wrapper",children:i.jsx("div",{className:"bg-body p-3 rounded-3",children:i.jsxs("div",{className:"d-flex align-items-center gap-3 justify-content-between flex-wrap",children:[i.jsx(dn,{profileUrl:Be.image,name:Be.name,clinicName:Be.clinic,variant:"primary",size:"md",className:"flex-grow-1"}),i.jsxs("div",{children:[i.jsx("span",{className:"font-size-14 fw-bold text-secondary",children:Be.appointments}),i.jsxs("span",{className:"font-size-14 fw-medium",children:[" ",r("Appointments","kivicare-clinic-management-system")]})]})]})})}),{data:Y,isLoading:q}=c$({start_date:d.start.toISOString().split("T")[0],end_date:d.end.toISOString().split("T")[0],doctor:W.doctor?.value||W.doctor||(A?y?.id:void 0),patient:W.patient?.value||W.patient||(N?y?.id:void 0),clinic:W.clinic?.value||W.clinic||y?.clinic_id||void 0,status:W.status?.value||W.status||void 0},{enabled:_}),B=Y?.data?.appointments||[],se=f.useCallback(Be=>{const ke=Be.event.extendedProps;g(ke),h(!0)},[]),Q=Be=>{const ke=!!Be.event.extendedProps.zoom_data?.startUrl;return i.jsxs("div",{className:"d-flex align-items-center gap-1 overflow-hidden",children:[ke&&i.jsx("i",{className:"ph ph-video"}),i.jsx("span",{className:"text-truncate",children:Be.event.title})]})},pe=f.useCallback(Be=>{const ke=Be.view.activeStart,_e=Be.view.activeEnd;m({start:ke,end:_e})},[]),$=Be=>{switch(String(Be)){case"0":return r("Cancelled","kivicare-clinic-management-system");case"1":return r("Booked","kivicare-clinic-management-system");case"2":return r("Pending","kivicare-clinic-management-system");case"3":return r("Completed","kivicare-clinic-management-system");case"4":return r("Check-In","kivicare-clinic-management-system");default:return r("Unknown","kivicare-clinic-management-system")}},ce=Be=>{switch(String(Be)){case"0":return"bg-danger";case"1":return"bg-success";case"2":return"bg-warning";case"3":return"bg-success";case"4":return"bg-primary";default:return"bg-secondary"}},De=f.useMemo(()=>({mode:"range",dateFormat:"d M Y",clickOpens:!0,allowInput:!0,disableMobile:!0,locale:Wn()}),[]),xe=async({page:Be,per_page:ke,search:_e})=>{try{const Ye={dataType:"staticData",staticDataType:"clinics",page:Be,per_page:ke,search:_e},tt=await t.fetchQuery({queryKey:pt.list(Ye),queryFn:()=>Dt.getStaticData(Ye),staleTime:300*1e3}),zt=tt.data.map(Ft=>({value:Ft.id,label:Ft.label||Ft.name}));return F(Ft=>[...Ft,...zt]),tt}catch(Ye){return console.error("Error loading clinics:",Ye),{data:[],pagination:{total:0,per_page:10,current_page:1,total_pages:0,has_more:!1}}}},Re=async({page:Be,per_page:ke,search:_e,clinic_ids:Ye})=>{try{let tt=Ye;(P||E)&&le&&(tt=le);const zt={dataType:"staticData",staticDataType:"users",role:ol(),clinic_ids:tt,page:Be,per_page:ke,search:_e},Ft=await t.fetchQuery({queryKey:pt.list(zt),queryFn:()=>Dt.getStaticData(zt),staleTime:300*1e3}),Qt=Ft.data.map(xt=>({value:xt.id,label:xt.label||xt.name}));return G(xt=>[...xt,...Qt]),Ft}catch(tt){return console.error("Error loading patients:",tt),{data:[],pagination:{total:0,per_page:10,current_page:1,total_pages:0,has_more:!1}}}},nt=async({page:Be,per_page:ke,search:_e,clinic_ids:Ye})=>{try{let tt=Ye;(P||E)&&le&&(tt=le);const zt={dataType:"staticData",staticDataType:"doctors",clinic_ids:tt,page:Be,per_page:ke,search:_e},Ft=await t.fetchQuery({queryKey:pt.list(zt),queryFn:()=>Dt.getStaticData(zt),staleTime:300*1e3}),Qt=Ft.data.map(xt=>({value:xt.id,label:xt.label||xt.name}));return ie(xt=>[...xt,...Qt]),Ft}catch(tt){return console.error("Error loading doctors:",tt),{data:[],pagination:{total:0,per_page:10,current_page:1,total_pages:0,has_more:!1}}}},Pe=[...ee&&!P&&!E?[{type:"paginatedSelect",name:"clinic",label:r("Clinic","kivicare-clinic-management-system"),placeholder:r("Select clinic","kivicare-clinic-management-system"),optionLoader:xe,options:O,storeObject:!0}]:[],...N?[]:[{type:"paginatedSelect",name:"patient",label:r("Patient","kivicare-clinic-management-system"),placeholder:r("Select Patient","kivicare-clinic-management-system"),optionLoader:Re,options:H,dependencies:P||E?{}:{clinic_ids:"clinic"},storeObject:!0}],...A?[]:[{type:"paginatedSelect",name:"doctor",label:r("Doctor","kivicare-clinic-management-system"),placeholder:r("Select Doctor","kivicare-clinic-management-system"),optionLoader:nt,options:z,dependencies:P||E?{}:{clinic_ids:"clinic"},storeObject:!0}],{type:"select",name:"status",label:r("Select Status","kivicare-clinic-management-system"),placeholder:r("Select Status","kivicare-clinic-management-system"),options:[{value:"0",label:r("Cancelled","kivicare-clinic-management-system")},{value:"1",label:r("Booked","kivicare-clinic-management-system")},{value:"4",label:r("Check-In","kivicare-clinic-management-system")},{value:"3",label:r("Check-Out","kivicare-clinic-management-system")},{value:"2",label:r("Pending","kivicare-clinic-management-system")}],isSearchable:!1}],Ue=f.useMemo(()=>["clinic","patient","doctor","status"].some(ke=>{const _e=W[ke];return typeof _e=="object"&&_e!==null?_e.value!==void 0&&_e.value!=="":_e!=null&&_e!==""}),[W]),Je=Be=>{ge(ke=>({...ke,...Be})),M(!1)},et=()=>{ge({clinic:"",patient:N&&y?.id||"",doctor:A&&y?.id||"",status:"",date_from:"",date_to:""}),M(!1)};return i.jsxs(i.Fragment,{children:[Cr()&&i.jsx(QZ,{}),i.jsx(_i,{}),i.jsxs("div",{className:"d-flex align-items-center gap-2 justify-content-between flex-wrap mb-3",children:[i.jsxs("div",{className:"d-flex align-items-center gap-3",children:[i.jsx("h5",{className:"mb-0",children:r("Insights","kivicare-clinic-management-system")}),a&&i.jsx("div",{className:"d-flex align-items-center",children:i.jsxs("span",{className:"badge bg-body text-secondary",children:[hC(a[0])," -"," ",hC(a[1]),i.jsx("button",{className:"btn btn-link btn-sm p-0 ms-2 text-danger",onClick:()=>{l(null),s([]),e.current&&e.current.flatpickr&&e.current.flatpickr.clear()},"aria-label":r("Clear filter","kivicare-clinic-management-system"),children:i.jsx("i",{className:"ph ph-x"})})]})})]}),i.jsx("form",{className:"d-flex align-items-center gap-2 flex-end flex-wrap",onSubmit:Be=>{Be.preventDefault(),n&&n.length===2&&(c(!0),l(n),console.log("Invalidating patient age distribution query with new date range",n),t.invalidateQueries({queryKey:["dashboard","bookingStatus"]}),setTimeout(()=>c(!1),500))},children:!N&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"form-group my-0 flex-grow-1",children:i.jsx(Un,{ref:e,options:{...De,dateFormat:xi(window.kc_frontend.date_format)},className:"form-control dashboard-date-range",onChange:Be=>s(Be),placeholder:r("Select Date Range","kivicare-clinic-management-system")})}),i.jsxs("button",{type:"submit",className:"btn btn-secondary",disabled:o,children:[o?i.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}):null,r("Apply Filter","kivicare-clinic-management-system")]})]})})]}),K.length>0&&i.jsx("div",{className:`${re}`,children:K.map((Be,ke)=>i.jsx(j$,{component:Be.component,title:Be.title,iconKey:Be.iconKey,color:Be.color||"primary",useHook:!0,dateFilter:ae,isFiltering:o,isCurrency:Be.component==="revenue"||Be.key==="total_revenue",capability:Be.capability,linkTo:Be.linkTo,iconPosition:A||P?"right":"top",onDataLoaded:(_e,Ye)=>{}},`stats-card-${Be.key}`))}),k!=="kivicare_patient"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"row my-0 gx-4",children:[D&&i.jsx("div",{className:"col-xl-4 col-lg-6",children:i.jsx(P0,{title:r("Upcoming Appointments","kivicare-clinic-management-system"),items:R,renderItem:te,viewAllLink:"appointments",loading:C||o,emptyMessage:r("No upcoming appointments","kivicare-clinic-management-system"),dateFilter:a?`${Yo(a[0])} to ${Yo(a[1])}`:null})}),w&&i.jsx("div",{className:"col-xl-4 col-lg-6",children:i.jsx(P0,{title:r("Top Doctors","kivicare-clinic-management-system"),items:J,renderItem:ne,viewAllLink:"doctors",loading:X||o,emptyMessage:r("No doctor data available","kivicare-clinic-management-system"),dateFilter:a?`${Yo(a[0])} to ${Yo(a[1])}`:null})}),T&&i.jsx("div",{className:"col-xl-4 col-lg-12",children:i.jsx(yq,{clinicId:y?.clinic_id,dateRange:a})})]}),j&&i.jsx("div",{className:"card",children:i.jsxs("div",{className:"card-body",children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap gap-3 mb-3 pb-1",children:[i.jsx("h6",{className:"mb-0",children:r("Payment History","kivicare-clinic-management-system")}),i.jsx(ht,{to:"/billings",className:"btn btn-link",children:r("View All","kivicare-clinic-management-system")})]}),i.jsx(sU,{limit:3})]})})]}),_&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"mb-4",children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap row-gap-2 column-gap-3 mb-4",children:[i.jsx("div",{className:"page-title",children:i.jsx("h6",{className:"m-0",children:r("Appointment Calendar","kivicare-clinic-management-system")})}),i.jsx("div",{className:"d-flex align-items-center row-gap-2 column-gap-3 flex-wrap",children:i.jsxs("button",{className:"btn btn-primary d-flex align-items-center gap-2",onClick:()=>M(!0),children:[i.jsx("i",{className:"ph ph-funnel"}),i.jsx("span",{children:r("Filters","kivicare-clinic-management-system")})]})})]}),i.jsx(WZ,{events:B,loading:q,onEventClick:se,onViewChange:pe,eventContent:Q})]}),i.jsx(na,{show:I,onHide:()=>M(!1),queryParams:W,onApplyFilters:Je,onResetFilters:et,title:r("Calendar Filters","kivicare-clinic-management-system"),fields:Pe,hasAppliedFilters:Ue}),i.jsxs(lt,{show:u,onHide:()=>h(!1),centered:!0,size:"lg",children:[i.jsx(lt.Header,{closeButton:!0,children:i.jsx(lt.Title,{children:r("Appointment Details","kivicare-clinic-management-system")})}),i.jsx(lt.Body,{children:p?i.jsxs("div",{className:"appointment-details",children:[i.jsxs("div",{className:"row mb-3",children:[i.jsxs("div",{className:"col-md-6",children:[i.jsx("h6",{className:"text-muted mb-1",children:r("Patient","kivicare-clinic-management-system")}),i.jsx("h5",{children:p.patientName})]}),i.jsxs("div",{className:"col-md-6",children:[i.jsx("h6",{className:"text-muted mb-1",children:r("Doctor","kivicare-clinic-management-system")}),i.jsx("h5",{children:p.doctorName})]})]}),i.jsxs("div",{className:"row mb-3",children:[i.jsxs("div",{className:"col-md-6",children:[i.jsx("h6",{className:"text-muted mb-1",children:r("Date","kivicare-clinic-management-system")}),i.jsx("p",{children:p.appointmentStartDate})]}),i.jsxs("div",{className:"col-md-6",children:[i.jsx("h6",{className:"text-muted mb-1",children:r("Time","kivicare-clinic-management-system")}),i.jsx("p",{children:`${p.appointmentStartTime||""} - ${p.appointmentEndTime||""}`})]})]}),i.jsxs("div",{className:"row mb-3",children:[i.jsxs("div",{className:"col-md-6",children:[i.jsx("h6",{className:"text-muted mb-1",children:r("Clinic","kivicare-clinic-management-system")}),i.jsx("p",{children:p.clinicName})]}),i.jsxs("div",{className:"col-md-6",children:[i.jsx("h6",{className:"text-muted mb-1",children:r("Status","kivicare-clinic-management-system")}),i.jsx("p",{children:i.jsx("span",{className:`badge text-white ${p.color?"":ce(p.status)}`,style:p.color?{backgroundColor:p.color,color:"var(--bs-white)"}:{},children:p.status_text||$(p.status)})})]})]}),p.services&&i.jsx("div",{className:"row mb-3",children:i.jsxs("div",{className:"col-12",children:[i.jsx("h6",{className:"text-muted mb-1",children:r("Services","kivicare-clinic-management-system")}),i.jsx("p",{children:p.services})]})}),p.description&&i.jsx("div",{className:"row mb-3",children:i.jsxs("div",{className:"col-12",children:[i.jsx("h6",{className:"text-muted mb-1",children:r("Description","kivicare-clinic-management-system")}),i.jsx("p",{children:p.description})]})})]}):i.jsx("div",{className:"text-center",children:i.jsx("p",{children:r("Loading appointment details...","kivicare-clinic-management-system")})})}),i.jsxs(lt.Footer,{className:"gap-3",children:[k!=="kivicare_patient"&&p&&(String(p.status)==="1"||String(p.status)==="2")&&i.jsxs(ht,{to:`/appointments/edit/${p.id}`,className:"btn btn-primary",children:[i.jsx("i",{className:"ph ph-pencil-simple me-1"}),r("Edit Appointment","kivicare-clinic-management-system")]}),i.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>h(!1),children:r("Close","kivicare-clinic-management-system")})]})]})]})]})},iX=[We({path:"/dashboard",component:pC,title:"Dashboard",index:!0,permissions:["dashboard"],skeleton:T0,meta:{description:"Main dashboard overview",breadcrumb:"Dashboard"}}),We({path:"/",component:pC,title:"Dashboard",index:!0,permissions:["dashboard"],skeleton:T0,meta:{description:"Main dashboard overview",breadcrumb:"Dashboard"}})],sX=()=>i.jsx("div",{className:"appointments-container",children:i.jsx(fs,{})}),Cw=()=>i.jsxs("div",{className:"card-body",children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap gap-2 mb-2",children:[i.jsx(S,{width:"100px",height:"1rem"}),i.jsx(S,{width:"80px",height:"1rem"})]}),i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap gap-2 mb-2",children:[i.jsx(S,{width:"80px",height:"1rem"}),i.jsx(S,{width:"80px",height:"1rem"})]}),i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap gap-2 mb-2",children:[i.jsx(S,{width:"60px",height:"1rem"}),i.jsx("div",{className:"d-flex align-items-center gap-1",children:i.jsx(S,{width:"60px",height:"1rem"})})]}),i.jsxs("div",{className:"mt-2 p-3 bg-body rounded",children:[i.jsx(S,{width:"80px",height:"1rem",className:"mb-2"}),i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap gap-2 mb-2",children:[i.jsx(S,{width:"60px",height:"1rem"}),i.jsx(S,{width:"70px",height:"1rem"})]})]}),i.jsxs("div",{className:"mt-4 d-flex align-items-center justify-content-between flex-wrap gap-1",children:[i.jsx(S,{width:"100px",height:"1.25rem"}),i.jsx(S,{width:"120px",height:"1.5rem"})]})]}),Cy=()=>i.jsxs("div",{className:"container-fluid pb-0",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center gap-3 flex-wrap mb-4",children:[i.jsx(wo,{items:["50px","100px","120px"]}),i.jsx(st,{width:"80px",height:"32px"})]}),i.jsx(wl,{titleWidth:"180px"}),i.jsxs("div",{className:"row",children:[i.jsxs("div",{className:"col-lg-8",children:[i.jsx(gt,{children:i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-md-6",children:i.jsx(Ne,{labelWidth:"120px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Ne,{labelWidth:"120px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Ne,{labelWidth:"120px",hasAction:!0})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Ne,{labelWidth:"120px",hasAction:!0})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Ne,{labelWidth:"140px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Ne,{labelWidth:"60px"})}),i.jsx("div",{className:"col-12",children:i.jsxs("div",{className:"form-group",children:[i.jsx(S,{width:"120px",height:"1rem",className:"mb-2"}),i.jsx(F2,{count:6})]})}),i.jsx("div",{className:"col-12",children:i.jsx("div",{className:"form-group",children:i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[i.jsx(S,{width:"140px",height:"1rem"}),i.jsx(st,{width:"120px",height:"32px"})]})})}),i.jsx("div",{className:"col-12",children:i.jsx(Ne,{labelWidth:"100px",inputHeight:"80px"})})]})}),i.jsxs("div",{className:"d-flex align-items-center justify-content-end flex-wrap gap-3 mt-4 mb-5",children:[i.jsx(st,{width:"80px"}),i.jsx(st,{width:"140px"})]})]}),i.jsx("div",{className:"col-lg-4",children:i.jsx("div",{className:"position-sticky top-0",children:i.jsx(gt,{children:i.jsx(Cw,{})})})})]})]}),$R=()=>i.jsx("div",{className:"container-fluid pb-0",children:i.jsx("div",{className:"route-container",children:i.jsx("div",{className:"w-100",children:i.jsxs("div",{className:"row",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center gap-3 flex-wrap mb-4",children:[i.jsx(wo,{items:["50px","100px","140px"]}),i.jsx(st,{width:"80px",height:"32px"})]}),i.jsxs("div",{className:"col-xl-8",children:[i.jsx(wl,{titleWidth:"160px",buttonWidth:"140px"}),i.jsxs(gt,{children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between column-gap-3 row-gap-2 flex-wrap mb-4",children:[i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsx(S,{width:"120px",height:"0.875rem"}),i.jsx(S,{width:"40px",height:"0.875rem"})]}),i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsx(S,{width:"120px",height:"0.875rem"}),i.jsx(S,{width:"60px",height:"0.875rem"})]})]}),i.jsx("div",{className:"bg-body p-3 rounded mb-5",children:i.jsx(Xd,{count:4,colClass:"col-xl-3 col-lg-6",children:i.jsx(E0,{labelWidth:"100px",valueWidth:"140px"})})}),i.jsx(Xd,{count:3,colClass:"col-lg-4",children:t=>i.jsxs(i.Fragment,{children:[i.jsx(S,{width:"100px",height:"0.875rem",className:"mb-2"}),i.jsx("div",{className:"bg-body p-3 rounded",children:i.jsx("div",{className:"mt-2",children:i.jsx(Ys,{avatarSize:"50px",nameWidth:"120px",detailWidth:"100px"})})})]})}),i.jsxs("div",{className:"mt-4",children:[i.jsx(S,{width:"120px",height:"1.125rem",className:"mb-3"}),i.jsx("div",{className:"custom-form-container bg-body p-3 rounded",children:i.jsx(Xd,{count:4,colClass:"col-md-6",children:i.jsx(E0,{labelWidth:"100px",valueWidth:"80px"})})})]})]})]}),i.jsx("div",{className:"col-xl-4",children:i.jsx(Cw,{})})]})})})}),Bi={getAppointments:(t={})=>ve({endpoint:"appointments",method:"GET",data:t}),getAppointment:t=>ve({endpoint:`appointments/${t}`,method:"GET"}),createAppointment:t=>ve({endpoint:"appointments",method:"POST",data:t}),updateAppointment:(t,e)=>ve({endpoint:`appointments/${t}`,method:"PUT",data:e}),updateAppointmentStatus:(t,e)=>ve({endpoint:`appointments/${t}/status`,method:"PUT",data:{status:e}}),regenerateVideoConferenceLink:t=>ve({endpoint:`appointments/${t}/regenerate-video-conference`,method:"GET"}),deleteAppointment:t=>ve({endpoint:`appointments/${t}`,method:"DELETE"}),getAppointmentDetails:t=>ve({endpoint:`appointments/${t}/view`,method:"GET"}),getAppointmentInvoiceHTML:t=>ve({endpoint:`appointments/${t}/invoice-html`,method:"GET"}),printInvoice:t=>ve({endpoint:`appointments/${t}/print-invoice`,method:"GET",responseType:"blob"}),getAvailableSlots:(t={})=>ve({endpoint:"appointments/slots",method:"GET",data:t}),getAppointmentSummary:(t={})=>ve({endpoint:"appointments/summary",method:"GET",data:t}),onPaymentSuccess:t=>{const{method:e,...n}=t;return ve({endpoint:"appointments/payment-success",method:e||"GET",data:n})},verifyPayment:t=>ve({endpoint:"appointments/payment-verify",method:"POST",data:t}),exportAppointments:(t={})=>ve({endpoint:"appointments/export",method:"GET",data:t}),bulkDeleteAppointments:t=>ve({endpoint:"appointments/bulk/delete",method:"POST",data:{ids:t}})},Cn={all:["appointments"],lists:()=>[...Cn.all,"list"],list:t=>[...Cn.lists(),{filters:t}],details:()=>[...Cn.all,"detail"],detail:t=>[...Cn.details(),t],slots:()=>[...Cn.all,"slots"],availableSlots:t=>[...Cn.slots(),t],summaries:()=>[...Cn.all,"summary"],summary:t=>[...Cn.summaries(),t]},aX=(t={},e={})=>ft({queryKey:Cn.list(t),queryFn:()=>Bi.getAppointments(t),...e}),rX=(t,e={})=>ft({queryKey:Cn.detail(t),queryFn:()=>Bi.getAppointment(t),enabled:!!t,...e}),lX=(t,e={})=>{const n=Xn(),s=Jn(),a=Li();let l=!1;return t?.date&&(a?l=!0:l=!!t?.doctor_id),ft({queryKey:Cn.availableSlots(t),queryFn:()=>Bi.getAvailableSlots(t),enabled:l,...e})},oX=()=>{const t=ze();return Le({mutationFn:e=>Bi.createAppointment(e),onSuccess:(e,n)=>{t.invalidateQueries({queryKey:Cn.lists()}),t.invalidateQueries({queryKey:Cn.slots()}),n.doctor_id&&t.invalidateQueries({queryKey:Cn.availableSlots({doctor_id:n.doctor_id})})}})},cX=()=>{const t=ze();return Le({mutationFn:({id:e,...n})=>Bi.updateAppointment(e,n),onSuccess:(e,n)=>{t.invalidateQueries({queryKey:Cn.detail(n.id)}),t.invalidateQueries({queryKey:Cn.lists()}),t.invalidateQueries({queryKey:Cn.slots()}),n.doctor_id&&t.invalidateQueries({queryKey:Cn.availableSlots({doctor_id:n.doctor_id})})}})},dX=()=>{const t=ze();return Le({mutationFn:({id:e,status:n})=>Bi.updateAppointmentStatus(e,n),onSuccess:(e,n)=>{t.invalidateQueries({queryKey:Cn.detail(n.id)}),t.invalidateQueries({queryKey:Cn.lists()})}})},mX=()=>{const t=ze();return Le({mutationFn:e=>Bi.regenerateVideoConferenceLink(e),onSuccess:(e,n)=>{t.invalidateQueries({queryKey:Cn.detail(n.id)}),t.invalidateQueries({queryKey:Cn.lists()})}})},uX=()=>{const t=ze();return Le({mutationFn:e=>Bi.deleteAppointment(e),onSuccess:()=>{t.invalidateQueries({queryKey:Cn.lists()})}})},hX=(t,e={})=>ft({queryKey:Cn.detail(t),queryFn:()=>Bi.getAppointmentDetails(t),enabled:!!t,...e}),pX=(t,e={})=>ft({queryKey:Cn.summary(t),queryFn:()=>Bi.getAppointmentSummary(t),...e}),BR=()=>Le({mutationFn:t=>Bi.printInvoice(t)}),qR=()=>Le({mutationFn:t=>Bi.onPaymentSuccess(t)}),Ape=()=>{const t=ze();return Le({mutationFn:e=>Bi.verifyPayment(e),onSuccess:(e,n)=>{t.invalidateQueries({queryKey:Cn.lists()}),n.appointment_id&&t.invalidateQueries({queryKey:Cn.detail(n.appointment_id)})}})},gX=()=>Le({mutationFn:t=>Bi.exportAppointments(t)}),fX=()=>{const t=ze();return Le({mutationFn:e=>Bi.bulkDeleteAppointments(e),onSuccess:()=>{t.invalidateQueries({queryKey:Cn.lists()})}})};function HR(t){var e,n,s="";if(typeof t=="string"||typeof t=="number")s+=t;else if(typeof t=="object")if(Array.isArray(t)){var a=t.length;for(e=0;e<a;e++)t[e]&&(n=HR(t[e]))&&(s&&(s+=" "),s+=n)}else for(n in t)t[n]&&(s&&(s+=" "),s+=n);return s}function eo(){for(var t,e,n=0,s="",a=arguments.length;n<a;n++)(t=arguments[n])&&(e=HR(t))&&(s&&(s+=" "),s+=e);return s}function vX(t){if(typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",e.firstChild?e.insertBefore(n,e.firstChild):e.appendChild(n),n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t))}vX(`:root{--toastify-color-light: #fff;--toastify-color-dark: #121212;--toastify-color-info: #3498db;--toastify-color-success: #07bc0c;--toastify-color-warning: #f1c40f;--toastify-color-error: hsl(6, 78%, 57%);--toastify-color-transparent: rgba(255, 255, 255, .7);--toastify-icon-color-info: var(--toastify-color-info);--toastify-icon-color-success: var(--toastify-color-success);--toastify-icon-color-warning: var(--toastify-color-warning);--toastify-icon-color-error: var(--toastify-color-error);--toastify-container-width: fit-content;--toastify-toast-width: 320px;--toastify-toast-offset: 16px;--toastify-toast-top: max(var(--toastify-toast-offset), env(safe-area-inset-top));--toastify-toast-right: max(var(--toastify-toast-offset), env(safe-area-inset-right));--toastify-toast-left: max(var(--toastify-toast-offset), env(safe-area-inset-left));--toastify-toast-bottom: max(var(--toastify-toast-offset), env(safe-area-inset-bottom));--toastify-toast-background: #fff;--toastify-toast-padding: 14px;--toastify-toast-min-height: 64px;--toastify-toast-max-height: 800px;--toastify-toast-bd-radius: 6px;--toastify-toast-shadow: 0px 4px 12px rgba(0, 0, 0, .1);--toastify-font-family: sans-serif;--toastify-z-index: 9999;--toastify-text-color-light: #757575;--toastify-text-color-dark: #fff;--toastify-text-color-info: #fff;--toastify-text-color-success: #fff;--toastify-text-color-warning: #fff;--toastify-text-color-error: #fff;--toastify-spinner-color: #616161;--toastify-spinner-color-empty-area: #e0e0e0;--toastify-color-progress-light: linear-gradient(to right, #4cd964, #5ac8fa, #007aff, #34aadc, #5856d6, #ff2d55);--toastify-color-progress-dark: #bb86fc;--toastify-color-progress-info: var(--toastify-color-info);--toastify-color-progress-success: var(--toastify-color-success);--toastify-color-progress-warning: var(--toastify-color-warning);--toastify-color-progress-error: var(--toastify-color-error);--toastify-color-progress-bgo: .2}.Toastify__toast-container{z-index:var(--toastify-z-index);-webkit-transform:translate3d(0,0,var(--toastify-z-index));position:fixed;width:var(--toastify-container-width);box-sizing:border-box;color:#fff;display:flex;flex-direction:column}.Toastify__toast-container--top-left{top:var(--toastify-toast-top);left:var(--toastify-toast-left)}.Toastify__toast-container--top-center{top:var(--toastify-toast-top);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--top-right{top:var(--toastify-toast-top);right:var(--toastify-toast-right);align-items:end}.Toastify__toast-container--bottom-left{bottom:var(--toastify-toast-bottom);left:var(--toastify-toast-left)}.Toastify__toast-container--bottom-center{bottom:var(--toastify-toast-bottom);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--bottom-right{bottom:var(--toastify-toast-bottom);right:var(--toastify-toast-right);align-items:end}.Toastify__toast{--y: 0;position:relative;touch-action:none;width:var(--toastify-toast-width);min-height:var(--toastify-toast-min-height);box-sizing:border-box;margin-bottom:1rem;padding:var(--toastify-toast-padding);border-radius:var(--toastify-toast-bd-radius);box-shadow:var(--toastify-toast-shadow);max-height:var(--toastify-toast-max-height);font-family:var(--toastify-font-family);z-index:0;display:flex;flex:1 auto;align-items:center;word-break:break-word}@media only screen and (max-width: 480px){.Toastify__toast-container{width:100vw;left:env(safe-area-inset-left);margin:0}.Toastify__toast-container--top-left,.Toastify__toast-container--top-center,.Toastify__toast-container--top-right{top:env(safe-area-inset-top);transform:translate(0)}.Toastify__toast-container--bottom-left,.Toastify__toast-container--bottom-center,.Toastify__toast-container--bottom-right{bottom:env(safe-area-inset-bottom);transform:translate(0)}.Toastify__toast-container--rtl{right:env(safe-area-inset-right);left:initial}.Toastify__toast{--toastify-toast-width: 100%;margin-bottom:0;border-radius:0}}.Toastify__toast-container[data-stacked=true]{width:var(--toastify-toast-width)}.Toastify__toast--stacked{position:absolute;width:100%;transform:translate3d(0,var(--y),0) scale(var(--s));transition:transform .3s}.Toastify__toast--stacked[data-collapsed] .Toastify__toast-body,.Toastify__toast--stacked[data-collapsed] .Toastify__close-button{transition:opacity .1s}.Toastify__toast--stacked[data-collapsed=false]{overflow:visible}.Toastify__toast--stacked[data-collapsed=true]:not(:last-child)>*{opacity:0}.Toastify__toast--stacked:after{content:"";position:absolute;left:0;right:0;height:calc(var(--g) * 1px);bottom:100%}.Toastify__toast--stacked[data-pos=top]{top:0}.Toastify__toast--stacked[data-pos=bot]{bottom:0}.Toastify__toast--stacked[data-pos=bot].Toastify__toast--stacked:before{transform-origin:top}.Toastify__toast--stacked[data-pos=top].Toastify__toast--stacked:before{transform-origin:bottom}.Toastify__toast--stacked:before{content:"";position:absolute;left:0;right:0;bottom:0;height:100%;transform:scaleY(3);z-index:-1}.Toastify__toast--rtl{direction:rtl}.Toastify__toast--close-on-click{cursor:pointer}.Toastify__toast-icon{margin-inline-end:10px;width:22px;flex-shrink:0;display:flex}.Toastify--animate{animation-fill-mode:both;animation-duration:.5s}.Toastify--animate-icon{animation-fill-mode:both;animation-duration:.3s}.Toastify__toast-theme--dark{background:var(--toastify-color-dark);color:var(--toastify-text-color-dark)}.Toastify__toast-theme--light,.Toastify__toast-theme--colored.Toastify__toast--default{background:var(--toastify-color-light);color:var(--toastify-text-color-light)}.Toastify__toast-theme--colored.Toastify__toast--info{color:var(--toastify-text-color-info);background:var(--toastify-color-info)}.Toastify__toast-theme--colored.Toastify__toast--success{color:var(--toastify-text-color-success);background:var(--toastify-color-success)}.Toastify__toast-theme--colored.Toastify__toast--warning{color:var(--toastify-text-color-warning);background:var(--toastify-color-warning)}.Toastify__toast-theme--colored.Toastify__toast--error{color:var(--toastify-text-color-error);background:var(--toastify-color-error)}.Toastify__progress-bar-theme--light{background:var(--toastify-color-progress-light)}.Toastify__progress-bar-theme--dark{background:var(--toastify-color-progress-dark)}.Toastify__progress-bar--info{background:var(--toastify-color-progress-info)}.Toastify__progress-bar--success{background:var(--toastify-color-progress-success)}.Toastify__progress-bar--warning{background:var(--toastify-color-progress-warning)}.Toastify__progress-bar--error{background:var(--toastify-color-progress-error)}.Toastify__progress-bar-theme--colored.Toastify__progress-bar--info,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--success,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--warning,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--error{background:var(--toastify-color-transparent)}.Toastify__close-button{color:#fff;position:absolute;top:6px;right:6px;background:transparent;outline:none;border:none;padding:0;cursor:pointer;opacity:.7;transition:.3s ease;z-index:1}.Toastify__toast--rtl .Toastify__close-button{left:6px;right:unset}.Toastify__close-button--light{color:#000;opacity:.3}.Toastify__close-button>svg{fill:currentColor;height:16px;width:14px}.Toastify__close-button:hover,.Toastify__close-button:focus{opacity:1}@keyframes Toastify__trackProgress{0%{transform:scaleX(1)}to{transform:scaleX(0)}}.Toastify__progress-bar{position:absolute;bottom:0;left:0;width:100%;height:100%;z-index:1;opacity:.7;transform-origin:left}.Toastify__progress-bar--animated{animation:Toastify__trackProgress linear 1 forwards}.Toastify__progress-bar--controlled{transition:transform .2s}.Toastify__progress-bar--rtl{right:0;left:initial;transform-origin:right;border-bottom-left-radius:initial}.Toastify__progress-bar--wrp{position:absolute;overflow:hidden;bottom:0;left:0;width:100%;height:5px;border-bottom-left-radius:var(--toastify-toast-bd-radius);border-bottom-right-radius:var(--toastify-toast-bd-radius)}.Toastify__progress-bar--wrp[data-hidden=true]{opacity:0}.Toastify__progress-bar--bg{opacity:var(--toastify-color-progress-bgo);width:100%;height:100%}.Toastify__spinner{width:20px;height:20px;box-sizing:border-box;border:2px solid;border-radius:100%;border-color:var(--toastify-spinner-color-empty-area);border-right-color:var(--toastify-spinner-color);animation:Toastify__spin .65s linear infinite}@keyframes Toastify__bounceInRight{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(3000px,0,0)}60%{opacity:1;transform:translate3d(-25px,0,0)}75%{transform:translate3d(10px,0,0)}90%{transform:translate3d(-5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutRight{20%{opacity:1;transform:translate3d(-20px,var(--y),0)}to{opacity:0;transform:translate3d(2000px,var(--y),0)}}@keyframes Toastify__bounceInLeft{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(-3000px,0,0)}60%{opacity:1;transform:translate3d(25px,0,0)}75%{transform:translate3d(-10px,0,0)}90%{transform:translate3d(5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutLeft{20%{opacity:1;transform:translate3d(20px,var(--y),0)}to{opacity:0;transform:translate3d(-2000px,var(--y),0)}}@keyframes Toastify__bounceInUp{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,3000px,0)}60%{opacity:1;transform:translate3d(0,-20px,0)}75%{transform:translate3d(0,10px,0)}90%{transform:translate3d(0,-5px,0)}to{transform:translateZ(0)}}@keyframes Toastify__bounceOutUp{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,-2000px,0)}}@keyframes Toastify__bounceInDown{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,-3000px,0)}60%{opacity:1;transform:translate3d(0,25px,0)}75%{transform:translate3d(0,-10px,0)}90%{transform:translate3d(0,5px,0)}to{transform:none}}@keyframes Toastify__bounceOutDown{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,2000px,0)}}.Toastify__bounce-enter--top-left,.Toastify__bounce-enter--bottom-left{animation-name:Toastify__bounceInLeft}.Toastify__bounce-enter--top-right,.Toastify__bounce-enter--bottom-right{animation-name:Toastify__bounceInRight}.Toastify__bounce-enter--top-center{animation-name:Toastify__bounceInDown}.Toastify__bounce-enter--bottom-center{animation-name:Toastify__bounceInUp}.Toastify__bounce-exit--top-left,.Toastify__bounce-exit--bottom-left{animation-name:Toastify__bounceOutLeft}.Toastify__bounce-exit--top-right,.Toastify__bounce-exit--bottom-right{animation-name:Toastify__bounceOutRight}.Toastify__bounce-exit--top-center{animation-name:Toastify__bounceOutUp}.Toastify__bounce-exit--bottom-center{animation-name:Toastify__bounceOutDown}@keyframes Toastify__zoomIn{0%{opacity:0;transform:scale3d(.3,.3,.3)}50%{opacity:1}}@keyframes Toastify__zoomOut{0%{opacity:1}50%{opacity:0;transform:translate3d(0,var(--y),0) scale3d(.3,.3,.3)}to{opacity:0}}.Toastify__zoom-enter{animation-name:Toastify__zoomIn}.Toastify__zoom-exit{animation-name:Toastify__zoomOut}@keyframes Toastify__flipIn{0%{transform:perspective(400px) rotateX(90deg);animation-timing-function:ease-in;opacity:0}40%{transform:perspective(400px) rotateX(-20deg);animation-timing-function:ease-in}60%{transform:perspective(400px) rotateX(10deg);opacity:1}80%{transform:perspective(400px) rotateX(-5deg)}to{transform:perspective(400px)}}@keyframes Toastify__flipOut{0%{transform:translate3d(0,var(--y),0) perspective(400px)}30%{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(-20deg);opacity:1}to{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(90deg);opacity:0}}.Toastify__flip-enter{animation-name:Toastify__flipIn}.Toastify__flip-exit{animation-name:Toastify__flipOut}@keyframes Toastify__slideInRight{0%{transform:translate3d(110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInLeft{0%{transform:translate3d(-110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInUp{0%{transform:translate3d(0,110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInDown{0%{transform:translate3d(0,-110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideOutRight{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(110%,var(--y),0)}}@keyframes Toastify__slideOutLeft{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(-110%,var(--y),0)}}@keyframes Toastify__slideOutDown{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,500px,0)}}@keyframes Toastify__slideOutUp{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,-500px,0)}}.Toastify__slide-enter--top-left,.Toastify__slide-enter--bottom-left{animation-name:Toastify__slideInLeft}.Toastify__slide-enter--top-right,.Toastify__slide-enter--bottom-right{animation-name:Toastify__slideInRight}.Toastify__slide-enter--top-center{animation-name:Toastify__slideInDown}.Toastify__slide-enter--bottom-center{animation-name:Toastify__slideInUp}.Toastify__slide-exit--top-left,.Toastify__slide-exit--bottom-left{animation-name:Toastify__slideOutLeft;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-right,.Toastify__slide-exit--bottom-right{animation-name:Toastify__slideOutRight;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-center{animation-name:Toastify__slideOutUp;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--bottom-center{animation-name:Toastify__slideOutDown;animation-timing-function:ease-in;animation-duration:.3s}@keyframes Toastify__spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}
`);var lu=t=>typeof t=="number"&&!isNaN(t),uo=t=>typeof t=="string",Ar=t=>typeof t=="function",xX=t=>uo(t)||lu(t),_y=t=>uo(t)||Ar(t)?t:null,yX=(t,e)=>t===!1||lu(t)&&t>0?t:e,Sy=t=>f.isValidElement(t)||uo(t)||Ar(t)||lu(t);function bX(t,e,n=300){let{scrollHeight:s,style:a}=t;requestAnimationFrame(()=>{a.minHeight="initial",a.height=s+"px",a.transition=`all ${n}ms`,requestAnimationFrame(()=>{a.height="0",a.padding="0",a.margin="0",setTimeout(e,n)})})}function kX({enter:t,exit:e,appendPosition:n=!1,collapse:s=!0,collapseDuration:a=300}){return function({children:l,position:o,preventExitTransition:c,done:d,nodeRef:m,isIn:u,playToast:h}){let p=n?`${t}--${o}`:t,g=n?`${e}--${o}`:e,v=f.useRef(0);return f.useLayoutEffect(()=>{let x=m.current,y=p.split(" "),b=k=>{k.target===m.current&&(h(),x.removeEventListener("animationend",b),x.removeEventListener("animationcancel",b),v.current===0&&k.type!=="animationcancel"&&x.classList.remove(...y))};x.classList.add(...y),x.addEventListener("animationend",b),x.addEventListener("animationcancel",b)},[]),f.useEffect(()=>{let x=m.current,y=()=>{x.removeEventListener("animationend",y),s?bX(x,d,a):d()};u||(c?y():(v.current=1,x.className+=` ${g}`,x.addEventListener("animationend",y)))},[u]),He.createElement(He.Fragment,null,l)}}function gC(t,e){return{content:zR(t.content,t.props),containerId:t.props.containerId,id:t.props.toastId,theme:t.props.theme,type:t.props.type,data:t.props.data||{},isLoading:t.props.isLoading,icon:t.props.icon,reason:t.removalReason,status:e}}function zR(t,e,n=!1){return f.isValidElement(t)&&!uo(t.type)?f.cloneElement(t,{closeToast:e.closeToast,toastProps:e,data:e.data,isPaused:n}):Ar(t)?t({closeToast:e.closeToast,toastProps:e,data:e.data,isPaused:n}):t}function wX({closeToast:t,theme:e,ariaLabel:n="close"}){return He.createElement("button",{className:`Toastify__close-button Toastify__close-button--${e}`,type:"button",onClick:s=>{s.stopPropagation(),t(!0)},"aria-label":n},He.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},He.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}function jX({delay:t,isRunning:e,closeToast:n,type:s="default",hide:a,className:l,controlledProgress:o,progress:c,rtl:d,isIn:m,theme:u}){let h=a||o&&c===0,p={animationDuration:`${t}ms`,animationPlayState:e?"running":"paused"};o&&(p.transform=`scaleX(${c})`);let g=eo("Toastify__progress-bar",o?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${u}`,`Toastify__progress-bar--${s}`,{"Toastify__progress-bar--rtl":d}),v=Ar(l)?l({rtl:d,type:s,defaultClassName:g}):eo(g,l),x={[o&&c>=1?"onTransitionEnd":"onAnimationEnd"]:o&&c<1?null:()=>{m&&n()}};return He.createElement("div",{className:"Toastify__progress-bar--wrp","data-hidden":h},He.createElement("div",{className:`Toastify__progress-bar--bg Toastify__progress-bar-theme--${u} Toastify__progress-bar--${s}`}),He.createElement("div",{role:"progressbar","aria-hidden":h?"true":"false","aria-label":"notification timer",className:v,style:p,...x}))}var NX=1,VR=()=>`${NX++}`;function CX(t,e,n){let s=1,a=0,l=[],o=[],c=e,d=new Map,m=new Set,u=k=>(m.add(k),()=>m.delete(k)),h=()=>{o=Array.from(d.values()),m.forEach(k=>k())},p=({containerId:k,toastId:w,updateId:T})=>{let j=k?k!==t:t!==1,D=d.has(w)&&T==null;return j||D},g=(k,w)=>{d.forEach(T=>{var j;(w==null||w===T.props.toastId)&&((j=T.toggle)==null||j.call(T,k))})},v=k=>{var w,T;(T=(w=k.props)==null?void 0:w.onClose)==null||T.call(w,k.removalReason),k.isActive=!1},x=k=>{if(k==null)d.forEach(v);else{let w=d.get(k);w&&v(w)}h()},y=()=>{a-=l.length,l=[]},b=k=>{var w,T;let{toastId:j,updateId:D}=k.props,_=D==null;k.staleId&&d.delete(k.staleId),k.isActive=!0,d.set(j,k),h(),n(gC(k,_?"added":"updated")),_&&((T=(w=k.props).onOpen)==null||T.call(w))};return{id:t,props:c,observe:u,toggle:g,removeToast:x,toasts:d,clearQueue:y,buildToast:(k,w)=>{if(p(w))return;let{toastId:T,updateId:j,data:D,staleId:_,delay:N}=w,A=j==null;A&&a++;let P={...c,style:c.toastStyle,key:s++,...Object.fromEntries(Object.entries(w).filter(([I,M])=>M!=null)),toastId:T,updateId:j,data:D,isIn:!1,className:_y(w.className||c.toastClassName),progressClassName:_y(w.progressClassName||c.progressClassName),autoClose:w.isLoading?!1:yX(w.autoClose,c.autoClose),closeToast(I){d.get(T).removalReason=I,x(T)},deleteToast(){let I=d.get(T);if(I!=null){if(n(gC(I,"removed")),d.delete(T),a--,a<0&&(a=0),l.length>0){b(l.shift());return}h()}}};P.closeButton=c.closeButton,w.closeButton===!1||Sy(w.closeButton)?P.closeButton=w.closeButton:w.closeButton===!0&&(P.closeButton=Sy(c.closeButton)?c.closeButton:!0);let E={content:k,props:P,staleId:_};c.limit&&c.limit>0&&a>c.limit&&A?l.push(E):lu(N)?setTimeout(()=>{b(E)},N):b(E)},setProps(k){c=k},setToggle:(k,w)=>{let T=d.get(k);T&&(T.toggle=w)},isToastActive:k=>{var w;return(w=d.get(k))==null?void 0:w.isActive},getSnapshot:()=>o}}var Vi=new Map,Tm=[],Ey=new Set,_X=t=>Ey.forEach(e=>e(t)),UR=()=>Vi.size>0;function SX(){Tm.forEach(t=>KR(t.content,t.options)),Tm=[]}var EX=(t,{containerId:e})=>{var n;return(n=Vi.get(e||1))==null?void 0:n.toasts.get(t)};function WR(t,e){var n;if(e)return!!((n=Vi.get(e))!=null&&n.isToastActive(t));let s=!1;return Vi.forEach(a=>{a.isToastActive(t)&&(s=!0)}),s}function TX(t){if(!UR()){Tm=Tm.filter(e=>t!=null&&e.options.toastId!==t);return}if(t==null||xX(t))Vi.forEach(e=>{e.removeToast(t)});else if(t&&("containerId"in t||"id"in t)){let e=Vi.get(t.containerId);e?e.removeToast(t.id):Vi.forEach(n=>{n.removeToast(t.id)})}}var AX=(t={})=>{Vi.forEach(e=>{e.props.limit&&(!t.containerId||e.id===t.containerId)&&e.clearQueue()})};function KR(t,e){Sy(t)&&(UR()||Tm.push({content:t,options:e}),Vi.forEach(n=>{n.buildToast(t,e)}))}function DX(t){var e;(e=Vi.get(t.containerId||1))==null||e.setToggle(t.id,t.fn)}function GR(t,e){Vi.forEach(n=>{(e==null||!(e!=null&&e.containerId)||e?.containerId===n.id)&&n.toggle(t,e?.id)})}function RX(t){let e=t.containerId||1;return{subscribe(n){let s=CX(e,t,_X);Vi.set(e,s);let a=s.observe(n);return SX(),()=>{a(),Vi.delete(e)}},setProps(n){var s;(s=Vi.get(e))==null||s.setProps(n)},getSnapshot(){var n;return(n=Vi.get(e))==null?void 0:n.getSnapshot()}}}function PX(t){return Ey.add(t),()=>{Ey.delete(t)}}function MX(t){return t&&(uo(t.toastId)||lu(t.toastId))?t.toastId:VR()}function ou(t,e){return KR(t,e),e.toastId}function Zg(t,e){return{...e,type:e&&e.type||t,toastId:MX(e)}}function Xg(t){return(e,n)=>ou(e,Zg(t,n))}function Se(t,e){return ou(t,Zg("default",e))}Se.loading=(t,e)=>ou(t,Zg("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...e}));function IX(t,{pending:e,error:n,success:s},a){let l;e&&(l=uo(e)?Se.loading(e,a):Se.loading(e.render,{...a,...e}));let o={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},c=(m,u,h)=>{if(u==null){Se.dismiss(l);return}let p={type:m,...o,...a,data:h},g=uo(u)?{render:u}:u;return l?Se.update(l,{...p,...g}):Se(g.render,{...p,...g}),h},d=Ar(t)?t():t;return d.then(m=>c("success",s,m)).catch(m=>c("error",n,m)),d}Se.promise=IX;Se.success=Xg("success");Se.info=Xg("info");Se.error=Xg("error");Se.warning=Xg("warning");Se.warn=Se.warning;Se.dark=(t,e)=>ou(t,Zg("default",{theme:"dark",...e}));function OX(t){TX(t)}Se.dismiss=OX;Se.clearWaitingQueue=AX;Se.isActive=WR;Se.update=(t,e={})=>{let n=EX(t,e);if(n){let{props:s,content:a}=n,l={delay:100,...s,...e,toastId:e.toastId||t,updateId:VR()};l.toastId!==t&&(l.staleId=t);let o=l.render||a;delete l.render,ou(o,l)}};Se.done=t=>{Se.update(t,{progress:1})};Se.onChange=PX;Se.play=t=>GR(!0,t);Se.pause=t=>GR(!1,t);function FX(t){var e;let{subscribe:n,getSnapshot:s,setProps:a}=f.useRef(RX(t)).current;a(t);let l=(e=f.useSyncExternalStore(n,s,s))==null?void 0:e.slice();function o(c){if(!l)return[];let d=new Map;return t.newestOnTop&&l.reverse(),l.forEach(m=>{let{position:u}=m.props;d.has(u)||d.set(u,[]),d.get(u).push(m)}),Array.from(d,m=>c(m[0],m[1]))}return{getToastToRender:o,isToastActive:WR,count:l?.length}}function LX(t){let[e,n]=f.useState(!1),[s,a]=f.useState(!1),l=f.useRef(null),o=f.useRef({start:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,didMove:!1}).current,{autoClose:c,pauseOnHover:d,closeToast:m,onClick:u,closeOnClick:h}=t;DX({id:t.toastId,containerId:t.containerId,fn:n}),f.useEffect(()=>{if(t.pauseOnFocusLoss)return p(),()=>{g()}},[t.pauseOnFocusLoss]);function p(){document.hasFocus()||b(),window.addEventListener("focus",y),window.addEventListener("blur",b)}function g(){window.removeEventListener("focus",y),window.removeEventListener("blur",b)}function v(_){if(t.draggable===!0||t.draggable===_.pointerType){k();let N=l.current;o.canCloseOnClick=!0,o.canDrag=!0,N.style.transition="none",t.draggableDirection==="x"?(o.start=_.clientX,o.removalDistance=N.offsetWidth*(t.draggablePercent/100)):(o.start=_.clientY,o.removalDistance=N.offsetHeight*(t.draggablePercent===80?t.draggablePercent*1.5:t.draggablePercent)/100)}}function x(_){let{top:N,bottom:A,left:P,right:E}=l.current.getBoundingClientRect();_.nativeEvent.type!=="touchend"&&t.pauseOnHover&&_.clientX>=P&&_.clientX<=E&&_.clientY>=N&&_.clientY<=A?b():y()}function y(){n(!0)}function b(){n(!1)}function k(){o.didMove=!1,document.addEventListener("pointermove",T),document.addEventListener("pointerup",j)}function w(){document.removeEventListener("pointermove",T),document.removeEventListener("pointerup",j)}function T(_){let N=l.current;if(o.canDrag&&N){o.didMove=!0,e&&b(),t.draggableDirection==="x"?o.delta=_.clientX-o.start:o.delta=_.clientY-o.start,o.start!==_.clientX&&(o.canCloseOnClick=!1);let A=t.draggableDirection==="x"?`${o.delta}px, var(--y)`:`0, calc(${o.delta}px + var(--y))`;N.style.transform=`translate3d(${A},0)`,N.style.opacity=`${1-Math.abs(o.delta/o.removalDistance)}`}}function j(){w();let _=l.current;if(o.canDrag&&o.didMove&&_){if(o.canDrag=!1,Math.abs(o.delta)>o.removalDistance){a(!0),t.closeToast(!0),t.collapseAll();return}_.style.transition="transform 0.2s, opacity 0.2s",_.style.removeProperty("transform"),_.style.removeProperty("opacity")}}let D={onPointerDown:v,onPointerUp:x};return c&&d&&(D.onMouseEnter=b,t.stacked||(D.onMouseLeave=y)),h&&(D.onClick=_=>{u&&u(_),o.canCloseOnClick&&m(!0)}),{playToast:y,pauseToast:b,isRunning:e,preventExitTransition:s,toastRef:l,eventHandlers:D}}var $X=typeof window<"u"?f.useLayoutEffect:f.useEffect,Jg=({theme:t,type:e,isLoading:n,...s})=>He.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:t==="colored"?"currentColor":`var(--toastify-icon-color-${e})`,...s});function BX(t){return He.createElement(Jg,{...t},He.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))}function qX(t){return He.createElement(Jg,{...t},He.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))}function HX(t){return He.createElement(Jg,{...t},He.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))}function zX(t){return He.createElement(Jg,{...t},He.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))}function VX(){return He.createElement("div",{className:"Toastify__spinner"})}var Ty={info:qX,warning:BX,success:HX,error:zX,spinner:VX},UX=t=>t in Ty;function WX({theme:t,type:e,isLoading:n,icon:s}){let a=null,l={theme:t,type:e};return s===!1||(Ar(s)?a=s({...l,isLoading:n}):f.isValidElement(s)?a=f.cloneElement(s,l):n?a=Ty.spinner():UX(e)&&(a=Ty[e](l))),a}var KX=t=>{let{isRunning:e,preventExitTransition:n,toastRef:s,eventHandlers:a,playToast:l}=LX(t),{closeButton:o,children:c,autoClose:d,onClick:m,type:u,hideProgressBar:h,closeToast:p,transition:g,position:v,className:x,style:y,progressClassName:b,updateId:k,role:w,progress:T,rtl:j,toastId:D,deleteToast:_,isIn:N,isLoading:A,closeOnClick:P,theme:E,ariaLabel:I}=t,M=eo("Toastify__toast",`Toastify__toast-theme--${E}`,`Toastify__toast--${u}`,{"Toastify__toast--rtl":j},{"Toastify__toast--close-on-click":P}),O=Ar(x)?x({rtl:j,position:v,type:u,defaultClassName:M}):eo(M,x),F=WX(t),H=!!T||!d,G={closeToast:p,type:u,theme:E},z=null;return o===!1||(Ar(o)?z=o(G):f.isValidElement(o)?z=f.cloneElement(o,G):z=wX(G)),He.createElement(g,{isIn:N,done:_,position:v,preventExitTransition:n,nodeRef:s,playToast:l},He.createElement("div",{id:D,tabIndex:0,onClick:m,"data-in":N,className:O,...a,style:y,ref:s,...N&&{role:w,"aria-label":I}},F!=null&&He.createElement("div",{className:eo("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!A})},F),zR(c,t,!e),z,!t.customProgressBar&&He.createElement(jX,{...k&&!H?{key:`p-${k}`}:{},rtl:j,theme:E,delay:d,isRunning:e,isIn:N,closeToast:p,hide:h,type:u,className:b,controlledProgress:H,progress:T||0})))},GX=(t,e=!1)=>({enter:`Toastify--animate Toastify__${t}-enter`,exit:`Toastify--animate Toastify__${t}-exit`,appendPosition:e}),YX=kX(GX("bounce",!0)),QX={position:"top-right",transition:YX,autoClose:5e3,closeButton:!0,pauseOnHover:!0,pauseOnFocusLoss:!0,draggable:"touch",draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light","aria-label":"Notifications Alt+T",hotKeys:t=>t.altKey&&t.code==="KeyT"};function Dpe(t){let e={...QX,...t},n=t.stacked,[s,a]=f.useState(!0),l=f.useRef(null),{getToastToRender:o,isToastActive:c,count:d}=FX(e),{className:m,style:u,rtl:h,containerId:p,hotKeys:g}=e;function v(y){let b=eo("Toastify__toast-container",`Toastify__toast-container--${y}`,{"Toastify__toast-container--rtl":h});return Ar(m)?m({position:y,rtl:h,defaultClassName:b}):eo(b,_y(m))}function x(){n&&(a(!0),Se.play())}return $X(()=>{var y;if(n){let b=l.current.querySelectorAll('[data-in="true"]'),k=12,w=(y=e.position)==null?void 0:y.includes("top"),T=0,j=0;Array.from(b).reverse().forEach((D,_)=>{let N=D;N.classList.add("Toastify__toast--stacked"),_>0&&(N.dataset.collapsed=`${s}`),N.dataset.pos||(N.dataset.pos=w?"top":"bot");let A=T*(s?.2:1)+(s?0:k*_);N.style.setProperty("--y",`${w?A:A*-1}px`),N.style.setProperty("--g",`${k}`),N.style.setProperty("--s",`${1-(s?j:0)}`),T+=N.offsetHeight,j+=.025})}},[s,d,n]),f.useEffect(()=>{function y(b){var k;let w=l.current;g(b)&&((k=w.querySelector('[tabIndex="0"]'))==null||k.focus(),a(!1),Se.pause()),b.key==="Escape"&&(document.activeElement===w||w!=null&&w.contains(document.activeElement))&&(a(!0),Se.play())}return document.addEventListener("keydown",y),()=>{document.removeEventListener("keydown",y)}},[g]),He.createElement("section",{ref:l,className:"Toastify",id:p,onMouseEnter:()=>{n&&(a(!1),Se.pause())},onMouseLeave:x,"aria-live":"polite","aria-atomic":"false","aria-relevant":"additions text","aria-label":e["aria-label"]},o((y,b)=>{let k=b.length?{...u}:{...u,pointerEvents:"none"};return He.createElement("div",{tabIndex:-1,className:v(y),"data-stacked":n,style:k,key:`c-${y}`},b.map(({content:w,props:T})=>He.createElement(KX,{...T,stacked:n,collapseAll:x,isIn:c(T.toastId,T.containerId),key:`t-${T.key}`},w)))}))}const hs=(t,e="export.csv")=>{if(!t||t.length===0)throw new Error("No data to export");const n=Object.keys(t[0]),s=[n.join(","),...t.map(l=>n.map(o=>{const c=l[o]||"",d=String(c);return d.includes(",")||d.includes('"')||d.includes(`
`)?`"${d.replace(/"/g,'""')}"`:d}).join(","))].join(`
`),a=new Blob([s],{type:"text/csv;charset=utf-8;"});YR(a,e)},ps=(t,e="export.xls")=>{if(!t||t.length===0)throw new Error("No data to export");const n=Object.keys(t[0]),s=`
    <html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel">
      <head>
        <meta charset="utf-8">
        <!--[if gte mso 9]>
        <xml>
          <x:ExcelWorkbook>
            <x:ExcelWorksheets>
              <x:ExcelWorksheet>
                <x:Name>Doctors</x:Name>
                <x:WorksheetOptions>
                  <x:DisplayGridlines/>
                </x:WorksheetOptions>
              </x:ExcelWorksheet>
            </x:ExcelWorksheets>
          </x:ExcelWorkbook>
        </xml>
        <![endif]-->
        <style>
          table { 
            border-collapse: collapse; 
            width: 100%; 
            font-family: Arial, sans-serif;
            font-size: 11px;
          }
          th, td { 
            border: 1px solid #d0d0d0; 
            padding: 8px 10px; 
            text-align: left;
            white-space: nowrap;
          }
          th { 
            background-color: #4472C4; 
            color: white; 
            font-weight: bold;
            text-transform: lowercase;
          }
          tr:nth-child(even) {
            background-color: #f9f9f9;
          }
        </style>
      </head>
      <body>
        <table>
          <thead>
            <tr>
              ${n.map(l=>`<th>${rc(l)}</th>`).join("")}
            </tr>
          </thead>
          <tbody>
            ${t.map(l=>`
              <tr>
                ${n.map(o=>`<td>${rc(String(l[o]||""))}</td>`).join("")}
              </tr>
            `).join("")}
          </tbody>
        </table>
      </body>
    </html>
  `,a=new Blob([s],{type:"application/vnd.ms-excel"});YR(a,e)},gs=(t,e="export.pdf",n="Export Data")=>{if(!t||t.length===0)throw new Error("No data to export");const s=Object.keys(t[0]),a=`
    <!DOCTYPE html>
    <html>
      <head>
        <meta charset="utf-8">
        <title>${rc(n)}</title>
        <style>
          @page { size: A4 landscape; margin: 15mm; }
          body { font-family: Arial, sans-serif; margin: 0; padding: 20px; font-size: 11px; }
          h1 { color: #333; text-align: center; margin-bottom: 20px; font-size: 20px; font-weight: bold; }
          table { width: 100%; border-collapse: collapse; margin-top: 10px; font-size: 10px; }
          th, td { border: 1px solid #ddd; padding: 6px 8px; text-align: left; word-wrap: break-word; }
          th { background-color: #4472C4; color: white; font-weight: bold; text-transform: lowercase; }
          tr:nth-child(even) { background-color: #f9f9f9; }
          .footer { margin-top: 20px; text-align: center; font-size: 9px; color: #666; }
        </style>
      </head>
      <body>
        <h1>${rc(n)}</h1>
        <table>
          <thead><tr>${s.map(c=>`<th>${rc(c)}</th>`).join("")}</tr></thead>
          <tbody>${t.map(c=>`<tr>${s.map(d=>`<td>${rc(String(c[d]||""))}</td>`).join("")}</tr>`).join("")}</tbody>
        </table>
        <div class="footer">Generated on ${new Date().toLocaleString()}</div>
        <script>
          window.onload = () => setTimeout(() => window.print(), 500);
        <\/script>
      </body>
    </html>
  `,l=new Blob([a],{type:"text/html"}),o=URL.createObjectURL(l);window.open(o,"_blank"),setTimeout(()=>URL.revokeObjectURL(o),1e3)},YR=(t,e)=>{const n=window.URL.createObjectURL(t),s=document.createElement("a");s.href=n,s.download=e,document.body.appendChild(s),s.click(),document.body.removeChild(s),window.URL.revokeObjectURL(n)},rc=t=>{const e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"};return t.replace(/[&<>"']/g,n=>e[n])},Ms={getSettings:(t={})=>ve({endpoint:"settings",method:"GET",data:t}),getSetting:(t,e,n={})=>{if(t==="webhooks"){let s;switch(e){case"list":s="webhooks";break;case"table-config":s="webhooks/table-config";break;case"events":s="webhooks/events";break;default:s=`webhooks/${e}`}return ve({endpoint:s,method:"GET",data:n})}return ve({endpoint:`${t}/${e}`,method:"GET",data:n})},updateSettings:(t,e,n)=>ve({endpoint:`${t}/${e}`,method:"PUT",data:n}),getClinicData:()=>ve({endpoint:"clinic",method:"GET"}),updateClinicData:t=>ve({endpoint:"clinic",method:"PUT",data:t}),getCustomNotifications:(t={})=>ve({endpoint:"settings/custom-notifications",method:"GET",data:t}),getCustomNotification:t=>ve({endpoint:`settings/custom-notifications/${t}`,method:"GET"}),createCustomNotification:t=>ve({endpoint:"settings/custom-notifications",method:"POST",data:t}),updateCustomNotification:(t,e)=>ve({endpoint:`settings/custom-notifications/${t}`,method:"PUT",data:e}),testCustomNotification:(t,e)=>ve({endpoint:`settings/custom-notifications/${t}/test`,method:"POST",data:e}),deleteCustomNotification:t=>ve({endpoint:`settings/custom-notifications/${t}`,method:"DELETE"}),updateCustomNotificationStatus:(t,e)=>ve({endpoint:`settings/custom-notifications/${t}/status`,method:"PUT",data:e}),getWebhookStatistics:(t,e={})=>ve({endpoint:`webhooks/statistics/${t}`,method:"GET",data:e}),exportCustomFields:(t={})=>ve({endpoint:"setting/custom-field/export",method:"GET",data:t}),exportHolidays:(t={})=>ve({endpoint:"settings/holidays/export",method:"GET",data:t}),exportListings:(t={})=>ve({endpoint:"settings/listing/export",method:"GET",data:t}),getDisabledDates:(t={})=>ve({endpoint:"settings/holidays/disabled-dates",method:"GET",data:t})},Pn={all:["settings"],lists:()=>[...Pn.all,"list"],list:t=>[...Pn.lists(),{filters:t}],details:()=>[...Pn.all,"detail"],detail:(t,e)=>[...Pn.details(),t,e],clinic:()=>[...Pn.all,"clinic"],webhooks:()=>[...Pn.all,"webhooks"],webhookList:t=>[...Pn.webhooks(),"list",{filters:t}],webhookDetail:t=>[...Pn.webhooks(),"detail",t],webhookTableConfig:()=>[...Pn.webhooks(),"table-config"],webhookEvents:()=>[...Pn.webhooks(),"events"],webhookStatistics:(t,e)=>[...Pn.webhooks(),"statistics",t,{params:e}]},kn=(t,e,n={},s={})=>ft({queryKey:[...Pn.detail(t,e),n],queryFn:()=>Ms.getSetting(t,e,n),enabled:!!(t&&e),...s}),un=(t,e)=>{const n=ze();return Le({mutationFn:s=>{const a=s?.module||t,l=s?.key||e,o=s?.module||s?.key?s?.data:s;return Ms.updateSettings(a,l,o)},onSuccess:(s,a)=>{const l=a?.module||t,o=a?.key||e;n.invalidateQueries({queryKey:Pn.lists()}),n.invalidateQueries({queryKey:["config","settings"]}),n.invalidateQueries({queryKey:Pn.details()}),l&&o&&n.invalidateQueries({queryKey:Pn.detail(l,o)})}})},ZX=(t={},e={})=>ft({queryKey:[...Pn.all,"custom-notifications",t],queryFn:()=>Ms.getCustomNotifications(t),...e}),QR=(t,e={})=>ft({queryKey:[...Pn.all,"custom-notification",t],queryFn:()=>Ms.getCustomNotification(t),enabled:!!t&&t!=="new",...e}),XX=(t={})=>{const e=ze();return Le({mutationFn:n=>Ms.createCustomNotification(n),onSuccess:()=>{e.invalidateQueries({queryKey:[...Pn.all,"custom-notifications"]})},...t})},JX=(t={})=>{const e=ze();return Le({mutationFn:({id:n,data:s})=>Ms.updateCustomNotification(n,s),onSuccess:(n,{id:s})=>{e.invalidateQueries({queryKey:[...Pn.all,"custom-notifications"]}),e.invalidateQueries({queryKey:[...Pn.all,"custom-notification",s]})},...t})},eJ=(t={})=>Le({mutationFn:({id:e,data:n})=>Ms.testCustomNotification(e,n),...t}),tJ=(t={})=>{const e=ze();return Le({mutationFn:n=>Ms.deleteCustomNotification(n),onSuccess:(n,s)=>{e.invalidateQueries({queryKey:[...Pn.all,"custom-notifications"]}),e.invalidateQueries({queryKey:[...Pn.all,"custom-notification",s]})},...t})},nJ=(t={})=>{const e=ze();return Le({mutationFn:({id:n,data:s})=>Ms.updateCustomNotificationStatus(n,s),onSuccess:(n,{id:s})=>{e.invalidateQueries({queryKey:[...Pn.all,"custom-notifications"]}),e.invalidateQueries({queryKey:[...Pn.all,"custom-notification",s]})},...t})},iJ=()=>Le({mutationFn:t=>Ms.exportCustomFields(t)}),sJ=()=>Le({mutationFn:t=>Ms.exportHolidays(t)}),aJ=()=>Le({mutationFn:t=>Ms.exportListings(t)}),rJ=(t={},e={})=>ft({queryKey:[...Pn.all,"holidays","disabled-dates",t],queryFn:()=>Ms.getDisabledDates(t),enabled:!!(t.module_type&&t.module_id),staleTime:30*1e3,...e}),cu=({id:t="kc-file-upload-input",name:e="file",defaultFile:n="",defaultFileId:s="",onChange:a,className:l="",disabled:o=!1,required:c=!1,label:d="",register:m,errors:u={},showPreview:h=!0,accept:p="",...g})=>{const[v,x]=f.useState(n),[y,b]=f.useState(s),[k,w]=f.useState(!1),[T,j]=f.useState(!1),[D,_]=f.useState(null),N=f.useRef(null),A=f.useRef(null),P=u[e],E=!!v,I={};c&&(I.required=r("This field is required","kivicare-clinic-management-system"));const{ref:M,...O}=m?m(e,I):{ref:null},F=!!P||!!D,H=P?.message||D;f.useEffect(()=>{w(typeof window<"u"&&window.wp&&window.wp.media)},[]),f.useEffect(()=>{n&&x(n),s&&b(s)},[n,s]);const G=async U=>{try{j(!0),_(null);const X=window.kc_frontend?.rest_url,J=await ve({endpoint:`${X}/wp/v2/media`,method:"POST",data:U,isFile:!0});if(!J||J.success===!1)throw new Error(J?.message||r("Failed to upload file","kivicare-clinic-management-system"));if(x(J.source_url),b(J.id),N.current){N.current.value=J.id;const he=new Event("input",{bubbles:!0});N.current.dispatchEvent(he)}return a&&a({id:J.id,url:J.source_url,filename:J.title?.raw||"",type:J.media_type,subtype:J.mime_type,size:J.media_details?.filesize||0},J.id),J}catch(X){throw console.error("Error uploading file:",X),_(X.message||r("Failed to upload file","kivicare-clinic-management-system")),X}finally{j(!1)}},z=U=>{if(U.preventDefault(),!window.wp||!window.wp.media){A.current&&A.current.click();return}_(null);const X=window.wp.media({title:r("Select or Upload File","kivicare-clinic-management-system"),button:{text:r("Use this file","kivicare-clinic-management-system")},multiple:!1,library:{type:p?p.split(",").map(J=>J.trim()):""}});X.on("select",function(){const J=X.state().get("selection").first().toJSON();if(p&&!p.split(",").map(le=>le.trim()).includes(J.mime)){_(r("Please select a valid file format","kivicare-clinic-management-system"));return}if(x(J.url),b(J.id),N.current){N.current.value=J.id;const he=new Event("input",{bubbles:!0});N.current.dispatchEvent(he)}a&&a({id:J.id,url:J.url,filename:J.filename,type:J.type,subtype:J.subtype,size:J.filesizeInBytes},J.id)}),X.open()},ie=async U=>{const X=U.target.files[0];if(X){if(_(null),p&&!p.split(",").map(he=>he.trim()).includes(X.type)){_(r("Please select a valid file format","kivicare-clinic-management-system"));return}if(X.size>10*1024*1024){_(r("File size should not exceed 10MB","kivicare-clinic-management-system"));return}try{if(x(X.name),b(""),N.current){N.current.value="";const J=new Event("input",{bubbles:!0});N.current.dispatchEvent(J)}a&&a({url:"",filename:X.name,type:X.type,size:X.size,file:X},""),k||await G(X)}catch(J){console.error("Error handling file:",J)}}},W=U=>{if(o){U.preventDefault();return}T||(k?z(U):A.current&&A.current.click())},ge=U=>{if(U.preventDefault(),U.stopPropagation(),!o){if(x(""),b(""),N.current){N.current.value="";const X=new Event("input",{bubbles:!0});N.current.dispatchEvent(X)}A.current&&(A.current.value=""),a&&a({url:"",filename:"",type:"",size:0},"")}},ae=U=>{N.current=U,M&&M(U)};return i.jsxs("div",{className:`form-group ${l}`,children:[d&&i.jsxs("label",{htmlFor:t,className:"form-label",children:[d,c&&i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsxs("div",{className:`kc-file-upload ${E?"uploaded":""} ${T?"uploading":""} ${F?"is-invalid":""}`,children:[i.jsx("input",{type:"text",id:`${t}-hidden`,className:"d-none",...O,value:y||"",ref:ae,readOnly:!0,disabled:o}),i.jsx("input",{type:"file",id:t,className:"kc-file-upload-input d-none",onChange:ie,accept:p,ref:A,disabled:T||o,"aria-invalid":F?"true":"false","aria-describedby":F?`${t}-error`:void 0}),E?i.jsxs("div",{className:"p-2 border rounded bg-light d-flex align-items-center justify-content-between",children:[i.jsx("span",{className:"text-truncate me-2",title:v?v.includes("/")?v.split("/").pop():v:"",children:v?v.includes("/")?v.split("/").pop():v:""}),h&&i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[v&&v.startsWith("http")&&i.jsx("a",{href:v,target:"_blank",rel:"noopener noreferrer",className:"btn btn-sm btn-icon btn-primary",title:r("View File","kivicare-clinic-management-system"),children:i.jsx("span",{className:"btn-inner",children:i.jsxs("svg",{width:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[i.jsx("path",{d:"M22.4627 11.666C22.6136 11.8715 22.6136 12.1528 22.4627 12.3582C20.6976 14.7607 16.5916 19.5 12.0001 19.5C7.40864 19.5 3.30252 14.7607 1.53744 12.3582C1.38656 12.1528 1.38656 11.8715 1.53744 11.666C3.30252 9.2635 7.40864 4.52417 12.0001 4.52417C16.5916 4.52417 20.6976 9.2635 22.4627 11.666Z",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M12 15C13.6569 15 15 13.6569 15 12C15 10.3431 13.6569 9 12 9C10.3431 9 9 10.3431 9 12C9 13.6569 10.3431 15 12 15Z",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]})})}),i.jsx("button",{type:"button",className:"btn btn-sm btn-icon btn-danger",onClick:ge,title:r("Remove File","kivicare-clinic-management-system"),disabled:o,children:i.jsx("span",{className:"btn-inner",children:i.jsxs("svg",{width:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[i.jsx("path",{d:"M19.3248 9.46826C19.3248 9.46826 18.7818 16.2033 18.4668 19.0403C18.3168 20.3953 17.4798 21.1893 16.1088 21.2143C13.4998 21.2613 10.8878 21.2643 8.27979 21.2093C6.96079 21.1823 6.13779 20.3783 5.99079 19.0473C5.67379 16.1853 5.13379 9.46826 5.13379 9.46826",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M20.708 6.23975H3.75",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M17.4406 6.23973C16.6556 6.23973 15.9796 5.68473 15.8256 4.91573L15.5826 3.69973C15.4326 3.13873 14.9246 2.75073 14.3456 2.75073H10.1126C9.53358 2.75073 9.02558 3.13873 8.87558 3.69973L8.63258 4.91573C8.47858 5.68473 7.80258 6.23973 7.01758 6.23973",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]})})})]})]}):i.jsx("div",{className:`kc-file-upload-wrapper ${F?"border-danger":""} ${o?"disabled":""}`,style:o?{pointerEvents:"none",opacity:.6}:{},children:i.jsxs("div",{className:"kc-file-upload-container",children:[i.jsx("button",{type:"button",className:"kc-browse-btn",onClick:W,disabled:T||o,children:T?i.jsx("div",{className:"spinner-border spinner-border-sm",role:"status",children:i.jsx("span",{className:"visually-hidden",children:r("Uploading...","kivicare-clinic-management-system")})}):r("Browse...","kivicare-clinic-management-system")}),i.jsx("div",{className:"kc-file-text-area",children:T?r("Uploading...","kivicare-clinic-management-system"):r("No file selected.","kivicare-clinic-management-system")})]})}),F&&i.jsx("div",{id:`${t}-error`,className:"invalid-feedback d-block",role:"alert",children:H})]})]})};cu.propTypes={id:Ae.string,name:Ae.string,defaultFile:Ae.string,defaultFileId:Ae.oneOfType([Ae.string,Ae.number]),onChange:Ae.func,className:Ae.string,disabled:Ae.bool,required:Ae.bool,label:Ae.string,register:Ae.func,errors:Ae.object,accept:Ae.string};const ZR={importData:t=>{if(!t||!(t instanceof FormData))throw new Error("Invalid form data provided");const n=`import/${t.get("context")||"doctors"}`;return ve({endpoint:n,method:"POST",data:t,isFile:!0})},downloadSampleFile:(t,e)=>{if(!t||!e)throw new Error("Context and format are required");const l=`${{doctors:"doctor",patients:"patient",receptionists:"receptionist",clinics:"clinic",appointments:"appointment",services:"service","custom-fields":"customField",prescriptions:"prescription",listing:"listing"}[t]||"doctor"}${e==="csv"?".csv":".xlsx"}`,c={csv:"csv",xlsx:"xlsx"}[e]||e,m=`${window.kc_frontend?.kivicare_pro_dir_uri||""}demoImportFiles/${c}/${l}`;return Promise.resolve({data:m,fileName:l})},getImportTemplates:t=>{if(!t)throw new Error("Context is required");return ve({endpoint:`import/templates/${t}`,method:"GET"})},validateImportFile:t=>{if(!t)throw new Error("File data is required");return ve({endpoint:"import/validate",method:"POST",data:t,isFile:!0})}},lJ=()=>Le({mutationFn:t=>ZR.importData(t),onSuccess:t=>{},onError:t=>{console.error("Import failed:",t)}}),oJ=()=>Le({mutationFn:({context:t,format:e})=>ZR.downloadSampleFile(t,e),onSuccess:(t,e)=>{try{const n=document.createElement("a");n.href=t.data,n.download=t.fileName,n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n)}catch(n){console.error("Failed to download sample file:",n)}},onError:t=>{console.error("Sample file download failed:",t)}}),Lr=({show:t,onHide:e,onImport:n,onReopenImport:s,onDataRefresh:a,context:l="doctors",encounterId:o=null})=>{const[c,d]=f.useState(null),[m,u]=f.useState(0),[h,p]=f.useState(null),[g,v]=f.useState(!1),x=lJ(),y=oJ(),{control:b,handleSubmit:k,watch:w,setValue:T,formState:{errors:j},reset:D}=en({defaultValues:{fileFormat:null,file:null,sendEmailNotification:!1,sendSMSNotification:!1}}),_=w("fileFormat"),N=[{value:"csv",label:r("CSV","kivicare-clinic-management-system"),icon:"ph-file-csv"},{value:"xlsx",label:r("XLSX","kivicare-clinic-management-system"),icon:"ph-file-xls"}],A=f.useMemo(()=>({doctors:{title:r("Doctors Import","kivicare-clinic-management-system"),requiredFields:[r("First Name","kivicare-clinic-management-system"),r("Last Name","kivicare-clinic-management-system"),r("Email","kivicare-clinic-management-system"),r("Country Calling Code","kivicare-clinic-management-system"),r("Country Code","kivicare-clinic-management-system"),r("Contact","kivicare-clinic-management-system"),r("Gender","kivicare-clinic-management-system"),r("Specialization","kivicare-clinic-management-system")]},patients:{title:r("Patients Import","kivicare-clinic-management-system"),requiredFields:[r("first_name","kivicare-clinic-management-system"),r("last_name","kivicare-clinic-management-system"),r("email","kivicare-clinic-management-system"),r("country_calling_code","kivicare-clinic-management-system"),r("country_code","kivicare-clinic-management-system"),r("contact","kivicare-clinic-management-system"),r("gender","kivicare-clinic-management-system")]},receptionists:{title:r("Receptionists Import","kivicare-clinic-management-system"),requiredFields:[r("First Name","kivicare-clinic-management-system"),r("Last Name","kivicare-clinic-management-system"),r("Email","kivicare-clinic-management-system"),r("Country Calling Code","kivicare-clinic-management-system"),r("Country Code","kivicare-clinic-management-system"),r("Contact ","kivicare-clinic-management-system"),r("Gender  ","kivicare-clinic-management-system")]},clinics:{title:r("Clinics Import","kivicare-clinic-management-system"),requiredFields:[r("clinic_name","kivicare-clinic-management-system"),r("email","kivicare-clinic-management-system"),r("country_calling_code","kivicare-clinic-management-system"),r("country_code","kivicare-clinic-management-system"),r("contact","kivicare-clinic-management-system"),r("specialization","kivicare-clinic-management-system"),r("address","kivicare-clinic-management-system"),r("city","kivicare-clinic-management-system"),r("country","kivicare-clinic-management-system"),r("postal_code","kivicare-clinic-management-system"),r("clinic_admin_first_name","kivicare-clinic-management-system"),r("clinic_admin_last_name","kivicare-clinic-management-system"),r("clinic_admin_email","kivicare-clinic-management-system"),r("clinic_admin_country_calling_code","kivicare-clinic-management-system"),r("clinic_admin_country_code","kivicare-clinic-management-system"),r("clinic_admin_contact","kivicare-clinic-management-system"),r("clinic_admin_gender","kivicare-clinic-management-system")]},services:{title:r("Services Import","kivicare-clinic-management-system"),requiredFields:[r("category","kivicare-clinic-management-system"),r("name","kivicare-clinic-management-system"),r("charges","kivicare-clinic-management-system"),r("doctor_id","kivicare-clinic-management-system")]},"custom-fields":{title:r("Custom Fields Import","kivicare-clinic-management-system"),requiredFields:[r("module","kivicare-clinic-management-system"),r("label","kivicare-clinic-management-system"),r("input_type","kivicare-clinic-management-system")]},appointments:{title:r("Appointments Import","kivicare-clinic-management-system"),requiredFields:[r("date","kivicare-clinic-management-system"),r("start_time","kivicare-clinic-management-system"),r("end_time","kivicare-clinic-management-system"),r("service","kivicare-clinic-management-system"),r("clinic_name","kivicare-clinic-management-system"),r("doctor_name","kivicare-clinic-management-system"),r("patient_name","kivicare-clinic-management-system")]},prescriptions:{title:r("Prescriptions Import","kivicare-clinic-management-system"),requiredFields:[r("name","kivicare-clinic-management-system"),r("frequency","kivicare-clinic-management-system"),r("duration","kivicare-clinic-management-system")]},listing:{title:r("Listings Import","kivicare-clinic-management-system"),requiredFields:[r("Name","kivicare-clinic-management-system"),r("Type","kivicare-clinic-management-system")]}}),[]),P=A[l]||A.doctors,E=P.requiredFields,I=f.useCallback(()=>{if(!_){Se.error(r("Please select a file format first","kivicare-clinic-management-system"));return}y.mutate({context:l,format:_.value})},[_,l,y]),M=f.useCallback((H,G)=>{if(!H)return{valid:!1,message:r("Please select a file to import","kivicare-clinic-management-system")};const ie=(H.name||(H.url?H.url.split("/").pop():H.filename)||"").split(".").pop().toLowerCase(),ge={csv:["csv"],xlsx:["xlsx","xls"]}[G]||[];if(!ge.includes(ie)){const ae=ge.join(", ");return{valid:!1,message:`${r("File format invalid. Expected","kivicare-clinic-management-system")} ${ae.toUpperCase()} ${r("file for","kivicare-clinic-management-system")} ${G.toUpperCase()} ${r("format","kivicare-clinic-management-system")}`}}return{valid:!0}},[]),O=f.useCallback(async H=>{if(!H.fileFormat){Se.error(r("Please select a file format","kivicare-clinic-management-system"));return}if(!H.file){Se.error(r("Please select a file to import","kivicare-clinic-management-system"));return}const G=M(H.file,H.fileFormat.value);if(!G.valid){Se.error(G.message);return}u(0);const z=setInterval(()=>{u(ge=>ge>=90?(clearInterval(z),90):ge+10)},200),ie=new FormData;ie.append("context",l),ie.append("file_format",H.fileFormat.value),ie.append("send_email_notification",H.sendEmailNotification),ie.append("send_sms_notification",H.sendSMSNotification),l==="prescriptions"&&o&&ie.append("encounter_id",o);let W=H.file instanceof File?H.file:H.file?.file||c;if(!(W instanceof File))if(W?.url)try{const ae=await(await fetch(W.url)).blob(),U=W.filename&&W.filename.includes(".")?W.filename:W.url?W.url.split("/").pop():"import.csv";W=new File([ae],U,{type:ae.type||"text/csv"})}catch(ge){throw console.error("Error fetching file from URL:",ge),new Error(r("Failed to load file for upload","kivicare-clinic-management-system"))}else throw new Error(r("Please select a valid file to import","kivicare-clinic-management-system"));if(!W)throw new Error(r("Please select a file to import","kivicare-clinic-management-system"));ie.append("file",W),x.mutate(ie,{onSuccess:ge=>{const ae=ge?.data?.data||ge?.data||{},U={totalRows:ae.total_rows||0,insertedRows:ae.inserted_rows||0,errors:[],errorSummary:{},toastErrorMessage:ae.toast_error_message||""};if(p(U),v(!0),U.insertedRows>0)Se.success("Data imported successfully",{autoClose:5e3}),a&&setTimeout(()=>{a()},1e3);else{const X=U.toastErrorMessage||"No data imported";Se.error(X,{autoClose:5e3})}e()},onError:ge=>{Se.error(ge.message||r("Import failed. Please try again.","kivicare-clinic-management-system")),console.error("Import error:",ge)},onSettled:()=>{u(0),clearInterval(z)}})},[l,M,x,a,e]),F=f.useCallback(()=>{D(),d(null),u(0),p(null),v(!1),e()},[D,e]);return i.jsxs(i.Fragment,{children:[i.jsxs(lt,{show:t,onHide:F,size:"lg",centered:!0,children:[i.jsxs(lt.Header,{className:"pb-3",children:[i.jsx("h5",{className:"mb-0",children:P.title}),i.jsx("button",{type:"button",className:"btn btn-link p-0",onClick:F,"aria-label":"Close",children:i.jsx("i",{className:"ph ph-x-circle h4 mb-0 icon-color fw-normal"})})]}),i.jsx(lt.Body,{children:i.jsx(Mt,{onSubmit:k(O),children:i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-lg-6 col-md-12",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[r("Select Type","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx(ye,{name:"fileFormat",control:b,rules:{required:!0},render:({field:H})=>i.jsx(ct,{...H,placeholder:r("Choose file format...","kivicare-clinic-management-system"),className:"react-select-box",classNamePrefix:"react-select",options:N,isClearable:!0,styles:{menuPortal:G=>({...G,zIndex:9999})},formatOptionLabel:G=>i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsx("i",{className:`ph ${G.icon} h5 mb-0`}),i.jsx("span",{children:G.label})]})})})]})}),i.jsx("div",{className:"col-lg-6 col-md-12",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[r("Upload File","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx("div",{className:"gap-2",children:i.jsx(ye,{name:"file",control:b,rules:{required:!0},render:({field:H})=>i.jsx(cu,{id:"import-file-upload",name:"file",showPreview:!1,accept:_?_.value==="csv"?"text/csv":_.value==="xlsx"?["application/vnd.oasis.opendocument.spreadsheet","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-excel.sheet.macroEnabled.12","application/vnd.ms-excel.sheet.binary.macroEnabled.12"].join(","):["application/vnd.oasis.opendocument.spreadsheet","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-excel.sheet.macroEnabled.12","application/vnd.ms-excel.sheet.binary.macroEnabled.12","text/csv"].join(","):["application/vnd.oasis.opendocument.spreadsheet","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-excel.sheet.macroEnabled.12","application/vnd.ms-excel.sheet.binary.macroEnabled.12","text/csv"].join(","),onChange:(G,z)=>{H.onChange(G?.file||G),d(G?.file||G)},errors:j,disabled:!_||x.isPending,required:!0})})})]})}),i.jsx("div",{className:"col-12",children:i.jsx("div",{className:"text-center",children:i.jsxs("button",{type:"button",className:"btn btn-link text-primary p-0",onClick:I,disabled:!_||x.isPending,children:[i.jsx("i",{className:"ph ph-download me-1"}),r("Click here to download sample file","kivicare-clinic-management-system")]})})}),E.length>0&&i.jsx("div",{className:"col-12",children:i.jsx("div",{className:"required-fields-container mt-0",children:i.jsxs("div",{className:"bg-info-subtle p-3 rounded",children:[i.jsxs("h6",{className:"mb-2",children:[i.jsx("i",{className:"ph ph-info me-1"}),_?r("Following fields are required in","kivicare-clinic-management-system")+" "+_.label.toUpperCase()+" "+r("file","kivicare-clinic-management-system"):r("Following fields are required in file","kivicare-clinic-management-system")]}),i.jsx("ul",{className:"mb-0",children:E.map((H,G)=>i.jsx("li",{children:i.jsx("strong",{children:H})},G))})]})})}),!["appointments","services","custom-fields","prescriptions"].includes(l)&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"col-12",children:[i.jsxs("h6",{className:"mb-3",children:[i.jsx("i",{className:"ph ph-bell me-1"}),r("Send Notification when user register","kivicare-clinic-management-system")]}),i.jsxs("div",{className:"row",children:[i.jsx("div",{className:"col-12",children:i.jsxs("div",{className:"form-check",children:[i.jsx(ye,{name:"sendEmailNotification",control:b,render:({field:H})=>i.jsx("input",{...H,type:"checkbox",className:"form-check-input",id:"emailNotification",disabled:x.isPending})}),i.jsxs("label",{className:"form-check-label",htmlFor:"emailNotification",children:[i.jsx("i",{className:"ph ph-envelope me-1"}),r("Email","kivicare-clinic-management-system")]})]})}),i.jsx("div",{className:"col-12",children:i.jsxs("div",{className:"form-check",children:[i.jsx(ye,{name:"sendSMSNotification",control:b,render:({field:H})=>i.jsx("input",{...H,type:"checkbox",className:"form-check-input",id:"smsNotification",disabled:x.isPending})}),i.jsxs("label",{className:"form-check-label",htmlFor:"smsNotification",children:[i.jsx("i",{className:"ph ph-phone me-1"}),r("SMS/WhatsApp","kivicare-clinic-management-system")]})]})})]})]}),i.jsx("div",{className:"col-12",children:i.jsxs("div",{className:"mb-0 bg-info-subtle p-3 rounded d-flex align-items-center gap-1",children:[i.jsx("i",{className:"ph ph-info"}),i.jsxs("small",{children:[i.jsx("strong",{children:r("Note:","kivicare-clinic-management-system")})," ",r("If notification is enabled, demo import will take time.","kivicare-clinic-management-system")]})]})})]}),x.isPending&&i.jsxs("div",{className:"col-12",children:[i.jsx("div",{className:"progress mb-3",children:i.jsxs("div",{className:"progress-bar",role:"progressbar",style:{width:`${m}%`},"aria-valuenow":m,"aria-valuemin":"0","aria-valuemax":"100",children:[m,"%"]})}),i.jsx("div",{className:"text-center",children:i.jsxs("small",{className:"text-muted",children:[i.jsx("i",{className:"ph ph-spinner ph-spin me-1"}),r("Importing data, please wait...","kivicare-clinic-management-system")]})})]})]})})}),i.jsxs(lt.Footer,{className:"d-flex justify-content-end gap-3",children:[i.jsx(Xt,{variant:"secondary",onClick:F,disabled:x.isPending,children:r("Cancel","kivicare-clinic-management-system")}),i.jsx(Xt,{variant:"primary",onClick:k(O),disabled:x.isPending,children:x.isPending?i.jsxs(i.Fragment,{children:[i.jsx("i",{className:"ph ph-spinner ph-spin me-1"}),r("Importing...","kivicare-clinic-management-system")]}):i.jsxs(i.Fragment,{children:[i.jsx("i",{className:"ph ph-upload me-1"}),r("Import","kivicare-clinic-management-system")]})})]})]}),i.jsxs(lt,{show:g,onHide:()=>v(!1),size:"md",centered:!0,children:[i.jsxs(lt.Header,{className:"pb-3",children:[i.jsx("h5",{className:"mb-0",children:P.title}),i.jsx("button",{type:"button",className:"btn btn-link p-0",onClick:()=>v(!1),"aria-label":"Close",children:i.jsx("i",{className:"ph ph-x-circle h4 mb-0 icon-color fw-normal"})})]}),i.jsx(lt.Body,{children:h&&i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"mb-4",children:i.jsx("i",{className:`ph ${h.insertedRows>0?"ph-check-circle text-success":"ph-warning-circle text-warning"}`,style:{fontSize:"3rem"}})}),i.jsx("h4",{className:"mb-3",children:r("Import Summary","kivicare-clinic-management-system")}),i.jsxs("div",{className:"row g-3",children:[i.jsx("div",{className:"col-6",children:i.jsxs("div",{className:"border rounded p-3",children:[i.jsx("h6",{className:"text-muted mb-1",children:r("Total Rows","kivicare-clinic-management-system")}),i.jsx("span",{className:"h5 mb-0 text-primary",children:h.totalRows||0})]})}),i.jsx("div",{className:"col-6",children:i.jsxs("div",{className:"border rounded p-3",children:[i.jsx("h6",{className:"text-muted mb-1",children:r("Successfully Inserted","kivicare-clinic-management-system")}),i.jsx("span",{className:"h5 mb-0 text-success",children:h.insertedRows||0})]})})]})]})}),i.jsxs(lt.Footer,{className:"d-flex justify-content-center gap-3",children:[i.jsx(Xt,{variant:"outline-primary",onClick:()=>{v(!1),p(null),s&&s()},children:r("Import More File","kivicare-clinic-management-system")}),i.jsx(Xt,{variant:"primary",onClick:()=>v(!1),children:r("Close","kivicare-clinic-management-system")})]})]})]})},du={addReview:t=>ve({endpoint:"rating/add",method:"POST",data:t}),updateReview:t=>ve({endpoint:"rating/update",method:"POST",data:t}),getReviews:(t={})=>ve({endpoint:"rating/list",method:"GET",data:t}),getReviewByPatientDoctor:(t,e)=>ve({endpoint:"rating/list",method:"GET",data:{patient_id:t,doctor_id:e,per_page:1}}).then(n=>{const s=n.data?.reviews||[];return s.length>0?s[0]:null}),deleteReview:t=>ve({endpoint:"rating/delete",method:"POST",data:t})},fr={all:["ratings"],lists:()=>[...fr.all,"list"],list:t=>[...fr.lists(),{filters:t}],details:()=>[...fr.all,"detail"],detail:t=>[...fr.details(),t]},XR=(t={},e={})=>{const[n,s]=f.useState(!1),a=ft({queryKey:fr.list(t),queryFn:()=>du.getReviews(t),...e}),{data:l,isLoading:o,isFetching:c}=a,d=l?.data?.pagination||{},m=f.useCallback(async()=>{if(!o&&d.page<d.total_pages&&!n)try{s(!0),await a.refetch({...t,page:(d.page||0)+1})}finally{s(!1)}},[o,d.page,d.total_pages,n,t]);return{...a,hasNextPage:d.page<d.total_pages,fetchNextPage:m,isFetchingNextPage:n}},cJ=(t,e,n={})=>ft({queryKey:[...fr.details(),"patient-doctor",t,e],queryFn:()=>du.getReviewByPatientDoctor(t,e),enabled:!!t&&!!e,...n}),dJ=()=>{const t=ze();return Le({mutationFn:e=>du.addReview(e),onSuccess:()=>{t.invalidateQueries({queryKey:fr.lists()})}})},mJ=()=>{const t=ze();return Le({mutationFn:e=>du.updateReview(e),onSuccess:()=>{t.invalidateQueries({queryKey:fr.lists()})}})},uJ=()=>{const t=ze();return Le({mutationFn:e=>du.deleteReview(e),onSuccess:()=>{t.invalidateQueries({queryKey:fr.lists()})}})},hJ=({show:t,onHide:e})=>i.jsxs(lt,{show:t,onHide:e,centered:!0,children:[i.jsx(lt.Header,{closeButton:!0,children:i.jsx(lt.Title,{children:i.jsx(S,{width:"150px",height:"1.5rem"})})}),i.jsxs(lt.Body,{children:[i.jsxs("div",{className:"mb-3",children:[i.jsx(S,{width:"100px",height:"1rem",className:"mb-2"}),i.jsx("div",{className:"d-flex gap-1",children:[1,2,3,4,5].map(n=>i.jsx(S,{width:"24px",height:"24px",style:{borderRadius:"50%"}},n))})]}),i.jsxs("div",{className:"mb-3",children:[i.jsx(S,{width:"200px",height:"1rem",className:"mb-2"}),i.jsx(S,{width:"100%",height:"80px",style:{borderRadius:"4px"}})]})]}),i.jsxs(lt.Footer,{children:[i.jsx(st,{width:"80px",className:"me-2"}),i.jsx(st,{width:"120px"})]})]}),pJ=({show:t,onHide:e,appointment:n})=>{const{hasCapability:s}=mt(),[a,l]=f.useState(0),[o,c]=f.useState(""),[d,m]=f.useState(!1),u=dJ(),h=mJ(),p=uJ(),{data:g,isLoading:v}=cJ(n?.patientId,n?.doctorId,{enabled:t&&!!n?.patientId&&!!n?.doctorId&&s("patient_review_get")});f.useEffect(()=>{g?(l(g.rating||0),c(g.review_text||""),m(!0)):(l(0),c(""),m(!1))},[g,t]);const x=()=>{if(a===0){At.fire({icon:"warning",title:r("Rating Required","kivicare-clinic-management-system"),text:r("Please select a rating before submitting.","kivicare-clinic-management-system")});return}const k={appointment_id:n?.id,rating:a,review_text:o.trim()};if(d&&g){if(!s("patient_review_edit")){At.fire({icon:"error",title:r("Permission Denied","kivicare-clinic-management-system"),text:r("You do not have permission to edit reviews.","kivicare-clinic-management-system")});return}h.mutate({review_id:g.id,rating:a,review_text:o.trim()},{onSuccess:w=>{At.fire({icon:"success",title:r("Review Updated","kivicare-clinic-management-system"),text:r("Your review has been updated successfully!","kivicare-clinic-management-system")}),b()},onError:w=>{console.error("Review update error:",w),At.fire({icon:"error",title:r("Error","kivicare-clinic-management-system"),text:w?.response?.data?.message||r("Failed to update review. Please try again.","kivicare-clinic-management-system")})}})}else{if(!s("patient_review_add")){At.fire({icon:"error",title:r("Permission Denied","kivicare-clinic-management-system"),text:r("You do not have permission to add reviews.","kivicare-clinic-management-system")});return}u.mutate(k,{onSuccess:w=>{At.fire({icon:"success",title:r("Review Submitted","kivicare-clinic-management-system"),text:r("Thank you for your review!","kivicare-clinic-management-system")}),b()},onError:w=>{console.error("Review submission error:",w),At.fire({icon:"error",title:r("Error","kivicare-clinic-management-system"),text:w?.response?.data?.message||r("Failed to submit review. Please try again.","kivicare-clinic-management-system")})}})}},y=async()=>{if(!s("patient_review_delete")){At.fire({icon:"error",title:r("Permission Denied","kivicare-clinic-management-system"),text:r("You do not have permission to delete reviews.","kivicare-clinic-management-system")});return}(await At.fire({icon:"warning",title:r("Delete Review?","kivicare-clinic-management-system"),text:r("Are you sure you want to delete this review? This action cannot be undone.","kivicare-clinic-management-system"),showCancelButton:!0,confirmButtonText:r("Yes, Delete","kivicare-clinic-management-system"),cancelButtonText:r("Cancel","kivicare-clinic-management-system"),confirmButtonColor:"#dc3545",cancelButtonColor:"#6c757d"})).isConfirmed&&p.mutate({review_id:g.id},{onSuccess:w=>{At.fire({icon:"success",title:r("Review Deleted","kivicare-clinic-management-system"),text:r("Your review has been deleted successfully.","kivicare-clinic-management-system")}),b()},onError:w=>{console.error("Review deletion error:",w),At.fire({icon:"error",title:r("Error","kivicare-clinic-management-system"),text:w?.response?.data?.message||r("Failed to delete review. Please try again.","kivicare-clinic-management-system")})}})},b=()=>{e(),l(0),c(""),m(!1)};return v?i.jsx(hJ,{show:t,onHide:b}):i.jsxs(lt,{show:t,onHide:b,centered:!0,children:[i.jsxs(lt.Header,{className:"pb-3",children:[i.jsx("h5",{className:"mb-0",children:d?r("Update Review","kivicare-clinic-management-system"):r("Leave Review","kivicare-clinic-management-system")}),i.jsx("button",{type:"button",className:"btn btn-link p-0",onClick:()=>b(),"aria-label":"Close",children:i.jsx("i",{className:"ph ph-x-circle h4 mb-0 icon-color fw-normal"})})]}),i.jsx(lt.Body,{children:i.jsxs(Mt,{children:[i.jsxs(Mt.Group,{className:"mb-3",children:[i.jsx(Mt.Label,{children:r("Rating","kivicare-clinic-management-system")}),i.jsx("div",{children:[1,2,3,4,5].map(k=>i.jsx("i",{className:`${a>=k?"ph-fill":"ph"} ph-star fs-4 me-1 text-warning cursor-pointer`,onClick:()=>l(k)},k))})]}),i.jsxs(Mt.Group,{children:[i.jsx(Mt.Label,{children:r("Please Share Your Experience","kivicare-clinic-management-system")}),i.jsx(Mt.Control,{as:"textarea",rows:3,value:o,onChange:k=>c(k.target.value),placeholder:r("Share your experience...","kivicare-clinic-management-system")})]})]})}),i.jsx(lt.Footer,{children:i.jsxs("div",{className:"d-flex justify-content-between w-100",children:[i.jsx("div",{children:d&&g&&s("patient_review_delete")&&i.jsx(Qe,{placement:"top",overlay:k=>i.jsx(ut,{...k,children:r("Delete Review","kivicare-clinic-management-system")}),children:i.jsx(Xt,{variant:"outline-danger",onClick:y,disabled:u.isPending||h.isPending||p.isPending,children:i.jsx("i",{className:`ph ${p.isPending?"ph-spinner ph-spin":"ph-trash"}`})})})}),i.jsxs("div",{children:[i.jsx(Xt,{variant:"secondary",onClick:b,className:"me-2",disabled:u.isPending||h.isPending||p.isPending,children:r("Close","kivicare-clinic-management-system")}),i.jsx(Xt,{variant:"primary",onClick:x,disabled:u.isPending||h.isPending||p.isPending,children:u.isPending||h.isPending?r("Submitting...","kivicare-clinic-management-system"):d?r("Update Review","kivicare-clinic-management-system"):r("Submit Review","kivicare-clinic-management-system")})]})]})})]})};var Uh={exports:{}},gJ=Uh.exports,fC;function fJ(){return fC||(fC=1,(function(t,e){(function(n,s){t.exports=s()})(gJ,(function(){var n="minute",s=/[+-]\d\d(?::?\d\d)?/g,a=/([+-]|\d\d)/g;return function(l,o,c){var d=o.prototype;c.utc=function(x){var y={date:x,utc:!0,args:arguments};return new o(y)},d.utc=function(x){var y=c(this.toDate(),{locale:this.$L,utc:!0});return x?y.add(this.utcOffset(),n):y},d.local=function(){return c(this.toDate(),{locale:this.$L,utc:!1})};var m=d.parse;d.parse=function(x){x.utc&&(this.$u=!0),this.$utils().u(x.$offset)||(this.$offset=x.$offset),m.call(this,x)};var u=d.init;d.init=function(){if(this.$u){var x=this.$d;this.$y=x.getUTCFullYear(),this.$M=x.getUTCMonth(),this.$D=x.getUTCDate(),this.$W=x.getUTCDay(),this.$H=x.getUTCHours(),this.$m=x.getUTCMinutes(),this.$s=x.getUTCSeconds(),this.$ms=x.getUTCMilliseconds()}else u.call(this)};var h=d.utcOffset;d.utcOffset=function(x,y){var b=this.$utils().u;if(b(x))return this.$u?0:b(this.$offset)?h.call(this):this.$offset;if(typeof x=="string"&&(x=(function(j){j===void 0&&(j="");var D=j.match(s);if(!D)return null;var _=(""+D[0]).match(a)||["-",0,0],N=_[0],A=60*+_[1]+ +_[2];return A===0?0:N==="+"?A:-A})(x),x===null))return this;var k=Math.abs(x)<=16?60*x:x;if(k===0)return this.utc(y);var w=this.clone();if(y)return w.$offset=k,w.$u=!1,w;var T=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();return(w=this.local().add(k+T,n)).$offset=k,w.$x.$localOffset=T,w};var p=d.format;d.format=function(x){var y=x||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return p.call(this,y)},d.valueOf=function(){var x=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*x},d.isUTC=function(){return!!this.$u},d.toISOString=function(){return this.toDate().toISOString()},d.toString=function(){return this.toDate().toUTCString()};var g=d.toDate;d.toDate=function(x){return x==="s"&&this.$offset?c(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():g.call(this)};var v=d.diff;d.diff=function(x,y,b){if(x&&this.$u===x.$u)return v.call(this,x,y,b);var k=this.local(),w=c(x).local();return v.call(k,w,y,b)}}}))})(Uh)),Uh.exports}var vJ=fJ();const xJ=ya(vJ);var Wh={exports:{}},yJ=Wh.exports,vC;function bJ(){return vC||(vC=1,(function(t,e){(function(n,s){t.exports=s()})(yJ,(function(){var n={year:0,month:1,day:2,hour:3,minute:4,second:5},s={};return function(a,l,o){var c,d=function(p,g,v){v===void 0&&(v={});var x=new Date(p),y=(function(b,k){k===void 0&&(k={});var w=k.timeZoneName||"short",T=b+"|"+w,j=s[T];return j||(j=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:b,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:w}),s[T]=j),j})(g,v);return y.formatToParts(x)},m=function(p,g){for(var v=d(p,g),x=[],y=0;y<v.length;y+=1){var b=v[y],k=b.type,w=b.value,T=n[k];T>=0&&(x[T]=parseInt(w,10))}var j=x[3],D=j===24?0:j,_=x[0]+"-"+x[1]+"-"+x[2]+" "+D+":"+x[4]+":"+x[5]+":000",N=+p;return(o.utc(_).valueOf()-(N-=N%1e3))/6e4},u=l.prototype;u.tz=function(p,g){p===void 0&&(p=c);var v,x=this.utcOffset(),y=this.toDate(),b=y.toLocaleString("en-US",{timeZone:p}),k=Math.round((y-new Date(b))/1e3/60),w=15*-Math.round(y.getTimezoneOffset()/15)-k;if(!Number(w))v=this.utcOffset(0,g);else if(v=o(b,{locale:this.$L}).$set("millisecond",this.$ms).utcOffset(w,!0),g){var T=v.utcOffset();v=v.add(x-T,"minute")}return v.$x.$timezone=p,v},u.offsetName=function(p){var g=this.$x.$timezone||o.tz.guess(),v=d(this.valueOf(),g,{timeZoneName:p}).find((function(x){return x.type.toLowerCase()==="timezonename"}));return v&&v.value};var h=u.startOf;u.startOf=function(p,g){if(!this.$x||!this.$x.$timezone)return h.call(this,p,g);var v=o(this.format("YYYY-MM-DD HH:mm:ss:SSS"),{locale:this.$L});return h.call(v,p,g).tz(this.$x.$timezone,!0)},o.tz=function(p,g,v){var x=v&&g,y=v||g||c,b=m(+o(),y);if(typeof p!="string")return o(p).tz(y);var k=(function(D,_,N){var A=D-60*_*1e3,P=m(A,N);if(_===P)return[A,_];var E=m(A-=60*(P-_)*1e3,N);return P===E?[A,P]:[D-60*Math.min(P,E)*1e3,Math.max(P,E)]})(o.utc(p,x).valueOf(),b,y),w=k[0],T=k[1],j=o(w).utcOffset(T);return j.$x.$timezone=y,j},o.tz.guess=function(){return Intl.DateTimeFormat().resolvedOptions().timeZone},o.tz.setDefault=function(p){c=p}}}))})(Wh)),Wh.exports}var kJ=bJ();const wJ=ya(kJ);Rn.extend(xJ);Rn.extend(wJ);const jJ=t=>{if(!t)return"U";const e=t.trim().split(" ");return e.length===1?e[0].charAt(0).toUpperCase():(e[0].charAt(0)+(e[1].charAt(0)||"")).toUpperCase()},Ay=({hideBreadcrumbs:t=!1,patientId:e=!1})=>{const{patientIdParam:n}=Yt(),{isAddonActive:s,patientCalanderIntegration:a,hasCapability:l,wp_timezone:o,current_server_time:c,cancellationBufferEnabled:d,cancellationBufferHours:m,global_date_format:u,currentDoctorId:h,currentuserID:p,defaultClinicId:g}=mt(),v=Yi(),x=Li(),y=Xn(),b=Jn(),k=s("kiviPro"),[w,T]=f.useState(!1),[j,D]=f.useState(!1),[_,N]=f.useState(!1),[A,P]=f.useState(null),[E,I]=f.useState(!1),M=f.useRef(null),[O,F]=f.useState([]),[H,G]=f.useState([]),[z,ie]=f.useState([]),[W,ge]=f.useState(null),[ae,U]=f.useState({page:1,perPage:10,search:"",date:"",clinic:"",patient:e||"",doctor:x&&(h||p)||"",status:"",orderby:"",order:"",timeFrame:"upcoming"}),X={patientId:"patient",doctorId:"doctor",clinicId:"clinic",appointment_start_date:"dateTime"},J=ae.orderby?[{id:X[ae.orderby]||ae.orderby,desc:ae.order==="desc"}]:[],he=be=>{if(be.length>0){const{id:ue,desc:Te}=be[0],Ie={patient:"patientId",doctor:"doctorId",clinic:"clinicId",dateTime:"appointment_start_date"};U(qe=>({...qe,orderby:Ie[ue]||ue,order:Te?"desc":"asc",page:1}))}else U(ue=>({...ue,orderby:"",order:"",page:1}))},le=ze(),ee=async({page:be,per_page:ue,search:Te})=>{try{const Ie={dataType:"clinicList",page:be,per_page:ue,search:Te},qe=await le.fetchQuery({queryKey:pt.list(Ie),queryFn:()=>Dt.getStaticData(Ie),staleTime:300*1e3}),$e=qe.data.map(Xe=>({value:Xe.id,label:Xe.label||Xe.name}));return F(Xe=>[...Xe,...$e]),qe}catch(Ie){return console.error("Error loading clinics:",Ie),{data:[],pagination:{has_more:!1}}}},me=async({page:be,per_page:ue,search:Te,clinic_ids:Ie})=>{try{let qe=Ie;(y||b)&&g&&(qe=g);const $e={dataType:"staticData",staticDataType:"users",role:ol(),clinic_ids:qe,page:be,per_page:ue,search:Te},Xe=await le.fetchQuery({queryKey:pt.list($e),queryFn:()=>Dt.getStaticData($e),staleTime:300*1e3}),bt=Xe.data.map(Gt=>({value:Gt.id,label:Gt.label||Gt.name}));return G(Gt=>[...Gt,...bt]),Xe}catch(qe){return console.error("Error loading patients:",qe),{data:[],pagination:{total:0,per_page:10,current_page:1,total_pages:0,has_more:!1}}}},K=async({page:be,per_page:ue,search:Te,clinic_ids:Ie})=>{try{let qe=Ie;(y||b)&&g&&(qe=g);const $e={dataType:"staticData",staticDataType:"doctors",clinic_ids:qe,page:be,per_page:ue,search:Te},Xe=await le.fetchQuery({queryKey:pt.list($e),queryFn:()=>Dt.getStaticData($e),staleTime:0}),bt=Xe.data.map(Gt=>({value:Gt.id,label:Gt.label||Gt.name}));return ie(Gt=>[...Gt,...bt]),Xe}catch(qe){return console.error("Error loading doctors:",qe),{data:[],pagination:{has_more:!1}}}},re=BR(),oe=be=>{re.mutate(be,{onSuccess:ue=>{const Te=new Blob([ue],{type:"application/pdf"}),Ie=URL.createObjectURL(Te);window.open(Ie,"_blank")},onError:ue=>{rt({title:r("Error","kivicare-clinic-management-system"),text:ue?.response?.data?.message||ue?.message||r("Failed to generate invoice PDF.","kivicare-clinic-management-system"),confirmButtonText:r("OK","kivicare-clinic-management-system")})}})};f.useEffect(()=>{n&&U(be=>({...be,patient:n,page:1}))},[n]),f.useEffect(()=>{if(x&&(h||p)){const be=h||p;U(ue=>({...ue,doctor:be,page:1}))}},[x,h,p]);const{data:C}=kn("settings","google-event-template",{},{enabled:k&&Yi()}),R=[{value:"all",label:r("All","kivicare-clinic-management-system")},{value:"upcoming",label:r("Upcoming","kivicare-clinic-management-system")},{value:"past",label:r("Past","kivicare-clinic-management-system")}],te=f.useMemo(()=>Object.fromEntries(Object.entries(ae).filter(([be,ue])=>ue!==""&&ue!==null&&ue!==void 0).map(([be,ue])=>ue&&typeof ue=="object"&&"value"in ue?[be,ue.value]:[be,ue])),[ae]),{data:ne,isLoading:Y,error:q,refetch:B}=aX(te),se=ne?.data?.appointments||[],Q=ne?.data?.pagination||{total:0,lastPage:1,perPage:10,currentPage:1},pe=uX(),$=dX(),ce=mX(),De=fX(),xe=f.useMemo(()=>{if(!v||!d||!o||!c)return{enabled:!1};const be=parseFloat(m);if(isNaN(be)||be<=0)return{enabled:!1};try{return{enabled:!0,bufferHours:be,serverTime:Rn.tz(c,"YYYY-MM-DD HH:mm:ss",o)}}catch(ue){return console.error("Error parsing server time for cancellation buffer:",ue),{enabled:!1}}},[v,d,m,o,c]),Re=gX(),nt=async be=>{try{yt({title:r("Exporting...","kivicare-clinic-management-system"),text:r("Please wait. This may take a few seconds.","kivicare-clinic-management-system")});const ue={...te,format:be,page:ae.page,perPage:ae.perPage};ue.status&&typeof ue.status=="object"&&(ue.status=ue.status.value);const Te=await Re.mutateAsync(ue);if(Te?.data?.appointments&&Te.data.appointments.length>0){const Ie=new Date().toISOString().split("T")[0],qe=Te.data.appointments.map($e=>{const{id:Xe,date:bt,time:Gt,description:$n,status:ti,created_at:vs,reports:ln,doctor_name:xs,patient_name:ri,clinic_full_address:Zt,clinic_name:sa,appointment_formated_start_date:wa,payment_mode:ja,cancellation_buffer:Hr,patient_contact_no:Ji,patient_image_url:gi,custom_forms:ys,charges:md,services:ud,service_array:hd,...pd}=$e;return{id:Xe,date:bt,time:Gt,description:$n,status:ti,created_at:vs,reports:ln,doctor_name:xs,patient_name:ri,clinic_full_address:Zt,clinic_name:sa,appointment_formated_start_date:wa,payment_mode:ja,cancellation_buffer:Hr,patient_contact_no:Ji,patient_image_url:gi,custom_forms:ys,charges:md,services:ud,service_array:hd,...pd}});switch(be){case"csv":hs(qe,`appointments-${Ie}.csv`);break;case"xls":ps(qe,`appointments-${Ie}.xls`);break;case"pdf":gs(qe,`appointments-${Ie}.pdf`,"Appointments List");break;default:throw new Error("Invalid export format")}Wi(),Se.success(r("Export completed successfully.","kivicare-clinic-management-system"))}else Wi(),rt({title:r("No Data to Export","kivicare-clinic-management-system"),text:r("No appointments found to export.","kivicare-clinic-management-system"),confirmButtonText:r("OK","kivicare-clinic-management-system")})}catch(ue){console.error("Export error:",ue),Wi(),rt({title:r("Error!","kivicare-clinic-management-system"),text:ue.message||r("Failed to export data. Please try again.","kivicare-clinic-management-system"),confirmButtonText:r("OK","kivicare-clinic-management-system")})}},Pe=()=>nt("csv"),Ue=()=>nt("xls"),[Je,et]=f.useState(!1),Be=()=>{Je||(et(!0),nt("pdf"),setTimeout(()=>et(!1),2e3))},ke=(be,ue)=>{const Te={service_name:ue.services||"Appointment",clinic_name:ue.clinicName||"",appointment_date:ue.appointmentStartDate||"",appointment_time:ue.appointmentStartTime||"",patient_name:ue.patientName||"",doctor_name:ue.doctorName||""};let Ie=be;for(const[qe,$e]of Object.entries(Te))Ie=Ie.replace(new RegExp(`{{${qe}}}`,"g"),$e);return Ie},_e=be=>{if(!be)return null;const ue=new Date(be);return isNaN(ue.getTime())?null:ue},Ye=be=>{const ue=be.getFullYear(),Te=String(be.getMonth()+1).padStart(2,"0"),Ie=String(be.getDate()).padStart(2,"0"),qe=String(be.getHours()).padStart(2,"0"),$e=String(be.getMinutes()).padStart(2,"0"),Xe=String(be.getSeconds()).padStart(2,"0");return`${ue}${Te}${Ie}T${qe}${$e}${Xe}`},tt=be=>{const ue=C?.data?.data?.post_title||"";return encodeURIComponent(ke(ue,be))},zt=be=>{const ue=C?.data?.data?.post_content||"",Te=be.description?`

${be.description}`:"";return encodeURIComponent(ke(ue,be)+Te)},Ft=be=>encodeURIComponent(be.clinicAddress||be.clinicName||""),Qt=be=>{const ue=_e(be.start||`${be.appointmentStartDateWF}T${be.appointmentStartTimeWF}`),Te=_e(be.end||`${be.appointmentEndDateWF}T${be.appointmentEndTimeWF}`);if(!ue||!Te)return"#";const Ie=ue.toISOString().replace(/-/g,"").replace(/:/g,"").slice(0,-5)+"Z",qe=Te.toISOString().replace(/-/g,"").replace(/:/g,"").slice(0,-5)+"Z",$e=tt(be),Xe=zt(be),bt=Ft(be);return`https://calendar.google.com/calendar/render?action=TEMPLATE&text=${$e}&dates=${Ie}/${qe}&details=${Xe}&location=${bt}`},xt=be=>{const ue=_e(be.start||`${be.appointmentStartDateWF}T${be.appointmentStartTimeWF}`),Te=_e(be.end||`${be.appointmentEndDateWF}T${be.appointmentEndTimeWF}`);if(!ue||!Te)return"#";const Ie=ue.toISOString(),qe=Te.toISOString(),$e=tt(be),Xe=zt(be),bt=Ft(be);return`https://outlook.live.com/calendar/0/deeplink/compose?subject=${$e}&startdt=${Ie}&enddt=${qe}&body=${Xe}&location=${bt}&path=%2Fcalendar%2Faction%2Fcompose&rru=addevent`},Ee=be=>{const ue=_e(be.start||`${be.appointmentStartDateWF}T${be.appointmentStartTimeWF}`),Te=_e(be.end||`${be.appointmentEndDateWF}T${be.appointmentEndTimeWF}`);if(!ue||!Te)return"#";const Ie=ue.toISOString(),qe=Te.toISOString(),$e=tt(be),Xe=zt(be),bt=Ft(be);return`https://outlook.office.com/calendar/deeplink/compose?subject=${$e}&startdt=${Ie}&enddt=${qe}&body=${Xe}&location=${bt}&path=/calendar/action/compose&rru=addevent`},Oe=be=>{const ue=_e(be.start||`${be.appointmentStartDateWF}T${be.appointmentStartTimeWF}`),Te=_e(be.end||`${be.appointmentEndDateWF}T${be.appointmentEndTimeWF}`);if(!ue||!Te)return"#";const Ie=Ye(ue),qe=Ye(Te),$e=tt(be),Xe=zt(be),bt=Ft(be);return`https://calendar.yahoo.com/?v=60&TITLE=${$e}&ST=${Ie}&ET=${qe}&DESC=${Xe}&in_loc=${bt}`},V=be=>{const ue=_e(be.start||`${be.appointmentStartDateWF}T${be.appointmentStartTimeWF}`),Te=_e(be.end||`${be.appointmentEndDateWF}T${be.appointmentEndTimeWF}`);if(!ue||!Te)return"";const Ie=ue.toISOString().replace(/-/g,"").replace(/:/g,"").slice(0,-5)+"Z",qe=Te.toISOString().replace(/-/g,"").replace(/:/g,"").slice(0,-5)+"Z",$e=new Date().toISOString().replace(/-/g,"").replace(/:/g,"").slice(0,-5)+"Z",Xe=`appointment-${be.id}@kivicare.com`,bt=ke(C?.data?.data?.post_title||"",be),Gt=ke(C?.data?.data?.post_content||"",be),$n=be.clinicName||"";return`BEGIN:VCALENDAR
      VERSION:2.0
      BEGIN:VEVENT
      UID:${Xe}
      DTSTAMP:${$e}
      DTSTART:${Ie}
      DTEND:${qe}
      SUMMARY:${bt}
      DESCRIPTION:${Gt}
      LOCATION:${$n}
      END:VEVENT
      END:VCALENDAR`},Z=Ln(),fe=f.useMemo(()=>[Z.accessor("patientId",{id:"patientId",header:()=>r("Appointment Details","kivicare-clinic-management-system"),enableSorting:!0,sortingFn:"text",cell:be=>{const ue=be.row.original;return i.jsxs("div",{className:"d-flex gap-3 align-items-center",children:[i.jsx("div",{className:"flex-shrink-0",children:ue.patient_image_url?i.jsx("img",{src:ue.patient_image_url,alt:ue.patientName,className:"avatar  flex-shrink-0 bg-primary-subtle  rounded-circle  avatar-60"}):i.jsx("div",{className:"avatar  flex-shrink-0 bg-primary-subtle text-primary rounded-circle  avatar-60 d-flex align-items-center justify-content-center fw-bold",children:jJ(ue.patientName)})}),i.jsxs("div",{className:"flex-grow-1 min-w-0",children:[i.jsx("div",{className:"fw-semibold text-dark mb-1",children:i.jsx(ht,{to:`/patient/profile/${ue.patientId}`,className:"text-decoration-none heading-color",children:ue.patientName})}),!x&&i.jsxs("div",{children:[i.jsx("i",{className:"ph ph-stethoscope me-2"}),i.jsxs("span",{className:"fw-medium",children:[r("Doctor","kivicare-clinic-management-system"),": "]}),v?i.jsx("span",{children:ue.doctorName}):i.jsx(ht,{to:`/doctor/edit/${ue.doctorId}`,className:"text-primary text-decoration-none",children:ue.doctorName})]}),k&&!y&&!b&&i.jsxs("div",{children:[i.jsx("i",{className:"ph ph-hospital me-2"}),i.jsxs("span",{className:"fw-medium",children:[r("Clinic","kivicare-clinic-management-system"),": "]}),!v&&!x?i.jsx(ht,{to:`/clinic/edit/${ue.clinicId}`,className:"text-primary text-decoration-none",children:ue.clinicName}):i.jsx("span",{children:ue.clinicName})]})]})]})}}),Z.accessor(be=>({startDate:be.appointmentStartDate,startTime:be.appointmentStartTime,endTime:be.appointmentEndTime}),{id:"dateTime",header:()=>r("Date and Time","kivicare-clinic-management-system"),enableSorting:!0,sortingFn:"datetime",cell:be=>{const{startDate:ue,startTime:Te,endTime:Ie}=be.getValue();return i.jsxs(i.Fragment,{children:[i.jsxs("div",{children:[i.jsx("i",{className:"ph ph-calendar-blank me-2"}),ue]}),i.jsx("div",{children:i.jsxs("b",{children:[i.jsx("i",{className:"ph ph-clock me-2"}),Te," - ",Ie]})})]})}}),Z.accessor("services",{id:"services",header:()=>r("Service","kivicare-clinic-management-system"),enableSorting:!1,cell:be=>be.row.original.services||"-"}),Z.accessor("charges",{id:"charges",header:()=>r("Charges","kivicare-clinic-management-system"),enableSorting:!1,cell:be=>be.getValue()||"-"}),Z.accessor("payment",{id:"paymentMode",enableSorting:!1,header:()=>r("Payment Mode","kivicare-clinic-management-system"),cell:be=>be.row.original.payment?.mode||r("N/A","kivicare-clinic-management-system")}),Z.accessor("status",{header:()=>r("Status","kivicare-clinic-management-system"),enableSorting:!1,cell:be=>{const ue={CANCELLED:0,BOOKED:1,PENDING:2,CHECK_OUT:3,CHECK_IN:4},Ie={[ue.CANCELLED]:{text:r("Cancelled","kivicare-clinic-management-system"),class:"bg-danger-subtle"},[ue.BOOKED]:{text:r("Booked","kivicare-clinic-management-system"),class:"bg-success-subtle"},[ue.PENDING]:{text:r("Pending","kivicare-clinic-management-system"),class:"bg-warning-subtle"},[ue.CHECK_OUT]:{text:r("Check Out","kivicare-clinic-management-system"),class:"bg-info-subtle"},[ue.CHECK_IN]:{text:r("Check In","kivicare-clinic-management-system"),class:"bg-primary-subtle"}}[be.getValue()]||{text:r("Unknown","kivicare-clinic-management-system"),class:"bg-secondary-subtle"};return i.jsx("span",{className:`badge ${Ie.class} px-3 py-2`,children:Ie.text})}}),...v?[...a==="yes"?[Z.accessor("Add To Calendar",{id:"calandarevent",header:()=>r("Add To Calendar","kivicare-clinic-management-system"),cell:be=>i.jsxs("div",{className:"d-flex align-items-center gap-1",children:[i.jsx(Qe,{placement:"top",overlay:ue=>i.jsx(ut,{...ue,children:r("Add to Google Calendar","kivicare-clinic-management-system")}),children:i.jsx("a",{href:Qt(be.row.original),target:"_blank",rel:"noopener noreferrer",className:"btn btn-sm btn-outline-primary px-2 py-1 font-size-12",children:"Google"})}),i.jsx(Qe,{placement:"top",overlay:ue=>i.jsx(ut,{...ue,children:r("Add to Outlook","kivicare-clinic-management-system")}),children:i.jsx("a",{href:xt(be.row.original),target:"_blank",rel:"noopener noreferrer",className:"btn btn-sm btn-outline-primary px-2 py-1 font-size-12",children:"Outlook"})}),i.jsx(Qe,{placement:"top",overlay:ue=>i.jsx(ut,{...ue,children:r("Add to Microsoft 365","kivicare-clinic-management-system")}),children:i.jsx("a",{href:Ee(be.row.original),target:"_blank",rel:"noopener noreferrer",className:"btn btn-sm btn-outline-primary px-2 py-1 font-size-12",children:"Microsoft"})}),i.jsx(Qe,{placement:"top",overlay:ue=>i.jsx(ut,{...ue,children:r("Add to Apple Calendar","kivicare-clinic-management-system")}),children:i.jsx("a",{href:`data:text/calendar;charset=utf8,${encodeURIComponent(V(be.row.original))}`,download:"appointment.ics",className:"btn btn-sm btn-outline-primary px-2 py-1 font-size-12",children:"Apple"})}),i.jsx(Qe,{placement:"top",overlay:ue=>i.jsx(ut,{...ue,children:r("Add to Yahoo Calendar","kivicare-clinic-management-system")}),children:i.jsx("a",{href:Oe(be.row.original),target:"_blank",rel:"noopener noreferrer",className:"btn btn-sm btn-outline-primary px-2 py-1 font-size-12",children:"Yahoo"})}),i.jsx(Qe,{placement:"top",overlay:ue=>i.jsx(ut,{...ue,children:r("Download iCal","kivicare-clinic-management-system")}),children:i.jsx("a",{href:`data:text/calendar;charset=utf8,${encodeURIComponent(V(be.row.original))}`,download:"appointment.ics",className:"btn btn-sm btn-outline-success px-2 py-1",children:i.jsx("i",{className:"ph ph-download"})})})]})})]:[]]:[],...l("appointment_edit")||l("appointment_view")||l("appointment_delete")||l("appointment_cancel")?[Z.accessor("actions",{header:()=>r("Action","kivicare-clinic-management-system"),enableSorting:!1,cell:be=>{const ue={CANCELLED:0,BOOKED:1,CHECK_OUT:3,CHECK_IN:4},Te=parseInt(be.cell.row.original.status),Ie={isBooked:Te===ue.BOOKED,isCheckedIn:Te===ue.CHECK_IN,isCheckedOut:Te===ue.CHECK_OUT,isCancelled:Te===ue.CANCELLED,isToday:be.cell.row.original.isToday},{isBooked:qe,isCheckedIn:$e,isCheckedOut:Xe,isCancelled:bt,isToday:Gt}=Ie;let $n=!0;const ti=be.row.original;if(xe.enabled)try{const Zt=`${ti.appointmentStartDate} ${ti.appointmentStartTime}`,wa=Rn.tz(Zt,"YYYY-MM-DD HH:mm:ss",o).subtract(xe.bufferHours,"hour");xe.serverTime.isAfter(wa)&&($n=!1)}catch(Zt){console.error("Error calculating cancellation buffer for appointment:",ti.id,Zt),$n=!0}const vs=ti.isPast,ln=Zt=>sa=>i.jsx(ut,{id:`tooltip-${be.cell.row.original.id}-${Zt}`,...sa,children:Zt}),xs=Zt=>e?`/patient/profile/${e}/appointments/edit/${Zt}`:`/appointments/edit/${Zt}`,ri=Zt=>e?`/patient/profile/${e}/appointments/view/${Zt}`:`/appointments/view/${Zt}`;return i.jsxs("div",{className:"d-flex align-items-center gap-3",children:[l("appointment_edit")&&!$e&&!Xe&&!bt&&$n&&!vs&&i.jsx(Qe,{placement:"top",overlay:ln(r("Edit Appointment","kivicare-clinic-management-system")),children:i.jsx(ht,{to:xs(be.cell.row.original.id),className:"text-success",children:i.jsx("i",{className:"ph ph-pencil-simple-line fs-5 p-0"})})}),l("appointment_view")&&i.jsxs(i.Fragment,{children:[i.jsx(Qe,{placement:"top",overlay:ln(r("View Appointment","kivicare-clinic-management-system")),children:i.jsx(ht,{to:ri(be.cell.row.original.id),className:"text-gray",children:i.jsx("i",{className:"ph ph-eye fs-5 p-0"})})}),i.jsx(Qe,{placement:"top",overlay:ln(r("Print Details","kivicare-clinic-management-system")),children:i.jsx("span",{onClick:()=>oe(be.cell.row.original.id),role:"button",className:"text-secondary fs-5 p-0",children:i.jsx("i",{className:"ph ph-printer fs-5 p-0"})})})]}),$e&&i.jsx(Qe,{placement:"top",overlay:ln(r("Encounter Dashboard","kivicare-clinic-management-system")),children:i.jsx(ht,{to:`/encounter/dashboard/${be.cell.row.original.encounterId}`,className:"d-inline-block",children:i.jsx("span",{className:"text-gray ",children:i.jsx("i",{className:"ph ph-gauge fs-5"})})})}),$e&&(()=>{const Zt=be?.cell?.row?.original?.zoom_data?.startUrl;return Zt?i.jsx(Qe,{placement:"top",overlay:ln(r("Start Video Conference","kivicare-clinic-management-system")),children:i.jsx("a",{target:"_blank",href:Zt,className:"btn btn-link text-primary fs-5 p-0",rel:"noopener noreferrer",children:i.jsx("i",{className:"ph ph-video-conference"})})}):!v&&!Zt?i.jsx(Qe,{placement:"top",overlay:ln(r("Video Conference Not Available","kivicare-clinic-management-system")),children:i.jsx("span",{className:"text-secondary fs-5 p-0",onClick:()=>Wt(be.cell.row.original),role:"button",tabIndex:0,children:i.jsx("i",{className:"ph ph-warning-octagon"})})}):null})(),!v&&l("patient_appointment_status_change")&&i.jsxs(i.Fragment,{children:[qe&&Gt&&i.jsx(Qe,{placement:"top",overlay:ln(r("Check In","kivicare-clinic-management-system")),children:i.jsx("button",{type:"button",onClick:()=>ot(be.cell.row.original,4),className:"btn btn-link text-primary fs-5 p-0",children:i.jsx("i",{className:"ph ph-sign-in"})})}),$e&&Gt&&i.jsx(Qe,{placement:"top",overlay:ln(r("Check Out","kivicare-clinic-management-system")),children:i.jsx("button",{type:"button",onClick:()=>ot(be.cell.row.original,3),className:"btn btn-link text-warning fs-5 p-0",children:i.jsx("i",{className:"ph ph-sign-out"})})})]}),k&&v&&Xe&&l("patient_review_add")&&i.jsx(Qe,{placement:"top",overlay:ln(r("Leave Review","kivicare-clinic-management-system")),children:i.jsx("button",{type:"button",onClick:()=>{P(be.cell.row.original),N(!0)},className:"btn btn-link text-primary fs-5 p-0",children:i.jsx("i",{className:"ph ph-star"})})}),!v&&l("appointment_delete")&&i.jsx(Qe,{placement:"top",overlay:ln(r("Delete Appointment","kivicare-clinic-management-system")),children:i.jsx("button",{className:"btn btn-link text-danger fs-5 p-0",onClick:()=>Nt(be.cell.row.original.id),children:i.jsx("i",{className:"ph text-bold ph-trash"})})}),v&&l("appointment_cancel")&&Te!==ue.CANCELLED&&!$e&&!Xe&&$n&&i.jsx(Qe,{placement:"top",overlay:ln(r("Cancel Appointment","kivicare-clinic-management-system")),children:i.jsx("button",{className:"btn btn-link text-danger fs-5 p-0",onClick:()=>dt(be.cell.row.original.id,0),children:i.jsx("i",{className:"ph ph-prohibit"})})})]})}})]:[]],[C,a,l,d,m,o,c]),Ce=[{type:"inlineDateRange",name:"inlineDateRange",label:r("Select Date Range","kivicare-clinic-management-system"),placeholder:r("Select date range","kivicare-clinic-management-system"),startDateKey:"date_from",endDateKey:"date_to"},...k&&!y&&!b?[{type:"paginatedSelect",name:"clinic",label:r("Clinic","kivicare-clinic-management-system"),placeholder:r("Select clinic","kivicare-clinic-management-system"),optionLoader:ee,options:O,onChange:be=>{ge(be)},storeObject:!0}]:[],...e===!1&&!n&&!v?[{type:"paginatedSelect",name:"patient",label:r("Patient","kivicare-clinic-management-system"),placeholder:r("Select Patient","kivicare-clinic-management-system"),optionLoader:me,options:H,dependencies:y||b?{}:{clinic_ids:"clinic"},storeObject:!0}]:[],...x?[]:[{type:"paginatedSelect",name:"doctor",label:r("Doctor","kivicare-clinic-management-system"),placeholder:r("Select Doctor","kivicare-clinic-management-system"),optionLoader:K,options:z,dependencies:y||b?{}:{clinic_ids:"clinic"},storeObject:!0}],{type:"select",name:"status",label:r("Select Status","kivicare-clinic-management-system"),placeholder:r("Select Status","kivicare-clinic-management-system"),options:[{value:"0",label:r("Cancelled","kivicare-clinic-management-system")},{value:"1",label:r("Booked","kivicare-clinic-management-system")},{value:"4",label:r("Check-In","kivicare-clinic-management-system")},{value:"3",label:r("Check-Out","kivicare-clinic-management-system")},{value:"2",label:r("Pending","kivicare-clinic-management-system")}],isSearchable:!1}],Ke=f.useMemo(()=>["search","date_from","date_to","clinic","patient","doctor","status"].some(ue=>{const Te=ae[ue];return typeof Te=="object"&&Te!==null?Te.value!==void 0&&Te.value!=="":Te!=null&&Te!==""})||ae.timeFrame!=="upcoming",[ae]),it=be=>{U({...ae,...be,page:1}),T(!1)},at=()=>{U({page:1,perPage:10,search:"",date:"",clinic:"",patient:"",doctor:"",status:"",orderby:"",order:"",timeFrame:"upcoming",startDate:"",endDate:"",date_from:"",date_to:""}),T(!1)},ot=(be,ue)=>{if(ue===3){be.encounterStatus==1?kt({title:r("","kivicare-clinic-management-system"),text:r("Please close the Encounter to checkout patient","kivicare-clinic-management-system"),icon:"ph-warning",confirmButtonText:r("OK","kivicare-clinic-management-system"),showCancelButton:!1}):kt({title:r("Update Status","kivicare-clinic-management-system"),text:r("Are you sure you want to update the status for this Appointment?","kivicare-clinic-management-system"),icon:"ph-question",confirmButtonText:r("Yes, update","kivicare-clinic-management-system"),cancelButtonText:r("No, cancel","kivicare-clinic-management-system"),confirmButtonClass:"btn-primary"}).then(Te=>{Te.isConfirmed&&(yt({title:r("Updating...","kivicare-clinic-management-system"),text:r("Please wait. This may take a few seconds.","kivicare-clinic-management-system")}),$.mutate({id:be.id,status:ue},{onSuccess:Ie=>{Tt({text:Ie?.message||r("Appointment status has been updated successfully.","kivicare-clinic-management-system")})},onError:Ie=>{console.error("Update appointment status error:",Ie);const qe=Ie?.response?.data?.message||Ie?.message||r("Failed to update appointment status. Please try again.","kivicare-clinic-management-system");rt({text:qe})}}))});return}ue===4&&kt({title:r("Update Status","kivicare-clinic-management-system"),text:r("Are you sure you want to update the status for this Appointment?","kivicare-clinic-management-system"),icon:"ph-question",confirmButtonText:r("Yes, update","kivicare-clinic-management-system"),cancelButtonText:r("No, cancel","kivicare-clinic-management-system"),confirmButtonClass:"btn-primary"}).then(Te=>{Te.isConfirmed&&(yt({title:r("Updating...","kivicare-clinic-management-system"),text:r("Please wait. This may take a few seconds.","kivicare-clinic-management-system")}),$.mutate({id:be.id,status:ue},{onSuccess:Ie=>{Tt({text:Ie?.message||r("Appointment status has been updated successfully.","kivicare-clinic-management-system")})},onError:Ie=>{console.error("Update appointment status error:",Ie);const qe=Ie?.response?.data?.message||Ie?.message||r("Failed to update appointment status. Please try again.","kivicare-clinic-management-system");rt({text:qe})}}))})},Nt=be=>{kt({title:r("Delete Appointment?","kivicare-clinic-management-system"),text:r("You're about to delete this appointment. This action cannot be undone.","kivicare-clinic-management-system"),confirmButtonText:r("Delete permanently","kivicare-clinic-management-system"),cancelButtonText:r("Keep appointment","kivicare-clinic-management-system"),confirmButtonClass:"btn-danger"}).then(ue=>{ue.isConfirmed&&(yt({title:r("Deleting...","kivicare-clinic-management-system"),text:r("Please wait. This may take a few seconds.","kivicare-clinic-management-system")}),pe.mutate(be,{onSuccess:Te=>{Tt({text:Te?.message||r("Appointment has been deleted successfully.","kivicare-clinic-management-system")})},onError:Te=>{console.error("Delete appointment error:",Te);const Ie=Te?.response?.data?.message||Te?.message||r("Failed to delete appointment. Please try again.","kivicare-clinic-management-system");rt({text:Ie})}}))})},dt=(be,ue)=>{kt({title:r("Cancel Appointment","kivicare-clinic-management-system"),text:r("Are you sure you want to cancel this appointment?","kivicare-clinic-management-system"),confirmButtonText:r("Yes, cancel","kivicare-clinic-management-system"),cancelButtonText:r("No, keep it","kivicare-clinic-management-system"),confirmButtonClass:"btn-warning",icon:"ph-warning",iconColor:"text-warning",bgIconColor:"bg-warning"}).then(Te=>{Te.isConfirmed&&(yt({title:r("Canceling...","kivicare-clinic-management-system"),text:r("Please wait. This may take a few seconds.","kivicare-clinic-management-system")}),$.mutate({id:be,status:ue},{onSuccess:Ie=>{Tt({text:r("Appointment cancelled successfully.","kivicare-clinic-management-system")})},onError:Ie=>{console.error("Cancel appointment error:",Ie);const qe=Ie?.response?.data?.message||Ie?.message||r("Failed to cancel appointment. Please try again.","kivicare-clinic-management-system");rt({text:qe})}}))})},jt=()=>{B()},Wt=({id:be})=>{kt({title:r("Regenerate Video Conference Link","kivicare-clinic-management-system"),text:r("Are you sure you want to regenerate the video conference link for this appointment?","kivicare-clinic-management-system"),icon:"ph-warning",confirmButtonText:r("Yes, regenerate","kivicare-clinic-management-system"),cancelButtonText:r("No, keep it","kivicare-clinic-management-system"),confirmButtonClass:"btn-primary"}).then(ue=>{ue.isConfirmed&&(yt({title:r("Regenerating...","kivicare-clinic-management-system"),text:r("Please wait. This may take a few seconds.","kivicare-clinic-management-system")}),ce.mutate(be,{onSuccess:Te=>{Tt({text:Te?.message||r("Video conference link has been regenerated successfully.","kivicare-clinic-management-system")})},onError:Te=>{console.error("Regenerate video conference error:",Te);const Ie=Te?.response?.data?.data?.error||Te?.message||r("Failed to regenerate video conference link. Please try again.","kivicare-clinic-management-system");rt({text:Ie})}}))})};return i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center gap-3 flex-wrap mb-4",children:[i.jsx("div",{children:!t&&i.jsx(_i,{})}),!v&&k&&i.jsx("div",{className:"d-flex justify-content-between align-items-center gap-3 flex-wrap",children:i.jsxs("button",{type:"button",className:"btn btn-primary d-flex align-items-center gap-2",onClick:()=>D(!0),children:[i.jsx("i",{className:"ph ph-download"}),i.jsx("span",{children:r("Import Data","kivicare-clinic-management-system")})]})})]}),i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap row-gap-2 column-gap-3 mb-4",children:[i.jsx("div",{className:"page-title",children:i.jsx("h6",{className:"m-0",children:r("All Appointments","kivicare-clinic-management-system")})}),i.jsxs("div",{className:"d-flex align-items-center row-gap-2 column-gap-3 flex-wrap",children:[l("appointment_add")&&i.jsxs(ht,{to:e?`/patient/profile/${e}/appointments/add`:"/appointments/add",className:"btn btn-secondary d-flex align-items-center gap-2",children:[i.jsx("i",{className:"ph ph-plus-circle"}),i.jsx("span",{children:r("Add Appointment","kivicare-clinic-management-system")})]}),i.jsxs("button",{className:"btn btn-primary d-flex align-items-center gap-2",onClick:()=>T(!0),children:[i.jsx("i",{className:"ph ph-funnel"}),i.jsx("span",{children:r("Filters","kivicare-clinic-management-system")})]})]})]}),i.jsxs("div",{className:"kc-table-wrapper",children:[i.jsx(Ci,{in:!E,timeout:100,classNames:"fade-top-bottom",unmountOnExit:!0,nodeRef:M,children:i.jsxs("div",{ref:M,className:"position-absolute top-0  w-100 d-flex justify-content-between align-items-xl-center flex-column flex-lg-row gap-3 mb-4",children:[i.jsxs("div",{className:"table-selection d-flex gap-3 flex-column flex-sm-row",children:[i.jsx(ct,{className:"react-select-box",classNamePrefix:"react-select",options:R,value:R.find(be=>be.value===ae.timeFrame),isSearchable:!1,styles:{menuPortal:be=>({...be,zIndex:9999})},onChange:be=>U(ue=>({...ue,timeFrame:be.value}))}),i.jsxs(Zd,{children:[i.jsx(Un,{onChange:be=>{if(be.length===2){const[ue,Te]=be,Ie=Xe=>{const bt=Xe.getFullYear(),Gt=String(Xe.getMonth()+1).padStart(2,"0"),$n=String(Xe.getDate()).padStart(2,"0");return`${bt}-${Gt}-${$n}`},qe=Ie(ue),$e=Ie(Te);U(Xe=>({...Xe,timeFrame:"all",date_from:qe,date_to:$e,page:1}))}},value:ae.date_from&&ae.date_to?[Zn(ae.date_from),Zn(ae.date_to)]:null,options:{mode:"range",dateFormat:xi(window.kc_frontend.date_format),locale:Wn()},className:"form-control",placeholder:r("Select date range","kivicare-clinic-management-system")}),i.jsx("span",{className:"input-group-text",children:ae.date_from&&ae.date_to?i.jsx("i",{className:"ph ph-x text-danger cursor-pointer",onClick:()=>{U(ue=>({...ue,date_from:"",date_to:"",page:1}));const be=document.querySelector('.form-control[placeholder="Select date range"]');be&&be._flatpickr&&be._flatpickr.clear()},title:r("Clear date range","kivicare-clinic-management-system")}):i.jsx("i",{className:"ph ph-calendar"})})]})]}),i.jsxs("div",{className:"btn-toolbar d-flex gap-3 align-items-center justify-content-lg-end table-action-right",children:[i.jsx("div",{className:"d-flex align-items-center input-search-select",children:i.jsxs("div",{className:"input-group input-group-search",children:[i.jsx("span",{className:"input-group-text",children:i.jsx("i",{className:"ph ph-magnifying-glass"})}),i.jsx("input",{type:"text",className:"form-control",placeholder:r("Search Anything","kivicare-clinic-management-system"),value:ae.search,onChange:be=>{const ue=be.target.value;U(Te=>({...Te,search:ue,page:1}))}})]})}),l("appointment_export")&&k&&i.jsxs("div",{className:"download-buttons d-flex align-items-center gap-3",children:[i.jsx(Qe,{placement:"top",overlay:i.jsx(ut,{children:r("Export CSV","kivicare-clinic-management-system")}),children:i.jsx("button",{className:"btn btn-white",onClick:Pe,disabled:Re.isPending,children:i.jsx("i",{className:"ph ph-file-csv"})})}),i.jsx(Qe,{placement:"top",overlay:i.jsx(ut,{children:r("Export Excel","kivicare-clinic-management-system")}),children:i.jsx("button",{className:"btn btn-white",onClick:Ue,disabled:Re.isPending,children:i.jsx("i",{className:"ph ph-file-xls"})})}),i.jsx(Qe,{placement:"top",overlay:i.jsx(ut,{children:r("Export PDF","kivicare-clinic-management-system")}),children:i.jsx("button",{className:"btn btn-white",onClick:Be,disabled:Re.isPending||Je,children:i.jsx("i",{className:"ph ph-file-pdf"})})})]})]})]})}),i.jsx(wn,{data:se,columns:fe,isLoading:Y,error:q,currentPage:Q.currentPage,perPage:Q.perPage,totalItems:Q.total,lastPage:Q.lastPage,onPageChange:be=>U(ue=>({...ue,page:be})),onPerPageChange:be=>U(ue=>({...ue,perPage:be,page:1})),sorting:J,onSortingChange:he,manualSorting:!0,enableSelection:!v,bulkActions:v?[]:[{label:r("Delete","kivicare-clinic-management-system"),action:(be,ue)=>{const Te=be.map(Ie=>Ie.id);kt({title:r("Delete Appointments?","kivicare-clinic-management-system"),text:r(`Youre about to delete <strong>${be.length} appointments</strong>.<br>This action cannot be undone.`,"kivicare-clinic-management-system"),icon:"ph-warning",confirmButtonText:r("Delete permanently","kivicare-clinic-management-system"),cancelButtonText:r("Keep appointments","kivicare-clinic-management-system"),confirmButtonClass:"btn-danger"}).then(Ie=>{Ie.isConfirmed&&(yt({title:r("Deleting Appointments...","kivicare-clinic-management-system"),text:r("Please wait while we remove the selected appointments.<br>This won't take long.","kivicare-clinic-management-system")}),De.mutate(Te,{onSuccess:qe=>{ue&&ue(),Tt({title:r("Appointment Deleted","kivicare-clinic-management-system"),text:r(`${be.length} appointment${be.length>1?"s":""} has been deleted.`,"kivicare-clinic-management-system"),confirmButtonText:r("Back to appointments","kivicare-clinic-management-system")})},onError:qe=>{console.error("Bulk delete appointments error:",qe);const $e=qe?.response?.data?.message||qe?.message||r("Failed to delete selected appointments. Please try again.","kivicare-clinic-management-system");rt({text:$e})}}))})},icon:i.jsx("i",{className:"ph ph-trash"})}],isBulkActionShow:I,moduleNamePlural:"appointments",skeletonRows:5,className:"kc-appointments-list"})]}),i.jsx(na,{show:w,onHide:()=>T(!1),queryParams:ae,onApplyFilters:it,onResetFilters:at,title:r("Filters","kivicare-clinic-management-system"),fields:Ce,hasAppliedFilters:Ke,width:"550px"}),k&&i.jsx(Lr,{show:j,onHide:()=>D(!1),onReopenImport:()=>D(!0),onDataRefresh:jt,context:"appointments"}),i.jsx(pJ,{show:_,onHide:()=>N(!1),appointment:A})]})};function JR({Formwatch:t,summaryData:e,summaryLoading:n,summaryError:s,className:a={}}){const[l,o]=f.useState(!0),{getPriceFormat:c}=mt(),d=t("service"),m=f.useMemo(()=>{const u={};return(e?.applied_taxes||[]).forEach(h=>{if(h.tax_name)if(u[h.tax_name])u[h.tax_name].count+=1,u[h.tax_name].totalAmount+=Number(h.tax_amount);else{let p=1;parseInt(h.tax_value)/parseInt(h.tax_amount)>1&&h.type==="fixed"&&(p=Math.ceil(parseInt(h.tax_value)/parseInt(h.tax_amount))),u[h.tax_name]={...h,count:p,totalAmount:Number(h.tax_amount)}}}),Object.values(u)},[e?.applied_taxes]);return!d||d.length===0?i.jsx(_t,{className:a,children:i.jsx(_t.Body,{className:"text-center",children:i.jsxs("p",{children:[" ",r("No Service Is Selected","kivicare-clinic-management-system")," "]})})}):n?i.jsx(_t,{className:a,children:i.jsx(Cw,{})}):s?i.jsx(_t,{className:a,children:i.jsx(_t.Body,{className:"text-danger",children:r("Failed to load appointment summary.","kivicare-clinic-management-system")})}):i.jsx(_t,{className:a,children:i.jsxs(_t.Body,{children:[e?.services?.map((u,h)=>i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap gap-2 mb-2",children:[i.jsx("div",{className:"font-size-14",children:u.title}),i.jsx("div",{className:"text-end",children:i.jsx("p",{className:"m-0",children:c(u.price)})})]},h)),e?.applied_taxes?.length>0&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap gap-2 mb-2",children:[i.jsx("div",{className:"font-size-14",children:r("Subtotal","kivicare-clinic-management-system")}),i.jsx("div",{className:"text-end",children:i.jsx("p",{className:"m-0",children:c(e?.subtotal)})})]}),i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap gap-2 cursor-pointer applied-tax",onClick:()=>o(!l),children:[i.jsx("div",{className:"font-size-14",children:r("Tax","kivicare-clinic-management-system")}),i.jsxs("div",{className:"d-flex align-items-center gap-1",children:[i.jsx("i",{class:"ph ph-caret-up  fw-semibold rotated"}),i.jsx("p",{className:"m-0 text-danger",children:c(e?.tax)})]})]}),i.jsx(NS,{in:l,children:i.jsxs("div",{className:"mt-2 p-3 bg-body rounded",children:[i.jsx("h6",{className:"font-size-14",children:r("Applied Tax","kivicare-clinic-management-system")}),i.jsx("div",{className:"tax-spacing2",children:m?.map((u,h)=>i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap gap-2 tax-spacing2-item",children:[i.jsxs("div",{className:"font-size-14",children:[u.tax_name," ",u.count>1?` x${u.count}`:""," ",u.tax_type=="percentage"?`(${u.tax_value}%)`:""]}),i.jsx("div",{className:"text-end text-danger font-size-14 m-0",children:c(u.totalAmount)})]},h))})]})})]}),i.jsxs("div",{className:"mt-4 d-flex align-items-center justify-content-between flex-wrap gap-1",children:[i.jsx("div",{children:i.jsx("h6",{className:"font-size-14 m-0",children:r("Grand Total","kivicare-clinic-management-system")})}),i.jsx("div",{children:i.jsx("h5",{className:"m-0 text-primary",children:c(e?.grand_total)})})]})]})})}function NJ({showConfirmationModel:t,handleCloseConfirmationModel:e,handleConfirmAppointment:n,confirmationData:s,isSubmitting:a,setValue:l}){const{getPriceFormat:o,paymentGateway:c}=mt(),{clinicName:d,doctorName:m,service:u,date:h,time:p,grandTotal:g}=s||{},v=c?.map(x=>({value:x.id,label:x.name}));return i.jsx(lt,{show:t,onHide:e,backdrop:"static",keyboard:!1,centered:!0,size:"md",children:i.jsxs(lt.Body,{className:"appointment-confirmation-model",children:[i.jsx("div",{className:"d-flex justify-content-center mb-5 pb-lg-4 pb-0",children:i.jsx("div",{class:"modal-custom-icon",children:i.jsx("i",{class:"ph ph-question-mark text-primary"})})}),i.jsxs("div",{className:"text-center mb-5",children:[i.jsx("h4",{children:r("Confirm your Appointment","kivicare-clinic-management-system")}),i.jsx("p",{children:r("Please review the details below to ensure everything is correct before proceeding.","kivicare-clinic-management-system")})]}),i.jsxs("div",{className:"p-4 bg-body rounded-3 mb-3",children:[i.jsx("h6",{className:"pb-3 mb-4 border-bottom",children:r("Appointment Summary:","kivicare-clinic-management-system")}),i.jsxs(Yn,{className:"gy-2",children:[i.jsx(Et,{md:5,xs:12,children:i.jsx("span",{className:"text-body",children:r("Clinic:","kivicare-clinic-management-system")})}),i.jsx(Et,{md:7,xs:12,children:i.jsx("span",{className:"font-size-14 h6 m-0",children:d||r("N/A","kivicare-clinic-management-system")})}),i.jsx(Et,{md:5,xs:12,children:i.jsx("span",{className:"text-body",children:r("Doctor:","kivicare-clinic-management-system")})}),i.jsx(Et,{md:7,xs:12,children:i.jsx("span",{className:"font-size-14 h6 m-0",children:m||r("N/A","kivicare-clinic-management-system")})}),i.jsx(Et,{md:5,xs:12,children:i.jsx("span",{className:"text-body",children:r("Service:","kivicare-clinic-management-system")})}),i.jsx(Et,{md:7,xs:12,children:i.jsx("span",{className:"font-size-14 h6 m-0",children:Array.isArray(u)?u.map(x=>x.label).join(", "):u?.label||r("N/A","kivicare-clinic-management-system")})}),i.jsx(Et,{md:5,xs:12,children:i.jsx("span",{className:"text-body",children:r("Date and Time:","kivicare-clinic-management-system")})}),i.jsx(Et,{md:7,xs:12,children:i.jsx("span",{className:"font-size-14 h6 m-0",children:h&&p?`${h}, ${p}`:r("N/A","kivicare-clinic-management-system")})}),i.jsx(Et,{md:5,xs:12,children:i.jsx("span",{className:"text-body",children:r("Price:","kivicare-clinic-management-system")})}),i.jsx(Et,{md:7,xs:12,children:i.jsx("span",{className:"font-size-14 h6 m-0",children:g?o(g):r("Free","kivicare-clinic-management-system")})})]})]}),Number(g)>0&&i.jsxs("div",{children:[i.jsx("label",{children:r("Payment Gateway:","kivicare-clinic-management-system")}),i.jsx(ct,{options:v,onChange:x=>{l("payment_gateway",x.value)},className:"react-select-box",classNamePrefix:"react-select",styles:{menuPortal:x=>({...x,zIndex:9999})}})]}),i.jsxs("div",{className:"d-flex justify-content-center gap-lg-4 gap-2 mt-5 pt-lg-2 pt-0",children:[i.jsx(Xt,{variant:"secondary",onClick:e,disabled:a,children:r("Cancel","kivicare-clinic-management-system")}),i.jsx(Xt,{variant:"primary",onClick:n,disabled:a,children:a?i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status"}),r("Confirming...","kivicare-clinic-management-system")]}):r("Confirm","kivicare-clinic-management-system")})]})]})})}const CJ={getSchedules:(t={})=>ve({endpoint:"clinic-schedules",method:"GET",data:t}),getSchedule:t=>ve({endpoint:`clinic-schedules/${t}`,method:"GET"}),createSchedule:t=>ve({endpoint:"clinic-schedules",method:"POST",data:t}),updateSchedule:(t,e)=>ve({endpoint:`clinic-schedules/${t}`,method:"PUT",data:e}),deleteSchedule:t=>ve({endpoint:`clinic-schedules/${t}`,method:"DELETE"}),getunavailableSchedule:(t={})=>ve({endpoint:"clinic-schedules/get-unavailable-schedule",method:"GET",data:t})},Vd={all:["clinicSchedules"],lists:()=>[...Vd.all,"list"],list:t=>[...Vd.lists(),{filters:t}],details:()=>[...Vd.all,"detail"],detail:t=>[...Vd.details(),t]},_J=(t={},e={})=>ft({queryKey:Vd.list(t),queryFn:()=>CJ.getunavailableSchedule(t),...e}),SJ=()=>Ir(()=>import("./index-B0HAhLET.js"),[],import.meta.url),EJ=He.lazy(()=>Ir(()=>import("./react-stripe.esm-wpWIvNa-.js"),__vite__mapDeps([0]),import.meta.url).then(t=>({default:t.EmbeddedCheckoutProvider}))),TJ=He.lazy(()=>Ir(()=>import("./react-stripe.esm-wpWIvNa-.js"),__vite__mapDeps([0]),import.meta.url).then(t=>({default:t.EmbeddedCheckout}))),AJ=t=>{if(!t)return{isValid:!1,error:r("No appointment data provided","kivicare-clinic-management-system")};const{publishable_key:e,client_secret:n}=t;return e?n?e.startsWith("pk_")?n.includes("_secret_")?{isValid:!0,error:null}:{isValid:!1,error:r("Invalid Stripe client secret format","kivicare-clinic-management-system")}:{isValid:!1,error:r("Invalid Stripe publishable key format","kivicare-clinic-management-system")}:{isValid:!1,error:r("Missing Stripe client secret","kivicare-clinic-management-system")}:{isValid:!1,error:r("Missing Stripe publishable key","kivicare-clinic-management-system")}},DJ=()=>{let t=null;try{t=hn()}catch{}return f.useEffect(()=>{Ir(()=>Promise.resolve({}),__vite__mapDeps([1]),import.meta.url).catch(e=>console.warn("Failed to load payment gateway styles:",e))},[]),t},RJ=f.forwardRef(({appointmentData:t,onPaymentSuccess:e,onPaymentCancel:n,...s},a)=>{const l=DJ(),[o,c]=f.useState(t),[d,m]=f.useState(null),[u,h]=f.useState(!1),[p,g]=f.useState(null),[v,x]=f.useState(null),[y,b]=f.useState(!0),k=qR();f.useImperativeHandle(a,()=>({updateAppointmentData:j=>{c(j)}}),[]);const w=()=>{k.mutateAsync({appointment_id:o.appointment_id,gateway:o.payment_response.gateway,session_id:o.payment_response.data.payment_id,method:"POST"}).then(j=>{j.data.status=="success"?(Se.success(j?.data?.message||r("Payment completed successfully","kivicare-clinic-management-system"),{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0}),h(!1),e?setTimeout(()=>{e(j)},1500):l&&setTimeout(()=>{l("/appointments/view/"+o.appointment_id,{replace:!0})},1500)):(Se.error(j?.data?.message||r("Payment failed","kivicare-clinic-management-system"),{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0}),h(!1),n?n(j):l&&l("/appointments/add",{replace:!0}))})},T=()=>{At.fire({title:r("Are you sure?","kivicare-clinic-management-system"),text:r("Do you want to cancel the payment?","kivicare-clinic-management-system"),icon:"warning",showCancelButton:!0,confirmButtonText:r("Yes, cancel","kivicare-clinic-management-system"),cancelButtonText:r("No, keep paying","kivicare-clinic-management-system")}).then(async j=>{if(j.isConfirmed)try{const D=window.kc_frontend?.rest_url||"/wp-json/",_=o?.appointment_id,N=o?.payment_response?.gateway||"stripe";await fetch(`${D}kivicare/v1/appointments/payment-cancel?appointment_id=${_}&gateway=${N}`,{method:"GET",headers:{"X-WP-Nonce":window.kc_frontend?.nonce||""}}),Se.success(r("Payment was cancelled","kivicare-clinic-management-system"),{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0}),h(!1),setTimeout(()=>{n?n():l&&l("/appointments",{replace:!0})},1e3)}catch(D){console.error("Error cancelling appointment:",D),h(!1)}})};return f.useEffect(()=>{const j=async()=>{try{b(!0),x(null);const D=AJ(o.payment_response?.data);if(!D.isValid){x(D.error);return}const _=await SJ();g(_);const N=await _.loadStripe(o.payment_response?.data?.publishable_key);if(!N){x(r("Failed to load Stripe. Please check your connection and try again.","kivicare-clinic-management-system"));return}m(N)}catch(D){console.error("Error initializing Stripe:",D),x(r("Failed to initialize payment system. Please try again.","kivicare-clinic-management-system"))}finally{b(!1),h(!0)}};if(!o){h(!1);return}j()},[o]),i.jsx(lt,{show:u,centered:!0,size:"xl",animation:!0,onHide:()=>T(),backdrop:"static",keyboard:!1,className:"kivicare-payment-gateway-modal",...s,children:i.jsxs(lt.Body,{className:"position-relative",children:[i.jsx("button",{className:"close-btn",onClick:()=>T(),children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:20,height:20,fill:"currentColor",viewBox:"0 0 256 256",children:i.jsx("path",{d:"M205.66,194.34a8,8,0,0,1-11.32,11.32L128,139.31,61.66,205.66a8,8,0,0,1-11.32-11.32L116.69,128,50.34,61.66A8,8,0,0,1,61.66,50.34L128,116.69l66.34-66.35a8,8,0,0,1,11.32,11.32L139.31,128Z"})})}),d&&p&&i.jsx(He.Suspense,{fallback:i.jsx(Ng,{}),children:i.jsx(EJ,{stripe:d,options:{clientSecret:o?.payment_response?.data?.client_secret,onComplete:w},children:i.jsx(TJ,{})})})]})})}),PJ=t=>{if(!t)return{isValid:!1,error:r("No appointment data provided","kivicare-clinic-management-system")};const{key_id:e,order_id:n,amount:s,currency:a}=t;return e?n?!s||isNaN(s)?{isValid:!1,error:r("Invalid amount","kivicare-clinic-management-system")}:a?{isValid:!0,error:null}:{isValid:!1,error:r("Missing currency","kivicare-clinic-management-system")}:{isValid:!1,error:r("Missing Razorpay order ID","kivicare-clinic-management-system")}:{isValid:!1,error:r("Missing Razorpay key ID","kivicare-clinic-management-system")}},MJ=()=>{let t=null;try{t=hn()}catch{}return t},IJ=f.forwardRef(({appointmentData:t,onPaymentSuccess:e,onPaymentCancel:n,...s},a)=>{const l=MJ(),[o,c]=f.useState(t),[d,m]=f.useState(null),[u,h]=f.useState(!1),p=qR();f.useImperativeHandle(a,()=>({updateAppointmentData:v=>{c(v)}}),[]);const g=async()=>{if((await At.fire({title:r("Are you sure?","kivicare-clinic-management-system"),text:r("Do you want to cancel the payment?","kivicare-clinic-management-system"),icon:"warning",showCancelButton:!0,confirmButtonText:r("Yes, cancel","kivicare-clinic-management-system"),cancelButtonText:r("No, keep paying","kivicare-clinic-management-system")})).isConfirmed)try{const x=window.kc_frontend?.rest_url||"/wp-json/",y=o?.appointment_id,b=o?.payment_response?.gateway||"razorpay";await fetch(`${x}kivicare/v1/appointments/payment-cancel?appointment_id=${y}&gateway=${b}`,{method:"GET",headers:{"X-WP-Nonce":window.kc_frontend?.nonce||""}}),Se.success(r("Payment was cancelled","kivicare-clinic-management-system"),{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0}),setTimeout(()=>{n?n():l&&l("/appointments",{replace:!0})},1e3)}catch(x){console.error("Error cancelling appointment:",x),n?n():l&&l("/appointments",{replace:!0})}};return f.useEffect(()=>{const v=async()=>{try{h(!0),m(null);const x=PJ(o.payment_response?.data);if(!x.isValid){m(x.error);return}const y=o.payment_response?.data;if(await(T=>new Promise((j,D)=>{const _=document.createElement("script");_.src=T,_.onload=()=>j(!0),_.onerror=()=>D(new Error("Failed to load Razorpay SDK")),document.body.appendChild(_)}))("https://checkout.razorpay.com/v1/checkout.js"),!window.Razorpay)throw new Error("Razorpay SDK failed to load");const k={key:y.key_id,currency:y.currency.toUpperCase(),order_id:y.order_id,handler:function(T){p.mutateAsync({appointment_id:o.appointment_id,gateway:o.payment_response.gateway,payment_id:T.razorpay_payment_id,razorpay_order_id:T.razorpay_order_id,razorpay_signature:T.razorpay_signature,method:"POST"}).then(j=>{j.data.status==="success"?(Se.success(j?.data?.message||r("Payment completed successfully","kivicare-clinic-management-system"),{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0}),setTimeout(()=>{e?e(j):l&&l("/appointments/view/"+o.appointment_id,{replace:!0})},1500)):(Se.error(j?.data?.message||r("Payment failed","kivicare-clinic-management-system"),{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0}),n?n(j):l&&l("/appointments/add",{replace:!0}))}).catch(j=>{Se.error(r("Payment processing failed","kivicare-clinic-management-system"),{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0}),n?n():l&&l("/appointments/add",{replace:!0})})},modal:{ondismiss:function(){g()}},prefill:{name:o.patient_name||"",email:o.patient_email||"",contact:o.patient_contact||""},notes:{appointment_id:o.appointment_id,transaction_ref:y.transaction_ref},theme:{color:"#3399cc"}};new window.Razorpay(k).open()}catch(x){console.error("Error initializing Razorpay:",x),m(r("Failed to initialize payment system. Please try again.","kivicare-clinic-management-system"))}finally{h(!1)}};o&&v()},[o]),i.jsxs(i.Fragment,{children:[u&&i.jsxs("div",{className:"text-center",children:[i.jsx(Ng,{animation:"border"}),i.jsx("p",{children:r("Loading Razorpay...","kivicare-clinic-management-system")})]}),d&&i.jsx("div",{className:"alert alert-danger",children:d})]})}),_l={getCustomForms:(t={})=>ve({endpoint:"custom-forms/admin",method:"GET",data:t}),getCustomFormsRender:(t={})=>ve({endpoint:"custom-forms/render",method:"GET",data:t}),getCustomForm:t=>ve({endpoint:`custom-forms/${t}`,method:"GET"}),createCustomForm:t=>ve({endpoint:"custom-forms",method:"POST",data:t}),updateCustomForm:(t,e)=>ve({endpoint:`custom-forms/${t}`,method:"PUT",data:e}),deleteCustomForm:t=>ve({endpoint:`custom-forms/${t}`,method:"DELETE"}),getCustomFormStats:(t={})=>ve({endpoint:"custom-forms/stats",method:"GET",data:t}),bulkDeleteCustomForms:t=>ve({endpoint:"custom-forms/bulk-delete",method:"POST",data:{ids:t}}),updateCustomFormStatus:(t,e)=>ve({endpoint:`custom-forms/${t}/status`,method:"PUT",data:{status:e}}),getCustomFormTableConfig:()=>ve({endpoint:"custom-forms/table-config",method:"GET"}),submitCustomForm:t=>ve({endpoint:"custom-forms/submit",method:"POST",data:t})},ji={all:["custom-forms"],lists:()=>[...ji.all,"list"],list:t=>[...ji.lists(),{filters:t}],details:()=>[...ji.all,"detail"],detail:t=>[...ji.details(),t],tableConfig:()=>[...ji.all,"table-config"]},OJ=(t={},e={})=>ft({queryKey:ji.list(t),queryFn:()=>_l.getCustomForms(t),...e}),ad=(t={},e={})=>ft({queryKey:ji.list(t),queryFn:()=>_l.getCustomFormsRender(t),...e}),eP=(t,e={})=>ft({queryKey:ji.detail(t),queryFn:()=>_l.getCustomForm(t),enabled:!!t,...e}),FJ=(t={})=>{const e=ze();return Le({mutationFn:n=>_l.createCustomForm(n),onSuccess:n=>{e.invalidateQueries({queryKey:ji.lists()}),e.setQueryData(ji.detail(n.id),n)},...t})},LJ=(t={})=>{const e=ze();return Le({mutationFn:({id:n,...s})=>_l.updateCustomForm(n,s),onSuccess:(n,s)=>{e.invalidateQueries({queryKey:ji.lists()}),e.setQueryData(ji.detail(s.id),n)},...t})},$J=(t={})=>{const e=ze();return Le({mutationFn:n=>_l.deleteCustomForm(n),onSuccess:(n,s)=>{e.invalidateQueries({queryKey:ji.lists()}),e.removeQueries({queryKey:ji.detail(s)})},...t})},BJ=(t={})=>{const e=ze();return Le({mutationFn:({id:n,status:s})=>_l.updateCustomFormStatus(n,s),onSuccess:(n,s)=>{e.invalidateQueries({queryKey:ji.lists()}),e.setQueryData(ji.detail(s.id),n)},...t})},qJ=(t={})=>{const e=ze();return Le({mutationFn:n=>_l.submitCustomForm(n),onSuccess:(n,s)=>{e.invalidateQueries({queryKey:ji.lists()})},...t})},Ua=f.forwardRef(({fields:t,data:e={},readOnly:n=!0,onChange:s,formId:a},l)=>{const{control:o,handleSubmit:c,watch:d,reset:m,trigger:u,formState:{errors:h,isValid:p,isDirty:g}}=en({defaultValues:e,mode:"onBlur",reValidateMode:"onBlur"}),v=d(),[x,y]=f.useState({isValid:!0,errors:{}}),b=f.useRef(h);f.useEffect(()=>{b.current=h},[h]);const k=f.useCallback(async()=>{const D=await u();await new Promise(A=>setTimeout(A,100));const _=b.current,N={isValid:D,errors:_};return y(N),N},[u]);f.useImperativeHandle(l,()=>({validateForm:async()=>(await k()).isValid,getFormData:()=>v,getFormErrors:()=>x.errors,getFormValidationState:()=>x,isFormValid:()=>x.isValid,resetForm:(D={})=>{m(D),y({isValid:!0,errors:{}})},triggerValidation:async()=>await k()}),[v,x,k,m]),f.useEffect(()=>{Object.keys(h).length>0&&y(D=>({...D,errors:h,isValid:!1}))},[h]),f.useEffect(()=>{s&&s(v)},[v,s]);const w=D=>{const _={};return D.required&&(_.required=D.errorMessage||r("This field is required","kivicare-clinic-management-system")),D.type==="email"&&(_.pattern={value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:r("Invalid email address","kivicare-clinic-management-system")}),D.type==="number"&&(D.min!==void 0&&(_.min={value:D.min,message:r(`Minimum value is ${D.min}`,"kivicare-clinic-management-system")}),D.max!==void 0&&(_.max={value:D.max,message:r(`Maximum value is ${D.max}`,"kivicare-clinic-management-system")})),D.minLength&&(_.minLength={value:D.minLength,message:r(`Minimum length is ${D.minLength} characters`,"kivicare-clinic-management-system")}),D.maxLength&&(_.maxLength={value:D.maxLength,message:r(`Maximum length is ${D.maxLength} characters`,"kivicare-clinic-management-system")}),D.pattern&&(_.pattern={value:new RegExp(D.pattern),message:D.patternMessage||r("Invalid format","kivicare-clinic-management-system")}),D.validate&&(_.validate=D.validate),_},T=D=>{if(n)return j(D);const _=w(D),N=!!h[D.id],A=h[D.id]?.message,P={id:`${a}_${D.id}`,isInvalid:N,"aria-describedby":N?`${a}_${D.id}_feedback`:void 0};switch(D.type){case"textarea":return i.jsxs(i.Fragment,{children:[i.jsx(ye,{name:D.id,control:o,rules:_,render:({field:I})=>i.jsx(Mt.Control,{as:"textarea",rows:3,...I,placeholder:D.placeholder,...P})}),N&&i.jsx(Mt.Control.Feedback,{id:`${P.id}_feedback`,type:"invalid",style:{display:"block"},children:A})]});case"select":return i.jsxs(i.Fragment,{children:[i.jsx(ye,{name:D.id,control:o,rules:_,render:({field:I})=>i.jsx(ct,{value:D.options?.find(M=>M===I.value)?{label:D.options.find(M=>M===I.value),value:I.value}:null,onChange:M=>I.onChange(M?.value||""),onBlur:I.onBlur,options:D.options?.map(M=>({label:M,value:M}))||[],placeholder:D.placeholder||r("Select an option","kivicare-clinic-management-system"),className:`react-select-box ${N?"is-invalid":""}`,classNamePrefix:"react-select",styles:{menuPortal:M=>({...M,zIndex:9999})},...P})}),N&&i.jsx("div",{id:`${P.id}_feedback`,className:"invalid-feedback",style:{display:"block"},children:A})]});case"radio":return i.jsxs(i.Fragment,{children:[i.jsx(ye,{name:D.id,control:o,rules:_,render:({field:I})=>i.jsx("div",{className:N?"is-invalid":"",children:D.options?.map((M,O)=>i.jsx(Mt.Check,{id:O===0?P.id:`${P.id}_${O}`,inline:!0,type:"radio",label:M,name:D.id,value:M,checked:I.value===M,onChange:F=>I.onChange(F.target.value),onBlur:I.onBlur,isInvalid:N},O))})}),N&&i.jsx("div",{id:`${P.id}_feedback`,className:"invalid-feedback",style:{display:"block"},children:A})]});case"checkbox":return i.jsxs(i.Fragment,{children:[i.jsx(ye,{name:D.id,control:o,rules:_,render:({field:I})=>i.jsx(Mt.Check,{type:"checkbox",label:D.placeholder||D.label,checked:!!I.value,onChange:M=>I.onChange(M.target.checked),onBlur:I.onBlur,isInvalid:N,...P})}),N&&i.jsx("div",{id:`${P.id}_feedback`,className:"invalid-feedback",style:{display:"block"},children:A})]});case"file":const E=D.fileTypes&&D.fileTypes.length>0?D.fileTypes.map(I=>I.id||I).join(","):"";return i.jsx(ye,{name:D.id,control:o,rules:_,render:({field:I})=>{const M=I.value,O=M&&(M.url||M.name);return i.jsx(cu,{id:`custom-form-field-${D.id}`,name:D.id,accept:E,required:D.required,defaultFile:O?M.url:"",defaultFileId:O?M.id:"",onChange:(F,H)=>{I.onChange({id:H,url:F.url,name:F.filename||F.name})},errors:h,readOnly:n})}});case"date":return i.jsxs(i.Fragment,{children:[i.jsx(ye,{name:D.id,control:o,rules:_,render:({field:I})=>i.jsxs("div",{className:"input-group",children:[i.jsx(Un,{className:`form-control ps-3 pe-5 ${N?"is-invalid":""}`,placeholder:D.placeholder,style:{display:"none"},options:He.useMemo(()=>({dateFormat:"Y-m-d",altInput:!0,altFormat:xi(window.kc_frontend.date_format),disableMobile:!0,locale:Wn()}),[]),...P,value:I.value||"",onChange:async M=>{const O=M[0]?La(M[0]):"";I.onChange(O),await u(D.id)}}),i.jsx("i",{className:"ph-light ph-calendar input-group-text"})]})}),N&&i.jsx("div",{id:`${P.id}_feedback`,className:"invalid-feedback",style:{display:"block"},children:A})]});default:return i.jsxs(i.Fragment,{children:[i.jsx(ye,{name:D.id,control:o,rules:_,render:({field:I})=>i.jsx(Mt.Control,{type:D.type,...I,placeholder:D.placeholder,...P})}),N&&i.jsx(Mt.Control.Feedback,{id:`${P.id}_feedback`,type:"invalid",children:A})]})}},j=D=>{const _=v[D.id];if(_==null||_==="")return i.jsx("div",{className:" small",children:i.jsx("em",{children:r("No data","kivicare-clinic-management-system")})});switch(D.type){case"textarea":return i.jsx("div",{className:"font-size-14 h6 mb-0 text-prewrap",children:_});case"select":{const N=D.options?.find(A=>A===_);return i.jsx("div",{className:"font-size-14 h6 mb-0",children:N||_})}case"radio":{const N=D.options?.find(A=>A===_);return i.jsx("div",{className:"font-size-14 h6 mb-0",children:N||_})}case"checkbox":return i.jsx("div",{className:"font-size-14 h6 mb-0",children:_?r("Yes","kivicare-clinic-management-system"):r("No","kivicare-clinic-management-system")});case"file":return _?_ instanceof File?i.jsxs("div",{className:"font-size-14 h6 mb-0",children:[i.jsx("div",{children:_.name}),i.jsxs("small",{children:[(_.size/1024).toFixed(2)," KB"]})]}):i.jsx("a",{href:_,target:"_blank",rel:"noopener noreferrer",className:"d-block font-size-14 h6 mb-0 text-primary",children:r("View File","kivicare-clinic-management-system")}):i.jsx("div",{className:"small",children:i.jsx("em",{children:r("No file","kivicare-clinic-management-system")})});case"date":try{const N=new Date(_);if(!isNaN(N.getTime())){const A=N.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});return i.jsx("div",{className:"font-size-14 h6 mb-0",children:A})}}catch{}return i.jsx("div",{className:"font-size-14 h6 mb-0",children:_});case"email":return i.jsx("a",{href:`mailto:${_}`,className:"d-block font-size-14 h6 mb-0",children:_});case"tel":case"phone":return i.jsx("a",{href:`tel:${_}`,className:"d-block font-size-14 h6 mb-0",children:_});case"url":return i.jsx("a",{href:_,target:"_blank",rel:"noopener noreferrer",className:"d-block font-size-14 h6 mb-0",children:_});case"number":return i.jsx("div",{className:"font-size-14 h6 mb-0",children:Number(_).toLocaleString()});default:return i.jsx("div",{className:"font-size-14 h6 mb-0",children:_})}};return!t||t.length===0?i.jsx("div",{children:r("No fields to display","kivicare-clinic-management-system")}):i.jsx("div",{className:`custom-form-container ${n?"bg-body p-3 rounded":""}`,children:i.jsx(Yn,{className:"gy-3",children:t.map(D=>i.jsx(Et,{className:`${D.columnClass} custom-form-border-end `,children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:`form-label ${n?"text-body":""}`,htmlFor:`${a}_${D.id}`,children:[i.jsx("span",{dangerouslySetInnerHTML:{__html:FR(D.label)}}),D.required&&i.jsx("span",{className:"text-danger",children:"*"})]}),T(D)]})},D.id))})})});Ua.displayName="CustomFormRenderer";const HJ=({label:t,value:e,onChange:n,placeholder:s="",type:a="text",isDisable:l=!1,error:o=null,showError:c=!0,className:d="",hasTooltip:m=!1,hasUrl:u="",name:h="",key:p="",required:g=!1,register:v=()=>{},...x})=>i.jsxs(f.Fragment,{children:[i.jsxs("div",{className:"form-group",children:[(t||g||m)&&i.jsx(i.Fragment,{children:i.jsxs("label",{className:"form-label",children:[t,g&&i.jsx("span",{className:"input-field-required text-danger",children:"*"}),m&&i.jsx("a",{href:u,target:"_blank",rel:"noopener noreferrer",className:"ms-1",children:i.jsx("i",{className:"ph ph-question align-middle h5"})})]})}),i.jsx("input",{name:h,type:a,className:`form-control ${d}`,placeholder:s,value:e,onChange:y=>n(y.target.value),disabled:l,...v(h,{required:g}),...x},p)]}),o&&c&&i.jsx("div",{className:"text-danger",children:o?.message||r("This field is required","kivicare-clinic-management-system")})]}),Ht=f.memo(HJ),cn=({label:t,checked:e,onChange:n,badge:s=null,className:a="",disabled:l=!1,error:o=null,inputClassName:c="",...d})=>i.jsxs(f.Fragment,{children:[i.jsxs("div",{className:`form-check form-switch custom-switch-xl p-0 d-flex align-items-md-center justify-content-between column-gap-3 row-gap-1 flex-md-row flex-column ${a}`,children:[t&&i.jsxs("label",{className:"d-flex align-items-center column-gap-3 row-gap-1 form-check-label m-0 h6 font-size-14",children:[i.jsx("span",{className:"mb-0 font-size-14",children:t}),s&&i.jsx("span",{className:`badge rounded-pill ${s.className}`,children:s.text})]}),i.jsx("input",{className:`form-check-input ${c}`,type:"checkbox",role:"switch",checked:e==="on"||e===!0,onChange:m=>{const u=m.target.checked;n(typeof e=="string"?u?"on":"off":!!u)},disabled:l,...d})]}),o&&i.jsx("div",{className:"text-danger",children:o.message})]}),xC=[{key:"title",getter:t=>t.getTitle()},{key:"html",getter:t=>t.getHtmlContainer()},{key:"confirmButtonText",getter:t=>t.getConfirmButton()},{key:"denyButtonText",getter:t=>t.getDenyButton()},{key:"cancelButtonText",getter:t=>t.getCancelButton()},{key:"footer",getter:t=>t.getFooter()},{key:"closeButtonHtml",getter:t=>t.getCloseButton()},{key:"iconHtml",getter:t=>t.getIconContent()},{key:"loaderHtml",getter:t=>t.getLoader()}],Zv=()=>{};function zJ(t){function e(a){const l={},o={},c=xC.map(d=>d.key);return Object.entries(a).forEach(d=>{let[m,u]=d;c.includes(m)&&He.isValidElement(u)?(l[m]=u,o[m]=" "):o[m]=u}),[l,o]}function n(a,l){Object.entries(l).forEach(o=>{let[c,d]=o;const u=xC.find(p=>p.key===c).getter(t),h=kI.createRoot(u);h.render(d),a.__roots.push(h)})}function s(a){a.__roots.forEach(l=>{l.unmount()}),a.__roots=[]}return class extends t{static argsToParams(a){if(He.isValidElement(a[0])||He.isValidElement(a[1])){const l={};return["title","html","icon"].forEach((o,c)=>{a[c]!==void 0&&(l[o]=a[c])}),l}else return t.argsToParams(a)}_main(a,l){this.__roots=[],this.__params=Object.assign({},l,a);const[o,c]=e(this.__params),d=c.willOpen||Zv,m=c.didOpen||Zv,u=c.didDestroy||Zv;return super._main(Object.assign({},c,{willOpen:h=>{n(this,o),d(h)},didOpen:h=>{setTimeout(()=>{m(h)})},didDestroy:h=>{u(h),s(this)}}))}update(a){Object.assign(this.__params,a),s(this);const[l,o]=e(this.__params);super.update(o),n(this,l)}}}const Ze=zJ(At),Xv={patient:"/patient",doctor:"/doctor",receptionist:"/receptionist",appointments:"/appointments",encounter:"/encounter",clinic:"/clinic",service:"/service","doctor-session":"/doctor-session",tax:"/tax",billings:"/billings"},ei=({text:t=r("Back","kivicare-clinic-management-system"),className:e="",size:n="",variant:s="primary",iconClass:a="ph ph-caret-left",showIcon:l=!0,style:o={},...c})=>{const d=hn(),m=Kn(),u=m.pathname.replace(/\/$/,"");if(Object.values(Xv).includes(u)||u==="")return null;const h=()=>{if(window.history.state&&window.history.state.idx>0){d(-1);return}let v="/";const x=m.pathname.split("/").filter(Boolean);for(const y of x)if(Xv[y]){v=Xv[y];break}d(v,{replace:!0})},p=n?`btn-${n}`:"",g=["btn","d-flex align-items-center gap-1 back-btn",`btn-${s}`,p,"fw-semibold",e].filter(Boolean).join(" ");return i.jsxs("button",{type:"button",className:g,onClick:h,style:o,...c,children:[l&&i.jsx("i",{className:`${a}`}),i.jsx("span",{className:"font-size-14",children:t})]})},rr=He.forwardRef(({title:t,children:e,helpUrl:n=null,footer:s=null,headerActions:a=null,className:l="",...o},c)=>i.jsx("div",{className:`card ${l}`,ref:c,...o,children:i.jsxs("div",{className:"card-body",children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-3",children:[i.jsxs("h6",{className:"mb-0",children:[t,n&&i.jsx("a",{href:n,target:"_blank",rel:"noopener noreferrer",className:"ms-2 d-inline-flex align-items-center p-0 ",children:i.jsx("i",{className:"ph ph-question align-middle h6 text-primary"})})]}),a&&i.jsx("div",{children:a})]}),e,s&&i.jsx("div",{className:"mt-3",children:s})]})})),ef=f.forwardRef(({id:t="kc-image-upload-input",name:e="image",defaultImage:n="",defaultImageId:s="",onChange:a,onClear:l,className:o="",disabled:c=!1,required:d=!1,label:m="",register:u,setValue:h,errors:p={},accept:g,allowFile:v=!1,...x},y)=>{const[b,k]=f.useState(n),[w,T]=f.useState(s),[j,D]=f.useState(!1),[_,N]=f.useState(!1),[A,P]=f.useState(null),E=f.useRef(null),I=f.useRef(null),M=p[e],O=!!b,F={};d&&(F.required=r("This field is required","kivicare-clinic-management-system"));const{ref:H,...G}=u?u(e,F):{ref:null},z=!!M||!!A,ie=M?.message||A;f.useEffect(()=>{D(typeof window<"u"&&window.wp&&window.wp.media)},[]),f.useEffect(()=>{k(n||""),T(s||"")},[n,s]),f.useEffect(()=>{s&&he(n||"",s)},[s]);const W=async K=>{try{N(!0),P(null);const re=window.kc_frontend?.rest_url,oe=await ve({endpoint:`${re}/wp/v2/media`,method:"POST",data:K,isFile:!0});if(!oe||oe.success===!1)throw new Error(oe?.message||r("Failed to upload image","kivicare-clinic-management-system"));return k(oe.source_url),T(oe.id),he(oe.source_url,oe.id),a&&a({id:oe.id,url:oe.source_url,filename:oe.title?.raw||"",type:oe.media_type,subtype:oe.mime_type,size:oe.media_details?.filesize||0},oe.id),oe}catch(re){throw console.error("Error uploading image:",re),P(re.message||r("Failed to upload image","kivicare-clinic-management-system")),re}finally{N(!1)}},ge=K=>{if(K.preventDefault(),!window.wp||!window.wp.media){I.current&&I.current.click();return}P(null);const re=window.wp.media({title:r("Select or Upload Image","kivicare-clinic-management-system"),button:{text:r("Use this image","kivicare-clinic-management-system")},multiple:!1,library:{type:v?"":"image"}});re.on("select",function(){const oe=re.state().get("selection").first().toJSON();if(!v&&oe.type!=="image"){P(r("Please select an image file","kivicare-clinic-management-system"));return}k(oe.url),T(oe.id),he(oe.url,oe.id),a&&a({id:oe.id,url:oe.url,filename:oe.filename,type:oe.type,subtype:oe.subtype,size:oe.filesizeInBytes},oe.id)}),re.open()},ae=async K=>{const re=K.target.files[0];if(re){if(P(null),!v&&!re.type.startsWith("image/")){P(r("Please select an image file","kivicare-clinic-management-system"));return}try{if(!v||re.type.startsWith("image/")){const oe=URL.createObjectURL(re);k(oe)}else k(re.name);T(""),he(!v||re.type.startsWith("image/")?URL.createObjectURL(re):"",""),a&&a({url:!v||re.type.startsWith("image/")?URL.createObjectURL(re):"",filename:re.name,type:re.type,size:re.size,file:re},""),j||await W(re)}catch(oe){console.error("Error handling file:",oe)}}},U=K=>{if(c){K.preventDefault();return}_||(j?ge(K):I.current&&I.current.click())},X=K=>{if(c){K.preventDefault();return}j?ge(K):I.current&&I.current.click()},J=()=>{k(""),T(""),P(null),he("",""),I.current&&(I.current.value=""),l&&l()};f.useImperativeHandle(y,()=>({clearImage:J}));const he=(K="",re="")=>{if(E.current)try{if(E.current.value=re,G&&typeof G.onChange=="function")try{G.onChange({target:{value:re},currentTarget:{value:re}})}catch{}try{const oe=new Event("input",{bubbles:!0});E.current.dispatchEvent(oe);const C=new Event("change",{bubbles:!0});E.current.dispatchEvent(C)}catch{}}catch{}a&&a({id:re,url:K,filename:"",type:"image",size:0},re);try{typeof h=="function"&&(h(e,K),h(`${e}Id`,re))}catch{}},le=K=>{K.preventDefault(),K.stopPropagation(),!(c||_)&&J()},ee=K=>{E.current=K,H&&H(K)},me=g||(v?void 0:"image/*");return i.jsxs("div",{className:`form-group mb-3 ${o}`,children:[m&&i.jsxs("label",{htmlFor:t,className:"form-label",children:[m,d&&i.jsx("span",{className:"text-danger ms-1",children:"*"})]}),i.jsxs("div",{className:`kc-image-upload ${O?"uploaded":""} ${_?"uploading":""} ${z?"is-invalid":""}`,children:[i.jsx("input",{type:"hidden",id:`${t}-hidden`,...G,value:w||"",ref:ee,readOnly:!0,disabled:c}),i.jsx("input",{type:"file",id:t,className:"kc-image-upload-input d-none",onChange:ae,accept:me,ref:I,disabled:_||c,"aria-invalid":z?"true":"false","aria-describedby":z?`${t}-error`:void 0}),i.jsx("div",{className:`kc-image-upload-label ${z?"border-danger":""}  ${c?"disabled":""}`,onClick:U,style:c?{pointerEvents:"none",opacity:.6}:{},children:O?i.jsxs("span",{className:"kc-image-uploaded-image-container",children:[i.jsx("span",{className:"kc-image-uploaded-image",children:typeof b=="string"&&/\.(jpe?g|png|gif|webp|bmp|svg)$/i.test(b)?i.jsx("img",{src:b,alt:r("uploaded","kivicare-clinic-management-system")}):i.jsx("span",{children:b})}),i.jsxs("div",{className:"upload-actions",children:[i.jsx(Qe,{placement:"top",overlay:i.jsx(ut,{children:r("Edit image","kivicare-clinic-management-system")}),children:i.jsx("button",{className:"edit-upload-btn",onClick:X,disabled:_||c,children:_?i.jsx("div",{className:"spinner-border spinner-border-sm",role:"status",children:i.jsx("span",{className:"visually-hidden",children:r("Uploading...","kivicare-clinic-management-system")})}):i.jsx("i",{className:"ph ph-pencil-simple-line"})})}),i.jsx(Qe,{placement:"top",overlay:i.jsx(ut,{children:r("Remove image","kivicare-clinic-management-system")}),children:i.jsx("button",{className:"remove-upload-btn",onClick:le,disabled:_||c,children:i.jsx("i",{className:"ph ph-x"})})})]})]}):i.jsxs("span",{className:"kc-image-upload-image-container",children:[i.jsx("span",{className:"kc-image-upload-image",children:_?i.jsx("div",{className:"spinner-border text-primary",role:"status",children:i.jsx("span",{className:"visually-hidden",children:r("Uploading...","kivicare-clinic-management-system")})}):v?i.jsx("i",{className:"ph ph-upload-simple"}):i.jsx("i",{className:"ph ph-camera"})}),i.jsx("span",{className:"upload-text",children:_?r("Uploading...","kivicare-clinic-management-system"):j&&!v?r("Choose Image","kivicare-clinic-management-system"):r("Choose file","kivicare-clinic-management-system")})]})}),z&&i.jsx("div",{id:`${t}-error`,className:"invalid-feedback d-block",role:"alert",children:ie})]})]})});ef.propTypes={id:Ae.string,name:Ae.string,defaultImage:Ae.string,defaultImageId:Ae.oneOfType([Ae.string,Ae.number]),onChange:Ae.func,onClear:Ae.func,setValue:Ae.func,className:Ae.string,disabled:Ae.bool,required:Ae.bool,label:Ae.string,register:Ae.func,errors:Ae.object,accept:Ae.string,allowFile:Ae.bool};const Dd=({label:t=r("Select Media","kivicare-clinic-management-system"),value:e,onChange:n,className:s="",preview:a=!0,disabled:l=!1})=>{const o=f.useRef(null),c=f.useRef(null),[d,m]=f.useState(!1),u=async g=>{try{m(!0);const v=window.kc_frontend?.rest_url,x=await ve({endpoint:`${v}/wp/v2/media`,method:"POST",data:g,isFile:!0});if(!x||x.success===!1)throw new Error(x?.message||r("Failed to upload media","kivicare-clinic-management-system"));return n&&n({id:x.id,url:x.source_url,filename:x.title?.raw||"",type:x.media_type,subtype:x.mime_type,size:x.media_details?.filesize||0,width:x.media_details?.width,height:x.media_details?.height}),x}catch(v){console.error("Error uploading media:",v),alert(v.message||r("Failed to upload media","kivicare-clinic-management-system"))}finally{m(!1),c.current&&(c.current.value="")}},h=g=>{if(!window.wp||!window.wp.media){c.current&&c.current.click();return}if(o.current){o.current.open();return}const v=window.wp.media({title:r("Select or Upload Media","kivicare-clinic-management-system"),button:{text:r("Use this media","kivicare-clinic-management-system")},multiple:!1});v.on("select",()=>{const x=v.state().get("selection").first().toJSON();g(x)}),o.current=v,v.open()},p=async g=>{const v=g.target.files[0];v&&await u(v)};return i.jsx(f.Fragment,{children:i.jsxs("div",{className:"row align-items-center",children:[i.jsxs("div",{className:`form-group ${s}`,children:[i.jsx("label",{className:"d-flex align-items-center column-gap-3 row-gap-1 form-check-label h6 font-size-14",children:i.jsx("span",{className:"mb-0 font-size-14",children:t})}),i.jsx("input",{className:"form-control",type:"file",style:{cursor:"pointer"},ref:c,onClick:g=>{window.wp&&window.wp.media&&(g.preventDefault(),h(n))},onChange:p,disabled:l||d})]}),a&&e&&(e.url||typeof e=="string")?i.jsx("div",{className:"mt-2 col-md-6",children:i.jsx("img",{src:typeof e=="string"?e:e.url,alt:"media_preview",className:"img-fluid",style:{maxHeight:100}})}):i.jsx("div",{className:"col-md-6 mt-2",children:i.jsx("p",{className:"double-lines-spinner"})})]})})},di=({text:t,title:e=r("Premium Feature","kivicare-clinic-management-system"),icon:n="ph-lock",className:s="",overlayStyle:a={},contentStyle:l={},link:o=""})=>{const c={position:"absolute",top:0,left:0,right:0,bottom:0,backgroundColor:"#0000009e",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9,borderRadius:8,...a},d={textAlign:"center",padding:"1.5rem",color:"white",...l};return i.jsx("a",{href:o,className:"text-decoration-none",children:i.jsx("div",{style:c,className:s,children:i.jsxs("div",{style:d,children:[i.jsx("div",{className:"mb-4 fs-1",children:i.jsx("i",{className:`ph ${n} text-white`})}),i.jsx("h4",{className:"text-white mb-3",children:e}),i.jsx("p",{className:"text-white",children:t})]})})})},VJ=({fields:t,data:e,title:n})=>{const s=t||[],a=e||{};if(Object.keys(a).length===0)return null;const l=(o,c)=>{if(c==null||c==="")return null;const d=o?.type;if(d==="multi_select"){let m=[];return c.forEach(u=>{m.push(u?.label)}),i.jsx("span",{className:"text-dark",children:m.join(", ")})}if(d==="file_upload"){let m=c;if(typeof c=="string")try{m=JSON.parse(c)}catch{return i.jsx("span",{className:"text-dark",children:c})}if(m&&typeof m=="object"&&m.url)return i.jsx("a",{href:m.url,download:!0,className:"text-primary text-decoration-underline",style:{cursor:"pointer"},children:m.name||r("Download File","kivicare-clinic-management-system")})}return Array.isArray(c)?i.jsx("span",{className:"text-dark",children:c.join(", ")}):typeof c=="object"&&c!==null?c.label?i.jsx("span",{className:"text-dark",children:c.label}):c.value?i.jsx("span",{className:"text-dark",children:c.value}):i.jsx("span",{className:"text-dark",children:JSON.stringify(c)}):i.jsx("span",{className:"text-dark",children:String(c)})};return i.jsxs("div",{className:"mt-4  border-top pt-3",children:[i.jsx("h6",{className:"fw-semibold mb-3",children:n||r("Other Information","kivicare-clinic-management-system")}),Object.entries(a).map(([o,c])=>{const d=s.find(h=>h.id==o),m=d?.name||`${r("Field","kivicare-clinic-management-system")} ${o}`,u=l(d,c);return u?i.jsxs("div",{className:"mb-2",children:[i.jsxs("strong",{children:[m,":"]})," ",u]},o):null})]})};function Zp({trigger:t,children:e,placement:n="bottom"}){const[s,a]=f.useState(!1),l=f.useRef(null),o=()=>{l.current&&clearTimeout(l.current),a(!0)},c=()=>{l.current=setTimeout(()=>{a(!1)},50)},d=m=>i.jsx(Fx,{id:"button-tooltip",...m,className:"contact-card-popover border-0 bg-transparent shadow-none",onMouseEnter:o,onMouseLeave:c,children:i.jsx(Fx.Body,{className:"p-0 border-0 bg-transparent",children:i.jsx("div",{className:"contact-card",style:{pointerEvents:"auto",minWidth:"500px"},children:e})})});return i.jsx(Qe,{placement:n,show:s,overlay:d,trigger:["hover","focus"],children:i.jsx("span",{style:{cursor:"pointer"},onMouseEnter:o,onMouseLeave:c,children:t})})}const Am=({avatar:t,name:e,email:n,phone:s,address:a})=>i.jsxs("div",{className:"contact-card-wrapper",children:[i.jsxs("div",{className:"contact-card-header",children:[t?i.jsx("img",{src:t,className:"contact-card-avatar",alt:e||"Avatar"}):i.jsx("span",{className:"contact-card-avatar-fallback",children:i.jsx(Oc,{alt:e,size:28})}),i.jsx("div",{className:"contact-card-name heading-color",children:e})]}),(n||s)&&i.jsxs("div",{className:"contact-card-row",children:[n&&i.jsxs("div",{className:"contact-card-info-item",children:[i.jsx("i",{className:"ph ph-envelope"}),i.jsx("a",{href:`mailto:${n}`,className:"contact-card-link",children:n})]}),s&&i.jsxs("div",{className:"contact-card-info-item",children:[i.jsx("i",{className:"ph ph-phone"}),i.jsx("span",{children:s})]})]}),a&&i.jsxs("div",{className:"contact-card-info-item",children:[i.jsx("i",{className:"ph ph-map-pin"}),i.jsx("span",{children:a})]})]});Am.propTypes={avatar:Ae.string,name:Ae.string.isRequired,email:Ae.string,phone:Ae.string,address:Ae.string,fallbackIcon:Ae.string};const _w={getCustomFieldsByModule:(t={})=>ve({endpoint:"setting/custom-field/by-module",method:"GET",data:t}),saveCustomFieldData:t=>ve({endpoint:"setting/custom-field/save-data",method:"POST",data:t}),getCustomFieldData:(t={})=>ve({endpoint:"setting/custom-field/get-data",method:"GET",data:t})},Hc={all:["customFields"],byModule:(t,e)=>[...Hc.all,"byModule",t,e],data:(t,e)=>[...Hc.all,"data",t,e]},tP=(t,e=null)=>ft({queryKey:Hc.byModule(t,e),queryFn:()=>_w.getCustomFieldsByModule({module_type:t,...e&&{module_id:e}}),enabled:!!t}),Sw=()=>{const t=ze();return Le({mutationFn:({moduleType:e,moduleId:n,fieldsData:s})=>_w.saveCustomFieldData({module_type:e,module_id:n,fields_data:s}),onSuccess:(e,n)=>{t.invalidateQueries(Hc.data(n.moduleType,n.moduleId)),t.invalidateQueries(Hc.byModule(n.moduleType,n.moduleId))}})},Dy=(t,e,n={})=>ft({queryKey:Hc.data(t,e),queryFn:()=>_w.getCustomFieldData({module_type:t,module_id:e}),enabled:n.enabled!==void 0?n.enabled:!!t&&!!e,...n}),tf=({moduleType:t,moduleId:e=null,control:n,errors:s,setValue:a,watch:l,initialData:o=[]})=>{const[c,d]=f.useState(!1),[m,u]=f.useState(null),{module_config:h={}}=mt()||{};if(h?.custom_fields=="0")return null;const{data:p,isLoading:g,error:v}=tP(t,e),x=Sw(),y=p?.data||[],b=f.useMemo(()=>Array.isArray(o)?o:o&&typeof o=="object"?Object.entries(o).map(([_,N])=>({id:Number(_),value:N})):[],[o]);f.useEffect(()=>{b.length>0&&b.forEach(({id:_,value:N})=>{a(`custom_field_${_}`,N,{shouldDirty:!1,shouldTouch:!1,shouldValidate:!1})})},[b,a]);const k=_=>{const N=b.find(A=>A.id===_);return N?N.value:""},w=_=>_.isRequired==="1"||_.isRequired===!0||_.isRequired===1,T=_=>{if(!t||!e)return;d(!0),u(null);const N={};y.forEach(A=>{const P=`custom_field_${A.id}`,E=_[P];E!==void 0&&(N[A.id]=E)}),x.mutate({moduleType:t,moduleId:e,fieldsData:N},{onSuccess:()=>{u({type:"success",text:r("Custom fields saved successfully","kivicare-clinic-management-system")}),d(!1)},onError:()=>{u({type:"error",text:r("Failed to save custom fields","kivicare-clinic-management-system")}),d(!1)}})};if(!n)return g?i.jsx(Gx,{}):y.length===0?null:i.jsxs("div",{className:"mt-4",children:[i.jsx("h6",{className:"mb-3",children:r("Additional Information","kivicare-clinic-management-system")}),y.map(_=>i.jsxs("div",{className:"mb-3",children:[i.jsxs("div",{className:"font-size-14 text-muted mb-1",children:[_.name,":"]}),i.jsx("input",{type:"text",className:"form-control",value:"",readOnly:!0,placeholder:_.placeholder||"No data"})]},_.id))]});const j=_=>{const N=`custom_field_${_.id}`,A=w(_);switch(_.type){case"text":return i.jsx(ye,{name:N,control:n,defaultValue:k(_.id),rules:{required:A?r("This field is required","kivicare-clinic-management-system"):!1},render:({field:P})=>i.jsx(Ht,{...P,type:"text",label:_.name,placeholder:_.placeholder,required:A,error:s?.[N]?.message})},_.id);case"number":return i.jsx(ye,{name:N,control:n,defaultValue:k(_.id),rules:{required:A?r("This field is required","kivicare-clinic-management-system"):!1},render:({field:P})=>i.jsx(Ht,{...P,type:"text",inputMode:"decimal",label:_.name,placeholder:_.placeholder,required:A,error:s?.[N]?.message,onInput:E=>{E.target.value=E.target.value.replace(/[^0-9.]/g,""),P.onChange(E)}})},_.id);case"textarea":return i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[_.name,A&&i.jsx("span",{className:"input-field-reuquired",children:"*"})]}),i.jsx(ye,{name:N,control:n,defaultValue:k(_.id),rules:{required:A?r("This field is required","kivicare-clinic-management-system"):!1},render:({field:P})=>i.jsx("textarea",{...P,className:"form-control",placeholder:_.placeholder,rows:"4"})}),s&&s[N]&&i.jsx("span",{className:"text-danger p",children:s[N].message})]},_.id);case"select":return i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[_.name,A&&i.jsx("span",{className:"input-field-reuquired",children:"*"})]}),i.jsx(ye,{name:N,control:n,defaultValue:k(_.id),rules:{required:A?r("This field is required","kivicare-clinic-management-system"):!1},render:({field:P})=>i.jsx(ct,{...P,options:_.options.map(E=>({value:E.value||E.id||E,label:E.label||E.text||E})),placeholder:_.placeholder||r("Select an option","kivicare-clinic-management-system"),isClearable:!0,styles:{menuPortal:E=>({...E,zIndex:9999})}})}),s&&s[N]&&i.jsx("span",{className:"text-danger p",children:s[N].message})]},_.id);case"multi_select":return i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[_.name,A&&i.jsx("span",{className:"input-field-reuquired",children:"*"})]}),i.jsx(ye,{name:N,control:n,defaultValue:k(_.id),rules:{required:A?r("This field is required","kivicare-clinic-management-system"):!1},render:({field:P})=>i.jsx(ct,{...P,isMulti:!0,options:_.options.map(E=>({value:E.value||E,label:E.label||E})),placeholder:_.placeholder||r("Select options","kivicare-clinic-management-system"),isClearable:!0,styles:{menuPortal:E=>({...E,zIndex:9999})}})}),s&&s[N]&&i.jsx("span",{className:"text-danger p",children:s[N].message})]},_.id);case"radio":return i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[_.name,A&&i.jsx("span",{className:"input-field-reuquired",children:"*"})]}),i.jsx(ye,{name:N,control:n,defaultValue:k(_.id),rules:{required:A?r("This field is required","kivicare-clinic-management-system"):!1},render:({field:P})=>i.jsx("div",{className:"d-flex flex-wrap gap-3",children:_.options.map((E,I)=>i.jsxs("div",{className:"form-check",children:[i.jsx("input",{...P,type:"radio",className:"form-check-input",id:`${N}_${I}`,value:E.value||E,checked:P.value===(E.value||E)}),i.jsx("label",{className:"form-check-label",htmlFor:`${N}_${I}`,children:E.label||E})]},I))})}),s&&s[N]&&i.jsx("span",{className:"text-danger p",children:s[N].message})]},_.id);case"checkbox":return i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[_.name,A&&i.jsx("span",{className:"input-field-reuquired",children:"*"})]}),i.jsx(ye,{name:N,control:n,defaultValue:k(_.id),rules:{required:A?r("This field is required","kivicare-clinic-management-system"):!1},render:({field:P})=>i.jsx("div",{className:"d-flex flex-wrap gap-3",children:_.options.map((E,I)=>i.jsxs("div",{className:"form-check",children:[i.jsx("input",{type:"checkbox",className:"form-check-input",id:`${N}_${I}`,value:E.value||E,checked:(P.value||[]).includes(E.value||E),onChange:M=>{const O=P.value||[],F=E.value||E;M.target.checked?P.onChange([...O,F]):P.onChange(O.filter(H=>H!==F))}}),i.jsx("label",{className:"form-check-label",htmlFor:`${N}_${I}`,children:E.label||E})]},I))})}),s&&s[N]&&i.jsx("span",{className:"text-danger p",children:s[N].message})]},_.id);case"calendar":return i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[_.name,A&&i.jsx("span",{className:"input-field-reuquired",children:"*"})]}),i.jsx(ye,{name:N,control:n,defaultValue:k(_.id),rules:{required:A?r("This field is required","kivicare-clinic-management-system"):!1},render:({field:P})=>i.jsxs("div",{className:"input-group",children:[i.jsx(Un,{className:`form-control ps-3 pe-5 ${s?.[N]?"is-invalid":""}`,placeholder:_.placeholder,options:{dateFormat:xi(window.kc_frontend.date_format),disableMobile:!0,locale:Wn()},value:P.value?Zn(P.value):"",onChange:E=>{const I=E[0]?La(E[0]):"";P.onChange(I)}}),i.jsx("span",{className:"input-group-text",children:i.jsx("i",{className:"ph ph-calendar"})})]})},_.id),s&&s[N]&&i.jsx("span",{className:"text-danger p",children:s[N].message})]},_.id);case"file_upload":return i.jsx(ye,{name:N,control:n,defaultValue:k(_.id),rules:{required:A?r("This field is required","kivicare-clinic-management-system"):!1},render:({field:P})=>{const E=P.value,I=E&&(E.url||E.name),M=_.file_upload_type&&Array.isArray(_.file_upload_type)?_.file_upload_type.map(O=>O.id||O.value||O).join(","):"";return i.jsx(cu,{id:`custom-field-${_.id}`,name:N,label:_.name,accept:M,required:A,defaultFile:I?E.url:"",defaultFileId:I?E.id:"",onChange:(O,F)=>{P.onChange({id:F,url:O.url,name:O.filename||O.name})},errors:s})}},_.id);default:return null}};if(g)return i.jsx(Gx,{});if(y.length===0)return null;const D=t==="patient_encounter_module";return i.jsx("div",{className:"card mt-4",children:i.jsxs("div",{className:"card-body",children:[i.jsx("h6",{className:"mb-3",children:r("Additional Information","kivicare-clinic-management-system")}),i.jsx("div",{className:"row gy-4",children:y.map(_=>i.jsx("div",{className:"col-lg-6",children:j(_)},_.id))}),D&&i.jsxs("div",{className:"mt-4",children:[m&&i.jsx("div",{className:`alert alert-${m.type==="success"?"success":"danger"} mb-3`,children:m.text}),i.jsx("button",{type:"button",className:"btn btn-primary",disabled:c,onClick:()=>T(l()),children:c?i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),r("Saving...","kivicare-clinic-management-system")]}):r("Save","kivicare-clinic-management-system")})]})]})})},Ew=f.createContext();function Rpe({children:t}){const[e,n]=f.useState([]),[s,a]=f.useState(!1),l=(d,m={})=>{const u=Date.now(),h={id:u,message:d,type:m.type||"success",position:m.position||"bottom-center",duration:m.duration||5e3,showIcon:m.showIcon!==!1,dismissible:m.dismissible!==!1};return n(p=>[h]),a(!0),h.duration>0&&setTimeout(()=>{a(!1),setTimeout(()=>n([]),300)},h.duration),u},o=()=>{a(!1),setTimeout(()=>n([]),300)},c={success:(d,m)=>l(d,{...m,type:"success"}),error:(d,m)=>l(d,{...m,type:"danger"}),warning:(d,m)=>l(d,{...m,type:"warning"}),info:(d,m)=>l(d,{...m,type:"info"}),dismiss:o};return i.jsx(Ew.Provider,{value:{toast:c,toasts:e,visible:s,onDismiss:o},children:t})}function Ppe(){const t=f.useContext(Ew);if(!t)return console.warn("ToastContainer must be used within a ToastProvider"),null;const{toasts:e,visible:n,onDismiss:s}=t,a=e[0];return a?i.jsx("div",{className:`alert-container alert-widget-container ${n?"visible":""}`,children:i.jsx("div",{className:`alert alert-popup alert-${a.type} alert-left`,onClick:a.dismissible?s:void 0,children:i.jsxs("div",{className:"alert-content",children:[a.showIcon&&i.jsxs("span",{className:"alert-icon",children:[a.type==="success"&&"",a.type==="danger"&&"",a.type==="warning"&&"",a.type==="info"&&""]}),i.jsx("span",{className:"alert-message",children:a.message}),a.dismissible&&i.jsx("button",{className:"alert-close",onClick:l=>{l.stopPropagation(),s()},title:"Dismiss",children:""})]})})}):null}function UJ(){const t=f.useContext(Ew);if(!t)throw new Error("useToast must be used within a ToastProvider");return t.toast}const WJ=({disabled:t=!1,isUploading:e=!1,wpMediaAvailable:n=!1,onFilesSelect:s,onClick:a})=>{const l=!n,o=t||e,c=d=>{if(!l||o)return;d.preventDefault(),d.currentTarget.classList.remove("drag-over");const m=Array.from(d.dataTransfer.files);m.length&&s(m)};return i.jsxs("div",{className:`kc-dropzone ${o?"disabled":""}`,onClick:o?void 0:a,onDragOver:d=>{!l||o||(d.preventDefault(),d.currentTarget.classList.add("drag-over"))},onDragLeave:d=>{!l||o||(d.preventDefault(),d.currentTarget.classList.remove("drag-over"))},onDrop:c,children:[i.jsx("style",{children:`.kc-dropzone {
                    position: relative;
                }

                /* Loader overlay */
                .kc-dropzone-loader {
                    position: absolute;
                    inset: 0;
                    background: rgba(255, 255, 255, 0.85);
                    display: flex;
                    flex-direction: column;
                    justify-content: center;
                    align-items: center;
                    z-index: 2;
                    border-radius: 8px;
                }

                /* Spinner */
                .kc-spinner {
                    width: 32px;
                    height: 32px;
                    border: 3px solid #e5e7eb;
                    border-top-color: #4f46e5;
                    border-radius: 50%;
                    animation: kc-spin 0.8s linear infinite;
                    margin-bottom: 10px;
                }

                @keyframes kc-spin {
                    to {
                        transform: rotate(360deg);
                    }
                }
                `}),e&&i.jsxs("div",{className:"kc-dropzone-loader",children:[i.jsx("span",{className:"kc-spinner"}),i.jsx("p",{className:"kc-uploading-text",children:r("Uploading...","kivicare-clinic-management-system")})]}),!e&&i.jsxs("div",{className:"kc-dropzone-content",children:[i.jsx("i",{className:"ph ph-upload-simple kc-upload-icon"}),i.jsxs("p",{className:"kc-dropzone-text",children:[i.jsx("strong",{children:r("Choose Image","kivicare-clinic-management-system")}),!n&&i.jsxs(i.Fragment,{children:[" ",r("or drag & drop","kivicare-clinic-management-system")]})]}),!n&&i.jsx("small",{className:"kc-dropzone-hint",children:r("Support: JPG, PNG, JPEG, PDF, Doc","kivicare-clinic-management-system")})]})]})},KJ=({id:t="kc-multi-file-upload",name:e="files",label:n=r("Upload Documents","kivicare-clinic-management-system"),defaultFiles:s=[],setValue:a,disabled:l=!1,required:o=!1,allowFile:c=!0,widgetId:d=null,isEdit:m=!1})=>{let u;try{u=UJ()}catch{u={error:console.error,success:console.log}}const[h,p]=f.useState([]);f.useEffect(()=>{m&&p(s)},[s]);const[g,v]=f.useState(!1),[x,y]=f.useState(!1),[b,k]=f.useState(!0),w=f.useRef(null);f.useEffect(()=>{y(typeof window<"u"&&window.wp&&window.wp.media),console.log(x,"wpMediaAvailable")},[]);const T=A=>{p(A),a?.(e,A,{shouldValidate:!0})},j=async A=>{const P=window.kc_frontend?.rest_url;let E=`${P}/wp/v2/media`,I="",M={};d&&(E=`${P}kivicare/v1/frontend/kc-book-appointment/upload-medical-report`,I=window.kc_frontend.nonce,M["Media-Nonce"]=I);try{const O=await ve({endpoint:E,method:"POST",data:A,isFile:!0,headers:M}),F=O.data||O;return{id:F.id,url:F.source_url||F.url,filename:A.name||F.filename||F.title?.raw,type:F.media_type||F.type,size:F.media_details?.filesize||F.size||A.size}}catch(O){return u.error(O?.response?.data?.message||O?.message||r("File upload failed","kivicare-clinic-management-system")),null}},D=async A=>{if(!A.length)return;v(!0);const P=[];for(let E of A){const I=await j(E);I&&P.push(I)}P.length&&(T([...h,...P]),u.success(r("Files uploaded successfully","kivicare-clinic-management-system")),x||k(!1)),v(!1),w.current&&(w.current.value="")},_=()=>{if(!x){k(!0);return}const A=window.wp.media({title:r("Select or Upload Files","kivicare-clinic-management-system"),button:{text:r("Use These Files","kivicare-clinic-management-system")},multiple:!0,library:{type:c?"":"image"}});A.on("select",()=>{const E=A.state().get("selection").toJSON().map(I=>({id:I.id,url:I.url,filename:I.filename,type:I.type,size:I.filesizeInBytes}));T([...h,...E])}),A.open()},N=A=>{T(h.filter((P,E)=>E!==A))};return i.jsxs("div",{className:"form-group",id:t,children:[i.jsx("style",{children:`
                .kc-dropzone {
                    border: 2px dashed #d0d5dd;
                    background: #f9fafb;
                    padding: 40px;
                    text-align: center;
                    cursor: pointer;
                    border-radius: 8px;
                    transition: 0.2s ease;
                }

                .kc-dropzone.drag-over {
                    border-color: #4f46e5;
                    background: #eef2ff;
                }

                .kc-dropzone.disabled {
                    opacity: 0.6;
                    pointer-events: none;
                }

                .kc-upload-icon {
                    font-size: 28px;
                    margin-bottom: 10px;
                    display: block;
                }

                .kc-dropzone-text {
                    font-size: 15px;
                }

                .kc-dropzone-text strong {
                    color: #ef4444;
                }

                .kc-dropzone-hint {
                    font-size: 12px;
                    color: #667085;
                }

                .kc-uploading-text {
                    margin-top: 8px;
                    color: #4f46e5;
                    font-size: 13px;
                }

                .kc-uploaded-files {
                    margin-top: 16px;
                }

                .kc-uploaded-file {
                    background: #f9fafb;
                    border-radius: 6px;
                    padding: 12px 14px;
                    display: flex;
                    justify-content: space-between;
                    align-items: center;
                    margin-bottom: 10px;
                }

                .kc-file-name {
                    font-size: 14px;
                    color: #344054;
                }

                .kc-file-delete {
                    background: transparent;
                    border: none;
                    color: #ef4444;
                    cursor: pointer;
                    font-size: 16px;
                }
                `}),i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[i.jsxs("label",{className:"form-label mb-0",children:[n,o&&i.jsx("span",{className:"text-danger",children:"*"})]}),(x||!b)&&m===!1&&i.jsx("button",{type:"button",className:"iq-button iq-button-primary btn btn-sm btn-primary",onClick:_,disabled:l||g,children:r("Add Documents","kivicare-clinic-management-system")})]}),i.jsx("input",{id:"kc-hidden-file-input",type:"file",className:"d-none",multiple:!0,ref:w,disabled:l||g,onChange:A=>D(Array.from(A.target.files))}),!x&&b&&i.jsx(WJ,{disabled:l,isUploading:g,wpMediaAvailable:x,onFilesSelect:D,onClick:()=>{console.log("ASDFsdfdfsdf",w),w.current?.click(),!l&&w.current}}),h.length>0&&i.jsx("div",{className:"kc-uploaded-files mt-3",children:h.map((A,P)=>i.jsxs("div",{className:"kc-uploaded-file",children:[i.jsx("span",{className:"kc-file-name",children:A.filename}),i.jsxs("div",{className:"kc-file-actions",children:[i.jsx("a",{className:"me-2",href:A.url,target:"_blank",rel:"noopener noreferrer",children:i.jsx("i",{className:"ph ph-eye"})}),i.jsx("button",{type:"button",className:"kc-file-delete",onClick:()=>N(P),children:i.jsx("i",{className:"ph ph-trash"})})]})]},P))})]})},Xp=({isEditing:t=!1,patientId:e=!1})=>{f.useEffect(()=>{const ue=new URLSearchParams(window.location.search),Te=ue.get("payment_status"),Ie=ue.get("message");if(Te&&Ie){Se[Te==="cancelled"?"error":"info"](decodeURIComponent(Ie),{position:"top-right",autoClose:5e3});const qe=window.location.pathname;window.history.replaceState({},"",qe)}},[]);const{id:n}=Yt(),s=f.useRef(null),a=f.useRef(null),l=f.useRef({}),o=ze(),{getPriceFormat:c,appointmentDescription:d,is_uploadfile_appointment:m,pre_book:u,post_book:h,only_same_day_book:p,isAddonActive:g,hasCapability:v,currentClinicId:x,currentDoctorId:y,defaultClinicId:b,currentUser:k,patientUniqueIdSetting:w}=mt(),T=Kn(),j=hn(),{prefetchClinics:D}=H7();f.useEffect(()=>{D()},[D]);const _=Li(),N=Yi(),A=Xn(),P=Jn(),E=g("kiviPro"),I=new Date;I.setHours(0,0,0,0);const M=T.state?.patientId,O=e||M,[F,H]=f.useState(!1),[G,z]=f.useState(null),ie=f.useRef([]),{data:W,isLoading:ge,error:ae}=rX(n,{enabled:t&&!!n}),U=W?.data,X=oX(),J=cX(),[he,le]=f.useState(!1),ee=he||X.isPending||J.isPending||ge,me=f.useMemo(()=>{if(E){if((P||A)&&(x||b)){const ue=x||b;return{value:ue,label:ue}}}else if(b)return{value:b,label:b};return null},[P,A,E,t,x,b]),{register:K,handleSubmit:re,control:oe,watch:C,setValue:R,getValues:te,formState:{errors:ne}}=en({defaultValues:{clinic:me,doctor:null,service:null,patient:null,appointmentDate:"",appointmentSlot:"",status:{value:"1",label:r("Booked","kivicare-clinic-management-system")},description:""}}),Y=C("clinic"),q=C("doctor"),B=C("service"),se=C("appointmentDate"),Q=C("appointmentSlot"),pe=y,$=x,{data:ce,isLoading:De}=lX({doctor_id:q?.value||pe,clinic_id:Y?.value||$||(E?null:0),service_id:B?.map(ue=>ue.id)||[],date:se,appointment_id:t?n:null});let xe=!1;B?.length&&(E?_?xe=!!(Y?.value||$):P||A?xe=!!(q?.value||pe):xe=!!((q?.value||pe)&&(Y?.value||$)):xe=!!(q?.value||pe));const{data:Re,isLoading:nt,isError:Pe,error:Ue}=pX({doctorId:q?.value||pe,clinicId:Y?.value||$||(E?null:0),services:B?.map(ue=>ue.id)||[]},{enabled:xe}),{data:Je,isLoading:et}=kn("settings","appointment-setting"),Be=f.useMemo(()=>{if(!Je?.data)return{minDate:null,maxDate:null};const{only_same_day_book:ue,pre_book:Te,post_book:Ie}=Je.data,qe=[!0,"true",1,"1","on","yes"].includes(ue),$e=Rn();if(qe){const Xe=$e.format("YYYY-MM-DD");return{minDate:Xe,maxDate:Xe}}return{minDate:$e.add(parseInt(Te)||0,"day").format("YYYY-MM-DD"),maxDate:$e.add(parseInt(Ie)||365,"day").format("YYYY-MM-DD")}},[Je]),{data:ke}=_J({clinic_id:A||P?x:Y?.value||$||(E?null:0),doctor_id:q?.value||pe},{enabled:!!(q?.value||pe)&&(!!Y?.value||!!$||!E||A||P)}),_e=f.useRef({}),Ye=f.useRef(null),tt=f.useCallback(async(ue,Te)=>{const Ie=q?.value||pe,qe=Y?.value||$||(E?null:0),$e=B?.map(bt=>bt.id)||service||[];if(!Ie||!$e.length)return;const Xe=`${ue}-${String(Te).padStart(2,"0")}`;try{const bt={doctor_id:Ie,clinic_id:qe,service_id:$e,date:Xe},Gt=await o.fetchQuery({queryKey:Cn.availableSlots(bt),queryFn:()=>Bi.getAvailableSlots(bt),staleTime:1e3*60*5});Gt?.data?.dates&&(Object.entries(Gt.data.dates).forEach(([$n,ti])=>{const vs=`${Ie}-${qe}-${$n}`;_e.current[vs]={total_count:ti.total_count,available_count:ti.available_count,date:ti.date,day_of_week:ti.day_of_week}}),Ye.current?.flatpickr&&Ye.current.flatpickr.redraw())}catch(bt){console.error("Error fetching month slots:",bt)}},[q,Y,B,pe,$,E,o]),zt=ke?.data??{},{data:Ft}=ad({module_type:"appointment_module",status:1,module_id:n},{enabled:g("kiviPro")&&!!(Y?.value||$)}),Qt=Re?.data,xt=f.useMemo(()=>{const ue=Ft?.data?.forms||[],Te=Y?.value||$;return Te?ue.filter(Ie=>{const qe=Ie.conditions?.clinics||[];return qe.length===0||qe.includes(parseInt(Te))}):[]},[Ft,Y,$]),Ee=()=>{xt.forEach(ue=>{const Te=document.querySelector(`#custom-forms-tabs-tab-${ue.id}`);Te&&(ie.current.map(Ie=>parseInt(Ie)).includes(parseInt(ue.id))?Te.classList.add("form-error-block"):Te.classList.remove("form-error-block"))})},Oe=async()=>{const ue={};let Te=!0,Ie=null;for(const $e of xt){const Xe=l.current[$e.id];if(Xe){const bt=await Xe.triggerValidation();ue[$e.id]={isValid:bt.isValid,data:Xe.getFormData(),errors:bt.errors},bt.isValid||(Te=!1,Ie||(Ie=$e.id))}}const qe=Object.keys(ue).filter($e=>!ue[$e].isValid);return ie.current=qe,Ee(),{allValid:Te,formResults:ue,firstInvalidFormId:Ie}},V=()=>{const ue={};return xt.forEach(Te=>{const Ie=l.current[Te.id];Ie&&(ue[Te.id]=Ie.getFormData())}),ue},Z=[{value:"1",label:r("Booked","kivicare-clinic-management-system")},{value:"4",label:r("Check In","kivicare-clinic-management-system")},{value:"3",label:r("Check Out","kivicare-clinic-management-system")},{value:"2",label:r("Pending","kivicare-clinic-management-system")},{value:"0",label:r("Cancelled","kivicare-clinic-management-system")}],fe=async({page:ue,per_page:Te,search:Ie})=>{try{const qe={dataType:"clinicList",page:ue,per_page:Te,search:Ie};return await o.fetchQuery({queryKey:pt.list(qe),queryFn:()=>Dt.getStaticData(qe),staleTime:300*1e3})}catch(qe){return console.error("Error loading clinics:",qe),{data:[],pagination:{total:0,per_page:10,current_page:1,total_pages:0,has_more:!1}}}},Ce=async({page:ue,per_page:Te,search:Ie,clinic_ids:qe})=>{try{const $e={dataType:"staticData",staticDataType:"doctors",clinic_ids:qe,page:ue,per_page:Te,search:Ie};return await o.fetchQuery({queryKey:pt.list($e),queryFn:()=>Dt.getStaticData($e),staleTime:300*1e3})}catch($e){return console.error("Error loading doctors:",$e),{data:[],pagination:{total:0,per_page:10,current_page:1,total_pages:0,has_more:!1}}}},Ke=async({page:ue,per_page:Te,search:Ie,clinic_ids:qe})=>{try{const $e={dataType:"staticData",staticDataType:"patients",clinic_ids:qe,page:ue,per_page:Te,search:Ie};return await o.fetchQuery({queryKey:pt.list($e),queryFn:()=>Dt.getStaticData($e),staleTime:300*1e3})}catch($e){return console.error("Error loading patients:",$e),{data:[],pagination:{total:0,per_page:10,current_page:1,total_pages:0,has_more:!1}}}},it=f.useCallback(async({page:ue,per_page:Te,search:Ie,clinic_id:qe,doctor_id:$e})=>{console.log(" loadServiceOptions called with:",{page:ue,per_page:Te,search:Ie,clinic_id:qe,doctor_id:$e});try{const Xe={dataType:"staticData",staticDataType:"servicesWithPrice",clinic_id:qe,doctor_id:$e,page:ue,per_page:Te,search:Ie};console.log(" Query key:",pt.list(Xe));const bt=await o.fetchQuery({queryKey:pt.list(Xe),queryFn:()=>Dt.getStaticData(Xe),staleTime:0});return console.log(" Services loaded:",bt),bt}catch(Xe){return console.error(" Error loading services:",Xe),{data:[],pagination:{total:0,per_page:10,current_page:1,total_pages:0,has_more:!1}}}},[o]),at=ce?.data?.slots_by_session||[],ot=f.useMemo(()=>{if(!at||at.length===0)return!1;const ue=Rn();let Te=!1,Ie=!1;for(const qe of at)if(qe&&qe.length>0){Ie=!0;for(const $e of qe)if($e.datetime){if(Rn($e.datetime).isAfter(ue)||$e.available===!0){Te=!0;break}}else if($e.available===!0){Te=!0;break}if(Te)break}return Ie&&!Te},[at]),Nt=f.useMemo(()=>at&&at.length>0&&at.some(ue=>ue&&ue.length>0)&&!ot,[at,ot]);if(f.useEffect(()=>{if((q?.value||pe)&&B?.length){const ue=new Date,Te=ue.getFullYear(),Ie=ue.getMonth()+1;_e.current={},tt(Te,Ie)}},[q,B,pe,tt]),f.useEffect(()=>{if(t&&U&&!ge){if(R("clinic",{value:U.clinicId,label:U.clinicName}),R("doctor",{value:U.doctorId,label:U.doctorName}),R("patient",{value:U.patientId,label:U.patientName}),U.service_list&&U.service_list.length>0){const ue=U.service_list.map(Te=>({value:Te.id,label:Te.title,id:Te.id,price:Te.price}));R("service",ue)}R("description",U.description||""),R("appointmentDate",U.appointmentStartDate),R("appointmentSlot",U.appointmentFormatedStartTime),N?R("status",{value:"1",label:r("Booked","kivicare-clinic-management-system")}):R("status",Nw(Z,U.status))}},[t,U,ge]),f.useEffect(()=>{if(t)return;const ue=O;if(!ue)return;let Te=!1;return(async()=>{try{const qe={dataType:"staticData",staticDataType:"patients",patient_id:ue,page:1,per_page:1},$e=await o.fetchQuery({queryKey:pt.list(qe),queryFn:()=>Dt.getStaticData(qe),staleTime:300*1e3});if(Te)return;const Xe=$e?.data||$e?.data?.data||[],bt=Array.isArray(Xe)?Xe[0]:null;if(bt){const Gt=bt.label||bt.display_name||`${bt.first_name||""} ${bt.last_name||""}`.trim()||bt.name||bt.fullName||String(bt.id);R("patient",{value:bt.id||ue,label:Gt})}else R("patient",{value:ue,label:String(ue)})}catch{R("patient",{value:ue,label:String(ue)})}})(),()=>{Te=!0}},[O,t,o,R]),f.useEffect(()=>{t&&U?.custom_fields&&R&&Object.keys(U.custom_fields).forEach(ue=>{R(`custom_field_${ue}`,U.custom_fields[ue])})},[t,U?.custom_fields,R]),t&&ae)return i.jsxs("div",{className:"alert alert-danger bg-danger-subtle",role:"alert",children:[i.jsx("h6",{className:"alert-heading",children:r("Error Loading Appointment Data","kivicare-clinic-management-system")}),i.jsx("p",{className:"mb-0",children:r("Unable to load appointment information. Please try again.","kivicare-clinic-management-system")}),i.jsx("hr",{}),i.jsx("button",{className:"btn btn-outline-danger btn-sm",onClick:()=>j(-1),children:r("Back to Appointments","kivicare-clinic-management-system")})]});const dt=async ue=>{if(le(!0),xt.length>0)if((await Oe()).allValid)ie.current=[],Ee();else{Se.error(r("Please fix errors in the additional information forms before submitting","kivicare-clinic-management-system"),{position:"top-right",autoClose:5e3}),le(!1);return}const Te={};Object.keys(ue).forEach(qe=>{if(qe.startsWith("custom_field_")){const $e=qe.replace("custom_field_","");Te[$e]=ue[qe]}});const Ie={tax_data:Qt.applied_taxes,clinicId:ue.clinic?.value||((P||A)&&E?x||b:E?null:b),doctorId:ue.doctor?.value,patientId:ue.patient?.value,serviceId:ue.service?.map(qe=>qe.id),appointmentStartDate:ue.appointmentDate,appointmentStartTime:ue.appointmentSlot,status:ue.status?.value||ue.status,description:ue.description||"",customForm:V(),customFields:Te,appointmentFile:ue?.appointmentFile};ue.appointmentFiles&&ue.appointmentFiles.length>0&&(Ie.appointmentFileId=ue.appointmentFiles.map(qe=>qe.id));try{if(t){let qe=await J.mutateAsync({id:n,...Ie});Se.success(qe.message||r("Appointment updated successfully","kivicare-clinic-management-system"),{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0}),j("/appointments")}else if(N)z({clinicName:ue.clinic?.label,doctorName:ue.doctor?.label,service:ue.service,date:ue.appointmentDate,time:ue.appointmentSlot,grandTotal:Qt?.grand_total,customFormData:V(),customFieldData:Te}),H(!0);else{let qe=await X.mutateAsync(Ie);console.log("Create response",qe),Se.success(qe.message||r("Appointment created successfully","kivicare-clinic-management-system"),{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0}),j(e==!1?"/appointments":"/patient/profile/"+e+"/appointments/")}}catch(qe){console.error("Error saving appointment:",qe);const $e=qe?.response?.data?.message||(t?r("Failed to update appointment","kivicare-clinic-management-system"):r("Failed to create appointment","kivicare-clinic-management-system"));Se.error($e,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0})}finally{le(!1)}},jt=async()=>{le(!0);const ue=te();N&&k&&k.id&&(ue.patient={value:k.id,label:k.display_name||k.user_email});const Te={};Object.keys(ue).forEach($e=>{if($e.startsWith("custom_field_")){const Xe=$e.replace("custom_field_","");Te[Xe]=ue[$e]}});const Ie=V(),qe={clinicId:ue.clinic?.value||((P||A)&&E?x||b:E?null:b),doctorId:ue.doctor?.value,patientId:ue.patient?.value,serviceId:ue.service?.map($e=>$e.id),appointmentStartDate:ue.appointmentDate,appointmentStartTime:ue.appointmentSlot,status:ue.status?.value||ue.status,description:ue.description||"",paymentGateway:ue.payment_gateway||null,customForm:Ie,customFields:Te,tax_data:Qt.applied_taxes};ue.appointmentFiles&&ue.appointmentFiles.length>0&&(qe.appointmentFileId=ue.appointmentFiles.map($e=>$e.id)),X.mutateAsync(qe).then($e=>{o.invalidateQueries({queryKey:["appointments"]});const Xe=$e?.data?.payment_response?.gateway,bt=$e?.data?.payment_response?.data,Gt=bt?.redirect_url||bt?.payment_url;switch(Xe?.startsWith("knit_pay")?"knit_pay":Xe){case"paypal":case"woocommerce":case"knit_pay":Gt?window.location.href=Gt:Se.error(r("Payment gateway did not provide a redirect URL.","kivicare-clinic-management-system"));break;case"stripe":s?.current?.updateAppointmentData($e?.data),H(!1);break;case"razorpay":a?.current?.updateAppointmentData($e?.data),H(!1);break;case"manual":default:Se.success($e.message||r("Appointment created successfully","kivicare-clinic-management-system"),{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0}),H(!1),Gt||j("/appointments");break}}).catch($e=>{console.error("Error confirming appointment:",$e),Se.error($e?.response?.data?.message||r("Failed to create appointment","kivicare-clinic-management-system"),{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0})}).finally(()=>{le(!1)})},Wt=async ue=>{const Te=Object.keys(ue)[0],{formResults:Ie,firstInvalidFormId:qe}=await Oe();let $e=null;if(Te&&($e=document.getElementById(Te),$e)){$e.scrollIntoView({behavior:"smooth",block:"center"}),$e.focus();return}if(qe&&($e=document.getElementById(`custom-form-${qe}`),$e)){$e.scrollIntoView({behavior:"smooth",block:"center"});const Xe=document.querySelector(`[data-rb-event-key="${qe}"]`);Xe&&Xe.click()}},be={clinic:{required:E&&!P&&!A?r("Clinic is required","kivicare-clinic-management-system"):!1},doctor:{required:r("Doctor is required","kivicare-clinic-management-system")},service:{required:r("Service is required","kivicare-clinic-management-system")},patient:{required:r("Patient is required","kivicare-clinic-management-system")},appointmentDate:{required:r("Appointment date is required","kivicare-clinic-management-system"),validate:ue=>{if(!ue)return!0;const[Te,Ie,qe]=ue.split("-").map(Number);return new Date(Te,Ie-1,qe)>=I||r("Appointment date cannot be in the past","kivicare-clinic-management-system")}},appointmentSlot:{required:r("Appointment slot is required","kivicare-clinic-management-system")},status:{required:r("Status is required","kivicare-clinic-management-system")}};return t&&ge?i.jsx(Cy,{}):i.jsxs(i.Fragment,{children:[e==!1&&i.jsxs("div",{className:"d-flex justify-content-between align-items-center gap-3 flex-wrap mb-4",children:[i.jsx(_i,{}),i.jsx("div",{children:i.jsx(ei,{size:"sm"})})]}),i.jsx("div",{className:"d-flex align-items-center justify-content-between flex-wrap row-gap-2 column-gap-3 mb-4",children:i.jsx("div",{className:"page-title",children:i.jsx("h6",{className:"m-0",children:t?r("Edit Appointment","kivicare-clinic-management-system"):r("Add Appointment","kivicare-clinic-management-system")})})}),i.jsx("div",{className:"position-relative",children:i.jsxs("div",{className:"row",children:[i.jsx("div",{className:"col-lg-8",children:i.jsxs("form",{onSubmit:re(dt,Wt),className:"mb-0",children:[i.jsx("div",{className:"card",children:i.jsx("div",{className:"card-body",children:i.jsxs("div",{className:"row gy-4",children:[!P&&!A&&E&&i.jsx("div",{className:"col-md-6 col-lg-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[r("Select Clinic","kivicare-clinic-management-system"),i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx(ye,{name:"clinic",control:oe,rules:be.clinic,render:({field:ue})=>i.jsx(rn,{id:"clinic",loadOptions:fe,value:ue.value,onChange:Te=>{ue.onChange(Te),R("doctor",null),R("service",null)},placeholder:r('eg "Mount Health Care"',"kivicare-clinic-management-system"),className:`react-select-box ${ne.clinic?"is-invalid":""}`,classNamePrefix:"react-select",isDisabled:t,dependencies:{}})}),ne.clinic&&i.jsx("div",{className:"invalid-feedback d-block",children:ne.clinic.message})]})}),!_&&i.jsx("div",{className:"col-md-6 col-lg-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[r("Select Doctor","kivicare-clinic-management-system"),i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx(ye,{name:"doctor",control:oe,rules:be.doctor,render:({field:ue})=>i.jsx(rn,{id:"doctor",loadOptions:Ce,value:ue.value,onChange:Te=>{ue.onChange(Te),R("service",null),R("appointmentSlot",""),o.invalidateQueries({queryKey:["staticData","servicesWithPrice"]})},placeholder:C("clinic")?.value?r('eg "Mark Martin"',"kivicare-clinic-management-system"):r("Select Clinic First","kivicare-clinic-management-system"),className:`react-select-box ${ne.doctor?"is-invalid":""}`,classNamePrefix:"react-select",isDisabled:t||ge||!C("clinic")?.value,dependencies:{clinic_ids:C("clinic")?.value}},`doctor-${C("clinic")?.value}`)}),ne.doctor&&i.jsx("div",{className:"invalid-feedback d-block",children:ne.doctor.message})]})}),i.jsx("div",{className:"col-md-6 col-lg-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between gap-1 flex-wrap label-action-wrapper",children:[i.jsxs("label",{className:"form-label",children:[r("Select Service","kivicare-clinic-management-system"),i.jsx("span",{className:"text-danger",children:"*"})]}),!(t||N)&&i.jsx(ht,{to:"/service/add",className:"label-action fw-semibold font-size-12",children:r("Add Service","kivicare-clinic-management-system")})]}),i.jsx(ye,{name:"service",control:oe,rules:be.service,render:({field:ue})=>{const Te=ue.value?.some(Xe=>Xe?.allow_multiple),Ie=Xe=>{if(!Xe){ue.onChange([]);return}const bt=Array.isArray(Xe)?Xe:[Xe],Gt=bt.some($n=>!$n.allow_multiple);ue.onChange(Gt?[bt.find($n=>!$n.allow_multiple)]:bt)},qe=_?y:C("doctor")?.value,$e=C("clinic")?.value;return i.jsx(rn,{id:"service",loadOptions:it,value:ue.value,onChange:Ie,placeholder:qe?r('eg "Checkup"',"kivicare-clinic-management-system"):r("Select Doctor First","kivicare-clinic-management-system"),className:`react-select-box ${ne.service?"is-invalid":""}`,classNamePrefix:"react-select",isDisabled:!qe||t&&!ge,isMulti:Te,closeMenuOnSelect:!1,getOptionValue:Xe=>Xe.id,getOptionLabel:Xe=>Xe.label,customComponents:{IndicatorSeparator:()=>null,Option:({innerProps:Xe,data:bt})=>i.jsxs("div",{className:`option select-service-option d-flex justify-content-between align-items-center gap-1 ${bt.allow_multiple?"allow-multiple":""}`,...Xe,children:[i.jsxs("div",{className:"d-flex flex-column",children:[i.jsxs("div",{className:"d-flex align-items-center gap-06",children:[bt.is_telemed&&i.jsx("span",{className:"badge bg-success-subtle border border-success rounded-pill ",children:r("Telemed","kivicare-clinic-management-system")}),bt.allow_multiple&&i.jsx("span",{className:"badge bg-info-subtle border border-info rounded-pill ",children:r("Multiple","kivicare-clinic-management-system")})]}),i.jsxs("label",{className:"m-0 texts font-size-14 heading-color fw-medium form-label",children:[" ",bt.label," "]})]}),i.jsx("span",{className:"text-secondary font-size-14 fw-semibold",children:c(bt.price)})]})},dependencies:{clinic_id:$e,doctor_id:qe}},`service-${$e}-${qe}`)}}),ne.service&&i.jsx("div",{className:"invalid-feedback d-block",children:ne.service.message})]})}),!N&&e===!1&&i.jsx("div",{className:"col-md-6 col-lg-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between gap-1 flex-wrap label-action-wrapper",children:[i.jsxs("label",{className:"form-label",children:[r("Select Patient","kivicare-clinic-management-system"),i.jsx("span",{className:"text-danger",children:"*"})]}),!t&&i.jsx(ht,{to:{pathname:"/patient/add",search:"from=appointment"},className:"label-action fw-semibold font-size-12",children:r("Add Patient","kivicare-clinic-management-system")})]}),i.jsx(ye,{name:"patient",control:oe,rules:be.patient,render:({field:ue})=>i.jsx(rn,{id:"patient",loadOptions:Ke,value:ue.value,onChange:ue.onChange,placeholder:C("clinic")?.value?w?.enable?r('eg "Alena James" or ID',"kivicare-clinic-management-system"):r('eg "Alena James"',"kivicare-clinic-management-system"):r("Select Clinic First","kivicare-clinic-management-system"),className:`react-select-box ${ne.patient?"is-invalid":""}`,classNamePrefix:"react-select",isDisabled:t||ge||!C("clinic")?.value,dependencies:{clinic_ids:C("clinic")?.value}},`patient-${C("clinic")?.value}`)}),ne.patient&&i.jsx("div",{className:"invalid-feedback d-block",children:ne.patient.message})]})}),i.jsx("div",{className:"col-md-12",children:i.jsxs("div",{className:"row",children:[i.jsx("div",{className:"col-md-6 col-lg-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[r("Appointment Date","kivicare-clinic-management-system"),i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx(ye,{name:"appointmentDate",control:oe,rules:be.appointmentDate,render:({field:ue})=>i.jsxs("div",{className:"kc-flatpickr-calendar",children:[i.jsx(Un,{id:"appointmentDate",className:`d-none ${ne.appointmentDate?"is-invalid":""}`,value:ue.value?Zn(ue.value):"",onChange:Te=>{const Ie=La(Te[0]);ue.onChange(Ie),R("appointmentSlot","")},placeholder:r('eg "05/02/2025"',"kivicare-clinic-management-system"),disabled:t&&ge||et,options:{dateFormat:"Y-m-d",altFormat:xi(window.kc_frontend.date_format),minDate:Be.minDate,maxDate:Be.maxDate,disableMobile:!0,inline:!0,disable:[function(Te){if(!zt)return!1;const{off_days:Ie=[],holidays:qe=[]}=zt;if(Ie.includes(String(Te.getDay())))return!0;const $e=La(Te);return(Array.isArray(qe)?qe:Object.values(qe)).includes($e)}],locale:Wn(),onMonthChange:(Te,Ie,qe)=>{const $e=qe.currentMonth+1,Xe=qe.currentYear;tt(Xe,$e)},onDayCreate:(Te,Ie,qe,$e)=>{const Xe=$e.dateObj;if(!Xe)return;const bt=new Date;if(bt.setHours(0,0,0,0),Xe<bt){$e.classList.add("past-date");return}$e.innerHTML=$e.innerHTML.replace(/\d+/g,ys=>XZ(ys));const Gt=La(Xe),{off_days:$n=[],holidays:ti=[]}=zt||{},vs=Array.isArray(ti)?ti:Object.values(ti),ln=$n.includes(String(Xe.getDay())),xs=vs.includes(Gt),ri=document.createElement("div");ri.className="day-tooltip",ri.innerHTML=`
                                                      <span class="tooltip-date">
                                                        ${Rn(Xe).format("dddd, MMMM D, YYYY")}
                                                      </span>
                                                    `;const Zt=document.createElement("span");Zt.className="tooltip-info";const sa=document.createElement("span");if(sa.className="day-icon",xs||ln){$e.classList.add(xs?"clinic-holiday":"doctor-leave"),$e.classList.remove("flatpickr-disabled"),Zt.textContent=xs?r("Clinic/Doctor Holiday","kivicare-clinic-management-system"):r("Doctor Off Day","kivicare-clinic-management-system"),$e.append(sa),ri.append(Zt),$e.append(ri);return}const wa=q?.value||pe,ja=Y?.value||$||(E?null:0);if(!wa||!B?.length){Zt.textContent=r("Select doctor & service first","kivicare-clinic-management-system"),ri.append(Zt),$e.append(ri);return}const Hr=`${wa}-${ja}-${Gt}`,Ji=_e.current?.[Hr];if(!Ji){Zt.textContent=r("Available","kivicare-clinic-management-system"),ri.append(Zt),$e.append(ri);return}const gi=document.createElement("span");if(gi.className="slot-indicator",Ji.available_count>0){$e.classList.add("available"),gi.textContent=`${Ji.available_count} ${r("Slots","kivicare-clinic-management-system")}`,Zt.textContent=`${Ji.available_count} ${r("slots available","kivicare-clinic-management-system")}`;const ys=document.createElement("span");ys.className="tooltip-action",ys.textContent=r("Click to select","kivicare-clinic-management-system"),ri.append(Zt,ys),$e.append(gi)}else Ji.total_count>0?($e.classList.add("slots-full"),gi.textContent=r("Full","kivicare-clinic-management-system"),Zt.textContent=r("All slots are booked","kivicare-clinic-management-system"),$e.append(gi),ri.append(Zt)):(Zt.textContent=r("Available","kivicare-clinic-management-system"),ri.append(Zt));$e.append(ri)}},ref:Te=>{Ye.current=Te,ue.ref(Te)}},`flatpickr-${q?.value||"no-doctor"}-${B?.length||0}`),i.jsxs("div",{className:"calendar-legend",children:[i.jsx("div",{className:"calendar-legend-title",children:r("Calendar Legend","kivicare-clinic-management-system")}),i.jsxs("div",{className:"calendar-legend-items",children:[i.jsxs("div",{className:"calendar-legend-item available",children:[i.jsx("div",{className:"legend-icon",children:i.jsx("i",{class:"ph ph-clock"})}),i.jsx("span",{className:"legend-label",children:r("Available","kivicare-clinic-management-system")})]}),i.jsxs("div",{className:"calendar-legend-item slots-full",children:[i.jsx("div",{className:"legend-icon",children:i.jsx("i",{class:"ph ph-clock"})}),i.jsx("span",{className:"legend-label",children:r("Slots Full","kivicare-clinic-management-system")})]}),i.jsxs("div",{className:"calendar-legend-item clinic-holiday",children:[i.jsx("div",{className:"legend-icon",children:i.jsx("i",{class:"ph ph-hospital"})}),i.jsx("span",{className:"legend-label",children:r("Clinic/Doctor Holiday","kivicare-clinic-management-system")})]}),i.jsxs("div",{className:"calendar-legend-item doctor-leave",children:[i.jsx("div",{className:"legend-icon",children:i.jsx("i",{class:"ph ph-stethoscope"})}),i.jsx("span",{className:"legend-label",children:r("Doctor Off Day","kivicare-clinic-management-system")})]}),i.jsxs("div",{className:"calendar-legend-item past-date",children:[i.jsx("div",{className:"legend-icon",children:i.jsx("i",{class:"ph ph-x"})}),i.jsx("span",{className:"legend-label",children:r("Past Date","kivicare-clinic-management-system")})]})]})]})]})}),ne.appointmentDate&&i.jsx("div",{className:"invalid-feedback d-block",children:ne.appointmentDate.message})]})}),i.jsxs("div",{className:"col-6",children:[i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[r("Available Slot","kivicare-clinic-management-system"),i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx(ye,{name:"appointmentSlot",control:oe,rules:be.appointmentSlot,render:({field:ue})=>i.jsx(i.Fragment,{children:De?i.jsx(F2,{count:18}):Nt?i.jsx("div",{className:`p-3 bg-body rounded slot-scrolling ${ne.appointmentSlot?" form-control is-invalid":""} `,children:at.map((Te,Ie)=>i.jsx(He.Fragment,{children:Te.length>0&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"session-divider","aria-hidden":"true",children:i.jsx("span",{children:r(`Session ${Ie+1}`,"kivicare-clinic-management-system")})}),i.jsx("div",{className:"appointments-slot-select",children:Te.map((qe,$e)=>i.jsxs("div",{className:"form-check slot-select",children:[i.jsx("input",{type:"radio",name:ue.name,className:`form-check-input ${ne.appointmentSlot?"is-invalid":""}`,id:`slot-${Ie}-${$e}`,value:qe.time,checked:Q===qe.time,onChange:Xe=>{ue.onChange(Xe.target.value)},ref:ue.ref,disabled:t&&ge}),i.jsx("label",{className:"form-check-label",htmlFor:`slot-${Ie}-${$e}`,children:qe.time})]},`slot-${Ie}-${$e}`))})]})},`session-${Ie}`))}):ce?.status===!1?i.jsx("div",{className:"p-3 bg-body rounded text-center",children:i.jsx("p",{className:"mb-0 text-muted",children:ce?.data?.error})}):i.jsx("div",{className:"slot-none p-3 bg-body rounded text-center",children:i.jsx("p",{className:"mb-0 text-muted",children:r("No available slots for the selected date and doctor.","kivicare-clinic-management-system")})})})}),ne.appointmentSlot&&i.jsx("div",{className:"invalid-feedback d-block",children:ne.appointmentSlot.message})]}),!N&&i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[r("Status","kivicare-clinic-management-system"),i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx(ye,{name:"status",control:oe,rules:be.status,render:({field:ue})=>i.jsx(ct,{id:"status",options:Z,value:ue.value,onChange:ue.onChange,placeholder:r('eg "Booked"',"kivicare-clinic-management-system"),className:"react-select-box",classNamePrefix:"react-select",isSearchable:!1,styles:{menuPortal:Te=>({...Te,zIndex:9999})},isDisabled:t&&ge||!v("patient_appointment_status_change")})}),ne.status&&i.jsx("div",{className:"invalid-feedback d-block",children:ne.status.message})]})]})]})}),m&&(!t||U?.appointmentReport&&U.appointmentReport.length>0)&&i.jsx("div",{className:"col-6",children:i.jsx(KJ,{name:"appointmentFiles",label:r("Upload Documents","kivicare-clinic-management-system"),setValue:R,defaultFiles:U?.appointmentReport||[],allowFile:!0,isEdit:t})}),d&&i.jsx("div",{className:"col -12",children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{className:"form-label",children:r("Description","kivicare-clinic-management-system")}),i.jsx("textarea",{id:"description",className:`form-control ${ne.description?"is-invalid":""}`,placeholder:r("Enter appointment description (optional)","kivicare-clinic-management-system"),rows:"3",...K("description"),disabled:t&&ge}),ne.description&&i.jsx("div",{className:"invalid-feedback d-block",children:ne.description.message})]})})]})})}),g("kiviPro")&&q&&i.jsx(tf,{moduleType:"appointment_module",moduleId:q?.value,control:oe,errors:ne,setValue:R,watch:C},`custom-fields-${q?.value||"no-doctor"}`),g("kiviPro")&&xt.length>0&&i.jsx("div",{className:"mt-4 card",children:i.jsxs("div",{className:"card-body",children:[i.jsx("h6",{className:"mb-3",children:r("Additional Information","kivicare-clinic-management-system")}),xt.length===1?i.jsx("div",{id:`custom-form-${xt[0].id}`,children:i.jsx(Ua,{ref:ue=>l.current[xt[0].id]=ue,fields:xt[0].fields,data:xt[0].form_data,readOnly:!1,formId:`form_${xt[0].id}`})}):i.jsx(Cg,{defaultActiveKey:xt[0]?.id,id:"custom-forms-tabs",className:"nav nav-pills nav-pill-card mb-4",children:xt.map(ue=>i.jsx(Rc,{eventKey:ue.id,title:ue.name?.text||ue.name,children:i.jsx("div",{id:`custom-form-${ue.id}`,children:i.jsx(Ua,{ref:Te=>l.current[ue.id]=Te,fields:ue.fields,data:ue.form_data||{},readOnly:!1,formId:`form_${ue.id}`})})},ue.id))})]})}),i.jsxs("div",{className:"d-flex align-items-center justify-content-end flex-wrap gap-3 mt-4 mb-5",children:[i.jsx(ei,{fallbackPath:"/appointments",text:r("Cancel","kivicare-clinic-management-system"),variant:"secondary",showIcon:!1,disabled:ee}),i.jsx("button",{type:"submit",className:"btn btn-primary",disabled:ee||t&&ge,children:ee?i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),t?r("Updating...","kivicare-clinic-management-system"):r("Saving...","kivicare-clinic-management-system")]}):t?r("Update Appointment","kivicare-clinic-management-system"):r("Save Appointment","kivicare-clinic-management-system")})]})]})}),i.jsx("div",{className:"col-lg-4",children:i.jsx(JR,{Formwatch:C,summaryData:Qt,summaryLoading:nt,summaryError:Pe,className:"position-sticky top-0"})})]})}),N&&i.jsx(NJ,{showConfirmationModel:F,handleCloseConfirmationModel:()=>H(!1),handleConfirmAppointment:jt,confirmationData:G,isSubmitting:he,setValue:R}),!t&&i.jsx(RJ,{ref:s,appointmentData:!1}),!t&&i.jsx(IJ,{ref:a,appointmentData:!1})]})},nP=()=>{const{id:t}=Yt(),{getPriceFormat:e,isAddonActive:n}=mt(),[s,a]=f.useState(!0),{data:l,isLoading:o,error:c}=hX(t),{data:d}=ad({module_type:"appointment_module",status:1,module_id:t},{enabled:n("kiviPro")}),m=BR(),u=l?.data||{},h=d?.data?.forms||[],p=[{value:0,text:r("Cancelled","kivicare-clinic-management-system"),color:"text-danger"},{value:1,text:r("Booked","kivicare-clinic-management-system"),color:"text-info"},{value:2,text:r("Pending","kivicare-clinic-management-system"),color:"text-warning"},{value:3,text:r("Check Out","kivicare-clinic-management-system"),color:"text-danger"},{value:4,text:r("Check In","kivicare-clinic-management-system"),color:"text-success"}],v=(j=>{if(j==null)return{text:r("Unknown","kivicare-clinic-management-system"),color:"text-secondary"};const D=Number(j);return p.find(_=>_.value===D)||{text:r("Unknown","kivicare-clinic-management-system"),color:"text-secondary"}})(u.status),x=[{value:0,text:r("Closed","kivicare-clinic-management-system"),badgeClass:"text-bg-secondary"},{value:1,text:r("Active","kivicare-clinic-management-system"),badgeClass:"text-bg-success"}],b=(j=>{if(j==null)return{text:r("Unknown","kivicare-clinic-management-system"),badgeClass:"text-bg-secondary"};const D=Number(j);return x.find(_=>_.value===D)||{text:r("Unknown","kivicare-clinic-management-system"),badgeClass:"text-bg-secondary"}})(u.encounterStatus),k=j=>{m.mutate(j,{onSuccess:D=>{const _=new Blob([D],{type:"application/pdf"}),N=URL.createObjectURL(_);window.open(N,"_blank")},onError:D=>{At.fire({title:r("Error","kivicare-clinic-management-system"),text:D?.response?.data?.message||D?.message||r("Failed to generate invoice PDF.","kivicare-clinic-management-system"),icon:"error",confirmButtonText:r("OK","kivicare-clinic-management-system")})}})},w=f.useMemo(()=>!u||!u.serviceName?null:{services:u.service_list,applied_taxes:u?.taxItems?.tax_data,subtotal:u.subtotal||0,tax:u?.taxItems?.total_tax||0,grand_total:(u.subtotal||0)+(u?.taxItems?.total_tax||0)},[u]),T=j=>j==="service"?u.serviceName?[{name:u.serviceName}]:[]:null;return o?i.jsx($R,{}):c?i.jsx("div",{className:"alert alert-danger",children:r("Failed to load appointment details.","kivicare-clinic-management-system")}):i.jsxs("div",{className:"row",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center gap-3 flex-wrap mb-4",children:[i.jsx(_i,{}),i.jsx("div",{children:location.pathname!=="/appointments"&&i.jsx(ei,{size:"sm"})})]}),i.jsxs("div",{className:"col-xl-8",children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap gap-2 mb-3",children:[i.jsx("h6",{className:"mb-0",children:r("Appointment Detail","kivicare-clinic-management-system")}),i.jsx("div",{children:i.jsx("button",{type:"button",onClick:()=>k(u.id),className:"btn btn-primary",children:r("Download Invoice","kivicare-clinic-management-system")})})]}),i.jsx("div",{className:"card",children:i.jsxs("div",{className:"card-body",children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between column-gap-3 row-gap-2 flex-wrap mb-4",children:[i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsxs("span",{className:"font-size-14",children:[r("Appointment ID","kivicare-clinic-management-system"),":"]}),i.jsxs("h6",{className:"m-0 font-size-14 text-primary",children:["#",u.id]})]}),i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsxs("span",{className:"font-size-14",children:[r("Payment Status","kivicare-clinic-management-system"),":"]}),i.jsx("h6",{className:"m-0 font-size-14 text-primary",children:u.paymentStatus})]})]}),i.jsx("div",{className:"bg-body p-3 rounded mb-5",children:i.jsxs("div",{className:"row gy-3",children:[i.jsxs("div",{className:"col-xl-3 col-lg-6",children:[i.jsxs("span",{className:"font-size-14",children:[r("Date & Time","kivicare-clinic-management-system"),":"]}),i.jsx("h6",{className:"font-size-14 mt-2 mb-0",children:u.appointmentDateTime})]}),i.jsxs("div",{className:"col-xl-3 col-lg-6",children:[i.jsxs("span",{className:"font-size-14",children:[r("Service Name","kivicare-clinic-management-system"),":"]}),i.jsx("h6",{className:"font-size-14 mt-2 mb-0",children:u.serviceName})]}),i.jsxs("div",{className:"col-xl-3 col-lg-6",children:[i.jsxs("span",{className:"font-size-14",children:[r("Booking Status","kivicare-clinic-management-system"),":"]}),i.jsx("h6",{className:`font-size-14 mt-2 mb-0 ${v.color}`,children:v.text})]}),i.jsxs("div",{className:"col-xl-3 col-lg-6",children:[i.jsxs("span",{className:"font-size-14",children:[r("Payment Mode","kivicare-clinic-management-system"),":"]}),i.jsx("h6",{className:"font-size-14 mt-2 mb-0",children:u.paymentMode})]})]})}),u.description&&i.jsx("div",{className:"bg-body p-3 rounded mb-5",children:i.jsxs("div",{className:"d-flex align-items-center gap-1",children:[i.jsxs("span",{className:"font-size-14",children:[r("Description","kivicare-clinic-management-system"),":"]}),i.jsx("h6",{className:"font-size-14 ms-1 mb-0",children:u.description})]})}),i.jsx("div",{children:i.jsxs("div",{className:"row gy-4",children:[i.jsxs("div",{className:"col-lg-4",children:[i.jsx("h6",{className:"font-size-14",children:r("Patient Detail","kivicare-clinic-management-system")}),i.jsx("div",{className:"bg-body p-3 rounded",children:i.jsx("div",{className:"d-flex align-items-center gap-3 mt-2",children:i.jsx(dn,{profileUrl:u.patient_image_url,name:u.patientName,phone:u.patientMobileNo,variant:"primary",size:"md",nameLabel:r("Patient Name","kivicare-clinic-management-system")})})})]}),i.jsxs("div",{className:"col-lg-4",children:[i.jsx("h6",{className:"font-size-14",children:r("Clinic Detail","kivicare-clinic-management-system")}),i.jsx("div",{className:"bg-body p-3 rounded",children:i.jsx("div",{className:"d-flex align-items-center gap-3 mt-2",children:i.jsx(dn,{profileUrl:u.clinic_image_url,name:u.clinicName,phone:u.clinicMobileNo,variant:"primary",size:"md",nameLabel:r("Clinic Name","kivicare-clinic-management-system"),rounded:!1})})})]}),i.jsxs("div",{className:"col-lg-4",children:[i.jsx("h6",{className:"font-size-14",children:r("Doctor Detail","kivicare-clinic-management-system")}),i.jsx("div",{className:"bg-body p-3 rounded",children:i.jsx("div",{className:"d-flex align-items-center gap-3 mt-2",children:i.jsx(dn,{profileUrl:u.doctor_image_url,name:u.doctorName,phone:u.doctorMobileNo,variant:"primary",size:"md",nameLabel:r("Doctor Name","kivicare-clinic-management-system")})})})]})]})}),u.encounterId&&i.jsxs("div",{className:"spcing-top",children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between gap-2 flex-wrap mb-2",children:[i.jsx("h6",{className:"mb-0 font-size-14",children:r("Encounter Detail","kivicare-clinic-management-system")}),i.jsx(ht,{to:`/encounter/dashboard/${u.encounterId}`,className:"font-size-14 fw-bold",children:r("View Details","kivicare-clinic-management-system")})]}),i.jsx("div",{className:"p-3 bg-body rounded",children:i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-lg-8",children:i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsxs("span",{className:"font-size-14",children:[r("Description","kivicare-clinic-management-system"),":"]}),i.jsx("p",{className:"h6 mb-0",children:u.encounterDescription||r("No records found","kivicare-clinic-management-system")})]})}),i.jsx("div",{className:"col-lg-4",children:i.jsx("div",{className:"d-flex align-items-center justify-content-lg-end",children:i.jsx("span",{className:`badge ${b.badgeClass} text-uppercase rounded-pill`,children:b.text})})})]})})]}),n("kiviPro")&&h.length>0&&i.jsxs("div",{className:"mt-4",children:[i.jsx("h6",{className:"mb-3",children:r("Custom Forms","kivicare-clinic-management-system")}),h.length===1?i.jsx("div",{children:i.jsx(Ua,{fields:h[0].fields,data:h[0].form_data,readOnly:!0})}):i.jsx(Cg,{defaultActiveKey:h[0]?.id,id:"custom-forms-tabs",className:"nav nav-pills nav-pill-card mb-4",children:h.map(j=>i.jsx(Rc,{eventKey:j.id,title:j.name?.text||j.name,children:i.jsx("div",{children:i.jsx(Ua,{fields:j.fields,data:j.form_data,readOnly:!0})})},j.id))})]})]})}),u?.appointmentReport?.length>0&&i.jsx("div",{className:"card",children:i.jsxs("div",{className:"card-body",children:[i.jsx("h6",{className:"fw-semibold mb-3",children:r("Documents","kivicare-clinic-management-system")}),i.jsx(wn,{columns:[{header:r("File Name","kivicare-clinic-management-system"),accessorKey:"filename",enableSorting:!1,cell:j=>j.getValue()},{header:r("Actions","kivicare-clinic-management-system"),enableSorting:!1,maxWidth:100,accessorKey:"actions",cell:j=>i.jsx("a",{href:j.row.original.url,target:"_blank",rel:"noopener noreferrer",children:i.jsx("i",{className:"ph ph-eye"})})}],data:u.appointmentReport,enableSelection:!1})]})})]}),i.jsxs("div",{className:"col-xl-4",children:[i.jsx("h5",{className:"mb-3",children:r("Payment","kivicare-clinic-management-system")}),i.jsx("div",{className:"mb-3",children:i.jsx(JR,{Formwatch:T,summaryData:w,summaryLoading:o,summaryError:c})})]})]})},GJ=[Gn({path:"/appointments",title:"Appointments",outlet:sX,permissions:["appointment_list"],meta:{description:"Appointment management system",icon:"calendar",showInSidebar:!0},children:[We({path:"",component:Ay,title:"All Appointments",index:!0,permissions:["appointment_list"],skeleton:()=>i.jsx("div",{className:"container-fluid pb-0",children:i.jsx(_n,{columns:6,rows:5,showBreadcrumb:!0,showPageHeader:!0,showFilterBar:!0})}),meta:{description:"List of all appointments",breadcrumb:"All Appointments"}}),We({path:"patient/:patientIdParam",component:Ay,title:"Appointments by Patient",permissions:["appointment_list"],skeleton:()=>i.jsx("div",{className:"container-fluid pb-0",children:i.jsx(_n,{columns:6,rows:5,showBreadcrumb:!0,showPageHeader:!0,showFilterBar:!0})}),meta:{description:"Appointments filtered by patient",breadcrumb:"Appointments"}}),We({path:"add",component:Xp,title:"Add Appointment",props:{isEditing:!1},permissions:["appointment_add"],skeleton:Cy,meta:{description:"Create a new appointment",breadcrumb:"Add New"}}),We({path:"edit/:id",component:Xp,title:"Edit Appointment",props:{isEditing:!0},permissions:["appointment_edit"],skeleton:Cy,meta:{description:"Edit existing appointment",breadcrumb:"Edit"}}),We({path:"view/:id",component:nP,title:"View Appointment",props:{readOnly:!0},permissions:["appointment_view"],skeleton:$R,meta:{description:"View appointment details",breadcrumb:"View"}})]})],yC=()=>{const t=Kn(),e=["/encounter","/encounter-template"],n=t.pathname.replace(/\/$/,""),s=!e.includes(n);return i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center gap-3 flex-wrap mb-4",children:[i.jsx(_i,{updateOnRouteChange:!0}),s&&i.jsx("div",{children:i.jsx(ei,{size:"sm"})})]}),i.jsx(yo,{})]})},Tw={getMedicalHistories:(t={})=>ve({endpoint:"medical-history",method:"GET",data:t}),getMedicalHistory:t=>ve({endpoint:`medical-history/${t}`,method:"GET"}),createMedicalHistory:t=>ve({endpoint:"medical-history",method:"POST",data:t}),updateMedicalHistory:(t,e)=>ve({endpoint:`medical-history/${t}`,method:"PUT",data:e}),deleteMedicalHistory:t=>ve({endpoint:`medical-history/${t}`,method:"DELETE"})},Kl={all:["medicalHistory"],lists:()=>[...Kl.all],list:t=>[...Kl.lists(),{filters:t}],details:()=>[...Kl.all,"detail"],detail:t=>[...Kl.details(),t]},Kh=(t={},e={})=>ft({queryKey:Kl.list(t),queryFn:()=>Tw.getMedicalHistories(t),...e}),Ry=()=>Le({mutationFn:Tw.createMedicalHistory}),iP=()=>(ze(),Le({mutationFn:t=>Tw.deleteMedicalHistory(t)})),Aw={getEncounterTemplateMedicalHistory:(t,e={})=>ve({endpoint:`encounter-templates/${t}/medical-history`,method:"GET",data:e}),createEncounterTemplateMedicalHistory:(t,e)=>ve({endpoint:`encounter-templates/${t}/medical-history`,method:"POST",data:e}),deleteEncounterTemplateMedicalHistory:(t,e)=>ve({endpoint:`encounter-templates/${t}/medical-history/${e}`,method:"DELETE"})},vr={all:["encounterTemplateMedicalHistory"],lists:()=>[...vr.all,"list"],list:(t,e)=>[...vr.lists(),t,{filters:e}],details:()=>[...vr.all,"detail"],detail:(t,e)=>[...vr.details(),t,e]},Gh=(t,e={},n={})=>ft({queryKey:vr.list(t,e),queryFn:()=>Aw.getEncounterTemplateMedicalHistory(t,e),enabled:!!t,...n}),Py=()=>{const t=ze();return Le({mutationFn:({templateId:e,...n})=>Aw.createEncounterTemplateMedicalHistory(e,n),onSuccess:(e,n)=>{t.invalidateQueries(vr.list(n.templateId))}})},sP=()=>{const t=ze();return Le({mutationFn:({templateId:e,itemId:n})=>Aw.deleteEncounterTemplateMedicalHistory(e,n),onSuccess:(e,n)=>{t.invalidateQueries(vr.list(n.templateId))}})},Dr={createEncounter:t=>ve({endpoint:"encounters",method:"POST",data:t}),updateEncounter:(t,e)=>ve({endpoint:`encounters/${t}`,method:"PUT",data:e}),getEncounterById:t=>ve({endpoint:`encounters/${t}`,method:"GET"}),getEncounters:t=>ve({endpoint:"encounters",method:"GET",data:t}),deleteEncounter:t=>ve({endpoint:`encounters/${t}`,method:"DELETE"}),bulkUpdateEncounterStatus:(t,e)=>ve({endpoint:"encounters/bulk/status",method:"PUT",data:{ids:t,status:e}}),bulkDeletEencounters:t=>ve({endpoint:"encounters/bulk/delete",method:"POST",data:{ids:t}}),getEncounterById:t=>ve({endpoint:`encounters/${t}`,method:"GET"}),printEncounter:t=>ve({endpoint:`encounters/${t}/print`,method:"GET",responseType:"blob"}),exportEncounters:(t={})=>ve({endpoint:"encounters/export",method:"GET",data:t})},ho={createTemplate:t=>ve({endpoint:"encounter-templates",method:"POST",data:t}),updateTemplate:(t,e)=>ve({endpoint:`encounter-templates/${t}`,method:"PUT",data:e}),getTemplateById:t=>ve({endpoint:`encounter-templates/${t}`,method:"GET"}),getTemplates:t=>ve({endpoint:"encounter-templates",method:"GET",data:t}),deleteTemplate:t=>ve({endpoint:`encounter-templates/${t}`,method:"DELETE"}),bulkDeleteTemplates:t=>ve({endpoint:"encounter-templates/bulk/delete",method:"POST",data:{ids:t}}),bulkUpdateStatus:(t,e)=>ve({endpoint:"encounter-templates/bulk/status",method:"PUT",data:{ids:t,status:e}}),applyTemplateToEncounter:(t,e)=>ve({endpoint:`encounter-templates/${t}/apply-to-encounter/${e}`,method:"POST"})},YJ=()=>{const t=ze();return Le({mutationFn:async({id:e,data:n,isEdit:s})=>s&&e?Dr.updateEncounter(e,n):Dr.createEncounter(n),onSuccess:()=>{t.invalidateQueries({queryKey:["encounters"]})}})},QJ=(t={})=>ft({queryKey:["encounters",t],queryFn:()=>Dr.getEncounters(t)}),ZJ=()=>{const t=ze();return Le({mutationFn:e=>Dr.bulkDeletEencounters(e),onSuccess:()=>{t.invalidateQueries({queryKey:["encounters"]})}})},aP=()=>{const t=ze();return Le({mutationFn:({ids:e,status:n})=>Dr.bulkUpdateEncounterStatus(e,n),onSuccess:()=>{t.invalidateQueries({queryKey:["encounters"]})}})},Dw=(t,e={})=>ft({queryKey:["encounter",t],queryFn:()=>Dr.getEncounterById(t),enabled:!!t,...e}),XJ=()=>{const t=ze();return Le({mutationFn:async({id:e,data:n,isEdit:s})=>s&&e?ho.updateTemplate(e,n):ho.createTemplate(n),onSuccess:()=>{t.invalidateQueries({queryKey:["encounter-templates"]})}})},rP=(t={})=>ft({queryKey:["encounter-templates",t],queryFn:()=>ho.getTemplates(t)}),JJ=()=>{const t=ze();return Le({mutationFn:e=>ho.deleteTemplate(e),onSuccess:()=>t.invalidateQueries({queryKey:["encounter-templates"]})})},eee=()=>{const t=ze();return Le({mutationFn:e=>ho.bulkDeleteTemplates(e),onSuccess:()=>t.invalidateQueries({queryKey:["encounter-templates"]})})},tee=()=>{const t=ze();return Le({mutationFn:({templateId:e,encounterId:n})=>ho.applyTemplateToEncounter(e,n),onSuccess:()=>{t.invalidateQueries({queryKey:["medicalHistory"]}),t.invalidateQueries({queryKey:["prescriptions"]})}})},nee=()=>Le({mutationFn:t=>Dr.printEncounter(t)}),iee=()=>Le({mutationFn:t=>Dr.exportEncounters(t)}),Rw=f.createContext(),nf=()=>{const t=f.useContext(Rw);if(!t)throw new Error("useEncounterContext must be used within an EncounterProvider");return t},see=({children:t})=>{const{id:e}=Yt(),{hasCapability:n,userRole:s,currentDoctorId:a,isAddonActive:l}=mt(),o=s||"patient",{data:c,isLoading:d,error:m}=Dw(e),u=c?.data||{},{data:h,isLoading:p,error:g}=qA(e),{data:v}=ad({module_type:"patient_encounter_module",status:1,module_id:e},{enabled:l("kiviPro"),staleTime:300*1e3,cacheTime:1800*1e3,refetchOnWindowFocus:!1}),x=f.useMemo(()=>v?.data?.forms||[],[v?.data?.forms]),{data:y}=tP("appointment_module",u?.doctorId),{data:b}=Dy("appointment_module",u?.appointmentId,{enabled:!!u?.appointmentId,staleTime:300*1e3,cacheTime:1800*1e3,refetchOnWindowFocus:!1}),{data:k}=Dy("patient_encounter_module",e,{enabled:!!e,staleTime:300*1e3,cacheTime:1800*1e3,refetchOnWindowFocus:!1}),w=f.useMemo(()=>y?.data||[],[y?.data]),T=f.useMemo(()=>b?.data||{},[b?.data]),j=f.useMemo(()=>k?.data||[],[k?.data]),[D,_]=f.useState(!1),[N,A]=f.useState(null),[P,E]=f.useState(!1),[I,M]=f.useState(!1),[O,F]=f.useState({serviceItems:[],taxItems:[],discount:0,discountEnabled:!1,status:"unpaid",clinic:{},doctor:{},patient:{},patientEncounter:{},serviceTotal:0,taxTotal:0,discountValue:0,totalPayable:0}),H=Cr(o)||Jn(o)||Xn(o)||Li(o),{data:G}=Sn(),z=G?.data?.allowEncounterEdit;f.useEffect(()=>{_((Number(u?.status)===1||z==="on")&&(Cr(o)||Jn(o)||Xn(o)||Li(o)&&u?.doctorId===a))},[u,o,a,z]),f.useEffect(()=>{h?.data&&F(h.data)},[h]);const ie=f.useCallback(()=>{A(h?.data?.id||null),F(h?.data||O),E(!0)},[h,O]),W=f.useCallback(()=>{E(!1),M(!1)},[]),ge=f.useMemo(()=>({isOpen:Number(u?.status)===1,isClosed:Number(u?.status)===0,isPending:Number(u?.status)===2,canClose:Number(u?.status)===1}),[u?.status]),ae=f.useMemo(()=>({name:u.patientName||"Unknown Patient",email:u.patientEmail||"No email provided",phone:u.patientPhone,age:u.patientAge,gender:u.patientGender,address:u?.patient_data?.address||u?.patientAddress,profileImage:u.patient_image_url}),[u.patientName,u.patientEmail,u.patientPhone,u.patientAge,u.patientGender,u?.patient_data?.address,u?.patientAddress,u.patient_image_url]),U=f.useMemo(()=>({name:u.clinicName||"Unknown Clinic",address:u.clinicAddress,doctorName:u.doctorName||"Unknown Doctor",profileImage:u.clinic_image_url,description:u.description}),[u.clinicName,u.clinicAddress,u.doctorName,u.clinic_image_url,u.description]),X=f.useMemo(()=>({encounterId:e,encounterData:u,isEncounterLoading:d,encounterError:m,billData:h?.data,isBillLoading:p,billError:g,customForms:x,customFields:w,customFieldData:T,encounterCustomFieldData:j,canEditEncounter:H,canUpdateEncounter:D,userRole:o,showEditBillModal:P,showAddServiceItemForm:I,editFormData:O,setEditFormData:F,setShowAddServiceItemForm:M,handleOpenEditBillModal:ie,handleCloseEditBillModal:W,encounterStatus:ge,patientInfo:ae,clinicInfo:U,hasCapability:n,currentDoctorId:a,isAddonActive:l}),[e,u,d,m,h?.data,p,g,x,H,D,o,P,I,O,F,M,ie,W,ge,ae,U,n,a,l,w,T,j]);return i.jsx(Rw.Provider,{value:X,children:t})},aee=(t,{isProblemEnabled:e,isObservationEnabled:n,isNoteEnabled:s})=>{const{hasCapability:a}=mt(),{encounterData:l,isEncounterLoading:o,patientInfo:c,isEncounterTemplate:d}=nf(),{data:m}=Sn(),u=m?.data?.allowEncounterEdit,[h,p]=f.useState([]),[g,v]=f.useState(null),[x,y]=f.useState(!0),[b,k]=f.useState(!0),[w,T]=f.useState(!0),[j,D]=f.useState([]),[_,N]=f.useState([]),[A,P]=f.useState(!1),E=!o&&t,{data:I}=Ha(e&&x&&E?"clinical_problems":null),{data:M}=Ha(n&&b&&E?"clinical_observations":null),O={enabled:E&&g!==null},F=(K,re,oe)=>K?re():oe(),{data:H}=F(d,()=>Gh(t,{type:"problem"},{enabled:!!x&&!!E}),()=>Kh({patient_id:g,encounter_id:t,type:"problem"},{enabled:!!x&&!!O.enabled&&e})),{data:G}=F(d,()=>Gh(t,{type:"observation"},{enabled:!!b&&!!E}),()=>Kh({patient_id:g,encounter_id:t,type:"observation"},{enabled:b&&O.enabled&&n})),{data:z}=F(d,()=>Gh(t,{type:"note"},{enabled:!!w&&!!E}),()=>Kh({patient_id:g,encounter_id:t,type:"note"},{enabled:!!w&&!!O.enabled&&s})),ie=d?Py():Ry(),W=d?sP():iP(),ge=f.useMemo(()=>I?.data?I.data.map(K=>({value:K.value||K.id,label:K.label})):[],[I]),ae=f.useMemo(()=>M?.data?M.data.map(K=>({value:K.value||K.id,label:K.label})):[],[M]);f.useEffect(()=>{const re=(d?H?.data?.items||[]:H?.data?.histories||[]).map(oe=>({...oe,title:oe.clinical_detail_val||oe.title}));D(re)},[H,d]),f.useEffect(()=>{const re=(d?G?.data?.items||[]:G?.data?.histories||[]).map(oe=>({...oe,title:oe.clinical_detail_val||oe.title}));N(re)},[G,d]),f.useEffect(()=>{const K=d?z?.data?.items||[]:z?.data?.histories||[];p(K.map(re=>({id:re.id,title:re.clinical_detail_val||re.title})))},[z,d]),f.useEffect(()=>{P(d?a("encounters_template_edit"):(Number(l?.status)===1||u==="on")&&a("patient_encounter_edit")),(l?.patientId||c?.id)&&v(l?.patientId||c?.id)},[l,c,d,a,u]);const U=(K,re)=>{const oe=d?{templateId:t,template_id:t}:{patient_id:g,encounter_id:t};ie.mutate({...oe,type:K,title:re})},X=K=>U("problem",K),J=K=>U("observation",K),he=K=>U("note",K),le=K=>{d?W.mutate({templateId:t,itemId:K}):W.mutate(K)},ee=a(d?"encounters_template_edit":"patient_encounter_edit"),me=a("medical_records_list");return{clinicalData:{problems:{list:j,staticOptions:ge},observations:{list:_,staticOptions:ae},notes:h,patientId:g,isEncounterTemplate:d},handlers:{addProblem:X,addObservation:J,addNote:he,deleteMedicalHistory:le},permissions:{canEditEncounter:ee,canUpdateEncounter:A,canViewMedicalRecords:me},uiState:{showProblems:x,showObservations:b,showNote:w,setShowProblems:y,setShowObservations:k,setShowNote:T}}},Ao={getReports:(t,e={})=>ve({endpoint:"patient-medical-reports",method:"GET",data:{patient_id:t,...e}}),getReport:t=>ve({endpoint:`patient-medical-reports/${t}`,method:"GET"}),createReport:t=>ve({endpoint:"patient-medical-reports",method:"POST",data:t}),updateReport:(t,e)=>ve({endpoint:`patient-medical-reports/${t}`,method:"PUT",data:e}),deleteReport:t=>ve({endpoint:`patient-medical-reports/${t}`,method:"DELETE"}),printReport:t=>ve({endpoint:`patient-medical-reports/print/${t}`,method:"GET",responseType:"blob"}),sendReports:t=>ve({endpoint:"patient-medical-reports/send-email",method:"POST",data:t})},xr={all:["patientMedicalReports"],lists:()=>[...xr.all,"list"],list:(t,e={})=>[...xr.lists(),{patientId:t,params:e}],details:()=>[...xr.all,"detail"],detail:t=>[...xr.details(),t]},ree=(t,e={},n={})=>ft({queryKey:xr.list(t,e),queryFn:()=>Ao.getReports(t,e),enabled:!!t,...n}),lee=()=>{const t=ze();return Le({mutationFn:e=>Ao.createReport(e),onSuccess:(e,n)=>{t.invalidateQueries({queryKey:xr.list(n.patient_id)})}})},oee=()=>{const t=ze();return Le({mutationFn:({id:e,...n})=>Ao.updateReport(e,n),onSuccess:(e,n)=>{t.invalidateQueries({queryKey:xr.detail(n.id)}),n.patient_id&&t.invalidateQueries({queryKey:xr.list(n.patient_id)})}})},cee=()=>{const t=ze();return Le({mutationFn:({id:e,patient_id:n})=>Ao.deleteReport(e),onSuccess:(e,n)=>{n.patient_id&&t.invalidateQueries({queryKey:xr.list(n.patient_id)})}})},dee=()=>Le({mutationFn:t=>Ao.printReport(t)}),mee=()=>Le({mutationFn:t=>Ao.sendReports(t)}),al=({title:t,children:e,className:n=""})=>i.jsx("div",{className:`card ${n}`,children:i.jsxs("div",{className:"card-body",children:[t&&i.jsx("h6",{className:"font-size-14 mb-3",children:t}),e]})}),Pw=({patientId:t,canEditEncounter:e,canUpdateEncounter:n,showViewReport:s=!1})=>{const{isAddonActive:a,allowed_mime_types:l,hasCapability:o}=mt(),c=a("kiviPro");if(!c&&!e)return null;const[d,m]=f.useState(null),[u,h]=f.useState(!1),[p,g]=f.useState([]),[v,x]=f.useState(null),[y,b]=f.useState(""),[k,w]=f.useState(""),[T,j]=f.useState(!1),[D,_]=f.useState([]),[N,A]=f.useState([]),[P,E]=f.useState(!1),[I,M]=f.useState({page:1,perPage:10}),O=lee(),F=oee(),H=cee(),G=ze(),{data:z,isLoading:ie}=ree(t,I,{enabled:c&&!!t}),W=z?.data?.pagination||{total:0,total_pages:1,per_page:10,current_page:1},ge=mee();f.useEffect(()=>{z?.data?.reports&&g(z.data.reports.map(Y=>({id:Y.id,name:Y.name||"",date:Y.date||"",file:Y.file||null})))},[z]);const ae=Y=>{Y&&kt({title:r("Delete Report?","kivicare-clinic-management-system"),text:r("You're about to delete this report.<br>This action cannot be undone.","kivicare-clinic-management-system"),icon:"ph-warning",confirmButtonText:r("Delete permanently","kivicare-clinic-management-system"),cancelButtonText:r("Keep report","kivicare-clinic-management-system"),confirmButtonClass:"btn-danger"}).then(q=>{q.isConfirmed&&(yt({title:r("Deleting Report...","kivicare-clinic-management-system"),text:r("Please wait while we remove the selected report.<br>This won't take long.","kivicare-clinic-management-system")}),H.mutate({id:Y,patient_id:t},{onSuccess:B=>{Tt({title:r("Report Deleted","kivicare-clinic-management-system"),text:B?.message||r("Report has been deleted successfully.","kivicare-clinic-management-system"),confirmButtonText:r("OK","kivicare-clinic-management-system")})},onError:B=>{console.error("Delete report error:",B);const se=B?.response?.data?.message||B?.message||r("Failed to delete report. Please try again.","kivicare-clinic-management-system");rt({text:se})}}))})},{register:U,handleSubmit:X,reset:J,setValue:he,formState:{errors:le},control:ee}=en({defaultValues:{name:"",date:"",file:null}}),me=Y=>{let q=Y.file;Array.isArray(q)&&(q=q[0]);const B={...Y,file:q};if(d!==null){const Q=[...p];Q[d]=B,g(Q),m(null)}else g([...p,B]);const se={patient_id:t,name:Y.name,date:Y.date,upload_report:q.id};v?(F.mutate({id:v,...se}),x(null),Se.success(r("Report updated successfully","kivicare-clinic-management-system"))):(O.mutate(se),Se.success(r("Report created successfully","kivicare-clinic-management-system"))),J(),h(!1),b(""),w("")},K=Y=>{const q=p.find(B=>String(B.id)===String(Y));q&&(m(Y),h(!0),x(q.id),he("name",q.name),he("date",q.date),he("file",q.file),q.file?q.file instanceof File?(b(URL.createObjectURL(q.file)),w("")):q.file.url?(b(q.file.url),w(q.file.id||"")):typeof q.file=="string"?(b(q.file),w("")):(b(""),w("")):(b(""),w("")))},{mutate:re}=dee(),oe=Y=>{re(Y,{onSuccess:q=>{const B=q instanceof Blob?q:new Blob([q],{type:q.type||"application/pdf"}),se=URL.createObjectURL(B),Q=window.open(se,"_blank");Q&&(Q.onload=()=>{URL.revokeObjectURL(se)})},onError:q=>{rt({text:q?.response?.data?.message||q?.message||r("Failed to open report","kivicare-clinic-management-system")})}})},C=()=>{J(),h(!1),b(""),w(""),m(null)},R=[{header:r("Name","kivicare-clinic-management-system"),accessorKey:"name",cell:Y=>Y.getValue()},{header:r("Date","kivicare-clinic-management-system"),accessorKey:"date",cell:Y=>Y.getValue()},{header:r("Actions","kivicare-clinic-management-system"),accessorKey:"actions",enableSorting:!1,cell:Y=>{const q=se=>Q=>i.jsx(ut,{id:`tooltip-${Y.cell.row.original.id}-${se}`,...Q,children:se}),B=Y.row.original.id;return i.jsxs("div",{className:"d-flex gap-2",children:[o("patient_report_edit")&&i.jsx(Qe,{placement:"top",overlay:q(r("Edit Report","kivicare-clinic-management-system")),children:i.jsx("button",{type:"button",className:"btn btn-sm text-primary fs-5",onClick:()=>K(B),children:i.jsx("i",{className:"ph ph-pencil-simple"})})}),i.jsx(Qe,{placement:"top",overlay:q(r("View Report","kivicare-clinic-management-system")),children:i.jsx("button",{className:"btn btn-sm text-primary fs-5",onClick:()=>oe(B),children:i.jsx("i",{className:"ph ph-eye"})})}),o("patient_report_delete")&&i.jsx(Qe,{placement:"top",overlay:q(r("Delete Report","kivicare-clinic-management-system")),children:i.jsx("button",{type:"button",className:"btn btn-sm text-danger fs-5",onClick:()=>ae(B),children:i.jsx("i",{className:"ph ph-trash"})})})]})}}],te={name:{required:r("Report name is required","kivicare-clinic-management-system"),minLength:{value:2,message:r("Report name must be at least 2 characters","kivicare-clinic-management-system")}},date:{required:r("Date is required","kivicare-clinic-management-system")},file:{required:r("File is required","kivicare-clinic-management-system")}},ne=async({page:Y,per_page:q,search:B})=>{try{const se=["patientMedicalReports",t,Y,q,B],Q=await G.fetchQuery({queryKey:se,queryFn:()=>Ao.getReports(t,{page:Y,per_page:q,search:B}),staleTime:300*1e3}),$=(Q.data?.reports||[]).map(ce=>({value:ce.id,label:`${ce.name} - ${ce.date}`}));return A(ce=>[...ce,...$]),{data:$,pagination:Q.data?.pagination||{}}}catch(se){return console.error("Error loading report options:",se),{data:[],pagination:{has_more:!1}}}};return i.jsxs("div",{className:"position-relative",children:[!c&&i.jsx(di,{text:r("Medical Report feature is available in KiviCare Pro. Upgrade to Pro to unlock uploading and managing patient medical reports.","kivicare-clinic-management-system"),link:"https://codecanyon.net/item/kivicare-pro-clinic-patient-management-system-ehr-addon/30690654?s_rank=3"}),i.jsxs("div",{className:"d-flex align-items-center gap-2 flex-wrap mb-3 justify-content-between",children:[i.jsx("h6",{children:r("Uploaded Reports","kivicare-clinic-management-system")}),(o("patient_report_add")||o("patient_report_view"))&&i.jsxs("div",{className:"d-flex align-items-center gap-2 flex-wrap",children:[o("patient_report_add")&&i.jsxs("button",{className:"btn btn-secondary d-flex align-items-center gap-2",type:"button",onClick:()=>{h(Y=>!Y),J(),b(""),w(""),m(null),x(null)},children:[i.jsx("i",{className:"ph ph-plus-circle"}),i.jsx("span",{children:r("Add Report","kivicare-clinic-management-system")})]}),o("patient_report_view")&&i.jsxs("button",{className:"btn btn-primary d-flex align-items-center gap-2",type:"button",onClick:()=>j(!0),children:[i.jsx("i",{className:"ph ph-envelope"}),i.jsx("span",{children:r("Send Email","kivicare-clinic-management-system")})]})]})]}),u&&i.jsx(al,{className:`${s?"":"bg-body"}`,children:i.jsxs("form",{onSubmit:X(me),children:[i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-xl-4 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[r("Name","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-reuquired",children:"*"})]}),i.jsx("input",{className:`form-control ${le.name?"is-invalid":""}`,type:"text",...U("name",te.name),placeholder:"eg Blood Test Report"}),le.name&&i.jsx("div",{className:"invalid-feedback d-block",children:le.name.message})]})}),i.jsx("div",{className:"col-xl-4 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[r("Date","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-reuquired",children:"*"})]}),i.jsx(ye,{name:"date",control:ee,rules:te.date,render:({field:Y})=>i.jsx(Un,{id:"date",className:`form-control ${le.date?"is-invalid":""}`,value:Y.value?Zn(Y.value):"",onChange:q=>{if(q&&q[0]){const B=q[0],se=B.getFullYear(),Q=String(B.getMonth()+1).padStart(2,"0"),pe=String(B.getDate()).padStart(2,"0");Y.onChange(`${se}-${Q}-${pe}`)}else Y.onChange("")},options:{dateFormat:xi(window.kc_frontend.date_format),maxDate:new Date,disableMobile:!0,locale:Wn()},placeholder:r("Select date","kivicare-clinic-management-system")})}),le.date&&i.jsx("div",{className:"invalid-feedback d-block",children:le.date.message})]})}),i.jsxs("div",{className:"col-xl-4 col-md-6",children:[i.jsx(cu,{id:"report-file",name:"file",label:r("Upload File","kivicare-clinic-management-system"),accept:l?Object.values(l).join(","):".jpg,.jpeg,.png,.gif,.webp,.bmp,.svg,.tiff,.ico,.pdf",className:`${le.file?"is-invalid":""}`,...U("file",te.file),onChange:Y=>{he("file",Y.file||Y,{shouldValidate:!0}),b(Y.url||(Y.file?URL.createObjectURL(Y.file):"")),w(Y.id||"")},required:!0,defaultFile:y,defaultFileId:k,disabled:v!==null}),le.file&&i.jsx("div",{className:"invalid-feedback d-block",children:le.file.message})]})]}),i.jsxs("div",{className:"d-flex align-items-center justify-content-end flex-wrap gap-3 mt-4",children:[i.jsx("button",{className:"btn btn-secondary",type:"button",onClick:C,children:r("Cancel","kivicare-clinic-management-system")}),i.jsx("button",{className:"btn btn-primary",type:"submit",children:r("Save","kivicare-clinic-management-system")})]})]})}),i.jsx("div",{className:"mt-4",children:i.jsx(wn,{data:z?.data?.reports||[],columns:R,enableSelection:!1,currentPage:W.current_page,perPage:W.per_page,totalItems:W.total,lastPage:W.total_pages,onPageChange:Y=>M(q=>({...q,page:Y})),onPerPageChange:Y=>M(q=>({...q,perPage:Y,page:1})),renderEmptyState:()=>i.jsx("tr",{children:i.jsx("td",{colSpan:R.length,className:"text-center py-4 border-start border-end",children:r("No data added","kivicare-clinic-management-system")})}),moduleNamePlural:r("reports","kivicare-clinic-management-system"),isLoading:ie})}),i.jsxs(lt,{show:T,onHide:()=>{j(!1),_([])},size:"md",backdrop:"static",centered:!0,children:[i.jsx(lt.Header,{closeButton:!0,children:i.jsx(lt.Title,{children:r("Send Email","kivicare-clinic-management-system")})}),i.jsxs(lt.Body,{children:[i.jsx("p",{children:r("Select reports to send via email:","kivicare-clinic-management-system")}),i.jsx(rn,{id:"report-select",placeholder:r("Select reports","kivicare-clinic-management-system"),className:"react-select-box",classNamePrefix:"react-select",loadOptions:ne,isMulti:!0,closeMenuOnSelect:!1,value:D.map(Y=>{const q=N.find(B=>B.value===Y);return q?{value:q.value,label:q.label}:null}).filter(Boolean),onChange:Y=>{_(Y?Y.map(q=>q.value):[])},dependencies:{}})]}),i.jsxs(lt.Footer,{children:[i.jsx("button",{type:"button",className:"btn btn-secondary me-2",onClick:()=>{j(!1),_([])},disabled:P,children:r("Cancel","kivicare-clinic-management-system")}),i.jsx("button",{type:"button",className:"btn btn-primary",onClick:()=>{if(D.length===0){Se.error(r("Please select reports","kivicare-clinic-management-system"));return}E(!0),ge.mutate({report_ids:D,patient_id:t},{onSuccess:()=>{Se.success(r("Reports sent successfully","kivicare-clinic-management-system")),j(!1),_([]),E(!1)},onError:Y=>{Se.error(Y?.response?.data?.message||r("Failed to send reports","kivicare-clinic-management-system")),E(!1)}})},disabled:P,children:P?i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),r("Sending...","kivicare-clinic-management-system")]}):r("Send","kivicare-clinic-management-system")})]})]})]})},uee=({patientId:t,permissions:e})=>i.jsx(_t,{children:i.jsx(qa,{children:i.jsx(Pw,{patientId:t,canEditEncounter:e.canEditEncounter,canUpdateEncounter:e.canUpdateEncounter})})});var hee=["allowCreateWhileLoading","createOptionPosition","formatCreateLabel","isValidNewOption","getNewOptionData","onCreateOption","options","onChange"],bC=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",n=arguments.length>1?arguments[1]:void 0,s=arguments.length>2?arguments[2]:void 0,a=String(e).toLowerCase(),l=String(s.getOptionValue(n)).toLowerCase(),o=String(s.getOptionLabel(n)).toLowerCase();return l===a||o===a},Jv={formatCreateLabel:function(e){return'Create "'.concat(e,'"')},isValidNewOption:function(e,n,s,a){return!(!e||n.some(function(l){return bC(e,l,a)})||s.some(function(l){return bC(e,l,a)}))},getNewOptionData:function(e,n){return{label:n,value:e,__isNew__:!0}}};function pee(t){var e=t.allowCreateWhileLoading,n=e===void 0?!1:e,s=t.createOptionPosition,a=s===void 0?"last":s,l=t.formatCreateLabel,o=l===void 0?Jv.formatCreateLabel:l,c=t.isValidNewOption,d=c===void 0?Jv.isValidNewOption:c,m=t.getNewOptionData,u=m===void 0?Jv.getNewOptionData:m,h=t.onCreateOption,p=t.options,g=p===void 0?[]:p,v=t.onChange,x=Qa(t,hee),y=x.getOptionValue,b=y===void 0?T2:y,k=x.getOptionLabel,w=k===void 0?E2:k,T=x.inputValue,j=x.isLoading,D=x.isMulti,_=x.value,N=x.name,A=f.useMemo(function(){return d(T,dp(_),g,{getOptionValue:b,getOptionLabel:w})?u(T,o(T)):void 0},[o,u,w,b,T,d,g,_]),P=f.useMemo(function(){return(n||!j)&&A?a==="first"?[A].concat(dc(g)):[].concat(dc(g),[A]):g},[n,a,j,A,g]),E=f.useCallback(function(I,M){if(M.action!=="select-option")return v(I,M);var O=Array.isArray(I)?I:[I];if(O[O.length-1]===A){if(h)h(T);else{var F=u(T,T),H={action:"create-option",name:N,option:F};v(Bd(D,[].concat(dc(dp(_)),[F]),F),H)}return}v(I,M)},[u,T,D,N,A,h,v,_]);return Ot(Ot({},x),{},{options:P,onChange:E})}var gee=f.forwardRef(function(t,e){var n=GE(t),s=pee(n);return f.createElement(ik,Bt({ref:e},s))}),mu=gee;Ae.string.isRequired,Ae.string,Ae.string,Ae.array.isRequired,Ae.func.isRequired,Ae.array.isRequired,Ae.func.isRequired,Ae.bool.isRequired,Ae.func.isRequired,Ae.object,Ae.string,Ae.func,Ae.func,Ae.bool,Ae.string,Ae.bool,Ae.bool,Ae.bool,Ae.func;const fee=({recordData:t,permissions:e,show:n,onToggle:s})=>{const{type:a,encounter_id:l,patient_id:o,isEncounterTemplate:c}=t,[d,m]=f.useState({title:"",type:a,encounter_id:l}),[u,h]=f.useState(!1),[p,g]=f.useState(!1),v=ze(),{hasCapability:x}=mt(),y=a==="note",{data:b}=Ha(y?null:a==="problem"?"clinical_problems":"clinical_observations"),k=f.useMemo(()=>b?.data?b.data.map(z=>({value:z.value||z.id,label:z.label})):[],[b]),w=c?Gh(l,{type:a},{enabled:n}):Kh({patient_id:o,encounter_id:l,type:a},{enabled:n&&!!o}),T=f.useMemo(()=>(c?w?.data?.data?.items||[]:w?.data?.data?.histories||[]).map(ie=>({...ie,title:ie.clinical_detail_val||ie.title})),[w,c]),j=c?Py():Ry(),D=c?sP():iP();c?Py():Ry();const _=z7(),N=V7();f.useMemo(()=>{const z=T.map(ie=>ie.title);return k.filter(ie=>!z.includes(ie.label))},[k,T]),f.useEffect(()=>{m(z=>({...z,encounter_id:l}))},[l]);const A=async z=>{const ie=z;if(g(!0),!!ie.trim()){h(!0);try{const W=c?{templateId:l,template_id:l,type:a,title:ie}:{patient_id:o,encounter_id:l,type:a,title:ie};await j.mutateAsync(W),z||m({title:"",type:a,encounter_id:l}),w.refetch()}catch(W){console.error("Error saving medical history:",W),w.refetch()}finally{h(!1),g(!1)}}},P=z=>{const ie=c?vr.list(l,{type:a}):Kl.list({patient_id:o,encounter_id:l,type:a});v.setQueryData(ie,W=>{const ge={id:Date.now(),title:z,clinical_detail_val:z,type:a,label:z};return W?c?{...W,data:{...W?.data,items:[...W?.data?.items||[],ge]}}:{...W,data:{...W?.data,histories:[...W?.data?.histories||[],ge]}}:c?{data:{items:[ge]}}:{data:{histories:[ge]}}})},E=z=>{const ie=c?vr.list(l,{type:a}):Kl.list({patient_id:o,encounter_id:l,type:a});v.setQueryData(ie,W=>W&&(c?{...W,data:{...W?.data,items:(W?.data?.items||[]).filter(ge=>ge.id!==z)}}:{...W,data:{...W?.data,histories:(W?.data?.histories||[]).filter(ge=>ge.id!==z)}}))},I=async z=>{E(z);try{c?await D.mutateAsync({templateId:l,itemId:z}):await D.mutateAsync(z),w.refetch()}catch(ie){console.error("Error deleting medical history:",ie),w.refetch()}},M=f.useMemo(()=>a==="problem"?r("Select or type to add problem","kivicare-clinic-management-system"):a==="observation"?r("Select or type to add observation","kivicare-clinic-management-system"):r("Enter note","kivicare-clinic-management-system"),[a]),O=f.useMemo(()=>a==="problem"?r("Select Problems","kivicare-clinic-management-system"):a==="observation"?r("Select Observations","kivicare-clinic-management-system"):r("Notes","kivicare-clinic-management-system"),[a]),F=f.useMemo(()=>a==="problem"?r("Problems","kivicare-clinic-management-system"):a==="observation"?r("Observations","kivicare-clinic-management-system"):r("Notes","kivicare-clinic-management-system"),[a]),H=f.useCallback(async z=>{try{const ie=a==="problem"?"clinical_problems":"clinical_observations",W=await Dt.getStaticDataWithPagination(ie,z),ae=(W?.data||[]).map(J=>({value:J.value||J.id,label:J.label})),U=new Set((z.selectedTitles||"").split("|").filter(Boolean).map(J=>J.toLowerCase().trim()));return{data:ae.filter(J=>{const he=J.label?J.label.toLowerCase().trim():"";return!U.has(he)}),pagination:W?.pagination||{}}}catch(ie){return console.error("Error loading options:",ie),{data:[],pagination:{}}}},[a]),G=async z=>{P(z);const ie=a==="problem"?_:N;ie?ie.mutate(z,{onSuccess:()=>{A(z)},onError:()=>{w.refetch()}}):A(z)};return n?y?i.jsx("div",{className:"col-xl-4 col-md-6",children:i.jsxs("div",{className:"h-100",children:[i.jsx("h6",{children:r("Notes","kivicare-clinic-management-system")}),i.jsxs(al,{className:"bg-body card-block card-stretch card-height card mb-4",children:[e.canEditEncounter&&e.canUpdateEncounter&&i.jsxs("div",{className:"form-group position-relative add-note-input d-flex",children:[i.jsx("textarea",{className:"form-control",placeholder:M,value:d.title,onChange:z=>m(ie=>({...ie,title:z.target.value})),rows:4}),i.jsx("button",{type:"button",className:"btn btn-primary py-1 px-3 add-btn-notes ms-2",onClick:()=>{d.title.trim()&&(P(d.title),A(d.title),m(z=>({...z,title:""})))},disabled:u||!d.title.trim(),children:r("Add","kivicare-clinic-management-system")})]}),T.length>0?i.jsx("ol",{className:"mt-3 mb-0 list-data-scroll",children:T.map(z=>i.jsx("li",{children:i.jsxs("div",{className:"d-flex justify-content-between gap-2",children:[i.jsx("p",{className:"font-size-14 mb-0",children:z.title}),e.canEditEncounter&&e.canUpdateEncounter&&i.jsx("i",{className:"ph ph-x-circle text-danger flex-shrink-0",style:{cursor:"pointer"},onClick:()=>I(z.id)})]})},z.id))}):i.jsx("div",{className:"text-danger mt-4 text-center",children:r("No record found","kivicare-clinic-management-system")})]})]})}):i.jsx("div",{className:"col-xl-4 col-md-6",children:i.jsxs("div",{className:"h-100",children:[i.jsx("h6",{children:F}),i.jsxs("div",{className:"bg-body card-block card-stretch card-height card p-3 mb-4",children:[e.canEditEncounter&&e.canUpdateEncounter&&i.jsx("p",{className:"text-danger font-size-12 fw-bold mb-3",children:r("Note: Type and press enter to create new","kivicare-clinic-management-system")+" "+a}),i.jsx("div",{className:"form-group",children:e.canEditEncounter&&e.canUpdateEncounter&&x("medical_records_add")&&i.jsxs(i.Fragment,{children:[i.jsx("label",{className:"form-label",children:O}),i.jsx(rn,{placeholder:M,loadOptions:H,className:"react-select-box",classNamePrefix:"react-select",dependencies:{type:a,selectedTitles:T.map(z=>z.title).sort().join("|")},isCreatable:!0,onCreateOption:G,formatCreateLabel:z=>r("Add","kivicare-clinic-management-system")+` ${F}: "${z}"`,onChange:z=>{z&&(P(z.label),A(z.label))},value:null,isClearable:!0,isLoading:!1,noCache:!0},`select-${T.map(z=>z.title).sort().join("|")}`)]})}),T.length>0?i.jsx("ol",{className:"mt-4 mb-0 list-data-scroll",children:T.map(z=>i.jsx("li",{children:i.jsxs("div",{className:"d-flex justify-content-between gap-2",children:[i.jsx("span",{className:"text-break",children:z.title}),e.canEditEncounter&&e.canUpdateEncounter&&x("medical_records_delete")&&i.jsx("i",{className:"ph ph-x-circle text-danger flex-shrink-0",style:{cursor:"pointer"},onClick:()=>I(z.id)})]})},z.id))}):i.jsx("div",{className:"card-body text-danger mt-4 text-center",children:r("No record found","kivicare-clinic-management-system")})]})]})}):null},Do={getPrescriptions:(t={})=>ve({endpoint:"prescriptions",method:"GET",data:t}),getPrescription:t=>ve({endpoint:`prescriptions/${t}`,method:"GET"}),createPrescription:t=>ve({endpoint:"prescriptions",method:"POST",data:t}),updatePrescription:(t,e)=>ve({endpoint:`prescriptions/${t}`,method:"PUT",data:e}),deletePrescription:t=>ve({endpoint:`prescriptions/${t}`,method:"DELETE"}),printPrescriptions:t=>ve({endpoint:`prescriptions/encounter/${t}/print`,method:"GET",responseType:"blob"}),exportPrescriptions:(t={})=>ve({endpoint:"prescriptions/export",method:"GET",data:t}),sendPrescriptionEmail:(t={})=>ve({endpoint:`prescriptions/${t.encounter_id}/email`,method:"POST",data:t})},ls={all:["prescriptions"],lists:()=>[...ls.all,"list"],list:t=>[...ls.lists(),{params:t}],details:()=>[...ls.all,"detail"],detail:t=>[...ls.details(),t]},vee=(t={},e={})=>ft({queryKey:ls.list(t),queryFn:()=>Do.getPrescriptions(t),...e}),xee=()=>{const t=ze();return Le({mutationFn:e=>Do.createPrescription(e),onSuccess:(e,n)=>{t.invalidateQueries({queryKey:ls.lists()}),n?.patient_id&&t.invalidateQueries({queryKey:ls.list({patient_id:n.patient_id})}),n?.encounter_id&&t.invalidateQueries({queryKey:ls.list({encounter_id:n.encounter_id})})}})},yee=()=>{const t=ze();return Le({mutationFn:({id:e,...n})=>Do.updatePrescription(e,n),onSuccess:(e,n)=>{t.invalidateQueries({queryKey:ls.detail(n.id)}),n?.patient_id&&t.invalidateQueries({queryKey:ls.list({patient_id:n.patient_id})}),n?.encounter_id&&t.invalidateQueries({queryKey:ls.list({encounter_id:n.encounter_id})})}})},bee=()=>{const t=ze();return Le({mutationFn:({id:e})=>Do.deletePrescription(e),onSuccess:(e,n)=>{t.invalidateQueries({queryKey:ls.lists()}),n?.patient_id&&t.invalidateQueries({queryKey:ls.list({patient_id:n.patient_id})}),n?.encounter_id&&t.invalidateQueries({queryKey:ls.list({encounter_id:n.encounter_id})})}})},kee=()=>Le({mutationFn:t=>Do.printPrescriptions(t)}),wee=()=>Le({mutationFn:t=>Do.exportPrescriptions(t)}),jee=()=>Le({mutationFn:t=>Do.sendPrescriptionEmail(t)}),sf={getEncounterTemplatePrescriptions:t=>ve({endpoint:`encounter-templates/${t}/prescriptions`,method:"GET"}),createEncounterTemplatePrescription:(t,e)=>ve({endpoint:`encounter-templates/${t}/prescriptions`,method:"POST",data:e}),updateEncounterTemplatePrescription:(t,e,n)=>ve({endpoint:`encounter-templates/${t}/prescriptions/${e}`,method:"PUT",data:n}),deleteEncounterTemplatePrescription:(t,e)=>ve({endpoint:`encounter-templates/${t}/prescriptions/${e}`,method:"DELETE"})},rl={all:["encounterTemplatePrescription"],lists:()=>[...rl.all,"list"],list:t=>[...rl.lists(),t],details:()=>[...rl.all,"detail"],detail:(t,e)=>[...rl.details(),t,e]},Nee=(t,e={})=>ft({queryKey:rl.list(t),queryFn:()=>sf.getEncounterTemplatePrescriptions(t),...e}),Cee=()=>{const t=ze();return Le({mutationFn:({templateId:e,...n})=>sf.createEncounterTemplatePrescription(e,n),onSuccess:e=>{t.invalidateQueries(rl.list(e.templateId))}})},_ee=()=>{const t=ze();return Le({mutationFn:({templateId:e,id:n,...s})=>sf.updateEncounterTemplatePrescription(e,n,s),onSuccess:(e,n)=>{t.invalidateQueries(rl.list(n.templateId))}})},See=()=>{const t=ze();return Le({mutationFn:({templateId:e,itemId:n})=>sf.deleteEncounterTemplatePrescription(e,n),onSuccess:e=>{t.invalidateQueries(rl.list(e.templateId))}})},Eee=({patientId:t,encounterId:e,permissions:n})=>{const{prescription_modules:s,loading:a}=mt();if(!f.useMemo(()=>{if(a||!Array.isArray(s))return!0;const B=s.find(se=>se.name==="prescription");return B?B.status==1:!0},[a,s]))return null;const o=ze(),{isAddonActive:c,hasCapability:d}=mt(),m=qm(),{isEncounterTemplate:u}=m[m.length-1].handle.meta,{canEditEncounter:h,canUpdateEncounter:p}=n,[g,v]=f.useState(null),[x,y]=f.useState(!1),[b,k]=f.useState(!1),w=c("kiviPro"),T=xee(),j=yee(),D=bee(),_=Cee(),N=_ee(),A=See(),P=kee(),E=wee(),I=jee(),{data:M,isLoading:O}=Ha("prescription_medicine"),F=U7(),{data:H,isLoading:G}=u?Nee(e,{enabled:!0}):vee({patient_id:t,encounter_id:e}),z=H?.data?.items||H?.data||[],{register:ie,handleSubmit:W,reset:ge,setValue:ae,control:U,formState:{errors:X}}=en({defaultValues:{name:"",frequency:"",duration:"",instruction:""}}),J=B=>{v(B),y(!0);const se=z[B];ae("name",{label:se.name,value:se.name}),ae("frequency",se.frequency),ae("duration",se.duration),ae("instruction",se.instruction)},he=B=>{const se={patient_id:t,encounter_id:e,name:B.name?.label||B.name,frequency:B.frequency,duration:B.duration,instruction:B.instruction,added_by:1};if(g!==null&&z[g])u?N.mutate({templateId:e,id:z[g].id,...se}):j.mutate({id:z[g].id,...se}),Se.success(r("Prescription updated successfully","kivicare-clinic-management-system"),{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0});else{const Q=u?_:T,pe=u?{templateId:e,name:B.name?.label||B.name,frequency:B.frequency,duration:B.duration,instruction:B.instruction}:se;Q.mutate(pe),Se.success(r("Prescription created successfully","kivicare-clinic-management-system"),{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0})}ge(),y(!1),v(null)},le=()=>{ge(),y(!1),v(null)},ee=B=>{const se=z[B];se?.id&&kt({title:r("Delete Prescription?","kivicare-clinic-management-system"),text:r("You're about to delete this prescription.<br>This action cannot be undone.","kivicare-clinic-management-system"),icon:"ph-warning",confirmButtonText:r("Delete permanently","kivicare-clinic-management-system"),cancelButtonText:r("Keep prescription","kivicare-clinic-management-system"),confirmButtonClass:"btn-danger"}).then(Q=>{if(Q.isConfirmed){yt({title:r("Deleting Prescription...","kivicare-clinic-management-system"),text:r("Please wait while we remove the selected prescription.<br>This won't take long.","kivicare-clinic-management-system")});const pe=u?A:D,$=u?{templateId:e,id:se.id}:{id:se.id,patient_id:t,encounter_id:e};pe.mutate($,{onSuccess:ce=>{Tt({title:r("Prescription Deleted","kivicare-clinic-management-system"),text:ce?.message||r("Prescription has been deleted successfully.","kivicare-clinic-management-system"),confirmButtonText:r("OK","kivicare-clinic-management-system")})},onError:ce=>{console.error("Delete prescription error:",ce);const De=ce?.response?.data?.message||ce?.message||r("Failed to delete prescription. Please try again.","kivicare-clinic-management-system");rt({text:De})}})}})},me=[{header:r("Name","kivicare-clinic-management-system"),accessorKey:"name",cell:B=>B.getValue()},{header:r("Frequency","kivicare-clinic-management-system"),accessorKey:"frequency",cell:B=>B.getValue()},{header:r("Duration","kivicare-clinic-management-system"),accessorKey:"duration",cell:B=>{const se=B.getValue();return se?`${se} ${r("days","kivicare-clinic-management-system")}`:r("N/A","kivicare-clinic-management-system")}},{header:r("Instruction","kivicare-clinic-management-system"),accessorKey:"instruction",cell:B=>B.getValue()||r("No data added","kivicare-clinic-management-system")},...Yi()?[]:[{header:r("Actions","kivicare-clinic-management-system"),accessorKey:"actions",enableSorting:!1,cell:B=>{const se=B.row.index;return p?i.jsxs("div",{className:"d-flex gap-2",children:[(u||d("prescription_edit"))&&i.jsx("button",{type:"button",className:"btn btn-sm text-primary fs-5",onClick:()=>J(se),children:i.jsx("i",{className:"ph ph-pencil-simple"})}),d("prescription_delete")&&i.jsx("button",{type:"button",className:"btn btn-sm text-danger fs-5",onClick:()=>ee(se),children:i.jsx("i",{className:"ph ph-trash"})})]}):i.jsx("div",{className:"text-center text-muted",children:"-"})}}]],K={name:{required:r("Prescription name is required","kivicare-clinic-management-system")},frequency:{required:r("Frequency is required","kivicare-clinic-management-system"),pattern:{value:/^[1-9][0-9]*$/,message:r("Frequency must be a number greater than zero","kivicare-clinic-management-system")}},duration:{required:r("Duration is required","kivicare-clinic-management-system"),pattern:{value:/^[1-9][0-9]*$/,message:r("Duration must be a number greater than zero","kivicare-clinic-management-system")}}},re=()=>{const B={onSuccess:se=>{const Q=new Blob([se],{type:"application/pdf"}),pe=URL.createObjectURL(Q);window.open(pe,"_blank"),setTimeout(()=>URL.revokeObjectURL(pe),100)},onError:se=>{Se.error(se?.response?.data?.message||r("Failed to print prescriptions","kivicare-clinic-management-system"))}};P.mutate(e,B)},oe=async B=>({success:!0}),C=()=>{o.invalidateQueries(["prescriptions",{patient_id:t,encounter_id:e}])},R=async B=>{try{yt({title:r("Exporting...","kivicare-clinic-management-system"),text:r("Please wait. This may take a few seconds.","kivicare-clinic-management-system")});const se={format:B,patient_id:t,encounter_id:e},Q=await E.mutateAsync(se);if(Q?.data?.prescriptions){const pe=new Date().toISOString().split("T")[0],$=Q.data.prescriptions;switch(B){case"csv":hs($,`prescriptions-${pe}.csv`);break;case"xls":ps($,`prescriptions-${pe}.xls`);break;case"pdf":gs($,`prescriptions-${pe}.pdf`,"Prescriptions List");break;default:throw new Error("Invalid export format")}Wi(),Se.success(r("Export completed successfully.","kivicare-clinic-management-system"))}else throw new Error("No data received from server")}catch(se){console.error("Export error:",se),rt({title:r("Error!","kivicare-clinic-management-system"),text:se.message||r("Failed to export data. Please try again.","kivicare-clinic-management-system"),confirmButtonText:r("OK","kivicare-clinic-management-system")})}},te=()=>R("csv"),ne=()=>R("xls"),Y=()=>R("pdf"),q=()=>{I.mutate({encounter_id:e},{onSuccess:B=>{Se.success(B?.message||r("Prescription email sent successfully","kivicare-clinic-management-system"),{position:"top-right",autoClose:3e3})},onError:B=>{Se.error(B?.response?.data?.message||r("Failed to send prescription email","kivicare-clinic-management-system"),{position:"top-right",autoClose:3e3})}})};return i.jsxs(i.Fragment,{children:[d("prescription_list")&&i.jsx(_t,{children:i.jsxs(qa,{children:[i.jsxs("div",{className:"d-flex align-items-center gap-2 flex-wrap justify-content-between mb-3",children:[i.jsx("h5",{children:r("Prescription","kivicare-clinic-management-system")}),i.jsxs("div",{className:"d-flex align-items-center gap-3 flex-wrap",children:[!u&&i.jsxs(i.Fragment,{children:[z.length>0&&h&&i.jsx("button",{className:"btn btn-primary",type:"button",onClick:q,children:r("Email","kivicare-clinic-management-system")}),p&&i.jsx("button",{className:"btn btn-primary",type:"button",onClick:()=>k(!0),children:r("Import","kivicare-clinic-management-system")}),w&&z.length>0&&i.jsx(i.Fragment,{children:i.jsxs("button",{className:"btn btn-primary",type:"button",onClick:re,children:[i.jsx("i",{className:"ph ph-printer"})," ",r("Print","kivicare-clinic-management-system")]})})]}),p&&d("prescription_add")&&i.jsxs("button",{className:"btn btn-secondary d-flex align-items-center gap-2",type:"button",onClick:()=>y(B=>!B),children:[i.jsx("i",{className:"ph ph-plus-circle"}),i.jsx("span",{children:r("Add Prescription","kivicare-clinic-management-system")})]})]})]}),w&&!u&&z.length>0&&i.jsx("div",{className:"d-flex align-items-center justify-content-end gap-2 flex-wrap mb-3",children:d("prescription_export")&&i.jsxs("div",{className:"download-buttons d-flex align-items-center gap-2",children:[i.jsx("button",{className:"btn btn-import-bg",onClick:te,title:r("Export CSV","kivicare-clinic-management-system"),children:i.jsx("i",{className:"ph ph-file-csv"})}),i.jsx("button",{className:"btn btn-import-bg",onClick:ne,title:r("Export Excel","kivicare-clinic-management-system"),children:i.jsx("i",{className:"ph ph-file-xls"})}),i.jsx("button",{className:"btn btn-import-bg",onClick:Y,title:r("Export PDF","kivicare-clinic-management-system"),children:i.jsx("i",{className:"ph ph-file-pdf"})})]})}),x&&i.jsx(al,{className:"bg-body",children:i.jsxs("form",{onSubmit:W(he),children:[i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-xl-4 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[r("Name","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-reuquired",children:"*"})]}),i.jsx(ye,{name:"name",control:U,rules:K.name,render:({field:B})=>i.jsx(mu,{id:"prescription-name",...B,isClearable:!0,options:M?.data??[],placeholder:r("Select or create medicine","kivicare-clinic-management-system"),className:`react-select-container ${X.name?"is-invalid":""} react-select-box`,classNamePrefix:"react-select",isLoading:O||F.isPending,getOptionValue:se=>{const Q=se.value??se.id;return Q!=null?String(Q):""},getOptionLabel:se=>se.label,onChange:se=>{B.onChange(se)},onCreateOption:se=>{F.mutate(se,{onSuccess:Q=>{if(Q?.data){const pe=Q.data?.data?.id||Q.data?.id,$=Q.data?.data?.label||se,ce={id:parseInt(pe,10),value:parseInt(pe,10),label:$};B.onChange(ce)}else B.onChange({label:se,value:se});Se.success(r("Medicine added successfully","kivicare-clinic-management-system"))},onError:Q=>{console.error("Failed to save medicine:",Q);const pe={label:se,value:se};B.onChange(pe),Se.error(r("Failed to save medicine to database, but it will be used for this form submission.","kivicare-clinic-management-system"))}})},noOptionsMessage:()=>r("Type to create a new medicine","kivicare-clinic-management-system"),formatCreateLabel:se=>r("Add medicine","kivicare-clinic-management-system")+`: "${se}"`})}),i.jsxs("small",{className:"text-muted mt-1 d-block",children:[i.jsx("span",{className:"text-primary",children:r("Note:","kivicare-clinic-management-system")})," ",r("Type and press enter to add new prescription","kivicare-clinic-management-system")]}),X.name&&i.jsx("div",{className:"invalid-feedback d-block",children:X.name.message})]})}),i.jsx("div",{className:"col-xl-4 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[r("Frequency","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-reuquired",children:"*"})]}),i.jsx("input",{className:`form-control ${X.frequency?"is-invalid":""}`,type:"text",...ie("frequency",K.frequency),placeholder:'eg "1"(times per day)'}),X.frequency&&i.jsx("div",{className:"invalid-feedback d-block",children:X.frequency.message})]})}),i.jsx("div",{className:"col-xl-4 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[r("Duration (In Days)","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-reuquired",children:"*"})]}),i.jsx("input",{className:`form-control ${X.duration?"is-invalid":""}`,type:"text",...ie("duration",K.duration),placeholder:'eg "5" (days)'}),X.duration&&i.jsx("div",{className:"invalid-feedback d-block",children:X.duration.message})]})}),i.jsxs("div",{className:"form-group",children:[i.jsx("label",{className:"form-label h6",children:r("Instruction","kivicare-clinic-management-system")}),i.jsx("textarea",{className:"form-control",rows:"2",...ie("instruction"),placeholder:'eg "Drink milk after taking pills"'})]})]}),i.jsxs("div",{className:"d-flex align-items-center justify-content-end flex-wrap gap-3 mt-4",children:[i.jsx("button",{className:"btn btn-secondary",type:"button",onClick:le,children:r("Cancel","kivicare-clinic-management-system")}),i.jsx("button",{className:"btn btn-primary",type:"submit",children:r("Save","kivicare-clinic-management-system")})]})]})}),i.jsx("div",{className:"mt-4",children:i.jsx(wn,{data:z,columns:me,enableSelection:!1,isLoading:G,skeletonColumns:4,skeletonRows:3,striped:!0,bordered:!0,hover:!0,responsive:!0,moduleNamePlural:r("prescriptions","kivicare-clinic-management-system"),renderEmptyState:()=>i.jsx("tr",{children:i.jsx("td",{colSpan:me.length,className:"text-center py-4 border-start border-end",children:r("No data added","kivicare-clinic-management-system")})})})})]})}),w&&i.jsx(Lr,{show:b,onHide:()=>k(!1),onImport:oe,onReopenImport:()=>k(!0),onDataRefresh:C,context:"prescriptions",encounterId:e})]})},lP=()=>{const{id:t}=Yt(),{encounter_modules:e,loading:n}=mt(),{control:s,formState:{errors:a},setValue:l,watch:o}=en(),{encounterCustomFieldData:c}=nf(),{data:d}=Sn(),u=Yi()&&d?.data?.hideClinicalDetailsForPatient===!0,h=f.useCallback(k=>{if(n||!Array.isArray(e))return!0;const w=e.find(T=>T.name===k);return w?w.status==1:!0},[n,e]),p=h("problem"),g=h("observation"),v=h("note"),{clinicalData:x,permissions:y,uiState:b}=aee(t,{isProblemEnabled:p,isObservationEnabled:g,isNoteEnabled:v});return i.jsxs("div",{className:"mt-4",children:[!u&&y.canViewMedicalRecords&&(p||g||v)&&i.jsx(_t,{children:i.jsx(qa,{children:i.jsx("div",{className:"row",children:[{type:"problem",moduleName:"problem",show:b.showProblems,onToggle:b.setShowProblems},{type:"observation",moduleName:"observation",show:b.showObservations,onToggle:b.setShowObservations},{type:"note",moduleName:"note",show:b.showNote,onToggle:b.setShowNote}].map(k=>h(k.moduleName)&&i.jsx(fee,{recordData:{type:k.type,encounter_id:t,patient_id:x.patientId,isEncounterTemplate:x.isEncounterTemplate},permissions:y,show:k.show,onToggle:k.onToggle},k.type))})})}),!x.isEncounterTemplate&&i.jsx(uee,{patientId:x.patientId,permissions:y}),i.jsx(Eee,{patientId:x.patientId,encounterId:t,permissions:y}),i.jsx(tf,{moduleType:"patient_encounter_module",moduleId:parseInt(t),control:s,errors:a,setValue:l,watch:o,initialData:c})]})},Tee=()=>{const{id:t}=Yt(),e=qm(),{isEncounterTemplate:n}=e[e.length-1].handle.meta,s={encounterData:null,isEncounterLoading:!1,encounterError:null,customForms:[],canEditEncounter:!0,canUpdateEncounter:!0,showEditBillModal:!1,showAddServiceItemForm:!1,editFormData:{},setEditFormData:()=>{},setShowAddServiceItemForm:()=>{},handleOpenEditBillModal:()=>{},handleCloseEditBillModal:()=>{},billData:null,encounterStatus:null,patientInfo:null,clinicInfo:null,isAddonActive:()=>!1,isEncounterTemplate:n||!1};return i.jsx(Rw.Provider,{value:s,children:i.jsx("div",{className:"row mb-0",children:i.jsxs("div",{className:"col-12",children:[i.jsx("div",{className:"d-flex align-items-center justify-content-between gap-2 mb-5",children:i.jsx("h6",{className:"m-0",children:r("Other Details","kivicare-clinic-management-system")})}),i.jsx(lP,{})]})})})},kC=()=>i.jsxs("div",{className:"container-fluid pb-0",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center gap-3 flex-wrap mb-4",children:[i.jsx(wo,{items:["50px","120px","120px"]}),i.jsx(st,{width:"80px",height:"32px"})]}),i.jsx(wl,{titleWidth:"140px"}),i.jsxs("form",{className:"mb-0",children:[i.jsx(gt,{children:i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-lg-3 col-sm-6",children:i.jsx(Ne,{labelWidth:"120px",inputHeight:"38px"})}),i.jsx("div",{className:"col-lg-3 col-sm-6",children:i.jsx(Ne,{labelWidth:"100px",inputHeight:"38px"})}),i.jsx("div",{className:"col-lg-3 col-sm-6",children:i.jsx(Ne,{labelWidth:"110px",inputHeight:"38px"})}),i.jsx("div",{className:"col-lg-3 col-sm-6",children:i.jsx(Ne,{labelWidth:"110px",inputHeight:"38px"})}),i.jsx("div",{className:"col-lg-12",children:i.jsx(Ne,{labelWidth:"100px",inputHeight:"60px"})})]})}),i.jsxs("div",{className:"d-flex align-items-center justify-content-end flex-wrap gap-3",children:[i.jsx(st,{width:"80px"}),i.jsx(st,{width:"80px"})]})]})]}),wC=({view:t=null,children:e=null})=>i.jsx("div",{className:"route-container",children:i.jsx("div",{className:"mt-4",children:e||i.jsx(i.Fragment,{children:t==="clinic-detail"?i.jsx(gt,{children:i.jsxs("div",{className:"row",children:[i.jsx("div",{className:"col-md-8",children:i.jsxs("div",{className:"row gy-4",children:[Array.from({length:8}).map((n,s)=>i.jsx("div",{className:"col-md-6",children:i.jsx(Ne,{labelWidth:"100px",inputHeight:"45px"})},s)),i.jsx("div",{className:"col-md-12",children:i.jsx(Ne,{labelWidth:"120px",inputHeight:"100px"})}),i.jsx("div",{className:"col-md-12",children:i.jsx(Ne,{labelWidth:"120px",inputHeight:"100px"})})]})}),i.jsx("div",{className:"col-md-4 border-start",children:i.jsxs("div",{className:"d-flex flex-column align-items-center justify-content-center h-100 py-4",children:[i.jsx(S,{width:"150px",height:"150px",className:"rounded mb-3"}),i.jsx(S,{width:"120px",height:"1rem",className:"mb-3"}),i.jsx(st,{width:"140px",height:"38px"})]})})]})}):t==="body-chart"?i.jsx(_n,{columns:5,rows:5,showHeader:!0,showActions:!0,showPagination:!0,showFilterBar:!0}):t==="custom-form"?i.jsx("div",{className:"card",children:i.jsxs("div",{className:"card-body",children:[i.jsx("div",{className:"custom-form-container",children:i.jsxs("div",{className:"gy-3 row",children:[i.jsx("div",{className:"col-12",children:i.jsx(Ne,{labelWidth:"150px",inputHeight:"38px"})}),i.jsx("div",{className:"col-md-6 col-12",children:i.jsx(Ne,{labelWidth:"120px",inputHeight:"38px"})}),i.jsx("div",{className:"col-md-6 col-12",children:i.jsx(Ne,{labelWidth:"120px",inputHeight:"38px"})}),i.jsxs("div",{className:"col-12",children:[i.jsx("div",{className:"mb-2",children:i.jsx(S,{width:"120px",height:"1rem"})}),i.jsx("div",{className:"d-flex gap-3",children:Array.from({length:4}).map((n,s)=>i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsx(S,{width:"16px",height:"16px",style:{borderRadius:"50%"}}),i.jsx(S,{width:"80px",height:"0.875rem"})]},s))})]}),i.jsx("div",{className:"col-12",children:i.jsx(Ne,{labelWidth:"130px",inputHeight:"80px"})}),i.jsx("div",{className:"col-12",children:i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsx(S,{width:"16px",height:"16px",style:{borderRadius:"4px"}}),i.jsx(S,{width:"200px",height:"0.875rem"})]})}),i.jsxs("div",{className:"col-12",children:[i.jsx("div",{className:"mb-2",children:i.jsx(S,{width:"180px",height:"1rem"})}),i.jsx("div",{className:"d-flex gap-3",children:Array.from({length:3}).map((n,s)=>i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsx(S,{width:"16px",height:"16px",style:{borderRadius:"50%"}}),i.jsx(S,{width:"100px",height:"0.875rem"})]},s))})]})]})}),i.jsx("div",{className:"d-flex justify-content-end mt-4",children:i.jsx(st,{width:"120px",height:"42px"})})]})}):i.jsxs(i.Fragment,{children:[i.jsx(gt,{children:i.jsxs("div",{className:"row",children:[i.jsxs("div",{className:"col-xl-4 col-md-6",children:[i.jsx(S,{width:"80px",height:"1.125rem",className:"mb-3"}),i.jsxs("div",{className:"bg-body p-3 mb-4 rounded",children:[i.jsx(S,{width:"100%",height:"0.75rem",className:"mb-3"}),i.jsx(Ne,{labelWidth:"120px",inputHeight:"38px"}),i.jsx("div",{className:"mt-4",children:Array.from({length:2}).map((n,s)=>i.jsxs("div",{className:"d-flex justify-content-between gap-2 mb-2",children:[i.jsx(S,{width:"120px",height:"1rem"}),i.jsx(S,{width:"20px",height:"20px",style:{borderRadius:"50%"}})]},s))})]})]}),i.jsxs("div",{className:"col-xl-4 col-md-6",children:[i.jsx(S,{width:"100px",height:"1.125rem",className:"mb-3"}),i.jsxs("div",{className:"bg-body p-3 mb-4 rounded",children:[i.jsx(S,{width:"100%",height:"0.75rem",className:"mb-3"}),i.jsx(Ne,{labelWidth:"140px",inputHeight:"38px"}),i.jsx("div",{className:"mt-4",children:Array.from({length:2}).map((n,s)=>i.jsxs("div",{className:"d-flex justify-content-between gap-2 mb-2",children:[i.jsx(S,{width:"100px",height:"1rem"}),i.jsx(S,{width:"20px",height:"20px",style:{borderRadius:"50%"}})]},s))})]})]}),i.jsxs("div",{className:"col-xl-4 col-md-12",children:[i.jsx(S,{width:"60px",height:"1.125rem",className:"mb-3"}),i.jsx("div",{className:"card bg-body",children:i.jsxs("div",{className:"card-body",children:[i.jsx(S,{width:"100%",height:"80px",className:"mb-2",style:{borderRadius:"4px"}}),i.jsx(S,{width:"100%",height:"1rem"})]})})]})]})}),i.jsxs("div",{className:"mt-4",children:[i.jsxs("div",{className:"d-flex align-items-center gap-2 flex-wrap mb-3 justify-content-between",children:[i.jsx(S,{width:"140px",height:"1.125rem"}),i.jsxs("div",{className:"d-flex gap-2",children:[i.jsx(st,{width:"120px"}),i.jsx(st,{width:"120px"})]})]}),i.jsx(_n,{columns:3,rows:2,showHeader:!0,showActions:!1,showPagination:!1})]}),i.jsxs("div",{className:"mt-4",children:[i.jsxs("div",{className:"d-flex align-items-center gap-2 flex-wrap pt-3 justify-content-between mb-3",children:[i.jsx(S,{width:"120px",height:"1.25rem"}),i.jsxs("div",{className:"d-flex gap-2",children:[i.jsx(st,{width:"80px"}),i.jsx(st,{width:"80px"}),i.jsx(st,{width:"80px"}),i.jsx(st,{width:"160px"})]})]}),i.jsx("div",{className:"d-flex align-items-center justify-content-end gap-2 mb-3",children:i.jsxs("div",{className:"d-flex gap-2",children:[i.jsx(S,{width:"40px",height:"38px",style:{borderRadius:"4px"}}),i.jsx(S,{width:"40px",height:"38px",style:{borderRadius:"4px"}}),i.jsx(S,{width:"40px",height:"38px",style:{borderRadius:"4px"}})]})}),i.jsx(_n,{columns:5,rows:3,showHeader:!0,showActions:!0,showPagination:!1})]})]})})})}),gh=({view:t=null})=>Kn().key!="default"?i.jsx(wC,{view:t}):i.jsxs("div",{className:"container-fluid pb-0",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center gap-3 flex-wrap mb-4",children:[i.jsx(wo,{items:["50px","120px","100px","140px"]}),i.jsx(st,{width:"80px",height:"32px"})]}),i.jsxs("div",{className:"row mb-0",children:[i.jsx("div",{className:"col-xl-3 col-lg-4",children:i.jsxs("div",{className:"position-sticky top-0",children:[i.jsx(S,{width:"140px",height:"1.125rem",className:"mb-2"}),i.jsxs(gt,{children:[i.jsx(S,{width:"120px",height:"0.875rem",className:"mb-3"}),i.jsx(Ys,{avatarSize:"50px",nameWidth:"120px",detailWidth:"180px"}),i.jsx("div",{className:"mt-4",children:i.jsxs("ul",{className:"list-inline m-0 p-0",children:[i.jsx("li",{children:i.jsxs("div",{className:"d-flex align-items-center justify-content-between gap-3",children:[i.jsx(S,{width:"120px",height:"0.875rem"}),i.jsx(S,{width:"100px",height:"0.875rem"})]})}),i.jsx("li",{className:"mt-2",children:i.jsxs("div",{className:"d-flex align-items-center justify-content-between gap-3",children:[i.jsx(S,{width:"80px",height:"0.875rem"}),i.jsx(S,{width:"60px",height:"0.875rem"})]})})]})}),i.jsxs("div",{className:"mt-5 pt-5 border-top",children:[i.jsx("div",{className:"d-flex align-items-center justify-content-between gap-2 mb-3",children:i.jsx(S,{width:"100px",height:"1.125rem"})}),i.jsx(Ys,{avatarSize:"50px",nameWidth:"120px",detailWidth:"140px"})]})]}),i.jsxs("div",{className:"mt-5 pt-2",children:[i.jsx(S,{width:"160px",height:"1.125rem",className:"mb-2"}),i.jsx(gt,{children:i.jsx(Ne,{labelWidth:"180px",inputHeight:"38px"})})]})]})}),i.jsxs("div",{className:"col-xl-9 col-lg-8",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[i.jsxs("div",{className:"d-flex gap-2",children:[i.jsx(S,{width:"120px",height:"38px",style:{borderRadius:"20px"}}),i.jsx(S,{width:"100px",height:"38px",style:{borderRadius:"20px"}}),i.jsx(S,{width:"100px",height:"38px",style:{borderRadius:"20px"}})]}),i.jsxs("div",{className:"d-flex gap-2",children:[i.jsx(st,{width:"140px"}),i.jsx(st,{width:"140px"})]})]}),i.jsx(wC,{view:t})]})]})]}),Aee=()=>i.jsx("div",{className:"body-chart-outlet",children:i.jsx(fs,{})}),Dee=()=>i.jsx("div",{className:"body-chart-editor-page",children:i.jsxs(_t,{children:[i.jsx(_t.Header,{className:"mb-2",children:i.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[i.jsx(S,{width:"150px",height:"1.5rem"}),i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsx(st,{width:"80px"}),i.jsx(st,{width:"120px"})]})]})}),i.jsxs(_t.Body,{children:[i.jsx(Yn,{children:i.jsxs(Et,{md:12,children:[i.jsxs("div",{className:"mb-3",children:[i.jsx(S,{width:"100px",height:"1rem",className:"mb-2"}),i.jsx(S,{width:"100%",height:"2.5rem"})]}),i.jsxs("div",{className:"mb-3",children:[i.jsx(S,{width:"100px",height:"1rem",className:"mb-2"}),i.jsx(S,{width:"100%",height:"100px"})]})]})}),i.jsx(Yn,{className:"mt-4",children:i.jsx(Et,{xs:12,children:i.jsx(_t,{children:i.jsx(_t.Body,{children:i.jsxs("div",{style:{height:"76vh",position:"relative"},children:[i.jsxs("div",{className:"d-flex align-items-center gap-2 mb-3",children:[i.jsx(st,{width:"40px",height:"30px"}),i.jsx(st,{width:"120px",height:"30px"}),i.jsx(st,{width:"120px",height:"30px"})]}),i.jsx(S,{width:"100%",height:"100%"})]})})})})})]})]})}),$r={getClinics:(t={})=>ve({endpoint:"clinics",method:"GET",data:t}),getClinic:t=>ve({endpoint:`clinics/${t}`,method:"GET"}),createClinic:t=>ve({endpoint:"clinics",method:"POST",data:t}),updateClinic:(t,e)=>ve({endpoint:`clinics/${t}`,method:"PUT",data:e}),deleteClinic:t=>ve({endpoint:`clinics/${t}`,method:"DELETE"}),getClinicDoctors:(t,e={})=>ve({endpoint:`clinics/${t}/doctors`,method:"GET",data:e}),getClinicPatients:(t,e={})=>ve({endpoint:`clinics/${t}/patients`,method:"GET",data:e}),getClinicServices:(t,e={})=>ve({endpoint:`clinics/${t}/services`,method:"GET",data:e}),getClinicSchedule:(t,e={})=>ve({endpoint:`clinics/${t}/schedule`,method:"GET",data:e}),resendCredentials:t=>ve({endpoint:`clinics/${t}/resend-credentials`,method:"POST"}),updateClinicStatus:(t,e)=>ve({endpoint:`clinics/${t}/status`,method:"PUT",data:{status:e}}),bulkDeleteClinics:t=>ve({endpoint:"clinics/bulk/delete",method:"POST",data:{ids:t}}),bulkResendCredentials:t=>ve({endpoint:"clinics/bulk/resend-credentials",method:"POST",data:{ids:t}}),bulkUpdateClinicStatus:(t,e)=>ve({endpoint:"clinics/bulk/status",method:"PUT",data:{ids:t,status:e}}),exportClinics:(t={})=>ve({endpoint:"clinics/export",method:"GET",data:t})},Ws={all:["clinics"],lists:()=>[...Ws.all,"list"],list:t=>[...Ws.lists(),{filters:t}],details:()=>[...Ws.all,"detail"],detail:t=>[...Ws.details(),t]},oP=(t={},e={})=>ft({queryKey:Ws.list(t),queryFn:()=>$r.getClinics(t),...e}),Ree=(t,e={})=>ft({queryKey:Ws.detail(t),queryFn:()=>$r.getClinic(t),enabled:!!t,...e}),Pee=()=>{const t=ze();return Le({mutationFn:e=>$r.createClinic(e),onSuccess:()=>{t.invalidateQueries({queryKey:Ws.lists()})}})},Mee=()=>{const t=ze();return Le({mutationFn:({id:e,...n})=>$r.updateClinic(e,n),onSuccess:(e,n)=>{t.invalidateQueries({queryKey:Ws.detail(n.id)}),t.invalidateQueries({queryKey:Ws.lists()})}})},Iee=()=>{const t=ze();return Le({mutationFn:e=>$r.deleteClinic(e),onSuccess:()=>{t.invalidateQueries({queryKey:Ws.lists()})}})},Oee=()=>Le({mutationFn:t=>$r.resendCredentials(t)}),Fee=()=>{const t=ze();return Le({mutationFn:e=>$r.bulkDeleteClinics(e),onSuccess:()=>{t.invalidateQueries({queryKey:Ws.lists()})}})},Lee=()=>Le({mutationFn:t=>$r.bulkResendCredentials(t)}),$ee=()=>{const t=ze();return Le({mutationFn:({ids:e,status:n})=>$r.bulkUpdateClinicStatus(e,n),onSuccess:()=>{t.invalidateQueries({queryKey:Ws.lists()})}})},Xa={getDoctors:(t={})=>ve({endpoint:"doctors",method:"GET",data:t}),getDoctor:t=>ve({endpoint:`doctors/${t}`,method:"GET"}),createDoctor:t=>ve({endpoint:"doctors",method:"POST",data:t}),updateDoctor:(t,e)=>ve({endpoint:`doctors/${t}`,method:"PUT",data:e}),deleteDoctor:t=>ve({endpoint:`doctors/${t}`,method:"DELETE"}),getDoctorSchedule:(t,e={})=>ve({endpoint:`doctors/${t}/schedule`,method:"GET",data:e}),bulkDeleteDoctors:t=>ve({endpoint:"doctors/bulk/delete",method:"POST",data:{ids:t}}),resendCredentials:t=>ve({endpoint:`doctors/${t}/resend-credentials`,method:"POST"}),bulkResendCredentials:t=>ve({endpoint:"doctors/bulk/resend-credentials",method:"POST",data:{ids:t}}),bulkUpdateDoctorStatus:(t,e)=>ve({endpoint:"doctors/bulk/status",method:"PUT",data:{ids:t,status:e}}),exportDoctors:(t={})=>ve({endpoint:"doctors/export",method:"GET",data:t})},is={all:["doctors"],lists:()=>[...is.all,"list"],list:t=>[...is.lists(),{filters:t}],details:()=>[...is.all,"detail"],detail:t=>[...is.details(),t],schedule:()=>[...is.all,"schedule"],doctorSchedule:t=>[...is.schedule(),t]},Mw=(t={},e={})=>ft({queryKey:is.list(t),queryFn:()=>Xa.getDoctors(t),...e}),af=(t,e={})=>ft({queryKey:is.detail(t),queryFn:()=>Xa.getDoctor(t),enabled:!!t,...e}),Bee=()=>{const t=ze();return Le({mutationFn:e=>Xa.createDoctor(e),onSuccess:()=>{t.invalidateQueries({queryKey:is.lists()})}})},qee=()=>{const t=ze();return Le({mutationFn:({id:e,...n})=>Xa.updateDoctor(e,n),onSuccess:(e,n)=>{t.invalidateQueries({queryKey:is.detail(n.id)}),t.invalidateQueries({queryKey:is.lists()}),t.invalidateQueries({queryKey:["dashboard","topDoctors"]})}})},Hee=()=>{const t=ze();return Le({mutationFn:e=>Xa.deleteDoctor(e),onSuccess:()=>{t.invalidateQueries({queryKey:is.lists()})}})},zee=()=>{const t=ze();return Le({mutationFn:e=>Xa.bulkDeleteDoctors(e),onSuccess:()=>{t.invalidateQueries({queryKey:is.lists()})}})},Vee=()=>Le({mutationFn:t=>Xa.resendCredentials(t)}),Uee=()=>Le({mutationFn:t=>Xa.bulkResendCredentials(t)}),Wee=()=>{const t=ze();return Le({mutationFn:({ids:e,status:n})=>Xa.bulkUpdateDoctorStatus(e,n),onSuccess:()=>{t.invalidateQueries({queryKey:is.lists()})}})},Kee=()=>Le({mutationFn:t=>Xa.exportDoctors(t)}),ia={getPatients:(t={})=>ve({endpoint:"patients",method:"GET",data:t}),getPatient:t=>ve({endpoint:`patients/${t}`,method:"GET"}),createPatient:t=>ve({endpoint:"patients",method:"POST",data:t}),updatePatient:(t,e)=>ve({endpoint:`patients/${t}`,method:"PUT",data:e}),resendCredentials:t=>ve({endpoint:`patients/${t}/resend-credentials`,method:"POST"}),deletePatient:t=>ve({endpoint:`patients/${t}`,method:"DELETE"}),bulkDeletePatients:t=>ve({endpoint:"patients/bulk/delete",method:"POST",data:{ids:t}}),bulkResendCredentials:t=>ve({endpoint:"patients/bulk/resend-credentials",method:"POST",data:{ids:t}}),bulkUpdatePatientStatus:(t,e)=>ve({endpoint:"patients/bulk/status",method:"PUT",data:{ids:t,status:e}}),getPatientUniqueId:()=>ve({endpoint:"patients/uniqueid",method:"GET"}),exportPatients:(t={})=>ve({endpoint:"patients/export",method:"GET",data:t}),getPatientStatistics:t=>ve({endpoint:`patients/${t}/statistics`,method:"GET"})},os={all:["patients"],lists:()=>[...os.all,"list"],list:t=>[...os.lists(),{filters:t}],details:()=>[...os.all,"detail"],detail:t=>[...os.details(),t]},cP=(t={},e={})=>ft({queryKey:os.list(t),queryFn:()=>ia.getPatients(t),...e}),Gee=(t,e={})=>ft({queryKey:os.detail(t),queryFn:()=>ia.getPatient(t),enabled:!!t,...e}),Yee=()=>{const t=ze();return Le({mutationFn:e=>ia.createPatient(e),onSuccess:()=>{t.invalidateQueries({queryKey:os.lists()}),t.invalidateQueries({queryKey:pt.users()})}})},Qee=()=>{const t=ze();return Le({mutationFn:({id:e,...n})=>ia.updatePatient(e,n),onSuccess:(e,n)=>{t.invalidateQueries({queryKey:os.detail(n.id)}),t.invalidateQueries({queryKey:os.lists()})}})},Zee=()=>Le({mutationFn:t=>ia.resendCredentials(t)}),Xee=()=>{const t=ze();return Le({mutationFn:e=>ia.deletePatient(e),onSuccess:()=>{t.invalidateQueries({queryKey:os.lists()})}})},Jee=()=>{const t=ze();return Le({mutationFn:e=>ia.bulkDeletePatients(e),onSuccess:()=>{t.invalidateQueries({queryKey:os.lists()})}})},ete=()=>Le({mutationFn:t=>ia.bulkResendCredentials(t)}),tte=()=>{const t=ze();return Le({mutationFn:({ids:e,status:n})=>ia.bulkUpdatePatientStatus(e,n),onSuccess:()=>{t.invalidateQueries({queryKey:os.lists()})}})},nte=(t={})=>ft({queryKey:[...os.all,"uniqueid"],queryFn:()=>ia.getPatientUniqueId(),...t}),ite=()=>Le({mutationFn:t=>ia.exportPatients(t)}),ste=(t,e={})=>ft({queryKey:[...os.detail(t),"statistics"],queryFn:()=>ia.getPatientStatistics(t),enabled:!!t,...e}),My=({patientId:t})=>{const[e,n]=f.useState(!1),[s,a]=f.useState(()=>{const R={};return t&&(R.patientId=t),R}),[l,o]=f.useState(!1),c=f.useRef(null),{userRole:d,isAddonActive:m,hasCapability:u}=mt(),{data:h}=Sn(),p=m("kiviPro"),g=Xn(),v=Jn(),x=Li(),y=Yi(),b=h?.data?.allowEncounterEdit,[k,w]=f.useState(null),T=Ln(),[j,D]=f.useState(null),_=Ga(j,500);He.useEffect(()=>{a(R=>({...R,search:_,page:1,...t?{patientId:t}:{}}))},[_,t]);const N=R=>{D(R.target.value)};aP();const A=ZJ(),P=ze(),E=f.useMemo(()=>Object.fromEntries(Object.entries(s).filter(([R,te])=>te!==""&&te!==null&&te!==void 0)),[s]),I=iee(),M=async R=>{try{yt({title:r("Exporting...","kivicare-clinic-management-system"),text:r("Please wait. This may take a few seconds.","kivicare-clinic-management-system")});const ne=(await I.mutateAsync({format:R,...E})).data,Y=new Date().toISOString().split("T")[0],q=`${r("Patients Encounter List","kivicare-clinic-management-system")} - ${Y}`;R==="csv"?hs(ne,`${q}.csv`):R==="xls"?ps(ne,`${q}.xls`):R==="pdf"&&gs(ne,`${q}.pdf`,r("Patients Encounter List","kivicare-clinic-management-system")),Wi(),Se.success(r("Export completed successfully.","kivicare-clinic-management-system"))}catch(te){console.error("Export failed:",te),rt({title:r("Error!","kivicare-clinic-management-system"),text:te.message||r("Failed to export data. Please try again.","kivicare-clinic-management-system"),confirmButtonText:r("OK","kivicare-clinic-management-system")})}},O=Le({mutationFn:R=>Dr.deleteEncounter(R),onSuccess:()=>{P.invalidateQueries({queryKey:["encounters"]})}}),F=f.useMemo(()=>[T.accessor("id",{header:()=>r("ID","kivicare-clinic-management-system"),cell:R=>R.getValue(),enableSorting:!0}),T.accessor("patientName",{header:()=>r("Patient","kivicare-clinic-management-system"),cell:R=>{const te=R.row.original;return i.jsx(dn,{profileUrl:te.patient_image_url,name:te.patientName,email:te.patientEmail||"",nameLabel:r("Patient","kivicare-clinic-management-system"),size:"md"})},enableSorting:!0}),...x?[]:[T.accessor("doctorName",{header:()=>r("Doctor","kivicare-clinic-management-system"),cell:R=>{const te=R.row.original;return i.jsx(dn,{profileUrl:te.doctor_image_url,name:te.doctorName,email:te.doctorEmail||"",nameLabel:r("Doctor","kivicare-clinic-management-system"),size:"md"})},enableSorting:!0})],...p&&!g&&!v?[T.accessor("clinicName",{header:()=>r("Clinic","kivicare-clinic-management-system"),cell:R=>{const te=R.row.original;return i.jsx(dn,{profileUrl:te.clinic_image_url,name:te.clinicName,email:te.clinicEmail||"",nameLabel:r("Patient","kivicare-clinic-management-system"),size:"md"})},enableSorting:!0})]:[],T.accessor("encounterDate",{header:()=>r("Date","kivicare-clinic-management-system"),cell:R=>R.getValue(),enableSorting:!0}),T.accessor("status",{header:()=>r("Status","kivicare-clinic-management-system"),cell:R=>{const te=R.getValue();return te===1||te==="1"?i.jsx("span",{className:"badge bg-success-subtle px-3 py-2",children:r("Active","kivicare-clinic-management-system")}):te===0||te==="0"?i.jsx("span",{className:"badge bg-danger-subtle px-3 py-2",children:r("Closed","kivicare-clinic-management-system")}):i.jsx("span",{children:te})},enableSorting:!0}),...u("patient_encounter_edit")||u("patient_encounter_view")||u("patient_encounter_delete")||u("patient_encounter_view_billing")?[T.display({id:"action",header:()=>r("Action","kivicare-clinic-management-system"),enableSorting:!1,cell:R=>{const te=ne=>Y=>i.jsx(ut,{id:`tooltip-${R.cell.row.original.id}-${ne}`,...Y,children:ne});return i.jsxs("div",{className:"d-flex align-items-center gap-3",children:[u("patient_encounter_edit")&&(R.cell.row.original.status!=="0"||b==="on")&&!y&&i.jsx(Qe,{placement:"top",overlay:te(r("Edit Encounter","kivicare-clinic-management-system")),children:i.jsx(ht,{to:`/encounter/edit/${R.cell.row.original.id}`,className:"d-inline-block delete-btn",children:i.jsx("span",{className:"text-success fs-5",children:i.jsx("i",{className:"ph ph-pencil-simple-line"})})})}),R.cell.row.original.status=="0"&&p&&R.cell.row.original.billId&&u("patient_encounter_view_billing")&&i.jsx(Qe,{placement:"top",overlay:te(r("View Billing","kivicare-clinic-management-system")),children:i.jsx(ht,{to:`/encounter/billings/view/${R.cell.row.original.billId}`,className:"btn btn-link text-gray fs-5 p-0",children:i.jsx("i",{className:"ph ph-eye"})})}),u("patient_encounter_view")&&i.jsx(Qe,{placement:"top",overlay:te(r("View Encounter Dashboard","kivicare-clinic-management-system")),children:i.jsx(ht,{to:`/encounter/dashboard/${R.cell.row.original.id}`,className:"d-inline-block",children:i.jsx("span",{className:"text-gray fs-4",children:i.jsx("i",{className:"ph ph-gauge"})})})}),u("patient_encounter_delete")&&i.jsx(Qe,{placement:"top",overlay:te(r("Delete","kivicare-clinic-management-system")),children:i.jsx("a",{href:"#",className:"d-inline-block delete-btn",onClick:async ne=>{ne.preventDefault(),kt({title:r("Delete Encounter?","kivicare-clinic-management-system"),text:r("You're about to delete this encounter.<br>This action cannot be undone.","kivicare-clinic-management-system"),icon:"ph-warning",confirmButtonText:r("Delete permanently","kivicare-clinic-management-system"),cancelButtonText:r("Keep encounter","kivicare-clinic-management-system"),confirmButtonClass:"btn-danger"}).then(Y=>{Y.isConfirmed&&(yt({title:r("Deleting Encounter...","kivicare-clinic-management-system"),text:r("Please wait while we remove the selected encounter.<br>This won't take long.","kivicare-clinic-management-system")}),O.mutate(R.cell.row.original.id,{onSuccess:q=>{Tt({title:r("Encounter Deleted","kivicare-clinic-management-system"),text:q?.message||r("Encounter has been deleted.","kivicare-clinic-management-system"),confirmButtonText:r("Back to encounters","kivicare-clinic-management-system")})},onError:q=>{rt({text:q?.response?.data?.message||q?.message||r("Failed to delete encounter. Please try again.","kivicare-clinic-management-system")})}}))})},children:i.jsx("span",{className:"text-danger fs-5",children:i.jsx("i",{className:"ph ph-trash"})})})})]})}})]:[]],[T,O,u,b,g,v]),H=[{value:"1",label:r("Active","kivicare-clinic-management-system"),class:"bg-success-subtle text-success"},{value:"0",label:r("Closed","kivicare-clinic-management-system"),class:"bg-danger-subtle text-danger"}],G=()=>M("csv"),z=()=>M("xls"),[ie,W]=f.useState(!1),ge=()=>{ie||(W(!0),M("pdf"),setTimeout(()=>W(!1),2e3))},{data:ae,isLoading:U,error:X}=QJ(s),{data:J,isLoading:he}=oP(),{data:le,isLoading:ee}=Mw(),{data:me,isLoading:K}=cP(),re=(J?.data?.clinics||[]).map(R=>({value:R.id,label:R.name||R.clinic_name})),oe=(le?.data?.doctors||[]).map(R=>({value:R.id,label:R.name||`${R.first_name||""} ${R.last_name||""}`})),C=(me?.data?.patients||[]).map(R=>({value:R.id,label:R.name||`${R.first_name||""} ${R.last_name||""}`}));return i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"d-flex align-items-md-center justify-content-between flex-column flex-lg-row gap-3 mb-4",children:[i.jsx("div",{className:"page-title",children:i.jsx("h5",{className:"mb-0",children:r("All Encounter List","kivicare-clinic-management-system")})}),i.jsxs("div",{className:"d-flex align-items-center flex-wrap gap-3",children:[!y&&u("patient_encounter_add")&&i.jsxs(ht,{to:"/encounter/add",className:"btn btn-secondary d-flex align-items-center gap-2",children:[i.jsx("i",{className:"ph ph-plus-circle"}),i.jsx("span",{children:r("Add Encounter","kivicare-clinic-management-system")})]}),i.jsxs("button",{className:"btn btn-primary d-flex align-items-center gap-2",onClick:()=>n(!0),children:[i.jsx("i",{className:"ph ph-funnel"}),i.jsx("span",{children:r("Filter","kivicare-clinic-management-system")})]})]})]}),i.jsxs("div",{className:"kc-table-wrapper",children:[i.jsx(Ci,{in:!l,timeout:100,classNames:"fade-top-bottom",unmountOnExit:!0,nodeRef:c,children:i.jsxs("div",{ref:c,className:"d-flex justify-content-between flex-column flex-lg-row gap-3 mb-4 position-absolute top-0  w-100",children:[i.jsxs("div",{className:"table-selection d-flex gap-3 flex-column flex-sm-row",children:[i.jsxs("div",{className:"input-group position-relative",children:[i.jsx(Un,{className:"form-control w-auto",value:k?Zn(k):"",options:{dateFormat:xi(window.kc_frontend.date_format),allowInput:!0,locale:Wn()},onChange:R=>{if(R&&R[0]){const te=R[0],ne=te.getFullYear(),Y=String(te.getMonth()+1).padStart(2,"0"),q=String(te.getDate()).padStart(2,"0"),B=`${ne}-${Y}-${q}`;w(B),a(se=>({...se,encounterDate:B}))}else w(null),a(te=>({...te,encounterDate:void 0}))},placeholder:r("Select Date","kivicare-clinic-management-system")}),k&&i.jsx("button",{type:"button",className:"btn btn-sm position-absolute",style:{right:"48px",top:"50%",transform:"translateY(-50%)",zIndex:10,padding:"4px 8px",background:"transparent",border:"none"},onClick:()=>{w(null),a(R=>({...R,encounterDate:void 0}))},title:r("Clear date","kivicare-clinic-management-system"),children:i.jsx("i",{className:"ph ph-x text-danger",style:{fontSize:"16px"}})}),i.jsx("div",{className:"input-group-text",children:i.jsx("i",{className:"ph ph-calendar"})})]}),i.jsx(ct,{placeholder:r("Status","kivicare-clinic-management-system"),className:"react-select-box",classNamePrefix:"react-select",options:H,onChange:R=>a(te=>({...te,encounterStatus:R?R.value:""})),value:H.find(R=>R.value===s.encounterStatus)||null,isClearable:!0,isSearchable:!1,styles:{menuPortal:R=>({...R,zIndex:9999})}})]}),i.jsx("div",{className:"position-relative"}),i.jsx("div",{className:"btn-toolbar d-flex gap-3 align-items-center justify-content-lg-end table-action-right",children:i.jsxs("div",{className:"d-flex align-items-center input-search-select gap-3",children:[i.jsxs("div",{className:"input-group input-group-search",children:[i.jsx("span",{className:"input-group-text",children:i.jsx("i",{className:"ph ph-magnifying-glass"})}),i.jsx("input",{type:"text",className:"form-control",placeholder:r("Search Anything","kivicare-clinic-management-system"),value:j,onChange:N})]}),u("patient_encounter_export")&&p&&i.jsxs("div",{className:"download-buttons d-flex align-items-center gap-2",children:[i.jsx(Qe,{placement:"top",overlay:i.jsx(ut,{children:r("Export CSV","kivicare-clinic-management-system")}),children:i.jsx("button",{onClick:G,disabled:I.isPending,className:"btn btn-white",children:i.jsx("i",{className:"ph ph-file-csv"})})}),i.jsx(Qe,{placement:"top",overlay:i.jsx(ut,{children:r("Export Excel","kivicare-clinic-management-system")}),children:i.jsx("button",{onClick:z,disabled:I.isPending,className:"btn btn-white",children:i.jsx("i",{className:"ph ph-file-xls"})})}),i.jsx(Qe,{placement:"top",overlay:i.jsx(ut,{children:r("Export PDF","kivicare-clinic-management-system")}),children:i.jsx("button",{onClick:ge,disabled:I.isPending,className:"btn btn-white",children:i.jsx("i",{className:"ph ph-file-pdf"})})})]})]})})]})}),i.jsx(wn,{data:ae?.data.encounters||[],columns:F,moduleNamePlural:"encounters",currentPage:ae?.data.page,perPage:ae?.data.per_page||10,totalItems:ae?.data.total||(ae?.data.encounters?ae.data.length:0),lastPage:ae?.data.total_pages||1,isLoading:U,enableSelection:!y,enableSorting:!0,onPageChange:R=>a(te=>({...te,page:R})),onPerPageChange:R=>a(te=>({...te,perPage:R,page:1})),onSortingChange:R=>{a(te=>({...te,sortBy:R.length>0?R[0].id:void 0,sortOrder:R.length>0?R[0].desc?"desc":"asc":void 0,page:1}))},bulkActions:[{label:r("Delete","kivicare-clinic-management-system"),action:(R,te)=>{const ne=R.map(Y=>Y.id);kt({title:r("Delete Encounters?","kivicare-clinic-management-system"),text:r(`Youre about to delete <strong>${R.length} encounters</strong>.<br>This action cannot be undone.`,"kivicare-clinic-management-system"),icon:"ph-warning",confirmButtonText:r("Delete permanently","kivicare-clinic-management-system"),cancelButtonText:r("Keep encounters","kivicare-clinic-management-system"),confirmButtonClass:"btn-danger"}).then(Y=>{Y.isConfirmed&&(yt({title:r("Deleting Encounters...","kivicare-clinic-management-system"),text:r("Please wait while we remove the selected encounters.<br>This won't take long.","kivicare-clinic-management-system")}),A.mutate(ne,{onSuccess:q=>{Tt({title:r("Encounter Deleted","kivicare-clinic-management-system"),text:r(`${R.length} encounter${R.length>1?"s":""} has been deleted.`,"kivicare-clinic-management-system"),confirmButtonText:r("Back to encounters","kivicare-clinic-management-system")}),te()},onError:q=>{console.error("Bulk delete encounters error:",q);const B=q?.response?.data?.message||q?.message||r("Failed to delete selected encounters. Please try again.","kivicare-clinic-management-system");rt({text:B})}}))})},icon:i.jsx("i",{className:"ph ph-trash"})}],isBulkActionShow:R=>{o(R)}})]}),i.jsx(na,{show:e,width:"540px",onHide:()=>n(!1),queryParams:s,onApplyFilters:R=>{a(te=>({...te,...R,page:1})),n(!1)},onResetFilters:()=>{a({...t?{patientId:t}:{}}),n(!1)},title:r("Filters","kivicare-clinic-management-system"),fields:[{name:"inlineDateRange",label:r("Select Date","kivicare-clinic-management-system"),type:"inlineDateRange",startDateKey:"startDate",endDateKey:"endDate",placeholder:r("eg Feb 25,2025","kivicare-clinic-management-system")},{name:"id",label:r("ID","kivicare-clinic-management-system"),type:"text",placeholder:r("eg 123","kivicare-clinic-management-system")},...x?[]:[...p?[{name:"clinic",label:r("Clinic","kivicare-clinic-management-system"),type:"select",options:re,isLoading:he,placeholder:r("eg Mount Health Care","kivicare-clinic-management-system")}]:[],{name:"doctor",label:r("Doctor","kivicare-clinic-management-system"),type:"select",options:oe,isLoading:ee,placeholder:r("eg Albert Heaven","kivicare-clinic-management-system")}],...y?[]:[{name:"patient",label:r("Patient","kivicare-clinic-management-system"),type:"select",options:C,isLoading:K,placeholder:r("eg Amelia Brightwell","kivicare-clinic-management-system")}],{name:"status",label:r("Status","kivicare-clinic-management-system"),type:"select",options:H,placeholder:r("eg Active","kivicare-clinic-management-system")}],hasAppliedFilters:f.useMemo(()=>["id","clinic","doctor","patient","startDate","endDate","status","search","encounterDate","encounterStatus"].some(te=>{const ne=s[te];return ne!=null&&ne!==""})||j!==null&&j!=="",[s,j])})]})},ate=He.memo(({formData:t={},onSubmit:e,onCancel:n,isSubmitting:s})=>{const{register:a,handleSubmit:l,watch:o,setValue:c,reset:d,control:m,formState:{errors:u,isDirty:h}}=en(),{userRole:p,currentDoctorId:g,isAddonActive:v,defaultClinicId:x}=mt(),y=ze(),[b,k]=f.useState({clinics:[],doctors:[],patients:[],loadingClinics:!0,loadingDoctors:!1,loadingPatients:!1,clinicError:null,doctorError:null,patientError:null,initialLoadComplete:!1}),[w,T]=f.useState(!1),j=o("clinic"),D=f.useRef(t),_=f.useRef(!0),N=f.useRef(null),A=v("kiviPro"),P=Xn();Sw();const E=t?.id,{data:I}=Dy("patient_encounter_module",E,{enabled:!!E}),M=f.useCallback(async({page:le,per_page:ee,search:me})=>{try{const K={dataType:"clinicList",page:le,per_page:ee,search:me};return await y.fetchQuery({queryKey:pt.list(K),queryFn:()=>Dt.getStaticData(K),staleTime:0})}catch(K){return console.error("Error loading clinics:",K),{data:[],pagination:{total:0,per_page:10,current_page:1,total_pages:0,has_more:!1}}}},[y]),O=f.useCallback(async({page:le,per_page:ee,search:me,clinic_ids:K})=>{try{const re={dataType:"staticData",staticDataType:"doctors",clinic_ids:K,page:le,per_page:ee,search:me};return await y.fetchQuery({queryKey:pt.list(re),queryFn:()=>Dt.getStaticData(re),staleTime:0})}catch(re){return console.error("Error loading doctors:",re),{data:[],pagination:{total:0,per_page:10,current_page:1,total_pages:0,has_more:!1}}}},[y]),F=f.useCallback(async({page:le,per_page:ee,search:me,clinic_ids:K})=>{try{const re={dataType:"staticData",staticDataType:"patients",clinic_ids:K,page:le,per_page:ee,search:me};return await y.fetchQuery({queryKey:pt.list(re),queryFn:()=>Dt.getStaticData(re),staleTime:0})}catch(re){return console.error("Error loading patients:",re),{data:[],pagination:{total:0,per_page:10,current_page:1,total_pages:0,has_more:!1}}}},[y]),H=f.useMemo(()=>new Date().toISOString().slice(0,10),[]),G=le=>le!=null?String(le):"",z=(le,ee=!1)=>{if(ee&&le){if(typeof le=="string"&&le.length>=10){const C=le.substring(0,10);if(/^\d{4}-\d{2}-\d{2}$/.test(C))return C}const me=new Date(le);if(isNaN(me.getTime()))return H;const K=me.getFullYear(),re=String(me.getMonth()+1).padStart(2,"0"),oe=String(me.getDate()).padStart(2,"0");return`${K}-${re}-${oe}`}return H},ie=!!(t?.id||t?.encounterDate||t?.clinic||t?.doctor||t?.patient),W=f.useCallback(async()=>{k(le=>({...le,loadingClinics:!0,clinicError:null}));try{const le=await Dt.getClinics(),ee=le.data||le||[];if(k(me=>({...me,clinics:ee,loadingClinics:!1})),D.current?.clinic&&_.current){const me=G(D.current.clinic);ee.some(re=>G(re.id)===me||G(re.ID)===me||G(re.slug)===me||G(re.name)===me)&&c("clinic",me,{shouldDirty:!1})}}catch(le){k(ee=>({...ee,clinicError:le.message||"Failed to fetch clinics",loadingClinics:!1}))}},[]),ge=f.useCallback(async le=>{if(!le){k(ee=>({...ee,doctors:[]}));return}k(ee=>({...ee,loadingDoctors:!0,doctorError:null}));try{const ee=await Dt.getDoctors(le),me=ee.data||ee||[];if(k(K=>({...K,doctors:me,loadingDoctors:!1})),D.current?.doctor&&_.current){const K=G(D.current.doctor);me.some(oe=>G(oe.id)===K||G(oe.ID)===K||G(oe.slug)===K||G(oe.name)===K)&&c("doctor",K,{shouldDirty:!1})}}catch(ee){k(me=>({...me,doctorError:ee.message||"Failed to fetch doctors",doctors:[],loadingDoctors:!1}))}},[]),ae=f.useCallback(async()=>{k(le=>({...le,loadingPatients:!0,patientError:null}));try{const le=ol(),ee=await Dt.getUsersByRole(le),me=ee.data||ee||[];if(k(K=>({...K,patients:me,loadingPatients:!1})),D.current?.patient&&_.current){const K=G(D.current.patient);me.some(oe=>G(oe.id)===K||G(oe.ID)===K||G(oe.slug)===K||G(oe.name)===K)&&c("patient",K,{shouldDirty:!1})}}catch(le){k(ee=>({...ee,patientError:le.message||"Failed to fetch patients",patients:[],loadingPatients:!1}))}},[]);f.useEffect(()=>{(async()=>{const ee=t?.id||"new_session";if(N.current===ee)return;D.current=t;const me={encounterDate:z(t?.encounterDate,ie),clinic:t?.clinic?{value:G(t?.clinic),label:t?.clinicName||G(t?.clinic)}:(!A||P)&&x?{value:G(x),label:G(x)}:null,doctor:p==="kiviCare_doctor"?g:t?.doctor?{value:G(t?.doctor),label:t?.doctorName||G(t?.doctor)}:null,patient:t?.patient?{value:G(t?.patient),label:t?.patientName||G(t?.patient)}:null,description:t?.description||""};d(me),await Promise.all([W(),ae()]),t?.clinic&&await ge(t?.clinic),t?.clinic&&c("clinic",{value:G(t?.clinic),label:t?.clinicName||G(t?.clinic)},{shouldDirty:!1}),t?.doctor&&p!=="kiviCare_doctor"&&c("doctor",{value:G(t?.doctor),label:t?.doctorName||G(t?.doctor)},{shouldDirty:!1}),t?.patient&&c("patient",{value:G(t?.patient),label:t?.patientName||G(t?.patient)},{shouldDirty:!1}),k(K=>({...K,initialLoadComplete:!0})),N.current=ee,_.current=!1})()},[t,d,W,ge,ae,p,g,A,x,ie]),f.useEffect(()=>{b.initialLoadComplete&&j&&!_.current&&ge(j)},[j,b.initialLoadComplete,ge]),f.useEffect(()=>{E&&I&&c&&Object.keys(I).forEach(le=>{c(`custom_field_${le}`,I[le])})},[E,I,c]);const U=f.useCallback(async le=>{if(!(s||w)){T(!0);try{le.clinic=le.clinic?.value??le.clinic,le.doctor=le.doctor?.value??le.doctor,le.patient=le.patient?.value??le.patient,p==="kiviCare_doctor"&&(le.doctor=g);const ee={};Object.keys(le).forEach(me=>{if(me.startsWith("custom_field_")){const K=me.replace("custom_field_","");ee[K]=le[me],delete le[me]}}),le.customFieldData=ee,await new Promise(me=>setTimeout(me,1e3)),await e(le)}catch(ee){console.error("Form submission error:",ee)}finally{T(!1)}}},[e,s,p,g,w]),X=f.useCallback(()=>{n()},[n]),J=f.useMemo(()=>A?{clinic_ids:o("clinic")?.value}:{clinic_ids:x},[A,x,o("clinic")]),he=f.useMemo(()=>A?{clinic_ids:o("clinic")?.value}:{clinic_ids:x},[A,x,o("clinic")]);return i.jsxs("form",{onSubmit:l(U),className:"mb-0",children:[i.jsx("div",{className:"card",children:i.jsx("div",{className:"card-body",children:i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-lg-3 col-sm-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[r("Encounter Date","kivicare-clinic-management-system")," ",i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsxs("div",{className:"input-group",children:[i.jsx(ye,{name:"encounterDate",control:m,rules:{required:r("Encounter date is required","kivicare-clinic-management-system")},render:({field:le})=>i.jsx(Un,{...le,value:ie?le.value?Zn(le.value):"":le.value?Zn(le.value):Zn(H),className:`form-control ${u.encounterDate?"is-invalid":""}`,options:{dateFormat:xi(window.kc_frontend.date_format),allowInput:!0,locale:Wn()},onChange:ee=>{if(ee&&ee[0]){const me=ee[0],K=me.getFullYear(),re=String(me.getMonth()+1).padStart(2,"0"),oe=String(me.getDate()).padStart(2,"0");le.onChange(`${K}-${re}-${oe}`)}else le.onChange("")}})}),u.encounterDate&&i.jsx("div",{className:"invalid-feedback",children:u.encounterDate.message}),i.jsx("span",{className:"input-group-text",children:i.jsx("i",{className:"ph ph-calendar"})})]})]})}),A&&i.jsx("div",{className:`col-lg-3 col-sm-6 ${P?"d-none":""}`,children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[r("Select Clinic","kivicare-clinic-management-system")," ",i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx(ye,{name:"clinic",control:m,rules:{required:r("Clinic is required","kivicare-clinic-management-system")},render:({field:le})=>i.jsx(rn,{id:"clinic",loadOptions:M,value:le.value,onChange:ee=>{le.onChange(ee),c("doctor",null),c("patient",null)},placeholder:r("Select Clinic","kivicare-clinic-management-system"),className:"react-select-box",classNamePrefix:"react-select",dependencies:{}})}),u.clinic&&i.jsx("div",{className:"invalid-feedback d-block",children:u.clinic.message})]})}),p!=="kiviCare_doctor"&&i.jsx(i.Fragment,{children:i.jsx("div",{className:"col-lg-3 col-sm-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[r("Select Doctor","kivicare-clinic-management-system")," ",i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx(ye,{name:"doctor",control:m,rules:{required:r("Doctor is required","kivicare-clinic-management-system")},render:({field:le})=>i.jsx(rn,{id:"doctor",loadOptions:O,value:le.value,onChange:ee=>{le.onChange(ee)},placeholder:r("Select Doctor","kivicare-clinic-management-system"),className:"react-select-box",classNamePrefix:"react-select",isDisabled:A&&!o("clinic"),dependencies:J},A?`doctor-${o("clinic")?.value}`:"doctor-lite")}),u.doctor&&i.jsx("div",{className:"invalid-feedback d-block",children:u.doctor.message})]})})}),i.jsx("div",{className:"col-lg-3 col-sm-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[r("Select Patient","kivicare-clinic-management-system")," ",i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx(ye,{name:"patient",control:m,rules:{required:r("Patient is required","kivicare-clinic-management-system")},render:({field:le})=>i.jsx(i.Fragment,{children:i.jsx(rn,{id:"patient",loadOptions:F,value:le.value,onChange:ee=>{le.onChange(ee)},placeholder:r("Select Patient","kivicare-clinic-management-system"),className:"react-select-box",classNamePrefix:"react-select",isDisabled:A&&!o("clinic")||ie,dependencies:he},A?`patient-${o("clinic")?.value}`:"patient-lite")})}),u.patient&&i.jsx("div",{className:"invalid-feedback d-block",children:u.patient.message})]})}),i.jsx("div",{className:"col-lg-12",children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{className:"form-label h6",children:r("Description","kivicare-clinic-management-system")}),i.jsx("textarea",{className:"form-control",rows:"2",placeholder:r("Write description","kivicare-clinic-management-system"),...a("description")})]})})]})})}),i.jsxs("div",{className:"d-flex align-items-center justify-content-end flex-wrap gap-3",children:[i.jsx("button",{type:"button",className:"btn btn-secondary",onClick:X,children:r("Cancel","kivicare-clinic-management-system")}),i.jsx("button",{type:"submit",className:"btn btn-primary",disabled:!h||w,children:w?i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),r("Saving...","kivicare-clinic-management-system")]}):r("Save","kivicare-clinic-management-system")})]})]})});function jC({isEditing:t=!1,...e}){const n=hn(),{mutate:s,isLoading:a}=YJ(),{id:l}=Yt(),o=Sw(),c=p=>{const g=p.customFieldData||{};delete p.customFieldData,s({id:t?l:null,data:p,isEdit:t},{onSuccess:async v=>{const x=v?.data?.id||l;if(Object.keys(g).length>0&&x)try{await o.mutateAsync({moduleType:"patient_encounter_module",moduleId:x,fieldsData:g})}catch(y){console.error("Error saving custom field data:",y)}Se.success(r("Encounter saved successfully!","kivicare-clinic-management-system")),setTimeout(()=>{n(`/encounter/dashboard/${x}/clinical-details`)},1600)},onError:v=>{console.error("Error:",v)}})},{data:d,isLoading:m,error:u}=t&&l?Dw(l):{data:null,isLoading:!1,error:null};He.useEffect(()=>{u&&(u?.response?.status===403||u?.status===403)&&n("/403")},[u,n]);const h=f.useMemo(()=>{if(t&&d){const p=d.data||d;if(p)return{id:l,encounterDate:p.encounterDate,clinic:p.clinicId,clinicName:p.clinicName,doctor:p.doctorId,doctorName:p.doctorName,patient:p.patientId,patientName:p.patientName,description:p.description,status:p.status}}return{}},[t,d,l]);return i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"align-items-md-center justify-content-between flex-column flex-lg-row gap-3 mb-4",children:i.jsx("div",{className:"page-title",children:i.jsx("h5",{className:"mb-0",children:t?r("Edit Encounter","kivicare-clinic-management-system"):r("Add Encounter","kivicare-clinic-management-system")})})}),i.jsx(ate,{formData:h,onSubmit:c,onCancel:()=>n(-1),isSubmitting:a})]})}const rte=()=>i.jsxs(gt,{children:[i.jsx(S,{width:"100px",height:"14px",className:"mb-3"}),i.jsx(Ys,{avatarSize:"50px",nameWidth:"120px",detailWidth:"150px"}),i.jsx("div",{className:"mt-4",children:i.jsxs("ul",{className:"list-inline m-0 p-0",children:[i.jsx("li",{children:i.jsxs("div",{className:"d-flex align-items-center justify-content-between gap-3",children:[i.jsx(S,{width:"100px",height:"14px"}),i.jsx(S,{width:"100px",height:"14px"})]})}),i.jsx("li",{className:"mt-2",children:i.jsxs("div",{className:"d-flex align-items-center justify-content-between gap-3",children:[i.jsx(S,{width:"80px",height:"14px"}),i.jsx(S,{width:"40px",height:"14px"})]})})]})}),i.jsxs("div",{className:"mt-5 pt-5 border-top",children:[i.jsx("div",{className:"d-flex align-items-center justify-content-between gap-2 mb-3",children:i.jsx(S,{width:"100px",height:"14px"})}),i.jsx(Ys,{avatarSize:"50px",nameWidth:"120px",detailWidth:"120px"})]})]}),lte=({canEditEncounter:t,templateId:e,encounterId:n})=>{const{isAddonActive:s}=mt(),a=ze(),l=s("kiviPro");if(!l&&!t)return null;const c=(l?rP():{data:{data:{list:[]}}})?.data?.data?.list??[],d=c.map(v=>({value:v.id,label:v.name})),[m,u]=f.useState(d.find(v=>v.value==e)),h=tee();f.useEffect(()=>{if(c.length>0){const v=d.find(x=>x.value==e);u(v||null)}},[e,c]);const p=async v=>{if(!v||!n){u(v);return}try{await h.mutateAsync({templateId:v.value,encounterId:n}),u(v),Se.success(r("Template applied to encounter successfully!","kivicare-clinic-management-system"))}catch(x){console.error("Error applying template:",x),Se.error(r("Failed to apply template to encounter.","kivicare-clinic-management-system")),u(d.find(y=>y.value==e)||null)}},g=f.useCallback(async({page:v,per_page:x,search:y})=>{try{const b={page:v,per_page:x,search:y},k=await a.fetchQuery({queryKey:["encounter-templates",b],queryFn:()=>ho.getTemplates(b),staleTime:0});return{data:k.data.list.map(j=>({value:j.id,label:j.name})),pagination:{total:k.data.total_rows,per_page:k.data.per_page,current_page:k.data.page,total_pages:k.data.total_pages,has_more:k.data.has_more}}}catch(b){return console.error("Error loading clinics:",b),{data:[],pagination:{total:0,per_page:10,current_page:1,total_pages:0,has_more:!1}}}},[a]);return i.jsxs("div",{className:"mt-5 pt-2 position-relative",children:[!l&&i.jsx(di,{link:"https://codecanyon.net/item/kivicare-pro-clinic-patient-management-system-ehr-addon/30690654?s_rank=3"}),i.jsx("h6",{children:r("Encounter Template","kivicare-clinic-management-system")}),i.jsx(al,{children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{className:"form-label",children:r("Select Encounter Template","kivicare-clinic-management-system")}),i.jsx(rn,{id:"encounter-template",loadOptions:g,value:m,onChange:p,placeholder:r("Select Encounter Template","kivicare-clinic-management-system"),className:"react-select-box",classNamePrefix:"react-select",isDisabled:h.isPending,dependencies:{}})]})})]})},ote=()=>{const{id:t}=Yt(),e=hn(),n=Kn(),s=ze(),a=Yi(),l=nee(),{encounterData:o,isEncounterLoading:c,encounterError:d,customForms:m,canEditEncounter:u,canUpdateEncounter:h,showEditBillModal:p,showAddServiceItemForm:g,editFormData:v,setEditFormData:x,setShowAddServiceItemForm:y,handleOpenEditBillModal:b,handleCloseEditBillModal:k,billData:w,encounterStatus:T,patientInfo:j,clinicInfo:D,isAddonActive:_,customFields:N,customFieldData:A}=nf(),{module_config:P}=mt(),E=aP(),I=_("kiviPro"),M=()=>{At.fire({title:r("Are you sure?","kivicare-clinic-management-system"),text:r("This will close the encounter directly without generating an invoice.","kivicare-clinic-management-system"),icon:"warning",showCancelButton:!0,confirmButtonText:r("Yes, close it!","kivicare-clinic-management-system"),cancelButtonText:r("Cancel","kivicare-clinic-management-system")}).then(z=>{z.isConfirmed&&E.mutate({ids:[t],status:"0"},{onSuccess:()=>{At.fire({title:r("Closed!","kivicare-clinic-management-system"),text:r("The encounter has been closed successfully.","kivicare-clinic-management-system"),icon:"success"}),s.invalidateQueries({queryKey:["encounter",t]})},onError:ie=>{At.fire({title:r("Error!","kivicare-clinic-management-system"),text:ie.message||r("Failed to close the encounter.","kivicare-clinic-management-system"),icon:"error"})}})})},O=()=>{(P.billing??"1")==="1"?b():M()},F=()=>{const z=n.pathname;if(z.includes("/body-chart"))return"body-chart";if(z.includes("/clinical-details"))return"clinical-details";for(const ie of m)if(z.includes(`/custom-form-${ie.id}`))return`custom-form-${ie.id}`;return"clinical-details"},H=z=>{z==="clinical-details"?e("clinical-details"):z==="body-chart"?e("body-chart"):z.startsWith("custom-form-")?e(`${z}`):e("clinical-details")};f.useEffect(()=>{n.pathname===`/encounter/dashboard/${t}`&&e("clinical-details",{replace:!0})},[n.pathname,t,e]);const G=()=>{l.mutate(t,{onSuccess:z=>{const ie=new Blob([z],{type:"application/pdf"}),W=URL.createObjectURL(ie);window.open(W,"_blank"),setTimeout(()=>URL.revokeObjectURL(W),100)},onError:z=>{At.fire({title:r("Error","kivicare-clinic-management-system"),text:z?.response?.data?.message||z?.message||r("Failed to generate encounter PDF.","kivicare-clinic-management-system"),icon:"error",confirmButtonText:r("OK","kivicare-clinic-management-system")})}})};return i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"row mb-0",children:[i.jsx("div",{className:"col-xl-3 col-lg-4",children:i.jsxs("div",{className:" position-sticky top-0",children:[i.jsx("h6",{className:"mb-2",children:r("Encounter Details","kivicare-clinic-management-system")}),c&&i.jsx(rte,{}),d&&!c&&i.jsx(al,{className:"border-danger",children:i.jsxs("div",{className:"d-flex align-items-center gap-3",children:[i.jsx("div",{className:"flex-shrink-0",children:i.jsx("i",{className:"ph ph-warning-circle text-danger",style:{fontSize:"2rem"}})}),i.jsxs("div",{className:"flex-grow-1",children:[i.jsx("h6",{className:"text-danger mb-1",children:r("Failed to Load Encounter","kivicare-clinic-management-system")}),i.jsx("p",{className:"text-muted mb-2 font-size-14",children:d?.message||r("Unable to load encounter details. Please try again.","kivicare-clinic-management-system")}),i.jsx("button",{className:"btn btn-sm btn-outline-danger",onClick:()=>window.location.reload(),children:r("Retry","kivicare-clinic-management-system")})]})]})}),!c&&!d&&!o&&i.jsx(al,{className:"text-center py-5",children:i.jsxs("div",{className:"d-flex flex-column align-items-center gap-3",children:[i.jsx("i",{className:"ph ph-file-x text-muted",style:{fontSize:"3rem"}}),i.jsxs("div",{children:[i.jsx("h6",{className:"mb-1",children:r("No Encounter Found","kivicare-clinic-management-system")}),i.jsx("p",{className:"text-muted mb-0 font-size-14",children:r("The requested encounter could not be found.","kivicare-clinic-management-system")})]})]})}),!c&&!d&&o&&i.jsx(i.Fragment,{children:i.jsxs(al,{children:[i.jsx("h6",{className:"font-size-14 mb-3",children:r("About Patient","kivicare-clinic-management-system")}),i.jsxs("div",{className:"d-flex gap-md-3 gap-2 flex-nowrap",children:[i.jsx(Oc,{src:j.profileImage,alt:j.name||r("Patient","kivicare-clinic-management-system"),text:!j.profileImage&&j.name?j.name.charAt(0).toUpperCase():"P",variant:"primary",size:"md",className:"flex-shrink-0"}),i.jsxs("div",{className:"flex-grow-1",children:[i.jsx("h6",{className:"mb-2",children:j.name}),i.jsxs("div",{className:"contact-card-info-item",children:[i.jsx("i",{className:"ph ph-envelope-simple"}),i.jsx("a",{href:`mailto:${j.email}`,className:"text-muted line-anywhere lh-1",children:j.email})]}),j.phone&&i.jsx("div",{className:"mt-1",children:i.jsx("span",{className:"font-size-14 text-muted",children:j.phone})})]})]}),i.jsx("div",{className:"mt-4",children:i.jsxs("ul",{className:"list-inline m-0 p-0",children:[i.jsx("li",{children:i.jsxs("div",{className:"d-flex align-items-center justify-content-between gap-3",children:[i.jsxs("span",{className:"font-size-14",children:[r("Encounter Date","kivicare-clinic-management-system"),":"]}),i.jsx("h6",{className:"font-size-14 fw-normal mb-0",children:o.encounterDate||r("Not specified","kivicare-clinic-management-system")})]})}),i.jsx("li",{className:"mt-2",children:i.jsxs("div",{className:"d-flex align-items-center justify-content-between gap-3",children:[i.jsxs("span",{className:"font-size-14",children:[r("Address","kivicare-clinic-management-system"),":"]}),i.jsx("h6",{className:"font-size-14 fw-normal mb-0",children:j.address||"-"})]})}),j.age&&i.jsx("li",{className:"mt-2",children:i.jsxs("div",{className:"d-flex align-items-center justify-content-between gap-3",children:[i.jsxs("span",{className:"font-size-14",children:[r("Age","kivicare-clinic-management-system"),":"]}),i.jsxs("h6",{className:"font-size-14 fw-normal mb-0",children:[j.age," ",r("years","kivicare-clinic-management-system")]})]})}),j.gender&&i.jsx("li",{className:"mt-2",children:i.jsxs("div",{className:"d-flex align-items-center justify-content-between gap-3",children:[i.jsxs("span",{className:"font-size-14",children:[r("Gender","kivicare-clinic-management-system"),":"]}),i.jsx("h6",{className:"font-size-14 fw-normal mb-0",children:j.gender})]})})]})}),i.jsxs("div",{className:"mt-5 pt-5 border-top",children:[i.jsx("div",{className:"d-flex align-items-center justify-content-between gap-2 mb-3",children:i.jsx("h6",{className:"mb-0",children:r("About Clinic","kivicare-clinic-management-system")})}),i.jsxs("div",{className:"d-flex gap-3 flex-wrap",children:[i.jsx(Oc,{src:D.profileImage,alt:D.name||r("Clinic","kivicare-clinic-management-system"),text:!D.profileImage&&D.name?D.name.charAt(0).toUpperCase():"C",variant:"primary",size:"md",className:"flex-shrink-0"}),i.jsxs("div",{className:"flex-grow-1",children:[i.jsx("h6",{className:"mb-2",children:D.name}),i.jsxs("div",{className:"d-flex align-items-center gap-1",children:[i.jsx("span",{className:"heading-color",children:i.jsx("i",{className:"ph ph-stethoscope"})}),i.jsx("span",{className:"font-size-14",children:D.doctorName})]}),D.address&&i.jsx("div",{className:"mt-1",children:i.jsxs("span",{className:"font-size-14 text-muted",children:[i.jsx("i",{className:"ph ph-map-pin me-1"}),D.address]})})]})]}),D.description&&i.jsxs("div",{className:"mt-4 pt-3 border-top",children:[i.jsx("h6",{className:"font-size-14 mb-2",children:r("Description","kivicare-clinic-management-system")}),i.jsx("p",{className:"mb-0 font-size-14 text-muted",children:D.description})]}),T.isClosed&&i.jsx("div",{className:"mt-3 pt-3 border-top",children:i.jsxs("h6",{className:"text-danger mb-0",children:[i.jsx("span",{className:"fw-bold",children:r("Note:","kivicare-clinic-management-system")})," ",i.jsx("i",{children:r("This encounter is closed","kivicare-clinic-management-system")})]})})]})]})}),h&&i.jsx(lte,{canEditEncounter:u,templateId:o.templateId,encounterId:o.id}),((A&&Object.keys(A)?.length)>0||o?.appointmentReport?.length>0)&&i.jsx(i.Fragment,{children:i.jsxs(al,{className:"mt-4",children:[i.jsx("h5",{className:"fw-semibold mb-3",children:r("Patient extra details","kivicare-clinic-management-system")}),o?.appointmentReport?.length>0&&i.jsxs("div",{className:"kc-uploaded-files border-top pt-3 mt-3",children:[i.jsx("h6",{className:"fw-semibold mb-3",children:r("Medical Report","kivicare-clinic-management-system")}),o?.appointmentReport?.map((z,ie)=>i.jsxs("div",{className:"kc-uploaded-file d-flex justify-content-between align-items-center",children:[i.jsx("span",{className:"kc-file-name",children:z.filename}),i.jsx("div",{className:"kc-file-actions",children:i.jsx("a",{className:"me-2",href:z.url,target:"_blank",rel:"noopener noreferrer",children:i.jsx("i",{className:"ph ph-eye"})})})]},ie))]}),i.jsx(VJ,{fields:N,data:A,title:r("Other Information","kivicare-clinic-management-system")})]})})]})}),i.jsx("div",{className:"col-xl-9 col-lg-8",children:i.jsxs(Rc.Container,{activeKey:F(),onSelect:H,children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center flex-wrap my-3",children:[i.jsxs(Mn,{variant:"pills",className:"nav-pill-card",children:[i.jsx(Mn.Item,{children:i.jsx(Mn.Link,{as:lc,to:"clinical-details",children:r("Clinical Details","kivicare-clinic-management-system")})}),_("bodyChart")&&i.jsx(Mn.Item,{children:i.jsx(Mn.Link,{as:lc,to:"body-chart",children:r("Body Chart","kivicare-clinic-management-system")})}),m.map(z=>i.jsx(Mn.Item,{children:i.jsx(Mn.Link,{as:lc,to:`custom-form/${z.id}`,children:z.name?.text||z.name})},z.id))]}),i.jsxs("div",{className:"d-flex gap-2",children:[I&&i.jsxs(i.Fragment,{children:[i.jsx(Xt,{variant:"primary",onClick:G,children:r("Print Encounter","kivicare-clinic-management-system")}),T.isClosed&&w?.id&&i.jsx(ht,{className:"btn btn-primary",to:`/encounter/billings/view/${w?.id}`,children:r("Bill Details","kivicare-clinic-management-system")})]}),T.canClose&&i.jsx(i.Fragment,{children:!a&&i.jsx(Xt,{variant:"secondary",onClick:O,children:r("Close Encounter","kivicare-clinic-management-system")})})]})]}),i.jsx(fs,{})]})})]}),i.jsx(Hk,{show:p,onHide:k,editFormData:v,setEditFormData:x,showAddServiceItemForm:g,setShowAddServiceItemForm:y,discountValue:v?.discountValue||0,totalPayable:v?.totalPayable||0,editBillId:w?.id,appointmentId:o?.appointmentId,handleCloseEditModal:k,onBillSaved:()=>{s.invalidateQueries(["encounter",t]),s.invalidateQueries(["billByEncounterId",t])}})]})},cte=()=>i.jsx(see,{children:i.jsx(ote,{})}),dte=()=>{const{isAddonActive:t,hasCapability:e}=mt(),n=t("kiviPro"),s=Ln(),[a,l]=f.useState(""),[o,c]=f.useState(1),[d,m]=f.useState(10),[u,h]=f.useState([]),p=Ga(a,500),g=n?rP({page:o,perPage:d,search:p,sort:u}):{data:{data:{list:[]}},isLoading:!1},v=g?.data?.data?.list??[],x=g?.isLoading??!1,y=g?.data?.data?.total_rows??0,b=g?.data?.data?.total_pages??1,{mutateAsync:k}=XJ(),{mutateAsync:w}=JJ(),{mutateAsync:T}=eee(),j=()=>n?!0:(At.fire({title:r("Pro Feature","kivicare-clinic-management-system"),text:r("Encounter template management is only available in KiviCarePro.","kivicare-clinic-management-system"),icon:"warning",confirmButtonText:r("OK","kivicare-clinic-management-system")}),!1),D=async(P=null)=>{if(!j())return;const E=!!P,{value:I,isConfirmed:M}=await At.fire({title:E?r("Edit Template","kivicare-clinic-management-system"):r("Add New Template","kivicare-clinic-management-system"),input:"text",inputLabel:r("Enter Template Name","kivicare-clinic-management-system"),inputPlaceholder:r("e.g. 'Dummy Encounter'","kivicare-clinic-management-system"),inputValue:P?.name||"",showCancelButton:!0,confirmButtonText:r("Save","kivicare-clinic-management-system"),cancelButtonText:r("Cancel","kivicare-clinic-management-system"),reverseButtons:!0,customClass:{validationMessage:"text-danger fw-medium"},preConfirm:O=>O.trim()?O.trim():(At.showValidationMessage(r("Template name is required","kivicare-clinic-management-system")),!1)});if(M&&I)try{await k({id:P?.id,data:{name:I},isEdit:E}),Se.success(E?r("Template updated successfully.","kivicare-clinic-management-system"):r("Template created successfully.","kivicare-clinic-management-system"))}catch(O){const F=O?.response?.data?.message||O?.response?.data?.errors?.name?.[0]||r("Something went wrong. Please try again.","kivicare-clinic-management-system");Se.error(F)}},_=async P=>{if(!j())return;const{isConfirmed:E}=await At.fire({title:r("Are you sure?","kivicare-clinic-management-system"),text:r("You won't be able to revert this!","kivicare-clinic-management-system"),icon:"warning",showCancelButton:!0,confirmButtonText:r("Yes, delete it!","kivicare-clinic-management-system"),cancelButtonText:r("Cancel","kivicare-clinic-management-system"),reverseButtons:!0});E&&(await w(P),Se.success(r("Template has been deleted.","kivicare-clinic-management-system")))},N=f.useMemo(()=>[s.accessor("id",{header:()=>r("ID","kivicare-clinic-management-system"),cell:P=>P.getValue()}),s.accessor("name",{header:()=>r("Template Name","kivicare-clinic-management-system"),headerClassName:"w-75",cell:P=>P.getValue()}),...e("encounters_template_edit")||e("encounters_template_view")||e("encounters_template_delete")?[s.display({id:"action",header:()=>r("Action","kivicare-clinic-management-system"),cell:P=>{const E=I=>M=>i.jsx(ut,{id:`tooltip-${P.cell.row.original.id}-${I}`,...M,children:I});return i.jsxs("div",{className:"d-flex align-items-center gap-3",children:[e("encounters_template_edit")&&i.jsx(Qe,{placement:"top",overlay:E(r("Edit Template","kivicare-clinic-management-system")),children:i.jsx("a",{href:"#",className:"text-success fs-5",onClick:I=>{I.preventDefault(),D(P.row.original)},children:i.jsx("i",{className:"ph ph-pencil-simple-line"})})}),e("encounters_template_view")&&i.jsx(Qe,{placement:"top",overlay:E(r("Template Dashboard","kivicare-clinic-management-system")),children:i.jsx(ht,{to:`/encounter-template/dashboard/${P.cell.row.original.id}`,className:"d-inline-block",children:i.jsx("span",{className:"text-gray fs-4",children:i.jsx("i",{className:"ph ph-gauge"})})})}),e("encounters_template_delete")&&i.jsx(Qe,{placement:"top",overlay:E(r("Delete Template","kivicare-clinic-management-system")),children:i.jsx("a",{href:"#",className:"text-danger fs-5",onClick:I=>{I.preventDefault(),_(P.row.original.id)},children:i.jsx("i",{className:"ph ph-trash"})})})]})}})]:[]],[n]),A=f.useMemo(()=>n?[{label:r("Delete","kivicare-clinic-management-system"),icon:i.jsx("i",{className:"ph ph-trash"}),action:async(P,E)=>{const I=P.map(O=>O.id),{isConfirmed:M}=await At.fire({title:r("Delete Templates","kivicare-clinic-management-system"),text:r("Are you sure you want to delete selected templates?","kivicare-clinic-management-system"),icon:"warning",showCancelButton:!0,confirmButtonText:r("Yes, delete","kivicare-clinic-management-system"),reverseButtons:!0});M&&(await T(I),Se.success(r("Templates have been deleted.","kivicare-clinic-management-system")),E())}}]:[],[n,T]);return i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"d-flex align-items-md-center justify-content-between flex-column flex-lg-row gap-3 mb-4",children:[i.jsx("div",{className:"page-title",children:i.jsx("h5",{className:"mb-0",children:r("All Encounter Template List","kivicare-clinic-management-system")})}),e("encounters_template_add")&&i.jsx("div",{className:"d-flex align-items-center flex-wrap gap-3",children:i.jsxs("button",{className:"btn btn-secondary d-flex align-items-center gap-2",onClick:()=>D(),disabled:!n,children:[i.jsx("i",{className:"ph ph-plus-circle"}),i.jsx("span",{children:r("Add Template","kivicare-clinic-management-system")})]})})]}),i.jsx("div",{className:"d-flex justify-content-between flex-column flex-lg-row gap-3 mb-4",children:i.jsx("div",{className:"table-selection d-flex gap-3 flex-column flex-sm-row",children:i.jsxs("div",{className:"input-group input-group-search",children:[i.jsx("span",{className:"input-group-text",children:i.jsx("i",{className:"ph ph-magnifying-glass"})}),i.jsx("input",{type:"text",className:"form-control",placeholder:r("Search templates","kivicare-clinic-management-system"),value:a,onChange:P=>n&&l(P.target.value),disabled:!n})]})})}),i.jsx(wn,{data:v,columns:N,currentPage:o,perPage:d,totalItems:y,lastPage:b,isLoading:x,enableSelection:n,onPageChange:c,onPerPageChange:P=>{m(P),c(1)},onSortingChange:h,bulkActions:A,moduleNamePlural:"encounter templates"}),!n&&i.jsx(di,{text:r("Encounter template management is only available in KiviCare Pro version.","kivicare-clinic-management-system"),link:"https://codecanyon.net/item/kivicare-pro-clinic-patient-management-system-ehr-addon/30690654?s_rank=3"})]})},mte=()=>{const{id:t}=Yt();return i.jsx(My,{patientId:t})},ute=({bill:t})=>{const{getPriceFormat:e}=mt(),[n,s]=f.useState(!0),a=Ln(),l=f.useMemo(()=>[a.accessor("sr",{id:"sr",header:()=>r("Sr. No","kivicare-clinic-management-system"),cell:c=>c.row.index+1,enableSorting:!1}),a.accessor("service_name",{id:"service_name",header:()=>r("Services","kivicare-clinic-management-system"),cell:c=>c.getValue(),enableSorting:!1}),a.accessor("discount",{id:"discount",header:()=>r("Discount","kivicare-clinic-management-system"),cell:c=>{const d=c.getValue();if((d==null||d===0)&&t.discount){const m=t.discount/(t.serviceItems?.length||1);return`${e(m)}`}return d!=null?`${e(d)}`:"0"},enableSorting:!1}),a.accessor("price",{id:"price",header:()=>r("Price","kivicare-clinic-management-system"),cell:c=>e(c.getValue()),enableSorting:!1}),a.accessor("total",{id:"total",header:()=>r("Total Amount","kivicare-clinic-management-system"),cell:c=>{const d=c.row.original,m=d.discount||(t.discount?t.discount/(t.serviceItems?.length||1):0),u=d.price*d.quantity-m;return e(u)},enableSorting:!1})],[]),o=f.useMemo(()=>{const c={};return(t.taxItems||[]).forEach(d=>{if(d.tax_name)if(c[d.tax_name])c[d.tax_name].count+=1,c[d.tax_name].totalAmount+=Number(d.tax_amount);else{let m=1;parseInt(d.tax_value)/parseInt(d.tax_amount)>1&&d.type==="fixed"&&(m=Math.ceil(parseInt(d.tax_value)/parseInt(d.tax_amount))),c[d.tax_name]={...d,count:m,totalAmount:Number(d.tax_amount)}}}),Object.values(c)},[t.taxItems]);return i.jsx("div",{className:"card",children:i.jsxs("div",{className:"card-body",children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between gap-2 flex-wrap",children:[i.jsxs("div",{className:"d-flex align-items-center row-gap-2 column-gap-5 flex-wrap",children:[i.jsxs("div",{className:"d-flex align-items-center gap-3 font-size-14",children:[i.jsxs("span",{children:[r("Invoice ID","kivicare-clinic-management-system"),": "]}),i.jsxs("span",{className:"fw-semibold text-primary",children:["#",t.invoiceId]})]}),i.jsxs("div",{className:"d-flex align-items-center gap-3 font-size-14",children:[i.jsxs("span",{children:[r("Date & Time","kivicare-clinic-management-system"),": "]}),i.jsx("span",{className:"fw-semibold heading-color",children:t.date||"-"})]})]}),i.jsxs("div",{className:"d-flex align-items-center gap-3 font-size-14",children:[i.jsxs("span",{children:[r("Payment Status","kivicare-clinic-management-system"),": "]}),i.jsx("span",{className:`text-${t?.status==="paid"?"success":"danger"} fw-semibold`,children:t?.status?.toUpperCase()})]})]}),i.jsxs("div",{className:"row gy-4 mb-5 pb-2 spcing-top",children:[i.jsxs("div",{className:"col-lg-4",children:[i.jsx("h6",{children:r("About Patient","kivicare-clinic-management-system")}),i.jsx("div",{className:"bg-body p-4 rounded",children:i.jsx(dn,{profileUrl:t.patient?.patient_image_url,name:t.patient?.name,gender:t.patient?.gender,dob:t.patient?.dob,size:"sm"})})]}),i.jsxs("div",{className:"col-lg-4",children:[i.jsx("h6",{children:r("About Doctor","kivicare-clinic-management-system")}),i.jsx("div",{className:"bg-body p-4 rounded",children:i.jsx("div",{className:"d-flex align-items-center gap-3 flex-sm-nowrap flex-wrap",children:i.jsx(dn,{profileUrl:t.doctor?.doctor_image_url,name:t.doctor?.name,email:t.doctor?.email,phone:t.doctor?.phone,size:"sm"})})})]}),i.jsxs("div",{className:"col-lg-4",children:[i.jsx("h6",{children:r("About Clinic","kivicare-clinic-management-system")}),i.jsx("div",{className:"bg-body p-4 rounded",children:i.jsx("div",{className:"d-flex align-items-center gap-3 flex-sm-nowrap flex-wrap",children:i.jsx(dn,{profileUrl:t.clinic?.clinic_image_url,name:t.clinic?.name,email:t.clinic?.email,phone:t.clinic?.phone,address:t.clinic?.address,size:"sm"})})})]})]}),i.jsxs("div",{className:"mb-5 pb-2",children:[i.jsx("h6",{children:r("Service","kivicare-clinic-management-system")}),i.jsx(wn,{data:t.serviceItems||[],columns:l,isLoading:!1,error:null,enableSelection:!1})]}),i.jsxs("div",{children:[i.jsx("h6",{children:r("Payment Details","kivicare-clinic-management-system")}),i.jsx("div",{className:"card bg-body",children:i.jsxs("div",{className:"card-body",children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap gap-2 mb-2",children:[i.jsx("span",{className:"font-size-14",children:r("Subtotal","kivicare-clinic-management-system")}),i.jsx("h6",{className:"m-0",children:e(t.subTotal)??"0.00"})]}),i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap mb-2",children:[i.jsx("span",{className:"font-size-14",children:r("Discount","kivicare-clinic-management-system")}),i.jsx("h6",{className:"m-0",children:e(t.discount||0)})]}),i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap gap-2",children:[i.jsx("span",{className:"font-size-14",children:r("Tax","kivicare-clinic-management-system")}),i.jsxs("div",{className:"cursor-pointer applied-tax d-flex align-items-center",onClick:()=>s(c=>!c),style:{userSelect:"none"},children:[i.jsx("i",{className:`ph ${n?"ph-caret-up":"ph-caret-down"} fw-semibold`}),i.jsx("span",{className:"text-danger h6 m-0 ms-1",children:e(t.totalTax)??"0.00"})]})]}),n&&i.jsxs("div",{className:"mt-2 p-3 section-bg rounded",children:[i.jsx("h6",{className:"font-size-14",children:r("Applied Tax","kivicare-clinic-management-system")}),o.length===0&&i.jsx("div",{className:"text-muted",children:r("No tax applied","kivicare-clinic-management-system")}),i.jsx("div",{className:"tax-spacing2",children:o.map((c,d)=>i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap gap-2 tax-spacing2-item",children:[i.jsxs("span",{className:"font-size-14",children:[c.tax_name,c.count>1?` x${c.count}`:"",c.rate?` (${c.rate}%)`:""]}),i.jsx("h6",{className:"font-size-14 m-0 text-danger",children:e(c.totalAmount)})]},d))})]}),i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap gap-2 mt-5",children:[i.jsx("h6",{className:"font-size-14 m-0",children:r("Grand Total","kivicare-clinic-management-system")}),i.jsx("h5",{className:"m-0 text-primary",children:e(t.actual_amount)??"0.00"})]})]})})]})]})})},dP=()=>i.jsxs("div",{className:"billing-details",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[i.jsx(S,{width:"160px",height:"2rem"}),i.jsxs("div",{className:"d-flex gap-2",children:[i.jsx(st,{width:"100px",height:"32px"}),i.jsx(st,{width:"80px",height:"32px"})]})]}),i.jsx("div",{className:"card",children:i.jsxs("div",{className:"card-body",children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between gap-2 flex-wrap mb-4",children:[i.jsxs("div",{className:"d-flex align-items-center row-gap-2 column-gap-5 flex-wrap",children:[i.jsxs("div",{className:"d-flex align-items-center gap-3 font-size-14",children:[i.jsx(S,{width:"80px",height:"0.875rem"}),i.jsx(S,{width:"60px",height:"0.875rem"})]}),i.jsxs("div",{className:"d-flex align-items-center gap-3 font-size-14",children:[i.jsx(S,{width:"90px",height:"0.875rem"}),i.jsx(S,{width:"120px",height:"0.875rem"})]})]}),i.jsxs("div",{className:"d-flex align-items-center gap-3 font-size-14",children:[i.jsx(S,{width:"110px",height:"0.875rem"}),i.jsx(S,{width:"50px",height:"0.875rem"})]})]}),i.jsxs("div",{className:"row gy-4 mb-5 pb-2 spcing-top",children:[i.jsxs("div",{className:"col-lg-4",children:[i.jsx(S,{width:"100px",height:"0.875rem",className:"mb-3"}),i.jsx("div",{className:"bg-body p-4 rounded",children:i.jsx(Ys,{avatarSize:"50px",nameWidth:"120px",detailWidth:"100px"})})]}),i.jsxs("div",{className:"col-lg-4",children:[i.jsx(S,{width:"100px",height:"0.875rem",className:"mb-3"}),i.jsx("div",{className:"bg-body p-4 rounded",children:i.jsx(Ys,{avatarSize:"50px",nameWidth:"120px",detailWidth:"100px"})})]}),i.jsxs("div",{className:"col-lg-4",children:[i.jsx(S,{width:"100px",height:"0.875rem",className:"mb-3"}),i.jsx("div",{className:"bg-body p-4 rounded",children:i.jsx(Ys,{avatarSize:"50px",nameWidth:"120px",detailWidth:"100px"})})]})]}),i.jsxs("div",{className:"mb-5 pb-2",children:[i.jsx(S,{width:"60px",height:"0.875rem",className:"mb-3"}),i.jsx("div",{className:"table-responsive",children:i.jsxs("table",{className:"table table-bordered rounded",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{children:i.jsx(S,{width:"50px",height:"1rem"})}),i.jsx("th",{children:i.jsx(S,{width:"70px",height:"1rem"})}),i.jsx("th",{children:i.jsx(S,{width:"70px",height:"1rem"})}),i.jsx("th",{children:i.jsx(S,{width:"60px",height:"1rem"})}),i.jsx("th",{children:i.jsx(S,{width:"100px",height:"1rem"})})]})}),i.jsxs("tbody",{children:[i.jsxs("tr",{children:[i.jsx("td",{children:i.jsx(S,{width:"20px",height:"1rem"})}),i.jsx("td",{children:i.jsx(S,{width:"150px",height:"1rem"})}),i.jsx("td",{children:i.jsx(S,{width:"50px",height:"1rem"})}),i.jsx("td",{children:i.jsx(S,{width:"60px",height:"1rem"})}),i.jsx("td",{children:i.jsx(S,{width:"70px",height:"1rem"})})]}),i.jsxs("tr",{children:[i.jsx("td",{children:i.jsx(S,{width:"20px",height:"1rem"})}),i.jsx("td",{children:i.jsx(S,{width:"140px",height:"1rem"})}),i.jsx("td",{children:i.jsx(S,{width:"50px",height:"1rem"})}),i.jsx("td",{children:i.jsx(S,{width:"60px",height:"1rem"})}),i.jsx("td",{children:i.jsx(S,{width:"70px",height:"1rem"})})]}),i.jsxs("tr",{children:[i.jsx("td",{children:i.jsx(S,{width:"20px",height:"1rem"})}),i.jsx("td",{children:i.jsx(S,{width:"160px",height:"1rem"})}),i.jsx("td",{children:i.jsx(S,{width:"50px",height:"1rem"})}),i.jsx("td",{children:i.jsx(S,{width:"60px",height:"1rem"})}),i.jsx("td",{children:i.jsx(S,{width:"70px",height:"1rem"})})]})]})]})})]}),i.jsxs("div",{children:[i.jsx(S,{width:"120px",height:"0.875rem",className:"mb-3"}),i.jsx("div",{className:"card bg-body",children:i.jsxs("div",{className:"card-body",children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap gap-2 mb-2",children:[i.jsx(S,{width:"60px",height:"0.875rem"}),i.jsx(S,{width:"70px",height:"1.125rem"})]}),i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap mt-2",children:[i.jsx(S,{width:"70px",height:"0.875rem"}),i.jsx(S,{width:"60px",height:"1.125rem"})]}),i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap gap-2",children:[i.jsx(S,{width:"30px",height:"0.875rem"}),i.jsxs("div",{className:"d-flex align-items-center",children:[i.jsx(S,{width:"15px",height:"15px",className:"me-1"}),i.jsx(S,{width:"70px",height:"1.125rem"})]})]}),i.jsxs("div",{className:"mt-2 p-3 section-bg rounded",children:[i.jsx(S,{width:"90px",height:"0.875rem",className:"mb-2"}),i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap gap-2 mb-2",children:[i.jsx(S,{width:"100px",height:"0.875rem"}),i.jsx(S,{width:"60px",height:"0.875rem"})]}),i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap gap-2",children:[i.jsx(S,{width:"120px",height:"0.875rem"}),i.jsx(S,{width:"60px",height:"0.875rem"})]})]}),i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap gap-2 mt-4",children:[i.jsx(S,{width:"90px",height:"1.125rem"}),i.jsx(S,{width:"80px",height:"1.25rem"})]})]})})]})]})})]}),mP=()=>{const{isAddonActive:t}=mt(),e=t("kiviPro"),{id:n}=Yt(),{data:s,isLoading:a}=qk(n,{enabled:e}),l=s?.data||{},o=nU(),c=iU(),d=()=>{o.mutate(n,{onSuccess:u=>{const h=new Blob([u],{type:"application/pdf"}),p=URL.createObjectURL(h);window.open(p,"_blank")},onError:u=>{At.fire({title:r("Error","kivicare-clinic-management-system"),text:u?.response?.data?.message||u?.message||r("Failed to generate bill PDF.","kivicare-clinic-management-system"),icon:"error",confirmButtonText:r("OK","kivicare-clinic-management-system")})}})},m=()=>{c.mutate(n,{onSuccess:()=>{At.fire({title:r("Success","kivicare-clinic-management-system"),text:r("Bill PDF sent to patient email successfully.","kivicare-clinic-management-system"),icon:"success",confirmButtonText:r("OK","kivicare-clinic-management-system")})},onError:u=>{At.fire({title:r("Error","kivicare-clinic-management-system"),text:u?.response?.data?.message||u?.message||r("Failed to send bill email.","kivicare-clinic-management-system"),icon:"error",confirmButtonText:r("OK","kivicare-clinic-management-system")})}})};return a?i.jsx(dP,{}):i.jsxs("div",{className:"billing-details",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[i.jsx("h3",{className:"mb-0",children:r("Billing Details","kivicare-clinic-management-system")}),i.jsxs("div",{className:"d-flex gap-2",children:[i.jsxs("button",{className:"btn btn-primary btn-sm",onClick:d,disabled:!e||a,children:[i.jsx("i",{className:"ph ph-printer me-1"}),r("Print Bill","kivicare-clinic-management-system")]}),i.jsxs("button",{className:"btn btn-secondary btn-sm",onClick:m,disabled:!e||a,children:[i.jsx("i",{className:"ph ph-envelope me-1"}),r("Email","kivicare-clinic-management-system")]})]})]}),!a&&i.jsx(ute,{bill:l}),!e&&i.jsx(di,{text:r("Billing module is KiviCare Pro feature.","kivicare-clinic-management-system")})]})},hte=()=>{const{id:t}=Yt(),{data:e,isLoading:n}=qA(t),s=e?.data||{};return i.jsx("div",{className:"billing-details",children:!n&&i.jsx(mP,{bill:s})})},Ro={getBodyCharts:(t={})=>ve({endpoint:"body-chart",method:"GET",data:t}),getBodyChartConfig:()=>ve({endpoint:"body-chart/config",method:"GET"}),saveBodyChartConfig:t=>ve({endpoint:"body-chart/config",method:"POST",data:t}),updateBodyChartConfig:t=>ve({endpoint:"body-chart/config",method:"PUT",data:t}),saveBodyChart:t=>ve({endpoint:"body-chart",method:"POST",data:t}),getBodyChart:(t,e)=>ve({endpoint:"body-chart/get",method:"GET",data:{body_chart_id:t,encounter_id:e}}),getBodyChartEdit:(t={})=>ve({endpoint:"body-chart/edit",method:"GET",data:t}),deleteBodyChart:(t,e)=>ve({endpoint:"body-chart/delete",method:"POST",data:{body_chart_id:t,encounter_id:e}}),emailBodyChart:(t,e)=>ve({endpoint:"body-chart/email",method:"POST",data:{body_chart_id:t,...e}}),bulkDeleteBodyCharts:t=>ve({endpoint:"body-chart/bulk-delete",method:"POST",data:{ids:t}})},wi={all:["bodyCharts"],lists:()=>[...wi.all,"list"],list:t=>[...wi.lists(),{filters:t}],details:()=>[...wi.all,"detail"],detail:t=>[...wi.details(),t],config:()=>[...wi.all,"config"],edit:()=>[...wi.all,"edit"],editData:t=>[...wi.edit(),t]},pte=(t={},e={})=>{const{sort:n,sorting:s,...a}=t;return ft({queryKey:wi.list(a),queryFn:()=>Ro.getBodyCharts(t),enabled:!!t.encounter_id,...e})},gte=(t={})=>ft({queryKey:wi.config(),queryFn:()=>Ro.getBodyChartConfig(),staleTime:300*1e3,...t}),Mpe=({chartId:t,encounterId:e},n={})=>ft({queryKey:wi.detail(t),queryFn:()=>Ro.getBodyChart(t,e),enabled:!!t&&!!e,...n}),fte=(t={})=>{const e=ze();return Le({mutationFn:n=>Ro.saveBodyChartConfig(n),onSuccess:n=>{e.invalidateQueries({queryKey:wi.config()}),e.setQueryData(wi.config(),n)},...t})},vte=(t={})=>{const e=ze();return Le({mutationFn:n=>Ro.updateBodyChartConfig(n),onSuccess:n=>{e.invalidateQueries({queryKey:wi.config()}),e.setQueryData(wi.config(),n)},...t})},Ipe=(t={})=>{const e=ze();return Le({mutationFn:n=>Ro.saveBodyChart(n),onSuccess:(n,s)=>{s.encounter_id&&e.invalidateQueries({queryKey:wi.lists(),predicate:a=>a.queryKey[2]?.filters?.encounter_id===s.encounter_id})},...t})},xte=(t={})=>{const e=ze();return Le({mutationFn:n=>Ro.deleteBodyChart(n.body_chart_id,n.encounter_id),onSuccess:(n,s)=>{e.invalidateQueries({queryKey:wi.lists()}),e.removeQueries({queryKey:wi.detail(s.body_chart_id)})},...t})},yte=()=>{const{id:t}=Yt(),{encounterData:e}=nf(),n=Yi(),s=hn(),[a,l]=f.useState(1),[o,c]=f.useState(10),[d,m]=f.useState([]),[u,h]=f.useState(!1),p=f.useRef(null),{data:g,isLoading:v,error:x}=pte({encounter_id:t,page:a,perPage:o}),y=f.useMemo(()=>{if(!g?.data?.data)return[];let O=[...g.data.data];if(d.length>0){const F=d[0];O.sort((H,G)=>{const z=H[F.id],ie=G[F.id];if(z==null&&ie==null)return 0;if(z==null)return F.desc?1:-1;if(ie==null)return F.desc?-1:1;if(typeof z=="string"&&typeof ie=="string"){const W=z.localeCompare(ie);return F.desc?-W:W}return typeof z=="number"&&typeof ie=="number"?F.desc?ie-z:z-ie:z<ie?F.desc?1:-1:z>ie?F.desc?-1:1:0})}return O},[g?.data?.data,d]),b=xte({onSuccess:()=>{At.fire({title:r("Success","kivicare-clinic-management-system"),text:r("Body chart deleted successfully","kivicare-clinic-management-system"),icon:"success",timer:2e3})},onError:O=>{At.fire({title:r("Error","kivicare-clinic-management-system"),text:O.message||r("Failed to delete body chart","kivicare-clinic-management-system"),icon:"error"})}}),k=O=>{l(O)},w=O=>{c(O),l(1)},T=O=>{m(O)},j=Ln(),D=f.useMemo(()=>[j.accessor("id",{header:()=>r("ID","kivicare-clinic-management-system"),cell:O=>O.getValue(),enableSorting:!0,size:80}),j.accessor("name",{header:()=>r("Name","kivicare-clinic-management-system"),cell:O=>O.getValue()||"-",enableSorting:!0,size:200}),j.accessor("chart_image",{header:()=>r("Image","kivicare-clinic-management-system"),enableSorting:!1,cell:O=>{const F=O.getValue();return F?i.jsx("div",{className:"d-flex align-items-center",children:i.jsx("img",{src:F,alt:O.row.original.name||"Body Chart",className:"rounded",style:{width:"60px",height:"60px",objectFit:"cover",cursor:"pointer"},onClick:()=>P(F)})}):i.jsx("span",{className:"text-muted",children:"-"})},size:100}),j.accessor("description",{header:()=>r("Description","kivicare-clinic-management-system"),enableSorting:!1,cell:O=>{const F=O.getValue();return F&&F.trim()!==""?i.jsx("span",{title:F,children:F.length>50?`${F.substring(0,50)}...`:F}):"-"},size:250}),j.accessor("last_update_user",{header:()=>r("Last Updated By","kivicare-clinic-management-system"),enableSorting:!1,cell:O=>O.getValue()||"-",size:150}),j.accessor("updatedAt",{header:()=>r("Updated At","kivicare-clinic-management-system"),cell:O=>O.getValue(),size:120,enableSorting:!1}),j.accessor("actions",{header:()=>r("Actions","kivicare-clinic-management-system"),cell:O=>i.jsxs("div",{className:"d-flex gap-2",children:[Number(e?.status)===1&&!n&&i.jsx(Xt,{variant:"link",onClick:()=>I(O.row.original.id),title:r("Edit","kivicare-clinic-management-system"),children:i.jsx("i",{className:"ph ph-pencil-simple text-primary"})}),i.jsx(Xt,{variant:"link",onClick:()=>P(O.row.original.chart_image),title:r("View","kivicare-clinic-management-system"),children:i.jsx("i",{className:"ph ph-eye text-info"})}),i.jsx(Xt,{variant:"link",onClick:()=>E(O.row.original.chart_image,O.row.original.name),title:r("Download","kivicare-clinic-management-system"),children:i.jsx("i",{className:"ph ph-download text-success"})}),Number(e?.status)===1&&!n&&i.jsx(Xt,{variant:"link",onClick:()=>M(O.row.original.id),title:r("Delete","kivicare-clinic-management-system"),children:i.jsx("i",{className:"ph ph-trash text-danger"})})]}),size:120,enableSorting:!1})],[e,n]),_=Number(e?.status)===1&&!n?[{label:r("Delete","kivicare-clinic-management-system"),action:O=>{At.fire({title:r("Are you sure?","kivicare-clinic-management-system"),text:r(`Delete ${O.length} selected body chart?`,"kivicare-clinic-management-system"),icon:"warning",showCancelButton:!0,confirmButtonColor:"var(--bs-primary)",cancelButtonColor:"var(--bs-secondary)",confirmButtonText:r("Yes, delete them!","kivicare-clinic-management-system"),cancelButtonText:r("Cancel","kivicare-clinic-management-system")}).then(F=>{F.isConfirmed&&O.forEach(H=>{b.mutate({body_chart_id:H.id,encounter_id:t})})})}}]:[],N=()=>{s(`/encounter/dashboard/${t}/body-chart/create`)},A=()=>i.jsx("tr",{children:i.jsx("td",{colSpan:12,className:"text-center  py-4 text-muted border-start border-end",children:i.jsxs("div",{className:"py-4",children:[i.jsx("i",{className:"ph ph-chart-bar-horizontal fs-1 text-muted mb-3 d-block"}),i.jsx("h6",{children:r("No body charts found","kivicare-clinic-management-system")}),!n&&i.jsx(i.Fragment,{children:i.jsx("p",{className:"text-muted mb-3",children:Number(e?.status)===1?r("Start by creating your first body chart for this encounter","kivicare-clinic-management-system"):r("No body charts available for this closed encounter","kivicare-clinic-management-system")})})]})})}),P=O=>{window.open(O,"_blank")},E=(O,F)=>{const H=document.createElement("a");H.href=O,H.download=F||"body-chart",H.click()},I=O=>{s(`/encounter/dashboard/${t}/body-chart/edit/${O}`)},M=O=>{At.fire({title:r("Are you sure?","kivicare-clinic-management-system"),text:r("This action cannot be undone!","kivicare-clinic-management-system"),icon:"warning",showCancelButton:!0,confirmButtonColor:"var(--bs-primary)",cancelButtonColor:"var(--bs-secondary)",confirmButtonText:r("Yes, delete it!","kivicare-clinic-management-system"),cancelButtonText:r("Cancel","kivicare-clinic-management-system")}).then(F=>{F.isConfirmed&&b.mutate({body_chart_id:O,encounter_id:t})})};return i.jsx("div",{className:"body-chart-list-page",children:i.jsx(_t,{children:i.jsx(_t.Body,{children:i.jsxs("div",{className:"kc-table-wrapper",children:[i.jsx(Ci,{in:!u,timeout:100,classNames:"fade-top-bottom",unmountOnExit:!0,nodeRef:p,children:i.jsxs("div",{ref:p,className:"position-absolute top-0 w-100 d-flex justify-content-between align-items-center mb-4",children:[i.jsx("div",{children:i.jsx("h6",{className:"mb-1",children:r("Body Charts","kivicare-clinic-management-system")})}),!n&&Number(e?.status)===1&&i.jsx("div",{className:"d-flex gap-2",children:i.jsxs(Xt,{variant:"secondary",onClick:N,children:[i.jsx("i",{className:"ph ph-plus-circle me-2"}),r("Add New","kivicare-clinic-management-system")]})})]})}),i.jsx(wn,{data:y,columns:D,isLoading:v,error:x,currentPage:a,perPage:o,totalItems:g?.data?.total||0,lastPage:Math.ceil((g?.data?.total||0)/o),onPageChange:k,onPerPageChange:w,onSortingChange:T,enableSelection:Number(e?.status)===1&&!n,bulkActions:_,bulkActionsButtonText:r("Bulk Actions","kivicare-clinic-management-system"),moduleNamePlural:"body charts",renderEmptyState:A,bordered:!0,responsive:!0,manualPagination:!0,manualFiltering:!0,manualSorting:!1,onBulkActionsVisibilityChange:h})]})})})})},bte=()=>{const{id:t,formId:e}=Yt(),{hasCapability:n,userRole:s,currentDoctorId:a,isAddonActive:l}=mt(),o=s||"patient",[c,d]=f.useState(!1),m=ze(),u=f.useRef({}),{data:h,isLoading:p}=Dw(t),g=h?.data||{},{data:v}=ad({module_type:"patient_encounter_module",status:1,module_id:t},{enabled:l("kiviPro")}),y=(v?.data?.forms||[]).find(w=>w.id.toString()===e),b=qJ({onSuccess:()=>{At.fire({title:r("Success","kivicare-clinic-management-system"),text:r("Form data saved successfully","kivicare-clinic-management-system"),icon:"success",confirmButtonText:r("OK","kivicare-clinic-management-system")}),m.invalidateQueries(["custom-forms"])},onError:w=>{console.error("Error saving form data:",w),At.fire({title:r("Error","kivicare-clinic-management-system"),text:r("Failed to save form data. Please try again.","kivicare-clinic-management-system"),icon:"error",confirmButtonText:r("OK","kivicare-clinic-management-system")})}});f.useEffect(()=>{d(Number(g?.status)===1&&(Cr(o)||Jn(o)||Xn(o)||Li(o)&&g?.doctorId===a))},[g]);const k=async(w,T)=>{console.log("Saving form data:",{formId:w,formData:T,encounterId:t}),b.mutate({form_id:w,module_id:t,module_type:"patient_encounter_module",form_data:T})};return y?i.jsx("div",{className:"mt-4",children:i.jsx(_t,{children:i.jsxs(qa,{children:[i.jsx("div",{id:`custom-form-${y.id}`,children:i.jsx(Ua,{ref:w=>u.current[y.id]=w,fields:y.fields,data:y.form_data||{},readOnly:!c,formId:`form_${y.id}`})}),c&&i.jsx("div",{className:"d-flex justify-content-end mt-3",children:i.jsx(Xt,{variant:"primary",onClick:()=>{const w=u.current[y.id];if(w){const T=w.getFormData();k(y.id,T)}},disabled:b.isPending,children:b.isPending?r("Saving...","kivicare-clinic-management-system"):r("Save Form","kivicare-clinic-management-system")})})]})})}):i.jsx("div",{className:"mt-4",children:i.jsx(_t,{children:i.jsx(qa,{children:i.jsx("div",{className:"text-center",children:i.jsx("p",{children:r("Form not found","kivicare-clinic-management-system")})})})})})},NC=f.lazy(()=>Ir(()=>import("./BodyChartEditor-BQgR7Bsn.js"),__vite__mapDeps([0,2]),import.meta.url)),kte=[Gn({path:"/encounter",title:r("Encounter List","kivicare-clinic-management-system"),outlet:yC,permissions:["patient_encounter_list"],meta:{description:r("Encounter management system","kivicare-clinic-management-system"),icon:"hospital",showInSidebar:!0},children:[We({path:"",component:My,title:r("All Encounters","kivicare-clinic-management-system"),index:!0,permissions:["patient_encounter_list"],meta:{description:r("List of all encounters","kivicare-clinic-management-system"),breadcrumb:r("All Encounters","kivicare-clinic-management-system")},skeleton:()=>i.jsx("div",{className:"container-fluid pb-0",children:i.jsx(_n,{columns:6,rows:5,showBreadcrumb:!0,showPageHeader:!0,showFilterBar:!0})})}),We({path:"add",component:jC,props:{isEditing:!1,mode:"add"},title:r("Add Encounter","kivicare-clinic-management-system"),index:!0,permissions:["patient_encounter_add"],skeleton:kC,meta:{description:r("Add new encounter","kivicare-clinic-management-system"),breadcrumb:r("Add Encounter","kivicare-clinic-management-system")}}),We({path:"edit/:id",component:jC,props:{isEditing:!0,mode:"edit"},title:r("Edit Encounters","kivicare-clinic-management-system"),index:!0,permissions:["patient_encounter_edit"],skeleton:kC,meta:{description:r("Edit encounter","kivicare-clinic-management-system"),breadcrumb:r("Edit Encounter","kivicare-clinic-management-system")}}),We({path:"view/:id",component:My,title:r("All Encounters","kivicare-clinic-management-system"),index:!0,meta:{description:r("View encounter","kivicare-clinic-management-system"),breadcrumb:r("View Encounter","kivicare-clinic-management-system")}}),Gn({path:"dashboard/:id",title:r("Encounters","kivicare-clinic-management-system"),outlet:cte,permissions:["patient_encounter_view"],skeleton:gh,meta:{description:r("Encounter dashbord","kivicare-clinic-management-system"),breadcrumb:r("Encounter dashbord","kivicare-clinic-management-system")},children:[We({path:"clinical-details",component:lP,title:r("Clinical Details","kivicare-clinic-management-system"),skeleton:()=>i.jsx(gh,{view:"clinical-details"}),meta:{description:r("Clinical details of encounter","kivicare-clinic-management-system"),breadcrumb:r("Clinical Details","kivicare-clinic-management-system")}}),We({path:"custom-form/:formId",component:bte,title:r("Custom Form","kivicare-clinic-management-system"),skeleton:()=>i.jsx(gh,{view:"custom-form"}),meta:{description:r("Custom form of encounter","kivicare-clinic-management-system"),breadcrumb:r("Custom Form","kivicare-clinic-management-system")}}),Gn({path:"body-chart",title:r("Body Charts","kivicare-clinic-management-system"),outlet:Aee,meta:{description:r("Body chart management for encounter","kivicare-clinic-management-system"),breadcrumb:r("Body Charts","kivicare-clinic-management-system")},children:[We({path:"",component:yte,title:r("Body Chart List","kivicare-clinic-management-system"),skeleton:()=>i.jsx(gh,{view:"body-chart"}),index:!0,meta:{description:r("List of body charts for encounter","kivicare-clinic-management-system"),breadcrumb:r("List","kivicare-clinic-management-system")}}),We({path:"create",component:NC,props:{mode:"create"},title:r("Create Body Chart","kivicare-clinic-management-system"),meta:{description:r("Create new body chart","kivicare-clinic-management-system"),breadcrumb:r("Create","kivicare-clinic-management-system")},skeleton:Dee}),We({path:"edit/:chartId",component:NC,props:{mode:"edit"},title:r("Edit Body Chart","kivicare-clinic-management-system"),meta:{description:r("Edit existing body chart","kivicare-clinic-management-system"),breadcrumb:r("Edit","kivicare-clinic-management-system")}})]})]}),We({path:"patient/:id",component:mte,title:r("Patient Encounters","kivicare-clinic-management-system"),index:!0,meta:{description:r("List of encounters for a specific patient","kivicare-clinic-management-system"),breadcrumb:r("Patient Encounters","kivicare-clinic-management-system")}}),We({path:"billings/view/:id",component:hte,title:r("Patient Encounters","kivicare-clinic-management-system"),index:!0,meta:{description:r("List of encounters for a specific patient","kivicare-clinic-management-system"),breadcrumb:r("Patient Encounters","kivicare-clinic-management-system")}})]}),Gn({path:"/encounter-template",title:r("Encounter Template List","kivicare-clinic-management-system"),roles:["administrator","clinic_admin","doctor","receptionist"],outlet:yC,meta:{description:r("Encounter management system","kivicare-clinic-management-system"),icon:"hospital",showInSidebar:!0},children:[We({path:"",component:dte,title:r("All Encounter Templates","kivicare-clinic-management-system"),index:!0,meta:{description:r("List of all encounter templates","kivicare-clinic-management-system"),breadcrumb:r("All Encounter Templates","kivicare-clinic-management-system")},skeleton:()=>i.jsx("div",{className:"container-fluid pb-0",children:i.jsx(_n,{columns:4,rows:5,showBreadcrumb:!0,showPageHeader:!0,showFilterBar:!0})})}),We({path:"dashboard/:id",title:r("Encounters Dashboard","kivicare-clinic-management-system"),component:Tee,meta:{description:r("Encounter template dashboard","kivicare-clinic-management-system"),breadcrumb:r("Encounter template dashboard","kivicare-clinic-management-system"),isEncounterTemplate:!0}})]})],wte=()=>{const t=Kn();return i.jsxs("div",{className:"clinics-container",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center gap-3 flex-wrap mb-4",children:[i.jsx(_i,{}),i.jsx("div",{children:t.pathname!=="/clinic"&&i.jsx(ei,{size:"sm"})})]}),i.jsx(fs,{})]})},Iy=()=>i.jsxs(i.Fragment,{children:[i.jsx(wl,{titleWidth:"120px"}),i.jsx("div",{className:"card",children:i.jsxs("div",{className:"card-body",children:[i.jsx(S,{width:"140px",height:"1.1rem",className:"mb-3"}),i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-lg-4 d-flex align-items-center justify-content-center pt-5",children:i.jsx(S,{width:"200px",height:"200px",margin:"0 auto",style:{borderRadius:"50%"}})}),i.jsx("div",{className:"col-lg-8",children:i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-md-6",children:i.jsx(Ne,{labelWidth:"45px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Ne,{labelWidth:"45px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Ne,{labelWidth:"130px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Ne,{labelWidth:"50px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Ne,{labelWidth:"80px",inputHeight:"60px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Ne,{labelWidth:"60px",inputHeight:"60px"})})]})}),i.jsx("div",{className:"col-lg-12",children:i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-md-4",children:i.jsx(Ne,{labelWidth:"55px"})}),i.jsx("div",{className:"col-md-4",children:i.jsx(Ne,{labelWidth:"35px"})}),i.jsx("div",{className:"col-md-4",children:i.jsx(Ne,{labelWidth:"85px"})})]})})]}),i.jsxs("div",{className:"mt-5 pt-3",children:[i.jsx(S,{width:"180px",height:"1.1rem",className:"mb-3"}),i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-lg-4 pt-5 d-flex align-items-center justify-content-center",children:i.jsx(S,{width:"200px",height:"200px",margin:"0 auto",style:{borderRadius:"50%"}})}),i.jsx("div",{className:"col-lg-8",children:i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-md-6",children:i.jsx(Ne,{labelWidth:"90px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Ne,{labelWidth:"85px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Ne,{labelWidth:"45px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Ne,{labelWidth:"130px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Ne,{labelWidth:"35px"})}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsx(S,{width:"55px",height:"1rem",className:"mb-2"}),i.jsxs("div",{className:"d-flex align-items-center flex-wrap gap-3 form-control",children:[i.jsx(S,{width:"60px",height:"1rem"}),i.jsx(S,{width:"70px",height:"1rem"}),i.jsx(S,{width:"55px",height:"1rem"})]})]})})]})})]})]})]})}),i.jsxs("div",{className:"d-flex align-items-center justify-content-end flex-wrap gap-3 mb-5",children:[i.jsx(st,{width:"80px",height:"38px"}),i.jsx(st,{width:"120px",height:"38px"})]})]}),jte=()=>{const[t,e]=f.useState({page:1,perPage:10,search:"",id:"",clinicName:"",specialization:"",clinicAddress:"",status:"",orderBy:"",order:""}),n=C=>{if(C.length>0){const{id:R,desc:te}=C[0],ne={id:"id",name:"name",admin:"clinic_admin_name",contact:"telephone_no",status:"status"};e(Y=>({...Y,orderby:ne[R]||R,order:te?"desc":"asc",page:1}))}else e(R=>({...R,orderby:"",order:"",page:1}))},[s,a]=f.useState(""),[l,o]=f.useState([]),c=Ga(s,500),d=Iee(),m=Oee(),u=Fee(),h=Lee(),p=$ee(),[g,v]=f.useState(!1),x=async C=>{try{yt({title:r("Exporting...","kivicare-clinic-management-system"),text:r("Please wait. This may take a few seconds.","kivicare-clinic-management-system")});const R=new Date().toISOString().split("T")[0],te=Y=>{if(!Y)return"";try{const q=typeof Y=="string"?JSON.parse(Y):Y;return Array.isArray(q)?q.map(B=>B.label||"").filter(Boolean).join(", "):Y}catch{return Y}},ne=z.map(Y=>({id:Y.id,name:Y.name,email:Y.email,contact:Y.contact,clinic_admin_name:Y.clinic_admin_name,clinic_admin_email:Y.clinic_admin_email,specialty:te(Y.specialty),address:[Y.address,Y.city,Y.state,Y.postal_code,Y.country].filter(Boolean).join(", "),status:Y.status===1?"Active":"Inactive"}));switch(C){case"csv":hs(ne,`clinics-${R}.csv`);break;case"xls":ps(ne,`clinics-${R}.xls`);break;case"pdf":gs(ne,`clinics-${R}.pdf`,"Clinics List");break;default:throw new Error("Invalid export format")}Wi(),Se.success(r("Export completed successfully.","kivicare-clinic-management-system"))}catch(R){console.error("Export error:",R),rt({title:r("Error!","kivicare-clinic-management-system"),text:R.message||r("Failed to export data. Please try again.","kivicare-clinic-management-system"),confirmButtonText:r("OK","kivicare-clinic-management-system")})}},y=()=>x("csv"),b=()=>x("xls"),k=()=>{g||(v(!0),x("pdf"),setTimeout(()=>v(!1),2e3))};f.useEffect(()=>{e(C=>({...C,search:c,page:1}))},[c]),He.useEffect(()=>{e(C=>({...C,search:c,page:1}))},[c]);const[w,T]=f.useState(!1),j=f.useRef(null),[D,_]=f.useState(!1),[N,A]=f.useState(!1),{isAddonActive:P,hasCapability:E}=mt(),I=P("kiviPro"),M=f.useMemo(()=>Object.fromEntries(Object.entries(t).filter(([C,R])=>R!==""&&R!==null&&R!==void 0)),[t]),{data:O,isLoading:F,error:H,refetch:G}=oP(M);He.useEffect(()=>{O?.data?.clinics&&O.data.clinics.length>0&&O.data.clinics.forEach((C,R)=>{if(C.specialty&&typeof C.specialty=="string"&&C.specialty.startsWith("["))try{const te=JSON.parse(C.specialty)}catch{console.log(`Failed to parse specialty for clinic ${R+1}`)}})},[O]);const z=O?.data?.clinics||[],ie=O?.data?.pagination||{total:0,lastPage:1,perPage:10,currentPage:1},W=ze(),ge=async({page:C,per_page:R,search:te})=>{try{const ne={dataType:"staticData",staticDataType:"staticDataWithLabel",type:"specialization",page:C,per_page:R,search:te},Y=await W.fetchQuery({queryKey:pt.list(ne),queryFn:()=>Dt.getStaticData(ne),staleTime:300*1e3}),q=Y.data.map(B=>({value:B.id,label:B.label||B.name}));return o(B=>[...B,...q]),Y.data.map(B=>{let se="",Q="";return typeof B=="string"?(se=B,Q=B):typeof B=="object"&&B!==null&&(se=B.label||B.name||"",Q=B.id??B.name??se),{value:Q,label:se}})}catch(ne){return console.error("Error loading clinics:",ne),{data:[],pagination:{has_more:!1}}}},ae=[{value:"1",label:r("Active","kivicare-clinic-management-system"),class:"bg-success-subtle text-success"},{value:"0",label:r("Inactive","kivicare-clinic-management-system"),class:"bg-danger-subtle text-danger"}],U=Ln(),X=f.useMemo(()=>[U.accessor("id",{id:"id",enableSorting:!0,header:()=>r("ID","kivicare-clinic-management-system"),cell:C=>i.jsx("div",{className:"font-weight-medium",children:C.getValue()})}),U.accessor("name",{id:"name",enableSorting:!0,header:()=>r("Clinic","kivicare-clinic-management-system"),cell:C=>i.jsx(dn,{profileUrl:C.row.original.clinic_image_url,name:C.row.original.name,email:C.row.original.email||"",variant:"success",size:"md",nameLabel:r("Clinic","kivicare-clinic-management-system")})}),U.accessor("admin",{id:"admin",header:()=>r("Clinic Admin","kivicare-clinic-management-system"),enableSorting:!0,sortingFn:(C,R)=>{const te=C.original.clinic_admin_name||"",ne=R.original.clinic_admin_name||"";return te.localeCompare(ne)},cell:C=>i.jsx(dn,{profileUrl:C.row.original.clinic_admin_image_url,name:C.row.original.clinic_admin_name,email:C.row.original.clinic_admin_email||"",variant:"success",size:"md",nameLabel:r("Clinic Name","kivicare-clinic-management-system")})}),U.accessor("contact",{id:"contact",enableSorting:!0,header:()=>r("Contact No","kivicare-clinic-management-system"),cell:C=>i.jsx("div",{children:i.jsx("span",{children:C.row.original.contact||""})})}),U.accessor("specialty",{id:"specialty",enableSorting:!1,header:()=>r("Specialization","kivicare-clinic-management-system"),cell:C=>{const R=C.row.original.specialty;let te=[];try{if(typeof R=="string")if(R.startsWith("["))try{const ne=JSON.parse(R);Array.isArray(ne)&&(te=ne.map(Y=>typeof Y=="object"&&Y!==null?{label:Y.label||""}:{label:Y}))}catch{te=[{label:R}]}else te=[{label:R}];else Array.isArray(R)?te=R.map(ne=>typeof ne=="object"&&ne!==null?{label:ne.label||ne.name||""}:{label:ne}):typeof R=="object"&&R!==null&&(R.label?te=[{label:R.label}]:R.name?te=[{label:R.name}]:te=[{label:JSON.stringify(R)}])}catch(ne){console.error("Error processing specialty:",ne),te=[{label:String(R||"")}]}return te=te.filter(ne=>ne.label),i.jsx("div",{children:te.length>0?i.jsxs("div",{className:"d-flex flex-wrap gap-1",children:[te.slice(0,2).map((ne,Y)=>i.jsx("span",{className:"badge bg-info-subtle text-info",children:ne.label},Y)),te.length>2&&i.jsx(Qe,{placement:"top",overlay:ne=>i.jsx(ut,{id:`tooltip-specialization-${C.row.original.id}`,...ne,children:te.slice(2).map(Y=>Y.label).join(", ")}),children:i.jsxs("span",{className:"badge bg-secondary-subtle text-secondary cursor-pointer",children:["+",te.length-2]})})]}):i.jsx("span",{className:"text-muted",children:""})})}}),U.accessor("address",{id:"address",enableSorting:!1,header:()=>r("Clinic Address","kivicare-clinic-management-system"),cell:C=>{const R=C.row.original.address||"",te=C.row.original.city||"",ne=C.row.original.state||"",Y=C.row.original.country||"",q=C.row.original.postal_code||"",B=[R,te,ne,q,Y].filter(Boolean).join(", ");return i.jsx("div",{className:"text-wrap",children:i.jsx("span",{className:"",children:B||""})})}}),...I?[U.accessor("status",{header:()=>r("Status","kivicare-clinic-management-system"),enableSorting:!0,cell:C=>{const R=Number(C.getValue()),te=C.row.original,ne=()=>{const Y=R===1?0:1;kt({title:r("Update Status?","kivicare-clinic-management-system"),text:Pi(r("Are you sure you want to change the status of <strong>%s</strong> to %s?","kivicare-clinic-management-system"),te.name,Y===1?r("Inactive","kivicare-clinic-management-system"):r("Active","kivicare-clinic-management-system")),icon:"ph-warning",confirmButtonText:r("Yes, update","kivicare-clinic-management-system"),cancelButtonText:r("No, cancel","kivicare-clinic-management-system")}).then(q=>{q.isConfirmed&&(yt({title:r("Updating Status...","kivicare-clinic-management-system"),text:r("Please wait...","kivicare-clinic-management-system")}),p.mutate({ids:[te.id],status:Y},{onSuccess:()=>{Tt({title:r("Status Updated","kivicare-clinic-management-system"),text:r("Clinic status has been updated successfully.","kivicare-clinic-management-system")})},onError:B=>{rt({title:r("Error","kivicare-clinic-management-system"),text:B.message||r("Failed to update status.","kivicare-clinic-management-system")})}}))})};return E("clinic_edit")?i.jsxs("div",{className:"form-check form-switch",children:[i.jsx("input",{className:"form-check-input",type:"checkbox",role:"switch",id:`clinic-status-${te.id}`,checked:R===1,onChange:ne}),i.jsx("label",{className:"form-check-label",htmlFor:`clinic-status-${te.id}`,children:i.jsx("span",{className:`badge ${R===1?"bg-success-subtle text-success":"bg-danger-subtle text-danger"}`,children:R===1?r("Active","kivicare-clinic-management-system"):r("Inactive","kivicare-clinic-management-system")})})]}):i.jsx("span",{className:`badge ${R===1?"bg-success-subtle text-success":"bg-danger-subtle text-danger"} px-3 py-2`,children:R===1?r("Active","kivicare-clinic-management-system"):r("Inactive","kivicare-clinic-management-system")})}})]:[],...E("clinic_edit")||E("clinic_resend_credential")||E("clinic_delete")?[U.accessor("actions",{header:()=>r("Action","kivicare-clinic-management-system"),enableSorting:!1,cell:C=>{const R=te=>ne=>i.jsx(ut,{id:`tooltip-${C.cell.row.original.id}-${te}`,...ne,children:te});return i.jsxs("div",{className:"d-flex align-items-center gap-3",children:[E("clinic_edit")&&i.jsx(Qe,{placement:"top",overlay:R(r("Edit","kivicare-clinic-management-system")),children:i.jsx(ht,{to:`/clinic/edit/${C.cell.row.original.id}`,className:"btn btn-link text-success fs-5 p-0",children:i.jsx("i",{className:"ph ph-pencil-simple-line"})})}),E("clinic_resend_credential")&&i.jsx(Qe,{placement:"top",overlay:R(r("Resend Credentials","kivicare-clinic-management-system")),children:i.jsx("a",{type:"button",onClick:()=>J(C.cell.row.original.id),className:"btn btn-link text-danger fs-5 p-0",children:i.jsx("i",{className:"ph ph-shield-check"})})}),E("clinic_delete")&&I&&i.jsx(Qe,{placement:"top",overlay:R(r("Delete","kivicare-clinic-management-system")),children:i.jsx("button",{className:"btn btn-link text-danger fs-5 p-0",onClick:()=>he(C.cell.row.original.id),children:i.jsx("i",{className:"ph text-bold ph-trash"})})})]})}})]:[]],[E]),J=C=>{kt({title:r("Resend Credential","kivicare-clinic-management-system"),text:r("Are you sure you want to resend the credential for this clinic?","kivicare-clinic-management-system"),icon:"ph-warning",confirmButtonText:r("Yes, resend","kivicare-clinic-management-system"),cancelButtonText:r("No, cancel","kivicare-clinic-management-system")}).then(R=>{R.isConfirmed&&(yt({title:r("Sending...","kivicare-clinic-management-system"),text:r("Please wait. This may take a few seconds.","kivicare-clinic-management-system")}),m.mutate(C,{onSuccess:te=>{Tt({text:te?.message||r("Credential has been resent successfully.","kivicare-clinic-management-system")})},onError:te=>{console.error("Resend credential error:",te);const ne=te?.response?.data?.message||te?.message||r("Failed to resend credentials. Please try again.","kivicare-clinic-management-system");rt({text:ne})}}))})},he=C=>{kt({title:r("Delete Clinic?","kivicare-clinic-management-system"),text:r("You're about to delete this clinic.<br>This action cannot be undone.","kivicare-clinic-management-system"),icon:"ph-warning",confirmButtonText:r("Delete permanently","kivicare-clinic-management-system"),cancelButtonText:r("Keep clinic","kivicare-clinic-management-system"),confirmButtonClass:"btn-danger"}).then(R=>{R.isConfirmed&&(yt({title:r("Deleting Clinic...","kivicare-clinic-management-system"),text:r("Please wait while we remove the selected clinic.<br>This won't take long.","kivicare-clinic-management-system")}),d.mutate(C,{onSuccess:te=>{Tt({title:r("Clinic Deleted","kivicare-clinic-management-system"),text:te?.message||r("Clinic has been deleted successfully.","kivicare-clinic-management-system"),confirmButtonText:r("Back to clinics","kivicare-clinic-management-system")})},onError:te=>{console.error("Delete clinic error:",te);const ne=te?.response?.data?.message||te?.message||r("Failed to delete clinic. Please try again.","kivicare-clinic-management-system");rt({text:ne})}}))})},le=[{type:"number",name:"id",label:r("Clinic ID","kivicare-clinic-management-system"),placeholder:r("eg 123","kivicare-clinic-management-system"),min:1,pattern:"[0-9]*",onInput:C=>{C.target.value=C.target.value.replace(/[^0-9]/g,"")}},{type:"text",name:"clinicName",label:r("Clinic Name","kivicare-clinic-management-system"),placeholder:r("eg Mount Health Care","kivicare-clinic-management-system")},{type:"paginatedSelect",name:"specialization",label:r("Specialization","kivicare-clinic-management-system"),placeholder:r("Select Specialization","kivicare-clinic-management-system"),options:l,optionLoader:ge,isSearchable:!0},{type:"text",name:"clinicAddress",label:r("Clinic Address","kivicare-clinic-management-system"),placeholder:r("eg 123 Wellness Way , HC 3456")},{type:"select",name:"status",label:r("Status","kivicare-clinic-management-system"),placeholder:r("Select Status","kivicare-clinic-management-system"),options:ae,isSearchable:!1}],ee=C=>{e(R=>({...R,...C,page:1})),_(!1)},me=()=>{const C={page:1,perPage:t.perPage,search:"",id:"",clinicName:"",specialization:"",clinicAddress:"",status:"",orderBy:"",order:""};e(C),o([]),_(!1)},K=f.useMemo(()=>["search","id","clinicName","specialization","clinicAddress","status"].some(R=>{const te=t[R];return te!=null&&te!==""})||s!=="",[t,s]),re=C=>{I?_(C):C===!0&&kt({title:r("Pro Feature","kivicare-clinic-management-system"),text:r("Clinic management is only available in KiviCare Pro version.","kivicare-clinic-management-system"),icon:"ph-warning",confirmButtonText:r("OK","kivicare-clinic-management-system"),showCancelButton:!1})},oe=()=>{G()};return i.jsx(i.Fragment,{children:i.jsxs("div",{children:[i.jsxs("div",{children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap row-gap-2 column-gap-3 mb-4",children:[i.jsx("div",{className:"page-title",children:i.jsx("h6",{className:"m-0",children:r("All Clinics","kivicare-clinic-management-system")})}),i.jsxs("div",{className:"d-flex align-items-center row-gap-2 column-gap-3 flex-wrap",children:[E("clinic_add")&&i.jsxs(ht,{to:I?"/clinic/add":"#",className:"btn btn-secondary d-flex align-items-center gap-2",onClick:C=>{I||kt({title:r("Pro Feature","kivicare-clinic-management-system"),text:r("Clinic management is only available in KiviCare Pro version.","kivicare-clinic-management-system"),icon:"ph-warning",confirmButtonText:r("OK","kivicare-clinic-management-system"),showCancelButton:!1})},children:[i.jsx("i",{className:"ph ph-plus-circle"}),i.jsx("span",{children:r("Add Clinic","kivicare-clinic-management-system")})]}),I&&i.jsxs("button",{className:"btn btn-primary d-flex align-items-center gap-2",onClick:()=>I?A(!0):kt({title:r("Pro Feature","kivicare-clinic-management-system"),text:r("Clinic import is only available in KiviCare Pro version.","kivicare-clinic-management-system"),icon:"ph-warning",confirmButtonText:r("OK","kivicare-clinic-management-system"),showCancelButton:!1}),children:[i.jsx("i",{className:"ph ph-upload"}),i.jsx("span",{children:r("Import Data","kivicare-clinic-management-system")})]}),i.jsxs("button",{className:"btn btn-primary d-flex align-items-center gap-2",onClick:()=>re(!0),children:[i.jsx("i",{className:"ph ph-funnel"}),i.jsx("span",{children:r("Filters","kivicare-clinic-management-system")})]})]})]}),i.jsxs("div",{className:I?"kc-table-wrapper":"",children:[I&&i.jsx(i.Fragment,{children:i.jsx(Ci,{in:!w,timeout:100,classNames:"fade-top-bottom",unmountOnExit:!0,nodeRef:j,children:i.jsxs("div",{ref:j,className:"d-flex justify-content-between align-items-xl-center flex-column flex-lg-row gap-3 mb-4 position-absolute top-0 w-100",children:[i.jsxs("div",{className:"table-selection d-flex gap-3 flex-column flex-sm-row",children:[i.jsx(rn,{id:"specialties-filter",placeholder:r("Specializations","kivicare-clinic-management-system"),className:"react-select-box",classNamePrefix:"react-select",loadOptions:ge,value:l.find(C=>C.label===t.specialization)||null,onChange:C=>{I&&e(R=>({...R,specialization:C?C.label:""}))},isDisabled:!I,dependencies:{},isClearable:!0}),i.jsx(ct,{placeholder:r("Status","kivicare-clinic-management-system"),className:"react-select-box",classNamePrefix:"react-select",options:ae,onChange:C=>I&&e(R=>({...R,status:C?C.value:""})),isClearable:!0,isSearchable:!1,styles:{menuPortal:C=>({...C,zIndex:9999})},isDisabled:!I})]}),i.jsxs("div",{className:"btn-toolbar d-flex gap-3 align-items-center justify-content-lg-end table-action-right",children:[i.jsx("div",{className:"d-flex align-items-center input-search-select",children:i.jsxs("div",{className:"input-group input-group-search",children:[i.jsx("span",{className:"input-group-text",children:i.jsx("i",{className:"ph ph-magnifying-glass"})}),i.jsx("input",{type:"text",className:"form-control",placeholder:r("Search Anything","kivicare-clinic-management-system"),value:s,onChange:C=>a(C.target.value),disabled:!I})]})}),E("clinic_export")&&I&&i.jsxs("div",{className:"download-buttons d-flex align-items-center gap-3",children:[i.jsx(Qe,{placement:"top",overlay:i.jsx(ut,{children:r("Export CSV","kivicare-clinic-management-system")}),children:i.jsx("button",{className:"btn btn-white",onClick:y,disabled:!1,children:i.jsx("i",{className:"ph ph-file-csv"})})}),i.jsx(Qe,{placement:"top",overlay:i.jsx(ut,{children:r("Export Excel","kivicare-clinic-management-system")}),children:i.jsx("button",{className:"btn btn-white",onClick:b,disabled:!1,children:i.jsx("i",{className:"ph ph-file-xls"})})}),i.jsx(Qe,{placement:"top",overlay:i.jsx(ut,{children:r("Export PDF","kivicare-clinic-management-system")}),children:i.jsx("button",{className:"btn btn-white",onClick:k,disabled:g,children:i.jsx("i",{className:"ph ph-file-pdf"})})})]})]})]})})}),i.jsx(wn,{data:z,columns:X,isLoading:F,error:H,currentPage:ie.currentPage,perPage:ie.perPage,totalItems:ie.total,lastPage:ie.lastPage,onPageChange:C=>I&&e(R=>({...R,page:C})),onPerPageChange:C=>I&&e(R=>({...R,perPage:C,page:1})),onSortingChange:n,manualSorting:!0,enableSelection:I,moduleNamePlural:"clinics",bulkActions:[{label:r("Delete","kivicare-clinic-management-system"),action:(C,R)=>{const te=C.map(ne=>ne.id);kt({title:r("Delete Clinics?","kivicare-clinic-management-system"),text:r(`Youre about to delete <strong>${C.length} clinics</strong>.<br>This action cannot be undone.`,"kivicare-clinic-management-system"),icon:"ph-warning",confirmButtonText:r("Delete permanently","kivicare-clinic-management-system"),cancelButtonText:r("Keep clinics","kivicare-clinic-management-system"),confirmButtonClass:"btn-danger"}).then(ne=>{ne.isConfirmed&&(yt({title:r("Deleting Clinics...","kivicare-clinic-management-system"),text:r("Please wait while we remove the selected clinics.<br>This won't take long.","kivicare-clinic-management-system")}),u.mutate(te,{onSuccess:Y=>{Tt({title:r("Clinic Deleted","kivicare-clinic-management-system"),text:r(`${C.length} clinic${C.length>1?"s":""} has been deleted.`,"kivicare-clinic-management-system"),confirmButtonText:r("Back to clinics","kivicare-clinic-management-system")}),R()},onError:Y=>{console.error("Bulk delete clinics error:",Y);const q=Y?.response?.data?.message||Y?.message||r("Failed to delete selected clinics. Please try again.","kivicare-clinic-management-system");rt({text:q})}}))})},icon:i.jsx("i",{className:"ph ph-trash"})},{label:r("Resend Credentials","kivicare-clinic-management-system"),action:(C,R)=>{const te=C.map(ne=>ne.id);kt({title:r("Resend Credentials","kivicare-clinic-management-system"),text:r("Are you sure you want to resend credentials to the selected clinics?","kivicare-clinic-management-system"),icon:"ph-question",confirmButtonText:r("Yes, resend","kivicare-clinic-management-system"),cancelButtonText:r("Cancel","kivicare-clinic-management-system")}).then(ne=>{ne.isConfirmed&&(yt({title:r("Sending...","kivicare-clinic-management-system"),text:r("Please wait. This may take a few seconds.","kivicare-clinic-management-system")}),h.mutate(te,{onSuccess:Y=>{Tt({title:r("Success","kivicare-clinic-management-system"),text:Y?.message||r("Credentials have been resent successfully.","kivicare-clinic-management-system"),confirmButtonText:r("OK","kivicare-clinic-management-system")}),R()},onError:Y=>{console.error("Bulk resend credentials error:",Y);const q=Y?.response?.data?.message||Y?.message||r("Failed to resend credentials. Please try again.","kivicare-clinic-management-system");rt({title:r("Error","kivicare-clinic-management-system"),text:q,confirmButtonText:r("OK","kivicare-clinic-management-system")})}}))})},icon:i.jsx("i",{className:"ph ph-shield-check"})},{label:r("Set Active","kivicare-clinic-management-system"),action:(C,R)=>{const te=C.map(ne=>ne.id);kt({title:r("Update Status","kivicare-clinic-management-system"),text:r("Are you sure you want to set the selected clinics to active?","kivicare-clinic-management-system"),icon:"ph-question",confirmButtonText:r("Yes, update","kivicare-clinic-management-system"),cancelButtonText:r("Cancel","kivicare-clinic-management-system"),confirmButtonClass:"btn-primary"}).then(ne=>{ne.isConfirmed&&(yt({title:r("Updating...","kivicare-clinic-management-system"),text:r("Please wait. This may take a few seconds.","kivicare-clinic-management-system")}),p.mutate({ids:te,status:"1"},{onSuccess:Y=>{Tt({title:r("Success","kivicare-clinic-management-system"),text:Y?.message||r("Clinic status has been updated successfully.","kivicare-clinic-management-system"),confirmButtonText:r("OK","kivicare-clinic-management-system")}),R()},onError:Y=>{console.error("Bulk update status error:",Y);const q=Y?.response?.data?.message||Y?.message||r("Failed to update clinic status. Please try again.","kivicare-clinic-management-system");rt({title:r("Error","kivicare-clinic-management-system"),text:q,confirmButtonText:r("OK","kivicare-clinic-management-system")})}}))})},icon:i.jsx("i",{className:"ph ph-check-circle"})},{label:r("Set Inactive","kivicare-clinic-management-system"),action:(C,R)=>{const te=C.map(ne=>ne.id);kt({title:r("Update Status","kivicare-clinic-management-system"),text:r("Are you sure you want to set the selected clinics to inactive?","kivicare-clinic-management-system"),icon:"ph-warning",confirmButtonText:r("Yes, update","kivicare-clinic-management-system"),cancelButtonText:r("Cancel","kivicare-clinic-management-system"),confirmButtonClass:"btn-danger"}).then(ne=>{ne.isConfirmed&&(yt({title:r("Updating...","kivicare-clinic-management-system"),text:r("Please wait. This may take a few seconds.","kivicare-clinic-management-system")}),p.mutate({ids:te,status:"0"},{onSuccess:Y=>{Tt({title:r("Success","kivicare-clinic-management-system"),text:Y?.message||r("Clinic status has been updated successfully.","kivicare-clinic-management-system"),confirmButtonText:r("OK","kivicare-clinic-management-system")}),R()},onError:Y=>{console.error("Bulk update status error:",Y);const q=Y?.response?.data?.message||Y?.message||r("Failed to update clinic status. Please try again.","kivicare-clinic-management-system");rt({title:r("Error","kivicare-clinic-management-system"),text:q,confirmButtonText:r("OK","kivicare-clinic-management-system")})}}))})},icon:i.jsx("i",{className:"ph ph-x-circle"})}],isBulkActionShow:C=>{T(C)}})]})]}),i.jsx(na,{show:D,onHide:()=>re(!1),queryParams:t,onApplyFilters:I?ee:()=>{},onResetFilters:I?me:()=>{},title:r("Filters","kivicare-clinic-management-system"),fields:le,hasAppliedFilters:K}),i.jsx(Lr,{show:N,onHide:()=>A(!1),onReopenImport:()=>A(!0),onDataRefresh:oe,context:"clinics"})]})})},yl=f.forwardRef(({id:t="profile-image-upload",name:e="doctorImage",defaultImage:n="",defaultImageId:s="",onChange:a,onClear:l,className:o="",disabled:c=!1,size:d=120,setValue:m,register:u,accept:h,allowFile:p=!1},g)=>{const[v,x]=f.useState(n),[y,b]=f.useState(s),[k,w]=f.useState(!1),[T,j]=f.useState(!1),D=f.useRef(null),_=f.useRef(null),N=!!v;f.useEffect(()=>{x(n||""),b(s||"")},[n,s]),f.useEffect(()=>{j(typeof window<"u"&&!!(window.wp&&window.wp.media))},[]),f.useEffect(()=>{if(u&&typeof u=="function"&&_.current)try{u(e)}catch{}},[u,e]);const A=async H=>{try{w(!0);const G=window.kc_frontend?.rest_url,z=await ve({endpoint:`${G}/wp/v2/media`,method:"POST",data:H,isFile:!0});if(!z||z.success===!1)throw new Error(z?.message||r("Failed to upload image","kivicare-clinic-management-system"));return F(z.source_url,z.id),a&&a({id:z.id,url:z.source_url,filename:z.title?.raw||"",type:z.media_type,subtype:z.mime_type,size:z.media_details?.filesize||0},z.id),z}catch(G){throw console.error("Error uploading image:",G),G}finally{w(!1)}},P=H=>{if(!T)return;const G=window.wp.media({title:r("Select or Upload Image","kivicare-clinic-management-system"),button:{text:r("Use this image","kivicare-clinic-management-system")},multiple:!1,library:{type:p?"":"image"}});G.on("select",function(){const z=G.state().get("selection").first().toJSON();!p&&z.type!=="image"||F(z.url||z.source_url||"",z.id||"")}),G.open()},E=H=>{H.preventDefault(),!(c||k)&&(T&&!p?P():D.current?.click())},I=async H=>{const G=H.target.files[0];if(G){if(!p&&!G.type.startsWith("image/")){console.error("Please select an image file");return}try{const z=URL.createObjectURL(G);x(z),b(""),await A(G)}catch(z){console.error("Error handling file:",z),x(""),b(""),F("","")}}},M=()=>{if(x(""),b(""),D.current&&(D.current.value=""),F("",""),l&&l(),a)try{a({id:"",url:"",filename:"",type:"image",size:0},"")}catch{}},O=H=>{H.preventDefault(),H.stopPropagation(),!(c||k)&&M()};f.useImperativeHandle(g,()=>({clearImage:M}));const F=(H="",G="")=>{if(x(H||""),b(G||""),_.current)try{_.current.value=G||"";try{_.current.dispatchEvent(new Event("input",{bubbles:!0})),_.current.dispatchEvent(new Event("change",{bubbles:!0}))}catch{}}catch{}if(typeof m=="function"&&e)try{m(e,H||""),m(`${e}Id`,G||"")}catch{}if(typeof a=="function")try{a({id:G||"",url:H||"",filename:"",type:"image",size:0},G||"")}catch{}};return i.jsxs("div",{className:`profile-image-uploader bg-body rounded w-100 p-3 ${o}`,children:[i.jsx("input",{type:"hidden",id:`${t}-hidden`,name:e?`${e}Id`:void 0,ref:_,readOnly:!0,value:y||""}),i.jsx("input",{type:"file",id:t,ref:D,onChange:I,accept:h||(p?void 0:"image/*"),disabled:k||c,className:"profile-image-input"}),i.jsxs("div",{className:`profile-image-container ${c?"disabled":""}`,style:{width:d,height:d,"--profile-size":`${d}px`},onClick:E,children:[N?i.jsx("img",{src:v,alt:"",className:"profile-image"}):i.jsx("div",{className:"profile-image-placeholder",children:i.jsx("i",{className:"ph ph-user",style:{fontSize:`${Math.round(d*.6)}px`,color:"#ccc"}})}),i.jsx("div",{className:"profile-image-overlay",children:k?i.jsx("div",{className:"profile-image-spinner",style:{width:d*.18,height:d*.18,borderWidth:Math.max(2,Math.round(d*.03))}}):i.jsx("i",{className:"ph ph-camera",style:{fontSize:`${Math.round(d*.3)}px`,color:"white"}})}),N&&i.jsx(Qe,{placement:"top",overlay:i.jsx(ut,{children:r("Remove image","kivicare-clinic-management-system")}),children:i.jsx("button",{type:"button",className:"profile-image-cancel-icon",onClick:O,disabled:k||c,"aria-label":r("Remove image","kivicare-clinic-management-system"),children:i.jsx("i",{className:"ph ph-x",style:{fontSize:"14px",color:"white"}})})})]})]})});yl.displayName="ProfileImageUploader";function Oy({isEditing:t=!1,isProfile:e=!1,...n}){const{id:s}=Yt(),{currentuserID:a,defaultClinicId:l,isAddonActive:o,defaultCountryCode:c,showOtherGender:d,userRole:m}=mt(),{data:u}=Sn(),h=hn(),p=o("kiviPro"),g=e?l:s,{data:v,isLoading:x,error:y}=Ree(g,{enabled:(t||e)&&!!g}),b=v?.data,k=Pee(),w=Mee(),[T,j]=f.useState(!1),D=T||k.isPending||w.isPending||x,_=Wc.PhoneNumberUtil.getInstance(),N=ee=>{try{return _.isValidNumber(_.parseAndKeepRawInput(ee))}catch{return!1}},A=[{value:1,label:r("Active","kivicare-clinic-management-system")},{value:0,label:r("Inactive","kivicare-clinic-management-system")}],{register:P,handleSubmit:E,control:I,watch:M,setValue:O,formState:{errors:F},reset:H}=en({defaultValues:{clinicImage:"",clinicImageId:"",clinicName:"",clinicEmail:"",contactNumber:"",status:A[0],specialties:null,address:"",country:"",city:"",postalCode:"",adminImage:"",adminImageId:"",firstName:"",lastName:"",adminEmail:"",adminContactNumber:"",dob:"",gender:""}}),G=f.useMemo(()=>u?.data?.kc_available_translations,[u]),{data:z,isLoading:ie,refetch:W}=Ha("specialization"),ge=Fg(),ae=ee=>{if(ee==null)return null;const me=parseInt(ee);return A.find(K=>K.value===me)||null};if(f.useEffect(()=>{if(t&&b&&!x){O("clinicName",b.clinic_name||""),O("clinicEmail",b.clinic_email||""),setTimeout(()=>{O("contactNumber",b.clinic_contact||"")},0),O("address",b.address||""),O("city",b.city||""),O("country",b.country||""),O("postalCode",b.postal_code||"");const ee=ae(b.status);O("status",ee),O("specialties",b.specialties),b.clinic_image&&O("clinicImage",b.clinic_image),b.clinic_image_id&&O("clinicImageId",b.clinic_image_id),O("firstName",b.first_name||""),O("lastName",b.last_name||""),O("adminEmail",b.admin_email||""),setTimeout(()=>{O("adminContactNumber",b.admin_contact_number||"")},0),O("dob",b.dob||""),O("gender",b.gender||""),b.clinic_admin_image_url&&O("adminImage",b.clinic_admin_image_url),b.clinic_admin_image_id&&O("adminImageId",b.clinic_admin_image_id)}},[t,b,x,O]),t&&y)return i.jsxs("div",{className:"alert alert-danger",role:"alert",children:[i.jsx("h6",{className:"alert-heading",children:r("Error Loading Clinic Data","kivicare-clinic-management-system")}),i.jsx("p",{className:"mb-0",children:r("Unable to load clinic information. Please try again.","kivicare-clinic-management-system")}),i.jsx("hr",{}),i.jsx("button",{className:"btn btn-outline-danger btn-sm",onClick:()=>h("/clinic"),children:r("Back to Clinics","kivicare-clinic-management-system")})]});const U=(ee,me)=>{O(ee,me.url||me.image),O(`${ee}Id`,me.id||me.imageId)},X=async ee=>{j(!0);const me={clinic_name:ee.clinicName,clinic_email:ee.clinicEmail,clinic_contact:ee.contactNumber,status:ee.status?parseInt(ee.status.value):1,specialties:ee.specialties,address:ee.address,country:ee.country,city:ee.city,postal_code:ee.postalCode,clinic_image:ee.clinicImage,clinic_image_id:ee.clinicImageId,admin_image:ee.adminImage,admin_image_id:ee.adminImageId,first_name:ee.firstName,last_name:ee.lastName,admin_email:ee.adminEmail,admin_contact_number:ee.adminContactNumber,dob:ee.dob,gender:ee.gender};try{if(t){let K=await w.mutateAsync({id:g,...me});Se.success(K.message,{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0})}else{let K=await k.mutateAsync(me);Se.success(K.data.message,{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0})}e&&h(-1),t&&m=="clinic_admin"&&h(-1),h("/clinic",{replace:!0})}catch(K){console.error("Error saving clinic:",K);const re=K?.response?.data?.message||(t?r("Failed to update clinic","kivicare-clinic-management-system"):r("Failed to create clinic","kivicare-clinic-management-system"));Se.error(re,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0})}finally{j(!1)}},J=ee=>{const me=Object.keys(ee)[0],K=document.getElementById(me);K&&(K.scrollIntoView({behavior:"smooth",block:"center"}),K.focus())},le={...{clinicName:{required:r("Clinic name is required","kivicare-clinic-management-system"),minLength:{value:2,message:r("Clinic name must be at least 2 characters","kivicare-clinic-management-system")}},clinicEmail:{required:r("Clinic email is required","kivicare-clinic-management-system"),pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:r("Invalid email address","kivicare-clinic-management-system")}},contactNumber:{required:r("Contact number is required","kivicare-clinic-management-system"),validate:me=>me?N(me)||r("Please enter a valid phone number","kivicare-clinic-management-system"):r("Contact number is required","kivicare-clinic-management-system")},status:{required:r("Status is required","kivicare-clinic-management-system")},specialties:{required:r("At least one specialty is required","kivicare-clinic-management-system"),validate:{notEmpty:me=>me&&me.length>0||r("At least one specialty is required","kivicare-clinic-management-system")}},address:{required:r("Address is required","kivicare-clinic-management-system"),minLength:{value:10,message:r("Address must be at least 10 characters","kivicare-clinic-management-system")}},country:{required:r("Country is required","kivicare-clinic-management-system"),minLength:{value:2,message:r("Country must be at least 2 characters","kivicare-clinic-management-system")}},city:{required:r("City is required","kivicare-clinic-management-system"),minLength:{value:2,message:r("City must be at least 2 characters","kivicare-clinic-management-system")}},postalCode:{required:r("Postal code is required","kivicare-clinic-management-system"),pattern:{value:/^[0-9A-Z\s-]{3,10}$/i,message:r("Invalid postal code format","kivicare-clinic-management-system")}}},firstName:{required:r("First name is required","kivicare-clinic-management-system"),minLength:{value:2,message:r("First name must be at least 2 characters","kivicare-clinic-management-system")}},lastName:{required:r("Last name is required","kivicare-clinic-management-system"),minLength:{value:2,message:r("Last name must be at least 2 characters","kivicare-clinic-management-system")}},adminEmail:{required:r("Admin email is required","kivicare-clinic-management-system"),pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:r("Invalid email address","kivicare-clinic-management-system")}},adminContactNumber:{required:r("Admin contact number is required","kivicare-clinic-management-system"),validate:me=>me?N(me)||r("Please enter a valid phone number","kivicare-clinic-management-system"):r("Admin contact number is required","kivicare-clinic-management-system")},dob:{required:r("Date of birth is required","kivicare-clinic-management-system"),validate:me=>{const K=new Date(me);return new Date().getFullYear()-K.getFullYear()>=18||r("Admin must be at least 18 years old","kivicare-clinic-management-system")}},gender:{required:r("Gender is required","kivicare-clinic-management-system")}};return x&&(t||e)?i.jsx(Iy,{}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap row-gap-2 column-gap-3 mb-4",children:[i.jsx("div",{className:"page-title",children:i.jsx("h6",{className:"m-0",children:e?r("My Profile","kivicare-clinic-management-system"):t?r("Edit Clinic","kivicare-clinic-management-system"):r("Add Clinic","kivicare-clinic-management-system")})}),e&&i.jsx("div",{children:i.jsx(ei,{size:"sm"})})]}),i.jsx("div",{className:"position-relative",children:i.jsxs("form",{onSubmit:E(X,J),className:"mb-0",children:[i.jsx("div",{className:"card",children:i.jsxs("div",{className:"card-body",children:[i.jsx("h6",{className:"mb-3",children:r("Basic Information","kivicare-clinic-management-system")}),i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-lg-4 d-flex align-items-center justify-content-center pt-5",children:i.jsx(ye,{name:"clinicImage",control:I,render:({field:ee})=>i.jsx(yl,{id:"clinic-image-upload",name:"clinicImage",label:r("Image","kivicare-clinic-management-system"),defaultImage:ee.value,defaultImageId:M("clinicImageId"),onChange:me=>U("clinicImage",me),className:"",size:200})})}),i.jsx("div",{className:"col-lg-8",children:i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{children:[i.jsxs("label",{htmlFor:"clinicName",className:"form-label",children:[r("Name","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx("input",{type:"text",id:"clinicName",className:`form-control ${F.clinicName?"is-invalid":""}`,placeholder:r('eg "Health care Clinic"',"kivicare-clinic-management-system"),...P("clinicName",le.clinicName),disabled:t&&x}),F.clinicName&&i.jsx("div",{className:"invalid-feedback d-block",children:F.clinicName.message})]})}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{children:[i.jsxs("label",{htmlFor:"clinicEmail",className:"form-label",children:[r("Email","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx("input",{type:"email",id:"clinicEmail",className:`form-control ${F.clinicEmail?"is-invalid":""}`,placeholder:r('eg "clinic@example.com"',"kivicare-clinic-management-system"),...P("clinicEmail",le.clinicEmail),disabled:t&&x}),F.clinicEmail&&i.jsx("div",{className:"invalid-feedback d-block",children:F.clinicEmail.message})]})}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{children:[i.jsxs("label",{htmlFor:"contactNumber",className:"form-label",children:[r("Contact Number","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx(ye,{name:"contactNumber",control:I,rules:le.contactNumber,render:({field:ee})=>i.jsx(to,{defaultCountry:c,inputProps:{className:`form-control ${F.contactNumber?"is-invalid":""}`,placeholder:r("Enter phone number","kivicare-clinic-management-system"),disabled:t&&x},...ee})}),F.contactNumber&&i.jsx("div",{className:"invalid-feedback d-block",children:F.contactNumber.message})]})}),!e&&i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{children:[i.jsxs("label",{htmlFor:"status",className:"form-label",children:[r("Status","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx(ye,{name:"status",control:I,rules:le.status,render:({field:ee})=>i.jsx(ct,{id:"status",options:A,value:ee.value,onChange:ee.onChange,placeholder:r("Select Status","kivicare-clinic-management-system"),className:"react-select-box",classNamePrefix:"react-select",isSearchable:!1,styles:{menuPortal:me=>({...me,zIndex:9999})},isDisabled:t&&x||!p})}),F.status&&i.jsx("div",{className:"invalid-feedback d-block",children:F.status.message})]})}),i.jsxs("div",{className:"col-md-6",children:[i.jsxs("div",{children:[i.jsxs("label",{htmlFor:"specialties",className:"form-label",children:[r("Specialties","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx(ye,{name:"specialties",control:I,rules:le.specialties,render:({field:ee})=>i.jsx(mu,{id:"specialties",options:z?.data??[],value:ee.value,onChange:me=>{ee.onChange(me)},onCreateOption:me=>{ge.mutate(me,{onSuccess:K=>{if(K?.data?.data){const re=(ee.value||[]).map(oe=>oe.id===tempOption.id?{id:K.data.data.id,label:K.data.data.label}:oe);ee.onChange(re)}Se.success(r("Specialty added successfully","kivicare-clinic-management-system"))},onError:K=>{console.error("Failed to save specialty:",K),console.error("Error details:",K.response?.data),Se.error(r("Failed to save specialty to database, but it will be used for this form submission.","kivicare-clinic-management-system"))}})},getOptionValue:me=>me.id,placeholder:r("Select or create specialties","kivicare-clinic-management-system"),className:"react-select-box",classNamePrefix:"react-select",isLoading:ie,isSearchable:!0,isMulti:!0,closeMenuOnSelect:!0,isDisabled:t&&x,noOptionsMessage:()=>r("Type to create a new specialty","kivicare-clinic-management-system"),formatCreateLabel:me=>r("Add specialty","kivicare-clinic-management-system")+`: "${me}"`})}),F.specialties&&i.jsx("div",{className:"invalid-feedback d-block",children:F.specialties.message})]}),i.jsxs("p",{className:"mt-2 mb-0 small",children:[i.jsx("span",{className:"text-primary",children:r("Note:","kivicare-clinic-management-system")})," ",r("Type a new specialty and press enter to add it","kivicare-clinic-management-system")]})]}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{children:[i.jsxs("label",{htmlFor:"address",className:"form-label",children:[r("Address","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx("input",{type:"text",id:"address",className:`form-control ${F.address?"is-invalid":""}`,placeholder:r('eg "1234 Skin Care Ave, Suite 567, Dermatown, CA 90210"',"kivicare-clinic-management-system"),...P("address",le.address),disabled:t&&x}),F.address&&i.jsx("div",{className:"invalid-feedback d-block",children:F.address.message})]})})]})}),i.jsx("div",{className:"col-lg-12",children:i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-md-4",children:i.jsxs("div",{children:[i.jsxs("label",{htmlFor:"country",className:"form-label",children:[r("Country","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx("input",{type:"text",id:"country",className:`form-control ${F.country?"is-invalid":""}`,placeholder:r('eg "USA"',"kivicare-clinic-management-system"),...P("country",le.country),disabled:t&&x}),F.country&&i.jsx("div",{className:"invalid-feedback d-block",children:F.country.message})]})}),i.jsx("div",{className:"col-md-4",children:i.jsxs("div",{children:[i.jsxs("label",{htmlFor:"city",className:"form-label",children:[r("City","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx("input",{type:"text",id:"city",className:`form-control ${F.city?"is-invalid":""}`,placeholder:r('eg "New York"',"kivicare-clinic-management-system"),...P("city",le.city),disabled:t&&x}),F.city&&i.jsx("div",{className:"invalid-feedback d-block",children:F.city.message})]})}),i.jsx("div",{className:"col-md-4",children:i.jsxs("div",{children:[i.jsxs("label",{htmlFor:"postalCode",className:"form-label",children:[r("Postal Code","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx("input",{type:"text",id:"postalCode",className:`form-control ${F.postalCode?"is-invalid":""}`,placeholder:r('eg "123456"',"kivicare-clinic-management-system"),...P("postalCode",le.postalCode),disabled:t&&x}),F.postalCode&&i.jsx("div",{className:"invalid-feedback d-block",children:F.postalCode.message})]})}),e&&i.jsx("div",{className:"col-md-4",children:i.jsxs("div",{children:[i.jsxs("label",{htmlFor:"language",className:"form-label",children:[r("Choose Language","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx(ye,{name:"language",control:I,rules:le.language,render:({field:ee})=>i.jsx(ct,{id:"language",options:G.map(me=>({value:me.lang,label:me.label})),value:ee.value,onChange:ee.onChange,placeholder:r("Choose Language","kivicare-clinic-management-system"),className:"react-select-box",classNamePrefix:"react-select",isSearchable:!0,styles:{menuPortal:me=>({...me,zIndex:9999})},isDisabled:t&&x})}),F.language&&i.jsx("div",{className:"invalid-feedback d-block",children:F.language.message})]})})]})})]}),i.jsxs("div",{className:"mt-5 pt-3",children:[i.jsx("h6",{className:"mb-3",children:t?r("Update Admin Details","kivicare-clinic-management-system"):r("Create Clinic Admin Detail","kivicare-clinic-management-system")}),i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-lg-4 pt-5 d-flex align-items-center justify-content-center",children:i.jsx(ye,{name:"adminImage",control:I,render:({field:ee})=>i.jsx(yl,{id:"admin-image-upload",name:"adminImage",label:r("Image","kivicare-clinic-management-system"),defaultImage:ee.value,defaultImageId:M("adminImageId"),onChange:me=>U("adminImage",me),className:"",size:200})})}),i.jsx("div",{className:"col-lg-8",children:i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{children:[i.jsxs("label",{htmlFor:"firstName",className:"form-label",children:[r("First Name","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx("input",{type:"text",id:"firstName",className:`form-control ${F.firstName?"is-invalid":""}`,placeholder:r('eg "Mark"',"kivicare-clinic-management-system"),...P("firstName",le.firstName),disabled:t&&x}),F.firstName&&i.jsx("div",{className:"invalid-feedback d-block",children:F.firstName.message})]})}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{children:[i.jsxs("label",{htmlFor:"lastName",className:"form-label",children:[r("Last Name","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx("input",{type:"text",id:"lastName",className:`form-control ${F.lastName?"is-invalid":""}`,placeholder:r('eg "Avenue"',"kivicare-clinic-management-system"),...P("lastName",le.lastName),disabled:t&&x}),F.lastName&&i.jsx("div",{className:"invalid-feedback d-block",children:F.lastName.message})]})}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{children:[i.jsxs("label",{htmlFor:"adminEmail",className:"form-label",children:[r("Email","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx("input",{type:"email",id:"adminEmail",className:`form-control ${F.adminEmail?"is-invalid":""}`,placeholder:r('eg "admin@example.com"',"kivicare-clinic-management-system"),...P("adminEmail",le.adminEmail),disabled:t&&x}),F.adminEmail&&i.jsx("div",{className:"invalid-feedback d-block",children:F.adminEmail.message})]})}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{children:[i.jsxs("label",{htmlFor:"adminContactNumber",className:"form-label",children:[r("Contact Number","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx(ye,{name:"adminContactNumber",control:I,rules:le.adminContactNumber,render:({field:ee})=>i.jsx(to,{defaultCountry:c,value:ee.value,onChange:ee.onChange,inputProps:{className:`form-control ${F.adminContactNumber?"is-invalid":""}`,placeholder:r("Enter phone number","kivicare-clinic-management-system"),disabled:t&&x}})}),F.adminContactNumber&&i.jsx("div",{className:"invalid-feedback d-block",children:F.adminContactNumber.message})]})}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{children:[i.jsxs("label",{htmlFor:"dob",className:"form-label",children:[r("DOB","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx(ye,{name:"dob",control:I,rules:le.dob,render:({field:ee})=>i.jsxs("div",{className:"input-group",children:[i.jsx(Un,{id:"dob",className:`form-control ${F.dob?"is-invalid":""}`,value:ee.value?Zn(ee.value):"",onChange:me=>{if(me&&me[0]){const K=me[0],re=`${K.getFullYear()}-${String(K.getMonth()+1).padStart(2,"0")}-${String(K.getDate()).padStart(2,"0")}`;ee.onChange(re)}else ee.onChange("")},options:{dateFormat:xi(window.kc_frontend.date_format),maxDate:new Date,disableMobile:!0,locale:Wn()},placeholder:r("Select date of birth","kivicare-clinic-management-system"),disabled:t&&x}),i.jsx("div",{className:"input-group-text",children:i.jsx("i",{className:"ph ph-calendar"})})]})}),F.dob&&i.jsx("div",{className:"invalid-feedback d-block",children:F.dob.message})]})}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{children:[i.jsxs("label",{className:"form-label",children:[r("Gender","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsxs("div",{className:"d-flex align-items-center flex-wrap gap-3 form-control",children:[i.jsxs("div",{className:"form-check m-0",children:[i.jsx("input",{className:`form-check-input ${F.gender?"is-invalid":""}`,type:"radio",id:"male",value:"male",...P("gender",le.gender),disabled:t&&x}),i.jsx("label",{className:"form-check-label",htmlFor:"male",children:r("Male","kivicare-clinic-management-system")})]}),i.jsxs("div",{className:"form-check m-0",children:[i.jsx("input",{className:`form-check-input ${F.gender?"is-invalid":""}`,type:"radio",id:"female",value:"female",...P("gender",le.gender),disabled:t&&x}),i.jsx("label",{className:"form-check-label",htmlFor:"female",children:r("Female","kivicare-clinic-management-system")})]}),d&&i.jsxs("div",{className:"form-check m-0",children:[i.jsx("input",{className:`form-check-input ${F.gender?"is-invalid":""}`,type:"radio",id:"other",value:"other",...P("gender",le.gender),disabled:t&&x}),i.jsx("label",{className:"form-check-label",htmlFor:"other",children:r("Other","kivicare-clinic-management-system")})]})]}),F.gender&&i.jsx("div",{className:"invalid-feedback d-block",children:F.gender.message})]})})]})})]})]})]})}),i.jsxs("div",{className:"d-flex align-items-center justify-content-end flex-wrap gap-3 mb-5",children:[i.jsx(ei,{text:r("Cancel","kivicare-clinic-management-system"),variant:"secondary",showIcon:!1,disabled:D||t&&x}),i.jsx("button",{type:"submit",className:"btn btn-primary",disabled:D||t&&x,children:D?i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),t?r("Updating...","kivicare-clinic-management-system"):r("Saving...","kivicare-clinic-management-system")]}):t?r("Update Clinic","kivicare-clinic-management-system"):r("Save Clinic","kivicare-clinic-management-system")})]})]})})]})}const Nte=Object.freeze(Object.defineProperty({__proto__:null,default:Oy},Symbol.toStringTag,{value:"Module"})),Cte=[Gn({path:"/clinic",title:"Clinic",outlet:wte,permissions:["clinic_list"],meta:{description:"Clinic management system",icon:"hospital",showInSidebar:!0},children:[We({path:"",component:jte,title:"All Clinics",index:!0,permissions:["clinic_list"],meta:{description:"List of all clinics",breadcrumb:"All Clinics"},skeleton:()=>i.jsx("div",{className:"container-fluid pb-0",children:i.jsx(_n,{columns:6,rows:5,showBreadcrumb:!0,showPageHeader:!0,showFilterBar:!0})})}),We({path:"add",component:Oy,title:"Add Clinic",props:{isEditing:!1},addons:["kiviPro"],permissions:["clinic_add"],skeleton:Iy,meta:{description:"Create a new clinic",breadcrumb:"Add New"}}),We({path:"edit/:id",component:Oy,title:"Edit Clinic",props:{isEditing:!0},permissions:["clinic_edit"],skeleton:Iy,meta:{description:"Edit existing clinic",breadcrumb:"Edit"}})]})],_te=()=>i.jsx("div",{className:"patients-container",children:i.jsx(yo,{})}),Fy=()=>i.jsx("div",{className:"container-fluid pb-0",children:i.jsx("div",{className:"route-container",children:i.jsx("div",{className:"w-100",children:i.jsxs("div",{className:"patients-container",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center gap-3 flex-wrap mb-4",children:[i.jsx(wo,{items:["50px","80px","100px"]}),i.jsx(st,{width:"80px",height:"32px"})]}),i.jsx(wl,{titleWidth:"150px"}),i.jsxs("div",{className:"position-relative",children:[i.jsx("div",{className:"card",children:i.jsxs("div",{className:"card-body",children:[i.jsx(S,{width:"150px",height:"1.1rem",className:"mb-3"}),i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-lg-4 d-flex align-items-center justify-content-center pt-5",children:i.jsx(S,{width:"200px",height:"200px",margin:"0 auto",style:{borderRadius:"50%"}})}),i.jsx("div",{className:"col-lg-8",children:i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-md-6",children:i.jsx(Ne,{labelWidth:"100px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Ne,{labelWidth:"90px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Ne,{labelWidth:"110px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Ne,{labelWidth:"60px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Ne,{labelWidth:"120px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Ne,{labelWidth:"50px"})})]})}),i.jsx("div",{className:"col-lg-12",children:i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsx(Ne,{labelWidth:"60px"})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsx(Ne,{labelWidth:"90px"})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsx(Ne,{labelWidth:"70px"})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsx(Ne,{labelWidth:"80px"})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsx(Ne,{labelWidth:"100px"})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsx(Ne,{labelWidth:"90px"})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsx(Ne,{labelWidth:"70px"})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsx(Ne,{labelWidth:"60px"})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsx(Ne,{labelWidth:"80px"})}),i.jsx("div",{className:"col-12",children:i.jsx(Ne,{labelWidth:"70px",inputHeight:"80px"})})]})})]})]})}),i.jsxs("div",{className:"d-flex justify-content-end gap-2 mt-4",children:[i.jsx(st,{width:"80px",height:"38px"}),i.jsx(st,{width:"100px",height:"38px"})]})]})]})})})}),uP=()=>i.jsxs(ko,{fluid:!0,className:"content-inner pb-0",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center gap-3 flex-wrap mb-4",children:[i.jsx(wo,{items:["80px","100px","120px"]}),i.jsx(S,{width:"80px",height:"2.5rem",style:{borderRadius:"4px"}})]}),i.jsx(Yn,{className:"row-cols-md-2 row-cols-xxl-4 row-cols-1 mt-5 insights-container",children:Array.from({length:4}).map((t,e)=>i.jsx(Et,{children:i.jsx(_t,{className:"card-block card-stretch card-height overflow-hidden",children:i.jsx(_t.Body,{children:i.jsxs("div",{className:"d-flex align-items-center gap-1 justify-content-between",children:[i.jsxs("div",{children:[i.jsx(S,{width:"120px",height:"1rem",className:"mb-3"}),i.jsx(S,{width:"60px",height:"1.5rem"})]}),i.jsx("div",{className:"card-icon",children:i.jsx(S,{width:"2rem",height:"2rem",style:{borderRadius:"50%"}})})]})})})},e))}),i.jsx(_t,{children:i.jsx(_t.Body,{children:i.jsx(Yn,{children:i.jsx(Et,{xs:12,children:i.jsxs("div",{className:"custom-tab-slider",children:[i.jsxs(Mn,{variant:"pills",className:"nav-pill-card mb-5",children:[i.jsx(Mn.Item,{children:i.jsx(S,{width:"60px",height:"2.5rem",style:{borderRadius:"4px"},className:"me-2"})}),i.jsx(Mn.Item,{children:i.jsx(S,{width:"70px",height:"2.5rem",style:{borderRadius:"4px"},className:"me-2"})}),i.jsx(Mn.Item,{children:i.jsx(S,{width:"100px",height:"2.5rem",style:{borderRadius:"4px"}})})]}),i.jsx("div",{className:"tab-content",children:i.jsx(gt,{children:i.jsx(S,{width:"100%",height:"200px"})})})]})})})})})]}),Ste=({label:t,count:e,icon:n})=>i.jsx(Et,{children:i.jsx(_t,{className:"card-block card-stretch card-height overflow-hidden",children:i.jsx(_t.Body,{children:i.jsxs("div",{className:"d-flex align-items-center gap-2 justify-content-between",children:[i.jsxs("div",{children:[i.jsx("h6",{className:"text-body line-clamp-1 fw-medium mb-3",children:t}),i.jsx("h3",{className:"heading-color line-clamp-1 counter mb-0 fw-bold",children:e})]}),i.jsx("div",{className:"card-icon",children:i.jsx("i",{className:`${n} fs-1 text-primary`,"aria-hidden":"true"})})]})})})}),Ete=()=>{const{patientProfileId:t}=Yt(),e=Kn(),n=hn(),{isAddonActive:s,getPriceFormat:a}=mt(),[l,o]=f.useState([]),c=s("kiviPro"),{data:d,isLoading:m,isError:u,error:h}=ste(t),p=()=>{const v=e.pathname;return v.includes("/appointments")?"appointments":v.includes("/reports")?"reports":(v.endsWith(`/profile/${t}`)||v.endsWith(`/profile/${t}/`),"profile")},g=v=>{switch(v){case"profile":n("",{relative:"path"});break;case"reports":n("reports",{relative:"path"});break;case"appointments":n("appointments",{relative:"path"});break;default:n("",{relative:"path"})}};return f.useEffect(()=>{if(d?.data){const v=d?.data?.statistics;o([{label:r("Total Appointments","kivicare-clinic-management-system"),count:v.total_appointments||0,icon:"ph-fill ph-calendar-dots"},{label:r("Completed Appointments","kivicare-clinic-management-system"),count:v.completed_appointments||0,icon:"ph-fill ph-calendar-check"},{label:r("Total Encounters","kivicare-clinic-management-system"),count:v.total_encounters||0,icon:"ph-fill ph-stethoscope"},{label:r("Total Billing Amount","kivicare-clinic-management-system"),count:a(v.total_billing_amount)||0,icon:"ph-fill ph-currency-dollar"}])}},[d]),m?i.jsx(uP,{}):u?i.jsx(ko,{fluid:!0,className:"content-inner pb-0",children:i.jsx("div",{className:"text-center py-5",children:i.jsx("p",{className:"text-danger",children:h?.message||r("Failed to load patient data","kivicare-clinic-management-system")})})}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center gap-3 flex-wrap mb-4",children:[i.jsx(_i,{}),i.jsx(ei,{})]}),i.jsx(Yn,{className:"row-cols-md-2 row-cols-xxl-4 row-cols-1 mt-5 insights-container",children:l.map((v,x)=>i.jsx(Ste,{...v},x))}),i.jsx(_t,{children:i.jsx(_t.Body,{children:i.jsx(Yn,{children:i.jsx(Et,{xs:12,children:i.jsx("div",{className:"custom-tab-slider",children:i.jsxs(Rc.Container,{activeKey:p(),onSelect:g,children:[i.jsxs(Mn,{variant:"pills",className:"nav-pill-card mb-5",children:[i.jsx(Mn.Item,{children:i.jsx(Mn.Link,{eventKey:"profile",children:r("Profile","kivicare-clinic-management-system")})}),c&&i.jsx(Mn.Item,{children:i.jsx(Mn.Link,{eventKey:"reports",children:r("Reports","kivicare-clinic-management-system")})}),i.jsx(Mn.Item,{children:i.jsx(Mn.Link,{eventKey:"appointments",children:r("Appointments","kivicare-clinic-management-system")})})]}),i.jsx(fs,{})]})})})})})})]})},Tte=()=>{const[t,e]=f.useState({page:1,perPage:10,search:"",clinic:"",status:"",orderBy:"",order:"",date_from:"",date_to:"",registeredOn:"",patient_unique_id:""}),n=q=>{if(q.length>0){const{id:B,desc:se}=q[0],Q={name:"name",registeredOn:"registered_on",mobileNumber:"contact_number",status:"status",id:"id"};e(pe=>({...pe,orderby:Q[B]||B,order:se?"desc":"asc",page:1}))}else e(B=>({...B,orderby:"",order:"",page:1}))},[s,a]=f.useState([]),l=Xn(),o=Jn(),c=f.useMemo(()=>Object.fromEntries(Object.entries(t).filter(([q,B])=>B!==""&&B!==null&&B!==void 0)),[t]),[d,m]=f.useState(!1),u=f.useRef(null),{data:h,isLoading:p,error:g,refetch:v}=cP(c),x=Xee(),y=Zee(),b=Jee(),k=ete(),w=tte(),[T,j]=f.useState(!1),D=h?.data?.patients||[],_=h?.data?.pagination||{total:0,lastPage:1,perPage:10,currentPage:1},N=ze(),A=async({page:q,per_page:B,search:se})=>{try{const Q={dataType:"clinicList",page:q,per_page:B,search:se},pe=await N.fetchQuery({queryKey:pt.list(Q),queryFn:()=>Dt.getStaticData(Q),staleTime:300*1e3}),$=pe.data.map(ce=>({value:ce.id,label:ce.label||ce.name}));return a(ce=>[...ce,...$]),pe}catch(Q){return console.error("Error loading clinics:",Q),{data:[],pagination:{has_more:!1}}}},P=[{value:"0",label:r("Active","kivicare-clinic-management-system"),class:"bg-success-subtle text-success"},{value:"1",label:r("Inactive","kivicare-clinic-management-system"),class:"bg-danger-subtle text-danger"}],[E,I]=f.useState(""),M=q=>{I(q.target.value)},O=f.useMemo(()=>E.trim()?D.filter(q=>{const B=E.toLowerCase();return q.name?.toLowerCase().includes(B)||q.email?.toLowerCase().includes(B)||q.mobileNumber?.toLowerCase().includes(B)||q.clinicName?.toLowerCase().includes(B)||q.id?.toString().includes(B)||q.patient_unique_id?.toLowerCase().includes(B)}):D,[D,E]),F=ite(),H=async q=>{try{yt({title:r("Exporting...","kivicare-clinic-management-system"),text:r("Please wait. This may take a few seconds.","kivicare-clinic-management-system")});const B={format:q,search:t.search,clinic:t.clinic,status:t.status},se=await F.mutateAsync(B);if(se?.data?.patients){const Q=new Date().toISOString().split("T")[0],pe=se.data.patients.map($=>({id:$.id,patient_image_url:$.patient_image_url,name:$.name,clinic:$.clinic,email:$.email,mobile:$.mobile,gender:$.gender,dob:$.dob,blood_group:$.blood_group,registered_on:$.registered_on,status:$.status,address:$.address}));switch(q){case"csv":hs(pe,`patients-${Q}.csv`);break;case"xls":ps(pe,`patients-${Q}.xls`);break;case"pdf":gs(pe,`patients-${Q}.pdf`,"Patients List");break;default:throw new Error("Invalid export format")}Wi(),Se.success(r("Export completed successfully.","kivicare-clinic-management-system"))}else throw new Error("No data received from server")}catch(B){console.error("Export error:",B),rt({title:r("Error!","kivicare-clinic-management-system"),text:B.message||r("Failed to export data. Please try again.","kivicare-clinic-management-system"),confirmButtonText:r("OK","kivicare-clinic-management-system")})}},G=()=>H("csv"),z=()=>H("xls"),[ie,W]=f.useState(!1),ge=()=>{ie||(W(!0),H("pdf"),setTimeout(()=>W(!1),2e3))},[ae,U]=f.useState(!1),X=q=>{e(B=>({...B,...q,page:1})),U(!1)},J=f.useMemo(()=>["search","id","patientName","clinic","status","date_from","date_to","patient_unique_id"].some(B=>{const se=t[B];return se!=null&&se!==""}),[t]),he=()=>{const q={page:1,perPage:t.perPage,search:"",id:"",patientName:"",clinicName:"",registeredOn:"",status:"",orderBy:"",order:"",patient_unique_id:"",date_from:"",date_to:"",clinic:""};e(q),a([]),U(!1)},{isAddonActive:le,defaultClinicId:ee,patientUniqueIdSetting:me,hasCapability:K}=mt(),re=le("kiviPro"),oe=[...me?.enable?[{type:"text",name:"patient_unique_id",label:r("Patient Unique ID","kivicare-clinic-management-system"),placeholder:r("Enter Patient Unique ID","kivicare-clinic-management-system")}]:[{type:"number",name:"id",label:r("Patient ID","kivicare-clinic-management-system"),placeholder:r("eg 123","kivicare-clinic-management-system"),min:1,pattern:"[0-9]*",onInput:q=>{q.target.value=q.target.value.replace(/[^0-9]/g,"")}}],{type:"text",name:"patientName",label:r("Patient Name","kivicare-clinic-management-system"),placeholder:r("eg Sophia Anderson","kivicare-clinic-management-system")},...re&&!l&&!o?[{type:"paginatedSelect",name:"clinic",label:r("Clinic","kivicare-clinic-management-system"),placeholder:r("Select clinic","kivicare-clinic-management-system"),optionLoader:A,options:s,key:"clinic-filter"}]:[],{type:"dateRange",name:"registeredOn",label:r("Registered ON","kivicare-clinic-management-system"),placeholder:r("eg 15/03/25","kivicare-clinic-management-system"),startDateKey:"date_from",endDateKey:"date_to"},{type:"select",name:"status",label:r("Status","kivicare-clinic-management-system"),placeholder:r("eg Active","kivicare-clinic-management-system"),options:P,isSearchable:!1}],C=Ln(),R=f.useMemo(()=>[C.accessor("id",{header:()=>me?.enable?r("Unique ID","kivicare-clinic-management-system"):r("ID","kivicare-clinic-management-system"),cell:q=>{const B=q.row.original;return me?.enable?B.patient_unique_id?B.patient_unique_id:"-":`#${q.getValue()}`}}),C.accessor("name",{id:"name",header:()=>r("Patient","kivicare-clinic-management-system"),cell:q=>i.jsx(dn,{profileUrl:q.row.original.patient_image_url,name:q.getValue(),email:q.row.original.email,fallbackText:"PT",variant:"primary",size:"md",nameLabel:r("Patient","kivicare-clinic-management-system")})}),...re&&!l&&!o?[C.accessor("clinicNameArray",{header:()=>r("Clinic","kivicare-clinic-management-system"),cell:q=>{const B=q.row.original.clinics||[];return i.jsx("div",{children:B.length>0?i.jsxs("div",{className:"d-flex flex-wrap gap-1",children:[B.slice(0,2).map((se,Q)=>i.jsx(Zp,{placement:q.row.index<_.perPage-2?"bottom":"top",trigger:i.jsx("span",{className:"badge bg-info-subtle text-info cursor-pointer",children:se.clinic_name}),children:i.jsx(Am,{avatar:se.clinic_image_url,name:se.clinic_name,email:se.clinic_email,phone:se.clinic_contact_number,address:se.clinic_address,fallbackIcon:"ph-hospital"})},Q)),B.length>2&&i.jsx(Zp,{trigger:i.jsxs("span",{className:"badge bg-secondary-subtle text-secondary cursor-pointer",children:["+",B.length-2]}),placement:q.row.index<_.perPage-2?"bottom":"top",children:i.jsxs("div",{className:"p-2",style:{maxHeight:"400px",overflowY:"auto"},children:[i.jsx("div",{className:"mb-2 pb-2 border-bottom",children:i.jsx("span",{className:"text-secondary text-uppercase fw-semibold",style:{fontSize:"0.75rem"},children:r("More Clinics","kivicare-clinic-management-system")})}),i.jsx("div",{className:"d-flex flex-column gap-3",children:B.slice(2).map((se,Q)=>i.jsx("div",{className:Q!==0?"pt-3 border-top":"",children:i.jsx(Am,{avatar:se.clinic_image_url,name:se.clinic_name,email:se.clinic_email,phone:se.clinic_contact_number,address:se.clinic_address,fallbackIcon:"ph-hospital"})},Q))})]})})]}):i.jsx("span",{className:"text-muted",children:""})})},enableSorting:!1})]:[],C.accessor("mobileNumber",{header:()=>r("Mobile Number","kivicare-clinic-management-system"),cell:q=>q.getValue()}),C.accessor("registeredOn",{header:()=>r("Registered ON","kivicare-clinic-management-system"),cell:q=>q.getValue()}),C.accessor("status",{header:()=>r("Status","kivicare-clinic-management-system"),cell:q=>{r("Active","kivicare-clinic-management-system"),r("Inactive","kivicare-clinic-management-system");const B=Number(q.getValue()),se=q.row.original,Q=()=>{const pe=B===1?0:1;kt({title:r("Update Status?","kivicare-clinic-management-system"),text:Pi(r("Are you sure you want to change the status of <strong>%s</strong> to %s?","kivicare-clinic-management-system"),se.name,pe===1?r("Inactive","kivicare-clinic-management-system"):r("Active","kivicare-clinic-management-system")),icon:"ph-warning",confirmButtonText:r("Yes, update","kivicare-clinic-management-system"),cancelButtonText:r("No, cancel","kivicare-clinic-management-system")}).then($=>{$.isConfirmed&&(yt({title:r("Updating Status...","kivicare-clinic-management-system"),text:r("Please wait...","kivicare-clinic-management-system")}),w.mutate({ids:[se.id],status:pe},{onSuccess:()=>{Tt({title:r("Status Updated","kivicare-clinic-management-system"),text:r("Patient status has been updated successfully.","kivicare-clinic-management-system")})},onError:ce=>{rt({title:r("Error","kivicare-clinic-management-system"),text:ce.message||r("Failed to update status.","kivicare-clinic-management-system")})}}))})};return K("patient_edit")?i.jsxs("div",{className:"form-check form-switch",children:[i.jsx("input",{className:"form-check-input",type:"checkbox",role:"switch",id:`patient-status-${se.id}`,checked:B===0,onChange:Q}),i.jsx("label",{className:"form-check-label",htmlFor:`patient-status-${se.id}`,children:i.jsx("span",{className:`badge ${B===0?"bg-success-subtle text-success":"bg-danger-subtle text-danger"}`,children:B===0?r("Active","kivicare-clinic-management-system"):r("Inactive","kivicare-clinic-management-system")})})]}):i.jsx("span",{className:`badge ${B===0?"bg-success-subtle text-success":"bg-danger-subtle text-danger"} px-3 py-2`,children:B===0?r("Active","kivicare-clinic-management-system"):r("Inactive","kivicare-clinic-management-system")})},enableSorting:!1}),...K("patient_edit")||K("patient_appointment")||K("patient_appointment_report")||K("patient_resend_credential")||K("patient_encounter")||K("patient_profile")||K("patient_delete")?[C.accessor("actions",{header:()=>r("Action","kivicare-clinic-management-system"),enableSorting:!1,cell:q=>{const B=se=>Q=>i.jsx(ut,{id:`tooltip-${q.cell.row.original.id}-${se}`,...Q,children:se});return i.jsxs("div",{className:"d-flex align-items-center gap-3",children:[K("patient_edit")&&i.jsx(Qe,{placement:"top",overlay:B(r("Edit Patient","kivicare-clinic-management-system")),children:i.jsx(ht,{to:`/patient/edit/${q.row.original.id}`,className:"btn btn-link text-success fs-5 p-0",children:i.jsx("i",{className:"ph ph-pencil-simple-line"})})}),K("patient_appointment")&&i.jsx(Qe,{placement:"top",overlay:B(r("Appointments","kivicare-clinic-management-system")),children:i.jsx(ht,{to:`/patient/profile/${encodeURIComponent(q.row.original.id)}/appointments`,className:"btn btn-link text-info fs-5 p-0",children:i.jsx("i",{className:"ph ph-calendar"})})}),K("patient_appointment_report")&&i.jsx(Qe,{placement:"top",overlay:B(r("Reports","kivicare-clinic-management-system")),children:i.jsx(ht,{to:`/patient-medical-report_id/patient/${q.row.original.id}`,className:"btn btn-link text-warning fs-5 p-0",children:i.jsx("i",{className:"ph ph-file"})})}),K("patient_resend_credential")&&i.jsx(Qe,{placement:"top",overlay:B(r("Resend Credential","kivicare-clinic-management-system")),children:i.jsx("a",{type:"button",onClick:()=>te(q.cell.row.original.id),className:"btn btn-link text-danger fs-5 p-0",children:i.jsx("i",{className:"ph ph-shield-check"})})}),K("patient_encounter")&&i.jsx(Qe,{placement:"top",overlay:B(r("Patient Encounters","kivicare-clinic-management-system")),children:i.jsx(ht,{to:`/encounter/patient/${q.cell.row.original.id}`,className:"d-inline-block",children:i.jsx("span",{className:"text-primary fs-4",children:i.jsx("i",{className:"ph ph-calendar-check"})})})}),K("patient_profile")&&i.jsx(Qe,{placement:"top",overlay:B(r("View Profile","kivicare-clinic-management-system")),children:i.jsx(ht,{to:`/patient/profile/${q.row.original.id}`,className:"btn btn-link text-gray fs-5 p-0",children:i.jsx("i",{className:"ph ph-user-circle-check"})})}),K("patient_delete")&&i.jsx(Qe,{placement:"top",overlay:B(r("Delete patient","kivicare-clinic-management-system")),children:i.jsx("button",{className:"btn btn-link text-danger fs-5 p-0",onClick:()=>ne(q.cell.row.original.id,q.row.original.name),children:i.jsx("i",{className:"ph text-bold ph-trash"})})})]})}})]:[]],[me,K]),te=q=>{kt({title:r("Resend Credential","kivicare-clinic-management-system"),text:r("Are you sure you want to resend the credential for this patient?","kivicare-clinic-management-system"),icon:"ph-warning",confirmButtonText:r("Yes, resend","kivicare-clinic-management-system"),cancelButtonText:r("No, cancel","kivicare-clinic-management-system")}).then(B=>{B.isConfirmed&&(yt({title:r("Sending...","kivicare-clinic-management-system"),text:r("Please wait. This may take a few seconds.","kivicare-clinic-management-system")}),y.mutate(q,{onSuccess:se=>{Tt({text:se?.message||r("Credential has been resent successfully.","kivicare-clinic-management-system")})},onError:se=>{console.error("Resend credential error:",se);const Q=se?.response?.data?.message||se?.message||r("Failed to resend credentials. Please try again.","kivicare-clinic-management-system");rt({text:Q})}}))})},ne=(q,B)=>{kt({title:r("Delete Patient?","kivicare-clinic-management-system"),text:Pi(r("You're about to delete <strong>%s</strong>.<br>This action cannot be undone.","kivicare-clinic-management-system"),B),icon:"ph-warning",confirmButtonText:r("Delete permanently","kivicare-clinic-management-system"),cancelButtonText:r("Keep patient","kivicare-clinic-management-system"),confirmButtonClass:"btn-danger"}).then(se=>{se.isConfirmed&&(yt({title:r("Deleting Patient...","kivicare-clinic-management-system"),text:r("Please wait while we remove the selected patient.<br>This won't take long.","kivicare-clinic-management-system")}),x.mutate(q,{onSuccess:Q=>{Tt({title:r("Patient Deleted","kivicare-clinic-management-system"),text:Q?.message||r("Patient has been deleted successfully.","kivicare-clinic-management-system"),confirmButtonText:r("Back to patients","kivicare-clinic-management-system")})},onError:Q=>{console.error("Delete patient error:",Q);const pe=Q?.response?.data?.message||Q?.message||r("Failed to delete patient. Please try again.","kivicare-clinic-management-system");rt({text:pe})}}))})},Y=()=>{v()};return i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"d-flex justify-content-between align-items-center gap-3 flex-wrap mb-4",children:i.jsx(_i,{})}),i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap row-gap-2 column-gap-3 mb-4",children:[i.jsx("div",{className:"page-title",children:i.jsx("h6",{className:"m-0",children:r("All Patients","kivicare-clinic-management-system")})}),i.jsxs("div",{className:"d-flex align-items-center row-gap-2 column-gap-3 flex-wrap",children:[K("patient_add")&&i.jsxs(ht,{to:"/patient/add",className:"btn btn-secondary d-flex align-items-center gap-2",children:[i.jsx("i",{className:"ph ph-plus-circle"}),i.jsx("span",{children:r("Add Patient","kivicare-clinic-management-system")})]}),re&&i.jsxs("button",{className:"btn btn-primary d-flex align-items-center gap-2",onClick:()=>j(!0),children:[i.jsx("i",{className:"ph ph-upload"}),i.jsx("span",{children:r("Import Data","kivicare-clinic-management-system")})]}),i.jsxs("button",{className:"btn btn-primary d-flex align-items-center gap-2",onClick:()=>U(!0),children:[i.jsx("i",{className:"ph ph-funnel"}),i.jsx("span",{children:r("Filters","kivicare-clinic-management-system")})]})]})]}),i.jsxs("div",{className:"kc-table-wrapper",children:[i.jsx(Ci,{in:!d,timeout:100,classNames:"fade-top-bottom",unmountOnExit:!0,nodeRef:u,children:i.jsxs("div",{ref:u,className:"d-flex justify-content-between align-items-xl-center flex-column flex-lg-row gap-3 mb-4 position-absolute top-0 w-100",children:[i.jsxs("div",{className:"table-selection d-flex gap-3 flex-column flex-sm-row",children:[re&&!l&&!o&&i.jsx(rn,{id:"clinic-filter",placeholder:r("Select Clinic","kivicare-clinic-management-system"),className:"react-select-box",classNamePrefix:"react-select",loadOptions:A,value:s.find(q=>q.value===t.clinic)||null,onChange:q=>{e(B=>({...B,clinic:q?q.value:""}))},dependencies:{},isClearable:!0}),i.jsx("div",{className:"position-relative",children:i.jsxs(Zd,{children:[i.jsx(Un,{onChange:q=>{if(q.length===2){const[B,se]=q;e(Q=>({...Q,date_from:La(B),date_to:La(se),page:1}))}else q.length===0&&e(B=>({...B,date_from:"",date_to:"",page:1}))},value:t.date_from&&t.date_to?[Zn(t.date_from),Zn(t.date_to)]:null,options:{mode:"range",dateFormat:xi(window.kc_frontend.date_format),locale:Wn()},className:"form-control",placeholder:r("Select date range","kivicare-clinic-management-system")}),i.jsx("span",{className:"input-group-text",children:t.date_from||t.date_to?i.jsx("i",{className:"ph ph-x text-danger cursor-pointer",onClick:()=>{e(B=>({...B,date_from:"",date_to:"",page:1}));const q=document.querySelector('.form-control[placeholder="Select date range"]');q&&q._flatpickr&&q._flatpickr.clear()},title:r("Clear date range","kivicare-clinic-management-system")}):i.jsx("i",{className:"ph ph-calendar"})})]})}),i.jsx(ct,{placeholder:r("Status","kivicare-clinic-management-system"),className:"react-select-box",classNamePrefix:"react-select",options:P,onChange:q=>e(B=>({...B,status:q?q.value:""})),value:P.find(q=>q.value===t.status)||null,isClearable:!0,isSearchable:!1,styles:{menuPortal:q=>({...q,zIndex:9999})}})]}),i.jsxs("div",{className:"btn-toolbar d-flex gap-3 align-items-center justify-content-lg-end table-action-right",children:[i.jsx("div",{className:"d-flex align-items-center input-search-select",children:i.jsxs("div",{className:"input-group input-group-search",children:[i.jsx("span",{className:"input-group-text",children:i.jsx("i",{className:"ph ph-magnifying-glass"})}),i.jsx("input",{type:"text",className:"form-control",placeholder:r("Search Anything","kivicare-clinic-management-system"),value:E,onChange:M})]})}),K("patient_export")&&re&&i.jsxs("div",{className:"download-buttons d-flex align-items-center gap-3",children:[i.jsx(Qe,{placement:"top",overlay:i.jsx(ut,{children:r("Export CSV","kivicare-clinic-management-system")}),children:i.jsx("button",{className:"btn btn-white",onClick:G,disabled:F.isPending,children:i.jsx("i",{className:"ph ph-file-csv"})})}),i.jsx(Qe,{placement:"top",overlay:i.jsx(ut,{children:r("Export Excel","kivicare-clinic-management-system")}),children:i.jsx("button",{className:"btn btn-white",onClick:z,disabled:F.isPending,children:i.jsx("i",{className:"ph ph-file-xls"})})}),i.jsx(Qe,{placement:"top",overlay:i.jsx(ut,{children:r("Export PDF","kivicare-clinic-management-system")}),children:i.jsx("button",{className:"btn btn-white",onClick:ge,disabled:F.isPending||ie,children:i.jsx("i",{className:"ph ph-file-pdf"})})})]})]})]})}),i.jsx(wn,{data:O,columns:R,isLoading:p,error:g,currentPage:_.currentPage,perPage:_.perPage,totalItems:_.total,lastPage:_.lastPage,onPageChange:q=>e(B=>({...B,page:q})),onPerPageChange:q=>e(B=>({...B,perPage:q,page:1})),enableSelection:!0,bulkActions:[{label:r("Delete","kivicare-clinic-management-system"),action:(q,B)=>{const se=q.map(Q=>Q.id);kt({title:r("Delete Patients?","kivicare-clinic-management-system"),text:r(`Youre about to delete <strong>${q.length} patients</strong>.<br>This action cannot be undone.`,"kivicare-clinic-management-system"),icon:"ph-warning",confirmButtonText:r("Delete permanently","kivicare-clinic-management-system"),cancelButtonText:r("Keep patients","kivicare-clinic-management-system"),confirmButtonClass:"btn-danger"}).then(Q=>{Q.isConfirmed&&(yt({title:r("Deleting Patients...","kivicare-clinic-management-system"),text:r("Please wait while we remove the selected patients.<br>This won't take long.","kivicare-clinic-management-system")}),b.mutate(se,{onSuccess:pe=>{Tt({title:r("Patient Deleted","kivicare-clinic-management-system"),text:r(`${q.length} patient${q.length>1?"s":""} has been deleted.`,"kivicare-clinic-management-system"),confirmButtonText:r("Back to patients","kivicare-clinic-management-system")}),B()},onError:pe=>{console.error("Bulk delete patient(s) error:",pe);const $=pe?.response?.data?.message||pe?.message||r("Failed to delete selected patient(s). Please try again.","kivicare-clinic-management-system");rt({text:$})}}))})},icon:i.jsx("i",{className:"ph ph-trash"})},{label:r("Resend Credentials","kivicare-clinic-management-system"),action:(q,B)=>{const se=q.map(Q=>Q.id);kt({title:r("Resend Credentials","kivicare-clinic-management-system"),text:r("Are you sure you want to resend credentials to the selected patient(s)?","kivicare-clinic-management-system"),icon:"ph-question",confirmButtonText:r("Yes, resend","kivicare-clinic-management-system"),cancelButtonText:r("Cancel","kivicare-clinic-management-system")}).then(Q=>{Q.isConfirmed&&(yt({title:r("Sending...","kivicare-clinic-management-system"),text:r("Please wait. This may take a few seconds.","kivicare-clinic-management-system")}),k.mutate(se,{onSuccess:pe=>{Tt({text:pe?.message||r("Credentials have been resent successfully.","kivicare-clinic-management-system")}),B()},onError:pe=>{console.error("Bulk resend credentials error:",pe);const $=pe?.response?.data?.message||pe?.message||r("Failed to resend credentials. Please try again.","kivicare-clinic-management-system");rt({text:$})}}))})},icon:i.jsx("i",{className:"ph ph-shield-check"})},{label:r("Set Active","kivicare-clinic-management-system"),action:(q,B)=>{const se=q.map(Q=>Q.id);kt({title:r("Update Status","kivicare-clinic-management-system"),text:r("Are you sure you want to activate the selected patient(s)?","kivicare-clinic-management-system"),icon:"ph-question",confirmButtonText:r("Yes, update","kivicare-clinic-management-system"),cancelButtonText:r("Cancel","kivicare-clinic-management-system")}).then(Q=>{Q.isConfirmed&&(yt({title:r("Updating...","kivicare-clinic-management-system"),text:r("Please wait. This may take a few seconds.","kivicare-clinic-management-system")}),w.mutate({ids:se,status:"0"},{onSuccess:pe=>{Tt({text:pe?.message||r("Clinic status has been updated successfully.","kivicare-clinic-management-system")}),B()},onError:pe=>{console.error("Bulk update status error:",pe);const $=pe?.response?.data?.message||pe?.message||r("Failed to update patient status. Please try again.","kivicare-clinic-management-system");rt({text:$})}}))})},icon:i.jsx("i",{className:"ph ph-check-circle"})},{label:r("Set Inactive","kivicare-clinic-management-system"),action:(q,B)=>{const se=q.map(Q=>Q.id);kt({title:r("Update Status","kivicare-clinic-management-system"),text:r("Are you sure you want to inactive the selected patient(s)?","kivicare-clinic-management-system"),icon:"ph-warning",confirmButtonText:r("Yes, update","kivicare-clinic-management-system"),cancelButtonText:r("Cancel","kivicare-clinic-management-system"),confirmButtonClass:"btn-danger"}).then(Q=>{Q.isConfirmed&&(yt({title:r("Updating...","kivicare-clinic-management-system"),text:r("Please wait. This may take a few seconds.","kivicare-clinic-management-system")}),w.mutate({ids:se,status:"1"},{onSuccess:pe=>{Tt({text:pe?.message||r("Patient status has been updated successfully.","kivicare-clinic-management-system")}),B()},onError:pe=>{console.error("Bulk update status error:",pe);const $=pe?.response?.data?.message||pe?.message||r("Failed to update patient(s) status. Please try again.","kivicare-clinic-management-system");rt({text:$})}}))})},icon:i.jsx("i",{className:"ph ph-x-circle"})}],isBulkActionShow:q=>{m(q)},onSortingChange:n,skeletonColumns:6,skeletonRows:5,moduleNamePlural:"patients"})]}),i.jsx(na,{show:ae,onHide:()=>U(!1),queryParams:t,onApplyFilters:X,onResetFilters:he,title:r("Filters","kivicare-clinic-management-system"),fields:oe,hasAppliedFilters:J}),re&&i.jsx(Lr,{show:T,onHide:()=>j(!1),onReopenImport:()=>j(!0),onDataRefresh:Y,context:"patients"})]})};function Jp({isEditing:t=!1,isProfile:e=!1,hideBreadcrumbs:n=!1,...s}){const{patientProfileId:a}=Yt(),l=ze(),{currentuserID:o,isAddonActive:c,userRole:d,defaultClinicId:m,patientUniqueIdSetting:u,defaultCountryCode:h,showOtherGender:p,sidebarItems:g}=mt(),{data:v}=Sn();f.useMemo(()=>v?.data?.kc_available_translations,[v]);const x=Yi(d)&&e?o:a,[y]=wI(),b=y.get("from")==="appointment",{data:k,isLoading:w,error:T}=Gee(x,{enabled:t&&!!x}),j=k?.data,D=async({page:Q,per_page:pe,search:$})=>{try{const ce={dataType:"clinicList",page:Q,per_page:pe,search:$};return await l.fetchQuery({queryKey:pt.list(ce),queryFn:()=>Dt.getStaticData(ce),staleTime:300*1e3})}catch(ce){return console.error("Error loading clinics:",ce),{data:[],pagination:{total:0,per_page:10,current_page:1,total_pages:0,has_more:!1}}}},_=Yee(),N=Qee(),A=hn(),P=!Yi(d)||g&&g.length>0,E=u?.enable,{data:I}=ad({module_type:"patient_module",status:1,module_id:x},{enabled:c("kiviPro")}),M=I?.data?.forms||[],O=f.useRef({});f.useEffect(()=>{t&&M.length>0&&M.forEach(Q=>{const pe=Q.form_data;pe&&O.current[Q.id]&&setTimeout(()=>{const $=O.current[Q.id];$&&$.resetForm&&$.resetForm(pe)},100)})},[t,M]);const F=()=>{const Q={};return M.forEach(pe=>{const $=O.current[pe.id];$&&(Q[pe.id]=$.getFormData())}),Q},H=async()=>{const Q={};let pe=!0,$=null;for(const ce of M){const De=O.current[ce.id];if(De){const xe=await De.triggerValidation();Q[ce.id]={isValid:xe.isValid,data:De.getFormData(),errors:xe.errors},xe.isValid||(pe=!1,$||($=ce.id))}}return{allValid:pe,formResults:Q,firstInvalidFormId:$}},{data:G,isLoading:z,refetch:ie}=nte({enabled:!t&&!e&&E}),[W,ge]=f.useState(!1),ae=W||_.isPending||N.isPending||w,U=Wc.PhoneNumberUtil.getInstance(),X=Q=>{try{return U.isValidNumber(U.parseAndKeepRawInput(Q))}catch{return!1}},J=[{value:"0",label:r("Active","kivicare-clinic-management-system")},{value:"1",label:r("Inactive","kivicare-clinic-management-system")}],{register:he,handleSubmit:le,control:ee,watch:me,setValue:K,formState:{errors:re},reset:oe}=en({defaultValues:{patientImage:"",patientImageId:"",patientUniqueId:"",firstName:"",lastName:"",email:"",contactNumber:"",dob:"",clinic:[],status:J[0],bloodGroup:null,gender:"",address:"",city:"",country:"",postalCode:""}}),C=[{value:"A+",label:"A+"},{value:"A-",label:"A-"},{value:"B+",label:"B+"},{value:"B-",label:"B-"},{value:"O+",label:"O+"},{value:"O-",label:"O-"},{value:"AB+",label:"AB+"},{value:"AB-",label:"AB-"}],R=Q=>Q==null?null:J.find(pe=>pe.value===Q||pe.value===String(Q)||Q===0&&pe.value==="active"||Q===1&&pe.value==="inactive")||null,te=Q=>!Q||C.length===0?null:C.find(pe=>pe.value===Q||pe.label===Q)||null;f.useEffect(()=>{!t&&G?.data?.unique_id&&E&&K("patientUniqueId",G.data.unique_id)},[G,t,E,K]),f.useEffect(()=>{if(t&&j&&!w){if(K("firstName",j.first_name||""),K("lastName",j.last_name||""),K("email",j.email||""),K("patientUniqueId",j.patient_unique_id||""),setTimeout(()=>{K("contactNumber",j.contact_number||j.mobile_number||"")},0),K("dob",j.dob||""),K("gender",j.gender||""),d==="kiviCare_receptionist")K("clinic",[{value:m}]);else{const $=Array.isArray(j.clinic)?j.clinic.map(ce=>({value:ce.value??ce.id??ce.ID??"",label:ce.label??ce.name??""})):[];K("clinic",$)}const Q=R(j.status);K("status",Q);const pe=te(j.blood_group);K("bloodGroup",pe),K("address",j.address||""),K("city",j.city||""),K("country",j.country||""),K("postalCode",j.postal_code||""),j.patient_image_url&&K("patientImage",j.patient_image_url),j.patient_image_id&&K("patientImageId",j.patient_image_id),j.customFields&&typeof j.customFields=="object"&&Object.entries(j.customFields).forEach(([$,ce])=>{K(`custom_field_${$}`,ce)})}},[t,j,w,K]),f.useEffect(()=>{if(T){const Q=T?.response?.data?.message||r("You do not have permission to view this patient.","kivicare-clinic-management-system");Se.error(Q,{position:"top-right",autoClose:5e3}),A("/patient",{replace:!0})}},[T,A]);const ne=(Q,pe)=>{K(Q,pe.url||pe.image),K(`${Q}Id`,pe.id||pe.imageId)},Y=c("kiviPro"),q={firstName:{required:r("First name is required","kivicare-clinic-management-system"),minLength:{value:2,message:r("First name must be at least 2 characters","kivicare-clinic-management-system")}},lastName:{required:r("Last name is required","kivicare-clinic-management-system"),minLength:{value:2,message:r("Last name must be at least 2 characters","kivicare-clinic-management-system")}},email:{required:r("Email is required","kivicare-clinic-management-system"),pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:r("Invalid email address","kivicare-clinic-management-system")}},clinic:d!=="kiviCare_receptionist"&&d!=="kiviCare_clinic_admin"?{required:r("At least one clinic selection is required","kivicare-clinic-management-system"),validate:Q=>!Q||Array.isArray(Q)&&Q.length===0?r("At least one clinic must be selected","kivicare-clinic-management-system"):!0}:{},contactNumber:{required:r("Contact number is required","kivicare-clinic-management-system"),validate:Q=>Q?X(Q)||r("Please enter a valid Contact number","kivicare-clinic-management-system"):r("Contact number is required","kivicare-clinic-management-system")},status:{required:r("Status is required","kivicare-clinic-management-system")},dob:{required:r("Date of birth is required","kivicare-clinic-management-system"),validate:Q=>{const pe=new Date(Q),$=new Date;return pe.setHours(0,0,0,0),$.setHours(0,0,0,0),pe>$?r("Date of birth cannot be in the future","kivicare-clinic-management-system"):!0}},gender:{required:r("Gender is required","kivicare-clinic-management-system")}},B=async Q=>{if(ge(!0),M.length>0&&!(await H()).allValid){ge(!1);return}let pe=Q.clinic;d==="kiviCare_receptionist"||d==="kiviCare_clinic_admin"?pe=[{value:m}]:pe=Array.isArray(pe)?pe.map(De=>({value:De.value||De})):[];const $={};Object.keys(Q).forEach(De=>{if(De.startsWith("custom_field_")){const xe=De.replace("custom_field_","");$[xe]=Q[De]}});const ce={first_name:Q.firstName,last_name:Q.lastName,email:Q.email,mobile_number:Q.contactNumber,dob:Q.dob,status:Q.status?.value||Q.status,blood_group:Q.bloodGroup?.value||Q.bloodGroup,gender:Q.gender,profile_image:Q.patientImageId,patient_unique_id:Q.patientUniqueId,address:Q.address,city:Q.city,country:Q.country,postal_code:Q.postalCode,clinics:pe,customForm:F(),customFields:$};try{let De;t?(De=await N.mutateAsync({id:x,...ce}),Se.success(r("Patient updated successfully","kivicare-clinic-management-system"),{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0})):(De=await _.mutateAsync(ce),Se.success(r("Patient created successfully","kivicare-clinic-management-system"),{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0})),e||A(b?"/appointments/add":"/patient",{replace:!0,state:{NewPatientId:De.data.id}})}catch(De){console.error("Error saving patient:",De);const xe=De?.response?.data?.message||(t?r("Failed to update patient","kivicare-clinic-management-system"):r("Failed to create patient","kivicare-clinic-management-system"));Se.error(xe,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0})}finally{ge(!1)}},se=Q=>{console.log("Validation errors:",Q);const pe=Object.keys(Q)[0],$=document.getElementById(pe);$&&($.scrollIntoView({behavior:"smooth",block:"center"}),$.focus())};return t&&w?i.jsx(Fy,{}):t&&T?null:i.jsxs(i.Fragment,{children:[i.jsx(f.Activity,{mode:n?"hidden":"visible",children:i.jsxs("div",{className:"d-flex justify-content-between align-items-center gap-3 flex-wrap mb-4",children:[i.jsx(_i,{}),P&&i.jsx("div",{children:i.jsx(ei,{size:"sm"})})]})}),i.jsx("div",{className:"d-flex align-items-center justify-content-between flex-wrap row-gap-2 column-gap-3 mb-4",children:i.jsx("div",{className:"page-title",children:i.jsx("h6",{className:"m-0",children:e?r("My Profile","kivicare-clinic-management-system"):t?r("Edit Patient","kivicare-clinic-management-system"):r("Add Patient","kivicare-clinic-management-system")})})}),i.jsx("div",{className:"position-relative",children:i.jsxs("form",{onSubmit:le(B,se),className:"mb-0",children:[i.jsx("div",{className:"card",children:i.jsxs("div",{className:"card-body",children:[i.jsx("h6",{className:"mb-3",children:r("Basic Information","kivicare-clinic-management-system")}),i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-lg-4 d-flex align-items-center justify-content-center pt-5",children:i.jsx(ye,{name:"patientImage",control:ee,render:({field:Q})=>i.jsx(yl,{id:"patient-image-upload",name:"patientImage",label:r("Image","kivicare-clinic-management-system"),defaultImage:Q.value,defaultImageId:me("patientImageId"),onChange:pe=>ne("patientImage",pe),className:"",size:200})})}),i.jsx("div",{className:"col-lg-8",children:i.jsxs("div",{className:"row gy-4",children:[E&&i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{htmlFor:"patientUniqueId",className:"form-label",children:r("Patient Unique ID","kivicare-clinic-management-system")}),i.jsx("input",{type:"text",id:"patientUniqueId",className:`form-control ${re.patientUniqueId?"is-invalid":""}`,placeholder:r("Enter Patient Unique ID","kivicare-clinic-management-system"),...he("patientUniqueId"),disabled:t&&w}),re.patientUniqueId&&i.jsx("div",{className:"invalid-feedback d-block",children:re.patientUniqueId.message})]})}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{htmlFor:"firstName",className:"form-label",children:[r("First Name","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx("input",{type:"text",id:"firstName",className:`form-control ${re.firstName?"is-invalid":""}`,placeholder:r("Enter the First Name","kivicare-clinic-management-system"),...he("firstName",q.firstName),disabled:t&&w}),re.firstName&&i.jsx("div",{className:"invalid-feedback d-block",children:re.firstName.message})]})}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{htmlFor:"lastName",className:"form-label",children:[r("Last Name","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx("input",{type:"text",id:"lastName",className:`form-control ${re.lastName?"is-invalid":""}`,placeholder:r("Enter the Last Name","kivicare-clinic-management-system"),...he("lastName",q.lastName),disabled:t&&w}),re.lastName&&i.jsx("div",{className:"invalid-feedback d-block",children:re.lastName.message})]})}),Y&&d!=="kiviCare_receptionist"&&d!=="kiviCare_clinic_admin"&&i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{htmlFor:"clinic",className:"form-label",children:[r("Select Clinics","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx(ye,{name:"clinic",control:ee,rules:q.clinic,render:({field:Q})=>i.jsx(i.Fragment,{children:i.jsx(rn,{id:"clinic",loadOptions:D,value:Q.value,onChange:pe=>{Q.onChange(pe)},isMulti:!0,closeMenuOnSelect:!1,placeholder:r('eg "Mount Health Care"',"kivicare-clinic-management-system"),className:`react-select-box ${re.clinic?"is-invalid":""}`,classNamePrefix:"react-select",isDisabled:t&&w,dependencies:{},getOptionValue:pe=>pe?.value??pe?.id,getOptionLabel:pe=>pe?.label??pe?.name??pe?.clinic_name})})}),re.clinic&&i.jsx("div",{className:"invalid-feedback d-block",children:re.clinic.message})]})}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{htmlFor:"email",className:"form-label",children:[r("Email","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx("input",{type:"email",id:"email",className:`form-control ${re.email?"is-invalid":""}`,placeholder:r('eg "markavenue@gmail.com"',"kivicare-clinic-management-system"),...he("email",q.email),disabled:t&&w}),re.email&&i.jsx("div",{className:"invalid-feedback d-block",children:re.email.message})]})}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{htmlFor:"contactNumber",className:"form-label",children:[r("Contact Number","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx(ye,{name:"contactNumber",control:ee,rules:q.contactNumber,render:({field:Q})=>i.jsx(to,{defaultCountry:h,value:Q.value,onChange:Q.onChange,inputProps:{className:`form-control ${re.contactNumber?"is-invalid":""}`,placeholder:r("555-0123-4567","kivicare-clinic-management-system"),disabled:t&&w}})}),re.contactNumber&&i.jsx("div",{className:"invalid-feedback d-block",children:re.contactNumber.message})]})}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{htmlFor:"dob",className:"form-label",children:[r("DOB","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx(ye,{name:"dob",control:ee,rules:q.dob,render:({field:Q})=>i.jsx(Un,{id:"dob",className:`form-control ${re.dob?"is-invalid":""}`,value:Q.value?Zn(Q.value):"",onChange:pe=>{if(pe&&pe[0]){const $=pe[0],ce=`${$.getFullYear()}-${String($.getMonth()+1).padStart(2,"0")}-${String($.getDate()).padStart(2,"0")}`;Q.onChange(ce)}else Q.onChange("")},options:{dateFormat:xi(window.kc_frontend.date_format),maxDate:new Date,disableMobile:!0,locale:Wn()},placeholder:r("Select date of birth","kivicare-clinic-management-system"),disabled:t&&w})}),re.dob&&i.jsx("div",{className:"invalid-feedback d-block",children:re.dob.message})]})})]})}),i.jsx("div",{className:"col-lg-12",children:i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{htmlFor:"status",className:"form-label",children:[r("Status","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx(ye,{name:"status",control:ee,rules:q.status,render:({field:Q})=>i.jsx(ct,{id:"status",className:"react-select-box",classNamePrefix:"react-select",options:J,value:Q.value,onChange:Q.onChange,placeholder:r("Select Status","kivicare-clinic-management-system"),isSearchable:!1,styles:{menuPortal:pe=>({...pe,zIndex:9999})}})}),re.status&&i.jsx("div",{className:"invalid-feedback d-block",children:re.status.message})]})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{htmlFor:"bloodGroup",className:"form-label",children:r("Blood Group","kivicare-clinic-management-system")}),i.jsx(ye,{name:"bloodGroup",control:ee,rules:q.bloodGroup,render:({field:Q})=>i.jsx(ct,{id:"bloodGroup",className:"react-select-box",classNamePrefix:"react-select",options:C,value:Q.value,onChange:Q.onChange,placeholder:r("Select Blood Group","kivicare-clinic-management-system"),isSearchable:!1,styles:{menuPortal:pe=>({...pe,zIndex:9999})},isDisabled:t&&w})}),re.bloodGroup&&i.jsx("div",{className:"invalid-feedback d-block",children:re.bloodGroup.message})]})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[r("Gender","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsxs("div",{className:"d-flex align-items-center flex-wrap gap-3 form-control",children:[i.jsxs("div",{className:"form-check",children:[i.jsx("input",{className:`form-check-input ${re.gender?"is-invalid":""}`,type:"radio",name:"gender",id:"male",value:"male",...he("gender",q.gender),disabled:t&&w}),i.jsx("label",{className:"form-check-label",htmlFor:"male",children:r("Male","kivicare-clinic-management-system")})]}),i.jsxs("div",{className:"form-check",children:[i.jsx("input",{className:`form-check-input ${re.gender?"is-invalid":""}`,type:"radio",name:"gender",id:"female",value:"female",...he("gender",q.gender),disabled:t&&w}),i.jsx("label",{className:"form-check-label",htmlFor:"female",children:r("Female","kivicare-clinic-management-system")})]}),p&&i.jsxs("div",{className:"form-check",children:[i.jsx("input",{className:`form-check-input ${re.gender?"is-invalid":""}`,type:"radio",name:"gender",id:"other",value:"other",...he("gender",q.gender),disabled:t&&w}),i.jsx("label",{className:"form-check-label",htmlFor:"other",children:r("Other","kivicare-clinic-management-system")})]})]}),re.gender&&i.jsx("div",{className:"invalid-feedback d-block",children:re.gender.message})]})})]})})]}),i.jsxs("div",{className:"mt-5 pt-2",children:[i.jsx("h6",{className:"mb-3",children:r("Other Information","kivicare-clinic-management-system")}),i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{htmlFor:"address",className:"form-label",children:r("Address","kivicare-clinic-management-system")}),i.jsx("input",{type:"text",id:"address",className:`form-control ${re.address?"is-invalid":""}`,placeholder:r('eg "1234 Skin Care Ave, Suite 567, Dermatown, CA 90210"',"kivicare-clinic-management-system"),...he("address",q.address),disabled:t&&w}),re.address&&i.jsx("div",{className:"invalid-feedback d-block",children:re.address.message})]})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{htmlFor:"city",className:"form-label",children:r("City","kivicare-clinic-management-system")}),i.jsx("input",{type:"text",id:"city",className:`form-control ${re.city?"is-invalid":""}`,placeholder:r("Enter City Name","kivicare-clinic-management-system"),...he("city",q.city),disabled:t&&w}),re.city&&i.jsx("div",{className:"invalid-feedback d-block",children:re.city.message})]})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{htmlFor:"country",className:"form-label",children:r("Country","kivicare-clinic-management-system")}),i.jsx("input",{type:"text",id:"country",className:`form-control ${re.country?"is-invalid":""}`,placeholder:r("Enter Country Name","kivicare-clinic-management-system"),...he("country",q.country),disabled:t&&w}),re.country&&i.jsx("div",{className:"invalid-feedback d-block",children:re.country.message})]})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{htmlFor:"postalCode",className:"form-label",children:r("Postal Code","kivicare-clinic-management-system")}),i.jsx("input",{type:"text",id:"postalCode",className:`form-control ${re.postalCode?"is-invalid":""}`,placeholder:r("Enter Postal Code","kivicare-clinic-management-system"),...he("postalCode",q.postalCode),onInput:Q=>{Q.target.value=Q.target.value.replace(/[^0-9]/g,"")},disabled:t&&w}),re.postalCode&&i.jsx("div",{className:"invalid-feedback d-block",children:re.postalCode.message})]})})]})]})]})}),i.jsx(tf,{moduleType:"patient_module",control:ee,errors:re,setValue:K,watch:me}),Y&&M.length>0&&i.jsxs("div",{className:"mt-5 pt-2",children:[i.jsx("h6",{className:"mb-3",children:r("Custom Information","kivicare-clinic-management-system")}),M.map(Q=>i.jsx(_t,{className:"mb-4",children:i.jsxs(qa,{children:[i.jsx("h6",{className:"mb-3",children:Q.name?.text||Q.name}),i.jsx("div",{id:`custom-form-${Q.id}`,children:i.jsx(Ua,{ref:pe=>O.current[Q.id]=pe,fields:Q.fields,data:Q.form_data||{},readOnly:!1,formId:`form_${Q.id}`})})]})},Q.id))]}),i.jsxs("div",{className:"d-flex align-items-center justify-content-end flex-wrap gap-3",children:[P&&i.jsx(ei,{text:r("Cancel","kivicare-clinic-management-system"),variant:"secondary",showIcon:!1,disabled:ae||t&&w}),i.jsx("button",{type:"submit",className:"btn btn-primary",disabled:ae||t&&w,children:ae?i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),t?r("Updating...","kivicare-clinic-management-system"):r("Saving...","kivicare-clinic-management-system")]}):t?r("Update Patient","kivicare-clinic-management-system"):r("Save","kivicare-clinic-management-system")})]})]})})]})}const Ate=Object.freeze(Object.defineProperty({__proto__:null,default:Jp},Symbol.toStringTag,{value:"Module"})),Dte=()=>i.jsx(Jp,{isEditing:!0,isProfile:!0,hideBreadcrumbs:!0}),Rte=()=>{const{patientProfileId:t}=Yt();return i.jsx(Pw,{patientId:t,canEditEncounter:!0,canUpdateEncounter:!0})},Pte=()=>{const{patientProfileId:t}=Yt();return i.jsx(Ay,{hideBreadcrumbs:!0,patientId:t})},Mte=()=>{const{patientProfileId:t}=Yt();return i.jsx(Xp,{isEditing:!1,hideBreadcrumbs:!0,patientId:t})},Ite=()=>{const{patientProfileId:t}=Yt();return i.jsx(Xp,{isEditing:!0,hideBreadcrumbs:!0,patientId:t})},Ote=()=>{const{patientProfileId:t}=Yt();return i.jsx(nP,{readOnly:!0,hideBreadcrumbs:!0,patientId:t})},Fte=[Gn({path:"/patient",title:"Patients",outlet:_te,permissions:["patient_list"],meta:{description:"Patient management system",icon:"users"},children:[We({path:"",component:Tte,title:"All Patients",index:!0,permissions:["patient_list"],meta:{description:"List of all patients",breadcrumb:"All Patients"},skeleton:()=>i.jsx("div",{className:"container-fluid pb-0",children:i.jsx(_n,{columns:6,rows:5,showBreadcrumb:!0,showPageHeader:!0,showFilterBar:!0})})}),We({path:"add",component:Jp,title:"Add Patient",props:{isEditing:!1},permissions:["patient_add"],meta:{description:"Create a new patient",breadcrumb:"Add New"},skeleton:Fy}),We({path:"edit/:patientProfileId",component:Jp,title:"Edit Patient",props:{isEditing:!0},permissions:["patient_edit"],meta:{description:"Edit existing patient",breadcrumb:"Edit"},skeleton:Fy}),Gn({path:"profile/:patientProfileId",outlet:Ete,title:"Patient Profile",permissions:["patient_view","patient_profile"],meta:{description:"View patient profile and details",breadcrumb:"Profile"},children:[We({path:"",component:Dte,title:"Patient Profile",index:!0,permissions:["patient_view","patient_profile"],meta:{description:"Patient profile overview",breadcrumb:"Profile"},skeleton:uP}),We({path:"reports",component:Rte,title:"Patient Reports",permissions:["patient_view"],addons:["kiviPro"],meta:{description:"Patient medical reports",breadcrumb:"Reports"},skeleton:()=>i.jsx("div",{className:"container-fluid pb-0",children:i.jsx(_n,{columns:3,rows:5,showBreadcrumb:!1,showPageHeader:!0,showFilterBar:!1})})}),We({path:"appointments",component:Pte,title:"Patient Appointments",permissions:["appointment_list"],meta:{description:"Patient appointments list",breadcrumb:"Appointments"},skeleton:()=>i.jsx("div",{className:"container-fluid pb-0",children:i.jsx(_n,{columns:6,rows:5,showBreadcrumb:!1,showPageHeader:!0,showFilterBar:!1})})}),We({path:"appointments/add",component:Mte,title:"Add Appointment",permissions:["appointment_add"],meta:{description:"Create a new appointment for patient",breadcrumb:"Add Appointment"}}),We({path:"appointments/edit/:id",component:Ite,title:"Edit Appointment",permissions:["appointment_edit"],meta:{description:"Edit patient appointment",breadcrumb:"Edit Appointment"}}),We({path:"appointments/view/:id",component:Ote,title:"View Appointment",permissions:["appointment_view"],meta:{description:"View patient appointment details",breadcrumb:"View Appointment"}})]})]})],Lte=()=>{const t=Kn();return i.jsxs("div",{className:"patients-container",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center gap-3 flex-wrap mb-4",children:[i.jsx(_i,{}),i.jsx("div",{children:t.pathname!=="/patient-medical-report_id"&&i.jsx(ei,{size:"sm"})})]}),i.jsx(yo,{})]})},CC=({patientId:t=!1})=>{const e=Yt(),n=Yi(),{currentuserID:s}=mt();return n?t=s:!t&&e&&e.patientId&&(t=e.patientId),i.jsx(i.Fragment,{children:i.jsx(Pw,{patientId:t,canEditEncounter:!0,canUpdateEncounter:!0,showViewReport:!0})})},$te=[Gn({path:"/patient-medical-report_id",title:"Patient Medical Reports",outlet:Lte,permissions:["patient_report"],meta:{description:"Patient medical reports",icon:"ph ph-file",showInSidebar:!0},children:[We({path:"",component:CC,title:"All Patient Reports",index:!0,permissions:["patient_report"],meta:{description:"List of all patient medical reports",breadcrumb:"All Patient Reports"}}),We({path:"patient/:patientId",component:CC,title:"Patient Reports",index:!0,permissions:["patient_report"],meta:{description:"List of all patient medical reports for patient",breadcrumb:"Patient Reports"}})]})],Bte=()=>{const t=Kn();return i.jsxs("div",{className:"doctors-container",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center gap-3 flex-wrap mb-4",children:[i.jsx(_i,{}),i.jsx("div",{children:t.pathname!=="/doctor"&&i.jsx(ei,{size:"sm"})})]}),i.jsx(fs,{})]})},Ly=()=>i.jsx("div",{className:"container-fluid pb-0",children:i.jsx("div",{className:"route-container",children:i.jsx("div",{className:"w-100",children:i.jsxs("div",{className:"patients-container",children:[i.jsx(wl,{titleWidth:"120px"}),i.jsx("div",{className:"d-flex gap-4",children:i.jsxs("div",{className:"kc-doctor-profile flex-fill",children:[i.jsx("div",{className:"card",children:i.jsxs("div",{className:"card-body",children:[i.jsx(S,{width:"180px",height:"1.1rem",className:"mb-3"}),i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-lg-4 d-flex align-items-center justify-content-center pt-5",children:i.jsx(S,{width:"200px",height:"200px",margin:"0 auto",style:{borderRadius:"50%"}})}),i.jsx("div",{className:"col-lg-8",children:i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-md-6",children:i.jsx(Ne,{labelWidth:"90px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Ne,{labelWidth:"85px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Ne,{labelWidth:"45px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Ne,{labelWidth:"110px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Ne,{labelWidth:"130px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Ne,{labelWidth:"35px"})})]})}),i.jsx("div",{className:"col-lg-12",children:i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsx(Ne,{labelWidth:"110px"})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsx(Ne,{labelWidth:"140px"})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsx(Ne,{labelWidth:"90px"})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsx(Ne,{labelWidth:"50px"})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsx(Ne,{labelWidth:"100px",inputHeight:"60px"})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsx(Ne,{labelWidth:"80px",inputHeight:"100px"})})]})})]}),i.jsxs("div",{className:"my-5 py-3",children:[i.jsx(S,{width:"160px",height:"1.1rem",className:"mb-3"}),i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsx(Ne,{labelWidth:"60px"})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsx(Ne,{labelWidth:"35px"})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsx(Ne,{labelWidth:"55px"})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsx(Ne,{labelWidth:"85px"})})]})]}),i.jsxs("div",{className:"my-5 py-3",children:[i.jsx(S,{width:"140px",height:"1.1rem",className:"mb-3"}),i.jsx("div",{className:"table-responsive",children:i.jsxs("table",{className:"table table-bordered rounded",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{children:i.jsx(S,{width:"60px",height:"1rem"})}),i.jsx("th",{children:i.jsx(S,{width:"50px",height:"1rem"})}),i.jsx("th",{children:i.jsx(S,{width:"120px",height:"1rem"})}),i.jsx("th",{children:i.jsx(S,{width:"40px",height:"1rem"})}),i.jsx("th",{children:i.jsx(S,{width:"55px",height:"1rem"})})]})}),i.jsxs("tbody",{children:[i.jsxs("tr",{children:[i.jsx("td",{children:i.jsx(S,{width:"20px",height:"1rem"})}),i.jsx("td",{children:i.jsx(S,{width:"80px",height:"1rem"})}),i.jsx("td",{children:i.jsx(S,{width:"150px",height:"1rem"})}),i.jsx("td",{children:i.jsx(S,{width:"50px",height:"1rem"})}),i.jsx("td",{children:i.jsx(S,{width:"60px",height:"1rem"})})]}),i.jsxs("tr",{children:[i.jsx("td",{children:i.jsx(S,{width:"20px",height:"1rem"})}),i.jsx("td",{children:i.jsx(S,{width:"90px",height:"1rem"})}),i.jsx("td",{children:i.jsx(S,{width:"140px",height:"1rem"})}),i.jsx("td",{children:i.jsx(S,{width:"50px",height:"1rem"})}),i.jsx("td",{children:i.jsx(S,{width:"60px",height:"1rem"})})]})]})]})})]})]})}),i.jsxs("div",{className:"d-flex align-items-center justify-content-end flex-wrap gap-3 mt-4",children:[i.jsx(st,{width:"80px",height:"38px"}),i.jsx(st,{width:"110px",height:"38px"})]})]})})]})})})}),eg=()=>i.jsxs("div",{className:"doctor-session-module",children:[i.jsx(S,{width:"200px",height:"1.5rem",className:"mb-4"}),i.jsx("div",{className:"mb-5",children:i.jsx("div",{className:"card",children:i.jsx("div",{className:"card-body",children:i.jsxs("div",{className:"row gy-3",children:[i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsx(Ne,{labelWidth:"100px",inputHeight:"60px"})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsx(Ne,{labelWidth:"100px",inputHeight:"60px"})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsx(Ne,{labelWidth:"130px"})})]})})})}),i.jsx("div",{className:"mb-3",children:i.jsx(S,{width:"120px",height:"1rem"})}),i.jsxs("div",{className:"row row-cols-lg-2 row-cols-1 g-4",children:[i.jsx("div",{className:"col",children:i.jsx("div",{className:"card h-100 mb-0",children:i.jsx("div",{className:"card-body",children:i.jsxs("div",{className:"session-box",children:[i.jsxs("div",{className:"d-flex align-items-center gap-2 justify-content-between flex-wrap mb-3",children:[i.jsx(S,{width:"80px",height:"1.1rem"}),i.jsx(S,{width:"40px",height:"20px",style:{borderRadius:"12px"}})]}),i.jsxs("div",{className:"mb-4",children:[i.jsx(S,{width:"100px",height:"1rem",className:"mb-2"}),i.jsxs("div",{className:"row gy-2",children:[i.jsx("div",{className:"col-6",children:i.jsx(Ne,{labelWidth:"60px"})}),i.jsx("div",{className:"col-6",children:i.jsx(Ne,{labelWidth:"50px"})})]})]}),i.jsxs("div",{className:"mb-3",children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-2",children:[i.jsx(S,{width:"60px",height:"1rem"}),i.jsx(S,{width:"80px",height:"30px",style:{borderRadius:"4px"}})]}),i.jsx("div",{className:"border rounded p-2 mb-2",children:i.jsxs("div",{className:"row gy-2",children:[i.jsx("div",{className:"col-5",children:i.jsx(Ne,{labelWidth:"50px"})}),i.jsx("div",{className:"col-5",children:i.jsx(Ne,{labelWidth:"45px"})}),i.jsx("div",{className:"col-2 d-flex align-items-end",children:i.jsx(S,{width:"30px",height:"30px",style:{borderRadius:"4px"}})})]})})]})]})})})}),i.jsx("div",{className:"col",children:i.jsx("div",{className:"card h-100 mb-0",children:i.jsx("div",{className:"card-body",children:i.jsxs("div",{className:"session-box",children:[i.jsxs("div",{className:"d-flex align-items-center gap-2 justify-content-between flex-wrap mb-3",children:[i.jsx(S,{width:"90px",height:"1.1rem"}),i.jsx(S,{width:"40px",height:"20px",style:{borderRadius:"12px"}})]}),i.jsxs("div",{className:"mb-4",children:[i.jsx(S,{width:"100px",height:"1rem",className:"mb-2"}),i.jsxs("div",{className:"row gy-2",children:[i.jsx("div",{className:"col-6",children:i.jsx(Ne,{labelWidth:"60px"})}),i.jsx("div",{className:"col-6",children:i.jsx(Ne,{labelWidth:"50px"})})]})]}),i.jsxs("div",{className:"mb-3",children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-2",children:[i.jsx(S,{width:"60px",height:"1rem"}),i.jsx(S,{width:"80px",height:"30px",style:{borderRadius:"4px"}})]}),i.jsx("div",{className:"border rounded p-2 mb-2",children:i.jsxs("div",{className:"row gy-2",children:[i.jsx("div",{className:"col-5",children:i.jsx(Ne,{labelWidth:"50px"})}),i.jsx("div",{className:"col-5",children:i.jsx(Ne,{labelWidth:"45px"})}),i.jsx("div",{className:"col-2 d-flex align-items-end",children:i.jsx(S,{width:"30px",height:"30px",style:{borderRadius:"4px"}})})]})}),i.jsx("div",{className:"border rounded p-2 mb-2",children:i.jsxs("div",{className:"row gy-2",children:[i.jsx("div",{className:"col-5",children:i.jsx(Ne,{labelWidth:"50px"})}),i.jsx("div",{className:"col-5",children:i.jsx(Ne,{labelWidth:"45px"})}),i.jsx("div",{className:"col-2 d-flex align-items-end",children:i.jsx(S,{width:"30px",height:"30px",style:{borderRadius:"4px"}})})]})})]})]})})})}),i.jsx("div",{className:"col",children:i.jsx("div",{className:"card h-100 mb-0",children:i.jsx("div",{className:"card-body",children:i.jsxs("div",{className:"session-box",children:[i.jsxs("div",{className:"d-flex align-items-center gap-2 justify-content-between flex-wrap mb-3",children:[i.jsx(S,{width:"85px",height:"1.1rem"}),i.jsx(S,{width:"40px",height:"20px",style:{borderRadius:"12px"}})]}),i.jsxs("div",{className:"mb-4",children:[i.jsx(S,{width:"100px",height:"1rem",className:"mb-2"}),i.jsxs("div",{className:"row gy-2",children:[i.jsx("div",{className:"col-6",children:i.jsx(Ne,{labelWidth:"60px"})}),i.jsx("div",{className:"col-6",children:i.jsx(Ne,{labelWidth:"50px"})})]})]}),i.jsx("div",{className:"mb-3",children:i.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-2",children:[i.jsx(S,{width:"60px",height:"1rem"}),i.jsx(S,{width:"80px",height:"30px",style:{borderRadius:"4px"}})]})})]})})})}),i.jsx("div",{className:"col",children:i.jsx("div",{className:"card h-100 mb-0",children:i.jsx("div",{className:"card-body",children:i.jsxs("div",{className:"session-box",children:[i.jsxs("div",{className:"d-flex align-items-center gap-2 justify-content-between flex-wrap mb-3",children:[i.jsx(S,{width:"75px",height:"1.1rem"}),i.jsx(S,{width:"40px",height:"20px",style:{borderRadius:"12px"}})]}),i.jsxs("div",{className:"mb-4",children:[i.jsx(S,{width:"100px",height:"1rem",className:"mb-2"}),i.jsxs("div",{className:"row gy-2",children:[i.jsx("div",{className:"col-6",children:i.jsx(Ne,{labelWidth:"60px"})}),i.jsx("div",{className:"col-6",children:i.jsx(Ne,{labelWidth:"50px"})})]})]}),i.jsx("div",{className:"mb-3",children:i.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-2",children:[i.jsx(S,{width:"60px",height:"1rem"}),i.jsx(S,{width:"80px",height:"30px",style:{borderRadius:"4px"}})]})})]})})})})]}),i.jsxs("div",{className:"d-flex justify-content-end mt-5",children:[i.jsx(st,{width:"80px",height:"38px",className:"me-3"}),i.jsx(st,{width:"120px",height:"38px"})]})]}),tg=()=>i.jsxs("div",{className:"position-relative",children:[i.jsx("div",{className:"card",children:i.jsxs("div",{className:"card-body",children:[i.jsx(S,{width:"140px",height:"1.1rem",className:"mb-3"}),i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-lg-4",children:i.jsx("div",{className:"form-group",children:i.jsx(S,{width:"100%",height:"200px",style:{borderRadius:"4px"}})})}),i.jsx("div",{className:"col-lg-8",children:i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-md-6",children:i.jsx(Ne,{labelWidth:"120px",inputHeight:"60px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Ne,{labelWidth:"110px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Ne,{labelWidth:"60px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Ne,{labelWidth:"120px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Ne,{labelWidth:"50px",inputHeight:"60px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Ne,{labelWidth:"55px",inputHeight:"60px"})})]})}),i.jsx("div",{className:"col-lg-12",children:i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsx(Ne,{labelWidth:"70px"})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsx(Ne,{labelWidth:"50px"})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsx(Ne,{labelWidth:"200px"})})]})})]})]})}),i.jsxs("div",{className:"d-flex align-items-center justify-content-end flex-wrap gap-3 mt-4",children:[i.jsx(st,{width:"80px",height:"38px"}),i.jsx(st,{width:"110px",height:"38px"})]})]}),qte=({reviewCount:t=2})=>i.jsxs("div",{className:"review-list",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[i.jsx(S,{width:"120px",height:"1.25rem"}),i.jsx(S,{width:"140px",height:"2rem",style:{borderRadius:"4px"}})]}),i.jsx("div",{className:"position-relative",children:Array.from({length:t}).map((e,n)=>i.jsx("div",{className:"card mb-3 border-0 shadow-sm",children:i.jsxs("div",{className:"card-body p-3",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-start mb-2",children:[i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsx("div",{className:"d-flex gap-1",children:Array.from({length:5}).map((s,a)=>i.jsx(S,{width:"1rem",height:"1rem"},a))}),i.jsx(S,{width:"100px",height:"0.875rem"})]}),i.jsx(S,{width:"80px",height:"0.875rem"})]}),i.jsx(S,{width:"100%",height:"1rem",className:"mb-1"}),i.jsx(S,{width:"70%",height:"1rem"})]})},n))}),i.jsx("div",{className:"d-flex justify-content-center mt-3",children:i.jsx("div",{className:"d-flex gap-1",children:Array.from({length:5}).map((e,n)=>i.jsx(S,{width:"2.5rem",height:"2.5rem",style:{borderRadius:"4px"}},n))})})]}),Hte=t=>{const e=Math.floor((new Date-new Date(t))/1e3);let n=Math.floor(e/31536e3);return n>1?n+r(" years ago","kivicare-clinic-management-system"):n===1?r("1 year ago","kivicare-clinic-management-system"):(n=Math.floor(e/2592e3),n>1?n+r(" months ago","kivicare-clinic-management-system"):n===1?r("1 month ago","kivicare-clinic-management-system"):(n=Math.floor(e/86400),n>1?n+r(" days ago","kivicare-clinic-management-system"):n===1?r("1 day ago","kivicare-clinic-management-system"):(n=Math.floor(e/3600),n>1?n+r(" hours ago","kivicare-clinic-management-system"):n===1?r("1 hour ago","kivicare-clinic-management-system"):(n=Math.floor(e/60),n>1?n+r(" minutes ago","kivicare-clinic-management-system"):n===1?r("1 minute ago","kivicare-clinic-management-system"):e<10?r("just now","kivicare-clinic-management-system"):Math.floor(e)+r(" seconds ago","kivicare-clinic-management-system")))))},zte=He.memo(({show:t,onHide:e,doctorId:n})=>{const[s,a]=f.useState("date"),[l,o]=f.useState(1),{data:c,isLoading:d,isFetching:m}=XR({doctor_id:n,page:l,per_page:10,sort_by:s},{enabled:t&&!!n,keepPreviousData:!0,staleTime:300*1e3,cacheTime:600*1e3,refetchOnWindowFocus:!1,refetchOnMount:!1,refetchOnReconnect:!1});f.useEffect(()=>{o(1)},[s,n]);const u=c?.data?.reviews||[],h=c?.data?.pagination||{},p=c?.data?.doctor_data,g=parseFloat(c?.data?.avg_rating||0),v=parseInt(c?.data?.total_reviews||0),x=f.useCallback(T=>{s!==T&&(a(T),o(1))},[s]),y=f.useCallback(T=>{o(T)},[]),b=f.useCallback(T=>[...Array(5)].map((j,D)=>i.jsx("i",{className:`${D<T?"ph-fill ph-star text-warning":"ph ph-star text-muted"} fs-4`},D)),[]),k=f.useMemo(()=>i.jsxs("div",{className:"review-header d-flex gap-4 align-items-start mb-4 justify-content-between",children:[i.jsx("div",{className:"doctor-profile",children:i.jsx(dn,{profileUrl:p?.profileImage,name:p?.name,email:p?.email,variant:"info",size:"lg"})}),i.jsx("div",{className:"rating-summary",children:v>0?i.jsxs("div",{className:"d-flex align-items-center gap-3 mb-3",children:[i.jsx("h2",{className:"mb-0",children:g.toFixed(1)}),i.jsxs("div",{children:[b(Math.round(g)),i.jsxs("div",{className:"text-muted",children:[r("Based on","kivicare-clinic-management-system")," ",v," ",r("reviews","kivicare-clinic-management-system")]})]})]}):i.jsx("div",{className:"text-muted",children:r("No average review found.","kivicare-clinic-management-system")})})]}),[p,g,v,b]),w=f.useMemo(()=>d&&!c?i.jsx(qte,{}):!d&&u.length===0?i.jsxs("div",{className:"text-center py-4 border-start border-end",children:[i.jsx("i",{className:"ph ph-chat-centered-text fs-1 text-muted mb-3 d-block"}),i.jsx("p",{className:"text-muted",children:r("No reviews found","kivicare-clinic-management-system")})]}):i.jsxs("div",{className:"review-list",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[i.jsxs("h5",{className:"mb-0",children:[r("Reviews","kivicare-clinic-management-system")," (",v||0,")"]}),i.jsxs("select",{className:"form-select form-select-sm",style:{width:"auto"},value:s,onChange:T=>x(T.target.value),children:[i.jsx("option",{value:"date",children:r("Most Recent","kivicare-clinic-management-system")}),i.jsx("option",{value:"rating_high",children:r("Highest Rated","kivicare-clinic-management-system")}),i.jsx("option",{value:"rating_low",children:r("Lowest Rated","kivicare-clinic-management-system")})]})]}),i.jsxs("div",{className:"position-relative",children:[i.jsx("div",{className:`${m?"opacity-50":""}`,style:{transition:"opacity 0.2s ease"},children:u.map(T=>i.jsx(_t,{className:"mb-3 border-0 shadow-sm",children:i.jsxs(_t.Body,{className:"p-3",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-start mb-2",children:[i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsx("div",{children:b(T.rating)}),i.jsxs("small",{className:"text-muted",children:[r("by","kivicare-clinic-management-system")," ",i.jsx("strong",{children:T.patient_name})]})]}),i.jsx("small",{className:"text-muted",children:Hte(T.created_at)})]}),T.review_text&&i.jsx("p",{className:"mb-0 text-dark",children:T.review_text})]})},T.id))}),m&&i.jsx("div",{className:"position-absolute top-0 start-0 w-100 h-100 d-flex align-items-center justify-content-center",children:i.jsx(Ng,{animation:"border",variant:"secondary",size:"sm"})})]}),h?.total_pages>1&&i.jsx("div",{className:"d-flex justify-content-center mt-3",children:i.jsxs(Rl,{size:"sm",children:[i.jsx(Rl.First,{onClick:()=>y(1),disabled:l===1}),i.jsx(Rl.Prev,{onClick:()=>y(l-1),disabled:l===1}),[...Array(h.total_pages)].map((T,j)=>{const D=j+1;return D===1||D===h.total_pages||D>=l-1&&D<=l+1?i.jsx(Rl.Item,{active:D===l,onClick:()=>y(D),children:D},D):D===l-2||D===l+2?i.jsx(Rl.Ellipsis,{},D):null}),i.jsx(Rl.Next,{onClick:()=>y(l+1),disabled:l===h.total_pages}),i.jsx(Rl.Last,{onClick:()=>y(h.total_pages),disabled:l===h.total_pages})]})})]}),[d,m,u,s,v,h,l,x,y,b,c]);return i.jsxs(lt,{show:t,onHide:e,size:"lg",backdrop:"static",centered:!0,children:[i.jsxs(lt.Header,{children:[i.jsx(lt.Title,{children:r("Doctor Reviews","kivicare-clinic-management-system")}),i.jsx("button",{type:"button",className:"btn btn-link p-0",onClick:e,"aria-label":"Close",children:i.jsx("i",{className:"ph ph-x-circle h4 mb-0 icon-color fw-normal"})})]}),i.jsxs(lt.Body,{className:"p-4",children:[k,w]})]})}),Vte=()=>{const[t,e]=f.useState(!1),[n,s]=f.useState(null),[a,l]=f.useState([]),[o,c]=f.useState([]),[d,m]=f.useState(!1),u=f.useRef(null),h=Xn(),p=Jn(),g={page:1,perPage:10,search:"",date:"",clinic:"",specialization:"",status:"",orderBy:"",order:""},[v,x]=f.useState(g),[y,b]=f.useState(""),{isAddonActive:k,hasCapability:w,userRole:T,defaultClinicId:j}=mt(),D=Hee(),_=zee(),N=Uee(),A=Wee(),P=Kee(),E=Vee(),I=k("kiviPro"),{data:M,isLoading:O}=Ha("specialization");f.useMemo(()=>M?.data?M.data.map(Pe=>{let Ue="";return typeof Pe=="string"?Ue=Pe:typeof Pe=="object"&&Pe!==null&&(Ue=Pe.label||Pe.name||""),{value:Ue,label:Ue}}):[],[M]);const F=Ga(y,500);He.useEffect(()=>{x(Pe=>({...Pe,search:F,page:1}))},[F]);const H=Pe=>{if(Pe.length>0){const{id:Ue,desc:Je}=Pe[0],et={id:"id",name:"name",status:"status"};x(Be=>({...Be,orderby:et[Ue]||Ue,order:Je?"desc":"asc",page:1}))}else x(Ue=>({...Ue,orderby:"",order:"",page:1}))},G=ze(),z=async({page:Pe,per_page:Ue,search:Je})=>{try{const et={dataType:"clinicList",page:Pe,per_page:Ue,search:Je},Be=await G.fetchQuery({queryKey:pt.list(et),queryFn:()=>Dt.getStaticData(et),staleTime:300*1e3}),ke=Be.data.map(_e=>({value:_e.id,label:_e.label||_e.name}));return l(_e=>[..._e,...ke]),Be}catch(et){return console.error("Error loading clinics:",et),{data:[],pagination:{has_more:!1}}}},ie=f.useMemo(()=>{const Pe=Object.fromEntries(Object.entries(v).filter(([Ue,Je])=>Je!==""&&Je!==null&&Je!==void 0));return T==="clinic_admin"&&j&&!Pe.clinic&&!Pe.id&&(Pe.clinic=j),Pe},[v,T,j]),{data:W,isLoading:ge,error:ae,refetch:U}=Mw(ie),X=[{value:"0",label:r("Active","kivicare-clinic-management-system")},{value:"1",label:r("Inactive","kivicare-clinic-management-system")}],J=W?.data?.doctors||[],he=W?.data?.pagination||{total:0,lastPage:1,perPage:10,currentPage:1},le=async({page:Pe,per_page:Ue,search:Je})=>{try{const et={dataType:"staticData",staticDataType:"staticDataWithLabel",type:"specialization",page:Pe,per_page:Ue,search:Je},Be=await G.fetchQuery({queryKey:pt.list(et),queryFn:()=>Dt.getStaticData(et),staleTime:300*1e3}),ke=Be.data.map(_e=>({value:_e.id,label:_e.label||_e.name}));return c(_e=>[..._e,...ke]),Be.data.map(_e=>{let Ye="",tt="";return typeof _e=="string"?(Ye=_e,tt=_e):typeof _e=="object"&&_e!==null&&(Ye=_e.label||_e.name||"",tt=_e.id??_e.name??Ye),{value:tt,label:Ye}})}catch(et){return console.error("Error loading Specialties:",et),{data:[],pagination:{has_more:!1}}}},ee=Ln(),me=f.useMemo(()=>[ee.accessor("id",{id:"id",enableSorting:!0,header:()=>r("ID","kivicare-clinic-management-system"),cell:Pe=>i.jsx("div",{className:"font-weight-medium",children:Pe.getValue()})}),ee.accessor("name",{id:"name",enableSorting:!0,header:()=>r("Doctor","kivicare-clinic-management-system"),cell:Pe=>i.jsx(dn,{profileUrl:Pe.row.original.doctor_image_url,name:Pe.row.original.name,email:Pe.row.original.email||"",fallbackText:"DR",variant:"primary",size:"md",nameLabel:r("Doctor","kivicare-clinic-management-system")})}),...I&&!h&&!p?[ee.accessor("clinicNameArray",{id:"clinic_name",header:()=>r("Clinic","kivicare-clinic-management-system"),enableSorting:!1,cell:Pe=>{const Ue=Pe.row.original.clinics||[];return i.jsx("div",{children:Ue.length>0?i.jsxs("div",{className:"d-flex flex-wrap gap-1",children:[Ue.slice(0,2).map((Je,et)=>i.jsx(Zp,{trigger:i.jsx("span",{className:"badge bg-info-subtle text-info cursor-pointer",children:Je.clinic_name}),children:i.jsx(Am,{avatar:Je.clinic_image_url,name:Je.clinic_name,email:Je.clinic_email,phone:Je.clinic_contact_number,address:Je.clinic_address,fallbackIcon:"ph-hospital"})},et)),Ue.length>2&&i.jsx(Zp,{trigger:i.jsxs("span",{className:"badge bg-secondary-subtle text-secondary cursor-pointer",children:["+",Ue.length-2]}),children:i.jsxs("div",{className:"p-2",style:{maxHeight:"400px",overflowY:"auto"},children:[i.jsx("div",{className:"mb-2 pb-2 border-bottom",children:i.jsx("span",{className:"text-secondary text-uppercase fw-semibold",style:{fontSize:"0.75rem"},children:r("More Clinics","kivicare-clinic-management-system")})}),i.jsx("div",{className:"d-flex flex-column gap-3",children:Ue.slice(2).map((Je,et)=>i.jsx("div",{className:et!==0?"pt-3 border-top":"",children:i.jsx(Am,{avatar:Je.clinic_image_url,name:Je.clinic_name,email:Je.clinic_email,phone:Je.clinic_contact_number,address:Je.clinic_address,fallbackIcon:"ph-hospital"})},et))})]})})]}):i.jsx("span",{className:"text-muted",children:""})})}})]:[],ee.accessor("mobile_number",{id:"mobile_number",header:()=>r("Mobile Number","kivicare-clinic-management-system"),cell:Pe=>i.jsx("div",{children:i.jsx("span",{children:Pe.row.original.mobile_number||""})})}),ee.accessor("specialization",{id:"specialization",enableSorting:!1,header:()=>r("Specialization","kivicare-clinic-management-system"),cell:Pe=>{const Ue=Pe.row.original.specialties||[];return i.jsx("div",{children:Ue.length>0?i.jsxs("div",{className:"d-flex flex-wrap gap-1",children:[Ue.slice(0,2).map((Je,et)=>i.jsx("span",{className:"badge bg-info-subtle text-info",children:Je.label},et)),Ue.length>2&&i.jsx(Qe,{placement:"top",overlay:Je=>i.jsx(ut,{id:`tooltip-specialization-${Pe.row.original.id}`,...Je,children:Ue.slice(2).map(et=>et.label).join(", ")}),children:i.jsxs("span",{className:"badge bg-secondary-subtle text-secondary cursor-pointer",children:["+",Ue.length-2]})})]}):i.jsx("span",{className:"text-muted",children:""})})}}),ee.accessor("status",{header:()=>r("Status","kivicare-clinic-management-system"),enableSorting:!0,cell:Pe=>{const Ue=Number(Pe.getValue()),Je=Pe.row.original,et=()=>{const Be=Ue===1?0:1;kt({title:r("Update Status?","kivicare-clinic-management-system"),text:Pi(r("Are you sure you want to change the status of <strong>%s</strong> to %s?","kivicare-clinic-management-system"),Je.name,Be===1?r("Inactive","kivicare-clinic-management-system"):r("Active","kivicare-clinic-management-system")),icon:"ph-warning",confirmButtonText:r("Yes, update","kivicare-clinic-management-system"),cancelButtonText:r("No, cancel","kivicare-clinic-management-system")}).then(ke=>{ke.isConfirmed&&(yt({title:r("Updating Status...","kivicare-clinic-management-system"),text:r("Please wait...","kivicare-clinic-management-system")}),A.mutate({ids:[Je.id],status:Be},{onSuccess:()=>{Tt({title:r("Status Updated","kivicare-clinic-management-system"),text:r("Doctor status has been updated successfully.","kivicare-clinic-management-system")})},onError:_e=>{rt({title:r("Error","kivicare-clinic-management-system"),text:_e.message||r("Failed to update status.","kivicare-clinic-management-system")})}}))})};return w("doctor_edit")?i.jsxs("div",{className:"form-check form-switch",children:[i.jsx("input",{className:"form-check-input",type:"checkbox",role:"switch",id:`doctor-status-${Je.id}`,checked:Ue===0,onChange:et}),i.jsx("label",{className:"form-check-label",htmlFor:`doctor-status-${Je.id}`,children:i.jsx("span",{className:`badge ${Ue===0?"bg-success-subtle text-success":"bg-danger-subtle text-danger"}`,children:Ue===0?r("Active","kivicare-clinic-management-system"):r("Inactive","kivicare-clinic-management-system")})})]}):i.jsx("span",{className:`badge ${Ue===0?"bg-success-subtle text-success":"bg-danger-subtle text-danger"} px-3 py-2`,children:Ue===0?r("Active","kivicare-clinic-management-system"):r("Inactive","kivicare-clinic-management-system")})}}),...w("doctor_edit")||w("patient_review_get")||w("doctor_resend_credential")||w("doctor_session")||w("doctor_service")||w("doctor_delete")?[ee.accessor("actions",{header:()=>r("Action","kivicare-clinic-management-system"),enableSorting:!1,cell:Pe=>{const Ue=Je=>et=>i.jsx(ut,{id:`tooltip-${Pe.cell.row.original.id}-${Je}`,...et,children:Je});return i.jsxs("div",{className:"d-flex align-items-center gap-3",children:[w("doctor_edit")&&i.jsx(Qe,{placement:"top",overlay:Ue(r("Edit Doctor","kivicare-clinic-management-system")),children:i.jsx(ht,{to:`/doctor/edit/${Pe.cell.row.original.id}`,className:"btn btn-link text-success fs-5 p-0",children:i.jsx("i",{className:"ph ph-pencil-simple-line"})})}),w("patient_review_get")&&i.jsx(Qe,{placement:"top",overlay:Ue(r("View Reviews","kivicare-clinic-management-system")),children:i.jsx("button",{className:"btn btn-link text-primary fs-5 p-0",onClick:()=>{s(Pe.cell.row.original.id),e(!0)},children:i.jsx("i",{className:"ph ph-star"})})}),w("doctor_edit")&&i.jsx(Qe,{placement:"top",overlay:Ue(r("Resend Credentials","kivicare-clinic-management-system")),children:i.jsx("button",{className:"btn btn-link text-primary fs-5 p-0",onClick:()=>re(Pe.cell.row.original.id,Pe.cell.row.original.name),children:i.jsx("i",{className:"ph ph-shield-check"})})}),w("doctor_session")&&i.jsx(Qe,{placement:"top",overlay:Ue(r("View Doctor Sessions","kivicare-clinic-management-system")),children:i.jsx(ht,{to:`/doctor/${Pe.cell.row.original.id}/sessions`,className:"btn btn-link text-info fs-5 p-0",children:i.jsx("i",{className:"ph ph-calendar-plus"})})}),w("doctor_service")&&i.jsx(Qe,{placement:"top",overlay:Ue(r("Add Service","kivicare-clinic-management-system")),children:i.jsx(ht,{to:`/doctor/${Pe.cell.row.original.id}/add-service`,className:"btn btn-link text-warning fs-5 p-0",children:i.jsx("i",{className:"ph ph-plus-square"})})}),w("doctor_delete")&&i.jsx(Qe,{placement:"top",overlay:Ue(r("Delete","kivicare-clinic-management-system")),children:i.jsx("button",{className:"btn btn-link text-danger fs-5 p-0",onClick:()=>K(Pe.cell.row.original.id),children:i.jsx("i",{className:"ph ph-trash"})})})]})}})]:[]],[w]),K=Pe=>{kt({title:r("Delete Doctor?","kivicare-clinic-management-system"),text:r("You're about to delete this doctor.<br>This action cannot be undone.","kivicare-clinic-management-system"),icon:"ph-warning",confirmButtonText:r("Delete permanently","kivicare-clinic-management-system"),cancelButtonText:r("Keep doctor","kivicare-clinic-management-system"),confirmButtonClass:"btn-danger"}).then(Ue=>{Ue.isConfirmed&&(yt({title:r("Deleting Doctor...","kivicare-clinic-management-system"),text:r("Please wait while we remove the selected doctor.<br>This won't take long.","kivicare-clinic-management-system")}),D.mutate(Pe,{onSuccess:()=>{Tt({title:r("Doctor Deleted","kivicare-clinic-management-system"),text:r("Doctor has been deleted.","kivicare-clinic-management-system"),confirmButtonText:r("Back to doctors","kivicare-clinic-management-system")})},onError:Je=>{rt({title:r("Error!","kivicare-clinic-management-system"),text:Je.message||r("Failed to delete doctor.","kivicare-clinic-management-system")})}}))})},re=(Pe,Ue)=>{kt({title:r("Resend Credentials?","kivicare-clinic-management-system"),text:Pi(r("Are you sure you want to resend credentials to %s?","kivicare-clinic-management-system"),Ue),icon:"ph-question",confirmButtonText:r("Yes, resend!","kivicare-clinic-management-system"),cancelButtonText:r("Cancel","kivicare-clinic-management-system"),confirmButtonClass:"btn-primary"}).then(Je=>{Je.isConfirmed&&E.mutate(Pe,{onSuccess:()=>{Tt({title:r("Credentials Sent!","kivicare-clinic-management-system"),text:r("Doctor credentials have been resent successfully.","kivicare-clinic-management-system")})},onError:et=>{rt({title:r("Error!","kivicare-clinic-management-system"),text:et.message||r("Failed to resend credentials.","kivicare-clinic-management-system")})}})})},oe=Pe=>{b(Pe.target.value)},C=()=>{x(g),l([]),c([]),b("")},R=f.useMemo(()=>["search","id","doctorName","clinic","specialization","doctorAddress","status"].some(Ue=>{const Je=v[Ue];return Je!=null&&Je!==""})||y!=="",[v,y]),te=async Pe=>{try{yt({title:r("Exporting...","kivicare-clinic-management-system"),text:r("Please wait. This may take a few seconds.","kivicare-clinic-management-system")});const Ue={format:Pe};v.search&&(Ue.search=v.search),v.clinic&&(Ue.clinic_id=v.clinic),v.status!==""&&v.status!==null&&v.status!==void 0&&(Ue.status=v.status);const Je=await P.mutateAsync(Ue);if(Je?.data?.doctors){const et=new Date().toISOString().split("T")[0],Be=Je.data.doctors.map(ke=>({id:ke.id,name:ke.name,clinic_name:ke.clinic_name||"",clinic_id:ke.clinic_id||"",email:ke.email,mobile_number:ke.mobile_number,gender:ke.gender,dob:ke.dob,specialties:ke.specialties,status:ke.user_status,full_address:ke.full_address}));switch(Pe){case"csv":hs(Be,`doctors-${et}.csv`);break;case"xls":ps(Be,`doctors-${et}.xls`);break;case"pdf":gs(Be,`doctors-${et}.pdf`,"Doctors List");break;default:throw new Error("Invalid export format")}Wi(),Se.success(r("Export completed successfully.","kivicare-clinic-management-system"))}}catch(Ue){console.error("Export error:",Ue),rt({title:r("Error!","kivicare-clinic-management-system"),text:Ue.message||r("Failed to export data. Please try again.","kivicare-clinic-management-system")})}},ne=()=>te("csv"),Y=()=>te("xls"),[q,B]=f.useState(!1),se=()=>{q||(B(!0),te("pdf"),setTimeout(()=>B(!1),2e3))},[Q,pe]=f.useState(!1),[$,ce]=f.useState(!1),De=Pe=>{x({...v,...Pe,page:1}),pe(!1)},xe=async Pe=>({success:!0}),Re=()=>{U()},nt=[{type:"number",name:"id",label:r("Doctor ID","kivicare-clinic-management-system"),placeholder:r("Enter Doctor ID","kivicare-clinic-management-system"),min:1,pattern:"[0-9]*",onInput:Pe=>{Pe.target.value=Pe.target.value.replace(/[^0-9]/g,"")}},{type:"text",name:"doctorName",label:r("Doctor Name","kivicare-clinic-management-system"),placeholder:r("Enter Doctor Name","kivicare-clinic-management-system"),min:1},...I&&!h&&!p?[{type:"paginatedSelect",name:"clinic",label:r("clinic_id","kivicare-clinic-management-system"),placeholder:r("Select clinic","kivicare-clinic-management-system"),optionLoader:z,options:a,key:"clinic-filter"}]:[],{type:"paginatedSelect",name:"specialization",label:r("Specialization","kivicare-clinic-management-system"),placeholder:r("Select Specialization","kivicare-clinic-management-system"),options:o,optionLoader:le,isSearchable:!0},{type:"text",name:"doctorAddress",label:r("Doctor Address","kivicare-clinic-management-system"),placeholder:r("Search by address, city, or state","kivicare-clinic-management-system")},{type:"select",name:"status",label:r("Status","kivicare-clinic-management-system"),placeholder:r("Select status","kivicare-clinic-management-system"),options:X}];return i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap row-gap-2 column-gap-3 mb-4",children:[i.jsx("div",{className:"page-title",children:i.jsx("h6",{className:"m-0",children:r("All Doctors","kivicare-clinic-management-system")})}),i.jsxs("div",{className:"d-flex align-items-center row-gap-2 column-gap-3 flex-wrap",children:[w("doctor_add")&&i.jsxs(ht,{to:"/doctor/add",className:"btn btn-secondary d-flex align-items-center gap-2",children:[i.jsx("i",{className:"ph ph-plus-circle"}),i.jsx("span",{children:r("Add Doctor","kivicare-clinic-management-system")})]}),I&&i.jsxs("button",{className:"btn btn-primary d-flex align-items-center gap-2",onClick:()=>ce(!0),children:[i.jsx("i",{className:"ph ph-upload"}),i.jsx("span",{children:r("Import Data","kivicare-clinic-management-system")})]}),i.jsxs("button",{className:"btn btn-primary d-flex align-items-center gap-2",onClick:()=>pe(!0),children:[i.jsx("i",{className:"ph ph-funnel"}),i.jsx("span",{children:r("Filters","kivicare-clinic-management-system")})]})]})]}),i.jsxs("div",{className:"kc-table-wrapper",children:[i.jsx(Ci,{in:!d,timeout:100,classNames:"fade-top-bottom",unmountOnExit:!0,nodeRef:u,children:i.jsxs("div",{ref:u,className:"d-flex justify-content-between align-items-xl-center flex-column flex-lg-row gap-3 mb-4 position-absolute top-0  w-100",children:[i.jsxs("div",{className:"table-selection d-flex gap-3 flex-column flex-sm-row",children:[I&&!h&&!p&&i.jsx(i.Fragment,{children:i.jsx(rn,{id:"clinic-filter",placeholder:r("Clinic","kivicare-clinic-management-system"),className:"react-select-box",classNamePrefix:"react-select",loadOptions:z,value:a.find(Pe=>Pe.value===v.clinic_id)||null,onChange:Pe=>{x(Ue=>({...Ue,clinic_id:Pe?Pe.value:""}))},dependencies:{},isClearable:!0})}),i.jsx(rn,{id:"specialties-selection",placeholder:r("Specializations","kivicare-clinic-management-system"),className:"react-select-box",classNamePrefix:"react-select",loadOptions:le,value:o.find(Pe=>Pe.label===v.specialization)||null,onChange:Pe=>x(Ue=>({...Ue,specialization:Pe?Pe.label:""})),isClearable:!0}),i.jsx(ct,{placeholder:r("Status","kivicare-clinic-management-system"),className:"react-select-box",classNamePrefix:"react-select",options:X,onChange:Pe=>x(Ue=>({...Ue,status:Pe?Pe.value:""})),isClearable:!0,isSearchable:!1,styles:{menuPortal:Pe=>({...Pe,zIndex:9999})}})]}),i.jsxs("div",{className:"btn-toolbar d-flex gap-3 align-items-center justify-content-lg-end table-action-right",children:[i.jsx("div",{className:"d-flex align-items-center input-search-select",children:i.jsxs("div",{className:"input-group input-group-search",children:[i.jsx("span",{className:"input-group-text",children:i.jsx("i",{className:"ph ph-magnifying-glass"})}),i.jsx("input",{type:"text",className:"form-control",placeholder:r("Search Anything","kivicare-clinic-management-system"),value:y,onChange:oe})]})}),w("doctor_export")&&I&&i.jsxs("div",{className:"download-buttons d-flex align-items-center gap-3",children:[i.jsx(Qe,{placement:"top",overlay:i.jsx(ut,{children:r("Export CSV","kivicare-clinic-management-system")}),children:i.jsx("button",{className:"btn btn-white",onClick:ne,disabled:P.isPending,children:i.jsx("i",{className:"ph ph-file-csv"})})}),i.jsx(Qe,{placement:"top",overlay:i.jsx(ut,{children:r("Export Excel","kivicare-clinic-management-system")}),children:i.jsx("button",{className:"btn btn-white",onClick:Y,disabled:P.isPending,children:i.jsx("i",{className:"ph ph-file-xls"})})}),i.jsx(Qe,{placement:"top",overlay:i.jsx(ut,{children:r("Export PDF","kivicare-clinic-management-system")}),children:i.jsx("button",{className:"btn btn-white",onClick:se,disabled:P.isPending||q,children:i.jsx("i",{className:"ph ph-file-pdf"})})})]})]})]})}),i.jsx(wn,{data:J,columns:me,isLoading:ge,error:ae,currentPage:he.currentPage,perPage:he.perPage,totalItems:he.total,lastPage:he.lastPage,moduleNamePlural:"doctors",onPageChange:Pe=>x(Ue=>({...Ue,page:Pe})),onPerPageChange:Pe=>x(Ue=>({...Ue,perPage:Pe,page:1})),onSortingChange:H,manualSorting:!0,enableSelection:!0,bulkActions:[{label:r("Delete","kivicare-clinic-management-system"),action:(Pe,Ue)=>{const Je=Pe.map(et=>et.id);kt({title:r("Delete Doctors?","kivicare-clinic-management-system"),text:r(`Youre about to delete <strong>${Pe.length} doctors</strong>.<br>This action cannot be undone.`,"kivicare-clinic-management-system"),icon:"ph-warning",showCancelButton:!0,confirmButtonText:r("Delete permanently","kivicare-clinic-management-system"),cancelButtonText:r("Keep doctors","kivicare-clinic-management-system"),confirmButtonColor:"#dc3545",reverseButtons:!0}).then(et=>{et.isConfirmed&&(yt({title:r("Deleting Doctors...","kivicare-clinic-management-system"),text:r("Please wait while we remove the selected doctors.<br>This won't take long.","kivicare-clinic-management-system")}),_.mutate(Je,{onSuccess:Be=>{Tt({title:r("Doctor Deleted","kivicare-clinic-management-system"),text:r(`${Pe.length} doctor${Pe.length>1?"s":""} has been deleted.`,"kivicare-clinic-management-system"),confirmButtonText:r("Back to doctors","kivicare-clinic-management-system")}),Ue()},onError:Be=>{console.error("Bulk delete doctors error:",Be);const ke=Be?.response?.data?.message||Be?.message||r("Failed to delete selected clinics. Please try again.","kivicare-clinic-management-system");rt({text:ke})}}))})},icon:i.jsx("i",{className:"ph ph-trash"})},{label:r("Resend Credentials","kivicare-clinic-management-system"),action:(Pe,Ue)=>{const Je=Pe.map(et=>et.id);kt({title:r("Resend Credentials","kivicare-clinic-management-system"),text:r("Are you sure you want to resend credentials to the selected Doctors?","kivicare-clinic-management-system"),icon:"ph-question",confirmButtonText:r("Yes, resend","kivicare-clinic-management-system"),cancelButtonText:r("Cancel","kivicare-clinic-management-system"),confirmButtonClass:"btn-primary"}).then(et=>{et.isConfirmed&&(yt({title:r("Sending...","kivicare-clinic-management-system"),text:r("Please wait. This may take a few seconds.","kivicare-clinic-management-system")}),N.mutate(Je,{onSuccess:Be=>{Tt({text:Be?.message||r("Credentials have been resent successfully.","kivicare-clinic-management-system")}),Ue()},onError:Be=>{console.error("Bulk resend credentials error:",Be);const ke=Be?.response?.data?.message||Be?.message||r("Failed to resend credentials. Please try again.","kivicare-clinic-management-system");rt({text:ke})}}))})},icon:i.jsx("i",{className:"ph ph-shield-check"})},{label:r("Set Active","kivicare-clinic-management-system"),action:(Pe,Ue)=>{const Je=Pe.map(et=>et.id);kt({title:r("Update Status","kivicare-clinic-management-system"),text:r("Are you sure you want to set the selected Doctors to active?","kivicare-clinic-management-system"),icon:"ph-question",showCancelButton:!0,confirmButtonText:r("Yes, update","kivicare-clinic-management-system"),cancelButtonText:r("Cancel","kivicare-clinic-management-system")}).then(et=>{et.isConfirmed&&(yt({title:r("Updating...","kivicare-clinic-management-system"),text:r("Please wait. This may take a few seconds.","kivicare-clinic-management-system")}),A.mutate({ids:Je,status:"0"},{onSuccess:Be=>{Tt({text:Be?.message||r("Doctors status has been updated successfully.","kivicare-clinic-management-system")}),Ue()},onError:Be=>{console.error("Bulk update status error:",Be);const ke=Be?.response?.data?.message||Be?.message||r("Failed to update clinic status. Please try again.","kivicare-clinic-management-system");rt({text:ke})}}))})},icon:i.jsx("i",{className:"ph ph-check-circle"})},{label:r("Set Inactive","kivicare-clinic-management-system"),action:(Pe,Ue)=>{const Je=Pe.map(et=>et.id);kt({title:r("Update Status","kivicare-clinic-management-system"),text:r("Are you sure you want to set the selected doctors to inactive?","kivicare-clinic-management-system"),icon:"ph-warning",showCancelButton:!0,confirmButtonText:r("Yes, update","kivicare-clinic-management-system"),cancelButtonText:r("Cancel","kivicare-clinic-management-system")}).then(et=>{et.isConfirmed&&(yt({title:r("Updating...","kivicare-clinic-management-system"),text:r("Please wait. This may take a few seconds.","kivicare-clinic-management-system")}),A.mutate({ids:Je,status:"1"},{onSuccess:Be=>{Tt({title:r("Success","kivicare-clinic-management-system"),text:Be?.message||r("Doctors status has been updated successfully.","kivicare-clinic-management-system"),icon:"success",confirmButtonText:r("OK","kivicare-clinic-management-system")}),Ue()},onError:Be=>{console.error("Bulk update status error:",Be);const ke=Be?.response?.data?.message||Be?.message||r("Failed to update Doctor status. Please try again.","kivicare-clinic-management-system");rt({title:r("Error","kivicare-clinic-management-system"),text:ke,confirmButtonText:r("OK","kivicare-clinic-management-system")})}}))})},icon:i.jsx("i",{className:"ph ph-x-circle"})}],isBulkActionShow:Pe=>{m(Pe)}})]}),i.jsx(na,{show:Q,onHide:()=>pe(!1),queryParams:v,onApplyFilters:De,onResetFilters:C,title:r("Filters","kivicare-clinic-management-system"),fields:nt,hasAppliedFilters:R}),I&&i.jsx(Lr,{show:$,onHide:()=>ce(!1),onImport:xe,onReopenImport:()=>ce(!0),onDataRefresh:Re,context:"doctors"}),i.jsx(zte,{show:t,onHide:()=>{e(!1),s(null)},doctorId:n})]})};function $y(){return $y=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)({}).hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},$y.apply(null,arguments)}function Ute(t,e){if(t==null)return{};var n={};for(var s in t)if({}.hasOwnProperty.call(t,s)){if(e.indexOf(s)!==-1)continue;n[s]=t[s]}return n}function Wte(t,e){if(t==null)return{};var n,s,a=Ute(t,e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(s=0;s<l.length;s++)n=l[s],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function By(t){"@babel/helpers - typeof";return By=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},By(t)}function Kte(t,e,n){return Object.defineProperty(t,"prototype",{writable:!1}),t}function Gte(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function qy(t,e){return qy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},qy(t,e)}function Yte(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&qy(t,e)}function ng(t){return ng=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ng(t)}function hP(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(hP=function(){return!!t})()}function Qte(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Zte(t,e){if(e&&(By(e)=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Qte(t)}function Xte(t){var e=hP();return function(){var n,s=ng(t);if(e){var a=ng(this).constructor;n=Reflect.construct(s,arguments,a)}else n=s.apply(this,arguments);return Zte(this,n)}}function po(t,e,n){this.x=t,this.y=e,this.time=n||new Date().getTime()}po.prototype.velocityFrom=function(t){return this.time!==t.time?this.distanceTo(t)/(this.time-t.time):1};po.prototype.distanceTo=function(t){return Math.sqrt(Math.pow(this.x-t.x,2)+Math.pow(this.y-t.y,2))};po.prototype.equals=function(t){return this.x===t.x&&this.y===t.y&&this.time===t.time};function Iw(t,e,n,s){this.startPoint=t,this.control1=e,this.control2=n,this.endPoint=s}Iw.prototype.length=function(){for(var t=10,e=0,n=void 0,s=void 0,a=0;a<=t;a+=1){var l=a/t,o=this._point(l,this.startPoint.x,this.control1.x,this.control2.x,this.endPoint.x),c=this._point(l,this.startPoint.y,this.control1.y,this.control2.y,this.endPoint.y);if(a>0){var d=o-n,m=c-s;e+=Math.sqrt(d*d+m*m)}n=o,s=c}return e};Iw.prototype._point=function(t,e,n,s,a){return e*(1-t)*(1-t)*(1-t)+3*n*(1-t)*(1-t)*t+3*s*(1-t)*t*t+a*t*t*t};function Jte(t,e,n){var s,a,l,o=null,c=0;n||(n={});var d=function(){c=n.leading===!1?0:Date.now(),o=null,l=t.apply(s,a),o||(s=a=null)};return function(){var m=Date.now();!c&&n.leading===!1&&(c=m);var u=e-(m-c);return s=this,a=arguments,u<=0||u>e?(o&&(clearTimeout(o),o=null),c=m,l=t.apply(s,a),o||(s=a=null)):!o&&n.trailing!==!1&&(o=setTimeout(d,u)),l}}function An(t,e){var n=this,s=e||{};this.velocityFilterWeight=s.velocityFilterWeight||.7,this.minWidth=s.minWidth||.5,this.maxWidth=s.maxWidth||2.5,this.throttle="throttle"in s?s.throttle:16,this.minDistance="minDistance"in s?s.minDistance:5,this.throttle?this._strokeMoveUpdate=Jte(An.prototype._strokeUpdate,this.throttle):this._strokeMoveUpdate=An.prototype._strokeUpdate,this.dotSize=s.dotSize||function(){return(this.minWidth+this.maxWidth)/2},this.penColor=s.penColor||"black",this.backgroundColor=s.backgroundColor||"rgba(0,0,0,0)",this.onBegin=s.onBegin,this.onEnd=s.onEnd,this._canvas=t,this._ctx=t.getContext("2d"),this.clear(),this._handleMouseDown=function(a){a.which===1&&(n._mouseButtonDown=!0,n._strokeBegin(a))},this._handleMouseMove=function(a){n._mouseButtonDown&&n._strokeMoveUpdate(a)},this._handleMouseUp=function(a){a.which===1&&n._mouseButtonDown&&(n._mouseButtonDown=!1,n._strokeEnd(a))},this._handleTouchStart=function(a){if(a.targetTouches.length===1){var l=a.changedTouches[0];n._strokeBegin(l)}},this._handleTouchMove=function(a){a.preventDefault();var l=a.targetTouches[0];n._strokeMoveUpdate(l)},this._handleTouchEnd=function(a){var l=a.target===n._canvas;l&&(a.preventDefault(),n._strokeEnd(a))},this.on()}An.prototype.clear=function(){var t=this._ctx,e=this._canvas;t.fillStyle=this.backgroundColor,t.clearRect(0,0,e.width,e.height),t.fillRect(0,0,e.width,e.height),this._data=[],this._reset(),this._isEmpty=!0};An.prototype.fromDataURL=function(t){var e=this,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=new Image,a=n.ratio||window.devicePixelRatio||1,l=n.width||this._canvas.width/a,o=n.height||this._canvas.height/a;this._reset(),s.src=t,s.onload=function(){e._ctx.drawImage(s,0,0,l,o)},this._isEmpty=!1};An.prototype.toDataURL=function(t){var e;switch(t){case"image/svg+xml":return this._toSVG();default:for(var n=arguments.length,s=Array(n>1?n-1:0),a=1;a<n;a++)s[a-1]=arguments[a];return(e=this._canvas).toDataURL.apply(e,[t].concat(s))}};An.prototype.on=function(){this._handleMouseEvents(),this._handleTouchEvents()};An.prototype.off=function(){this._canvas.removeEventListener("mousedown",this._handleMouseDown),this._canvas.removeEventListener("mousemove",this._handleMouseMove),document.removeEventListener("mouseup",this._handleMouseUp),this._canvas.removeEventListener("touchstart",this._handleTouchStart),this._canvas.removeEventListener("touchmove",this._handleTouchMove),this._canvas.removeEventListener("touchend",this._handleTouchEnd)};An.prototype.isEmpty=function(){return this._isEmpty};An.prototype._strokeBegin=function(t){this._data.push([]),this._reset(),this._strokeUpdate(t),typeof this.onBegin=="function"&&this.onBegin(t)};An.prototype._strokeUpdate=function(t){var e=t.clientX,n=t.clientY,s=this._createPoint(e,n),a=this._data[this._data.length-1],l=a&&a[a.length-1],o=l&&s.distanceTo(l)<this.minDistance;if(!(l&&o)){var c=this._addPoint(s),d=c.curve,m=c.widths;d&&m&&this._drawCurve(d,m.start,m.end),this._data[this._data.length-1].push({x:s.x,y:s.y,time:s.time,color:this.penColor})}};An.prototype._strokeEnd=function(t){var e=this.points.length>2,n=this.points[0];if(!e&&n&&this._drawDot(n),n){var s=this._data[this._data.length-1],a=s[s.length-1];n.equals(a)||s.push({x:n.x,y:n.y,time:n.time,color:this.penColor})}typeof this.onEnd=="function"&&this.onEnd(t)};An.prototype._handleMouseEvents=function(){this._mouseButtonDown=!1,this._canvas.addEventListener("mousedown",this._handleMouseDown),this._canvas.addEventListener("mousemove",this._handleMouseMove),document.addEventListener("mouseup",this._handleMouseUp)};An.prototype._handleTouchEvents=function(){this._canvas.style.msTouchAction="none",this._canvas.style.touchAction="none",this._canvas.addEventListener("touchstart",this._handleTouchStart),this._canvas.addEventListener("touchmove",this._handleTouchMove),this._canvas.addEventListener("touchend",this._handleTouchEnd)};An.prototype._reset=function(){this.points=[],this._lastVelocity=0,this._lastWidth=(this.minWidth+this.maxWidth)/2,this._ctx.fillStyle=this.penColor};An.prototype._createPoint=function(t,e,n){var s=this._canvas.getBoundingClientRect();return new po(t-s.left,e-s.top,n||new Date().getTime())};An.prototype._addPoint=function(t){var e=this.points,n=void 0;if(e.push(t),e.length>2){e.length===3&&e.unshift(e[0]),n=this._calculateCurveControlPoints(e[0],e[1],e[2]);var s=n.c2;n=this._calculateCurveControlPoints(e[1],e[2],e[3]);var a=n.c1,l=new Iw(e[1],s,a,e[2]),o=this._calculateCurveWidths(l);return e.shift(),{curve:l,widths:o}}return{}};An.prototype._calculateCurveControlPoints=function(t,e,n){var s=t.x-e.x,a=t.y-e.y,l=e.x-n.x,o=e.y-n.y,c={x:(t.x+e.x)/2,y:(t.y+e.y)/2},d={x:(e.x+n.x)/2,y:(e.y+n.y)/2},m=Math.sqrt(s*s+a*a),u=Math.sqrt(l*l+o*o),h=c.x-d.x,p=c.y-d.y,g=u/(m+u),v={x:d.x+h*g,y:d.y+p*g},x=e.x-v.x,y=e.y-v.y;return{c1:new po(c.x+x,c.y+y),c2:new po(d.x+x,d.y+y)}};An.prototype._calculateCurveWidths=function(t){var e=t.startPoint,n=t.endPoint,s={start:null,end:null},a=this.velocityFilterWeight*n.velocityFrom(e)+(1-this.velocityFilterWeight)*this._lastVelocity,l=this._strokeWidth(a);return s.start=this._lastWidth,s.end=l,this._lastVelocity=a,this._lastWidth=l,s};An.prototype._strokeWidth=function(t){return Math.max(this.maxWidth/(t+1),this.minWidth)};An.prototype._drawPoint=function(t,e,n){var s=this._ctx;s.moveTo(t,e),s.arc(t,e,n,0,2*Math.PI,!1),this._isEmpty=!1};An.prototype._drawCurve=function(t,e,n){var s=this._ctx,a=n-e,l=Math.floor(t.length());s.beginPath();for(var o=0;o<l;o+=1){var c=o/l,d=c*c,m=d*c,u=1-c,h=u*u,p=h*u,g=p*t.startPoint.x;g+=3*h*c*t.control1.x,g+=3*u*d*t.control2.x,g+=m*t.endPoint.x;var v=p*t.startPoint.y;v+=3*h*c*t.control1.y,v+=3*u*d*t.control2.y,v+=m*t.endPoint.y;var x=e+m*a;this._drawPoint(g,v,x)}s.closePath(),s.fill()};An.prototype._drawDot=function(t){var e=this._ctx,n=typeof this.dotSize=="function"?this.dotSize():this.dotSize;e.beginPath(),this._drawPoint(t.x,t.y,n),e.closePath(),e.fill()};An.prototype._fromData=function(t,e,n){for(var s=0;s<t.length;s+=1){var a=t[s];if(a.length>1)for(var l=0;l<a.length;l+=1){var o=a[l],c=new po(o.x,o.y,o.time),d=o.color;if(l===0)this.penColor=d,this._reset(),this._addPoint(c);else if(l!==a.length-1){var m=this._addPoint(c),u=m.curve,h=m.widths;u&&h&&e(u,h,d)}}else{this._reset();var p=a[0];n(p)}}};An.prototype._toSVG=function(){var t=this,e=this._data,n=this._canvas,s=Math.max(window.devicePixelRatio||1,1),a=0,l=0,o=n.width/s,c=n.height/s,d=document.createElementNS("http://www.w3.org/2000/svg","svg");d.setAttributeNS(null,"width",n.width),d.setAttributeNS(null,"height",n.height),this._fromData(e,function(b,k,w){var T=document.createElement("path");if(!isNaN(b.control1.x)&&!isNaN(b.control1.y)&&!isNaN(b.control2.x)&&!isNaN(b.control2.y)){var j="M "+b.startPoint.x.toFixed(3)+","+b.startPoint.y.toFixed(3)+" "+("C "+b.control1.x.toFixed(3)+","+b.control1.y.toFixed(3)+" ")+(b.control2.x.toFixed(3)+","+b.control2.y.toFixed(3)+" ")+(b.endPoint.x.toFixed(3)+","+b.endPoint.y.toFixed(3));T.setAttribute("d",j),T.setAttribute("stroke-width",(k.end*2.25).toFixed(3)),T.setAttribute("stroke",w),T.setAttribute("fill","none"),T.setAttribute("stroke-linecap","round"),d.appendChild(T)}},function(b){var k=document.createElement("circle"),w=typeof t.dotSize=="function"?t.dotSize():t.dotSize;k.setAttribute("r",w),k.setAttribute("cx",b.x),k.setAttribute("cy",b.y),k.setAttribute("fill",b.color),d.appendChild(k)});var m="data:image/svg+xml;base64,",u='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"'+(' viewBox="'+a+" "+l+" "+o+" "+c+'"')+(' width="'+o+'"')+(' height="'+c+'"')+">",h=d.innerHTML;if(h===void 0){var p=document.createElement("dummy"),g=d.childNodes;p.innerHTML="";for(var v=0;v<g.length;v+=1)p.appendChild(g[v].cloneNode(!0));h=p.innerHTML}var x="</svg>",y=u+h+x;return m+btoa(y)};An.prototype.fromData=function(t){var e=this;this.clear(),this._fromData(t,function(n,s){return e._drawCurve(n,s.start,s.end)},function(n){return e._drawDot(n)}),this._data=t};An.prototype.toData=function(){return this._data};var Yh={exports:{}},ene=Yh.exports,_C;function tne(){return _C||(_C=1,(function(t,e){(function(n,s){t.exports=s()})(ene,function(){return(function(n){function s(l){if(a[l])return a[l].exports;var o=a[l]={exports:{},id:l,loaded:!1};return n[l].call(o.exports,o,o.exports,s),o.loaded=!0,o.exports}var a={};return s.m=n,s.c=a,s.p="",s(0)})([function(n,s){function a(m){var u=m.getContext("2d"),h=m.width,p=m.height,g=u.getImageData(0,0,h,p).data,v=c(!0,h,p,g),x=c(!1,h,p,g),y=d(!0,h,p,g),b=d(!1,h,p,g),k=b-y+1,w=x-v+1,T=u.getImageData(y,v,k,w);return m.width=k,m.height=w,u.clearRect(0,0,k,w),u.putImageData(T,0,0),m}function l(m,u,h,p){return{red:p[4*(h*u+m)],green:p[4*(h*u+m)+1],blue:p[4*(h*u+m)+2],alpha:p[4*(h*u+m)+3]}}function o(m,u,h,p){return l(m,u,h,p).alpha}function c(m,u,h,p){for(var g=m?1:-1,v=m?0:h-1,x=v;m?x<h:x>-1;x+=g)for(var y=0;y<u;y++)if(o(y,x,u,p))return x;return null}function d(m,u,h,p){for(var g=m?1:-1,v=m?0:u-1,x=v;m?x<u:x>-1;x+=g)for(var y=0;y<h;y++)if(o(x,y,u,p))return x;return null}Object.defineProperty(s,"__esModule",{value:!0}),s.default=a}])})})(Yh)),Yh.exports}var nne=tne();const ine=ya(nne);var sne=["canvasProps","clearOnResize"],rf=(function(t){Yte(n,t);var e=Xte(n);function n(){var s;Gte(this,n);for(var a=arguments.length,l=new Array(a),o=0;o<a;o++)l[o]=arguments[o];return s=e.call.apply(e,[this].concat(l)),s.staticThis=s.constructor,s._sigPad=null,s._canvas=null,s.setRef=function(c){s._canvas=c,s._canvas===null&&(s._sigPad=null)},s._excludeOurProps=function(){var c=s.props;c.canvasProps,c.clearOnResize;var d=Wte(c,sne);return d},s.componentDidMount=function(){var c=s.getCanvas();s._sigPad=new An(c,s._excludeOurProps()),s._resizeCanvas(),s.on()},s.componentWillUnmount=function(){s.off()},s.componentDidUpdate=function(){Object.assign(s._sigPad,s._excludeOurProps())},s.getCanvas=function(){if(s._canvas===null)throw s.staticThis.refNullError;return s._canvas},s.getTrimmedCanvas=function(){var c=s.getCanvas(),d=document.createElement("canvas");return d.width=c.width,d.height=c.height,d.getContext("2d").drawImage(c,0,0),ine(d)},s.getSignaturePad=function(){if(s._sigPad===null)throw s.staticThis.refNullError;return s._sigPad},s._checkClearOnResize=function(){s.props.clearOnResize&&s._resizeCanvas()},s._resizeCanvas=function(){var c,d,m=(c=s.props.canvasProps)!==null&&c!==void 0?c:{},u=m.width,h=m.height;if(!(typeof u<"u"&&typeof h<"u")){var p=s.getCanvas(),g=Math.max((d=window.devicePixelRatio)!==null&&d!==void 0?d:1,1);typeof u>"u"&&(p.width=p.offsetWidth*g),typeof h>"u"&&(p.height=p.offsetHeight*g),p.getContext("2d").scale(g,g),s.clear()}},s.render=function(){var c=s.props.canvasProps;return He.createElement("canvas",$y({ref:s.setRef},c))},s.on=function(){return window.addEventListener("resize",s._checkClearOnResize),s.getSignaturePad().on()},s.off=function(){return window.removeEventListener("resize",s._checkClearOnResize),s.getSignaturePad().off()},s.clear=function(){return s.getSignaturePad().clear()},s.isEmpty=function(){return s.getSignaturePad().isEmpty()},s.fromDataURL=function(c,d){return s.getSignaturePad().fromDataURL(c,d)},s.toDataURL=function(c,d){return s.getSignaturePad().toDataURL(c,d)},s.fromData=function(c){return s.getSignaturePad().fromData(c)},s.toData=function(){return s.getSignaturePad().toData()},s}return Kte(n)})(f.Component);rf.propTypes={velocityFilterWeight:Ae.number,minWidth:Ae.number,maxWidth:Ae.number,minDistance:Ae.number,dotSize:Ae.oneOfType([Ae.number,Ae.func]),penColor:Ae.string,throttle:Ae.number,onEnd:Ae.func,onBegin:Ae.func,canvasProps:Ae.object,clearOnResize:Ae.bool};rf.defaultProps={clearOnResize:!0};rf.refNullError=new Error("react-signature-canvas is currently mounting or unmounting: React refs are null during this phase.");const ane=t=>{if(!t)return"";const e=Math.floor((new Date-new Date(t))/1e3);let n=Math.floor(e/31536e3);return n>1?n+r(" years ago","kivicare-clinic-management-system"):n===1?r("1 year ago","kivicare-clinic-management-system"):(n=Math.floor(e/2592e3),n>1?n+r(" months ago","kivicare-clinic-management-system"):n===1?r("1 month ago","kivicare-clinic-management-system"):(n=Math.floor(e/86400),n>1?n+r(" days ago","kivicare-clinic-management-system"):n===1?r("1 day ago","kivicare-clinic-management-system"):(n=Math.floor(e/3600),n>1?n+r(" hours ago","kivicare-clinic-management-system"):n===1?r("1 hour ago","kivicare-clinic-management-system"):(n=Math.floor(e/60),n>1?n+r(" minutes ago","kivicare-clinic-management-system"):n===1?r("1 minute ago","kivicare-clinic-management-system"):e<10?r("just now","kivicare-clinic-management-system"):Math.floor(e)+r(" seconds ago","kivicare-clinic-management-system")))))},rne=({filled:t})=>i.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:t?"#F59E0B":"#E5E7EB",stroke:t?"#F59E0B":"#E5E7EB",strokeWidth:"2",children:i.jsx("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"})}),pP=({rating:t,size:e="md"})=>{const n={sm:14,md:16,lg:20};return i.jsx("div",{className:"kc-star-rating",children:[...Array(5)].map((s,a)=>i.jsx("svg",{width:n[e],height:n[e],viewBox:"0 0 24 24",fill:a<t?"#F59E0B":"#E5E7EB",stroke:a<t?"#F59E0B":"#E5E7EB",strokeWidth:"2",children:i.jsx("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"})},a))})},lne=({distribution:t,totalReviews:e})=>{const n=[5,4,3,2,1];return i.jsx("div",{className:"kc-rating-distribution",children:n.map(s=>{const a=t[s]||0,l=e>0?a/e*100:0;return i.jsxs("div",{className:"kc-distribution-row",children:[i.jsx("span",{className:"kc-rating-number",children:s}),i.jsx(rne,{filled:!0}),i.jsx("div",{className:"kc-bar-track",children:i.jsx("div",{className:"kc-bar-fill",style:{width:`${l}%`}})})]},s)})})},one=({review:t})=>i.jsxs("div",{className:"kc-review-card",children:[i.jsx("div",{className:"kc-review-avatar",children:i.jsx(Oc,{src:t.profileUrl,alt:t.patientName||r("Patient","kivicare-clinic-management-system"),text:!t.profileUrl&&t.patientName?t.patientName.charAt(0).toUpperCase():"P",variant:"primary",size:"md",className:"flex-shrink-0"})}),i.jsxs("div",{className:"kc-review-content",children:[i.jsx("h4",{className:"kc-review-name",children:t.patientName}),i.jsxs("div",{className:"kc-review-meta",children:[i.jsx(pP,{rating:t.rating,size:"sm"}),i.jsx("span",{className:"kc-review-separator",children:""}),i.jsx("span",{className:"kc-review-date",children:ane(t.createdAt)||""})]}),t.reviewText&&i.jsx("p",{className:"kc-review-text",children:t.reviewText})]})]}),cne=({doctorId:t})=>{const[e,n]=f.useState("date"),[s,a]=f.useState(1),[l,o]=f.useState([]),[c,d]=f.useState(!1),[m,u]=f.useState({5:0,4:0,3:0,2:0,1:0}),[h,p]=f.useState(0),[g,v]=f.useState(0),[x,y]=f.useState(0),b=f.useRef(null),k=5,w={doctor_id:t,page:s,per_page:k,...e?{sort_by:e}:{}},{data:T,isLoading:j,isFetching:D}=XR(w,{enabled:!!t,keepPreviousData:!0,staleTime:300*1e3,cacheTime:600*1e3,refetchOnWindowFocus:!1,refetchOnMount:!1,refetchOnReconnect:!1}),_=N=>{N!==e&&(n(N),a(1))};return f.useEffect(()=>{s===1&&T?.data?.distribution&&(v(T?.data?.avg_rating||0),y(T?.data?.total_reviews||0),u(T.data.distribution),p(x))},[T,s,x]),f.useEffect(()=>{const N=T?.data?.reviews||[],A=T?.data?.pagination||{},P=typeof A.has_more<"u"?!!A.has_more:A.total_pages?A.page<A.total_pages:N.length===k;d(P),s===1?o(N||[]):N&&N.length>0&&o(E=>{const I=new Set(E.map(O=>O.id)),M=[...E];return N.forEach(O=>{I.has(O.id)||(M.push(O),I.add(O.id))}),M})},[T,s]),f.useEffect(()=>{a(1),o([]),d(!1),u({5:0,4:0,3:0,2:0,1:0})},[t]),f.useEffect(()=>{const N=b.current;if(!N)return;let A=!1;const P=()=>{A||(A=!0,requestAnimationFrame(()=>{const{scrollTop:E,scrollHeight:I,clientHeight:M}=N;I-E-M<200&&c&&!D&&a(F=>F+1),A=!1}))};return N.addEventListener("scroll",P),()=>N.removeEventListener("scroll",P)},[c,D]),t?i.jsxs("div",{className:"card kc-reviews-panel",children:[i.jsx("div",{className:"kc-reviews-header",children:i.jsx("h3",{children:r("Reviews","kivicare-clinic-management-system")})}),i.jsxs("div",{className:"kc-reviews-body",children:[i.jsxs("div",{className:"kc-rating-summary form-control",children:[i.jsxs("div",{className:"kc-rating-score",children:[i.jsx("span",{className:"kc-score-number",children:g.toFixed(1)}),i.jsxs("span",{className:"kc-score-label",children:["(",r("Ratings","kivicare-clinic-management-system"),")"]})]}),i.jsx("div",{className:"kc-rating-stars-center",children:i.jsx(pP,{rating:Math.round(g),size:"lg"})}),i.jsxs("p",{className:"kc-reviews-count",children:[x," ",r("reviews","kivicare-clinic-management-system")]}),i.jsx(lne,{distribution:m,totalReviews:h})]}),i.jsxs("div",{className:"d-flex justify-content-between mb-3",children:[i.jsxs("h6",{className:"mb-0",children:[r("Reviews","kivicare-clinic-management-system")," (",x||0,")"]}),i.jsxs("select",{className:"form-select form-select-sm",style:{width:"auto"},value:e,onChange:N=>_(N.target.value),children:[i.jsx("option",{value:"date",children:r("Most Recent","kivicare-clinic-management-system")}),i.jsx("option",{value:"rating_high",children:r("Highest Rated","kivicare-clinic-management-system")}),i.jsx("option",{value:"rating_low",children:r("Lowest Rated","kivicare-clinic-management-system")})]})]}),i.jsxs("div",{ref:b,className:"kc-reviews-list position-relative",style:{maxHeight:850,overflowY:"auto"},children:[i.jsx("div",{className:`${D?"opacity-50":""}`,style:{transition:"opacity 0.2s ease"},children:j&&l.length===0?i.jsxs("div",{className:"text-center py-4 border-start border-end",children:[i.jsx("span",{className:"spinner-border  spinner-border-sm me-2",role:"status","aria-hidden":"true"}),r("Loading...","kivicare-clinic-management-system")]}):l.length===0?i.jsx("div",{className:"text-center py-4 border-start border-end",children:r("No reviews yet","kivicare-clinic-management-system")}):l.map(N=>i.jsx(one,{review:{id:N.id,patientName:N.patient_name||N.patientName,rating:N.rating||N.rating,reviewText:N.review_text||N.reviewText,createdAt:N.created_at||N.createdAt,profileUrl:N.patient_profile_url||N.patient_profile_url}},N.id))}),D&&l.length>0&&i.jsx("div",{className:"position-absolute top-0 start-0 w-100 h-100 d-flex align-items-center justify-content-center",children:i.jsx("div",{className:"spinner-border",role:"status"})}),!c&&l.length>0&&i.jsx("div",{className:"text-center small text-muted py-2",children:r("No more reviews","kivicare-clinic-management-system")})]})]})]}):null};function Hy({isEditing:t=!1,isProfile:e=!1}){const n=ze(),s=Bee(),a=qee(),l=hn(),{isAddonActive:o,currentuserID:c,userRole:d,defaultCountryCode:m,showOtherGender:u,defaultClinicId:h}=mt(),{data:p}=Sn();f.useMemo(()=>p?.data?.kc_available_translations,[p]);const g=o("kiviPro"),{id:v}=Yt(),x=h?parseInt(h,10):null,y=Li(),b=Xn(),k=Jn(),w=e?c:v,[T,j]=f.useState(!1),D=f.useRef(null),{data:_}=ad({module_type:"doctor_module",status:1,module_id:w},{enabled:o("kiviPro")}),N=_?.data?.forms||[];f.useEffect(()=>{t&&N.length>0&&N.forEach(Ee=>{const Oe=Ee.form_data;Oe&&A.current[Ee.id]&&setTimeout(()=>{const V=A.current[Ee.id];V&&V.resetForm&&V.resetForm(Oe)},100)})},[t,N]);const A=f.useRef({}),P=()=>{const Ee={};return N.forEach(Oe=>{const V=A.current[Oe.id];V&&(Ee[Oe.id]=V.getFormData())}),Ee},E=async()=>{const Ee={};let Oe=!0,V=null;for(const Z of N){const fe=A.current[Z.id];if(fe){const Ce=await fe.triggerValidation();Ee[Z.id]={isValid:Ce.isValid,data:fe.getFormData(),errors:Ce.errors},Ce.isValid||(Oe=!1,V||(V=Z.id))}}return{allValid:Oe,formResults:Ee,firstInvalidFormId:V}},I=()=>{D.current.clear(),j(!0)},M=()=>{const Ee=D.current.toData();Ee&&(Ee.pop(),D.current.fromData(Ee),j(!0))};f.useEffect(()=>{if(D.current){const Ee=D.current.getCanvas(),Oe=()=>{j(!0)};return Ee.addEventListener("mousedown",Oe),Ee.addEventListener("touchstart",Oe),()=>{Ee.removeEventListener("mousedown",Oe),Ee.removeEventListener("touchstart",Oe)}}},[]);const[O,F]=f.useState({degree:"",university:"",year:""}),[H,G]=f.useState({}),[z,ie]=f.useState(-1),[W,ge]=f.useState(!1),[ae,U]=f.useState(!1),X=ae||s.isPending,[J,he]=f.useState(!1),{data:le,isLoading:ee,error:me}=af(w,{enabled:(t||e)&&!!w}),K=le?.data,re=Wc.PhoneNumberUtil.getInstance(),oe=Ee=>{try{return re.isValidNumber(re.parseAndKeepRawInput(Ee))}catch{return!1}},C=[{value:0,label:r("Active","kivicare-clinic-management-system")},{value:1,label:r("Inactive","kivicare-clinic-management-system")}],{register:R,handleSubmit:te,control:ne,watch:Y,setValue:q,formState:{errors:B},reset:se}=en({defaultValues:{doctorImage:"",doctorImageId:"",firstName:"",lastName:"",email:"",clinic:null,contactNumber:"",dob:"",specialization:[],experience:null,bloodGroup:null,status:C[0],gender:"",signature:"",description:"",address:"",city:"",country:"",postalCode:"",qualifications:[]}}),{fields:Q,append:pe,remove:$,update:ce}=yr({control:ne,name:"qualifications"}),De=async({page:Ee,per_page:Oe,search:V})=>{try{const Z={dataType:"clinicList",page:Ee,per_page:Oe,search:V};return await n.fetchQuery({queryKey:pt.list(Z),queryFn:()=>Dt.getStaticData(Z),staleTime:300*1e3})}catch(Z){return console.error("Error loading clinics:",Z),{data:[],pagination:{total:0,per_page:10,current_page:1,total_pages:0,has_more:!1}}}},{data:xe,isLoading:Re,refetch:nt}=Ha("specialization"),Pe=Fg();if(f.useEffect(()=>{if((t||e)&&K&&!ee){const Ee={firstName:K.first_name||"",lastName:K.last_name||"",email:K.email||"",contactNumber:K.contact_number||"",dob:K.dob||"",gender:K.gender||"",status:C.find(Oe=>Oe.value===parseInt(K.status))||C[0],clinic:Array.isArray(K?.clinics)?K.clinics.map(Oe=>{const V=Oe.id??Oe.clinic_id??Oe.value,Z=parseInt(V,10);return{...Oe,id:Z,value:Z,label:Oe.name||Oe.clinic_name||Oe.label}}):null,specialization:Array.isArray(K?.specialties)?K.specialties.map(Oe=>{let V=parseInt(Oe.id??Oe.value,10);if(isNaN(V)&&xe?.data){const Z=xe.data.find(fe=>fe.label===Oe.label);Z&&(V=parseInt(Z.id,10))}return{id:V,value:V,label:Oe.label}}):[],doctorImage:K.doctor_image_url||"",doctorImageId:K.doctor_image_id||"",experience:K.no_of_experience||"",address:K.address||"",city:K.city||"",country:K.country||"",postalCode:K.postal_code||"",qualifications:Array.isArray(K.qualifications)?K.qualifications.map(Oe=>({degree:Oe.degree||"",university:Oe.university||"",year:Oe.year||"",file:Oe.file||""})):[],description:K.doctor_description||""};se(Ee),K.customFields&&typeof K.customFields=="object"&&Object.entries(K.customFields).forEach(([Oe,V])=>{q(`custom_field_${Oe}`,V)}),K.doctor_signature&&D.current&&!T&&setTimeout(()=>{D?.current?.fromDataURL(K.doctor_signature)},100),setTimeout(()=>{q("contactNumber",K.contact_number||"")},0)}},[t,e,K,xe]),f.useEffect(()=>{if(me){const Ee=me?.response?.data?.message||r("You do not have permission to view this doctor.","kivicare-clinic-management-system");Se.error(Ee,{position:"top-right",autoClose:5e3}),l("/doctor",{replace:!0})}},[me,l]),(t||e)&&ee)return i.jsx(Ly,{});if((t||e)&&me)return null;const Ue=()=>{F({degree:"",university:"",year:""}),ie(-1),ge(!0)},Je=Ee=>{const Oe=Q[Ee];F({degree:Oe.degree||"",university:Oe.university||"",year:Oe.year||""}),ie(Ee),ge(!0)},et=Ee=>{const{name:Oe,value:V}=Ee.target;F(Z=>({...Z,[Oe]:V})),H[Oe]&&G(Z=>({...Z,[Oe]:""}))},Be=()=>{const Ee={};if(O.degree.trim()||(Ee.degree=r("Degree is required","kivicare-clinic-management-system")),O.university.trim()||(Ee.university=r("University is required","kivicare-clinic-management-system")),!O.year)Ee.year=r("Year is required","kivicare-clinic-management-system");else{const Oe=new Date().getFullYear(),V=parseInt(O.year);(V<1950||V>Oe)&&(Ee.year=r(`Year must be between 1950 and ${Oe}`,"kivicare-clinic-management-system"))}if(Object.keys(Ee).length>0){G(Ee);return}G({}),z>=0?(Se.success(r("Qualification updated successfully","kivicare-clinic-management-system")),ce(z,O)):(Se.success(r("Qualification added successfully","kivicare-clinic-management-system")),pe(O)),F({degree:"",university:"",year:""}),ge(!1),ie(-1)},ke=()=>{F({degree:"",university:"",year:""}),G({}),ge(!1),ie(-1)},_e={control:(Ee,Oe)=>({...Ee,borderColor:Oe.isFocused?"#86b7fe":"#dee2e6",boxShadow:Oe.isFocused?"0 0 0 0.25rem rgba(13, 110, 253, 0.25)":null,"&:hover":{borderColor:Oe.isFocused?"#86b7fe":"#dee2e6"},minHeight:"38px",fontSize:"1rem"}),placeholder:Ee=>({...Ee,color:"#6c757d"}),singleValue:Ee=>({...Ee,color:"#495057"})},Ye=Ee=>({..._e,control:(Oe,V)=>({..._e.control(Oe,V),borderColor:Ee?"#dc3545":V.isFocused?"#86b7fe":"#dee2e6",boxShadow:Ee?"0 0 0 0.25rem rgba(220, 53, 69, 0.25)":V.isFocused?"0 0 0 0.25rem rgba(13, 110, 253, 0.25)":null})}),tt=(Ee,Oe)=>{q(Ee,Oe.url||Oe.image),q(`${Ee}Id`,Oe.id||Oe.imageId)},zt=async Ee=>{if(U(!0),N.length>0&&!(await E()).allValid){Se.error(r("Please fix errors in the custom information forms before submitting","kivicare-clinic-management-system"),{position:"top-right",autoClose:5e3}),U(!1);return}let Oe=null;if(D.current&&(T||!t))try{D.current.isEmpty()?Oe="":Oe=D.current.getCanvas().toDataURL("image/png")}catch(Z){console.error("Error processing signature:",Z)}const V={first_name:Ee.firstName,last_name:Ee.lastName,email:Ee.email,mobile_number:Ee.contactNumber,dob:Ee.dob,specialties:Array.isArray(Ee.specialization)?Ee.specialization.map(Z=>({id:Z.value,label:Z.label})):Ee.specialization?[{id:Ee.specialization.value,label:Ee.specialization.label}]:[],experience_years:Ee.experience?.value||Ee.experience,blood_group:Ee.bloodGroup?.value||Ee.bloodGroup,status:typeof Ee.status=="object"?Ee.status?.value:Ee.status,gender:Ee.gender,signature:Ee.signature,description:Ee.description,doctor_image_id:Ee.doctorImageId??null,address:Ee.address,city:Ee.city,country:Ee.country,postal_code:Ee.postalCode,qualifications:Ee.qualifications,...T||!t?{doctor_signature:Oe??""}:{},customForm:P(),customFields:Object.keys(Ee).reduce((Z,fe)=>{if(fe.startsWith("custom_field_")){const Ce=fe.replace("custom_field_","");Z[Ce]=Ee[fe]}return Z},{})};k||b?V.clinic_id=[{id:String(x)}]:Ee.clinic&&Array.isArray(Ee.clinic)&&Ee.clinic.length>0&&(V.clinic_id=Ee.clinic.map(Z=>({id:String(Z.value||Z.id)})));try{let Z;t||e?(Z=await a.mutateAsync({id:w,...V}),Se.success(r("Doctor updated successfully","kivicare-clinic-management-system"),{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0}),e||l("/doctor")):(Z=await s.mutateAsync(V),Se.success(r("Doctor created successfully","kivicare-clinic-management-system"),{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0}),l("/doctor"))}catch(Z){console.error("Error saving doctor:",Z);const fe=Z?.response?.data?.message||(t?r("Failed to update doctor","kivicare-clinic-management-system"):r("Failed to create doctor","kivicare-clinic-management-system"));Se.error(fe,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0})}finally{U(!1)}},Ft=Ee=>{console.log("Validation errors:",Ee);const Oe=Object.keys(Ee)[0],V=document.getElementById(Oe);V&&(V.scrollIntoView({behavior:"smooth",block:"center"}),V.focus())},Qt=Ee=>{$(Ee),Se.success(r("Qualification deleted successfully","kivicare-clinic-management-system"))},xt={firstName:{required:r("First name is required","kivicare-clinic-management-system"),minLength:{value:2,message:r("First name must be at least 2 characters","kivicare-clinic-management-system")}},lastName:{required:r("Last name is required","kivicare-clinic-management-system"),minLength:{value:2,message:r("Last name must be at least 2 characters","kivicare-clinic-management-system")}},email:{required:r("Email is required","kivicare-clinic-management-system"),pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:r("Invalid email address","kivicare-clinic-management-system")}},clinic:!k&&!b?{required:r("Clinic selection is required","kivicare-clinic-management-system")}:{},contactNumber:{required:r("Contact number is required","kivicare-clinic-management-system"),validate:Ee=>Ee?oe(Ee)||r("Please enter a valid phone number","kivicare-clinic-management-system"):r("Contact number is required","kivicare-clinic-management-system")},dob:{validate:Ee=>{if(!Ee)return!0;const Oe=new Date(Ee);return new Date().getFullYear()-Oe.getFullYear()>=18||r("Doctor must be at least 18 years old","kivicare-clinic-management-system")}},specialization:{required:r("Specialization is required","kivicare-clinic-management-system")},experience:{validate:Ee=>{if(!Ee)return!0;const Oe=parseFloat(Ee);return isNaN(Oe)?r("Please enter a valid number","kivicare-clinic-management-system"):Oe<0?r("Experience cannot be negative","kivicare-clinic-management-system"):Oe>100?r("Experience cannot be more than 100 years","kivicare-clinic-management-system"):!0}},status:{required:r("Status is required","kivicare-clinic-management-system")},gender:{required:r("Gender is required","kivicare-clinic-management-system")},address:{minLength:{value:10,message:r("Address must be at least 10 characters","kivicare-clinic-management-system")}},"qualifications.degree":{required:r("Degree is required","kivicare-clinic-management-system")},"qualifications.university":{required:r("College/University is required","kivicare-clinic-management-system")},"qualifications.year":{required:r("Year is required","kivicare-clinic-management-system"),min:{message:r("Year must be 1950 or later","kivicare-clinic-management-system")},max:{value:new Date().getFullYear(),message:r(`Year cannot be later than ${new Date().getFullYear()}`,"kivicare-clinic-management-system")}}};return i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap row-gap-2 column-gap-3 mb-4",children:[i.jsx("div",{className:"page-title",children:i.jsx("h6",{className:"m-0",children:e?r("My Profile","kivicare-clinic-management-system"):t?r("Edit Doctor","kivicare-clinic-management-system"):r("Add Doctor","kivicare-clinic-management-system")})}),e&&i.jsx("div",{children:i.jsx(ei,{size:"sm"})})]}),i.jsxs("div",{className:"d-flex gap-4",children:[i.jsx("div",{className:"kc-doctor-profile",children:i.jsxs("form",{onSubmit:te(zt,Ft),className:"mb-0",children:[i.jsx("div",{className:"card",children:i.jsxs("div",{className:"card-body",children:[i.jsxs("div",{children:[i.jsx("h6",{className:"mb-3",children:r("Profile Information","kivicare-clinic-management-system")}),i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-lg-4",children:i.jsx("div",{className:"form-group d-flex justify-content-center pt-5",children:i.jsx(ye,{name:"doctorImage",control:ne,render:({field:Ee})=>i.jsx(yl,{id:"doctor-image-upload",name:"doctorImage",label:r("Image","kivicare-clinic-management-system"),defaultImage:Ee.value,defaultImageId:Y("doctorImageId"),onChange:Oe=>tt("doctorImage",Oe),setValue:q,size:200})})})}),i.jsx("div",{className:"col-lg-8",children:i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{htmlFor:"firstName",className:"form-label",children:[r("First Name","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx("input",{type:"text",id:"firstName",className:`form-control ${B.firstName?"is-invalid":""}`,placeholder:r("Enter the First Name","kivicare-clinic-management-system"),...R("firstName",xt.firstName)}),B.firstName&&i.jsx("div",{className:"invalid-feedback d-block",children:B.firstName.message})]})}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{htmlFor:"lastName",className:"form-label",children:[r("Last Name","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx("input",{type:"text",id:"lastName",className:`form-control ${B.lastName?"is-invalid":""}`,placeholder:r("Enter the Last Name","kivicare-clinic-management-system"),...R("lastName",xt.lastName)}),B.lastName&&i.jsx("div",{className:"invalid-feedback d-block",children:B.lastName.message})]})}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{htmlFor:"email",className:"form-label",children:[r("Email","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx("input",{type:"email",id:"email",className:`form-control ${B.email?"is-invalid":""}`,placeholder:r('eg "Markavenue@gmail.com"',"kivicare-clinic-management-system"),...R("email",xt.email)}),B.email&&i.jsx("div",{className:"invalid-feedback d-block",children:B.email.message})]})}),g&&!k&&!b&&i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{htmlFor:"clinic",className:"form-label",children:[r("Select Clinic","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx(ye,{name:"clinic",control:ne,rules:xt.clinic,render:({field:Ee})=>i.jsx(rn,{id:"clinic",loadOptions:De,value:Ee.value,onChange:Oe=>{Ee.onChange(Oe)},placeholder:r('eg "Mount Health Care"',"kivicare-clinic-management-system"),className:`react-select-box ${B.clinic?"is-invalid":""}`,classNamePrefix:"react-select",dependencies:{},isMulti:!0,getOptionValue:Oe=>Oe?.value??Oe?.id,getOptionLabel:Oe=>Oe?.label??Oe?.name??Oe?.clinic_name})}),B.clinic&&i.jsx("div",{className:"invalid-feedback d-block",children:B.clinic.message})]})}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{htmlFor:"contactNumber",className:"form-label",children:[r("Contact Number","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx(ye,{name:"contactNumber",control:ne,rules:xt.contactNumber,render:({field:Ee})=>i.jsx(to,{defaultCountry:m,value:Ee.value,onChange:Ee.onChange,inputProps:{className:`form-control ${B.contactNumber?"is-invalid":""}`,placeholder:r("555-0123-4567","kivicare-clinic-management-system")},style:{"--react-international-phone-border-radius":"0.375rem","--react-international-phone-border-color":B.contactNumber?"#dc3545":"#dee2e6","--react-international-phone-dropdown-item-background-color":"#ffffff","--react-international-phone-dropdown-item-background-color-hover":"#f8f9fa"}})}),B.contactNumber&&i.jsx("div",{className:"invalid-feedback d-block",children:B.contactNumber.message})]})}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{htmlFor:"dob",className:"form-label",children:r("DOB","kivicare-clinic-management-system")}),i.jsx(ye,{name:"dob",control:ne,rules:xt.dob,render:({field:Ee})=>i.jsx(Un,{id:"dob",className:`form-control ${B.dob?"is-invalid":""}`,value:Ee.value?Zn(Ee.value):"",onChange:Oe=>{if(Oe&&Oe[0]){const V=Oe[0],Z=`${V.getFullYear()}-${String(V.getMonth()+1).padStart(2,"0")}-${String(V.getDate()).padStart(2,"0")}`;Ee.onChange(Z)}else Ee.onChange("")},options:{dateFormat:xi(window.kc_frontend.date_format),maxDate:new Date,disableMobile:!0,locale:Wn()},placeholder:r("Select date of birth","kivicare-clinic-management-system"),disabled:t&&ee})}),B.dob&&i.jsx("div",{className:"invalid-feedback d-block",children:B.dob.message})]})})]})}),i.jsx("div",{className:"col-lg-12",children:i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{htmlFor:"specialization",className:"form-label",children:[r("Specialization","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx(ye,{name:"specialization",control:ne,rules:xt.specialization,render:({field:Ee})=>i.jsx(mu,{id:"specialization",options:xe?.data??[],value:Ee.value,onChange:Oe=>{Ee.onChange(Oe)},onCreateOption:Oe=>{Pe.mutate(Oe,{onSuccess:V=>{if(V?.data){const Z={id:parseInt(V?.data?.data.id,10),value:parseInt(V?.data?.data.id,10),label:V?.data?.data.label};Ee.onChange([...Ee.value||[],Z])}Se.success(r("Specialization added successfully","kivicare-clinic-management-system"))},onError:V=>{console.error("Failed to save specialization:",V),console.error("Error details:",V.response?.data),Se.error(r("Failed to save specialization to database, but it will be used for this form submission.","kivicare-clinic-management-system"))}})},getOptionValue:Oe=>{const V=Oe.value??Oe.id;return V!=null?String(V):""},getOptionLabel:Oe=>Oe.label,placeholder:r("Select or create specialization","kivicare-clinic-management-system"),isLoading:Re,isSearchable:!0,isMulti:!0,closeMenuOnSelect:!1,className:`react-select ${B.specialization?"is-invalid":""} react-select-box`,classNamePrefix:"react-select",noOptionsMessage:()=>r("Type to create a new specialization","kivicare-clinic-management-system"),formatCreateLabel:Oe=>r("Add specialization","kivicare-clinic-management-system")+`: "${Oe}"`})}),i.jsxs("small",{className:"text-muted mt-1 d-block",children:[i.jsx("span",{className:"text-primary",children:r("Note:","kivicare-clinic-management-system")})," ",r("Type and press enter to add new specialization","kivicare-clinic-management-system")]}),B.specialization&&i.jsx("div",{className:"invalid-feedback d-block",children:B.specialization.message})]})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{htmlFor:"experience",className:"form-label",children:r("Experience (In Years)","kivicare-clinic-management-system")}),i.jsx("input",{type:"text",id:"experience",className:`form-control ${B.experience?"is-invalid":""}`,placeholder:r("Enter experience","kivicare-clinic-management-system"),...R("experience",xt.experience),onInput:Ee=>{Ee.target.value=Ee.target.value.replace(/[^0-9]/g,"")}}),B.experience&&i.jsx("div",{className:"invalid-feedback d-block",children:B.experience.message})]})}),!e&&i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{htmlFor:"status",className:"form-label",children:[r("Status","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx(ye,{name:"status",control:ne,rules:xt.status,render:({field:Ee})=>i.jsx(ct,{id:"status",className:"react-select-box",classNamePrefix:"react-select",options:C,value:Ee.value,onChange:Ee.onChange,placeholder:r("Select Status","kivicare-clinic-management-system"),isSearchable:!1,styles:{...Ye(B.status),menuPortal:Oe=>({...Oe,zIndex:9999})}})}),B.status&&i.jsx("div",{className:"invalid-feedback d-block",children:B.status.message})]})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[r("Gender","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsxs("div",{className:"d-flex align-items-center flex-wrap gap-3 form-control",children:[i.jsxs("div",{className:"form-check",children:[i.jsx("input",{className:`form-check-input ${B.gender?"is-invalid":""}`,type:"radio",id:"male",value:"male",style:{cursor:"pointer"},...R("gender",xt.gender)}),i.jsx("label",{className:"form-check-label",htmlFor:"male",children:r("Male","kivicare-clinic-management-system")})]}),i.jsxs("div",{className:"form-check",children:[i.jsx("input",{className:`form-check-input ${B.gender?"is-invalid":""}`,type:"radio",id:"female",value:"female",style:{cursor:"pointer"},...R("gender",xt.gender)}),i.jsx("label",{className:"form-check-label",htmlFor:"female",children:r("Female","kivicare-clinic-management-system")})]}),u&&i.jsxs("div",{className:"form-check",children:[i.jsx("input",{className:`form-check-input ${B.gender?"is-invalid":""}`,type:"radio",id:"other",value:"other",style:{cursor:"pointer"},...R("gender",xt.gender)}),i.jsx("label",{className:"form-check-label",htmlFor:"other",children:r("Other","kivicare-clinic-management-system")})]})]}),B.gender&&i.jsx("div",{className:"invalid-feedback d-block",children:B.gender.message})]})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{htmlFor:"description",className:"form-label h6",children:r("Description","kivicare-clinic-management-system")}),i.jsx("textarea",{id:"description",className:"form-control",rows:"2",placeholder:r("Write description","kivicare-clinic-management-system"),...R("description")})]})}),i.jsxs("div",{className:"col-lg-4 col-md-6",children:[i.jsxs("div",{className:"form-group",children:[i.jsx("label",{htmlFor:"signature",className:"form-label d-block",children:r("Signature","kivicare-clinic-management-system")}),i.jsx(rf,{ref:D,id:"signatureCanvas",className:"w-100 rounded",canvasProps:{width:500,height:100,className:"sigCanvas"},penColor:"rgb(0, 0, 0)",backgroundColor:"rgb(220,220,220)"})]}),i.jsxs("div",{className:"d-flex gap-2 justify-content-end",children:[i.jsx("button",{type:"button",onClick:M,className:"btn btn-secondary",children:r("Undo","kivicare-clinic-management-system")}),i.jsx("button",{type:"button",onClick:I,className:"btn btn-primary",children:r("Clear","kivicare-clinic-management-system")})]})]})]})})]}),i.jsx("div",{className:"row gy-4"})]}),i.jsxs("div",{className:"my-5 py-3",children:[i.jsx("h6",{className:"mb-3",children:r("Address Information","kivicare-clinic-management-system")}),i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{htmlFor:"address",className:"form-label",children:r("Address","kivicare-clinic-management-system")}),i.jsx("input",{type:"text",id:"address",className:`form-control ${B.address?"is-invalid":""}`,placeholder:r('eg "1234 Skin Care Ave, Suite 567, Dermatown, CA 90210"',"kivicare-clinic-management-system"),...R("address",xt.address)}),B.address&&i.jsx("div",{className:"invalid-feedback d-block",children:B.address.message})]})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{htmlFor:"city",className:"form-label",children:r("City","kivicare-clinic-management-system")}),i.jsx("input",{type:"text",id:"city",className:`form-control ${B.city?"is-invalid":""}`,placeholder:r("Enter City Name","kivicare-clinic-management-system"),...R("city",xt.city)}),B.city&&i.jsx("div",{className:"invalid-feedback d-block",children:B.city.message})]})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{htmlFor:"country",className:"form-label",children:r("Country","kivicare-clinic-management-system")}),i.jsx("input",{type:"text",id:"country",className:`form-control ${B.country?"is-invalid":""}`,placeholder:r("Enter Country Name","kivicare-clinic-management-system"),...R("country",xt.country)}),B.country&&i.jsx("div",{className:"invalid-feedback d-block",children:B.country.message})]})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{htmlFor:"postalCode",className:"form-label",children:r("Postal Code","kivicare-clinic-management-system")}),i.jsx("input",{type:"text",id:"postalCode",className:`form-control ${B.postalCode?"is-invalid":""}`,placeholder:r("Enter Postal Code","kivicare-clinic-management-system"),...R("postalCode",xt.postalCode),onInput:Ee=>{Ee.target.value=Ee.target.value.replace(/[^0-9]/g,"")}}),B.postalCode&&i.jsx("div",{className:"invalid-feedback d-block",children:B.postalCode.message})]})})]})]}),i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap mb-3",children:[i.jsx("h6",{className:"m-0",children:r("Add Qualification","kivicare-clinic-management-system")}),!W&&i.jsxs("button",{type:"button",onClick:Ue,className:"btn btn-primary d-flex align-items-center gap-2",children:[i.jsx("i",{className:"ph ph-plus-circle"}),i.jsx("span",{children:r("Add Qualification","kivicare-clinic-management-system")})]})]}),W&&i.jsx("div",{className:"card mb-4",children:i.jsxs("div",{className:"card-body p-4 bg-body rounded",children:[i.jsx("h6",{children:z>=0?r("Edit Qualification","kivicare-clinic-management-system"):r("Add Qualification","kivicare-clinic-management-system")}),i.jsxs("div",{className:"row g-3 mt-2",children:[i.jsx("div",{className:"col-md-4",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{htmlFor:"degree",className:"form-label",children:[r("Degree","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx("input",{type:"text",id:"degree",name:"degree",className:`form-control ${H.degree?"is-invalid":""}`,placeholder:r('eg "Dermatology"',"kivicare-clinic-management-system"),value:O.degree,onChange:et}),H.degree&&i.jsx("div",{className:"invalid-feedback d-block",children:H.degree})]})}),i.jsx("div",{className:"col-md-4",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{htmlFor:"university",className:"form-label",children:[r("University","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx("input",{type:"text",id:"university",name:"university",className:`form-control ${H.university?"is-invalid":""}`,placeholder:r('eg "I"',"kivicare-clinic-management-system"),value:O.university,onChange:et}),H.university&&i.jsx("div",{className:"invalid-feedback d-block",children:H.university})]})}),i.jsx("div",{className:"col-md-4",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{htmlFor:"year",className:"form-label",children:[r("Year","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx("input",{type:"number",id:"year",name:"year",className:`form-control ${H.year?"is-invalid":""}`,placeholder:r("1999","kivicare-clinic-management-system"),min:"1950",max:new Date().getFullYear(),value:O.year,onChange:et,onInput:Ee=>{Ee.target.value=Ee.target.value.replace(/[^0-9]/g,"")}}),H.year&&i.jsx("div",{className:"invalid-feedback d-block",children:H.year})]})}),i.jsxs("div",{className:"col-12 text-end",children:[i.jsx("button",{type:"button",className:"btn btn-secondary me-2",onClick:ke,children:r("Cancel","kivicare-clinic-management-system")}),i.jsx("button",{type:"button",className:"btn btn-primary",onClick:Be,children:r("Save","kivicare-clinic-management-system")})]})]})]})}),i.jsx("div",{className:"table-responsive",children:i.jsxs("table",{className:"table table-bordered rounded",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{scope:"col",children:r("SR. NO","kivicare-clinic-management-system")}),i.jsx("th",{scope:"col",children:r("Degree","kivicare-clinic-management-system")}),i.jsx("th",{scope:"col",children:r("College/University","kivicare-clinic-management-system")}),i.jsx("th",{scope:"col",children:r("Year","kivicare-clinic-management-system")}),i.jsx("th",{scope:"col",children:r("Action","kivicare-clinic-management-system")})]})}),i.jsx("tbody",{children:Q.length>0?Q.map((Ee,Oe)=>i.jsxs("tr",{children:[i.jsxs("th",{children:[Oe+1,"."]}),i.jsx("td",{children:Ee.degree}),i.jsx("td",{children:Ee.university}),i.jsx("td",{children:Ee.year}),i.jsx("td",{children:i.jsxs("div",{className:"d-flex align-items-center gap-3",children:[i.jsx("button",{type:"button",className:"btn btn-link text-primary p-0",onClick:()=>Je(Oe),children:i.jsx("span",{className:"fs-5",children:i.jsx("i",{className:"ph ph-pencil"})})}),i.jsx("button",{type:"button",className:"btn btn-link text-danger p-0",onClick:()=>Qt(Oe),children:i.jsx("span",{className:"fs-5",children:i.jsx("i",{className:"ph ph-trash"})})})]})})]},Ee.id)):i.jsx("tr",{children:i.jsx("td",{colSpan:"5",className:"text-center py-4 start-border end-border",children:r("No records found","kivicare-clinic-management-system")})})})]})})]})}),i.jsx(tf,{moduleType:"doctor_module",control:ne,errors:B,setValue:q,watch:Y}),g&&N.length>0&&i.jsxs("div",{className:"mt-5 pt-2",children:[i.jsx("h6",{className:"mb-3",children:r("Custom Form","kivicare-clinic-management-system")}),N.map(Ee=>i.jsx(_t,{className:"mb-4",children:i.jsxs(qa,{children:[i.jsx("h6",{className:"mb-3",children:Ee.name?.text||Ee.name}),i.jsx("div",{id:`custom-form-${Ee.id}`,children:i.jsx(Ua,{ref:Oe=>A.current[Ee.id]=Oe,fields:Ee.fields,data:Ee.form_data||{},readOnly:!1,formId:`form_${Ee.id}`})})]})},Ee.id))]}),i.jsxs("div",{className:"d-flex align-items-center justify-content-end flex-wrap gap-3",children:[i.jsx(ei,{text:r("Cancel","kivicare-clinic-management-system"),variant:"secondary",showIcon:!1,disabled:X}),i.jsx("button",{type:"submit",className:"btn btn-primary",disabled:X,children:X?i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),r("Saving...","kivicare-clinic-management-system")]}):r("Save Doctor","kivicare-clinic-management-system")})]})]})}),i.jsx("div",{className:"kc-doctor-ratings-reviews",children:y&&(t||e)&&w&&g&&i.jsx(cne,{doctorId:w})})]})]})}const dne=Object.freeze(Object.defineProperty({__proto__:null,default:Hy},Symbol.toStringTag,{value:"Module"})),Po={getDoctorSessions:(t={})=>ve({endpoint:"doctor-sessions",method:"GET",data:t}),getDoctorSession:t=>ve({endpoint:`doctor-sessions/${t}`,method:"GET"}),createDoctorSession:t=>ve({endpoint:"doctor-sessions",method:"POST",data:t}),updateDoctorSession:(t,e)=>ve({endpoint:`doctor-sessions/${t}`,method:"PUT",data:e}),deleteDoctorSession:t=>ve({endpoint:`doctor-sessions/${t}`,method:"DELETE"}),bulkDeleteDoctorSessions:t=>ve({endpoint:"doctor-sessions/bulk/delete",method:"POST",data:{ids:t}}),bulkUpdateDoctorSessionStatus:(t,e)=>ve({endpoint:"doctor-sessions/bulk/status",method:"PUT",data:{ids:t,status:e}}),exportDoctorSessions:(t={})=>ve({endpoint:"doctor-sessions/export",method:"GET",data:t})},ua={all:["doctorSessions"],lists:()=>[...ua.all,"list"],list:t=>[...ua.lists(),{filters:t}],details:()=>[...ua.all,"detail"],detail:t=>[...ua.details(),t]},mne=(t={},e={})=>ft({queryKey:ua.list(t),queryFn:()=>Po.getDoctorSessions(t),...e}),une=(t,e={})=>ft({queryKey:ua.detail(t),queryFn:()=>Po.getDoctorSession(t),enabled:!!t,...e}),hne=()=>{const t=ze();return Le({mutationFn:e=>Po.createDoctorSession(e),onSuccess:()=>{t.invalidateQueries({queryKey:ua.lists()})}})},pne=()=>{const t=ze();return Le({mutationFn:({id:e,...n})=>Po.updateDoctorSession(e,n),onSuccess:(e,n)=>{t.invalidateQueries({queryKey:ua.detail(n.id)}),t.invalidateQueries({queryKey:ua.lists()})}})},gne=()=>{const t=ze();return Le({mutationFn:e=>Po.deleteDoctorSession(e),onSuccess:()=>{t.invalidateQueries({queryKey:ua.lists()})}})},fne=()=>{const t=ze();return Le({mutationFn:e=>Po.bulkDeleteDoctorSessions(e),onSuccess:()=>{t.invalidateQueries({queryKey:ua.lists()})}})},vne=()=>Le({mutationFn:t=>Po.exportDoctorSessions(t)}),fh=[{id:"mon",label:r("Monday","kivicare-clinic-management-system")},{id:"tue",label:r("Tuesday","kivicare-clinic-management-system")},{id:"wed",label:r("Wednesday","kivicare-clinic-management-system")},{id:"thu",label:r("Thursday","kivicare-clinic-management-system")},{id:"fri",label:r("Friday","kivicare-clinic-management-system")},{id:"sat",label:r("Saturday","kivicare-clinic-management-system")},{id:"sun",label:r("Sunday","kivicare-clinic-management-system")}],bn={timeToMinutes:t=>{if(!t)return 0;const[e,n]=t.split(":").map(Number);return e*60+n},minutesToTime:t=>{const e=Math.floor(t/60),n=t%60;return`${e.toString().padStart(2,"0")}:${n.toString().padStart(2,"0")}`},formatTime:t=>{if(!t)return"";try{const[e,n]=t.split(":").map(Number),s=new Date;return s.setHours(e,n,0),s.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}catch{return t}},isBefore:(t,e)=>bn.timeToMinutes(t)<bn.timeToMinutes(e),isAfter:(t,e)=>bn.timeToMinutes(t)>bn.timeToMinutes(e),doRangesOverlap:(t,e,n,s)=>{const a=bn.timeToMinutes(t),l=bn.timeToMinutes(e),o=bn.timeToMinutes(n),c=bn.timeToMinutes(s);return a<c&&o<l}},Dm=({name:t,control:e,rules:n,placeholder:s,error:a,id:l})=>i.jsx(ye,{name:t,control:e,rules:n,render:({field:o})=>{let c=Array.isArray(o.value)?o.value[0]:o.value;return c instanceof Date&&(c=`${c.getHours().toString().padStart(2,"0")}:${c.getMinutes().toString().padStart(2,"0")}`),i.jsx(Un,{value:c,onChange:d=>{if(d&&d.length>0){const m=d[0],u=`${m.getHours().toString().padStart(2,"0")}:${m.getMinutes().toString().padStart(2,"0")}`;o.onChange(u)}},options:{enableTime:!0,noCalendar:!0,dateFormat:"H:i",time_24hr:!0,defaultHour:9,defaultMinute:0,minuteIncrement:5,inline:!0,locale:Wn()},className:`form-control d-none ${a?"is-invalid":""}`,placeholder:s,id:l||t})}}),xne=()=>{const{getValues:t}=gb(),e=f.useCallback(l=>o=>o?!0:r("Start time is required","kivicare-clinic-management-system"),[]),n=f.useCallback(l=>o=>{if(!o)return r("End time is required","kivicare-clinic-management-system");const c=t(`days.${l}.mainSession.start`);return c?bn.isAfter(o,c)?bn.timeToMinutes(o)-bn.timeToMinutes(c)<30?r("Session must be at least 30 minutes long","kivicare-clinic-management-system"):!0:r("End time must be after start time","kivicare-clinic-management-system"):!0},[t]),s=f.useCallback((l,o)=>c=>{if(!c)return r("Break start time is required","kivicare-clinic-management-system");const d=t(`days.${l}.mainSession`);if(!d||!d.start||!d.end)return r("Please set main session times first","kivicare-clinic-management-system");if(!bn.isAfter(c,d.start)||!bn.isBefore(c,d.end))return r("Break must be within session hours","kivicare-clinic-management-system");const u=(t(`days.${l}.breaks`)||[]).filter((h,p)=>p!==o);for(let h=0;h<u.length;h++){const p=u[h];if(p.start&&p.end&&bn.timeToMinutes(c)>=bn.timeToMinutes(p.start)&&bn.timeToMinutes(c)<bn.timeToMinutes(p.end))return r("Break times cannot overlap with other breaks","kivicare-clinic-management-system")}return!0},[t]),a=f.useCallback((l,o)=>c=>{if(!c)return r("Break end time is required","kivicare-clinic-management-system");const d=t(`days.${l}.mainSession`),m=t(`days.${l}.breaks.${o}.start`);if(!d||!d.start||!d.end)return r("Please set main session times first","kivicare-clinic-management-system");if(!m)return r("Please set break start time first","kivicare-clinic-management-system");if(!bn.isAfter(c,m))return r("Break end time must be after break start time","kivicare-clinic-management-system");if(!bn.isBefore(c,d.end))return r("Break must end before session ends","kivicare-clinic-management-system");if(bn.timeToMinutes(c)-bn.timeToMinutes(m)<15)return r("Break must be at least 15 minutes long","kivicare-clinic-management-system");const p=(t(`days.${l}.breaks`)||[]).filter((g,v)=>v!==o);for(let g=0;g<p.length;g++){const v=p[g];if(v.start&&v.end&&bn.doRangesOverlap(m,c,v.start,v.end))return r("Break times cannot overlap with other breaks","kivicare-clinic-management-system")}return!0},[t]);return{validateSessionStart:e,validateSessionEnd:n,validateBreakStart:s,validateBreakEnd:a}};function Rm({isEditing:t=!1,hideDoctorField:e=!1}){const{id:n,doctorId:s}=Yt(),{data:a,isLoading:l}=une(n),{data:o}=af(s?parseInt(s):null),{pathname:c}=Kn(),d=c.includes("setting")?"/setting":"",m=hn(),{isAddonActive:u,defaultClinicId:h,currentDoctorId:p,userRole:g}=mt(),{data:v}=Sn(),x=Li(),y=Xn(),b=Jn(),k=u("kiviPro"),w=x?p:s?parseInt(s):null,T=hne(),j=pne(),D=en({defaultValues:{clinic:b||y?{value:h,label:""}:k?null:{value:h,label:""},doctor:null,timeSlot:"00:00",days:fh.map(he=>({id:he.id,enabled:!1,mainSession:{start:"09:00",end:"18:00"},breaks:[]}))},mode:"onChange"}),{control:_,handleSubmit:N,setValue:A,getValues:P,formState:{errors:E,isValid:I}}=D,M=ze(),O=async({page:he,per_page:le,search:ee,doctor_id:me})=>{try{const K={dataType:"clinicList",page:he,per_page:le,search:ee};return me&&(K.doctor_id=me,K.exclude_with_sessions=!0),await M.fetchQuery({queryKey:pt.list(K),queryFn:()=>Dt.getStaticData(K),staleTime:300*1e3})}catch(K){return console.error("Error loading clinics:",K),{data:[],pagination:{has_more:!1}}}},F=async({page:he,per_page:le,search:ee,clinic_ids:me})=>{try{const K={dataType:"staticData",staticDataType:"doctors",clinic_ids:me,page:he,per_page:le,search:ee};return me&&!n&&(K.exclude_with_sessions=!0),await M.fetchQuery({queryKey:pt.list(K),queryFn:()=>Dt.getStaticData(K),staleTime:0})}catch(K){return console.error("Error loading doctors:",K),{data:[],pagination:{total:0,per_page:10,current_page:1,total_pages:0,has_more:!1}}}},H=br({control:_,name:"clinic"}),G=f.useMemo(()=>b||y?h:k?Array.isArray(H)&&H.length>0?H.map(le=>le.value):H&&H.value?H.value:null:h,[k,H,h,g]),{data:z,isLoading:ie}=WT(G),W=f.useMemo(()=>z?.data?z.data:[],[z?.data]);f.useEffect(()=>{if(o?.data&&w&&!n){const he=o.data.display_name||"";A("doctor",{value:w,label:he})}},[o,w,n,A]),f.useEffect(()=>{if(a&&n){const he=a?.data,le=fh.map(ee=>{const me=he.days?.find(re=>re.id===ee.id),K=!!me?.enabled;return K&&Array.isArray(me.breaks)&&me.breaks.length>0&&me.breaks,{id:ee.id,enabled:K,mainSession:K?{start:me.main_session?.start||"",end:me.main_session?.end||""}:{start:"",end:""},breaks:K?Array.isArray(me.breaks)?me.breaks:[]:[]}});D.reset({clinic:he.clinicId?{value:he.clinicId,label:he.clinicName}:null,doctor:he.doctorId?{value:he.doctorId,label:he.doctorName}:null,timeSlot:he.time_slot||"00:30",days:le})}},[a,n,D]);const ge=br({control:_,name:"days"}),ae=f.useMemo(()=>ge?.every(he=>he.enabled)||!1,[ge]),U=f.useCallback(he=>{const le=P("days");A("days",le.map(ee=>({...ee,enabled:he,mainSession:he?{start:"09:00",end:"18:00"}:{start:"",end:""}})))},[P,A]),X=f.useCallback(he=>{const le=he.days.filter(re=>re.enabled);if(le.length===0){Se.error(r("Please select at least one day","kivicare-clinic-management-system"));return}for(const re of le)if(!re.mainSession.start||!re.mainSession.end){Se.error(r(`Please set session times for ${fh.find(oe=>oe.id===re.id)?.label}`,"kivicare-clinic-management-system"));return}const ee=s?parseInt(s):x?p:he?.doctor?.value,me=he?.clinic?.value||h,K={doctor_id:ee,clinic_id:me,time_slot:he?.timeSlot,days:he.days.map(re=>({id:re.id,enabled:re.enabled,main_session:{start:re.mainSession.start,end:re.mainSession.end},breaks:re.breaks.map(oe=>({start:oe.start,end:oe.end}))}))};t&&n?j.mutate({id:n,...K},{onSuccess:()=>{Se.success(r("Doctor session updated successfully","kivicare-clinic-management-system")),m(`${d}/doctor-session`)},onError:re=>{Se.error(re?.message||r("Failed to update session","kivicare-clinic-management-system"))}}):T.mutate(K,{onSuccess:()=>{Se.success(r("Doctor session created successfully","kivicare-clinic-management-system")),s&&M.invalidateQueries({queryKey:pt.list({dataType:"clinicList",doctor_id:parseInt(s)})});const re=s?`/doctor/${s}/sessions`:`${d}/doctor-session`;m(re)},onError:re=>{console.log(re),Se.error(re?.response?.data?.message||r("Failed to create session","kivicare-clinic-management-system"))}})},[x,p,h,T,j,t,n,d,m,s]),J=f.useCallback(he=>{const le=Object.keys(he);if(le.length>0){const ee=le[0];if(["clinic","doctor","timeSlot"].includes(ee)){const me=document.getElementById(ee);if(me){me.scrollIntoView({behavior:"smooth",block:"center"});return}}if(ee==="days"){const me=he.days;for(const K in me){const re=me[K];if(re){if(re.mainSession){if(re.mainSession.start){document.getElementById(`days.${K}.mainSession.start`)?.scrollIntoView({behavior:"smooth",block:"center"});return}if(re.mainSession.end){document.getElementById(`days.${K}.mainSession.end`)?.scrollIntoView({behavior:"smooth",block:"center"});return}}if(re.breaks)for(const oe in re.breaks){const C=re.breaks[oe];if(C){if(C.start){document.getElementById(`days.${K}.breaks.${oe}.start`)?.scrollIntoView({behavior:"smooth",block:"center"});return}if(C.end){document.getElementById(`days.${K}.breaks.${oe}.end`)?.scrollIntoView({behavior:"smooth",block:"center"});return}}}}}}}},[]);return t&&l?i.jsx(eg,{}):i.jsx(hS,{...D,children:i.jsxs("div",{className:"doctor-session-module",children:[i.jsx("h5",{className:"mb-4",children:t?r("Edit Doctor Sessions","kivicare-clinic-management-system"):r("Add Doctor Session","kivicare-clinic-management-system")}),i.jsxs("form",{onSubmit:N(X,J),className:"mb-0",children:[i.jsx("div",{className:"mb-5",children:i.jsx("div",{className:"card",children:i.jsx("div",{className:"card-body",children:i.jsx("div",{className:"row gy-3",children:i.jsx(yne,{control:_,errors:E,isProActive:k,isDoctorUser:x,isEditing:t,isReceptionistUser:y,isClinicAdminUser:b,loadClinicOptions:O,loadDoctorOptions:F,doctors:W,loadingDoctors:ie,doctorSessionData:a?.data,hideDoctorField:e,doctorId:s})})})})}),i.jsx(bne,{checked:ae,onChange:U}),i.jsx("div",{className:"row row-cols-lg-2 row-cols-1 g-4",children:ge?.map((he,le)=>i.jsx(wne,{day:fh.find(ee=>ee.id===he.id),dayIndex:le,control:_,errors:E},he.id))}),i.jsx(kne,{isValid:I,isEditing:t,onCancel:()=>m(`${d}/doctor-session`)})]})]})})}const yne=({control:t,errors:e,isProActive:n,isDoctorUser:s,isEditing:a,isReceptionistUser:l,isClinicAdminUser:o,loadClinicOptions:c,loadDoctorOptions:d,doctors:m,loadingDoctors:u,doctorSessionData:h,hideDoctorField:p=!1,doctorId:g})=>{const v=br({control:t,name:"clinic"});return i.jsxs(i.Fragment,{children:[n&&!l&&!o&&i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[r("Select Clinic","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx(ye,{name:"clinic",control:t,rules:{required:r("Clinic selection is required","kivicare-clinic-management-system")},render:({field:x})=>i.jsx(rn,{id:"clinic",loadOptions:c,value:x.value,onChange:y=>{x.onChange(y),t._formValues.doctor=null},placeholder:r("Select Clinic","kivicare-clinic-management-system"),className:`react-select-box ${e.clinic?"is-invalid":""}`,classNamePrefix:"react-select",dependencies:g?{doctor_id:parseInt(g)}:{}})}),e.clinic&&i.jsx("div",{className:"invalid-feedback d-block",children:e.clinic.message})]})}),!s&&!p&&i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[r("Select Doctor","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx(ye,{name:"doctor",control:t,rules:{required:r("Doctor selection is required","kivicare-clinic-management-system")},render:({field:x})=>i.jsx(rn,{id:"doctor",loadOptions:d,value:x.value,onChange:y=>x.onChange(y),placeholder:v?r("Select Doctor","kivicare-clinic-management-system"):r("Select Clinic first","kivicare-clinic-management-system"),className:`react-select-box ${e.doctor?"is-invalid":""}`,classNamePrefix:"react-select",isDisabled:!v,dependencies:{clinic_ids:v?.value}},`doctor-${v?.value||"none"}`)}),e.doctor&&i.jsx("div",{className:"invalid-feedback d-block",children:e.doctor.message})]})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[r("Time Slot Duration","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx(ye,{name:"timeSlot",control:t,rules:{required:r("Time slot is required","kivicare-clinic-management-system"),validate:x=>!x||x==="00:00"?r("Time slot is required","kivicare-clinic-management-system"):!0},render:({field:x})=>i.jsx(Dm,{name:x.name,control:t,rules:x.rules,placeholder:r("Select time slot","kivicare-clinic-management-system"),error:e.timeSlot,format:"m"})}),e.timeSlot&&i.jsx("div",{className:"invalid-feedback d-block",children:e.timeSlot.message})]})})]})},bne=({checked:t,onChange:e})=>i.jsx("div",{className:"mb-3",children:i.jsxs("div",{className:"form-check",children:[i.jsx("input",{type:"checkbox",className:"form-check-input",checked:t,onChange:n=>e(n.target.checked),id:"select-all-days"}),i.jsx("label",{htmlFor:"select-all-days",className:"form-label heading-color fw-semibold font-size-14 mb-0",children:r("Select All Days","kivicare-clinic-management-system")})]})}),kne=({isValid:t,isEditing:e,onCancel:n})=>i.jsxs("div",{className:"d-flex justify-content-end mt-5",children:[i.jsx("button",{type:"button",className:"btn btn-secondary me-3",onClick:n,children:r("Cancel","kivicare-clinic-management-system")}),i.jsx("button",{type:"submit",className:"btn btn-primary",children:e?r("Update Sessions","kivicare-clinic-management-system"):r("Save Session","kivicare-clinic-management-system")})]}),wne=He.memo(({day:t,dayIndex:e,control:n,errors:s})=>{const a=br({control:n,name:`days.${e}.enabled`,defaultValue:!1}),{fields:l,append:o,remove:c}=yr({control:n,name:`days.${e}.breaks`}),d=f.useCallback(()=>o({start:"",end:""}),[o]),{validateSessionStart:m,validateSessionEnd:u,validateBreakStart:h,validateBreakEnd:p}=xne(),g=br({control:n,name:`days.${e}.mainSession.start`}),v=br({control:n,name:`days.${e}.mainSession.end`}),x=f.useMemo(()=>{if(g&&v){const y=bn.timeToMinutes(v)-bn.timeToMinutes(g);return y>0?y:0}return 0},[g,v]);return i.jsx("div",{className:"col",children:i.jsx("div",{className:"card h-100 mb-0",children:i.jsx("div",{className:"card-body",children:i.jsxs("div",{className:"session-box",children:[i.jsxs("div",{className:"d-flex align-items-center gap-2 justify-content-between flex-wrap",children:[i.jsxs("div",{className:"form-check",children:[i.jsx(ye,{name:`days.${e}.enabled`,control:n,render:({field:y})=>i.jsx("input",{type:"checkbox",className:"form-check-input",checked:y.value,onChange:b=>{const k=b.target.checked;y.onChange(k)},id:`days.${e}.enabled`})}),i.jsx("label",{className:"form-label heading-color fw-semibold font-size-14 mb-0",htmlFor:`days.${e}.enabled`,children:t.label})]}),a?i.jsx("button",{type:"button",className:"btn btn-link fw-bold font-size-14 p-0",onClick:d,disabled:!g||!v,children:r("Add Break","kivicare-clinic-management-system")}):i.jsx("span",{className:"fw-bold font-size-14 text-muted",children:r("Not scheduled","kivicare-clinic-management-system")})]}),a&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"d-flex align-items-md-center column-gap-4 row-gap-2 flex-column flex-md-row mt-3",children:[i.jsxs("div",{className:"flex-grow-1",children:[i.jsx("label",{className:"form-label small text-muted mb-1",children:r("Session Start","kivicare-clinic-management-system")}),i.jsx(Dm,{name:`days.${e}.mainSession.start`,control:n,rules:{required:a&&r("Start time is required","kivicare-clinic-management-system"),validate:m(e)},placeholder:r("Start Time","kivicare-clinic-management-system"),error:s?.days?.[e]?.mainSession?.start})]}),i.jsxs("div",{className:"flex-grow-1",children:[i.jsx("label",{className:"form-label small text-muted mb-1",children:r("Session End","kivicare-clinic-management-system")}),i.jsx(Dm,{name:`days.${e}.mainSession.end`,control:n,rules:{required:a&&r("End time is required","kivicare-clinic-management-system"),validate:u(e)},placeholder:r("End Time","kivicare-clinic-management-system"),error:s?.days?.[e]?.mainSession?.end})]})]}),g&&v&&x>0&&i.jsx("div",{className:"bg-info-subtle rounded py-2 px-3 my-3",children:i.jsxs("small",{children:[r("Session Duration:","kivicare-clinic-management-system")," ",Math.floor(x/60),"h ",x%60,"m",i.jsx("br",{}),r("Time:","kivicare-clinic-management-system")," ",bn.formatTime(g)," - ",bn.formatTime(v)]})}),(s?.days?.[e]?.mainSession?.start||s?.days?.[e]?.mainSession?.end)&&i.jsx("div",{className:"bg-danger-subtle rounded py-2 px-3",children:s.days[e].mainSession.start?.message||s.days[e].mainSession.end?.message}),l.map((y,b)=>i.jsx(jne,{dayIndex:e,breakIndex:b,control:n,errors:s,onRemove:()=>c(b),validateStart:h(e,b),validateEnd:p(e,b)},y.id)),g&&v&&l.length===0&&i.jsx("div",{className:"text-center mt-3",children:i.jsx("small",{className:"text-muted",children:r('No breaks scheduled. Click "Add Break" to add a break time.',"kivicare-clinic-management-system")})})]})]})})})})}),jne=He.memo(({dayIndex:t,breakIndex:e,control:n,errors:s,onRemove:a,validateStart:l,validateEnd:o})=>{const c=`days.${t}.breaks.${e}.start`,d=`days.${t}.breaks.${e}.end`,m=br({control:n,name:c}),u=br({control:n,name:d}),h=f.useMemo(()=>{if(m&&u){const p=bn.timeToMinutes(u)-bn.timeToMinutes(m);return p>0?p:0}return 0},[m,u]);return i.jsx(i.Fragment,{children:i.jsxs("div",{className:"border rounded p-3 mb-3",children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-2",children:[i.jsxs("h6",{className:"mb-0",children:[r("Break","kivicare-clinic-management-system")," ",e+1]}),i.jsxs("button",{type:"button",className:"btn btn-sm btn-outline-danger",onClick:a,children:[i.jsx("i",{className:"ph ph-trash"})," ",r("Remove","kivicare-clinic-management-system")]})]}),i.jsxs("div",{className:"d-flex align-items-md-center column-gap-4 row-gap-2 flex-column flex-md-row mb-2",children:[i.jsxs("div",{className:"flex-grow-1",children:[i.jsx("label",{className:"form-label small text-muted mb-1",children:r("Break Start","kivicare-clinic-management-system")}),i.jsx(Dm,{name:c,control:n,rules:{required:r("Break start time is required","kivicare-clinic-management-system"),validate:l},placeholder:r("Break Start","kivicare-clinic-management-system"),error:s?.days?.[t]?.breaks?.[e]?.start})]}),i.jsxs("div",{className:"flex-grow-1",children:[i.jsx("label",{className:"form-label small text-muted mb-1",children:r("Break End","kivicare-clinic-management-system")}),i.jsx(Dm,{name:d,control:n,rules:{required:r("Break end time is required","kivicare-clinic-management-system"),validate:o},placeholder:r("Break End","kivicare-clinic-management-system"),error:s?.days?.[t]?.breaks?.[e]?.end})]})]}),m&&u&&h>0&&i.jsx("div",{className:"alert alert-light py-1 mb-0",children:i.jsxs("small",{children:[r("Break Duration:","kivicare-clinic-management-system")," ",h,"m (",bn.formatTime(m)," - ",bn.formatTime(u),")"]})}),(s?.days?.[t]?.breaks?.[e]?.start||s?.days?.[t]?.breaks?.[e]?.end)&&i.jsx("div",{className:"alert alert-danger py-2 mt-2 mb-0",children:i.jsx("small",{children:s.days[t].breaks[e].start?.message||s.days[t].breaks[e].end?.message})})]})})});function Ow({filterByDoctor:t=!1}){const{pathname:e}=Kn(),{doctorId:n}=Yt(),s=e.includes("setting")?"/setting":"",a=Li(),[l,o]=f.useState([]),c=ze(),d=Xn(),m=Jn(),[u,h]=f.useState({page:1,perPage:10,search:"",doctor_id:t&&n?parseInt(n):"",clinic_id:"",days:"",timeSlot:"",orderBy:"",order:""}),[p,g]=f.useState(""),[v,x]=f.useState(!1),[y,b]=f.useState(!1),k=f.useRef(null),{isAddonActive:w,hasCapability:T}=mt(),j=w?w("kiviPro"):!0,{data:D,isLoading:_,error:N}=mne(u),{data:A,isLoading:P}=Mw({perPage:100}),{data:E}=af(t&&n?parseInt(n):null),I=async({page:K,per_page:re,search:oe})=>{try{const C={dataType:"clinicList",page:K,per_page:re,search:oe},R=await c.fetchQuery({queryKey:pt.list(C),queryFn:()=>Dt.getStaticData(C),staleTime:300*1e3}),te=R.data.map(ne=>({value:ne.id,label:ne.label||ne.name}));return o(ne=>[...ne,...te]),R}catch(C){return console.error("Error loading clinics:",C),{data:[],pagination:{has_more:!1}}}};f.useEffect(()=>{t&&n&&h(K=>({...K,doctor_id:parseInt(n)}))},[n,t]);const M=gne(),O=fne(),F=vne(),H=D?.data?.sessions||[],G=D?.data?.pagination||{total:0,lastPage:1,perPage:10,currentPage:1},z=f.useMemo(()=>A?.data?.doctors?[...A.data.doctors.map(K=>({value:K.id,label:K.name}))]:[],[A?.data?.doctors]),ie=async K=>{try{yt({title:r("Exporting...","kivicare-clinic-management-system"),text:r("Please wait. This may take a few seconds.","kivicare-clinic-management-system")});const re={format:K,...u},oe=await F.mutateAsync(re);if(oe?.data?.sessions){const C=oe.data.sessions,R=new Date().toISOString().split("T")[0],te=C.map(ne=>({id:ne.id,clinic_id:ne.clinic_id||"",clinic_name:ne.clinic_name||"",days:ne.days||"",doctor_id:ne.doctor_id||"",doctor_name:ne.doctor_name||"",time_slot:ne.time_slot||"",morning_session:ne.morning_session||"",evening_session:ne.evening_session||""}));switch(K){case"csv":hs(te,`doctor-sessions-${R}.csv`);break;case"xls":ps(te,`doctor-sessions-${R}.xls`);break;case"pdf":gs(te,`doctor-sessions-${R}.pdf`,"Doctor Sessions List");break;default:throw new Error("Invalid export format")}Wi(),Se.success(r("Export completed successfully.","kivicare-clinic-management-system"))}else throw new Error("No data received from server")}catch(re){console.error("Export error:",re),rt({title:r("Error!","kivicare-clinic-management-system"),text:re.message||r("Failed to export data. Please try again.","kivicare-clinic-management-system"),confirmButtonText:r("OK","kivicare-clinic-management-system")})}},W=()=>ie("csv"),ge=()=>ie("xls"),[ae,U]=f.useState(!1),X=()=>{ae||(U(!0),ie("pdf"),setTimeout(()=>U(!1),2e3))},J=Ln(),he=f.useMemo(()=>[J.accessor("doctor",{id:"doctor",header:()=>r("Doctors","kivicare-clinic-management-system"),cell:K=>i.jsx(dn,{profileUrl:K.row.original.doctor.doctor_image_url,name:K.row.original.doctor.name,email:K.row.original.doctor.email,variant:"primary",size:"md",nameLabel:r("Doctor","kivicare-clinic-management-system")})}),...j&&!d&&!m?[J.accessor("clinic",{id:"clinic",header:()=>r("Clinics","kivicare-clinic-management-system"),cell:K=>i.jsx(dn,{profileUrl:K.row.original.clinic.clinic_image_url,name:K.row.original.clinic.name,email:K.row.original.clinic.email,variant:"primary",size:"md",nameLabel:r("Clinic","kivicare-clinic-management-system")})})]:[],J.accessor("days",{id:"days",header:()=>r("Days","kivicare-clinic-management-system"),enableSorting:!1,cell:K=>i.jsx("div",{className:"d-flex flex-wrap gap-1",children:K.row.original.days.split(", ").map((re,oe)=>i.jsx("span",{className:"badge bg-primary-subtle text-primary",children:re},oe))})}),J.accessor("time_slot",{id:"time_slot",header:()=>r("Time Slot","kivicare-clinic-management-system"),cell:K=>{const re=K.row.original.time_slot;if(!re)return i.jsx("span",{children:""});const oe=parseInt(re);if(oe>=60){const C=Math.floor(oe/60),R=oe%60;return i.jsxs("span",{children:[C,"h ",R>0?`${R}min`:""]})}return i.jsxs("span",{children:[oe," min"]})}}),...T("doctor_session_edit")||T("doctor_session_delete")?[J.accessor("actions",{header:()=>r("Action","kivicare-clinic-management-system"),enableSorting:!1,cell:K=>{const re=oe=>C=>i.jsx(ut,{id:`tooltip-${K.cell.row.original.id}-${oe}`,...C,children:oe});return i.jsxs("div",{className:"d-flex align-items-center gap-3 fs-5",children:[T("doctor_session_edit")&&i.jsx(Qe,{placement:"top",overlay:re(r("Edit","kivicare-clinic-management-system")),children:i.jsx(ht,{to:`${s}/doctor-session/edit/${K.row.original.id}`,className:"text-success",children:i.jsx("i",{className:"ph text-bold ph-pencil-simple-line"})})}),T("doctor_session_delete")&&i.jsx(Qe,{placement:"top",overlay:re(r("Delete","kivicare-clinic-management-system")),children:i.jsx("button",{className:"btn btn-link text-danger p-0 fs-5",onClick:()=>le(K.row.original),children:i.jsx("i",{className:"ph text-bold ph-trash"})})})]})}})]:[]],[j,T]),le=K=>{kt({title:r("Delete Sessions?","kivicare-clinic-management-system"),text:r("You're about to delete all sessions for this doctor.<br>This will remove all scheduled days and cannot be undone.","kivicare-clinic-management-system"),icon:"ph-warning",confirmButtonText:r("Delete permanently","kivicare-clinic-management-system"),cancelButtonText:r("Keep sessions","kivicare-clinic-management-system"),confirmButtonClass:"btn-danger"}).then(re=>{re.isConfirmed&&(yt({title:r("Deleting Sessions...","kivicare-clinic-management-system"),text:r("Please wait while we remove the selected sessions.<br>This won't take long.","kivicare-clinic-management-system")}),M.mutate(K.id,{onSuccess:oe=>{Tt({title:r("Sessions Deleted","kivicare-clinic-management-system"),text:oe?.message||r("Sessions have been deleted successfully.","kivicare-clinic-management-system"),confirmButtonText:r("Back to sessions","kivicare-clinic-management-system")}),K.doctor?.id&&c.invalidateQueries({queryKey:pt.list({dataType:"clinicList",doctor_id:K.doctor.id})})},onError:oe=>{rt({text:r("Failed to delete sessions. Please try again.","kivicare-clinic-management-system")})}}))})},ee=f.useCallback(K=>{g(K.target.value),h(re=>({...re,search:K.target.value,page:1}))},[]),me=K=>{if(K.length>0){const{id:re,desc:oe}=K[0],C={doctor:"doctor_name",clinic:"clinic_name",time_slot:"time_slot"};h(R=>({...R,orderby:C[re]||re,order:oe?"desc":"asc",page:1}))}else h(re=>({...re,orderby:"",order:"",page:1}))};return i.jsx(i.Fragment,{children:i.jsxs("div",{children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap row-gap-2 column-gap-3 mb-4",children:[i.jsx("div",{className:"page-title",children:i.jsx("h6",{className:"m-0",children:t&&E?.data?.display_name?`${E.data.display_name}'s Sessions`:r("Doctor Sessions","kivicare-clinic-management-system")})}),i.jsxs("div",{className:"d-flex align-items-center row-gap-2 column-gap-3 flex-wrap",children:[t&&n&&i.jsxs(ht,{to:`/doctor/${n}/add-session`,className:"btn btn-secondary d-flex align-items-center gap-2",children:[i.jsx("i",{className:"ph ph-plus-circle"}),i.jsx("span",{children:r("Add Session","kivicare-clinic-management-system")})]}),!t&&T("doctor_session_add")&&i.jsxs(ht,{to:`${s}/doctor-session/add`,className:"btn btn-secondary d-flex align-items-center gap-2",children:[i.jsx("i",{className:"ph ph-plus-circle"}),i.jsx("span",{children:r("Add Session","kivicare-clinic-management-system")})]})]})]}),i.jsxs("div",{className:"kc-table-wrapper",children:[i.jsx(Ci,{in:!y,timeout:100,classNames:"fade-top-bottom",unmountOnExit:!0,nodeRef:k,children:i.jsxs("div",{ref:k,className:"d-flex justify-content-between align-items-xl-center flex-column flex-lg-row gap-3 mb-4 position-absolute top-0 w-100",children:[i.jsxs("div",{className:"table-selection d-flex gap-3 flex-sm-row",children:[j&&!d&&!m&&i.jsx(rn,{id:"clinic-filter",placeholder:r("Clinic Name","kivicare-clinic-management-system"),className:"react-select-box",classNamePrefix:"react-select",loadOptions:I,value:l.find(K=>K.value===u.clinic_id)||null,onChange:K=>{h(re=>({...re,clinic_id:K?K.value:""}))},dependencies:{},isClearable:!0}),!a&&!t&&i.jsx(ct,{placeholder:r("Doctor Name","kivicare-clinic-management-system"),className:"react-select-box",classNamePrefix:"react-select",options:z,onChange:K=>h(re=>({...re,doctor_id:K?K.value:""})),isLoading:P,value:z.find(K=>K.value===u.doctor_id)||null,isClearable:!0,styles:{menuPortal:K=>({...K,zIndex:9999})}})]}),i.jsxs("div",{className:"btn-toolbar d-flex gap-3 align-items-center justify-content-lg-end table-action-right",children:[i.jsx("div",{className:"d-flex align-items-center input-search-select",children:i.jsxs("div",{className:"input-group input-group-search",children:[i.jsx("span",{className:"input-group-text",children:i.jsx("i",{className:"ph ph-magnifying-glass"})}),i.jsx("input",{type:"text",className:"form-control",placeholder:r("Search Anything","kivicare-clinic-management-system"),value:p,onChange:ee})]})}),T("doctor_session_export")&&j&&i.jsxs("div",{className:"download-buttons d-flex align-items-center gap-3",children:[i.jsx(Qe,{placement:"top",overlay:i.jsx(ut,{children:r("Export CSV","kivicare-clinic-management-system")}),children:i.jsx("button",{className:"btn btn-white",onClick:W,disabled:F.isPending,children:i.jsx("i",{className:"ph ph-file-csv"})})}),i.jsx(Qe,{placement:"top",overlay:i.jsx(ut,{children:r("Export Excel","kivicare-clinic-management-system")}),children:i.jsx("button",{className:"btn btn-white",onClick:ge,disabled:F.isPending,children:i.jsx("i",{className:"ph ph-file-xls"})})}),i.jsx(Qe,{placement:"top",overlay:i.jsx(ut,{children:r("Export PDF","kivicare-clinic-management-system")}),children:i.jsx("button",{className:"btn btn-white",onClick:X,disabled:F.isPending||ae,children:i.jsx("i",{className:"ph ph-file-pdf"})})})]})]})]})}),i.jsx(wn,{data:H,columns:he,isLoading:_,error:N,currentPage:G.currentPage,perPage:G.perPage,totalItems:G.total,lastPage:G.lastPage,onPageChange:K=>h(re=>({...re,page:K})),onPerPageChange:K=>h(re=>({...re,perPage:K,page:1})),onSortingChange:me,enableSelection:!0,moduleNamePlural:"doctor sessions",bulkActions:T("doctor_session_delete")?[{label:r("Delete","kivicare-clinic-management-system"),action:(K,re)=>{const oe=K.map(C=>C.id);kt({title:r("Delete Sessions?","kivicare-clinic-management-system"),text:r(`Youre about to delete <strong>${K.length} sessions</strong>.<br>This action cannot be undone.`,"kivicare-clinic-management-system"),icon:"ph-warning",confirmButtonText:r("Delete permanently","kivicare-clinic-management-system"),cancelButtonText:r("Keep sessions","kivicare-clinic-management-system"),confirmButtonClass:"btn-danger"}).then(C=>{C.isConfirmed&&(yt({title:r("Deleting Sessions...","kivicare-clinic-management-system"),text:r("Please wait while we remove the selected sessions.<br>This won't take long.","kivicare-clinic-management-system")}),O.mutate(oe,{onSuccess:R=>{Tt({title:r("Sessions Deleted","kivicare-clinic-management-system"),text:r(`${K.length} session${K.length>1?"s":""} has been deleted.`,"kivicare-clinic-management-system"),confirmButtonText:r("Back to sessions","kivicare-clinic-management-system")}),re()},onError:R=>{console.error("Bulk delete doctor sessions error:",R);const te=R?.response?.data?.message||R?.message||r("Failed to delete selected doctor sessions. Please try again.","kivicare-clinic-management-system");rt({text:te})}}))})},icon:i.jsx("i",{className:"ph ph-trash"})}]:[],isBulkActionShow:K=>{b(K)}})]})]})})}function zy({isEditing:t=!1}){const{id:e,doctorId:n}=Yt(),s=hn(),[a,l]=f.useState([]),{isAddonActive:o,defaultClinicId:c,userRole:d,googleMeetIntegration:m,currencyPrefix:u,currencyPostfix:h}=mt(),{data:p}=af(n?parseInt(n):null),g=Li(),v=Xn(),x=Jn(),y=Cr(),b=o("kiviPro"),{data:k,isLoading:w,error:T}=eH(e,{enabled:t&&!!e}),j=k?.data,D=tH(),_=nH(),[N,A]=f.useState(!1),[P,E]=f.useState(0),I=N||D.isPending||_.isPending||w,{data:M,isLoading:O}=Ha("service_type"),{data:F}=B7(),{data:H,isLoading:G}=Og({enabled:b}),z=ze(),ie=async({page:xe,per_page:Re,search:nt})=>{try{const Pe={dataType:"clinicList",page:xe,per_page:Re,search:nt},Ue=await z.fetchQuery({queryKey:pt.list(Pe),queryFn:()=>Dt.getStaticData(Pe),staleTime:300*1e3}),Je=Ue.data.map(et=>({value:et.id,label:et.label||et.name}));return l(et=>[...et,...Je]),Ue}catch(Pe){return console.error("Error loading clinics:",Pe),{data:[],pagination:{has_more:!1}}}},W=async({page:xe,per_page:Re,search:nt,clinic_ids:Pe,telemed_service:Ue})=>{try{let Je=Pe;(v||x)&&c&&(Je=c);const et={dataType:"staticData",staticDataType:"doctors",clinic_ids:Je,telemed_service:Ue,page:xe,per_page:Re,search:nt};return await z.fetchQuery({queryKey:pt.list(et),queryFn:()=>Dt.getStaticData(et),staleTime:0})}catch(Je){return console.error("Error loading doctors:",Je),{data:[],pagination:{total:0,per_page:10,current_page:1,total_pages:0,has_more:!1}}}},ge=async({page:xe,per_page:Re,search:nt})=>{try{const Pe={dataType:"staticData",staticDataType:"staticDataWithLabel",type:"service_type",page:xe,per_page:Re,search:nt};return await z.fetchQuery({queryKey:pt.list(Pe),queryFn:()=>Dt.getStaticData(Pe),staleTime:0})}catch(Pe){return console.error("Error loading doctors:",Pe),{data:[],pagination:{total:0,per_page:10,current_page:1,total_pages:0,has_more:!1}}}},ae=Fg({specialty_type:"service_type"}),{register:U,handleSubmit:X,control:J,setValue:he,watch:le,formState:{errors:ee},reset:me}=en({defaultValues:{serviceImage:"",serviceImageId:"",category:null,name:"",charges:0,telemed_service:{value:"no",label:"No"},clinic:[],doctor:[],duration:0,status:null,allowMulti:null}}),K=le("telemed_service");f.useEffect(()=>{if(p?.data&&n&&!t){const xe=p.data.clinics?.[0]?.id,Re=p.data.clinics?.[0]?.clinic_name,nt=p.data.display_name||"";he("doctor",[{value:parseInt(n),label:nt}]),(x||v)&&c&&Re?he("clinic",[{value:c,label:Re}]):xe&&Re&&he("clinic",[{value:xe,label:Re}])}},[p,n,t,he,x,v,c]);const re=br({control:J,name:"clinic"}),oe=f.useMemo(()=>x||v?c:b?Array.isArray(re)&&re.length>0?re.map(Re=>Re.value):re&&re.value?re.value:null:c,[b,re,c,x,v]),{data:C,isLoading:R}=WT(oe),te=f.useMemo(()=>[{value:"yes",label:"Yes"},{value:"no",label:"No"}],[]),ne=f.useMemo(()=>[{value:"1",label:r("Active","kivicare-clinic-management-system")},{value:"0",label:r("Inactive","kivicare-clinic-management-system")}],[]),Y=f.useMemo(()=>[{value:"yes",label:"Yes"},{value:"no",label:"No"}],[]),q=xe=>xe==null?null:ne.find(Re=>Re.value===xe||Re.value===String(xe)||xe===1&&Re.value==="active"||xe===0&&Re.value==="inactive")||null,B=xe=>xe==null?null:te.find(Re=>Re.value===xe||Re.value===String(xe))||null,se=xe=>xe==null?null:Y.find(Re=>Re.value===xe||Re.value===String(xe))||null;f.useEffect(()=>{if(t&&j&&!w){j.service_image_url&&he("serviceImage",j.service_image_url),j.service_image_id&&he("serviceImageId",j.service_image_id),he("category",j.service_category),he("name",j.name||""),he("charges",j.price||0);const xe=B(j.telemed_service);he("telemed_service",xe),he("clinic",j.clinics||[]),he("doctor",j.doctors||[]),he("duration",j.duration||0);const Re=q(j.status);he("status",Re);const nt=se(j.allow_multi);he("allowMulti",nt)}},[t,j,w,he]);const Q=(xe,Re)=>{he(xe,Re.url||Re.image),he(`${xe}Id`,Re.id||Re.imageId)},pe={category:{required:r("Service category is required","kivicare-clinic-management-system")},name:{required:r("Service name is required","kivicare-clinic-management-system"),minLength:{value:3,message:r("Service name must be at least 3 characters","kivicare-clinic-management-system")},maxLength:{value:100,message:r("Service name must be less than 100 characters","kivicare-clinic-management-system")}},charges:{required:r("Charges are required","kivicare-clinic-management-system"),min:{value:0,message:r("Charges must be a positive number","kivicare-clinic-management-system")},pattern:{value:/^\d+(\.\d{1,2})?$/,message:r("Invalid price format (e.g. 50 or 50.00)","kivicare-clinic-management-system")}},telemed_service:{required:r("Telemed service selection is required","kivicare-clinic-management-system")},clinic:{required:r("At least one clinic must be selected","kivicare-clinic-management-system"),validate:xe=>(Array.isArray(xe)?xe.length>0:!!xe)||r("At least one clinic must be selected","kivicare-clinic-management-system")},doctor:{required:r("At least one doctor must be selected","kivicare-clinic-management-system"),validate:xe=>(Array.isArray(xe)?xe.length>0:!!xe)||r("At least one doctor must be selected","kivicare-clinic-management-system")},status:{required:r("Status is required","kivicare-clinic-management-system")},allowMulti:{required:r("Multi-selection option is required","kivicare-clinic-management-system")}},$=async xe=>{A(!0);const Re=et=>Array.isArray(et)?et:et?[et]:[],nt=Re(xe.clinic),Pe=Re(xe.doctor),Ue=nt.length?nt:Re(F?.data),Je={profile_image:xe.serviceImageId,category:xe.category?.id,name:xe.name,price:xe.charges,telemed_service:xe.telemed_service?.value,clinics:Ue,doctors:Pe,duration:xe.duration,status:xe.status?.value,allow_multi:xe.allowMulti?.value};try{let et;t?(et=await _.mutateAsync({id:e,...Je}),Se.success(r("Service updated successfully","kivicare-clinic-management-system"),{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0})):(et=await D.mutateAsync(Je),Se.success(r("Service created successfully","kivicare-clinic-management-system"),{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0})),s("/service",{replace:!0})}catch(et){const Be=et?.response?.data?.message||(t?r("Failed to update service","kivicare-clinic-management-system"):r("Failed to create service","kivicare-clinic-management-system"));Se.error(Be,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0})}finally{A(!1)}},ce=xe=>{console.log("Validation errors:",xe);const Re=Object.keys(xe)[0],nt=document.getElementById(Re);nt&&(nt.scrollIntoView({behavior:"smooth",block:"center"}),nt.focus())},De=()=>{s("/service")};return f.useEffect(()=>{if(T){const xe=T?.response?.data?.message||r("You do not have permission to view this service.","kivicare-clinic-management-system");Se.error(xe,{position:"top-right",autoClose:5e3}),s("/service",{replace:!0})}},[T,s]),t&&w?i.jsx(tg,{}):i.jsx("div",{className:"position-relative",children:(!t||t&&j)&&i.jsxs("form",{onSubmit:X($,ce),className:"mb-0",children:[i.jsx("div",{className:"card",children:i.jsxs("div",{className:"card-body",children:[i.jsx("h6",{className:"mb-3",children:r("Basic Information","kivicare-clinic-management-system")}),i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-lg-4 d-flex justify-content-center pt-5",children:i.jsx(ye,{name:"serviceImage",control:J,render:({field:xe})=>i.jsx(yl,{id:"service-image-upload",name:"serviceImage",label:r("Image","kivicare-clinic-management-system"),defaultImage:xe.value,defaultImageId:le("serviceImageId"),onChange:Re=>Q("serviceImage",Re),className:"",size:200})})}),i.jsx("div",{className:"col-lg-8",children:i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[r("Service Category","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx(ye,{name:"category",control:J,rules:pe.category,render:({field:xe})=>i.jsxs(i.Fragment,{children:[i.jsx(rn,{id:"category",loadOptions:ge,value:xe.value,onChange:Re=>{xe.onChange(Re)},onCreateOption:Re=>{ae.mutate(Re,{onSuccess:nt=>{if(nt?.data?.data){const Pe={id:nt.data.data.id,label:nt.data.data.label};z.setQueryData(["staticData","service_type"],Ue=>({...Ue,data:[...Ue?.data||[],Pe]})),xe.onChange(Pe),E(Ue=>Ue+1)}Se.success(r("category added successfully","kivicare-clinic-management-system"))},onError:nt=>{console.error("Failed to save category:",nt),console.error("Error details:",nt.response?.data),Se.error(r("Failed to save category to database, but it will be used for this form submission.","kivicare-clinic-management-system"))}})},getOptionValue:Re=>Re.id,placeholder:r("Select or create categories","kivicare-clinic-management-system"),isLoading:O,isSearchable:!0,isMulti:!1,closeMenuOnSelect:!0,className:`react-select ${ee.category?"is-invalid":""} react-select-box`,classNamePrefix:"react-select",isDisabled:t,noOptionsMessage:()=>r("Type to create a new category","kivicare-clinic-management-system"),formatCreateLabel:Re=>r("Add category","kivicare-clinic-management-system")+`: "${Re}"`,isCreatable:!0},P),i.jsxs("small",{className:"text-muted mt-1 d-block",children:[i.jsx("span",{className:"text-primary",children:r("Note:","kivicare-clinic-management-system")})," ",r("Type and press enter to add new Category","kivicare-clinic-management-system")]})]})}),ee.category&&i.jsx("div",{className:"invalid-feedback d-block",children:ee.category.message})]})}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[r("Service Name","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx("input",{type:"text",id:"name",className:`form-control ${ee.name?"is-invalid":""}`,placeholder:r("Enter the Service Name","kivicare-clinic-management-system"),...U("name",pe.name),disabled:t&&w}),ee.name&&i.jsx("div",{className:"invalid-feedback d-block",children:ee.name.message})]})}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[r("Charges","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsxs("div",{className:"input-group",children:[u&&i.jsx("span",{className:"input-group-text",children:u}),i.jsx("input",{type:"number",id:"charges",step:"0.01",min:"0",className:`form-control ${ee.charges?"is-invalid":""}`,placeholder:r("Enter Charges","kivicare-clinic-management-system"),...U("charges",pe.charges),disabled:t&&w}),h&&i.jsx("span",{className:"input-group-text",children:h})]}),ee.charges&&i.jsx("div",{className:"invalid-feedback d-block",children:ee.charges.message})]})}),(o("googlemeet")||o("telemed"))&&i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[r("Telemed Service","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx(ye,{name:"telemed_service",control:J,rules:pe.telemed_service,render:({field:xe})=>i.jsx(ct,{...xe,onChange:Re=>{xe.onChange(Re),he("doctor",[])},id:"telemed_service",options:te,placeholder:r("Select Telemed Service","kivicare-clinic-management-system"),className:`react-select ${ee.telemed_service?"is-invalid":""} react-select-box`,classNamePrefix:"react-select",isDisabled:t&&w,styles:{menuPortal:Re=>({...Re,zIndex:9999})}})}),ee.telemed_service&&i.jsx("div",{className:"invalid-feedback d-block",children:ee.telemed_service.message})]})}),b&&y&&i.jsx("div",{className:"col-md-6",children:i.jsx("div",{className:"form-group",children:i.jsx(ye,{name:"clinic",control:J,rules:pe.clinic,render:({field:xe})=>{const Re=a??H?.data??[],[nt,Pe]=f.useState(!1),Ue=Array.isArray(xe.value)&&xe.value.length>0&&xe.value.length===Re.length,Je=async et=>{if(et.target.checked){Pe(!0);try{const _e=((await ie({page:-1,per_page:1,search:""}))?.data||[]).map(Ye=>({value:Ye.id,label:Ye.label||Ye.name}));l(_e),xe.onChange(_e)}catch(ke){console.error("Error selecting all clinics:",ke)}finally{Pe(!1)}}else xe.onChange([])};return i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-1",children:[i.jsxs("label",{className:"form-label",children:[r("Clinic","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),!t&&i.jsxs("div",{className:"form-check",children:[i.jsx("input",{type:"checkbox",id:"selectAllClinics",className:"form-check-input",checked:Ue,onChange:Je,disabled:nt}),i.jsx("label",{className:"form-check-label",htmlFor:"selectAllClinics",children:nt?r("Loading...","kivicare-clinic-management-system"):r("Select All","kivicare-clinic-management-system")})]})]}),i.jsx(rn,{id:"clinic-filter",placeholder:r("Clinic Name","kivicare-clinic-management-system"),className:"react-select-box",classNamePrefix:"react-select",isMulti:!t,loadOptions:ie,value:xe.value,onChange:et=>{xe.onChange(et),he("doctor",null)}}),ee.clinic&&i.jsx("div",{className:"invalid-feedback d-block",children:ee.clinic.message})]})}})})}),!g&&i.jsx("div",{className:"col-md-6",children:i.jsx("div",{className:"form-group",children:i.jsx(ye,{name:"doctor",control:J,rules:pe.doctor,render:({field:xe})=>{const Re=Array.isArray(le("clinic"))?le("clinic").map(ke=>ke.value):le("clinic")?.value,[nt,Pe]=f.useState(!1),[Ue,Je]=f.useState(0),et=Array.isArray(xe.value)&&xe.value.length>0&&Ue>0&&xe.value.length===Ue,Be=async ke=>{if(ke.target.checked){Pe(!0);try{const tt=((await W({page:-1,per_page:1,search:"",clinic_ids:Re}))?.data||[]).map(zt=>({value:zt.id,label:zt.label||zt.name}));Je(tt.length),xe.onChange(tt)}catch(Ye){console.error("Error selecting all doctors:",Ye)}finally{Pe(!1)}}else xe.onChange([])};return f.useEffect(()=>{Re&&W({page:-1,per_page:1,search:"",clinic_ids:Re}).then(ke=>{Je(ke?.data?.length||0)})},[Re]),i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-1",children:[i.jsxs("label",{className:"form-label",children:[r("Doctor","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),!t&&i.jsxs("div",{className:"form-check",children:[i.jsx("input",{type:"checkbox",id:"selectAllDoctors",className:"form-check-input",checked:et,onChange:Be,disabled:nt||!Re}),i.jsx("label",{className:"form-check-label",htmlFor:"selectAllDoctors",children:nt?r("Loading...","kivicare-clinic-management-system"):r("Select All","kivicare-clinic-management-system")})]})]}),i.jsx(rn,{id:"doctor",loadOptions:W,value:xe.value,onChange:ke=>xe.onChange(ke),placeholder:Re?r("Select doctor","kivicare-clinic-management-system"):r("Select a clinic first","kivicare-clinic-management-system"),className:`react-select-box ${ee.doctor?"is-invalid":""}`,classNamePrefix:"react-select",isMulti:!t,isDisabled:!Re||t&&w,dependencies:{clinic_ids:Re,telemed_service:K?.value}},`doctor-${Re}-${K?.value}`),ee.doctor&&i.jsx("div",{className:"invalid-feedback d-block",children:ee.doctor.message})]})}})})})]})}),i.jsx("div",{className:"col-lg-12",children:i.jsxs("div",{className:"row gy-4",children:[b&&i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{className:"form-label",children:r("Duration","kivicare-clinic-management-system")}),i.jsx(ye,{name:"duration",control:J,rules:pe.duration,render:({field:xe})=>{let Re=xe.value;if(typeof Re=="number"&&!isNaN(Re)){const nt=Math.floor(Re/60).toString().padStart(2,"0"),Pe=(Re%60).toString().padStart(2,"0");Re=`${nt}:${Pe}`}else Re instanceof Date&&(Re=`${Re.getHours().toString().padStart(2,"0")}:${Re.getMinutes().toString().padStart(2,"0")}`);return i.jsx(Un,{value:Re,onChange:nt=>{if(nt&&nt.length>0){const Pe=nt[0],Ue=Pe.getHours()*60+Pe.getMinutes();xe.onChange(Ue)}else xe.onChange(null)},options:{enableTime:!0,noCalendar:!0,dateFormat:"H:i",time_24hr:!0,defaultHour:0,defaultMinute:0,minuteIncrement:5,inline:!0,locale:Wn()},className:`form-control d-none  ${ee.duration?"is-invalid":""}`,placeholder:r("MM:SS","kivicare-clinic-management-system")})}}),ee.duration&&i.jsx("div",{className:"invalid-feedback d-block",children:ee.duration.message})]})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[r("Status","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx(ye,{name:"status",control:J,rules:pe.status,render:({field:xe})=>i.jsx(ct,{...xe,id:"status",options:ne,placeholder:r("Select Status","kivicare-clinic-management-system"),className:`react-select ${ee.status?"is-invalid":""} react-select-box`,classNamePrefix:"react-select",styles:{menuPortal:Re=>({...Re,zIndex:9999})}})}),ee.status&&i.jsx("div",{className:"invalid-feedback d-block",children:ee.status.message})]})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[r("Allow multi selection while booking?","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx(ye,{name:"allowMulti",control:J,rules:pe.allowMulti,render:({field:xe})=>i.jsx(ct,{...xe,id:"allowMulti",options:Y,placeholder:r("Allow multi selection?","kivicare-clinic-management-system"),className:`react-select ${ee.allowMulti?"is-invalid":""} react-select-box`,classNamePrefix:"react-select",isDisabled:t&&w,styles:{menuPortal:Re=>({...Re,zIndex:9999})}})}),ee.allowMulti&&i.jsx("div",{className:"invalid-feedback d-block",children:ee.allowMulti.message})]})})]})})]})]})}),i.jsxs("div",{className:"d-flex align-items-center justify-content-end flex-wrap gap-3",children:[i.jsx("button",{type:"button",className:"btn btn-secondary",onClick:De,disabled:I||t&&w,children:r("Cancel","kivicare-clinic-management-system")}),i.jsx("button",{type:"submit",className:"btn btn-primary",disabled:I||t&&w,children:I?i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),t?r("Updating...","kivicare-clinic-management-system"):r("Saving...","kivicare-clinic-management-system")]}):t?r("Update Service","kivicare-clinic-management-system"):r("Save","kivicare-clinic-management-system")})]})]})})}const Nne=[Gn({path:"/doctor",title:"Doctors",outlet:Bte,permissions:["doctor_list"],meta:{description:"Doctor management system",icon:"stethoscope",showInSidebar:!0},children:[We({path:"",component:Vte,title:"All Doctors",index:!0,permissions:["doctor_list"],skeleton:()=>i.jsx("div",{className:"container-fluid pb-0",children:i.jsx(_n,{columns:6,rows:5,showBreadcrumb:!0,showPageHeader:!0,showFilterBar:!0})}),meta:{description:"List of all doctors",breadcrumb:"All Doctors"}}),We({path:"add",component:Hy,title:"Add Doctor",props:{isEditing:!1},permissions:["doctor_add"],skeleton:Ly,meta:{description:"Create a new doctor",breadcrumb:"Add Doctor"}}),We({path:"edit/:id",component:Hy,title:"Edit Doctor",props:{isEditing:!0},permissions:["doctor_edit"],meta:{description:"Edit existing doctor",breadcrumb:"Edit Doctor"},skeleton:Ly}),We({path:":doctorId/sessions",component:Ow,title:"Doctor Sessions",props:{filterByDoctor:!0},permissions:["doctor_session_list"],meta:{description:"View all sessions for this doctor",breadcrumb:t=>t.doctorId?`Doctor #${t.doctorId} Sessions`:"Doctor Sessions"},skeleton:()=>i.jsx("div",{className:"container-fluid pb-0",children:i.jsx(_n,{columns:6,rows:5,showBreadcrumb:!0,showPageHeader:!0,showFilterBar:!0})})}),We({path:":doctorId/add-session",component:Rm,title:"Add Doctor Session",props:{isEditing:!1,mode:"create",hideDoctorField:!0},permissions:["doctor_session_add"],meta:{description:"Add a new doctor session for specific doctor",breadcrumb:"Add Session"},skeleton:eg}),We({path:":doctorId/add-service",component:zy,title:"Add Doctor Service",props:{isEditing:!1},permissions:["service_add"],meta:{description:"Add a new service for specific doctor",breadcrumb:"Add Service"},skeleton:tg})]})],Cne=()=>{const t=Kn();return t.pathname==="/tax/add"||t.pathname.startsWith("/tax/edit/"),i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center gap-3 flex-wrap mb-4",children:[i.jsx(_i,{}),i.jsx("div",{children:t.pathname!=="/tax"&&i.jsx(ei,{size:"sm"})})]}),i.jsx(fs,{})]})},Vy=()=>i.jsx("div",{className:"container-fluid pb-0",children:i.jsx("div",{className:"route-container",children:i.jsx("div",{className:"w-100",children:i.jsxs("div",{className:"patients-container",children:[i.jsx(wl,{titleWidth:"80px"}),i.jsx("div",{className:"card",children:i.jsx("div",{className:"card-body",children:i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-md-6 col-xl-4",children:i.jsx(Ne,{labelWidth:"50px"})}),i.jsx("div",{className:"col-md-6 col-xl-4",children:i.jsx(Ne,{labelWidth:"80px"})}),i.jsxs("div",{className:"col-md-6 col-xl-4",children:[i.jsx(Ne,{labelWidth:"55px"}),i.jsx(S,{width:"200px",height:"0.8rem",className:"mt-2"})]}),i.jsxs("div",{className:"col-md-6 col-xl-4",children:[i.jsx(Ne,{labelWidth:"60px"}),i.jsx(S,{width:"220px",height:"0.8rem",className:"mt-2"})]}),i.jsxs("div",{className:"col-md-6 col-xl-4",children:[i.jsx(Ne,{labelWidth:"60px"}),i.jsx(S,{width:"230px",height:"0.8rem",className:"mt-2"})]}),i.jsx("div",{className:"col-md-6 col-xl-4",children:i.jsx(Ne,{labelWidth:"55px"})})]})})}),i.jsxs("div",{className:"d-flex align-items-center justify-content-end flex-wrap gap-3 mt-4",children:[i.jsx(st,{width:"80px",height:"38px"}),i.jsx(st,{width:"110px",height:"38px"})]})]})})})}),Rr={createTax:t=>ve({endpoint:"taxes",method:"POST",data:t}),updateTax:(t,e)=>ve({endpoint:`taxes/${t}`,method:"PUT",data:e}),getTaxById:t=>ve({endpoint:`taxes/${t}`,method:"GET"}),getTaxes:t=>ve({endpoint:"taxes",method:"GET",data:t}),deleteTax:t=>ve({endpoint:`taxes/${t}`,method:"DELETE"}),bulkUpdateTaxStatus:(t,e)=>ve({endpoint:"taxes/bulk/status",method:"PUT",data:{ids:t,status:e}}),bulkDeleteTaxes:t=>ve({endpoint:"taxes/bulk/delete",method:"POST",data:{ids:t}}),updateTaxStatus:(t,e)=>ve({endpoint:`taxes/${t}/status`,method:"PUT",data:{status:e}}),exportTaxes:(t={})=>ve({endpoint:"taxes/export",method:"GET",data:t})},_ne=()=>{const t=ze();return Le({mutationFn:async({id:e,data:n,isEdit:s})=>s&&e?Rr.updateTax(e,n):Rr.createTax(n),onSuccess:()=>{t.invalidateQueries({queryKey:["taxes"]})}})},Sne=(t={},e={})=>ft({queryKey:["taxes",t],queryFn:()=>Rr.getTaxes(t),...e}),Ene=()=>{const t=ze();return Le({mutationFn:e=>Rr.bulkDeleteTaxes(e),onSuccess:()=>{t.invalidateQueries({queryKey:["taxes"]})}})},Tne=()=>{const t=ze();return Le({mutationFn:({ids:e,status:n})=>Rr.bulkUpdateTaxStatus(e,n),onSuccess:()=>{t.invalidateQueries({queryKey:["taxes"]})}})},Ane=(t,e={})=>ft({queryKey:["tax",t],queryFn:()=>Rr.getTaxById(t),enabled:!!t,...e}),Dne=()=>{const t=ze();return Le({mutationFn:e=>Rr.deleteTax(e),onSuccess:()=>{t.invalidateQueries({queryKey:["taxes"]})}})},Rne=()=>{const t=ze();return Le({mutationFn:({id:e,status:n})=>Rr.updateTaxStatus(e,n),onSuccess:()=>{t.invalidateQueries({queryKey:["taxes"]})}})},Pne=()=>Le({mutationFn:t=>Rr.exportTaxes(t)}),Mne=()=>{const{isAddonActive:t,getCurrencyDetail:e,hasCapability:n}=mt(),a=e().prefix,l=t("kiviPro"),[o,c]=f.useState(!1),[d,m]=f.useState(!1),u=f.useRef(null),[h,p]=f.useState({}),g=Xn(),v=Jn(),x=ze(),y=async({page:X,per_page:J,search:he,clinic_ids:le})=>{try{const ee={dataType:"staticData",staticDataType:"users",role:oc(),page:X,per_page:J,search:he||""},me=le&&typeof le=="object"?le.value:le,K=String(me||"").split(",").filter(oe=>oe&&oe!=="undefined"&&oe!=="null").join(",");return K&&(ee.clinic_ids=K),(await x.fetchQuery({queryKey:pt.list(ee),queryFn:()=>Dt.getStaticData(ee),staleTime:300*1e3})).data.map(oe=>({value:oe.id||oe.ID,label:oe.label||oe.display_name}))}catch(ee){return console.error("Error loading doctors:",ee),{options:[],hasMore:!1}}},b=async({page:X,per_page:J,search:he,clinic_id:le,doctor_ids:ee})=>{try{const me={dataType:"staticData",staticDataType:"servicesWithPrice",page:X,per_page:J,search:he||""},K=le&&typeof le=="object"?le.value:le,re=ee&&typeof ee=="object"?ee.value:ee,oe=Number(K);!isNaN(oe)&&oe>0&&(me.clinic_id=oe);const C=String(re||"").split(",").filter(te=>te&&te!=="undefined"&&te!=="null").join(",");return C&&(me.doctor_ids=C),(await x.fetchQuery({queryKey:pt.list(me),queryFn:()=>Dt.getStaticData(me),staleTime:300*1e3})).data.map(te=>({value:te.id,label:te.label}))}catch(me){return console.error("Error loading services:",me),{options:[],hasMore:!1}}},k=Dne(),w=Ene(),T=Tne(),j=Rne(),D=Pne(),{data:_,isLoading:N}=Sne(h,{enabled:l}),A=Array.isArray(_?.data?.taxes)?_.data.taxes:[],P=_?.data?.page||1,E=_?.data?.per_page||10,I=_?.data?.total||0,M=_?.data?.total_pages||1,{data:O}=Og(),{data:F}=UT(),{data:H}=q7({clinicId:h.clinic&&typeof h.clinic=="object"?h.clinic.value:h.clinic||null,doctorId:h.doctor&&typeof h.doctor=="object"?h.doctor.value:h.doctor||null}),G=Array.isArray(O?.data)?O.data:[];Array.isArray(F?.data)&&F.data,Array.isArray(H?.data)&&H.data;const z=f.useMemo(()=>Object.fromEntries(Object.entries(h).map(([X,J])=>{const he=J&&typeof J=="object"&&"value"in J?J.value:J;return[X,he]}).filter(([X,J])=>J!==""&&J!==null&&J!==void 0)),[h]),ie=X=>{if(X.length>0){const{id:J,desc:he}=X[0],le={id:"id",taxName:"taxName",taxRate:"taxRate",clinicName:"clinicName",doctorName:"doctorName",serviceName:"serviceName",status:"status"};p(ee=>({...ee,orderby:le[J]||J,order:he?"desc":"asc",page:1}))}else p(J=>({...J,orderby:"",order:"",page:1}))},W=async X=>{try{yt({title:r("Exporting...","kivicare-clinic-management-system"),text:r("Please wait. This may take a few seconds.","kivicare-clinic-management-system")});const J={format:X,...z},le=(await D.mutateAsync(J))?.data?.taxes||[];if(!le.length){kt({icon:"ph-info",title:r("No data","kivicare-clinic-management-system"),text:r("No tax records found for export.","kivicare-clinic-management-system"),confirmButtonText:r("OK","kivicare-clinic-management-system"),showCancelButton:!1});return}const ee=new Date().toISOString().split("T")[0],me=le.map(K=>({id:K.id,tax_name:K.tax_name,tax_rate:K.tax_rate,clinic_name:K.clinic_name,doctor_name:K.doctor_name,service_name:K.service_name,status:K.status}));switch(X){case"csv":hs(me,`taxes-${ee}.csv`);break;case"xls":ps(me,`taxes-${ee}.xls`);break;case"pdf":gs(me,`taxes-${ee}.pdf`,"Tax Records");break;default:throw new Error("Invalid export format")}Wi(),Se.success(r("Export completed successfully.","kivicare-clinic-management-system"))}catch(J){console.error("Export error:",J),rt({title:r("Error!","kivicare-clinic-management-system"),text:J.message||r("Failed to export data. Please try again.","kivicare-clinic-management-system"),confirmButtonText:r("OK","kivicare-clinic-management-system")})}},ge=A.map(X=>({id:X.id,taxName:X.name,taxRate:X.taxType==="fixed"?a+`${X.taxValue}`:`${X.taxValue}%`,clinicName:X.clinicName,clinic_image_url:X.clinic_image_url,clinicEmail:X.clinicEmail,doctorName:X.doctorName,doctor_image_url:X.doctor_image_url,doctorEmail:X.doctorEmail,serviceName:X.serviceName,service_image_url:X.service_image_url,status:X.status})),ae=l?[{label:r("Delete","kivicare-clinic-management-system"),action:(X,J)=>{const he=X.map(le=>le.id);kt({title:r("Delete Taxes?","kivicare-clinic-management-system"),text:r(`Youre about to delete <strong>${X.length} taxes</strong>.<br>This action cannot be undone.`,"kivicare-clinic-management-system"),icon:"ph-warning",confirmButtonText:r("Delete permanently","kivicare-clinic-management-system"),cancelButtonText:r("Keep taxes","kivicare-clinic-management-system"),confirmButtonClass:"btn-danger"}).then(le=>{le.isConfirmed&&(yt({title:r("Deleting Taxes...","kivicare-clinic-management-system"),text:r("Please wait while we remove the selected taxes.<br>This won't take long.","kivicare-clinic-management-system")}),w.mutate(he,{onSuccess:()=>{Tt({title:r("Tax Deleted","kivicare-clinic-management-system"),text:r(`${X.length} tax${X.length>1?"s":""} has been deleted.`,"kivicare-clinic-management-system"),confirmButtonText:r("Back to taxes","kivicare-clinic-management-system")}).then(()=>{J()})},onError:ee=>{rt({title:r("Error","kivicare-clinic-management-system"),text:ee?.response?.data?.message||ee?.message||r("Failed to delete selected taxes.","kivicare-clinic-management-system")})}}))})},icon:i.jsx("i",{className:"ph ph-trash"})},{label:r("Set Active","kivicare-clinic-management-system"),action:(X,J)=>{const he=X.map(le=>le.id);kt({title:r("Update Status","kivicare-clinic-management-system"),text:r("Are you sure you want to set the selected Taxes to active?","kivicare-clinic-management-system"),icon:"ph-question",confirmButtonText:r("Yes, update","kivicare-clinic-management-system"),cancelButtonText:r("Cancel","kivicare-clinic-management-system"),confirmButtonClass:"btn-primary"}).then(le=>{le.isConfirmed&&(yt({title:r("Updating...","kivicare-clinic-management-system"),text:r("Please wait. This may take a few seconds.","kivicare-clinic-management-system")}),T.mutate({ids:he,status:"1"},{onSuccess:ee=>{Tt({title:r("Success","kivicare-clinic-management-system"),text:ee?.message||r("Taxes status has been updated successfully.","kivicare-clinic-management-system"),confirmButtonText:r("OK","kivicare-clinic-management-system")}).then(()=>{J()})},onError:ee=>{const me=ee?.response?.data?.message||ee?.message||r("Failed to update taxes status. Please try again.","kivicare-clinic-management-system");rt({title:r("Error","kivicare-clinic-management-system"),text:me,confirmButtonText:r("OK","kivicare-clinic-management-system")})}}))})},icon:i.jsx("i",{className:"ph ph-check-circle"})},{label:r("Set Inactive","kivicare-clinic-management-system"),action:(X,J)=>{const he=X.map(le=>le.id);kt({title:r("Update Status","kivicare-clinic-management-system"),text:r("Are you sure you want to set the selected Taxes to inactive?","kivicare-clinic-management-system"),icon:"ph-warning",confirmButtonText:r("Yes, update","kivicare-clinic-management-system"),cancelButtonText:r("Cancel","kivicare-clinic-management-system"),confirmButtonClass:"btn-danger"}).then(le=>{le.isConfirmed&&(yt({title:r("Updating...","kivicare-clinic-management-system"),text:r("Please wait. This may take a few seconds.","kivicare-clinic-management-system")}),T.mutate({ids:he,status:"0"},{onSuccess:ee=>{Tt({title:r("Success","kivicare-clinic-management-system"),text:ee?.message||r("Taxes status has been updated successfully.","kivicare-clinic-management-system"),confirmButtonText:r("OK","kivicare-clinic-management-system")}).then(()=>{J()})},onError:ee=>{console.error("Bulk update status error:",ee);const me=ee?.response?.data?.message||ee?.message||r("Failed to update taxes status. Please try again.","kivicare-clinic-management-system");rt({title:r("Error","kivicare-clinic-management-system"),text:me,confirmButtonText:r("OK","kivicare-clinic-management-system")})}}))})},icon:i.jsx("i",{className:"ph ph-x-circle"})}]:[],U=f.useMemo(()=>[{accessorKey:"id",header:()=>r("ID","kivicare-clinic-management-system"),enableSorting:!0,cell:X=>X.getValue()},{accessorKey:"taxName",header:()=>r("Tax Name","kivicare-clinic-management-system"),enableSorting:!0,cell:X=>X.getValue()},{accessorKey:"taxRate",header:()=>r("Tax Rate","kivicare-clinic-management-system"),enableSorting:!0,cell:X=>X.getValue()},...!g&&!v?[{accessorKey:"clinicName",header:()=>r("Clinic","kivicare-clinic-management-system"),enableSorting:!0,cell:({row:X})=>i.jsx(i.Fragment,{children:X.original.clinicName?i.jsx(dn,{profileUrl:X.original.clinic_image_url,name:X.original.clinicName,email:X.original.clinicEmail}):i.jsx("span",{className:"",children:r("All Clinic","kivicare-clinic-management-system")})})}]:[],{accessorKey:"doctorName",header:()=>r("Doctor","kivicare-clinic-management-system"),enableSorting:!0,cell:({row:X})=>i.jsx(i.Fragment,{children:X.original.doctorName?i.jsx(dn,{profileUrl:X.original.doctor_image_url,name:X.original.doctorName,email:X.original.doctorEmail}):i.jsx("span",{className:"",children:r("All Doctor","kivicare-clinic-management-system")})})},{accessorKey:"serviceName",header:()=>r("Service","kivicare-clinic-management-system"),enableSorting:!0,cell:({row:X})=>i.jsx(i.Fragment,{children:X.original.serviceName?i.jsx(dn,{profileUrl:X.original.service_image_url,name:X.original.serviceName}):i.jsx("span",{className:"",children:r("All Service","kivicare-clinic-management-system")})})},{accessorKey:"status",header:()=>r("Status","kivicare-clinic-management-system"),enableSorting:!0,cell:X=>{const J=X.row.original,he=Number(J.status),le=async ee=>{const me=ee.target.checked?1:0,{isConfirmed:K}=await kt({title:r("Update Status","kivicare-clinic-management-system"),text:r("Are you sure you want to update status?","kivicare-clinic-management-system"),icon:"ph-question",confirmButtonText:r("Yes, update","kivicare-clinic-management-system"),cancelButtonText:r("Cancel","kivicare-clinic-management-system"),confirmButtonClass:"btn-primary"});if(!K){ee.target.checked=he===1;return}yt({title:r("Updating...","kivicare-clinic-management-system"),text:r("Please wait. This may take a few seconds.","kivicare-clinic-management-system")}),j.mutate({id:J.id,status:me},{onSuccess:()=>{Tt({title:r("Success","kivicare-clinic-management-system"),text:r("Status updated successfully.","kivicare-clinic-management-system")})},onError:re=>{ee.target.checked=he===1,rt({title:r("Error","kivicare-clinic-management-system"),text:re?.response?.data?.message||re?.message||r("Failed to update status.","kivicare-clinic-management-system")})}})};return n("tax_edit")?i.jsxs("div",{className:"form-check form-switch",children:[i.jsx("input",{className:"form-check-input",type:"checkbox",role:"switch",id:`tax-status-${J.id}`,checked:he===1,onChange:le}),i.jsx("label",{className:"form-check-label",htmlFor:`tax-status-${J.id}`,children:i.jsx("span",{className:`badge ${he===1?"bg-success-subtle text-success":"bg-danger-subtle text-danger"}`,children:he===1?r("Active","kivicare-clinic-management-system"):r("Inactive","kivicare-clinic-management-system")})})]}):i.jsx("span",{className:`badge ${he===1?"bg-success-subtle text-success":"bg-danger-subtle text-danger"}`,children:he===1?r("Active","kivicare-clinic-management-system"):r("Inactive","kivicare-clinic-management-system")})}},...n("tax_edit")||n("tax_view")||n("tax_delete")?[{id:"action",header:()=>r("Action","kivicare-clinic-management-system"),cell:X=>{const J=X.row.original,he=le=>ee=>i.jsx(ut,{id:`tooltip-${X.cell.row.original.id}-${le}`,...ee,children:le});return i.jsx("div",{className:"d-flex align-items-center gap-3",children:l?i.jsxs(i.Fragment,{children:[n("tax_edit")&&i.jsx(Qe,{placement:"top",overlay:he(r("Edit","kivicare-clinic-management-system")),children:i.jsx(ht,{to:`/tax/edit/${J.id}`,className:"d-inline-block",children:i.jsx("span",{className:"text-success fs-5",children:i.jsx("i",{className:"ph ph-pencil-simple-line"})})})}),n("tax_delete")&&i.jsx(Qe,{placement:"top",overlay:he(r("Delete","kivicare-clinic-management-system")),children:i.jsx("a",{href:"#",className:"d-inline-block delete-btn",onClick:async le=>{le.preventDefault();const{isConfirmed:ee}=await kt({title:r("Delete Tax?","kivicare-clinic-management-system"),text:r("You're about to delete this tax.<br>This action cannot be undone.","kivicare-clinic-management-system"),icon:"ph-warning",confirmButtonText:r("Delete permanently","kivicare-clinic-management-system"),cancelButtonText:r("Keep tax","kivicare-clinic-management-system"),confirmButtonClass:"btn-danger"});ee&&(yt({title:r("Deleting Tax...","kivicare-clinic-management-system"),text:r("Please wait while we remove the selected tax.<br>This won't take long.","kivicare-clinic-management-system")}),k.mutate(J.id,{onSuccess:()=>{Tt({title:r("Tax Deleted","kivicare-clinic-management-system"),text:r("Tax has been deleted.","kivicare-clinic-management-system"),confirmButtonText:r("Back to taxes","kivicare-clinic-management-system")})},onError:me=>{rt({title:r("Error","kivicare-clinic-management-system"),text:me?.response?.data?.message||me?.message||r("Failed to delete tax.","kivicare-clinic-management-system")})}}))},children:i.jsx("span",{className:"text-danger fs-5",children:i.jsx("i",{className:"ph ph-trash"})})})})]}):i.jsx("span",{className:"text-muted",children:r("Pro Only","kivicare-clinic-management-system")})})}}]:[]],[n,g,v]);return i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-4",children:[i.jsx("h5",{children:r("Tax List","kivicare-clinic-management-system")}),i.jsxs("div",{className:"d-flex gap-2",children:[n("tax_add")&&i.jsxs(ht,{to:l?"/tax/add":"#",className:"btn btn-secondary",children:[i.jsx("i",{className:"ph ph-plus-circle"})," ",r("Add Tax","kivicare-clinic-management-system")]}),i.jsxs("button",{className:"btn btn-primary",onClick:()=>c(!0),children:[i.jsx("i",{className:"ph ph-funnel"})," ",r("Filter","kivicare-clinic-management-system")]})]})]}),n("tax_export")&&l&&i.jsx("div",{className:"kc-table-wrapper",children:i.jsx(Ci,{in:!d,timeout:100,classNames:"fade-top-bottom",unmountOnExit:!0,nodeRef:u,children:i.jsx("div",{ref:u,className:"d-flex justify-content-end mb-4 position-absolute top-0 w-100",children:i.jsxs("div",{className:"download-buttons d-flex align-items-center gap-2",children:[i.jsx(Qe,{placement:"top",overlay:i.jsx(ut,{children:r("Export CSV","kivicare-clinic-management-system")}),children:i.jsx("button",{className:"btn btn-white",onClick:()=>W("csv"),disabled:D.isPending,children:i.jsx("i",{className:"ph ph-file-csv"})})}),i.jsx(Qe,{placement:"top",overlay:i.jsx(ut,{children:r("Export Excel","kivicare-clinic-management-system")}),children:i.jsx("button",{className:"btn btn-white",onClick:()=>W("xls"),disabled:D.isPending,children:i.jsx("i",{className:"ph ph-file-xls"})})}),i.jsx(Qe,{placement:"top",overlay:i.jsx(ut,{children:r("Export PDF","kivicare-clinic-management-system")}),children:i.jsx("button",{className:"btn btn-white",onClick:()=>W("pdf"),disabled:D.isPending,children:i.jsx("i",{className:"ph ph-file-pdf"})})})]})})})}),i.jsx(wn,{data:ge,columns:U,moduleNamePlural:"taxes",currentPage:P,perPage:E,totalItems:I,lastPage:M,isLoading:N,bulkActions:ae,onPageChange:X=>p(J=>({...J,page:X})),onPerPageChange:X=>p(J=>({...J,perPage:X,page:1})),onSortingChange:ie,manualSorting:!0,isBulkActionShow:X=>{m(X)}}),i.jsx(na,{show:o,onHide:()=>c(!1),queryParams:h,hasAppliedFilters:Object.keys(z).length>0,onApplyFilters:X=>{p({...X,page:1}),c(!1)},onResetFilters:()=>{p({}),c(!1)},title:r("Filters","kivicare-clinic-management-system"),fields:[{name:"clinic",label:r("Clinic","kivicare-clinic-management-system"),type:"select",options:G},{name:"doctor",label:r("Doctor","kivicare-clinic-management-system"),type:"paginatedSelect",optionLoader:y,dependencies:{clinic_ids:"clinic"},isSearchable:!0,storeObject:!0},{name:"service",label:r("Service","kivicare-clinic-management-system"),type:"paginatedSelect",optionLoader:b,dependencies:{clinic_id:"clinic",doctor_ids:"doctor"},isSearchable:!0,storeObject:!0},{name:"taxName",label:r("Tax Name","kivicare-clinic-management-system"),type:"text",placeholder:r("Enter Tax Name","kivicare-clinic-management-system")},{name:"status",label:r("Status","kivicare-clinic-management-system"),type:"select",options:[{value:"1",label:r("Active","kivicare-clinic-management-system")},{value:"0",label:r("Inactive","kivicare-clinic-management-system")}]}]}),!l&&i.jsx(di,{text:r("Taxes management is KiviCare Pro feature.","kivicare-clinic-management-system"),link:"https://codecanyon.net/item/kivicare-pro-clinic-patient-management-system-ehr-addon/30690654?s_rank=3"})]})},Ine=({values:t,errors:e,onChange:n,onValidate:s,onCancel:a,isLoading:l,error:o,success:c,isEditing:d=!1})=>{const{getCurrencyDetail:m}=mt(),h=m().prefix,p=[{value:"1",label:r("Active","kivicare-clinic-management-system")},{value:"0",label:r("Inactive","kivicare-clinic-management-system")}],g=[{value:"fixed",label:h},{value:"percentage",label:"%"}],{data:v,isLoading:x}=Og(),b=(Array.isArray(v)?v:Array.isArray(v?.data)?v.data:[]).map(A=>({value:A.id,label:A.label||A.name})),k=ze(),w=async({page:A,per_page:P,search:E})=>{try{const I={dataType:"clinicList",page:A,per_page:P,search:E};return await k.fetchQuery({queryKey:pt.list(I),queryFn:()=>Dt.getStaticData(I),staleTime:3e5})}catch{return{data:[],pagination:{has_more:!1}}}},T=async({page:A,per_page:P,search:E,clinic_ids:I})=>{try{const M={dataType:"staticData",staticDataType:"doctors",page:A,per_page:P,search:E};return I&&I.length>0&&(M.clinic_ids=I),await k.fetchQuery({queryKey:pt.list(M),queryFn:()=>Dt.getStaticData(M),staleTime:0})}catch{return{data:[],pagination:{has_more:!1}}}},j=async({page:A,per_page:P,search:E,clinic_ids:I,doctor_ids:M})=>{try{const O={dataType:"staticData",staticDataType:"servicesWithPrice",page:A,per_page:P,search:E};I&&I.length>0&&(O.clinic_ids=I),M&&M.length>0&&(O.doctor_ids=Array.isArray(M)?M.join(","):M);const F=await k.fetchQuery({queryKey:pt.list(O),queryFn:()=>Dt.getStaticData(O),staleTime:0});return F.data=F.data.map(H=>({...H,id:H.service_id})),F}catch{return{data:[],pagination:{has_more:!1}}}},D=b.find(A=>String(A.value)===String(t.clinic))||null,_=g.find(A=>A.value===t.rateType?.value)||g[0],N=p.find(A=>String(A.value)===String(t.status?.value||t.status))||p[0];return i.jsxs("div",{className:"add-tax-form",children:[i.jsx("div",{className:"card",children:i.jsx("div",{className:"card-body",children:i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-md-6 col-xl-4",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[r("Name","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx("input",{type:"text",className:`form-control${e.name?" is-invalid":""}`,placeholder:r("Enter Tax Name","kivicare-clinic-management-system"),value:t.name,onChange:A=>n({...t,name:A.target.value}),required:!0}),e.name&&i.jsx("div",{className:"invalid-feedback",children:e.name})]})}),i.jsx("div",{className:"col-md-6 col-xl-4",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[r("Tax Rate","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsxs("div",{className:"d-flex gap-2",children:[i.jsx(ct,{options:g,value:_,onChange:A=>n({...t,rateType:A}),isDisabled:!1,styles:{container:A=>({...A,minWidth:80,width:80}),menuPortal:A=>({...A,zIndex:9999})},className:"react-select-box",classNamePrefix:"react-select"}),i.jsx("input",{type:"text",className:`form-control${e.rateValue?" is-invalid":""}`,placeholder:r("Enter Tax Rate","kivicare-clinic-management-system"),value:t.rateValue,onChange:A=>{let P=A.target.value;P=P.replace(/[^0-9.]/g,"");const E=P.split(".");E.length>2&&(P=E[0]+"."+E.slice(1).join("")),n({...t,rateValue:P})},onInput:A=>{let P=A.target.value;P=P.replace(/[^0-9.]/g,"");const E=P.split(".");E.length>2&&(P=E[0]+"."+E.slice(1).join("")),A.target.value=P},required:!0})]}),e.rateValue&&i.jsx("div",{className:"invalid-feedback d-block",children:e.rateValue})]})}),i.jsxs("div",{className:"col-md-6 col-xl-4",children:[i.jsxs("div",{className:"form-group",children:[i.jsx("label",{className:"form-label",children:r("Clinic","kivicare-clinic-management-system")}),i.jsx(rn,{id:"clinic",loadOptions:w,value:D,onChange:A=>n({...t,clinic:A?A.value:null,doctor:null}),placeholder:r("Select clinic","kivicare-clinic-management-system"),className:"react-select-box",classNamePrefix:"react-select",isClearable:!0})]}),i.jsxs("p",{className:"mt-2 mb-0 font-size-12",children:[i.jsx("span",{className:"text-primary",children:r("Note:","kivicare-clinic-management-system")})," ",r("To apply tax to all clinics, please leave the selection blank.","kivicare-clinic-management-system")]})]}),i.jsxs("div",{className:"col-md-6 col-xl-4",children:[i.jsxs("div",{className:"form-group",children:[i.jsx("label",{className:"form-label",children:r("Doctor","kivicare-clinic-management-system")}),i.jsx(rn,{id:"doctor",loadOptions:T,value:t.doctor,onChange:A=>n({...t,doctor:A,service:null}),placeholder:r("Select Doctor","kivicare-clinic-management-system"),className:"react-select-box",classNamePrefix:"react-select",dependencies:{clinic_ids:t.clinic?[t.clinic]:[]},isClearable:!0,isMulti:!d},`doctor-${t.clinic||"none"}`)]}),i.jsxs("p",{className:"mt-2 mb-0 font-size-12",children:[i.jsx("span",{className:"text-primary",children:r("Note:","kivicare-clinic-management-system")})," ",r("To apply tax to all doctors, please leave the selection blank.","kivicare-clinic-management-system")]})]}),i.jsxs("div",{className:"col-md-6 col-xl-4",children:[i.jsxs("div",{className:"form-group",children:[i.jsx("label",{className:"form-label",children:r("Service","kivicare-clinic-management-system")}),i.jsx(rn,{id:"service",loadOptions:j,value:t.service,onChange:A=>n({...t,service:A}),placeholder:r("Select Service","kivicare-clinic-management-system"),className:"react-select-box",classNamePrefix:"react-select",dependencies:{clinic_ids:t.clinic?[t.clinic]:[],doctor_ids:Array.isArray(t.doctor)?t.doctor.map(A=>A?.value):t.doctor?.value?[t.doctor.value]:[]},isClearable:!0,isMulti:!d},`service-${t.clinic||"none"}-${Array.isArray(t.doctor)?t.doctor.map(A=>A?.value).join(","):t.doctor?.value||"none"}`)]}),i.jsxs("p",{className:"mt-2 mb-0 font-size-12",children:[i.jsx("span",{className:"text-primary",children:r("Note:","kivicare-clinic-management-system")})," ",r("To apply tax to all services, please leave the selection blank.","kivicare-clinic-management-system")]})]}),i.jsx("div",{className:"col-md-6 col-xl-4",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[r("Status","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx(ct,{className:"react-select-box",classNamePrefix:"react-select",options:p,value:N,onChange:A=>n({...t,status:A}),isClearable:!1,styles:{menuPortal:A=>({...A,zIndex:9999})},placeholder:r("Status","kivicare-clinic-management-system"),required:!0}),e.status&&i.jsx("div",{className:"invalid-feedback",children:e.status})]})})]})})}),i.jsxs("div",{className:"d-flex align-items-center justify-content-end flex-wrap gap-3",children:[i.jsx("button",{type:"button",className:"btn btn-secondary d-flex align-items-center",onClick:a,disabled:l,children:i.jsx("span",{children:r("Cancel","kivicare-clinic-management-system")})}),i.jsx("button",{type:"button",className:"btn btn-primary d-flex align-items-center",onClick:s,disabled:l,children:l?i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),i.jsx("span",{children:r("Saving...","kivicare-clinic-management-system")})]}):i.jsx("span",{children:r("Save","kivicare-clinic-management-system")})})]})]})},SC=({isEditing:t=!1,editId:e,onSuccess:n,onCancel:s,...a})=>{const{getCurrencyDetail:l}=mt(),c=l().prefix,d=[{value:"1",label:"Active"},{value:"0",label:"Inactive"}],m=[{value:"fixed",label:c},{value:"percentage",label:"%"}],u={name:"",rateType:m[0],rateValue:"",clinic:null,doctor:null,service:null,status:d[0]},{id:h}=Yt(),[p,g]=f.useState(u),[v,x]=f.useState({}),[y,b]=f.useState(!1),k=_ne(),w=hn(),{data:T,isLoading:j}=Ane(t?h:null),D=s?()=>s(w):()=>w("/tax"),_=async(P,E)=>{if(!P)return null;try{const M=(await Dt.getStaticData({dataType:"staticData",staticDataType:E,page:1,per_page:100,search:""}))?.data||[],O=String(P),F=M.find(H=>String(H.id)===O||String(H.value)===O);if(F)return[{value:String(F.id||F.value),label:F.label||F.name||String(F.id||F.value)}]}catch(I){console.error(`Error fetching ${E} data:`,I)}return null};f.useEffect(()=>{t&&T&&(async()=>{const[E,I]=await Promise.all([_(T.data.doctor_id,"doctors"),_(T.data.service_id,"servicesWithPrice")]);g({name:T.data.name||"",rateType:m.find(M=>M.value===T.data.taxType)||m[0],rateValue:T.data.taxValue||"",clinic:T.data.clinic_id||"",doctor:E,service:T.data.service,status:d.find(M=>String(M.value)===String(T.data.status))||d[0]})})()},[t,T]);const N=()=>{const P={};return p.name.trim()||(P.name=r("Tax Name is required","kivicare-clinic-management-system")),p.rateValue.trim()?isNaN(p.rateValue)?P.rateValue=r("Tax Rate must be a number","kivicare-clinic-management-system"):parseFloat(p.rateValue)<0?P.rateValue=r("Tax Rate cannot be negative","kivicare-clinic-management-system"):p.rateType?.value==="percentage"&&parseFloat(p.rateValue)>100&&(P.rateValue=r("Percentage cannot be greater than 100","kivicare-clinic-management-system")):P.rateValue=r("Tax Rate is required","kivicare-clinic-management-system"),p.status||(P.status=r("Status is required","kivicare-clinic-management-system")),x(P),Object.keys(P).length===0},A=()=>{N()&&(b(!0),k.mutate({id:t?h:void 0,data:{name:p.name,rateType:p.rateType.value,rateValue:p.rateValue,clinic:p.clinic||null,doctor:p.doctor||null,service:p.service||null,status:p.status?.value||null},isEdit:t},{onSuccess:P=>{Se.success(P?.message||r("Tax saved successfully!","kivicare-clinic-management-system"),{position:"top-right",autoClose:1500,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0}),setTimeout(()=>{w("/tax")},1600)},onError:P=>{const E=P?.response?.data?.message||P?.message||r("Something went wrong!","kivicare-clinic-management-system");Se.error(E),b(!1)}}))};return t&&j?i.jsx(Vy,{}):i.jsx(Ine,{values:p,errors:v,onChange:g,onValidate:A,onCancel:D,isLoading:y||k.isLoading||j,error:k.isError,success:k.isSuccess,isEditing:t})},One=[Gn({path:"/tax",title:"Taxes",outlet:Cne,permissions:["tax_list"],meta:{description:"Tax management system",icon:"stethoscope",showInSidebar:!0},children:[We({path:"",component:Mne,title:"All Taxes",index:!0,permissions:["tax_list"],meta:{description:"List of all taxes",breadcrumb:"All Taxes"},skeleton:()=>i.jsx("div",{className:"container-fluid pb-0",children:i.jsx(_n,{columns:6,rows:5,showBreadcrumb:!0,showPageHeader:!0,showFilterBar:!1})})}),We({path:"add",component:SC,title:"Add Tax",props:{isEditing:!1},permissions:["tax_add"],meta:{description:"Create a new tax",breadcrumb:"Add New"},skeleton:Vy}),We({path:"edit/:id",component:SC,title:"Edit Tax",props:{isEditing:!0},index:!0,permissions:["tax_edit"],meta:{description:"Edit existing tax",breadcrumb:"Edit"},skeleton:Vy})]})],Fne=()=>i.jsxs("div",{className:"get-help-container",children:[i.jsx("div",{className:"get-help-header"}),i.jsx("div",{className:"get-help-content",children:i.jsx(yo,{})}),i.jsx("div",{className:"get-help-footer"})]}),Lne=({activeTab:t="shortcodes",showHeader:e=!0,showTabs:n=!0})=>i.jsx(i.Fragment,{children:i.jsx("div",{className:"content-inner container-fluid pb-0",id:"page_layout",children:i.jsxs("div",{className:"table-content",children:[e&&i.jsxs("div",{className:"d-flex align-items-md-center justify-content-between flex-column flex-lg-row gap-3 mb-4",children:[i.jsx("div",{className:"page-title",children:i.jsx(S,{width:"150px",height:"1.5rem"})}),i.jsx("div",{className:"d-flex align-items-center gap-3",children:i.jsx(S,{width:"120px",height:"38px",style:{borderRadius:"4px"}})})]}),i.jsxs("div",{className:"help-tabs",children:[n&&i.jsx("ul",{className:"nav nav-pills nav-pill-card mb-4",role:"tablist",children:Array.from({length:8}).map((s,a)=>i.jsx("li",{className:"nav-item",role:"presentation",children:i.jsx(S,{width:`${80+Math.random()*40}px`,height:"38px",style:{borderRadius:"4px"}})},`tab-skeleton-${a}`))}),i.jsx("div",{className:"card",children:i.jsxs("div",{className:"card-body",children:[t==="shortcodes"&&i.jsx("div",{className:"tab-pane fade show active",id:"nav-shortcodes",role:"tabpanel",children:i.jsxs("div",{className:"shortcode-tab",children:[i.jsx(S,{width:"200px",height:"1.5rem",className:"mb-4"}),Array.from({length:5}).map((s,a)=>i.jsxs("div",{className:"d-flex flex-wrap justify-content-between align-items-start mb-3 p-4 bg-body",children:[i.jsxs("div",{className:"flex-grow-1",children:[i.jsx("div",{className:"mb-3",children:i.jsx(S,{width:`${120+Math.random()*60}px`,height:"1.25rem",className:"d-inline-block me-4 mb-2"})}),i.jsxs("div",{className:"d-flex align-items-center gap-2 mb-3",children:[i.jsx(S,{width:"20px",height:"20px",style:{borderRadius:"4px"}}),i.jsx(S,{width:"100px",height:"1rem"})]}),i.jsx(S,{width:"100%",height:"1rem",className:"mb-2"}),i.jsx(S,{width:"95%",height:"1rem"})]}),i.jsxs("div",{className:"mt-3 mt-md-0 ms-md-3 flex-shrink-0",children:[i.jsx("div",{className:"mb-2",children:i.jsx(S,{width:"80px",height:"1rem"})}),i.jsx(S,{width:"70px",height:"0.875rem"})]})]},`shortcode-${a}`))]})}),t!=="shortcodes"&&i.jsx("div",{className:"tab-pane fade show active",role:"tabpanel",children:i.jsxs("div",{className:"mb-4",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-4 gap-3",children:[i.jsx(S,{width:"200px",height:"1.25rem"}),i.jsx(S,{width:"150px",height:"38px",style:{borderRadius:"4px"}})]}),i.jsx(S,{width:"100%",height:"1rem",className:"mb-2"}),i.jsx(S,{width:"98%",height:"1rem",className:"mb-2"}),i.jsx(S,{width:"95%",height:"1rem",className:"mb-4"}),i.jsx(S,{width:"180px",height:"1.25rem",className:"mb-3"}),i.jsx("div",{className:"bg-body p-3 mb-4",children:Array.from({length:5}).map((s,a)=>i.jsxs("div",{className:"mb-3",children:[i.jsx("div",{className:"d-flex gap-2 mb-2",children:i.jsx(S,{width:"60px",height:"1rem"})}),i.jsx(S,{width:"100%",height:"1rem",className:"mb-2"}),i.jsx(S,{width:"95%",height:"1rem"})]},`content-${a}`))}),i.jsx("div",{className:"ps-4 mb-3",children:Array.from({length:3}).map((s,a)=>i.jsxs("div",{className:"mb-3",children:[i.jsx(S,{width:"100%",height:"1rem",className:"mb-2"}),i.jsx(S,{width:"98%",height:"1rem"})]},`list-item-${a}`))})]})})]})})]})]})})}),$ne=()=>{const[t,e]=f.useState("shortcodes"),[n,s]=f.useState(null),{isAddonActive:a}=mt(),l=(o,c)=>{navigator.clipboard.writeText(o),s(c),setTimeout(()=>{s(null)},1500)};return i.jsx(i.Fragment,{children:i.jsx("div",{className:"content-inner container-fluid pb-0",id:"page_layout",children:i.jsxs("div",{className:"table-content",children:[i.jsxs("div",{className:"d-flex align-items-md-center justify-content-between flex-column flex-lg-row gap-3 mb-4",children:[i.jsx("div",{className:"page-title",children:i.jsx("h6",{className:"m-0",children:r("Get help","kivicare-clinic-management-system")})}),a("kiviPro")&&i.jsx("div",{className:" d-flex align-items-center gap-3",children:i.jsx("a",{href:"https://iqonic.desky.support/",className:"btn btn-primary",children:r("Get Support","kivicare-clinic-management-system")})})]}),i.jsxs("div",{className:"help-tabs",children:[i.jsxs("ul",{className:"nav nav-pills nav-pill-card mb-4",role:"tablist",children:[i.jsx("li",{className:"nav-item",role:"presentation",children:i.jsx("button",{className:t==="shortcodes"?"nav-link active":"nav-link",id:"nav-shortcodes-tab",onClick:()=>e("shortcodes"),type:"button",role:"tab","aria-controls":"nav-shortcodes","aria-selected":t==="shortcodes",children:r("Shortcodes","kivicare-clinic-management-system")})}),i.jsx("li",{className:"nav-item",role:"presentation",children:i.jsx("button",{className:t==="telemed"?"nav-link active":"nav-link",id:"nav-telemed-tab",onClick:()=>e("telemed"),type:"button",role:"tab","aria-controls":"nav-telemed","aria-selected":t==="telemed",children:r("Telemed (Pro)","kivicare-clinic-management-system")})}),i.jsx("li",{className:"nav-item",role:"presentation",children:i.jsx("button",{className:t==="woocommerce"?"nav-link active":"nav-link",id:"nav-woocommerce-tab",onClick:()=>e("woocommerce"),type:"button",role:"tab","aria-controls":"nav-woocommerce","aria-selected":t==="woocommerce",children:r("Woocommerce (Pro)","kivicare-clinic-management-system")})}),i.jsx("li",{className:"nav-item",role:"presentation",children:i.jsx("button",{className:t==="googlecalendar"?"nav-link active":"nav-link",id:"nav-googlecalendar-tab",onClick:()=>e("googlecalendar"),type:"button",role:"tab","aria-controls":"nav-googlecalendar","aria-selected":t==="googlecalendar",children:r("Google Calendar (Pro)","kivicare-clinic-management-system")})}),i.jsx("li",{className:"nav-item",role:"presentation",children:i.jsx("button",{className:t==="sms"?"nav-link active":"nav-link",id:"nav-sms-tab",onClick:()=>e("sms"),type:"button",role:"tab","aria-controls":"nav-sms","aria-selected":t==="sms",children:r("SMS (Pro)","kivicare-clinic-management-system")})}),i.jsx("li",{className:"nav-item",role:"presentation",children:i.jsx("button",{className:t==="language"?"nav-link active":"nav-link",id:"nav-language-tab",onClick:()=>e("language"),type:"button",role:"tab","aria-controls":"nav-language","aria-selected":t==="language",children:r("Language","kivicare-clinic-management-system")})}),i.jsx("li",{className:"nav-item",role:"presentation",children:i.jsx("button",{className:t==="appointments"?"nav-link active":"nav-link",id:"nav-appointments-tab",onClick:()=>e("appointments"),type:"button",role:"tab","aria-controls":"nav-appointments","aria-selected":t==="appointments",children:r("Appointments","kivicare-clinic-management-system")})}),i.jsx("li",{className:"nav-item",role:"presentation",children:i.jsx("button",{className:t==="holiday"?"nav-link active":"nav-link",id:"nav-holiday-tab",onClick:()=>e("holiday"),type:"button",role:"tab","aria-controls":"nav-holiday","aria-selected":t==="holiday",children:r("Holiday","kivicare-clinic-management-system")})})]}),i.jsx("div",{className:"card",children:i.jsxs("div",{className:"card-body",children:[t==="shortcodes"&&i.jsx("div",{className:"tab-pane fade show active",id:"nav-shortcodes",role:"tabpanel","aria-labelledby":"nav-shortcodes-tab",children:i.jsxs("div",{className:"shortcode-tab",children:[i.jsx("h5",{className:"mb-4",children:r("KiviCare Shortcode","kivicare-clinic-management-system")}),i.jsxs("div",{className:"d-flex flex-wrap justify-content-between align-items-start mb-3 p-4 bg-body",children:[i.jsxs("div",{children:[i.jsx("h6",{className:"d-inline me-4",children:"[bookAppointment]"}),i.jsx(Qe,{placement:"top",overlay:o=>i.jsx(ut,{...o,children:n==="bookAppointment"?r("Copied","kivicare-clinic-management-system"):r("Copy to clipboard","kivicare-clinic-management-system")}),children:i.jsxs("span",{className:"copy-code pe-auto",onClick:()=>l("[bookAppointment]","bookAppointment"),children:[i.jsx("i",{className:"ph ph-copy fs-5"})," ",r("Copy Code","kivicare-clinic-management-system")]})}),i.jsx("p",{className:"mt-3 mb-0",children:r("With following shortcode Users can register/login and book appointment.","kivicare-clinic-management-system")})]}),i.jsxs("div",{className:"mt-md-3",children:[i.jsx("a",{href:"https://apps.iqonic.design/docs/product/kivicare/widgets/book-appointment-widget/",children:r("Overview","kivicare-clinic-management-system")}),i.jsxs("span",{children:["(",r("Deprecated","kivicare-clinic-management-system"),")"]})]})]}),i.jsxs("div",{className:"d-flex flex-wrap justify-content-between align-items-start mb-3 p-4 bg-body",children:[i.jsxs("div",{children:[i.jsx("h6",{className:"d-inline me-4",children:"[patientDashboard]"}),i.jsx(Qe,{placement:"top",overlay:o=>i.jsx(ut,{...o,children:n==="patientDashboard"?r("Copied","kivicare-clinic-management-system"):r("Copy to clipboard","kivicare-clinic-management-system")}),children:i.jsxs("span",{className:"copy-code pe-auto",onClick:()=>l("[patientDashboard]","patientDashboard"),children:[i.jsx("i",{className:"ph ph-copy fs-5"})," ",r("Copy Code","kivicare-clinic-management-system")]})}),i.jsx("p",{className:"mt-3 mb-0",children:r("With following shortcode patient can register,login, manage profile, manage password and book appointment.","kivicare-clinic-management-system")})]}),i.jsxs("div",{className:"mt-md-3",children:[i.jsx("a",{href:"https://apps.iqonic.design/docs/product/kivicare/widgets/patient-dashboard-widget/",children:r("Overview","kivicare-clinic-management-system")}),i.jsxs("span",{children:["(",r("Deprecated","kivicare-clinic-management-system"),")"]})]})]}),i.jsxs("div",{className:"d-flex flex-wrap flex-wrap justify-content-between align-items-start mb-3 p-4 bg-body",children:[i.jsxs("div",{children:[i.jsx("h6",{className:"d-inline me-4",children:"[kivicareBookAppointment]"}),i.jsx(Qe,{placement:"top",overlay:o=>i.jsx(ut,{...o,children:n==="kivicareBookAppointment"?r("Copied","kivicare-clinic-management-system"):r("Copy to clipboard","kivicare-clinic-management-system")}),children:i.jsxs("span",{className:"copy-code pe-auto",onClick:()=>l("[kivicareBookAppointment]","kivicareBookAppointment"),children:[i.jsx("i",{className:"ph ph-copy fs-5"})," ",r("Copy Code","kivicare-clinic-management-system")]})}),i.jsx("p",{className:"mt-3 mb-0",children:r("With following shortcode Users can register/login and book appointment.","kivicare-clinic-management-system")})]}),i.jsx("div",{className:"mt-md-3",children:i.jsx("a",{href:"https://apps.iqonic.design/docs/product/kivicare/widgets/book-appointment-widget-customizable/",children:r("Overview","kivicare-clinic-management-system")})})]}),i.jsx("div",{className:"d-flex flex-wrap justify-content-between align-items-start mb-3 p-4 bg-body",children:i.jsxs("div",{children:[i.jsx("h6",{className:"d-inline me-4",children:"[kivicareRegisterLogin]"}),i.jsx(Qe,{placement:"top",overlay:o=>i.jsx(ut,{...o,children:n==="kivicareRegisterLogin"?r("Copied","kivicare-clinic-management-system"):r("Copy to clipboard","kivicare-clinic-management-system")}),children:i.jsxs("span",{className:"copy-code pe-auto",onClick:()=>l("[kivicareRegisterLogin]","kivicareRegisterLogin"),children:[i.jsx("i",{className:"ph ph-copy fs-5"})," ",r("Copy Code","kivicare-clinic-management-system")]})}),i.jsx("p",{className:"mt-3 mb-0",children:r("With following shortcode kivicare users ( doctor, patient and receptionist ) can register and login","kivicare-clinic-management-system")})]})}),i.jsxs("div",{className:"d-flex flex-wrap justify-content-between align-items-start p-4 bg-body",children:[i.jsxs("div",{children:[i.jsx("h6",{className:"d-inline me-4",children:"[kivicareBookAppointmentButton]"}),i.jsx(Qe,{placement:"top",overlay:o=>i.jsx(ut,{...o,children:n==="kivicareBookAppointmentButton"?r("Copied","kivicare-clinic-management-system"):r("Copy to clipboard","kivicare-clinic-management-system")}),children:i.jsxs("span",{className:"copy-code pe-auto",onClick:()=>l("[kivicareBookAppointmentButton]","kivicareBookAppointmentButton"),children:[i.jsx("i",{className:"ph ph-copy fs-5"})," ",r("Copy Code","kivicare-clinic-management-system")]})}),i.jsxs("p",{className:"mt-3 mb-0",children:[r("With following shortcode Users can register/login and book appointment In Popup","kivicare-clinic-management-system")," ",i.jsx(lt,{className:""})]})]}),i.jsxs("div",{className:"mt-md-3",children:[i.jsx("a",{href:"https://apps.iqonic.design/docs/product/kivicare/widgets/book-appointment-button-widget-customizable/",children:r("Overview","kivicare-clinic-management-system")}),i.jsxs("span",{children:["(",r("Deprecated","kivicare-clinic-management-system"),")"]})]})]})]})}),t==="telemed"&&i.jsxs("div",{className:"tab-pane fade show active",id:"nav-telemed",role:"tabpanel","aria-labelledby":"nav-telemed-tab",children:[i.jsxs("div",{className:" mb-4",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[i.jsx("h6",{className:"mb-0",children:r("Telemed (Zoom Integration)","kivicare-clinic-management-system")}),i.jsx("a",{href:"https://apps.iqonic.design/docs/product/kivicare/kivicare-telemed-add-on/admin/#zoom-configuration",className:"btn btn-primary",children:r("Telemed Documentation","kivicare-clinic-management-system")})]}),i.jsx("p",{className:"mb-2",children:r("Setting up a Telemed (Zoom) appointment booking for a doctor. Doctor need to just follow few steps as mentioned below. We have also mentioned these steps in the doctor detail page. An administrator or Clinic admin can also do this for a doctor.","kivicare-clinic-management-system")}),i.jsx("p",{className:"mb-2",children:r("When a doctor is done with saving the Zoom API keys and charges, the doctor will get a Telemed service in their appointment services list.","kivicare-clinic-management-system")}),i.jsxs("p",{className:"mb-0",children:[i.jsx("span",{className:"text-primary",children:r("Note:","kivicare-clinic-management-system")})," ",r("Service name rendered from settings.","kivicare-clinic-management-system")]})]}),i.jsx("h6",{className:"fw-semibold mb-3",children:r("Zoom Configuration Guide","kivicare-clinic-management-system")}),i.jsxs("div",{className:"bg-body p-3",children:[i.jsxs("div",{className:"mb-3",children:[i.jsx("span",{className:"fw-bold",children:r("Step 1:","kivicare-clinic-management-system")}),i.jsxs("p",{className:"mb-0 d-inline ms-2",children:[r("Sign up or sign in here. ","kivicare-clinic-management-system"),i.jsx("a",{href:"https://marketplace.zoom.us/",className:"text-decoration-none fw-semibold",children:r("Zoom Market Place Portal","kivicare-clinic-management-system")})]})]}),i.jsxs("div",{className:"mb-3",children:[i.jsx("span",{className:"fw-bold",children:r("Step 2:","kivicare-clinic-management-system")}),i.jsxs("p",{className:"mb-0 d-inline ms-2",children:[r("Click/Hover on Develop button at the right in navigation bar and click on build app. ","kivicare-clinic-management-system"),i.jsxs("a",{href:"https://marketplace.zoom.us/develop/create",className:"text-decoration-none fw-semibold",children:['"',r("Create App","kivicare-clinic-management-system"),'"']}),"."]})]}),i.jsxs("div",{className:"mb-3",children:[i.jsx("span",{className:"fw-bold",children:r("Step 3:","kivicare-clinic-management-system")}),i.jsx("p",{className:"mb-0 d-inline ms-2",children:r("Select JWT and click Create.","kivicare-clinic-management-system")})]}),i.jsxs("div",{className:"mb-3",children:[i.jsx("span",{className:"fw-bold",children:r("Step 4:","kivicare-clinic-management-system")}),i.jsx("p",{className:"mb-0 d-inline ms-2",children:r("Fill the mandatory information. In the App Credentials tab, you can see the API Key and API Secret.","kivicare-clinic-management-system")})]}),i.jsxs("div",{children:[i.jsx("span",{className:"fw-bold",children:r("Step 5:","kivicare-clinic-management-system")}),i.jsx("p",{className:"mb-0 d-inline ms-2",children:r(`Copy and paste the API Key and API Secret here, then click on "Save"  you're ready to go.`,"kivicare-clinic-management-system")})]})]})]}),t==="woocommerce"&&i.jsx("div",{className:"tab-pane fade show active",id:"nav-woocommerce",role:"tabpanel","aria-labelledby":"nav-woocommerce-tab",children:i.jsxs("div",{className:"wocommerce-tab",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-4 gap-3",children:[i.jsx("h6",{className:"mb-0",children:r("Woocommerce Payment Gateway","kivicare-clinic-management-system")}),i.jsx("a",{href:"https://apps.iqonic.design/docs/product/kivicare/kivicare-telemed-add-on/admin/",className:"btn btn-primary ",children:r("Documentation","kivicare-clinic-management-system")})]}),i.jsxs("ul",{className:"ps-4 mb-0",children:[i.jsx("li",{className:"mb-3",children:r("For setting up a woocommerce payment gateway with kivicare payment, You have a basic woocommmerce setup with any payment method on it.","kivicare-clinic-management-system")}),i.jsx("li",{className:"mb-3",children:r("By default woocommerce payment is Disabled you need to Enabled it from payment tab in Setting page .","kivicare-clinic-management-system")}),i.jsx("li",{children:r("Appointment Service charges are considered for appointment's woocommerce payment.","kivicare-clinic-management-system")})]})]})}),t==="googlecalendar"&&i.jsx("div",{className:"tab-pane fade show active",id:"nav-googlecalendar",role:"tabpanel","aria-labelledby":"nav-googlecalendar-tab",children:i.jsxs("div",{className:"google-calander-tab",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-4 gap-3",children:[i.jsx("h6",{className:"mb-0",children:r("Google Calendar","kivicare-clinic-management-system")}),i.jsx("a",{href:"https://apps.iqonic.design/docs/product/kivicare/google-calendar/",className:"btn btn-primary",children:r("Documentation","kivicare-clinic-management-system")})]}),i.jsx("ul",{className:"ps-4 mb-0",children:i.jsx("li",{children:r("For setting up a Google Calendar (Appointment reminder) in kivicare setup we have provide a setup option in Pro Setting tab. You just need to enable google calendar service and fillup the Api key details.","kivicare-clinic-management-system")})})]})}),t==="sms"&&i.jsx("div",{className:"tab-pane fade show active",id:"nav-sms",role:"tabpanel","aria-labelledby":"nav-sms-tab",children:i.jsxs("div",{className:"sms-tab",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-4 gap-3",children:[i.jsx("h6",{className:"mb-0",children:r("SMS (Twilio)","kivicare-clinic-management-system")}),i.jsx("a",{href:"https://apps.iqonic.design/docs/product/kivicare/pro-version/sms-notifications-twilio/",className:"btn btn-primary",children:r("Documentation","kivicare-clinic-management-system")})]}),i.jsx("div",{className:"d-flex justify-content-between align-items-center mb-3",children:i.jsx("ul",{className:"ps-4 mb-0",children:i.jsxs("li",{children:[r("For sending a SMS with kivicare we are providing","kivicare-clinic-management-system")," ",i.jsx("a",{className:"text-primary fw-semibold",href:"https://www.twilio.com/sms",children:r("Twilio SMS","kivicare-clinic-management-system")})," ",r("support.","kivicare-clinic-management-system")]})})}),i.jsx("div",{className:"d-block d-md-flex justify-content-between align-items-start mb-5 gap-5",children:i.jsxs("p",{className:"mb-3 mb-md-0",children:[i.jsx("span",{className:"text-primary",children:r("Note:","kivicare-clinic-management-system")})," ",r("Set Twilio Geo Location Permission with your Twilio account. Basically you need to select country where you want to enable your SMS Service. ","kivicare-clinic-management-system"),i.jsx("a",{className:"text-primary flex-shrink-0 fw-semibold",href:"https://www.twilio.com/console/sms/settings/geo-permissions",children:r("Enable Geo Location","kivicare-clinic-management-system")})]})}),i.jsxs("div",{className:"",children:[i.jsx("h6",{className:"mb-3",children:r("Common issue with Free trial SMS setup with Twilio","kivicare-clinic-management-system")}),i.jsxs("ul",{className:"ps-4 mb-0",children:[i.jsx("li",{className:"mb-3",children:r("With twilio free SMS trial you can send SMS on only verified number.","kivicare-clinic-management-system")}),i.jsx("ul",{className:"ps-4 mb-0",children:i.jsxs("li",{children:[r("Here you can verify receiver's number with Twilio.","kivicare-clinic-management-system")," ",i.jsx("a",{className:"text-primary fw-semibold",href:"https://www.twilio.com/console/phone-numbers/verified",children:r("Verify receiver's number here","kivicare-clinic-management-system")})]})})]})]})]})}),t==="language"&&i.jsx("div",{className:"tab-pane fade show active",id:"nav-language",role:"tabpanel","aria-labelledby":"nav-language-tab",children:i.jsxs("div",{className:"language-tab",children:[i.jsx("div",{className:"d-flex justify-content-between align-items-center mb-4 gap-3",children:i.jsxs("h6",{className:"mb-0",children:[r("Multi-Language","kivicare-clinic-management-system")," ",i.jsxs("span",{className:"text-muted",children:["(",r("Soft deprecated","kivicare-clinic-management-system"),")"]})]})}),i.jsx("div",{className:"d-flex justify-content-between align-items-center mb-3",children:i.jsxs("ul",{className:"ps-4 mb-0",children:[i.jsx("li",{className:"mb-3",children:r("For changing a language in your kivicare setup you we have provided a change language option in Pro settings tab in Settings page.","kivicare-clinic-management-system")}),i.jsx("li",{children:r("You need to change text for your selected language manually from Language setting tab in Settings page.","kivicare-clinic-management-system")})]})}),i.jsx("div",{className:"d-block d-md-flex justify-content-between align-items-start mb-5 gap-5",children:i.jsxs("p",{className:"mb-3 mb-md-0",children:[i.jsx("span",{className:"text-primary",children:r("Note:","kivicare-clinic-management-system")})," ",r("Kivicare plugin requires a folder permission on mention path wp-content/uploads/kiviCare_lang","kivicare-clinic-management-system")]})}),i.jsxs("div",{className:"mb-5",children:[i.jsx("h6",{className:"mb-2",children:r("Common issue: Kivicare dashboard blank ?","kivicare-clinic-management-system")}),i.jsx("p",{className:"mb-2",children:r("This is happening because your kivicare setup has not given a appropriate permission for this wp-content/uploads/kiviCare_lang path.","kivicare-clinic-management-system")}),i.jsxs("p",{className:"mb-0",children:[i.jsx("span",{className:"fw-semibold",children:r("Solution:","kivicare-clinic-management-system")})," ",r("You need to manually copy language json files from plugin folder resources/assets/lang and paste it to wp-content/uploads/kiviCare_lang folder.","kivicare-clinic-management-system")]})]}),i.jsxs("div",{className:"",children:[i.jsx("h6",{className:"mb-2",children:r("Wordpress Translation Plugin Support","kivicare-clinic-management-system")}),i.jsx("p",{className:"mb-2",children:r("You can change kivicare plugin text with the use of any wordpress translation plugin.","kivicare-clinic-management-system")})]})]})}),t==="appointments"&&i.jsx("div",{className:"tab-pane fade show active",id:"nav-appointments",role:"tabpanel","aria-labelledby":"nav-appointments-tab",children:i.jsxs("div",{className:"appointments-tab",children:[i.jsxs("p",{className:"mb-5",children:[i.jsx("span",{className:"text-primary",children:r("Note:","kivicare-clinic-management-system")})," ",r("If Woocommerce payment settings is toggle on, then appointment message sent through Email/SMS/Whatsapp after payment successfully done by patient And this feature is only available on Kivicare-Pro.","kivicare-clinic-management-system")]}),i.jsxs("div",{className:"mb-5",children:[i.jsx("h6",{className:"mb-3",children:r("Restrict Advance Appointment Booking","kivicare-clinic-management-system")}),i.jsxs("ul",{className:"ps-4 mb-0",children:[i.jsxs("li",{className:"mb-3",children:[i.jsx("span",{children:r("Open booking days:","kivicare-clinic-management-system")}),r("As consideration of current date booking already opened as mentioned days in settings.","kivicare-clinic-management-system")]}),i.jsxs("li",{children:[i.jsx("span",{children:r("Close booking days:","kivicare-clinic-management-system")}),r("As consideration of current date booking already closed as mentioned days in settings.","kivicare-clinic-management-system")]})]})]}),i.jsxs("div",{className:"mb-5",children:[i.jsx("h6",{className:"mb-2",children:r("Example","kivicare-clinic-management-system")}),i.jsx("p",{className:"mb-2",children:r("Current Date: 25 November","kivicare-clinic-management-system")}),i.jsxs("p",{className:"mb-2",children:[i.jsx("span",{className:"",children:r("Pre-booking:","kivicare-clinic-management-system")})," ",r("10 days , so patient/doctor/receptionist can't select the date from 25 November to 5 December.","kivicare-clinic-management-system")]}),i.jsxs("p",{className:"mb-0",children:[i.jsx("span",{className:"",children:r("Post-booking:","kivicare-clinic-management-system")})," ",r("10 days, so patient/doctor/receptionist can't select the date after 5 December.","kivicare-clinic-management-system")]})]}),i.jsxs("div",{className:"mb-5",children:[i.jsx("h6",{className:"mb-2",children:r("File Upload Setting","kivicare-clinic-management-system")}),i.jsx("p",{className:"mb-2",children:r("If Appointment File Upload toggle is on, then patient can add their reports at the time of booking an appointment.","kivicare-clinic-management-system")}),i.jsxs("p",{className:"mb-0",children:[i.jsx("span",{className:"text-primary",children:r("Note:","kivicare-clinic-management-system")})," ",r("If kivicare pro version is activate then patients can add more then one report, else patients can only add one report at a time while booking an appointment.","kivicare-clinic-management-system")]})]}),i.jsxs("div",{className:"",children:[i.jsx("h6",{className:"mb-2",children:r("Appointment Reminder","kivicare-clinic-management-system")}),i.jsxs("ul",{className:"ps-4 mb-3",children:[i.jsxs("li",{className:"mb-3",children:[i.jsx("span",{children:r("Appointment Email Reminder:","kivicare-clinic-management-system")})," ",r("If the toggle is on ,Then an Appointment Email Reminder will be send to patient through Email.","kivicare-clinic-management-system")]}),i.jsxs("li",{className:"mb-3",children:[i.jsx("span",{children:r("Appointment Sms Reminder:","kivicare-clinic-management-system")})," ",r("If the toggle is on ,Then an Appointment Sms Reminder will be send to patient through SMS.","kivicare-clinic-management-system")]}),i.jsxs("li",{children:[i.jsx("span",{children:r("Appointment Whatsapp Reminder:","kivicare-clinic-management-system")})," ",r("If the toggle is on ,Then an Appointment Whatsapp Reminder will be send to patient through WhatsApp.","kivicare-clinic-management-system")]})]}),i.jsxs("p",{className:"mb-0",children:[i.jsx("span",{className:"text-primary",children:r("Note:","kivicare-clinic-management-system")})," ",r("Appointment Sms Reminder and Appointment Whatsapp Reminder, Required Kivicare-Pro to be Activated and also from pro settings: Toggle on WhatsApp and SMS, for access Appointment Sms Reminder and Appointment Whatsapp Reminder, this two setting is required to toggle on.","kivicare-clinic-management-system")]})]})]})}),t==="holiday"&&i.jsx("div",{className:"tab-pane fade show active",id:"nav-holiday",role:"tabpanel","aria-labelledby":"nav-holiday-tab",children:i.jsxs("div",{className:"holiday-tab",children:[i.jsx("h6",{className:"mb-4",children:r("Add Holiday","kivicare-clinic-management-system")}),i.jsxs("ul",{className:"ps-4 mb-3",children:[i.jsx("li",{className:"mb-3",children:r("If an holiday is set and they have an appointment between that holiday dates then all appointments will get cancelled and appointment cancelled mail/sms/whatsapp message will send to patients.","kivicare-clinic-management-system")}),i.jsx("ul",{className:"ps-4 mb-0",children:i.jsx("li",{children:r("sms/whatsapp only work in kivicare-pro only.","kivicare-clinic-management-system")})})]}),i.jsxs("p",{className:"m-0",children:[i.jsx("span",{className:"text-primary",children:r("Note:","kivicare-clinic-management-system")})," ",r("once an holiday is set and appointments get cancelled then cancelled appointments cannot be reverted.","kivicare-clinic-management-system")]})]})})]})})]})]})})})};function EC(){return i.jsx("div",{children:"GetHelpManageForm"})}const Bne=[Gn({path:"/get-help",title:"Get Help",outlet:Fne,meta:{description:"Help and support system",icon:"help-circle",showInSidebar:!0},children:[We({path:"",component:$ne,title:"All Help Topics",index:!0,skeleton:Lne,meta:{description:"List of all help topics",breadcrumb:"All Help Topics"}}),We({path:"add",component:EC,title:"Add Help Topic",props:{isEditing:!1},meta:{description:"Create a new help topic",breadcrumb:"Add New"}}),We({path:"edit/:id",component:EC,title:"Edit Help Topic",props:{isEditing:!0},index:!0,meta:{description:"Edit existing help topic",breadcrumb:"Edit"}})]})],qne=()=>{const t=Kn();return i.jsxs("div",{className:"receptionists-container",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center gap-3 flex-wrap mb-4",children:[i.jsx(_i,{}),i.jsx("div",{children:t.pathname!=="/receptionist"&&i.jsx(ei,{size:"sm"})})]}),i.jsx(fs,{})]})},Uy=()=>i.jsxs(i.Fragment,{children:[i.jsx(wl,{titleWidth:"140px"}),i.jsx("div",{className:"card",children:i.jsxs("div",{className:"card-body",children:[i.jsxs("div",{children:[i.jsx(S,{width:"140px",height:"1.1rem",className:"mb-3"}),i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-lg-4",children:i.jsx("div",{className:"form-group d-flex justify-content-center pt-5",children:i.jsx(S,{width:"200px",height:"200px",style:{borderRadius:"50%"}})})}),i.jsx("div",{className:"col-lg-8",children:i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-md-6",children:i.jsx(Ne,{labelWidth:"90px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Ne,{labelWidth:"85px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Ne,{labelWidth:"45px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Ne,{labelWidth:"110px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Ne,{labelWidth:"130px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Ne,{labelWidth:"35px"})})]})}),i.jsxs("div",{className:"row mt-4",children:[i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsx(Ne,{labelWidth:"50px"})}),i.jsx("div",{className:"col-lg-4 col-md-6 mt-md-0 mt-4",children:i.jsxs("div",{className:"form-group",children:[i.jsx(S,{width:"55px",height:"1rem",className:"mb-2"}),i.jsxs("div",{className:"d-flex align-items-center flex-wrap gap-3 form-control",children:[i.jsx(S,{width:"60px",height:"1rem"}),i.jsx(S,{width:"70px",height:"1rem"}),i.jsx(S,{width:"55px",height:"1rem"})]})]})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsx(Ne,{labelWidth:"120px"})})]})]})]}),i.jsxs("div",{className:"my-5 py-3",children:[i.jsx(S,{width:"160px",height:"1.1rem",className:"mb-3"}),i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsx(Ne,{labelWidth:"60px",inputHeight:"60px"})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsx(Ne,{labelWidth:"35px"})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsx(Ne,{labelWidth:"55px"})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsx(Ne,{labelWidth:"85px"})})]})]})]})}),i.jsxs("div",{className:"d-flex align-items-center justify-content-end flex-wrap gap-3 mt-4",children:[i.jsx(st,{width:"80px",height:"38px"}),i.jsx(st,{width:"130px",height:"38px"})]})]}),Ja={getReceptionists:(t={})=>ve({endpoint:"receptionists",method:"GET",data:t}),getReceptionist:t=>ve({endpoint:`receptionists/${t}`,method:"GET"}),createReceptionist:t=>ve({endpoint:"receptionists",method:"POST",data:t}),updateReceptionist:(t,e)=>ve({endpoint:`receptionists/${t}`,method:"PUT",data:e}),deleteReceptionist:t=>ve({endpoint:`receptionists/${t}`,method:"DELETE"}),getClinicReceptionists:(t,e={})=>ve({endpoint:`clinics/${t}/receptionists`,method:"GET",data:e}),getReceptionistPatients:(t,e={})=>ve({endpoint:`receptionists/${t}/patients`,method:"GET",data:e}),getReceptionistSchedule:(t,e={})=>ve({endpoint:`receptionists/${t}/schedule`,method:"GET",data:e}),deleteReceptionist:t=>ve({endpoint:`receptionists/${t}`,method:"DELETE"}),bulkDeleteReceptionists:t=>ve({endpoint:"receptionists/bulk-delete",method:"POST",data:{ids:t}}),resendCredentials:t=>ve({endpoint:`receptionists/${t}/resend-credentials`,method:"POST"}),bulkResendCredentials:t=>ve({endpoint:"receptionists/bulk/resend-credentials",method:"POST",data:{ids:t}}),bulkUpdateReceptionistStatus:(t,e)=>ve({endpoint:"receptionists/bulk/status",method:"PUT",data:{ids:t,status:e}}),exportReceptionists:(t={})=>ve({endpoint:"receptionists/export",method:"GET",data:t})},Ks={all:["receptionists"],lists:()=>[...Ks.all,"list"],list:t=>[...Ks.lists(),{filters:t}],details:()=>[...Ks.all,"detail"],detail:t=>[...Ks.details(),t]},Hne=(t={},e={})=>ft({queryKey:Ks.list(t),queryFn:()=>Ja.getReceptionists(t),...e}),zne=(t,e={})=>ft({queryKey:Ks.detail(t),queryFn:()=>Ja.getReceptionist(t),enabled:!!t,...e}),Vne=()=>{const t=ze();return Le({mutationFn:e=>Ja.createReceptionist(e),onSuccess:()=>{t.invalidateQueries({queryKey:Ks.lists()})}})},Une=()=>{const t=ze();return Le({mutationFn:({id:e,...n})=>Ja.updateReceptionist(e,n),onSuccess:(e,n)=>{t.invalidateQueries({queryKey:Ks.detail(n.id)}),t.invalidateQueries({queryKey:Ks.lists()})}})},Wne=()=>{const t=ze();return Le({mutationFn:e=>Ja.deleteReceptionist(e),onSuccess:()=>{t.invalidateQueries({queryKey:Ks.lists()})}})},Kne=()=>{const t=ze();return Le({mutationFn:e=>Ja.bulkDeleteReceptionists(e),onSuccess:()=>{t.invalidateQueries({queryKey:Ks.lists()})}})},Gne=()=>Le({mutationFn:t=>Ja.resendCredentials(t)}),Yne=()=>Le({mutationFn:t=>Ja.bulkResendCredentials(t)}),Qne=()=>{const t=ze();return Le({mutationFn:({ids:e,status:n})=>Ja.bulkUpdateReceptionistStatus(e,n),onSuccess:()=>{t.invalidateQueries({queryKey:Ks.lists()})}})},Zne=()=>Le({mutationFn:t=>Ja.exportReceptionists(t)}),Xne=()=>{const{hasCapability:t,isAddonActive:e}=mt(),[n,s]=f.useState([]),[a,l]=f.useState(!1),o=f.useRef(null),c=Xn(),d=Jn(),m={page:1,perPage:10,search:"",clinic:"",status:"",orderBy:"",order:""},[u,h]=f.useState(m),p=Y=>{if(Y.length>0){const{id:q,desc:B}=Y[0],se={id:"id",profile:"display_name",clinic_name:"clinic_name",contact_number:"contact_number",status:"user_status"};h(Q=>({...Q,orderby:se[q]||q,order:B?"desc":"asc",page:1}))}else h(q=>({...q,orderby:"",order:"",page:1}))},[g,v]=f.useState(""),x=Ga(g,500);He.useEffect(()=>{h(Y=>({...Y,search:x,page:1}))},[x]);const[y,b]=f.useState(!1),[k,w]=f.useState(!1),T=f.useMemo(()=>Object.fromEntries(Object.entries(u).filter(([Y,q])=>q!==""&&q!==null&&q!==void 0)),[u]),{data:j,isLoading:D,error:_,refetch:N}=Hne(T),A=ze(),P=async({page:Y,per_page:q,search:B})=>{try{const se={dataType:"clinicList",page:Y,per_page:q,search:B},Q=await A.fetchQuery({queryKey:pt.list(se),queryFn:()=>Dt.getStaticData(se),staleTime:300*1e3}),pe=Q.data.map($=>({value:$.id,label:$.label||$.name}));return s($=>[...$,...pe]),Q}catch(se){return console.error("Error loading clinics:",se),{data:[],pagination:{has_more:!1}}}},E=Wne(),I=Kne(),M=Yne(),O=Qne(),F=Zne(),H=Gne(),G=j?.data?.receptionists||[],z=j?.data?.pagination||{total:0,lastPage:1,perPage:10,currentPage:1},ie=Y=>{kt({title:r("Delete Receptionist?","kivicare-clinic-management-system"),text:r("You're about to delete this receptionist.<br>This action cannot be undone.","kivicare-clinic-management-system"),icon:"ph-warning",confirmButtonText:r("Delete permanently","kivicare-clinic-management-system"),cancelButtonText:r("Keep receptionist","kivicare-clinic-management-system"),confirmButtonClass:"btn-danger"}).then(q=>{q.isConfirmed&&(yt({title:r("Deleting Receptionist...","kivicare-clinic-management-system"),text:r("Please wait while we remove the selected receptionist.<br>This won't take long.","kivicare-clinic-management-system")}),E.mutate(Y,{onSuccess:()=>{Tt({title:r("Receptionist Deleted","kivicare-clinic-management-system"),text:r("Receptionist has been deleted.","kivicare-clinic-management-system"),confirmButtonText:r("Back to receptionists","kivicare-clinic-management-system")}),N()},onError:B=>{rt({title:r("Error!","kivicare-clinic-management-system"),text:B.message||r("Failed to delete receptionist.","kivicare-clinic-management-system"),confirmButtonText:r("OK","kivicare-clinic-management-system")})}}))})},W=(Y,q)=>{kt({title:r("Resend Credentials?","kivicare-clinic-management-system"),text:Pi(r("Are you sure you want to resend credentials to %s?","kivicare-clinic-management-system"),q),icon:"ph-question",confirmButtonText:r("Yes, resend!","kivicare-clinic-management-system"),cancelButtonText:r("Cancel","kivicare-clinic-management-system"),confirmButtonClass:"btn-primary"}).then(B=>{B.isConfirmed&&H.mutate(Y,{onSuccess:()=>{Tt({title:r("Credentials Sent!","kivicare-clinic-management-system"),text:r("Receptionist credentials have been resent successfully.","kivicare-clinic-management-system"),confirmButtonText:r("OK","kivicare-clinic-management-system")})},onError:se=>{rt({title:r("Error!","kivicare-clinic-management-system"),text:se.message||r("Failed to resend credentials.","kivicare-clinic-management-system"),confirmButtonText:r("OK","kivicare-clinic-management-system")})}})})},ge=e("kiviPro"),ae=Ln(),U=f.useMemo(()=>[ae.accessor("id",{id:"id",header:()=>r("ID","kivicare-clinic-management-system"),enableSorting:!0,cell:Y=>i.jsx("div",{className:"font-weight-medium",children:Y.getValue()})}),ae.accessor("profile",{id:"profile",enableSorting:!0,header:()=>r("Receptionist","kivicare-clinic-management-system"),cell:Y=>i.jsx(dn,{profileUrl:Y.row.original.receptionist_image_url,name:Y.row.original.first_name+" "+Y.row.original.last_name,email:Y.row.original.email||"",fallbackText:(Y.row.original.first_name?.charAt(0)||"")+(Y.row.original.last_name?.charAt(0)||""),variant:"primary",size:"md",nameLabel:r("Clinic","kivicare-clinic-management-system")}),sortingFn:(Y,q)=>{const B=`${Y.original.first_name} ${Y.original.last_name}`.toLowerCase(),se=`${q.original.first_name} ${q.original.last_name}`.toLowerCase();return B.localeCompare(se)}}),...ge&&!c&&!d?[ae.accessor("clinic_name",{id:"clinic_name",header:()=>r("Clinic","kivicare-clinic-management-system"),enableSorting:!0,sortingFn:(Y,q)=>{const B=`${Y.original.first_name} ${Y.original.last_name}`.toLowerCase(),se=`${q.original.first_name} ${q.original.last_name}`.toLowerCase();return B.localeCompare(se)},cell:Y=>i.jsx(dn,{profileUrl:Y.row.original?.clinic?.clinic_image_url,name:Y.row.original?.clinic?.clinic_name,email:Y.row.original?.clinic?.clinic_email||"",fallbackText:(Y.row.original.first_name?.charAt(0)||"")+(Y.row.original.last_name?.charAt(0)||""),variant:"primary",size:"md",nameLabel:r("Receptionist","kivicare-clinic-management-system")})})]:[],ae.accessor("contact_number",{id:"contact_number",header:()=>r("Contact Number","kivicare-clinic-management-system"),cell:Y=>i.jsx("div",{children:i.jsx("span",{children:Y.row.original.contact_number||""})})}),ae.accessor("status",{header:()=>r("Status","kivicare-clinic-management-system"),cell:Y=>{const q=Number(Y.getValue()),B=Y.row.original,se=()=>{const Q=q===1?0:1;kt({title:r("Update Status?","kivicare-clinic-management-system"),text:Pi(r("Are you sure you want to change the status of <strong>%s</strong> to %s?","kivicare-clinic-management-system"),B.first_name+" "+B.last_name,Q===1?r("Inactive","kivicare-clinic-management-system"):r("Active","kivicare-clinic-management-system")),icon:"ph-warning",confirmButtonText:r("Yes, update","kivicare-clinic-management-system"),cancelButtonText:r("No, cancel","kivicare-clinic-management-system")}).then(pe=>{pe.isConfirmed&&(yt({title:r("Updating Status...","kivicare-clinic-management-system"),text:r("Please wait...","kivicare-clinic-management-system")}),O.mutate({ids:[B.id],status:Q},{onSuccess:()=>{Tt({title:r("Status Updated","kivicare-clinic-management-system"),text:r("Receptionist status has been updated successfully.","kivicare-clinic-management-system")})},onError:$=>{rt({title:r("Error","kivicare-clinic-management-system"),text:$.message||r("Failed to update status.","kivicare-clinic-management-system")})}}))})};return t("receptionist_edit")?i.jsxs("div",{className:"form-check form-switch",children:[i.jsx("input",{className:"form-check-input",type:"checkbox",role:"switch",id:`receptionist-status-${B.id}`,checked:q===0,onChange:se}),i.jsx("label",{className:"form-check-label",htmlFor:`receptionist-status-${B.id}`,children:i.jsx("span",{className:`badge ${q===0?"bg-success-subtle text-success":"bg-danger-subtle text-danger"}`,children:q===0?r("Active","kivicare-clinic-management-system"):r("Inactive","kivicare-clinic-management-system")})})]}):i.jsx("span",{className:`badge ${q===0?"bg-success-subtle text-success":"bg-danger-subtle text-danger"} px-3 py-2`,children:q===0?r("Active","kivicare-clinic-management-system"):r("Inactive","kivicare-clinic-management-system")})}}),...t("receptionist_edit")||t("receptionist_resend_credential")||t("receptionist_delete")?[ae.accessor("actions",{header:()=>r("Action","kivicare-clinic-management-system"),enableSorting:!1,cell:Y=>{const q=B=>se=>i.jsx(ut,{id:`tooltip-${Y.cell.row.original.id}-${B}`,...se,children:B});return i.jsxs("div",{className:"d-flex align-items-center gap-3",children:[t("receptionist_edit")&&i.jsx(Qe,{placement:"top",overlay:q(r("Edit","kivicare-clinic-management-system")),children:i.jsx(ht,{to:`/receptionist/edit/${Y.row.original.id}`,className:"btn btn-link text-success fs-5 p-0",children:i.jsx("i",{className:"ph ph-pencil-simple-line"})})}),t("receptionist_resend_credential")&&i.jsx(Qe,{placement:"top",overlay:q(r("Resend Credentials","kivicare-clinic-management-system")),children:i.jsx("button",{className:"btn btn-link text-primary fs-5 p-0",onClick:()=>W(Y.row.original.id,Y.row.original.display_name),children:i.jsx("i",{className:"ph ph-shield-check"})})}),t("receptionist_delete")&&i.jsx(Qe,{placement:"top",overlay:q(r("Delete","kivicare-clinic-management-system")),children:i.jsx("button",{className:"btn btn-link text-danger fs-5 p-0",onClick:()=>ie(Y.row.original.id),disabled:E.isPending,children:i.jsx("i",{className:"ph ph-trash"})})})]})}})]:[]],[E.isPending,t]),X=Y=>{v(Y.target.value)},J=[{value:"0",label:r("Active","kivicare-clinic-management-system")},{value:"1",label:r("Inactive","kivicare-clinic-management-system")}],he=async Y=>{try{yt({title:r("Exporting...","kivicare-clinic-management-system"),text:r("Please wait. This may take a few seconds.","kivicare-clinic-management-system")});const q={format:Y};u.search&&(q.search=u.search),u.clinic&&(q.clinic_id=u.clinic),u.status!==""&&u.status!==null&&u.status!==void 0&&(q.status=u.status),u.orderBy&&(q.orderby=u.orderBy),u.order&&(q.order=u.order);const B=await F.mutateAsync(q);if(B?.data?.receptionists){const se=new Date().toISOString().split("T")[0],Q=B.data.receptionists.map(pe=>({id:pe.id,name:pe.name,clinic_name:pe.clinic_name||"",clinic_id:pe.clinic_id||"",email:pe.email,contact_number:pe.contact_number,gender:pe.gender,dob:pe.dob,status:pe.user_status,full_address:pe.full_address}));switch(Y){case"csv":hs(Q,`receptionists-${se}.csv`);break;case"xls":ps(Q,`receptionists-${se}.xls`);break;case"pdf":gs(Q,`receptionists-${se}.pdf`,"Receptionists List");break;default:throw new Error("Invalid export format")}Wi(),Se.success(r("Export completed successfully.","kivicare-clinic-management-system"))}}catch(q){console.error("Export error:",q),rt({title:r("Error!","kivicare-clinic-management-system"),text:q.message||r("Failed to export data. Please try again.","kivicare-clinic-management-system"),confirmButtonText:r("OK","kivicare-clinic-management-system")})}},le=()=>he("csv"),ee=()=>he("xls"),[me,K]=f.useState(!1),re=()=>{me||(K(!0),he("pdf"),setTimeout(()=>K(!1),2e3))},oe=Y=>{h({...u,...Y,page:1}),b(!1)},C=()=>{h(m),s([]),v("")},R=f.useMemo(()=>["search","id","receptionistName","clinic","receptionistAddress","status"].some(q=>{const B=u[q];return B!=null&&B!==""})||g!=="",[u,g]),te=async Y=>{console.log("Import data:",Y);try{return Tt({title:r("Success!","kivicare-clinic-management-system"),text:r("Receptionists data imported successfully!","kivicare-clinic-management-system"),confirmButtonText:r("OK","kivicare-clinic-management-system")}),{success:!0}}catch(q){throw console.error("Import error:",q),q}},ne=[{type:"number",name:"id",label:r("Receptionist ID","kivicare-clinic-management-system"),placeholder:r("Enter Receptionist ID","kivicare-clinic-management-system"),min:1,pattern:"[0-9]*",onInput:Y=>{Y.target.value=Y.target.value.replace(/[^0-9]/g,"")}},{type:"text",name:"receptionistName",label:r("Receptionist Name","kivicare-clinic-management-system"),placeholder:r("Enter Receptionist Name","kivicare-clinic-management-system"),min:1},...ge&&!c&&!d?[{type:"paginatedSelect",name:"clinic",label:r("Clinic","kivicare-clinic-management-system"),placeholder:r("Select clinic","kivicare-clinic-management-system"),optionLoader:P,options:n,key:"clinic-filter"}]:[],{type:"select",name:"status",label:r("Status","kivicare-clinic-management-system"),placeholder:r("Select status","kivicare-clinic-management-system"),options:J}];return i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap row-gap-2 column-gap-3 mb-4",children:[i.jsx("div",{className:"page-title",children:i.jsx("h6",{className:"m-0",children:r("All Receptionists","kivicare-clinic-management-system")})}),i.jsxs("div",{className:"d-flex align-items-center row-gap-2 column-gap-3 flex-wrap",children:[t("receptionist_add")&&i.jsxs(ht,{to:"/receptionist/add",className:"btn btn-secondary d-flex align-items-center gap-2",children:[i.jsx("i",{className:"ph ph-plus-circle"}),i.jsx("span",{children:r("Add Receptionist","kivicare-clinic-management-system")})]}),ge&&i.jsxs("button",{className:"btn btn-primary d-flex align-items-center gap-2",onClick:()=>w(!0),children:[i.jsx("i",{className:"ph ph-upload"}),i.jsx("span",{children:r("Import Data","kivicare-clinic-management-system")})]}),i.jsxs("button",{className:"btn btn-primary d-flex align-items-center gap-2",onClick:()=>b(!0),children:[i.jsx("i",{className:"ph ph-funnel"}),i.jsx("span",{children:r("Filters","kivicare-clinic-management-system")})]})]})]}),i.jsxs("div",{className:"kc-table-wrapper",children:[i.jsx(Ci,{in:!a,timeout:100,classNames:"fade-top-bottom",unmountOnExit:!0,nodeRef:o,children:i.jsxs("div",{ref:o,className:"d-flex justify-content-between align-items-xl-center flex-column flex-lg-row gap-3 mb-4 position-absolute top-0  w-100",children:[i.jsxs("div",{className:"table-selection d-flex gap-3 flex-column flex-sm-row",children:[ge&&!c&&!d&&i.jsx(rn,{id:"clinic-filter",placeholder:r("Clinic Name","kivicare-clinic-management-system"),className:"react-select-box",classNamePrefix:"react-select",loadOptions:P,value:n.find(Y=>Y.value===u.clinic)||null,onChange:Y=>{h(q=>({...q,clinic:Y?Y.value:""}))},dependencies:{},isClearable:!0}),i.jsx(ct,{placeholder:r("Status","kivicare-clinic-management-system"),className:"react-select-box",classNamePrefix:"react-select",options:J,onChange:Y=>h(q=>({...q,status:Y?Y.value:""})),isClearable:!0,isSearchable:!1,styles:{menuPortal:Y=>({...Y,zIndex:9999})}})]}),i.jsxs("div",{className:"btn-toolbar d-flex gap-3 align-items-center justify-content-lg-end table-action-right",children:[i.jsx("div",{className:"d-flex align-items-center input-search-select",children:i.jsxs("div",{className:"input-group input-group-search",children:[i.jsx("span",{className:"input-group-text",children:i.jsx("i",{className:"ph ph-magnifying-glass"})}),i.jsx("input",{type:"text",className:"form-control",placeholder:r("Search Anything","kivicare-clinic-management-system"),value:g,onChange:X})]})}),t("receptionist_export")&&ge&&i.jsxs("div",{className:"download-buttons d-flex align-items-center gap-3",children:[i.jsx(Qe,{placement:"top",overlay:i.jsx(ut,{children:r("Export CSV","kivicare-clinic-management-system")}),children:i.jsx("button",{className:"btn btn-white",onClick:le,disabled:F.isPending,children:i.jsx("i",{className:"ph ph-file-csv"})})}),i.jsx(Qe,{placement:"top",overlay:i.jsx(ut,{children:r("Export Excel","kivicare-clinic-management-system")}),children:i.jsx("button",{className:"btn btn-white",onClick:ee,disabled:F.isPending,children:i.jsx("i",{className:"ph ph-file-xls"})})}),i.jsx(Qe,{placement:"top",overlay:i.jsx(ut,{children:r("Export PDF","kivicare-clinic-management-system")}),children:i.jsx("button",{className:"btn btn-white",onClick:re,disabled:me,children:i.jsx("i",{className:"ph ph-file-pdf"})})})]})]})]})}),i.jsx(wn,{data:G,columns:U,isLoading:D||E.isPending,error:_,currentPage:z.currentPage,perPage:z.perPage,totalItems:z.total,lastPage:z.lastPage,onPageChange:Y=>h(q=>({...q,page:Y})),onPerPageChange:Y=>h(q=>({...q,perPage:Y,page:1})),onSortingChange:p,manualSorting:!0,enableSelection:!0,moduleNamePlural:"receptionists",bulkActions:[{label:r("Delete","kivicare-clinic-management-system"),action:(Y,q)=>{const B=Y.map(se=>se.id);kt({title:r("Delete Receptionists?","kivicare-clinic-management-system"),text:r(`Youre about to delete <strong>${Y.length} receptionists</strong>.<br>This action cannot be undone.`,"kivicare-clinic-management-system"),icon:"ph-warning",confirmButtonText:r("Delete permanently","kivicare-clinic-management-system"),cancelButtonText:r("Keep receptionists","kivicare-clinic-management-system"),confirmButtonClass:"btn-danger"}).then(se=>{se.isConfirmed&&(yt({title:r("Deleting Receptionists...","kivicare-clinic-management-system"),text:r("Please wait while we remove the selected receptionists.<br>This won't take long.","kivicare-clinic-management-system")}),I.mutate(B,{onSuccess:Q=>{Tt({title:r("Receptionist Deleted","kivicare-clinic-management-system"),text:r(`${Y.length} receptionist${Y.length>1?"s":""} has been deleted.`,"kivicare-clinic-management-system"),confirmButtonText:r("Back to receptionists","kivicare-clinic-management-system")}),q()},onError:Q=>{console.error("Bulk delete clinics error:",Q);const pe=Q?.response?.data?.message||Q?.message||r("Failed to delete selected clinics. Please try again.","kivicare-clinic-management-system");rt({title:r("Error","kivicare-clinic-management-system"),text:pe,confirmButtonText:r("OK","kivicare-clinic-management-system")})}}))})},icon:i.jsx("i",{className:"ph ph-trash"})},{label:r("Resend Credentials","kivicare-clinic-management-system"),action:(Y,q)=>{const B=Y.map(se=>se.id);kt({title:r("Resend Credentials","kivicare-clinic-management-system"),text:r("Are you sure you want to resend credentials to the selected Receptionists?","kivicare-clinic-management-system"),icon:"ph-question",confirmButtonText:r("Yes, resend","kivicare-clinic-management-system"),cancelButtonText:r("Cancel","kivicare-clinic-management-system")}).then(se=>{se.isConfirmed&&(yt({title:r("Sending...","kivicare-clinic-management-system"),text:r("Please wait. This may take a few seconds.","kivicare-clinic-management-system")}),M.mutate(B,{onSuccess:Q=>{Tt({title:r("Success","kivicare-clinic-management-system"),text:Q?.message||r("Credentials have been resent successfully.","kivicare-clinic-management-system"),confirmButtonText:r("OK","kivicare-clinic-management-system")}),q()},onError:Q=>{console.error("Bulk resend credentials error:",Q);const pe=Q?.response?.data?.message||Q?.message||r("Failed to resend credentials. Please try again.","kivicare-clinic-management-system");rt({title:r("Error","kivicare-clinic-management-system"),text:pe,confirmButtonText:r("OK","kivicare-clinic-management-system")})}}))})},icon:i.jsx("i",{className:"ph ph-shield-check"})},{label:r("Set Active","kivicare-clinic-management-system"),action:(Y,q)=>{const B=Y.map(se=>se.id);kt({title:r("Update Status","kivicare-clinic-management-system"),text:r("Are you sure you want to set the selected Receptionists to active?","kivicare-clinic-management-system"),icon:"ph-question",confirmButtonText:r("Yes, update","kivicare-clinic-management-system"),cancelButtonText:r("Cancel","kivicare-clinic-management-system")}).then(se=>{se.isConfirmed&&(yt({title:r("Updating...","kivicare-clinic-management-system"),text:r("Please wait. This may take a few seconds.","kivicare-clinic-management-system")}),O.mutate({ids:B,status:"0"},{onSuccess:Q=>{Tt({title:r("Success","kivicare-clinic-management-system"),text:Q?.message||r("Receptionists status has been updated successfully.","kivicare-clinic-management-system"),confirmButtonText:r("OK","kivicare-clinic-management-system")}),q()},onError:Q=>{console.error("Bulk update status error:",Q);const pe=Q?.response?.data?.message||Q?.message||r("Failed to update Receptionists status. Please try again.","kivicare-clinic-management-system");rt({title:r("Error","kivicare-clinic-management-system"),text:pe,confirmButtonText:r("OK","kivicare-clinic-management-system")})}}))})},icon:i.jsx("i",{className:"ph ph-check-circle"})},{label:r("Set Inactive","kivicare-clinic-management-system"),action:(Y,q)=>{const B=Y.map(se=>se.id);kt({title:r("Update Status","kivicare-clinic-management-system"),text:r("Are you sure you want to set the selected Receptionists to inactive?","kivicare-clinic-management-system"),icon:"ph-warning",confirmButtonText:r("Yes, update","kivicare-clinic-management-system"),cancelButtonText:r("Cancel","kivicare-clinic-management-system"),confirmButtonClass:"btn-danger"}).then(se=>{se.isConfirmed&&(yt({title:r("Updating...","kivicare-clinic-management-system"),text:r("Please wait. This may take a few seconds.","kivicare-clinic-management-system")}),O.mutate({ids:B,status:"1"},{onSuccess:Q=>{Tt({title:r("Success","kivicare-clinic-management-system"),text:Q?.message||r("Receptionists status has been updated successfully.","kivicare-clinic-management-system"),confirmButtonText:r("OK","kivicare-clinic-management-system")}),q()},onError:Q=>{console.error("Bulk update status error:",Q);const pe=Q?.response?.data?.message||Q?.message||r("Failed to update clinic status. Please try again.","kivicare-clinic-management-system");rt({title:r("Error","kivicare-clinic-management-system"),text:pe,confirmButtonText:r("OK","kivicare-clinic-management-system")})}}))})},icon:i.jsx("i",{className:"ph ph-x-circle"})}],isBulkActionShow:Y=>{l(Y)}})]}),i.jsx(na,{show:y,onHide:()=>b(!1),queryParams:u,onApplyFilters:oe,onResetFilters:C,title:r("Filters","kivicare-clinic-management-system"),fields:ne,hasAppliedFilters:R}),ge&&i.jsx(Lr,{show:k,onHide:()=>w(!1),onImport:te,onReopenImport:()=>w(!0),onDataRefresh:N,context:"receptionists"})]})};function Wy({isEditing:t=!1,isProfile:e=!1}){const n=hn(),{id:s}=Yt(),{currentuserID:a,defaultCountryCode:l,showOtherGender:o}=mt(),{data:c}=Sn(),d=ze(),m=f.useMemo(()=>c?.data?.kc_available_translations||[{lang:"en_US",label:"English (United States)"}],[c]),u=e?a:s,h=Vne(),p=Une(),{isAddonActive:g}=mt(),v=g("kiviPro"),[x,y]=f.useState(!1),b=x||h.isPending,{data:k,isLoading:w,error:T}=zne(u,{enabled:(t||e)&&!!u}),j=k?.data,D=async({page:U,per_page:X,search:J})=>{try{const he={dataType:"clinicList",page:U,per_page:X,search:J};return await d.fetchQuery({queryKey:pt.list(he),queryFn:()=>Dt.getStaticData(he),staleTime:300*1e3})}catch(he){return console.error("Error loading clinics:",he),{data:[],pagination:{total:0,per_page:10,current_page:1,total_pages:0,has_more:!1}}}},_=Wc.PhoneNumberUtil.getInstance(),N=U=>{try{return _.isValidNumber(_.parseAndKeepRawInput(U))}catch{return!1}},A=[{value:0,label:r("Active","kivicare-clinic-management-system")},{value:1,label:r("Inactive","kivicare-clinic-management-system")}],{register:P,handleSubmit:E,control:I,watch:M,setValue:O,formState:{errors:F},reset:H}=en({defaultValues:{receptionistImage:"",receptionistImageId:"",firstName:"",lastName:"",email:"",clinic:null,contactNumber:"",dob:"",status:A[0],gender:"",address:"",city:"",country:"",postalCode:""}});f.useEffect(()=>{if(t&&j&&!w){const U={firstName:j.first_name||"",lastName:j.last_name||"",email:j.email||"",contactNumber:j.contact_number||"",dob:j.dob||"",gender:j.gender||"",status:A.find(X=>X.value===parseInt(j.status))||A[0],clinic:j?.clinic?{value:j.clinic.clinic_id,label:j.clinic.clinic_name}:null,receptionistImageId:j.receptionist_image_id||"",receptionistImage:j.receptionist_image_url||"",address:j.address||"",city:j.city||"",country:j.country||"",postalCode:j.postal_code||""};console.log(U.clinic),H(U),setTimeout(()=>{O("contactNumber",j.contact_number||"")},0)}},[t,j]);const G=(U,X)=>{console.log(`Updating ${U} with:`,X),O(U,X.url||X.image),O(`${U}Id`,X.id||X.imageId)},z=async U=>{y(!0);try{console.log("Form Data:",U);const X={first_name:U.firstName,last_name:U.lastName,email:U.email,clinic_id:U.clinic?.value||U.clinic,contact_number:U.contactNumber,dob:U.dob,status:U.status?.value||U.status,gender:U.gender,receptionist_image:U.receptionistImage,receptionist_image_id:U.receptionistImageId,address:U.address,city:U.city,country:U.country,postal_code:U.postalCode};let J;t?(J=await p.mutateAsync({id:u,...X}),Se.success(r("Receptionist updated successfully","kivicare-clinic-management-system"),{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0})):(J=await h.mutateAsync(X),Se.success(r("Receptionist created successfully","kivicare-clinic-management-system"),{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0})),e||n("/receptionist")}catch(X){console.error("Submission error:",X);const J=X.response?.data?.message||X.message||r("Failed to save receptionist. Please try again.","kivicare-clinic-management-system");Se.error(J,{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0})}finally{y(!1)}},ie=U=>{console.log("Validation errors:",U);const X=Object.keys(U)[0],J=document.getElementById(X);J&&(J.scrollIntoView({behavior:"smooth",block:"center"}),J.focus())},W={firstName:{required:r("First name is required","kivicare-clinic-management-system"),minLength:{value:2,message:r("First name must be at least 2 characters","kivicare-clinic-management-system")}},lastName:{required:r("Last name is required","kivicare-clinic-management-system"),minLength:{value:2,message:r("Last name must be at least 2 characters","kivicare-clinic-management-system")}},email:{required:r("Email is required","kivicare-clinic-management-system"),pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:r("Invalid email address","kivicare-clinic-management-system")}},clinic:{required:r("Clinic selection is required","kivicare-clinic-management-system")},contactNumber:{required:r("Contact number is required","kivicare-clinic-management-system"),validate:U=>U?N(U)||r("Please enter a valid phone number","kivicare-clinic-management-system"):r("Contact number is required","kivicare-clinic-management-system")},dob:{validate:U=>{if(!U)return!0;const X=new Date(U);return new Date().getFullYear()-X.getFullYear()>=18||r("Receptionist must be at least 18 years old","kivicare-clinic-management-system")}},status:{required:r("Status is required","kivicare-clinic-management-system")},gender:{required:r("Gender is required","kivicare-clinic-management-system")},address:{minLength:{value:10,message:r("Address must be at least 10 characters","kivicare-clinic-management-system")}},city:{minLength:{value:2,message:r("City must be at least 2 characters","kivicare-clinic-management-system")}},country:{minLength:{value:2,message:r("Country must be at least 2 characters","kivicare-clinic-management-system")}},postalCode:{pattern:{value:/^[0-9A-Z\s-]{3,10}$/i,message:r("Invalid postal code format","kivicare-clinic-management-system")}}},ge=t?r("Edit Receptionist","kivicare-clinic-management-system"):r("Add Receptionist","kivicare-clinic-management-system"),ae=t?r("Update Receptionist","kivicare-clinic-management-system"):r("Save Receptionist","kivicare-clinic-management-system");return(t||e)&&w?i.jsx(Uy,{}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap row-gap-2 column-gap-3 mb-4",children:[i.jsx("div",{className:"page-title",children:i.jsx("h6",{className:"m-0",children:e?r("My Profile","kivicare-clinic-management-system"):ge})}),e&&i.jsx("div",{children:i.jsx(ei,{size:"sm"})})]}),i.jsxs("form",{onSubmit:E(z,ie),className:"mb-0",children:[i.jsx("div",{className:"card",children:i.jsxs("div",{className:"card-body",children:[i.jsxs("div",{children:[i.jsx("h6",{className:"mb-3",children:r("Basic Information","kivicare-clinic-management-system")}),i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-lg-4",children:i.jsx("div",{className:"form-group d-flex justify-content-center pt-5",children:i.jsx(ye,{name:"receptionistImage",control:I,render:({field:U})=>i.jsx(yl,{id:"receptionist-image-upload",name:"receptionistImage",label:r("Profile Image","kivicare-clinic-management-system"),defaultImage:U.value,defaultImageId:M("receptionistImageId"),onChange:X=>{G("receptionistImage",X)},size:200,register:P,errors:F,className:""})})})}),i.jsx("div",{className:"col-lg-8",children:i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{htmlFor:"firstName",className:"form-label",children:[r("First Name","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx("input",{type:"text",id:"firstName",className:`form-control ${F.firstName?"is-invalid":""}`,placeholder:r("Enter the First Name","kivicare-clinic-management-system"),...P("firstName",W.firstName)}),F.firstName&&i.jsx("div",{className:"invalid-feedback d-block",children:F.firstName.message})]})}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{htmlFor:"lastName",className:"form-label",children:[r("Last Name","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx("input",{type:"text",id:"lastName",className:`form-control ${F.lastName?"is-invalid":""}`,placeholder:r("Enter the Last Name","kivicare-clinic-management-system"),...P("lastName",W.lastName)}),F.lastName&&i.jsx("div",{className:"invalid-feedback d-block",children:F.lastName.message})]})}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{htmlFor:"email",className:"form-label",children:[r("Email","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx("input",{type:"email",id:"email",className:`form-control ${F.email?"is-invalid":""}`,placeholder:r('eg "Markavenue@gmail.com"',"kivicare-clinic-management-system"),...P("email",W.email)}),F.email&&i.jsx("div",{className:"invalid-feedback d-block",children:F.email.message})]})}),v&&i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{htmlFor:"clinic",className:"form-label",children:[r("Select Clinic","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx(ye,{name:"clinic",control:I,rules:W.clinic,render:({field:U})=>i.jsx(rn,{id:"clinic",loadOptions:D,value:U.value,onChange:X=>U.onChange(X),placeholder:r("Select Clinic","kivicare-clinic-management-system"),className:`react-select-box ${F.clinic?"is-invalid":""}`,classNamePrefix:"react-select",dependencies:{}})}),F.clinic&&i.jsx("div",{className:"invalid-feedback d-block",children:F.clinic.message})]})}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{htmlFor:"contactNumber",className:"form-label",children:[r("Contact Number","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx(ye,{name:"contactNumber",control:I,rules:W.contactNumber,render:({field:U})=>i.jsx(to,{defaultCountry:l,value:U.value,onChange:U.onChange,inputProps:{className:`form-control ${F.contactNumber?"is-invalid":""}`,placeholder:r("555-0123-4567","kivicare-clinic-management-system")},style:{"--react-international-phone-border-radius":"0.375rem","--react-international-phone-border-color":F.contactNumber?"#dc3545":"#dee2e6","--react-international-phone-dropdown-item-background-color":"#ffffff","--react-international-phone-dropdown-item-background-color-hover":"#f8f9fa"}})}),F.contactNumber&&i.jsx("div",{className:"invalid-feedback d-block",children:F.contactNumber.message})]})}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{htmlFor:"dob",className:"form-label",children:r("DOB","kivicare-clinic-management-system")}),i.jsx(ye,{name:"dob",control:I,rules:W.dob,render:({field:U})=>i.jsx(Un,{id:"dob",className:`form-control ${F.dob?"is-invalid":""}`,value:U.value?Zn(U.value):"",onChange:X=>{if(X&&X[0]){const J=X[0],he=`${J.getFullYear()}-${String(J.getMonth()+1).padStart(2,"0")}-${String(J.getDate()).padStart(2,"0")}`;U.onChange(he)}else U.onChange("")},options:{dateFormat:xi(window.kc_frontend.date_format),maxDate:new Date,disableMobile:!0,locale:Wn()},placeholder:r("Select date of birth","kivicare-clinic-management-system"),disabled:t&&w})}),F.dob&&i.jsx("div",{className:"invalid-feedback d-block",children:F.dob.message})]})})]})}),i.jsxs("div",{className:"row mt-4",children:[i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{htmlFor:"status",className:"form-label",children:[r("Status","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsx(ye,{name:"status",control:I,rules:W.status,render:({field:U})=>i.jsx(ct,{id:"status",className:`react-select-box ${F.status?"is-invalid":""}`,classNamePrefix:"react-select",options:A,value:U.value,onChange:U.onChange,placeholder:r("Select Status","kivicare-clinic-management-system"),isSearchable:!1,styles:{menuPortal:X=>({...X,zIndex:9999})}})}),F.status&&i.jsx("div",{className:"invalid-feedback d-block",children:F.status.message})]})}),i.jsx("div",{className:"col-lg-4 col-md-6 mt-md-0 mt-4",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[r("Gender","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsxs("div",{className:"d-flex align-items-center flex-wrap gap-3 form-control",children:[i.jsxs("div",{className:"form-check",children:[i.jsx("input",{className:`form-check-input ${F.gender?"is-invalid":""}`,type:"radio",name:"gender",id:"male",value:"male",...P("gender",W.gender)}),i.jsx("label",{className:"form-check-label",htmlFor:"male",children:r("Male","kivicare-clinic-management-system")})]}),i.jsxs("div",{className:"form-check",children:[i.jsx("input",{className:`form-check-input ${F.gender?"is-invalid":""}`,type:"radio",name:"gender",id:"female",value:"female",...P("gender",W.gender)}),i.jsx("label",{className:"form-check-label",htmlFor:"female",children:r("Female","kivicare-clinic-management-system")})]}),o&&i.jsxs("div",{className:"form-check",children:[i.jsx("input",{className:`form-check-input ${F.gender?"is-invalid":""}`,type:"radio",name:"gender",id:"other",value:"other",...P("gender",W.gender)}),i.jsx("label",{className:"form-check-label",htmlFor:"other",children:r("Other","kivicare-clinic-management-system")})]})]}),F.gender&&i.jsx("div",{className:"invalid-feedback d-block",children:F.gender.message})]})}),e&&i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{htmlFor:"language",className:"form-label",children:r("Choose Language","kivicare-clinic-management-system")}),i.jsx(ye,{name:"language",control:I,render:({field:U})=>i.jsx(ct,{id:"language",options:m.map(X=>({value:X.lang,label:X.label})),value:U.value,onChange:U.onChange,placeholder:r("Choose Language","kivicare-clinic-management-system"),className:"react-select-box",classNamePrefix:"react-select",isSearchable:!0,styles:{menuPortal:X=>({...X,zIndex:9999})}})})]})})]})]})]}),i.jsxs("div",{className:"my-5 py-3",children:[i.jsx("h6",{className:"mb-3",children:r("Address Information","kivicare-clinic-management-system")}),i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{htmlFor:"address",className:"form-label",children:r("Address","kivicare-clinic-management-system")}),i.jsx("input",{type:"text",id:"address",className:`form-control ${F.address?"is-invalid":""}`,placeholder:r('eg "1234 Skin Care Ave, Suite 567, Dermatown, CA 90210"',"kivicare-clinic-management-system"),...P("address",W.address)}),F.address&&i.jsx("div",{className:"invalid-feedback d-block",children:F.address.message})]})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{htmlFor:"city",className:"form-label",children:r("City","kivicare-clinic-management-system")}),i.jsx("input",{type:"text",id:"city",className:`form-control ${F.city?"is-invalid":""}`,placeholder:r("Enter City Name","kivicare-clinic-management-system"),...P("city",W.city)}),F.city&&i.jsx("div",{className:"invalid-feedback d-block",children:F.city.message})]})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{htmlFor:"country",className:"form-label",children:r("Country","kivicare-clinic-management-system")}),i.jsx("input",{type:"text",id:"country",className:`form-control ${F.country?"is-invalid":""}`,placeholder:r("Enter Country Name","kivicare-clinic-management-system"),...P("country",W.country)}),F.country&&i.jsx("div",{className:"invalid-feedback d-block",children:F.country.message})]})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{htmlFor:"postalCode",className:"form-label",children:r("Postal Code","kivicare-clinic-management-system")}),i.jsx("input",{type:"text",id:"postalCode",className:`form-control ${F.postalCode?"is-invalid":""}`,placeholder:r("Enter Postal Code","kivicare-clinic-management-system"),...P("postalCode",W.postalCode)}),F.postalCode&&i.jsx("div",{className:"invalid-feedback d-block",children:F.postalCode.message})]})})]})]})]})}),i.jsxs("div",{className:"d-flex align-items-center justify-content-end flex-wrap gap-3",children:[i.jsx(ei,{text:r("Cancel","kivicare-clinic-management-system"),variant:"secondary",showIcon:!1,disabled:b}),i.jsx("button",{type:"submit",className:"btn btn-primary",disabled:b,children:b?i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),t?r("Updating...","kivicare-clinic-management-system"):r("Saving...","kivicare-clinic-management-system")]}):ae})]})]})]})}const Jne=Object.freeze(Object.defineProperty({__proto__:null,default:Wy},Symbol.toStringTag,{value:"Module"})),eie=[Gn({path:"/receptionist",title:"Receptionist",outlet:qne,permissions:["receptionist_list"],module:"receptionist",meta:{description:"Receptionist management system",icon:"user-circle",showInSidebar:!0},children:[We({path:"",component:Xne,title:"All Receptionists",index:!0,permissions:["receptionist_list"],module:"receptionist",meta:{description:"List of all receptionists",breadcrumb:"All Receptionists"},skeleton:()=>i.jsx("div",{className:"container-fluid pb-0",children:i.jsx(_n,{columns:6,rows:5,showBreadcrumb:!0,showPageHeader:!0,showFilterBar:!0})})}),We({path:"add",component:Wy,title:"Add Receptionist",props:{isEditing:!1},permissions:["receptionist_add"],module:"receptionist",skeleton:Uy,meta:{description:"Create a new receptionist",breadcrumb:"Add New"}}),We({path:"edit/:id",component:Wy,title:"Edit Receptionist",props:{isEditing:!0},permissions:["receptionist_edit"],module:"receptionist",skeleton:Uy,meta:{description:"Edit existing receptionist",breadcrumb:"Edit"}})]})],tie=()=>{const t=Kn();return i.jsxs("div",{className:"doctors-service-container",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center gap-3 flex-wrap mb-4",children:[i.jsx(_i,{}),i.jsx("div",{children:t.pathname!=="/service"&&i.jsx(ei,{size:"sm"})})]}),i.jsx(fs,{})]})},nie=()=>{const[t,e]=f.useState({page:1,perPage:10,search:"",category:"",status:"",orderBy:"",order:""}),[n,s]=f.useState([]),{isAddonActive:a,hasCapability:l,currencyPrefix:o,currencyPostfix:c}=mt(),d=a("kiviPro"),m=Xn(),u=Jn(),{data:h,isLoading:p}=Ha("service_type"),g=f.useMemo(()=>Object.fromEntries(Object.entries(t).filter(([R,te])=>te!==""&&te!==null&&te!==void 0)),[t]),{data:v,isLoading:x,error:y}=J7(g),b=iH(),k=sH(),w=aH(),[T,j]=f.useState(!1),[D,_]=f.useState(!1),N=async R=>{try{yt({title:r("Exporting...","kivicare-clinic-management-system"),text:r("Please wait. This may take a few seconds.","kivicare-clinic-management-system")});const te=new Date().toISOString().split("T")[0],ne=I.map(Y=>({id:Y.id,serviceId:Y.serviceId,serviceName:Y.serviceName,clinicName:Y.clinicName,doctorName:Y.doctorName,charges:Y.charges,duration:Y.duration,category:Y.category,status:Y.status===1?"Active":"Inactive"}));switch(R){case"csv":hs(ne,`services-${te}.csv`);break;case"xls":ps(ne,`services-${te}.xls`);break;case"pdf":gs(ne,`services-${te}.pdf`,"Services List");break;default:throw new Error("Invalid export format")}Wi(),Se.success(r("Export completed successfully.","kivicare-clinic-management-system"))}catch(te){console.error("Export error:",te),rt({title:r("Error!","kivicare-clinic-management-system"),text:te.message||r("Failed to export data. Please try again.","kivicare-clinic-management-system"),confirmButtonText:r("OK","kivicare-clinic-management-system")})}},A=()=>N("csv"),P=()=>N("xls"),E=()=>{T||(j(!0),N("pdf"),setTimeout(()=>j(!1),2e3))},I=v?.data?.doctorServices||[],M=v?.data?.pagination||{total:0,lastPage:1,perPage:10,currentPage:1};f.useMemo(()=>h?.data?h.data.map(R=>{let te="",ne="";return typeof R=="string"?(te=R,ne=R):typeof R=="object"&&R!==null&&(te=R.label||R.name||"",ne=R.id??R.name??te),{value:ne,label:te}}):[],[h]);const O=ze(),F=f.useCallback(async({page:R,per_page:te,search:ne})=>{try{const Y={dataType:"staticData",staticDataType:"staticDataWithLabel",type:"service_type",page:R,per_page:te,search:ne},q=await O.fetchQuery({queryKey:pt.list(Y),queryFn:()=>Dt.getStaticData(Y),staleTime:0}),B=q.data.map(se=>({value:se.id,label:se.label||se.name}));return s(se=>{const Q=B.filter(pe=>!se.some($=>$.value===pe.value));return[...se,...Q]}),q.data.map(se=>{let Q="",pe="";return typeof se=="string"?(Q=se,pe=se):typeof se=="object"&&se!==null&&(Q=se.label||se.name||"",pe=se.id??se.name??Q),{value:pe,label:Q}})}catch(Y){return console.error("Error loading Specialties:",Y),{data:[],pagination:{has_more:!1}}}},[O]),H=[{value:"1",label:r("Active","kivicare-clinic-management-system"),class:"bg-success-subtle text-success"},{value:"0",label:r("Inactive","kivicare-clinic-management-system"),class:"bg-danger-subtle text-danger"}],[G,z]=f.useState(""),ie=Ga(G,500);He.useEffect(()=>{e(R=>({...R,search:ie,page:1}))},[ie]);const W=R=>{if(R.length>0){const{id:te,desc:ne}=R[0],Y={id:"id",serviceId:"serviceId",serviceName:"serviceName",clinicName:"clinicName",doctorName:"doctorName",charges:"charges",duration:"duration",category:"category",status:"status"};e(q=>({...q,orderby:Y[te]||te,order:ne?"desc":"asc",page:1}))}else e(te=>({...te,orderby:"",order:"",page:1}))},ge=R=>{z(R.target.value)},[ae,U]=f.useState(!1),[X,J]=f.useState(!1),he=f.useRef(null),le=R=>{const te={};for(const ne in R)if(Object.prototype.hasOwnProperty.call(R,ne)){const Y=R[ne];te[ne]=typeof Y=="string"?Y.trim():Y}e(ne=>({...ne,...te,page:1})),U(!1)},ee=()=>{const R={page:1,perPage:t.perPage,search:"",id:"",doctorName:"",clinicName:"",serviceName:"",charges:"",duration:"",category:"",status:"",orderBy:"",order:""};e(R),s([]),U(!1)},me=f.useMemo(()=>["search","id","serviceName","clinicName","doctorName","charges","category","status"].some(te=>{const ne=t[te];return typeof ne=="object"&&ne!==null?ne.value!==void 0&&ne.value!=="":ne!=null&&ne!==""})||G!=="",[t,G]),K=[{type:"number",name:"id",label:r("ID","kivicare-clinic-management-system"),placeholder:r('eg "123"',"kivicare-clinic-management-system"),min:1,pattern:"[0-9]*",onInput:R=>{R.target.value=R.target.value.replace(/[^0-9]/g,"")}},{type:"text",name:"serviceName",label:r("Service Name","kivicare-clinic-management-system"),placeholder:r("eg Full body checkup","kivicare-clinic-management-system")},...d&&!m&&!u?[{type:"text",name:"clinicName",label:r("Clinic Name","kivicare-clinic-management-system"),placeholder:r('eg "Mount Health Care"',"kivicare-clinic-management-system")}]:[],{type:"text",name:"doctorName",label:r("Doctor Name","kivicare-clinic-management-system"),placeholder:r("eg Albert Heaven","kivicare-clinic-management-system")},{type:"number",name:"charges",label:r("Charges","kivicare-clinic-management-system"),placeholder:r('eg "100"',"kivicare-clinic-management-system"),min:0,pattern:"[0-9]*",onInput:R=>{R.target.value=R.target.value.replace(/[^0-9]/g,"")}},{type:"paginatedSelect",name:"category",label:r("Category","kivicare-clinic-management-system"),placeholder:r('eg "General Dentistry"',"kivicare-clinic-management-system"),optionLoader:F,isSearchable:!0,perPage:50,storeObject:!0},{type:"select",name:"status",label:r("Status","kivicare-clinic-management-system"),placeholder:r('eg "Active"',"kivicare-clinic-management-system"),options:H,isSearchable:!1}],re=Ln(),oe=f.useMemo(()=>[re.accessor("id",{header:()=>r("ID","kivicare-clinic-management-system"),enableSorting:!0,cell:R=>`${R.getValue()}`}),re.accessor("serviceId",{header:()=>r("Service ID","kivicare-clinic-management-system"),enableSorting:!0,cell:R=>R.getValue()}),re.accessor("serviceName",{header:()=>r("Service","kivicare-clinic-management-system"),enableSorting:!0,cell:R=>i.jsx(dn,{profileUrl:R.row.original.service_image_url,name:R.getValue(),fallbackText:"DS",variant:"primary",size:"md",nameLabel:r("Service","kivicare-clinic-management-system")})}),...d&&!m&&!u?[re.accessor("clinicName",{id:"clinicName",header:()=>r("Clinic","kivicare-clinic-management-system"),enableSorting:!0,cell:R=>{const te=R.row.original.clinicName,ne=R.row.original.clinicProfileImage,Y=R.row.original.clinicEmail,q=R.row.original.clinicContactNumber;return i.jsx(dn,{profileUrl:ne,name:te,fallbackText:"CL",variant:"primary",size:"md",nameLabel:r("Clinic","kivicare-clinic-management-system"),email:Y,contactNumber:q})}})]:[],re.accessor("doctorName",{header:()=>r("Doctor","kivicare-clinic-management-system"),enableSorting:!0,cell:R=>i.jsx(dn,{profileUrl:R.row.original.doctorProfileImage,name:R.getValue(),fallbackText:"DS",variant:"primary",size:"md",nameLabel:r("Doctor","kivicare-clinic-management-system"),email:R.row.original.doctorEmail,contactNumber:R.row.original.doctorContactNumber})}),re.accessor("charges",{header:()=>r("Charges","kivicare-clinic-management-system"),enableSorting:!0,cell:R=>`${o||""}${R.getValue()}${c||""}`}),re.accessor("duration",{header:()=>r("Duration","kivicare-clinic-management-system"),enableSorting:!0,cell:R=>R.getValue()}),re.accessor("category",{header:()=>r("Category","kivicare-clinic-management-system"),enableSorting:!0,cell:R=>R.getValue()}),re.accessor("status",{header:()=>r("Status","kivicare-clinic-management-system"),enableSorting:!0,cell:R=>{const te=Number(R.getValue()),ne=R.row.original,Y=()=>{const q=te===1?0:1;kt({title:r("Update Status?","kivicare-clinic-management-system"),text:Pi(r("Are you sure you want to change the status of <strong>%s</strong> to %s?","kivicare-clinic-management-system"),ne.service_name,q===1?r("Inactive","kivicare-clinic-management-system"):r("Active","kivicare-clinic-management-system")),icon:"ph-warning",confirmButtonText:r("Yes, update","kivicare-clinic-management-system"),cancelButtonText:r("No, cancel","kivicare-clinic-management-system")}).then(B=>{B.isConfirmed&&(yt({title:r("Updating Status...","kivicare-clinic-management-system"),text:r("Please wait...","kivicare-clinic-management-system")}),w.mutate({ids:[ne.id],status:q},{onSuccess:()=>{Tt({title:r("Status Updated","kivicare-clinic-management-system"),text:r("Service status has been updated successfully.","kivicare-clinic-management-system")})},onError:se=>{rt({title:r("Error","kivicare-clinic-management-system"),text:se.message||r("Failed to update status.","kivicare-clinic-management-system")})}}))})};return l("service_edit")?i.jsxs("div",{className:"form-check form-switch",children:[i.jsx("input",{className:"form-check-input",type:"checkbox",role:"switch",id:`service-status-${ne.id}`,checked:te===1,onChange:Y}),i.jsx("label",{className:"form-check-label",htmlFor:`service-status-${ne.id}`,children:i.jsx("span",{className:`badge ${te===1?"bg-success-subtle text-success":"bg-danger-subtle text-danger"}`,children:te===1?r("Active","kivicare-clinic-management-system"):r("Inactive","kivicare-clinic-management-system")})})]}):i.jsx("span",{className:`badge ${te===1?"bg-success-subtle text-success":"bg-danger-subtle text-danger"} px-3 py-2`,children:te===1?r("Active","kivicare-clinic-management-system"):r("Inactive","kivicare-clinic-management-system")})}}),re.accessor("actions",{header:()=>r("Action","kivicare-clinic-management-system"),enableSorting:!1,cell:R=>{const te=ne=>Y=>i.jsx(ut,{id:`tooltip-${R.cell.row.original.id}-${ne}`,...Y,children:ne});return i.jsxs("div",{className:"d-flex align-items-center gap-3",children:[l("service_edit")&&i.jsx(Qe,{placement:"top",overlay:te(r("Edit","kivicare-clinic-management-system")),children:i.jsx(ht,{to:`/service/edit/${R.row.original.id}`,className:"btn btn-link text-success fs-5 p-0",children:i.jsx("i",{className:"ph ph-pencil-simple-line"})})}),l("service_delete")&&i.jsx(Qe,{placement:"top",overlay:te(r("Delete","kivicare-clinic-management-system")),children:i.jsx("button",{className:"btn btn-link text-danger fs-5 p-0",onClick:()=>C(R.cell.row.original.id),children:i.jsx("i",{className:"ph text-bold ph-trash"})})})]})}})],[l]),C=R=>{kt({title:r("Delete Service?","kivicare-clinic-management-system"),text:r("You're about to delete this service.<br>This action cannot be undone.","kivicare-clinic-management-system"),icon:"ph-warning",confirmButtonText:r("Delete permanently","kivicare-clinic-management-system"),cancelButtonText:r("Keep service","kivicare-clinic-management-system"),confirmButtonClass:"btn-danger"}).then(te=>{te.isConfirmed&&(yt({title:r("Deleting Service...","kivicare-clinic-management-system"),text:r("Please wait while we remove the selected service.<br>This won't take long.","kivicare-clinic-management-system")}),b.mutate(R,{onSuccess:ne=>{Tt({title:r("Deleted!","kivicare-clinic-management-system"),text:ne?.message||r("Service has been deleted successfully.","kivicare-clinic-management-system"),confirmButtonText:r("Back to services","kivicare-clinic-management-system")})},onError:ne=>{rt({text:ne?.response?.data?.message||r("Failed to delete service. Please try again.","kivicare-clinic-management-system")})}}))})};return i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap row-gap-2 column-gap-3 mb-4",children:[i.jsx("div",{className:"page-title",children:i.jsx("h6",{className:"m-0",children:r("All Services","kivicare-clinic-management-system")})}),i.jsxs("div",{className:"d-flex align-items-center row-gap-2 column-gap-3 flex-wrap",children:[l("service_add")&&i.jsxs(ht,{to:"/service/add",className:"btn btn-secondary d-flex align-items-center gap-2",children:[i.jsx("i",{className:"ph ph-plus-circle"}),i.jsx("span",{children:r("Add Service","kivicare-clinic-management-system")})]}),d&&i.jsxs("button",{className:"btn btn-primary d-flex align-items-center gap-2",onClick:()=>_(!0),children:[i.jsx("i",{className:"ph ph-upload"}),i.jsx("span",{children:r("Import Data","kivicare-clinic-management-system")})]}),i.jsxs("button",{className:"btn btn-primary d-flex align-items-center gap-2",onClick:()=>U(!0),children:[i.jsx("i",{className:"ph ph-funnel"}),i.jsx("span",{children:r("Filters","kivicare-clinic-management-system")})]})]})]}),i.jsx(na,{show:ae,onHide:()=>U(!1),queryParams:t,onApplyFilters:le,onResetFilters:ee,title:r("Filters","kivicare-clinic-management-system"),fields:K,hasAppliedFilters:me}),i.jsxs("div",{className:"kc-table-wrapper",children:[i.jsx(Ci,{in:!X,timeout:100,classNames:"fade-top-bottom",unmountOnExit:!0,nodeRef:he,children:i.jsxs("div",{ref:he,className:"d-flex justify-content-between align-items-xl-center flex-column flex-lg-row gap-3 mb-4 position-absolute top-0 w-100",children:[i.jsxs("div",{className:"table-selection d-flex gap-3 flex-column flex-sm-row",children:[i.jsx(rn,{id:"specialties-filter",placeholder:r("Category","kivicare-clinic-management-system"),className:"react-select-box",classNamePrefix:"react-select",loadOptions:F,value:n.find(R=>R.value===t.category)||null,onChange:R=>{console.log(R),e(te=>({...te,category:R?R.value:""}))},isClearable:!0,perPage:50}),i.jsx(ct,{placeholder:r("Status","kivicare-clinic-management-system"),className:"react-select-box",classNamePrefix:"react-select",options:H,onChange:R=>e(te=>({...te,status:R?String(R.value):""})),isSearchable:!1,isClearable:!0,styles:{menuPortal:R=>({...R,zIndex:9999})},value:H.find(R=>String(R.value)===String(t.status))||null})]}),i.jsxs("div",{className:"btn-toolbar d-flex gap-3 align-items-center justify-content-lg-end table-action-right",children:[i.jsx("div",{className:"d-flex align-items-center input-search-select",children:i.jsxs("div",{className:"input-group input-group-search",children:[i.jsx("span",{className:"input-group-text",children:i.jsx("i",{className:"ph ph-magnifying-glass"})}),i.jsx("input",{type:"text",className:"form-control",placeholder:r("Search Anything","kivicare-clinic-management-system"),value:G,onChange:ge})]})}),l("service_export")&&d&&i.jsxs("div",{className:"download-buttons d-flex align-items-center gap-3",children:[i.jsx(Qe,{placement:"top",overlay:i.jsx(ut,{children:r("Export CSV","kivicare-clinic-management-system")}),children:i.jsx("button",{className:"btn btn-white",onClick:A,disabled:!1,children:i.jsx("i",{className:"ph ph-file-csv"})})}),i.jsx(Qe,{placement:"top",overlay:i.jsx(ut,{children:r("Export Excel","kivicare-clinic-management-system")}),children:i.jsx("button",{className:"btn btn-white",onClick:P,disabled:!1,children:i.jsx("i",{className:"ph ph-file-xls"})})}),i.jsx(Qe,{placement:"top",overlay:i.jsx(ut,{children:r("Export PDF","kivicare-clinic-management-system")}),children:i.jsx("button",{className:"btn btn-white",onClick:E,disabled:T,children:i.jsx("i",{className:"ph ph-file-pdf"})})})]})]})]})}),i.jsx(wn,{data:I,columns:oe,isLoading:x,error:y,currentPage:M.currentPage,perPage:M.perPage,totalItems:M.total,lastPage:M.lastPage,onPageChange:R=>e(te=>({...te,page:R})),onPerPageChange:R=>e(te=>({...te,perPage:R,page:1})),onSortingChange:W,manualSorting:!0,enableSelection:!0,moduleNamePlural:"services",bulkActions:[{label:r("Delete","kivicare-clinic-management-system"),action:(R,te)=>{const ne=R.map(Y=>Y.id);kt({title:r("Delete Services?","kivicare-clinic-management-system"),text:r(`Youre about to delete <strong>${R.length} services</strong>.<br>This action cannot be undone.`,"kivicare-clinic-management-system"),icon:"ph-warning",confirmButtonText:r("Delete permanently","kivicare-clinic-management-system"),cancelButtonText:r("Keep services","kivicare-clinic-management-system"),confirmButtonClass:"btn-danger"}).then(Y=>{Y.isConfirmed&&(yt({title:r("Deleting Services...","kivicare-clinic-management-system"),text:r("Please wait while we remove the selected services.<br>This won't take long.","kivicare-clinic-management-system")}),k.mutate(ne,{onSuccess:q=>{Tt({title:r("Deleted!","kivicare-clinic-management-system"),text:r(`${R.length} service${R.length>1?"s":""} has been deleted.`,"kivicare-clinic-management-system"),confirmButtonText:r("Back to services","kivicare-clinic-management-system")}),te()},onError:q=>{rt({text:q?.response?.data?.message||r("Failed to delete selected services. Please try again.","kivicare-clinic-management-system")})}}))})},icon:i.jsx("i",{className:"ph ph-trash"})},{label:r("Set Active","kivicare-clinic-management-system"),action:(R,te)=>{const ne=R.map(Y=>Y.id);kt({title:r("Update Status","kivicare-clinic-management-system"),text:r("Are you sure you want to activate selected services?","kivicare-clinic-management-system"),icon:"ph-question",confirmButtonText:r("Yes, activate","kivicare-clinic-management-system"),cancelButtonText:r("Cancel","kivicare-clinic-management-system")}).then(Y=>{Y.isConfirmed&&(yt({title:r("Updating...","kivicare-clinic-management-system"),text:r("Please wait. This may take a few seconds.","kivicare-clinic-management-system")}),w.mutate({ids:ne,status:1},{onSuccess:q=>{Tt({text:q?.message||r("Services have been activated successfully.","kivicare-clinic-management-system")}),te()},onError:q=>{rt({text:q?.response?.data?.message||r("Failed to update services status.","kivicare-clinic-management-system")})}}))})},icon:i.jsx("i",{className:"ph ph-check-circle"})},{label:r("Set Inactive","kivicare-clinic-management-system"),action:(R,te)=>{const ne=R.map(Y=>Y.id);kt({title:r("Update Status","kivicare-clinic-management-system"),text:r("Are you sure you want to deactivate selected services?","kivicare-clinic-management-system"),icon:"ph-warning",confirmButtonText:r("Yes, deactivate","kivicare-clinic-management-system"),cancelButtonText:r("Cancel","kivicare-clinic-management-system"),confirmButtonClass:"btn-danger"}).then(Y=>{Y.isConfirmed&&(yt({title:r("Updating...","kivicare-clinic-management-system"),text:r("Please wait. This may take a few seconds.","kivicare-clinic-management-system")}),w.mutate({ids:ne,status:0},{onSuccess:q=>{Tt({text:q?.message||r("Services have been deactivated successfully.","kivicare-clinic-management-system")}),te()},onError:q=>{rt({text:q?.response?.data?.message||r("Failed to update services status.","kivicare-clinic-management-system")})}}))})},icon:i.jsx("i",{className:"ph ph-x-circle"})}],isBulkActionShow:R=>{J(R)}})]}),d&&i.jsx(Lr,{show:D,onHide:()=>_(!1),onReopenImport:()=>_(!0),onDataRefresh:()=>{window.location.reload()},context:"services"})]})},iie=[Gn({path:"/service",title:"Services",outlet:tie,permissions:["service_list"],meta:{description:"Manage doctor services",icon:"fa-server",showInSidebar:!0},children:[We({path:"",component:nie,index:!0,permissions:["service_list"],meta:{description:"List of all doctor services",breadcrumb:"All Doctor Services"},skeleton:()=>i.jsx("div",{className:"container-fluid pb-0",children:i.jsx(_n,{columns:6,rows:5,showBreadcrumb:!0,showPageHeader:!0,showFilterBar:!0})})}),We({path:"add",component:zy,title:"Add Doctor Service",props:{isEditing:!1},permissions:["service_add"],skeleton:tg,meta:{description:"Create a new doctor service",breadcrumb:"Add New"}}),We({path:"edit/:id",component:zy,title:"Edit Doctor Service",props:{isEditing:!0},permissions:["service_edit"],skeleton:tg,meta:{description:"Edit existing doctor service",breadcrumb:"Edit"}})]})],sie=()=>i.jsx("div",{className:"d-flex align-items-center justify-content-center vh-100",children:i.jsxs("div",{className:"text-center",children:[i.jsx("h1",{className:"display-1 fw-bold",children:"404"}),i.jsx("p",{className:"fs-3",children:r("Page not found.","kivicare-clinic-management-system")}),i.jsx("p",{className:"lead",children:r("The page you're looking for doesn't exist.","kivicare-clinic-management-system")}),i.jsx(ei,{text:r("Go Home","kivicare-clinic-management-system"),showIcon:!1})]})}),aie=()=>i.jsx("div",{className:"d-flex align-items-center justify-content-center vh-100",children:i.jsxs("div",{className:"text-center",children:[i.jsx("h1",{className:"display-1 fw-bold",children:"500"}),i.jsx("p",{className:"fs-3",children:r("Internal Server Error","kivicare")}),i.jsx("p",{className:"lead",children:r("Something went wrong on our end. Please try again later.","kivicare")}),i.jsx(ht,{to:"/",className:"btn btn-primary",children:r("Go Home","kivicare")})]})}),rie=()=>i.jsx("div",{className:"d-flex align-items-center justify-content-center vh-100",children:i.jsxs("div",{className:"text-center",children:[i.jsx("h1",{className:"display-1 fw-bold",children:r("Maintenance","kivicare")}),i.jsx("p",{className:"fs-3",children:r("System Under Maintenance","kivicare")}),i.jsx("p",{className:"lead",children:r("We're currently performing scheduled maintenance. Please check back soon.","kivicare")}),i.jsx("p",{className:"text-muted",children:r("We apologize for any inconvenience.","kivicare")})]})}),lie=[We({path:"/403",component:Jd,title:"Access Denied",exact:!0,meta:{description:"Access denied error page",hideFromBreadcrumb:!0,hideFromSidebar:!0}}),We({path:"/500",component:aie,title:"Server Error",exact:!0,meta:{description:"Internal server error page",hideFromBreadcrumb:!0,hideFromSidebar:!0}}),We({path:"/maintenance",component:rie,title:"Maintenance",exact:!0,meta:{description:"Maintenance mode page",hideFromBreadcrumb:!0,hideFromSidebar:!0}}),We({path:"*",component:sie,title:"Page Not Found",meta:{description:"Page not found fallback",hideFromBreadcrumb:!0,hideFromSidebar:!0}})],oie=()=>i.jsx("div",{className:"my-5 pt-5 container",children:i.jsx("div",{className:"row",children:i.jsxs("div",{className:"col-sm-12 col-md-10 mx-auto",children:[i.jsx("div",{className:"text-center mb-5 pb-4",children:i.jsx("div",{className:"logo-main",children:i.jsx(S,{width:"180px",height:"45px",className:"mx-auto"})})}),i.jsx("div",{className:"d-flex justify-content-center mb-5",children:i.jsx("div",{className:"bg-primary-subtle rounded-pill px-4 py-4",children:i.jsxs("div",{className:"d-flex align-items-center gap-4 justify-content-center",children:[i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsx(S,{width:"40px",height:"40px",style:{borderRadius:"50%"}}),i.jsxs("div",{className:"d-none d-md-block",children:[i.jsx(S,{width:"50px",height:"0.75rem",className:"mb-1"}),i.jsx(S,{width:"100px",height:"1rem"})]})]}),Array.from({length:2}).map((t,e)=>i.jsx("div",{className:"d-flex align-items-center gap-2",children:i.jsx(S,{width:"40px",height:"40px",style:{borderRadius:"50%"}})},e))]})})}),i.jsx("div",{className:"step-content",children:i.jsx(gt,{children:i.jsxs("div",{className:"d-flex align-items-center justify-content-between gap-5 flex-column py-4",children:[i.jsx(S,{width:"70px",height:"70px",className:"rounded-circle"}),i.jsxs("div",{className:"text-center w-100",children:[i.jsx(S,{width:"250px",height:"1.5rem",className:"mx-auto mb-3"}),i.jsx(S,{width:"350px",height:"1rem",className:"mx-auto mb-5"}),i.jsx("div",{className:"d-flex justify-content-center mb-5",children:i.jsx(S,{width:"80%",height:"3rem",style:{borderRadius:"50px"}})}),i.jsx("div",{className:"mt-5 pt-5",children:i.jsx(st,{className:"mx-auto",width:"120px",height:"42px"})})]})]})})})]})})}),cie=()=>i.jsx("div",{className:"my-5 pt-5 container",children:i.jsx("div",{className:"row",children:i.jsxs("div",{className:"col-sm-12 col-md-10 mx-auto",children:[i.jsx("div",{className:"text-center mb-5 pb-4",children:i.jsx("div",{className:"logo-main",children:i.jsx(S,{width:"180px",height:"45px",className:"mx-auto"})})}),i.jsx("div",{className:"d-flex justify-content-center mb-5",children:i.jsx("div",{className:"bg-primary-subtle rounded-pill px-4 py-4",children:i.jsxs("div",{className:"d-flex align-items-center gap-4 justify-content-center",children:[i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsx(S,{width:"40px",height:"40px",style:{borderRadius:"50%"}}),i.jsxs("div",{className:"d-none d-md-block",children:[i.jsx(S,{width:"50px",height:"0.75rem",className:"mb-1"}),i.jsx(S,{width:"100px",height:"1rem"})]})]}),Array.from({length:2}).map((t,e)=>i.jsx("div",{className:"d-flex align-items-center gap-2",children:i.jsx(S,{width:"40px",height:"40px",style:{borderRadius:"50%"}})},e))]})})}),i.jsx("div",{className:"step-content",children:i.jsxs(gt,{children:[i.jsx(S,{width:"180px",height:"1.5rem",className:"mb-2"}),i.jsx(S,{width:"320px",height:"1rem",className:"mb-4"}),i.jsxs("div",{className:"row",children:[i.jsx("div",{className:"col-md-8",children:i.jsxs("div",{className:"row gy-4",children:[Array.from({length:8}).map((t,e)=>i.jsx("div",{className:"col-md-6",children:i.jsx(Ne,{labelWidth:"100px",inputHeight:"45px"})},e)),i.jsx("div",{className:"col-md-12",children:i.jsx(Ne,{labelWidth:"120px",inputHeight:"100px"})}),i.jsx("div",{className:"col-md-12",children:i.jsx(Ne,{labelWidth:"120px",inputHeight:"100px"})})]})}),i.jsx("div",{className:"col-md-4 border-start",children:i.jsxs("div",{className:"d-flex flex-column align-items-center justify-content-center h-100 py-4",children:[i.jsx(S,{width:"150px",height:"150px",className:"rounded mb-3"}),i.jsx(S,{width:"120px",height:"1rem",className:"mb-3"}),i.jsx(st,{width:"140px",height:"38px"})]})})]}),i.jsxs("div",{className:"d-flex justify-content-end gap-3 mt-5 pt-4 border-top",children:[i.jsx(st,{width:"100px",height:"42px",className:"btn-secondary-subtle"}),i.jsx(st,{width:"120px",height:"42px",className:"btn-primary"})]})]})})]})})}),die=()=>i.jsx("div",{className:"my-5 pt-5 container",children:i.jsx("div",{className:"row",children:i.jsxs("div",{className:"col-sm-12 col-md-10 mx-auto",children:[i.jsx("div",{className:"text-center mb-5 pb-4",children:i.jsx("div",{className:"logo-main",children:i.jsx(S,{width:"180px",height:"45px",className:"mx-auto"})})}),i.jsx("div",{className:"d-flex justify-content-center mb-5",children:i.jsx("div",{className:"bg-primary-subtle rounded-pill px-4 py-4",children:i.jsxs("div",{className:"d-flex align-items-center gap-4 justify-content-center",children:[Array.from({length:2}).map((t,e)=>i.jsx("div",{className:"d-flex align-items-center gap-2",children:i.jsx(S,{width:"40px",height:"40px",style:{borderRadius:"50%"}})},e)),i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsx(S,{width:"40px",height:"40px",style:{borderRadius:"50%"}}),i.jsxs("div",{className:"d-none d-md-block",children:[i.jsx(S,{width:"50px",height:"0.75rem",className:"mb-1"}),i.jsx(S,{width:"100px",height:"1rem"})]})]})]})})}),i.jsx("div",{className:"step-content",children:i.jsxs(gt,{children:[i.jsx(S,{width:"200px",height:"1.5rem",className:"mb-2"}),i.jsx(S,{width:"350px",height:"1rem",className:"mb-4"}),i.jsxs("div",{className:"row mt-2",children:[i.jsx("div",{className:"col-md-8",children:i.jsx("div",{className:"row gy-4",children:Array.from({length:6}).map((t,e)=>i.jsx("div",{className:"col-md-6",children:i.jsx(Ne,{labelWidth:"100px",inputHeight:"45px"})},e))})}),i.jsx("div",{className:"col-md-4 ",children:i.jsxs("div",{className:"d-flex flex-column align-items-center justify-content-center h-100 py-4",children:[i.jsx(S,{width:"150px",height:"150px",className:"rounded mb-3"}),i.jsx(S,{width:"120px",height:"1rem",className:"mb-3"})]})})]}),i.jsxs("div",{className:"d-flex justify-content-end gap-3 mt-5 pt-4 border-top",children:[i.jsx(st,{width:"100px",height:"42px",className:"btn-secondary-subtle"}),i.jsx(st,{width:"120px",height:"42px",className:"btn-primary"})]})]})})]})})}),mie=({currentStep:t,onStepClick:e})=>{const n={1:"ph ph-hand-waving",2:"ph ph-hospital",3:"ph ph-user-circle-check"};return i.jsx("div",{className:"d-flex justify-content-center mb-5",children:i.jsx("div",{className:"bg-primary-subtle rounded-pill",children:i.jsx("ul",{className:"nav nav-pills vendar-reg-tab",id:"step-tabs",role:"tablist",children:[1,2,3].map(s=>{const a=He.useRef(null),l=t===s,o=t>s,c=s<=t;return i.jsx(Ci,{nodeRef:a,in:!0,appear:!0,timeout:300,classNames:"step-transition",children:i.jsxs("li",{className:"nav-item",role:"presentation",children:[i.jsxs("a",{className:`nav-link ${l?"active current":""}`,id:`step-${s}-tab`,"data-bs-toggle":"pill",href:`#step-${s}`,role:"tab","aria-controls":`step-${s}`,"aria-selected":l?"true":"false",tabIndex:l?void 0:"-1",style:{cursor:c?"pointer":"default"},onClick:d=>{d.preventDefault(),c&&e&&e(s)},children:[i.jsxs("span",{className:"no",children:["0",s]}),o&&i.jsx("i",{className:"ph-fill ph-check-circle complete-icon icon-transition-active"}),!o&&i.jsx("i",{className:`${n[s]} current-icon ${l?"visible":""}`})]}),i.jsxs("div",{className:"setup-data",children:[i.jsxs("small",{className:"text-primary fw-bold",children:[r("Step","kivicare-clinic-management-system")," ",s]}),i.jsx("h6",{children:s===1?r("Welcome","kivicare-clinic-management-system"):s===2?r("Clinic Basic Detail","kivicare-clinic-management-system"):r("Clinic Admin Detail","kivicare-clinic-management-system")})]})]})},s)})})})})},uie={clinicImage:null,clinicName:"",clinicEmail:"",specialties:[],contactNumber:"",currencyPrefix:"",currencyPostfix:"",address:"",city:"",country:"",postalCode:"",adminImage:null,firstName:"",lastName:"",adminEmail:"",adminContact:"",dob:"",gender:"",roles:[]},TC={step2Fields:["clinicName","clinicEmail","specialties","contactNumber"],step3Fields:["firstName","lastName","adminEmail","adminContact","gender"]},gP={saveSetupWizard:t=>ve({endpoint:"setup-wizard/save",method:"POST",data:t}),getSetupWizard:()=>ve({endpoint:"setup-wizard",method:"GET"}),completeSetupWizard:t=>ve({endpoint:"setup-wizard/complete",method:"POST",data:t}),setupClinic:t=>{const e={clinic_name:t.clinicName,clinic_email:t.clinicEmail,clinic_contact:t.contactNumber,address:t.address,city:t.city,postal_code:t.postalCode,country:t.country,specialties:t.specialties,clinic_image_id:t.clinicImage?.id||t.clinicImage,firstName:t.firstName,lastName:t.lastName,adminEmail:t.adminEmail,adminContact:t.adminContact,dob:t.dob,gender:t.gender,roles:Array.isArray(t.roles)?t.roles:[]};return t.adminImage&&typeof t.adminImage=="object"&&(e.adminProfile=t.adminImage),ve({endpoint:"setup-wizard/clinic",method:"POST",data:e})},updateStepCompletion:t=>ve({endpoint:"setup-wizard/step-complete",method:"POST",data:{step:t}})},Fw={all:["setup-wizard"],data:()=>[...Fw.all,"data"]},hie=()=>{const t=ze();return Le({mutationFn:e=>gP.setupClinic(e),onSuccess:()=>{t.invalidateQueries({queryKey:Fw.data()})}})},pie=()=>{const t=ze();return Le({mutationFn:e=>gP.updateStepCompletion(e),onSuccess:()=>{t.invalidateQueries({queryKey:Fw.data()})}})},lf=f.createContext(),gie=()=>{const{themeSettings:t}=mt(),e=Kn(),n=hn(),s=f.useRef(null),a=pS(),l=()=>{const j=e.pathname;return j.includes("admin-info")?3:j.includes("basic-info")?2:1},[o,c]=f.useState(l()),[d,m]=f.useState([1]);f.useEffect(()=>{const j=l();c(j),d.includes(j)||m(D=>[...D,j])},[e.pathname]);const u=en({defaultValues:uie,mode:"onTouched",shouldUnregister:!1}),{handleSubmit:h,trigger:p,getValues:g}=u,v=hie(),x=pie(),y={1:"/clinic-setup",2:"/clinic-setup/basic-info",3:"/clinic-setup/admin-info"},b=async()=>{if(console.log("hit"),o===1){try{await x.mutateAsync({step:1}),d.includes(2)||m(_=>[..._,2]),n("/clinic-setup/basic-info")}catch(_){console.error("Failed to update step completion:",_),Se.error(r("Failed to update progress","kivicare-clinic-management-system"))}return}const j=o===2?TC.step2Fields:TC.step3Fields;if(await p(j))if(o===2)try{const _=g();await x.mutateAsync({step:2,formData:_}),d.includes(3)||m(N=>[...N,3]),n("/clinic-setup/admin-info")}catch(_){console.error("Failed to update step completion:",_),Se.error(r("Failed to update progress","kivicare-clinic-management-system"))}else h(w)()},k=()=>{o===2?n("/clinic-setup"):o===3&&n("/clinic-setup/basic-info")},w=async j=>{console.log(" Final form submission with ALL data:",j);try{const D=await v.mutateAsync(j);Se.success(r("Clinic setup completed successfully!","kivicare-clinic-management-system")),setTimeout(()=>{const _=window.kc_frontend&&window.kc_frontend.dashboard_uri?window.kc_frontend.dashboard_uri:window.location.origin;window.location.href=_},1500)}catch(D){const _=D?.response?.data?.message||D?.message||r("Failed to setup clinic","kivicare-clinic-management-system");Se.error(_),console.error("Setup clinic error:",D)}},T=j=>{j<=Math.max(...d)&&n(y[j])};return i.jsx(ko,{className:"my-5 pt-5",children:i.jsx(Yn,{children:i.jsx(hS,{...u,children:i.jsxs("div",{className:"col-sm-12 col-md-10 mx-auto",children:[i.jsx("div",{className:"text-center mb-5 pb-4",children:i.jsx("div",{className:"logo-main",children:i.jsx("img",{className:"logo-normal",src:t.siteLogo,height:"45",alt:"logo"})})}),i.jsx(mie,{currentStep:o,onStepClick:T}),i.jsx(Dg,{mode:"out-in",children:i.jsx(Ci,{nodeRef:s,timeout:250,classNames:"fade",unmountOnExit:!0,appear:!0,children:i.jsx("div",{ref:s,className:"step-content",children:a&&i.jsx(lf.Provider,{value:{onNext:b,onPrevious:k,currentStep:o,isLoading:v.isPending||x.isPending},children:a})})},e.pathname.replace(/\/$/,""))})]})})})})},fie=()=>{const{onNext:t}=f.useContext(lf);return i.jsx("div",{className:"card",children:i.jsx("div",{className:"card-body",children:i.jsxs("div",{className:"d-flex align-items-center justify-content-between gap-5 flex-column",children:[i.jsx("i",{className:"ph ph-hand-waving text-secondary fs-70"}),i.jsxs("div",{className:"text-center",children:[i.jsx("h5",{className:"mb-3",children:r("Welcome to kiviCare","kivicare-clinic-management-system")}),i.jsx("p",{className:"mb-5 pb-3",children:r("Explore more features by creating account in kivicare.","kivicare-clinic-management-system")}),i.jsx("span",{className:"py-2 px-5 bg-secondary-subtle border border-secondary rounded-pill setup-wizard-badge h5 m-0",children:r("KiviCare - Clinic and Patient Management System (EHR)","kivicare-clinic-management-system")}),i.jsx("div",{className:"mt-5 pt-5",children:i.jsx(ht,{className:"btn btn-primary",onClick:t,to:"/clinic-setup/basic-info",children:r("Proceed","kivicare-clinic-management-system")})})]})]})})})},AC=Wc.PhoneNumberUtil.getInstance(),vie=()=>{const{control:t,register:e,formState:n,setValue:s,getValues:a,handleSubmit:l}=gb(),{onNext:o,onPrevious:c}=f.useContext(lf),{errors:d}=n,{data:m,isLoading:u,refetch:h}=Ha("specialization"),p=Fg(),[g]=He.useState(n.submitCount);f.useEffect(()=>{a("currencyPrefix")||s("currencyPrefix","$"),a("currencyPostfix")||s("currencyPostfix","/-")},[]);const v=x=>{try{return AC.isValidNumber(AC.parseAndKeepRawInput(x))}catch{return!1}};return i.jsx("div",{className:"card",children:i.jsxs("div",{className:"card-body",children:[i.jsx("h5",{children:r("Clinic Basic detail","kivicare-clinic-management-system")}),i.jsx("p",{children:r("Enter basic detail of your clinic and explore","kivicare-clinic-management-system")}),i.jsxs("div",{className:"row",children:[i.jsx("div",{className:"col-md-8",children:i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[r("Name","kivicare-clinic-management-system"),i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx("input",{...e("clinicName",{required:r("Clinic name is required","kivicare-clinic-management-system"),minLength:{value:2,message:r("Clinic name must be at least 2 characters","kivicare-clinic-management-system")}}),className:`form-control ${d.clinicName?"is-invalid":""}`,placeholder:r("Enter clinic name","kivicare-clinic-management-system")}),d.clinicName&&i.jsx("div",{className:"invalid-feedback",children:d.clinicName.message})]})}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[r("Email","kivicare-clinic-management-system"),i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx("input",{...e("clinicEmail",{required:r("Email is required","kivicare-clinic-management-system"),pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:r("Invalid email address","kivicare-clinic-management-system")}}),className:`form-control ${d.clinicEmail?"is-invalid":""}`,placeholder:r("Enter clinic email","kivicare-clinic-management-system")}),d.clinicEmail&&i.jsx("div",{className:"invalid-feedback",children:d.clinicEmail.message})]})}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[r("Specialization","kivicare-clinic-management-system"),i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx(ye,{name:"specialties",control:t,rules:{required:r("At least one specialization is required","kivicare-clinic-management-system"),validate:{notEmpty:x=>x&&x.length>0||r("At least one specialty is required","kivicare-clinic-management-system")}},render:({field:x})=>i.jsx(mu,{id:"specialties",options:m?.data??[],value:x.value,onChange:y=>{x.onChange(y)},onCreateOption:y=>{const b={id:`temp-${Date.now()}`,label:y},k=x.value||[];x.onChange([...k,b]),p.mutate(y,{onSuccess:w=>{if(w?.data?.data){const T=(x.value||[]).map(j=>j.id===b.id?{id:w.data.data.id,label:w.data.data.label}:j);x.onChange(T)}Se.success(r("specialization added successfully","kivicare-clinic-management-system"))},onError:w=>{console.error("Failed to save specialization:",w),Se.error(r("Failed to save specialization to database, but it will be used for this form submission.","kivicare-clinic-management-system"))}})},getOptionValue:y=>y.id,placeholder:r("Select or create specialization","kivicare-clinic-management-system"),className:"react-select-box",classNamePrefix:"react-select",isLoading:u,isSearchable:!0,isMulti:!0,closeMenuOnSelect:!0,noOptionsMessage:()=>r("Type to create a new specialty","kivicare-clinic-management-system"),formatCreateLabel:y=>r("Add specialty","kivicare-clinic-management-system")+`: "${y}"`})}),d.specialties&&i.jsx("div",{className:"invalid-feedback d-block",children:d.specialties.message}),i.jsxs("p",{className:"mt-2 mb-0 small",children:[i.jsx("span",{className:"text-primary",children:r("Note:","kivicare-clinic-management-system")})," ",r("Type a new specialization and press enter to add it","kivicare-clinic-management-system")]})]})}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[r("Contact Number","kivicare-clinic-management-system"),i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx(ye,{name:"contactNumber",control:t,rules:{required:r("Contact number is required","kivicare-clinic-management-system"),validate:x=>x?v(x)||r("Please enter a valid Contact number","kivicare-clinic-management-system"):r("Contact number is required","kivicare-clinic-management-system")},render:({field:x,fieldState:y})=>i.jsxs(i.Fragment,{children:[i.jsx(to,{...x,defaultCountry:"us",inputProps:{className:`form-control ${(n.touchedFields.contactNumber||n.submitCount>g)&&d.contactNumber?"is-invalid":""}`,placeholder:r("555-0123-4567","kivicare-clinic-management-system"),onBlur:()=>x.onBlur()},placeholder:r("Enter contact number","kivicare-clinic-management-system")}),(n.touchedFields.contactNumber||n.submitCount>g)&&d.contactNumber&&i.jsx("div",{className:"invalid-feedback d-block",children:d.contactNumber.message})]})})]})}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{className:"form-label",children:r("Currency Prefix","kivicare-clinic-management-system")}),i.jsx("input",{...e("currencyPrefix"),className:"form-control",placeholder:r("e.g. $","kivicare-clinic-management-system"),onChange:x=>s("currencyPrefix",x.target.value)})]})}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{className:"form-label",children:r("Currency Postfix","kivicare-clinic-management-system")}),i.jsx("input",{...e("currencyPostfix"),className:"form-control",placeholder:r("e.g. USD","kivicare-clinic-management-system"),onChange:x=>s("currencyPostfix",x.target.value)})]})})]})}),i.jsx("div",{className:"col-md-4",children:i.jsx(ef,{id:"clinic-logo",name:"clinicLogo",label:r("Clinic Logo","kivicare-clinic-management-system"),register:e,defaultImage:a("clinicLogo")?.url,errors:d,className:"mb-3",onChange:(x,y)=>{s("clinicLogo",x,{shouldValidate:!0,shouldDirty:!0})}})})]}),i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[r("Address","kivicare-clinic-management-system"),i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx("input",{...e("address",{required:r("Address is required","kivicare-clinic-management-system"),minLength:{value:10,message:r("Address must be at least 10 characters","kivicare-clinic-management-system")}}),className:`form-control ${d.address?"is-invalid":""}`,placeholder:r("Enter clinic address","kivicare-clinic-management-system")}),d.address&&i.jsx("div",{className:"invalid-feedback",children:d.address.message})]})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[r("City","kivicare-clinic-management-system"),i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx("input",{...e("city",{required:r("City is required","kivicare-clinic-management-system"),minLength:{value:2,message:r("City must be at least 2 characters","kivicare-clinic-management-system")}}),className:`form-control ${d.city?"is-invalid":""}`,placeholder:r("Enter city","kivicare-clinic-management-system")}),d.city&&i.jsx("div",{className:"invalid-feedback",children:d.city.message})]})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[r("Country","kivicare-clinic-management-system"),i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx("input",{...e("country",{required:r("Country is required","kivicare-clinic-management-system"),minLength:{value:2,message:r("Country must be at least 2 characters","kivicare-clinic-management-system")}}),className:`form-control ${d.country?"is-invalid":""}`,placeholder:r("Enter country","kivicare-clinic-management-system")}),d.country&&i.jsx("div",{className:"invalid-feedback",children:d.country.message})]})}),i.jsx("div",{className:"col-lg-4 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[r("Postal Code","kivicare-clinic-management-system"),i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx("input",{...e("postalCode",{required:r("Postal code is required","kivicare-clinic-management-system"),pattern:{value:/^[0-9]+$/,message:r("Invalid postal code format","kivicare-clinic-management-system")}}),className:`form-control ${d.postalCode?"is-invalid":""}`,placeholder:r("Enter postal code","kivicare-clinic-management-system"),onInput:x=>x.target.value=x.target.value.replace(/[^0-9]/g,"")}),d.postalCode&&i.jsx("div",{className:"invalid-feedback",children:d.postalCode.message})]})})]}),i.jsxs("div",{className:"d-flex justify-content-end gap-4 mt-5",children:[i.jsx("button",{className:"btn btn-secondary",onClick:c,children:r("Previous","kivicare-clinic-management-system")}),i.jsx("button",{className:"btn btn-primary",onClick:l(o),type:"button",children:r("Next","kivicare-clinic-management-system")})]})]})})},DC=Wc.PhoneNumberUtil.getInstance(),xie=()=>{const{register:t,control:e,formState:n,setValue:s,getValues:a,handleSubmit:l}=gb(),{onNext:o,onPrevious:c,isLoading:d=!1}=f.useContext(lf),{errors:m}=n,[u]=f.useState(n.submitCount),[h,p]=f.useState(()=>{const w=a("roles");return Array.isArray(w)&&w.length?w:["doctor","receptionist","patient"]}),[g,v]=f.useState(!1),x=w=>{p(T=>T.includes(w)?T.filter(j=>j!==w):[...T,w])},y=()=>{v(!0)},b=()=>{s("roles",h,{shouldDirty:!0,shouldValidate:!1}),v(!1),o()},k=w=>{try{return DC.isValidNumber(DC.parseAndKeepRawInput(w))}catch{return!1}};return i.jsxs("div",{className:"card",children:[i.jsxs("div",{className:"card-body",children:[i.jsx("h5",{children:r("Clinic Admin Detail","kivicare-clinic-management-system")}),i.jsx("p",{children:r("Enter basic detail of Clinic Admin and explore","kivicare-clinic-management-system")}),i.jsxs("div",{className:"row mt-2",children:[i.jsx("div",{className:"col-md-8",children:i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-lg-6 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[r("First Name","kivicare-clinic-management-system"),i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx("input",{...t("firstName",{required:r("First name is required","kivicare-clinic-management-system"),minLength:{value:2,message:r("First name must be at least 2 characters","kivicare-clinic-management-system")}}),className:`form-control ${m.firstName?"is-invalid":""}`,placeholder:r("Enter first name","kivicare-clinic-management-system")}),m.firstName&&i.jsx("div",{className:"invalid-feedback",children:m.firstName.message})]})}),i.jsx("div",{className:"col-lg-6 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[r("Last Name","kivicare-clinic-management-system"),i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx("input",{...t("lastName",{required:r("Last name is required","kivicare-clinic-management-system"),minLength:{value:2,message:r("Last name must be at least 2 characters","kivicare-clinic-management-system")}}),className:`form-control ${m.lastName?"is-invalid":""}`,placeholder:r("Enter last name","kivicare-clinic-management-system")}),m.lastName&&i.jsx("div",{className:"invalid-feedback",children:m.lastName.message})]})}),i.jsx("div",{className:"col-lg-6 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[r("Email","kivicare-clinic-management-system"),i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx("input",{...t("adminEmail",{required:r("Email is required","kivicare-clinic-management-system"),pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:r("Invalid email address","kivicare-clinic-management-system")}}),className:`form-control ${m.adminEmail?"is-invalid":""}`,placeholder:r("Enter admin email","kivicare-clinic-management-system")}),m.adminEmail&&i.jsx("div",{className:"invalid-feedback",children:m.adminEmail.message})]})}),i.jsx("div",{className:"col-lg-6 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[r("Contact Number","kivicare-clinic-management-system"),i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx(ye,{name:"adminContact",control:e,rules:{required:r("Contact number is required","kivicare-clinic-management-system"),validate:w=>w?k(w)||r("Please enter a valid Contact number","kivicare-clinic-management-system"):r("Contact number is required","kivicare-clinic-management-system")},render:({field:w,fieldState:T})=>i.jsxs(i.Fragment,{children:[i.jsx(to,{...w,defaultCountry:"us",inputProps:{className:`form-control ${(n.touchedFields.adminContact||n.submitCount>u)&&m.adminContact?"is-invalid":""}`,placeholder:r("555-0123-4567","kivicare-clinic-management-system"),onBlur:()=>w.onBlur()},placeholder:r("Enter contact number","kivicare-clinic-management-system")}),(n.touchedFields.adminContact||n.submitCount>u)&&m.adminContact&&i.jsx("div",{className:"invalid-feedback d-block",children:m.adminContact.message})]})})]})}),i.jsx("div",{className:"col-lg-6 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[r("Date of Birth","kivicare-clinic-management-system"),i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx(ye,{name:"dob",control:e,rules:{required:r("Date of birth is required","kivicare-clinic-management-system"),validate:w=>{const T=new Date(w),j=new Date;let D=j.getFullYear()-T.getFullYear();const _=j.getMonth()-T.getMonth();return(_<0||_===0&&j.getDate()<T.getDate())&&D--,D>=18||r("Admin must be at least 18 years old","kivicare-clinic-management-system")}},render:({field:w})=>i.jsx(Un,{...w,className:`form-control ${m.dob?"is-invalid":""}`,placeholder:r("Select date of birth","kivicare-clinic-management-system"),options:{dateFormat:xi(window.kc_frontend.date_format),maxDate:new Date(new Date().setFullYear(new Date().getFullYear()-18)),disableMobile:!0,locale:Wn()},value:w.value?Zn(w.value):"",onChange:T=>{if(T&&T[0]){const j=T[0],D=`${j.getFullYear()}-${String(j.getMonth()+1).padStart(2,"0")}-${String(j.getDate()).padStart(2,"0")}`;w.onChange(D)}else w.onChange("")}})}),m.dob&&i.jsx("div",{className:"invalid-feedback d-block",children:m.dob.message})]})}),i.jsx("div",{className:"col-lg-6 col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[r("Gender","kivicare-clinic-management-system"),i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsxs("select",{...t("gender",{required:r("Gender is required","kivicare-clinic-management-system")}),className:`form-select ${m.gender?"is-invalid":""}`,children:[i.jsx("option",{value:"",children:r("Select Gender","kivicare-clinic-management-system")}),i.jsx("option",{value:"male",children:r("Male","kivicare-clinic-management-system")}),i.jsx("option",{value:"female",children:r("Female","kivicare-clinic-management-system")}),i.jsx("option",{value:"other",children:r("Other","kivicare-clinic-management-system")})]}),m.gender&&i.jsx("div",{className:"invalid-feedback",children:m.gender.message})]})})]})}),i.jsxs("div",{className:"col-md-4",children:[i.jsx("label",{className:"form-label",children:r("Admin Profile Picture","kivicare-clinic-management-system")}),i.jsx(yl,{id:"admin-profile",name:"adminProfile",label:r("Admin Profile Picture","kivicare-clinic-management-system"),register:t,errors:m,size:230,defaultImage:a("adminProfile")?.url,className:"mb-3",onChange:(w,T)=>{s("adminProfile",w,{shouldValidate:!0,shouldDirty:!0})}})]})]}),i.jsxs("div",{className:"d-flex justify-content-end gap-4 mt-5",children:[i.jsx("button",{className:"btn btn-secondary",onClick:c,type:"button",disabled:d,children:r("Previous","kivicare-clinic-management-system")}),i.jsx("button",{className:"btn btn-primary",onClick:l(y),type:"button",disabled:d,children:d?i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),r("Setting up...","kivicare-clinic-management-system")]}):r("Finish","kivicare-clinic-management-system")})]})]}),i.jsxs(lt,{show:g,onHide:()=>v(!1),centered:!0,className:"swal2-modal",children:[i.jsx(lt.Header,{closeButton:!0,className:"border-0 pb-0",children:i.jsx(lt.Title,{className:"swal2-title w-100 text-center",children:r("Create Demo Users","kivicare-clinic-management-system")})}),i.jsx(lt.Body,{className:"text-center pt-3",children:i.jsxs("div",{className:"d-flex align-items-center justify-content-center gap-4 flex-wrap",children:[i.jsxs("label",{className:"form-check d-flex align-items-center gap-2 mb-0",children:[i.jsx("input",{type:"checkbox",className:"form-check-input",checked:h.includes("doctor"),onChange:()=>x("doctor")}),i.jsx("span",{children:r("Doctor","kivicare-clinic-management-system")})]}),i.jsxs("label",{className:"form-check d-flex align-items-center gap-2 mb-0",children:[i.jsx("input",{type:"checkbox",className:"form-check-input",checked:h.includes("receptionist"),onChange:()=>x("receptionist")}),i.jsx("span",{children:r("Receptionist","kivicare-clinic-management-system")})]}),i.jsxs("label",{className:"form-check d-flex align-items-center gap-2 mb-0",children:[i.jsx("input",{type:"checkbox",className:"form-check-input",checked:h.includes("patient"),onChange:()=>x("patient")}),i.jsx("span",{children:r("Patient","kivicare-clinic-management-system")})]})]})}),i.jsxs(lt.Footer,{className:"border-0 justify-content-center pt-0",children:[i.jsx("button",{className:"btn btn-secondary me-2",onClick:()=>v(!1),children:r("Cancel","kivicare-clinic-management-system")}),i.jsx("button",{className:"btn btn-primary",onClick:b,children:r("Finish","kivicare-clinic-management-system")})]})]})]})},yie=[Gn({path:"",title:"Clinic Setup",outlet:gie,meta:{description:"Clinic setup wizard",requiresSetup:!0},children:[We({index:!0,component:fie,title:"Welcome",props:{stepNumber:1},skeleton:oie,meta:{description:"Setup wizard welcome page",step:1,stepName:"getting_started"}}),We({path:"basic-info",component:vie,title:"Basic Information",props:{stepNumber:2},skeleton:cie,meta:{description:"Clinic basic information setup",step:2,stepName:"clinic"}}),We({path:"admin-info",component:xie,title:"Admin Information",props:{stepNumber:3},skeleton:die,meta:{description:"Admin user information setup",step:3,stepName:"clinic_admin"}})]})],bie=()=>{const t=Kn(),e=Li();Yi();const n=Xn(),s=Jn(),a=Cr(),{calanderIntegration:l,googleMeetIntegration:o,zoomIntegration:c,isAddonActive:d,hasCapability:m,module_config:u}=mt();let p=[{id:"general-settings",label:r("General Settings","kivicare-clinic-management-system"),iconClass:"ph ph-tree-structure",link:"/setting/general-setting",allowedRoles:["administrator"]},{id:"holidays",label:r("Holidays","kivicare-clinic-management-system"),iconClass:"ph ph-house-line",link:"/setting/holidays",allowedRoles:["administrator","clinic_admin","doctor","receptionist"],capability:"clinic_schedule"},{id:"doctor-session",label:r("Doctor Session","kivicare-clinic-management-system"),iconClass:"ph ph-calendar-check",link:"/setting/doctor-session",allowedRoles:["doctor","receptionist"],capability:"doctor_session_list"},{id:"configurations",label:r("Configurations","kivicare-clinic-management-system"),iconClass:"ph ph-toggle-left",link:"/setting/configurations",allowedRoles:["administrator"]},{id:"app-configuration",label:r("App Configuration","kivicare-clinic-management-system"),iconClass:"ph ph-device-mobile",link:"/setting/app-configuration",allowedRoles:["administrator"],requiresAddon:!0,addonKey:"api"},{id:"email-template",label:r("Email Template","kivicare-clinic-management-system"),iconClass:"ph ph-envelope",link:"/setting/email-template",allowedRoles:["administrator"]},{id:"sms-whatsapp-template",label:r("SMS/WhatsApp Template","kivicare-clinic-management-system"),iconClass:"ph ph-chat-circle-dots",link:"/setting/sms-whatsapp-template",allowedRoles:["administrator"],requiresPro:!0},{id:"webhooks",label:r("Webhooks","kivicare-clinic-management-system"),iconClass:"ph ph-webhooks-logo",link:"/setting/webhooks",allowedRoles:["administrator"],requiresAddon:!0,addonKey:"webhooks"},{id:"custom-notification",label:r("Custom notification","kivicare-clinic-management-system"),iconClass:"ph ph-bell",link:"/setting/custom-notification",allowedRoles:["administrator"],requiresPro:!0},{id:"custom-form",label:r("Custom Form","kivicare-clinic-management-system"),iconClass:"ph ph-table",link:"/setting/custom-form",allowedRoles:["administrator","clinic_admin"],capability:"custom_form_list",requiresPro:!0},{id:"encounter-body-chart",label:r("Encounter body chart","kivicare-clinic-management-system"),iconClass:"ph ph-person",link:"/setting/encounter-body-chart",allowedRoles:["administrator"],requiresAddon:!0,addonKey:"bodyChart"},{id:"patient-setting",label:r("Patient Setting","kivicare-clinic-management-system"),iconClass:"ph ph-user",link:"/setting/patient-setting",allowedRoles:["administrator"]},{id:"widget-setting",label:r("Widget Setting","kivicare-clinic-management-system"),iconClass:"ph ph-gear",link:"/setting/widget-setting",allowedRoles:["administrator"]},{id:"google-event-template",label:r("Google Event Template","kivicare-clinic-management-system"),iconClass:"ph ph-calendar-blank",link:"/setting/google-event-template",allowedRoles:["administrator"],requiresPro:!0},{id:"google-meet",label:r("Google Meet","kivicare-clinic-management-system"),iconClass:"ph ph-video-camera",link:"/setting/google-meet",allowedRoles:["administrator"],requiresAddon:!0,addonKey:"googlemeet"},{id:"google-meet-configuration",label:r("Google Meet Integration","kivicare-clinic-management-system"),iconClass:"ph ph-video-camera",link:"/setting/google-meet-configuration",allowedRoles:["doctor"]},{id:"zoom-telemed",label:r("Zoom Telemed","kivicare-clinic-management-system"),iconClass:"ph ph-video-conference",link:"/setting/zoom-telemed",allowedRoles:["administrator"],requiresAddon:!0,addonKey:"telemed"},{id:"zoom-configuration",label:r("Zoom Telemed setting","kivicare-clinic-management-system"),iconClass:"ph ph-video-conference",link:"/setting/zoom-configuration",allowedRoles:["doctor"]},{id:"listings",label:r("Listings","kivicare-clinic-management-system"),iconClass:"ph ph-list-dashes",link:"/setting/listings",allowedRoles:["administrator","clinic_admin","doctor","receptionist"],capability:"static_data_list"},{id:"custom-field",label:r("Custom Field","kivicare-clinic-management-system"),iconClass:"ph ph-magic-wand",link:"/setting/custom-field",allowedRoles:["administrator","clinic_admin"],capability:"custom_field_list",module:"custom_fields"},{id:"pro-settings",label:r("Pro Settings","kivicare-clinic-management-system"),iconClass:"ph ph-wrench",link:"/setting/pro-settings",allowedRoles:["administrator"],requiresPro:!0},{id:"payment",label:r("Payment","kivicare-clinic-management-system"),iconClass:"ph ph-credit-card",link:"/setting/payments",allowedRoles:["administrator"]},{id:"appointment-settings",label:r("Appointment Setting","kivicare-clinic-management-system"),iconClass:"ph ph-calendar-plus",link:"/setting/appointment-settings",allowedRoles:["administrator"]},{id:"permission",label:r("Permission Setting","kivicare-clinic-management-system"),iconClass:"ph ph-lock-simple",link:"/setting/permission",allowedRoles:["administrator"],requiresPro:!0},{id:"sidebar-settings",label:r("Sidebar Setting","kivicare-clinic-management-system"),iconClass:"ph ph-list",link:"/setting/sidebar-settings",allowedRoles:["administrator"],requiresPro:!0},{id:"google-calendar-integration",label:r("Google Calendar Integration","kivicare-clinic-management-system"),iconClass:"ph ph-calendar",link:"/setting/google-calendar-integration",allowedRoles:["doctor","receptionist"]}].filter(v=>{if(v.id==="google-meet-configuration")return d("googlemeet")&&e&&o==="yes";if(v.id==="zoom-configuration")return d("telemed")&&e&&c==="yes";if(v.module&&(u[v.module]??"1")==="0")return!1;if(v.id==="google-calendar-integration")return(e||n)&&l==="yes";const x=v.allowedRoles.some(y=>!!(y==="administrator"&&a||y==="clinic_admin"&&s||y==="doctor"&&e||y==="receptionist"&&n));return v.capability&&!m(v.capability)?!1:x});const g=v=>t.pathname===v.link||t.pathname.startsWith(v.link);return i.jsx("div",{className:"card setting-sidebar",children:i.jsx("div",{className:"card-body",children:i.jsx("div",{className:"nav flex-column nav-pills setting-tabs me-3",role:"tablist","aria-orientation":"vertical",children:p.map((v,x)=>{const y=g(v),b=v.requiresPro&&!d("kiviPro"),k=v.requiresAddon&&!d(v.addonKey);return i.jsxs(ht,{className:`nav-link ${y?"active":""}`,id:v.id,to:v.link,type:"button","aria-selected":"true",children:[i.jsx("i",{className:v.iconClass}),v.label,b&&i.jsx("span",{className:"pro-badge",children:"PRO"}),k&&i.jsx("span",{className:"addon-badge",children:"ADDON"})]},x)})})})})},kie=()=>{const e=qm().at?.(-1),{hideSettingSidebar:n,noTransitionAnimation:s=!1}=e.handle,a=f.useRef(null);return i.jsx("div",{className:"settings-container",children:i.jsxs("div",{className:"row",children:[i.jsx(Ci,{in:!n,nodeRef:a,timeout:300,classNames:"sidebar",unmountOnExit:!0,children:i.jsx("div",{className:"col-md-3",children:i.jsx("div",{ref:a,className:"sidebar-wrapper position-sticky top-0",children:i.jsx(bie,{})})})}),i.jsx("div",{className:n?"col-12":"col-md-9",children:s?i.jsx(yo,{}):i.jsx(fs,{})})]})})},wie=()=>i.jsx(gt,{children:i.jsxs("div",{className:"row gy-3",children:[i.jsxs("div",{className:"col-12 mt-3 mb-2",children:[i.jsx(S,{width:"140px",height:"1.125rem",className:"mb-2"}),i.jsx(S,{width:"200px",height:"0.875rem"}),i.jsx("hr",{className:"mt-2"})]}),i.jsx("div",{className:"col-md-6",children:i.jsx(Ne,{labelWidth:"100px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Ne,{labelWidth:"120px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Ne,{labelWidth:"90px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Ne,{labelWidth:"110px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Ne,{labelWidth:"130px"})}),i.jsxs("div",{className:"col-12",children:[i.jsx(S,{width:"150px",height:"1rem",className:"mb-2"}),i.jsx(S,{width:"50px",height:"24px",style:{borderRadius:"12px"}})]}),i.jsxs("div",{className:"col-md-6",children:[i.jsx(Ne,{labelWidth:"100px"}),i.jsxs("div",{className:"d-flex gap-3 mt-2",children:[i.jsx(S,{width:"60px",height:"1rem"}),i.jsx(S,{width:"60px",height:"1rem"})]})]}),i.jsxs("div",{className:"col-12",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[i.jsx(S,{width:"120px",height:"1.125rem"}),i.jsx(S,{width:"80px",height:"32px",style:{borderRadius:"4px"}})]}),Array.from({length:2}).map((t,e)=>i.jsxs("div",{className:"card border mb-2 shadow-none position-relative",children:[i.jsx(S,{width:"24px",height:"24px",style:{borderRadius:"50%"},className:"position-absolute top-0 end-0 mt-1 me-1"}),i.jsx("div",{className:"card-body p-3",children:i.jsxs("div",{className:"row g-2",children:[i.jsxs("div",{className:"col-md-6",children:[i.jsx(S,{width:"80px",height:"0.875rem",className:"mb-1"}),i.jsx(S,{width:"100%",height:"38px",style:{borderRadius:"4px"}})]}),i.jsxs("div",{className:"col-md-6",children:[i.jsx(S,{width:"90px",height:"0.875rem",className:"mb-1"}),i.jsx(S,{width:"100%",height:"38px",style:{borderRadius:"4px"}})]})]})})]},e))]}),i.jsx("div",{className:"col-md-6",children:i.jsx(Ne,{labelWidth:"140px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Ne,{labelWidth:"100px"})})]})});function jie(){const{gateway:t}=Yt(),[e,n]=f.useState(!1),s=hn(),{data:a,isLoading:l}=kn("settings","payment-gateway/"+t,{},{enabled:!!t}),{mutateAsync:o}=un("settings","payment-gateway/"+t),{data:c}=Sn(),d=c?.data?.hideUtilityLinks,{handleSubmit:m,formState:{errors:u},reset:h,control:p,setValue:g,register:v}=en({defaultValues:a?.data?.settings||{}}),x=y=>{n(!0),console.log("Form data:",y),o(y).then(()=>{At.fire({title:r("Success","kivicare-clinic-management-system"),text:r("Settings updated successfully.","kivicare-clinic-management-system"),icon:"success",confirmButtonText:r("OK","kivicare-clinic-management-system")}),s("/setting/payments/"),h(y)}).catch(b=>{const k=b?.response?.data?.message||b.message||r("Failed to update settings.","kivicare-clinic-management-system");At.fire({title:r("Error Updating Settings","kivicare-clinic-management-system"),text:k,icon:"error",confirmButtonText:r("OK","kivicare-clinic-management-system")})}).finally(()=>{n(!1)})};return f.useEffect(()=>{if(a?.data?.settings){const y=a.data.settings;a.data.fields.forEach(b=>{b.type==="select"?g(b.name,Nw(b.options,y[b.name]||"")):g(b.name,y[b.name]||"")})}},[a,h,g]),i.jsxs("div",{className:"manage-payment-setting",children:[i.jsxs("div",{className:"d-flex align-items-center mb-3 justify-content-between",children:[i.jsxs("h6",{className:"setting-title mb-0",children:[r(`${t.charAt(0).toUpperCase()+t.slice(1)} Payment Setting `,"kivicare-clinic-management-system"),d!=="on"&&i.jsx("a",{href:"https://apps.iqonic.design/docs/product/kivicare/clinic-admin/settings/#payment-setting",target:"_blank",rel:"noreferrer",children:i.jsx("i",{className:"ph ph-question align-middle h5 text-primary"})})]}),i.jsxs(ht,{className:"btn btn-sm btn-primary fw-semibold d-flex align-items-center gap-1 back-btn",to:-1,children:[i.jsx("i",{className:"ph ph-caret-left"}),i.jsxs("span",{className:"font-size-14",children:[r("Back","kivicare-clinic-management-system")," "]})]})]}),i.jsxs("form",{onSubmit:m(x),children:[l?i.jsx(wie,{}):i.jsx(Nie,{fields:a?.data?.fields||[],errors:u,control:p,setValue:g,register:v}),i.jsx("div",{className:"col-12",children:i.jsx("div",{className:"d-flex justify-content-end gap-3",children:i.jsx("button",{type:"submit",className:"btn btn-primary",disabled:e,children:e?r("Saving...","kivicare-clinic-management-system"):r("Save Changes","kivicare-clinic-management-system")})})})]})]})}const Nie=({fields:t,errors:e,control:n,setValue:s,register:a})=>!t||t.length===0?i.jsx("div",{className:"card mb-4",children:i.jsx("div",{className:"card-body text-center text-muted",children:r("No payment gateway available.","kivicare-clinic-management-system")})}):i.jsx("div",{className:"card mb-4",children:i.jsx("div",{className:"card-body",children:i.jsx("div",{className:"row gy-3",children:t.map((l,o)=>l.type==="header"?i.jsxs("div",{className:"col-12 mt-3 mb-2",children:[i.jsx("h6",{className:"fw-bold",children:l.label}),l.description&&i.jsx("p",{className:"text-muted small mb-0",children:l.description}),i.jsx("hr",{className:"mt-2"})]},o):l.type==="repeater"?i.jsx("div",{className:"col-12",children:i.jsx(Cie,{control:n,register:a,setValue:s,errors:e,field:l})},o):i.jsx("div",{className:`col-${l.col||"md-6"}`,children:i.jsxs("div",{className:"form-group",children:[l.type!=="checkbox_switch"&&l.type!=="checkbox"&&i.jsxs("label",{htmlFor:l.name,className:"form-label",children:[l.label,l.validation?.required&&i.jsx("span",{className:"input-field-reuquired",children:"*"})]}),i.jsx(ye,{control:n,name:l.name,rules:l.validation,render:({field:{onChange:c,value:d,ref:m,...u}})=>{if(l.type==="checkbox_switch")return i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"form-check form-switch custom-switch-md",children:[i.jsx("input",{className:`form-check-input ${e[l.name]?"is-invalid":""}`,type:"checkbox",role:"switch",id:l.name,checked:d,onChange:h=>{c(h.target.checked)},...u}),i.jsx("label",{className:"form-check-label",htmlFor:l.name,children:l.label})]}),l.description&&i.jsx("div",{className:"form-text text-muted mt-1",children:l.description}),e[l.name]&&i.jsx("div",{className:"invalid-feedback d-block",children:e[l.name].message})]});if(["text","email","number","password"].includes(l.type))return i.jsxs(i.Fragment,{children:[i.jsx("input",{type:l.type,id:l.name,className:`form-control ${e[l.name]?"is-invalid":""}`,placeholder:l.placeholder,value:d||"",onChange:c,...u}),e[l.name]&&i.jsx("div",{className:"invalid-feedback",children:e[l.name].message})]});if(l.type==="select")return i.jsxs(i.Fragment,{children:[i.jsx(ct,{inputId:l.name,options:l.options,placeholder:r("Select","kivicare-clinic-management-system"),className:`react-select-box ${e[l.name]?"is-invalid":""}`,classNamePrefix:"react-select",value:d,onChange:c,styles:{menuPortal:h=>({...h,zIndex:9999})},...u}),e[l.name]&&i.jsx("div",{className:"invalid-feedback d-block",children:e[l.name].message})]});if(l.type==="radio"){const h=l.options||[{value:"on",label:r("On","kivicare-clinic-management-system")},{value:"off",label:r("Off","kivicare-clinic-management-system")}];return i.jsxs("div",{children:[h.map(p=>i.jsxs("div",{className:"form-check form-check-inline",children:[i.jsx("input",{className:`form-check-input ${e[l.name]?"is-invalid":""}`,type:"radio",id:`${l.name}_${p.value}`,value:p.value,checked:d===p.value,onChange:()=>c(p.value),...u}),i.jsx("label",{className:"form-check-label",htmlFor:`${l.name}_${p.value}`,children:p.label})]},p.value)),e[l.name]&&i.jsx("div",{className:"invalid-feedback d-block",children:e[l.name].message})]})}return l.type==="checkbox"?i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"form-check",children:[i.jsx("input",{className:`form-check-input ${e[l.name]?"is-invalid":""}`,type:"checkbox",id:l.name,checked:d,onChange:h=>c(h.target.checked),...u}),i.jsx("label",{className:"form-check-label",htmlFor:l.name,children:l.checkboxLabel||l.label})]}),e[l.name]&&i.jsx("div",{className:"invalid-feedback d-block",children:e[l.name].message})]}):i.jsxs(i.Fragment,{children:[i.jsx("input",{type:"text",id:l.name,className:`form-control ${e[l.name]?"is-invalid":""}`,placeholder:l.placeholder,value:d||"",onChange:c,...u}),e[l.name]&&i.jsx("div",{className:"invalid-feedback d-block",children:e[l.name].message})]})}})]})},o))})})}),Cie=({control:t,register:e,setValue:n,errors:s,field:a})=>{const{fields:l,append:o,remove:c}=yr({control:t,name:a.name}),d=(m,u,h,p)=>i.jsx("div",{className:`col-${m.col||"md-6"}`,children:i.jsxs("div",{className:"form-group mb-0",children:[i.jsxs("label",{className:"form-label small text-muted mb-1",children:[m.label,m.validation?.required&&i.jsx("span",{className:"text-danger ms-1",children:"*"})]}),i.jsx(ye,{control:t,name:`${a.name}.${h}.${m.name}`,rules:m.validation,render:({field:{onChange:g,value:v,ref:x,...y},fieldState:{error:b}})=>m.type==="select"?i.jsxs(i.Fragment,{children:[i.jsx(ct,{options:m.options,value:Nw(m.options,v),onChange:k=>g(k?k.value:""),className:`react-select-box ${b?"is-invalid":""}`,classNamePrefix:"react-select",styles:{menuPortal:k=>({...k,zIndex:9999})},placeholder:r("Select","kivicare-clinic-management-system")}),b&&i.jsx("div",{className:"invalid-feedback d-block",children:b.message})]}):m.type==="image"?i.jsx(ef,{id:`${a.name}.${h}.${m.name}`,name:`${a.name}.${h}.${m.name}`,defaultImage:v,register:e,setValue:n,onChange:k=>{g(k.url)},errors:b?{[`${a.name}.${h}.${m.name}`]:b}:{},className:"mb-0"}):m.type==="textarea"?i.jsxs(i.Fragment,{children:[i.jsx("textarea",{className:`form-control ${b?"is-invalid":""}`,value:v||"",onChange:g,rows:"2",placeholder:m.placeholder||m.label,...y}),b&&i.jsx("div",{className:"invalid-feedback d-block",children:b.message})]}):i.jsxs(i.Fragment,{children:[i.jsx("input",{type:m.type||"text",className:`form-control ${b?"is-invalid":""}`,value:v||"",onChange:g,...y}),b&&i.jsx("div",{className:"invalid-feedback d-block",children:b.message})]})})]})},`${u.id}-${m.name}-${p}`);return i.jsxs("div",{className:"col-12",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[i.jsx("label",{className:"form-label mb-0 fw-bold",children:a.label}),i.jsxs("button",{type:"button",className:"btn btn-primary btn-sm",onClick:()=>o({}),children:[i.jsx("i",{className:"ph ph-plus me-1"}),a.add_button_text||r("Add Item","kivicare-clinic-management-system")]})]}),i.jsx("div",{className:"repeater-list",children:l.map((m,u)=>{const h=a.fields.filter(v=>v.group==="main"),p=a.fields.filter(v=>v.group==="side"),g=h.length>0&&p.length>0;return i.jsxs("div",{className:"card border mb-2 shadow-none position-relative",children:[i.jsx("button",{type:"button",className:"btn btn-icon btn-sm text-danger position-absolute top-0 end-0 mt-1 me-1",onClick:()=>c(u),style:{zIndex:10},title:r("Remove","kivicare-clinic-management-system"),children:i.jsx("i",{className:"ph ph-trash"})}),i.jsx("div",{className:"card-body p-3",children:g?i.jsxs("div",{className:"row g-2",children:[i.jsx("div",{className:"col-md-9",children:i.jsx("div",{className:"row g-2",children:h.map((v,x)=>d(v,m,u,x))})}),i.jsx("div",{className:"col-md-3",children:i.jsx("div",{className:"row g-2 h-100",children:p.map((v,x)=>d(v,m,u,x))})})]}):i.jsx("div",{className:"row g-2",children:a.fields.map((v,x)=>d(v,m,u,x))})})]},m.id)})})]})},_ie=()=>i.jsx("div",{className:"settings-container",children:i.jsx(fs,{})}),Sie=()=>i.jsx("div",{className:"custom-notification-outlet",children:i.jsx(yo,{})});function Eie(){return i.jsx("div",{children:i.jsx(yo,{})})}const Tie=()=>i.jsx("div",{className:"settings-container",children:i.jsxs("div",{className:"row",children:[i.jsx("div",{className:"col-md-3",children:i.jsx("div",{className:"sidebar-wrapper position-sticky top-0",children:i.jsx("div",{className:"card setting-sidebar",children:i.jsx("div",{className:"card-body",children:i.jsx("div",{className:"nav flex-column nav-pills setting-tabs me-3",role:"tablist","aria-orientation":"vertical",children:Array.from({length:20}).map((t,e)=>i.jsxs("div",{className:"nav-link skeleton-nav-link",type:"button",children:[i.jsx(S,{width:"16px",height:"16px",className:"me-2"}),i.jsx(S,{width:`${120+Math.random()*80}px`,height:"0.875rem"}),Math.random()>.7&&i.jsx(S,{width:Math.random()>.5?"35px":"60px",height:"0.75rem",className:"ms-auto",style:{borderRadius:"10px"}})]},e))})})})})}),i.jsx("div",{className:"col-md-9",children:i.jsx("div",{className:"row",children:i.jsx("div",{className:"col-12",children:i.jsxs("div",{className:"row",children:[i.jsx("div",{className:"col-12",children:i.jsx("div",{className:"card",children:i.jsxs("div",{className:"card-body",children:[i.jsx(S,{width:"180px",height:"1.125rem",className:"mb-3"}),i.jsx(S,{width:"100%",height:"38px",style:{borderRadius:"4px"}})]})})}),i.jsx("div",{className:"col-12",children:i.jsx("div",{className:"card",children:i.jsxs("div",{className:"card-body",children:[i.jsx(S,{width:"140px",height:"1.125rem",className:"mb-3"}),i.jsxs("div",{className:"row",children:[i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsx(S,{width:"120px",height:"0.875rem",className:"mb-2"}),i.jsx(S,{width:"100%",height:"38px",style:{borderRadius:"4px"}})]})}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsx(S,{width:"130px",height:"0.875rem",className:"mb-2"}),i.jsx(S,{width:"100%",height:"38px",style:{borderRadius:"4px"}})]})})]})]})})}),i.jsx("div",{className:"col-12",children:i.jsx("div",{className:"card",children:i.jsxs("div",{className:"card-body",children:[i.jsx(S,{width:"160px",height:"1.125rem",className:"mb-3"}),i.jsxs("div",{className:"row d-flex align-items-center",children:[i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsx(S,{width:"100px",height:"0.875rem",className:"mb-2"}),i.jsx(S,{width:"100%",height:"38px",style:{borderRadius:"4px"}})]})}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsx(S,{width:"130px",height:"0.875rem",className:"mb-2"}),i.jsx(S,{width:"100%",height:"38px",style:{borderRadius:"4px"}})]})})]})]})})}),i.jsxs("div",{className:"col-12",children:[i.jsx(S,{width:"240px",height:"1.125rem",className:"mb-3"}),i.jsx("div",{className:"card",children:i.jsxs("div",{className:"card-body",children:[i.jsx(S,{width:"140px",height:"1.125rem",className:"mb-3"}),i.jsxs("div",{className:"d-flex flex-column row-gap-3",children:[i.jsxs("div",{className:"d-flex flex-column row-gap-2",children:[i.jsx(S,{width:"100%",height:"38px",style:{borderRadius:"4px"}}),i.jsx("div",{className:"kivi-collapse show",children:i.jsx("div",{className:"ms-4",children:i.jsx(S,{width:"100%",height:"38px",style:{borderRadius:"4px"}})})})]}),i.jsxs("div",{className:"d-flex flex-column row-gap-2",children:[i.jsx(S,{width:"100%",height:"38px",style:{borderRadius:"4px"}}),i.jsx("div",{className:"kivi-collapse show",children:i.jsx("div",{className:"ms-4",children:i.jsx(S,{width:"100%",height:"38px",style:{borderRadius:"4px"}})})})]}),i.jsx("div",{className:"d-flex flex-column row-gap-2",children:i.jsx(S,{width:"100%",height:"38px",style:{borderRadius:"4px"}})})]})]})})]}),i.jsx("div",{className:"col-12",children:i.jsx("div",{className:"d-flex justify-content-end gap-3",children:i.jsx(S,{width:"140px",height:"38px",style:{borderRadius:"4px"}})})})]})})})})]})}),fP=()=>i.jsx("div",{className:"row",children:i.jsx("div",{className:"col-12",children:i.jsxs("div",{className:"row",children:[i.jsx("div",{className:"col-12",children:i.jsxs(gt,{children:[i.jsx(S,{width:"180px",height:"1.125rem",className:"mb-3"}),i.jsx(S,{width:"100%",height:"38px",style:{borderRadius:"4px"}})]})}),i.jsx("div",{className:"col-12",children:i.jsxs(gt,{children:[i.jsx(S,{width:"140px",height:"1.125rem",className:"mb-3"}),i.jsxs("div",{className:"row",children:[i.jsx("div",{className:"col-md-6",children:i.jsx(Ne,{labelWidth:"120px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Ne,{labelWidth:"130px"})})]})]})}),i.jsx("div",{className:"col-12",children:i.jsxs(gt,{children:[i.jsx(S,{width:"160px",height:"1.125rem",className:"mb-3"}),i.jsxs("div",{className:"row d-flex align-items-center",children:[i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsx(S,{width:"100px",height:"0.875rem",className:"mb-2"}),i.jsx(S,{width:"100%",height:"38px",style:{borderRadius:"4px"}})]})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Ne,{labelWidth:"130px"})})]})]})}),i.jsxs("div",{className:"col-12",children:[i.jsx(S,{width:"240px",height:"1.125rem",className:"mb-3"}),i.jsxs(gt,{children:[i.jsx(S,{width:"140px",height:"1.125rem",className:"mb-3"}),i.jsxs("div",{className:"d-flex flex-column row-gap-3",children:[i.jsxs("div",{className:"d-flex flex-column row-gap-2",children:[i.jsx(S,{width:"100%",height:"38px",style:{borderRadius:"4px"}}),i.jsx("div",{className:"kivi-collapse show",children:i.jsx("div",{className:"ms-4",children:i.jsx(S,{width:"100%",height:"38px",style:{borderRadius:"4px"}})})})]}),i.jsxs("div",{className:"d-flex flex-column row-gap-2",children:[i.jsx(S,{width:"100%",height:"38px",style:{borderRadius:"4px"}}),i.jsx("div",{className:"kivi-collapse show",children:i.jsx("div",{className:"ms-4",children:i.jsx(S,{width:"100%",height:"38px",style:{borderRadius:"4px"}})})})]}),i.jsx("div",{className:"d-flex flex-column row-gap-2",children:i.jsx(S,{width:"100%",height:"38px",style:{borderRadius:"4px"}})})]})]})]}),i.jsx("div",{className:"col-12",children:i.jsxs(gt,{children:[i.jsx(S,{width:"180px",height:"1.125rem",className:"mb-3"}),i.jsxs("div",{className:"d-flex flex-column row-gap-3",children:[i.jsx(S,{width:"100%",height:"38px",style:{borderRadius:"4px"}}),i.jsxs("div",{className:"row",children:[i.jsx("div",{className:"col-md-6",children:i.jsx(Ne,{labelWidth:"140px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Ne,{labelWidth:"150px"})})]}),i.jsx(S,{width:"300px",height:"0.875rem"})]})]})}),i.jsx("div",{className:"col-12",children:i.jsxs(gt,{children:[i.jsx(S,{width:"160px",height:"1.125rem",className:"mb-3"}),i.jsx(S,{width:"100%",height:"38px",style:{borderRadius:"4px"}})]})}),i.jsx("div",{className:"col-12",children:i.jsxs(gt,{children:[i.jsx(S,{width:"170px",height:"1.125rem",className:"mb-3"}),i.jsxs("div",{className:"row",children:[i.jsx("div",{className:"col-md-6 mb-3",children:i.jsx(Ne,{labelWidth:"140px"})}),i.jsx("div",{className:"col-md-6 mb-3",children:i.jsx(Ne,{labelWidth:"140px"})}),i.jsx("div",{className:"col-md-6 mb-3",children:i.jsx(Ne,{labelWidth:"160px"})}),i.jsx("div",{className:"col-md-6 mb-3",children:i.jsx(Ne,{labelWidth:"140px"})})]})]})}),i.jsx("div",{className:"col-12",children:i.jsxs(gt,{children:[i.jsx(S,{width:"180px",height:"1.125rem",className:"mb-3"}),i.jsxs("div",{className:"row",children:[i.jsx("div",{className:"col-md-6 mb-3",children:i.jsx(Ne,{labelWidth:"150px"})}),i.jsx("div",{className:"col-md-6 mb-3",children:i.jsx(Ne,{labelWidth:"150px"})}),i.jsx("div",{className:"col-md-6 mb-3",children:i.jsx(Ne,{labelWidth:"170px"})}),i.jsx("div",{className:"col-md-6 mb-3",children:i.jsx(Ne,{labelWidth:"150px"})})]})]})}),i.jsx("div",{className:"col-12",children:i.jsxs(gt,{children:[i.jsx(S,{width:"140px",height:"1.125rem",className:"mb-3"}),i.jsx(S,{width:"100%",height:"38px",style:{borderRadius:"4px"}})]})}),i.jsx("div",{className:"col-12",children:i.jsx("div",{className:"d-flex justify-content-end gap-3",children:i.jsx(st,{width:"140px",height:"38px"})})})]})})}),Aie=()=>i.jsx("div",{className:"row",children:i.jsxs("div",{className:"col-12",children:[i.jsx("div",{className:"d-flex align-items-center justify-content-between flex-wrap row-gap-2 column-gap-3 mb-4",children:i.jsx("div",{className:"page-title",children:i.jsx(S,{width:"120px",height:"1.125rem",className:"mt-2"})})}),i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap row-gap-2 column-gap-3 mb-4",children:[i.jsx(S,{width:"140px",height:"1.5rem"}),i.jsxs("div",{className:"d-flex align-items-center gap-3",children:[i.jsx(st,{width:"120px",height:"36px"}),i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsx(S,{width:"32px",height:"32px",style:{borderRadius:"4px"}}),i.jsx(S,{width:"32px",height:"32px",style:{borderRadius:"4px"}}),i.jsx(S,{width:"32px",height:"32px",style:{borderRadius:"4px"}})]})]})]}),i.jsx("div",{className:"card",children:i.jsxs("div",{className:"card-body",children:[i.jsx("div",{className:"table-responsive",children:i.jsxs("table",{className:"table table-bordered rounded",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{children:i.jsx(S,{width:"40px",height:"1rem"})}),i.jsx("th",{children:i.jsx(S,{width:"80px",height:"1rem"})}),i.jsx("th",{children:i.jsx(S,{width:"100px",height:"1rem"})}),i.jsx("th",{children:i.jsx(S,{width:"80px",height:"1rem"})}),i.jsx("th",{children:i.jsx(S,{width:"80px",height:"1rem"})}),i.jsx("th",{children:i.jsx(S,{width:"60px",height:"1rem"})})]})}),i.jsx("tbody",{children:Array.from({length:5}).map((t,e)=>i.jsxs("tr",{children:[i.jsx("td",{children:i.jsx(S,{width:"20px",height:"1rem"})}),i.jsx("td",{children:i.jsx(S,{width:"120px",height:"1rem"})}),i.jsx("td",{children:i.jsx(S,{width:"80px",height:"1rem"})}),i.jsx("td",{children:i.jsx(S,{width:"100px",height:"1rem"})}),i.jsx("td",{children:i.jsx(S,{width:"90px",height:"1rem"})}),i.jsx("td",{children:i.jsxs("div",{className:"d-flex align-items-center gap-3",children:[i.jsx(S,{width:"16px",height:"16px"}),i.jsx(S,{width:"16px",height:"16px"})]})})]},e))})]})}),i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap row-gap-2 column-gap-3 mt-3",children:[i.jsx(S,{width:"200px",height:"0.875rem"}),i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsx(S,{width:"80px",height:"32px",style:{borderRadius:"4px"}}),i.jsx(S,{width:"60px",height:"32px",style:{borderRadius:"4px"}}),i.jsx(S,{width:"80px",height:"32px",style:{borderRadius:"4px"}})]})]})]})})]})}),vP=()=>i.jsx("div",{className:"tab-pane fade show active",id:"v-pills-configurations",role:"tabpanel","aria-labelledby":"v-pills-configurations-tab",tabIndex:"0",children:i.jsxs("div",{className:"configuration-setting",children:[i.jsxs("div",{className:"d-flex align-items-center gap-2 mb-3",children:[i.jsx(S,{width:"200px",height:"1.125rem"}),i.jsx(S,{width:"16px",height:"16px",style:{borderRadius:"50%"}})]}),i.jsx("div",{className:"card mb-4",children:i.jsxs("div",{className:"card-body",children:[i.jsx(S,{width:"140px",height:"1.125rem",className:"mb-3"}),i.jsxs("div",{className:"d-flex flex-wrap gap-4",children:[i.jsxs("div",{className:"form-check form-check-inline",children:[i.jsx(S,{width:"16px",height:"16px",className:"me-2",style:{borderRadius:"2px"}}),i.jsx(S,{width:"90px",height:"0.875rem"})]}),i.jsxs("div",{className:"form-check form-check-inline",children:[i.jsx(S,{width:"16px",height:"16px",className:"me-2",style:{borderRadius:"2px"}}),i.jsx(S,{width:"60px",height:"0.875rem"})]}),i.jsxs("div",{className:"form-check form-check-inline",children:[i.jsx(S,{width:"16px",height:"16px",className:"me-2",style:{borderRadius:"2px"}}),i.jsx(S,{width:"100px",height:"0.875rem"})]})]})]})}),i.jsx("div",{className:"card mb-4",children:i.jsxs("div",{className:"card-body",children:[i.jsx(S,{width:"140px",height:"1.125rem",className:"mb-3"}),i.jsxs("div",{className:"d-flex flex-wrap gap-4",children:[i.jsxs("div",{className:"form-check form-check-inline",children:[i.jsx(S,{width:"16px",height:"16px",className:"me-2",style:{borderRadius:"2px"}}),i.jsx(S,{width:"70px",height:"0.875rem"})]}),i.jsxs("div",{className:"form-check form-check-inline",children:[i.jsx(S,{width:"16px",height:"16px",className:"me-2",style:{borderRadius:"2px"}}),i.jsx(S,{width:"100px",height:"0.875rem"})]}),i.jsxs("div",{className:"form-check form-check-inline",children:[i.jsx(S,{width:"16px",height:"16px",className:"me-2",style:{borderRadius:"2px"}}),i.jsx(S,{width:"50px",height:"0.875rem"})]})]})]})}),i.jsx("div",{className:"card mb-4",children:i.jsxs("div",{className:"card-body",children:[i.jsx(S,{width:"160px",height:"1.125rem",className:"mb-3"}),i.jsx("div",{className:"d-flex flex-wrap gap-4",children:i.jsxs("div",{className:"form-check form-check-inline",children:[i.jsx(S,{width:"16px",height:"16px",className:"me-2",style:{borderRadius:"2px"}}),i.jsx(S,{width:"90px",height:"0.875rem"})]})})]})}),i.jsx("div",{className:"d-flex justify-content-end",children:i.jsx(st,{width:"80px",height:"38px"})})]})}),xP=()=>i.jsx("div",{className:"tab-pane fade show active position-relative",id:"v-pills-app-configuration",role:"tabpanel","aria-labelledby":"v-pills-app-configuration-tab",tabIndex:"0",children:i.jsxs("div",{className:"app-configuration-setting",children:[i.jsxs("div",{className:"d-flex align-items-center gap-2 mb-3",children:[i.jsx(S,{width:"180px",height:"1.125rem"}),i.jsx(S,{width:"16px",height:"16px",style:{borderRadius:"50%"}})]}),i.jsx("div",{className:"card mb-4",children:i.jsxs("div",{className:"card-body",children:[i.jsx(S,{width:"280px",height:"1.125rem",className:"mb-3"}),i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-md-6",children:i.jsx(Ne,{labelWidth:"140px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Ne,{labelWidth:"170px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Ne,{labelWidth:"90px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Ne,{labelWidth:"90px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Ne,{labelWidth:"80px"})})]})]})}),i.jsx("div",{className:"d-flex justify-content-end flex-wrap row-gap-2 column-gap-4 mb-5",children:i.jsx(st,{width:"80px",height:"38px"})}),i.jsxs("div",{className:"mt-4",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[i.jsx(S,{width:"220px",height:"1.125rem"}),i.jsx(st,{width:"180px",height:"32px"})]}),i.jsx("div",{className:"table-responsive mb-3",children:i.jsxs("table",{className:"table table-bordered rounded",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{children:i.jsx(S,{width:"50px",height:"1rem"})}),i.jsx("th",{children:i.jsx(S,{width:"90px",height:"1rem"})}),i.jsx("th",{children:i.jsx(S,{width:"70px",height:"1rem"})}),i.jsx("th",{children:i.jsx(S,{width:"60px",height:"1rem"})})]})}),i.jsx("tbody",{children:Array.from({length:5}).map((t,e)=>i.jsxs("tr",{children:[i.jsx("td",{children:i.jsx(S,{width:"150px",height:"1rem"})}),i.jsx("td",{children:i.jsx(S,{width:"120px",height:"1rem"})}),i.jsx("td",{children:i.jsx(S,{width:"40px",height:"24px",style:{borderRadius:"12px"}})}),i.jsx("td",{children:i.jsx(S,{width:"50px",height:"1rem"})})]},e))})]})})]})]})}),Die=()=>i.jsx("div",{className:"tab-pane fade show active position-relative",id:"v-pills-webhook",role:"tabpanel","aria-labelledby":"v-pills-webhooks-tab",tabIndex:"0",children:i.jsx("div",{className:"webhook-setting",children:i.jsx("div",{className:"",children:i.jsx("div",{className:"kc-tab-content",role:"tabpanel",children:i.jsx(gt,{children:i.jsx(S,{width:"100%",height:"400px",style:{borderRadius:"4px"}})})})})})}),yP=()=>i.jsxs("div",{className:"webhook-form",children:[i.jsxs("div",{className:"d-flex justify-content-end gap-2 mb-3",children:[i.jsx(st,{width:"100px"}),i.jsx(st,{width:"100px"})]}),i.jsxs(gt,{children:[i.jsx("div",{className:"card-header",children:i.jsx(S,{width:"150px",height:"1.25rem",className:"mb-0"})}),i.jsx("div",{className:"card-body",children:i.jsxs("div",{className:"row g-3",children:[i.jsx("div",{className:"col-md-6",children:i.jsx(Ne,{labelWidth:"120px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Ne,{labelWidth:"60px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Ne,{labelWidth:"50px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Ne,{labelWidth:"100px"})}),i.jsx("div",{className:"col-12",children:i.jsx(Ne,{labelWidth:"100px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Ne,{labelWidth:"50px"})})]})})]}),i.jsxs(gt,{children:[i.jsx("div",{className:"card-header",children:i.jsx(S,{width:"120px",height:"1.25rem",className:"mb-0"})}),i.jsx("div",{className:"card-body",children:i.jsxs("div",{className:"row g-3",children:[i.jsx("div",{className:"col-12",children:i.jsx(Ne,{labelWidth:"160px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Ne,{labelWidth:"60px"})}),i.jsx("div",{className:"col-md-3",children:i.jsx(Ne,{labelWidth:"60px"})}),i.jsx("div",{className:"col-md-3",children:i.jsx(Ne,{labelWidth:"120px"})})]})})]}),i.jsxs(gt,{children:[i.jsx("div",{className:"card-header",children:i.jsx(S,{width:"180px",height:"1.25rem",className:"mb-0"})}),i.jsx("div",{className:"card-body",children:i.jsxs("div",{className:"row g-3",children:[i.jsx("div",{className:"col-md-6",children:i.jsx(Ne,{labelWidth:"100px"})}),i.jsxs("div",{className:"col-12",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[i.jsx(S,{width:"120px",height:"1rem"}),i.jsx(st,{width:"100px"})]}),i.jsxs("div",{className:"row g-2 mb-2",children:[i.jsx("div",{className:"col-5",children:i.jsx(S,{width:"100%",height:"32px",style:{borderRadius:"4px"}})}),i.jsx("div",{className:"col-6",children:i.jsx(S,{width:"100%",height:"32px",style:{borderRadius:"4px"}})}),i.jsx("div",{className:"col-1",children:i.jsx(S,{width:"100%",height:"32px",style:{borderRadius:"4px"}})})]}),i.jsxs("div",{className:"row g-2 mb-2",children:[i.jsx("div",{className:"col-5",children:i.jsx(S,{width:"100%",height:"32px",style:{borderRadius:"4px"}})}),i.jsx("div",{className:"col-6",children:i.jsx(S,{width:"100%",height:"32px",style:{borderRadius:"4px"}})}),i.jsx("div",{className:"col-1",children:i.jsx(S,{width:"100%",height:"32px",style:{borderRadius:"4px"}})})]})]}),i.jsxs("div",{className:"col-12",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[i.jsx(S,{width:"130px",height:"1rem"}),i.jsx(st,{width:"120px"})]}),i.jsxs("div",{className:"row g-2 mb-2",children:[i.jsx("div",{className:"col-5",children:i.jsx(S,{width:"100%",height:"32px",style:{borderRadius:"4px"}})}),i.jsx("div",{className:"col-6",children:i.jsx(S,{width:"100%",height:"32px",style:{borderRadius:"4px"}})}),i.jsx("div",{className:"col-1",children:i.jsx(S,{width:"100%",height:"32px",style:{borderRadius:"4px"}})})]})]}),i.jsxs("div",{className:"col-12",children:[i.jsxs("div",{className:"mb-2",children:[i.jsx(S,{width:"150px",height:"0.875rem",className:"mb-2"}),i.jsxs("div",{className:"d-flex flex-wrap gap-1 mb-2",children:[i.jsx(S,{width:"80px",height:"28px",style:{borderRadius:"4px"}}),i.jsx(S,{width:"100px",height:"28px",style:{borderRadius:"4px"}}),i.jsx(S,{width:"90px",height:"28px",style:{borderRadius:"4px"}})]})]}),i.jsx(S,{width:"100%",height:"200px",style:{borderRadius:"4px"}})]})]})})]}),i.jsxs(gt,{children:[i.jsx("div",{className:"card-header",children:i.jsx(S,{width:"140px",height:"1.25rem",className:"mb-0"})}),i.jsx("div",{className:"card-body",children:i.jsxs("div",{className:"row g-3",children:[i.jsx("div",{className:"col-md-4",children:i.jsx(Ne,{labelWidth:"130px"})}),i.jsx("div",{className:"col-md-4",children:i.jsx(Ne,{labelWidth:"110px"})}),i.jsx("div",{className:"col-md-4",children:i.jsx(Ne,{labelWidth:"130px"})}),i.jsx("div",{className:"col-12",children:i.jsx(S,{width:"200px",height:"1rem"})})]})})]}),i.jsx("div",{className:"d-flex justify-content-end gap-2",children:i.jsx(st,{width:"140px"})})]}),RC=()=>i.jsxs("div",{className:"add-webhook-configuration",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[i.jsxs("div",{children:[i.jsx(S,{width:"200px",height:"1.75rem",className:"mb-1"}),i.jsx(S,{width:"400px",height:"0.875rem"})]}),i.jsx(st,{width:"120px"})]}),i.jsx(yP,{})]}),Ky=()=>i.jsxs("div",{className:"custom-notification-edit",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[i.jsxs("div",{children:[i.jsx(S,{width:"250px",height:"1.75rem",className:"mb-1"}),i.jsx(S,{width:"350px",height:"0.875rem"})]}),i.jsx(st,{width:"140px"})]}),i.jsxs(gt,{children:[i.jsx("div",{className:"card-header",children:i.jsx(S,{width:"130px",height:"1.25rem",className:"mb-0"})}),i.jsxs("div",{className:"card-body",children:[i.jsxs("div",{className:"row",children:[i.jsx("div",{className:"col-md-6",children:i.jsx(Ne,{labelWidth:"180px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Ne,{labelWidth:"100px"})})]}),i.jsxs("div",{className:"row",children:[i.jsx("div",{className:"col-md-8",children:i.jsx(Ne,{labelWidth:"130px"})}),i.jsx("div",{className:"col-md-4",children:i.jsx(Ne,{labelWidth:"100px"})})]}),i.jsx(Ne,{labelWidth:"100px"})]})]}),i.jsxs(gt,{children:[i.jsx("div",{className:"card-header",children:i.jsx(S,{width:"120px",height:"1.25rem",className:"mb-0"})}),i.jsxs("div",{className:"card-body",children:[i.jsx(Ne,{labelWidth:"160px"}),i.jsxs("div",{className:"border p-3 rounded bg-body",children:[i.jsx(S,{width:"200px",height:"1.125rem",className:"mb-3"}),i.jsxs("div",{className:"row",children:[i.jsx("div",{className:"col-md-6",children:i.jsx(Ne,{labelWidth:"60px"})}),i.jsx("div",{className:"col-md-3",children:i.jsx(Ne,{labelWidth:"90px"})}),i.jsx("div",{className:"col-md-3",children:i.jsx(Ne,{labelWidth:"130px"})})]})]})]})]}),i.jsxs(gt,{children:[i.jsx("div",{className:"card-header",children:i.jsx(S,{width:"160px",height:"1.25rem",className:"mb-0"})}),i.jsxs("div",{className:"card-body",children:[i.jsxs("div",{className:"row",children:[i.jsx("div",{className:"col-md-6",children:i.jsx(Ne,{labelWidth:"100px"})}),i.jsx("div",{className:"col-md-6",children:i.jsx(Ne,{labelWidth:"110px"})})]}),i.jsx(Ne,{labelWidth:"80px"})]})]}),i.jsxs(gt,{children:[i.jsx("div",{className:"card-header",children:i.jsx(S,{width:"170px",height:"1.25rem",className:"mb-0"})}),i.jsxs("div",{className:"card-body",children:[i.jsx(Ne,{labelWidth:"100px"}),i.jsxs("div",{className:"mb-3",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[i.jsx(S,{width:"120px",height:"1rem"}),i.jsx(st,{width:"100px"})]}),i.jsxs("div",{className:"row g-2 mb-2",children:[i.jsx("div",{className:"col-5",children:i.jsx(S,{width:"100%",height:"32px",style:{borderRadius:"4px"}})}),i.jsx("div",{className:"col-6",children:i.jsx(S,{width:"100%",height:"32px",style:{borderRadius:"4px"}})}),i.jsx("div",{className:"col-1",children:i.jsx(S,{width:"100%",height:"32px",style:{borderRadius:"4px"}})})]}),i.jsxs("div",{className:"row g-2 mb-2",children:[i.jsx("div",{className:"col-5",children:i.jsx(S,{width:"100%",height:"32px",style:{borderRadius:"4px"}})}),i.jsx("div",{className:"col-6",children:i.jsx(S,{width:"100%",height:"32px",style:{borderRadius:"4px"}})}),i.jsx("div",{className:"col-1",children:i.jsx(S,{width:"100%",height:"32px",style:{borderRadius:"4px"}})})]})]}),i.jsxs("div",{className:"mb-3",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[i.jsx(S,{width:"130px",height:"1rem"}),i.jsx(st,{width:"120px"})]}),i.jsxs("div",{className:"row g-2 mb-2",children:[i.jsx("div",{className:"col-5",children:i.jsx(S,{width:"100%",height:"32px",style:{borderRadius:"4px"}})}),i.jsx("div",{className:"col-6",children:i.jsx(S,{width:"100%",height:"32px",style:{borderRadius:"4px"}})}),i.jsx("div",{className:"col-1",children:i.jsx(S,{width:"100%",height:"32px",style:{borderRadius:"4px"}})})]})]}),i.jsxs("div",{className:"mb-3",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[i.jsx(S,{width:"140px",height:"1rem"}),i.jsx(st,{width:"120px"})]}),i.jsxs("div",{className:"row g-2 mb-2",children:[i.jsx("div",{className:"col-5",children:i.jsx(S,{width:"100%",height:"32px",style:{borderRadius:"4px"}})}),i.jsx("div",{className:"col-6",children:i.jsx(S,{width:"100%",height:"32px",style:{borderRadius:"4px"}})}),i.jsx("div",{className:"col-1",children:i.jsx(S,{width:"100%",height:"32px",style:{borderRadius:"4px"}})})]})]}),i.jsxs("div",{className:"mb-3",children:[i.jsx(S,{width:"100px",height:"1rem",className:"mb-2"}),i.jsxs("div",{className:"d-flex flex-wrap gap-1 mb-2",children:[i.jsx(S,{width:"120px",height:"28px",style:{borderRadius:"4px"}}),i.jsx(S,{width:"100px",height:"28px",style:{borderRadius:"4px"}}),i.jsx(S,{width:"90px",height:"28px",style:{borderRadius:"4px"}}),i.jsx(S,{width:"110px",height:"28px",style:{borderRadius:"4px"}})]}),i.jsx(S,{width:"100%",height:"150px",style:{borderRadius:"4px"}})]})]})]}),i.jsxs("div",{className:"d-flex gap-2",children:[i.jsx(st,{width:"160px"}),i.jsx(st,{width:"140px"}),i.jsx(st,{width:"80px"})]})]}),Rie=()=>i.jsx("div",{children:i.jsx("div",{className:"tab-pane fade show active",id:"v-pills-custom-form",role:"tabpanel","aria-labelledby":"v-pills-custom-form-tab",tabIndex:"0",children:i.jsxs("div",{className:"custom-forms-setting",children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap gap-3 mb-3",children:[i.jsxs("h6",{className:"setting-title m-0",children:[i.jsx(S,{width:"150px",height:"1.25rem",className:"d-inline-block me-2"}),i.jsx(S,{width:"20px",height:"20px",style:{borderRadius:"50%"},className:"d-inline-block"})]}),i.jsxs("div",{className:"d-flex align-items-center flex-wrap gap-3",children:[i.jsx("div",{className:"d-flex align-items-center input-search-select",children:i.jsxs("div",{className:"input-group input-group-search",children:[i.jsx("span",{className:"input-group-text",children:i.jsx(S,{width:"16px",height:"16px"})}),i.jsx(S,{width:"200px",height:"38px",style:{borderRadius:"4px"}})]})}),i.jsx(st,{width:"120px"})]})]}),i.jsx("div",{className:"table-responsive",children:i.jsx("div",{className:"card",children:i.jsxs("div",{className:"card-body p-0",children:[i.jsx("div",{className:"table-responsive",children:i.jsxs("table",{className:"table table-hover mb-0",children:[i.jsx("thead",{className:"table-light",children:i.jsxs("tr",{children:[i.jsx("th",{children:i.jsx(S,{width:"30px",height:"1rem"})}),i.jsx("th",{children:i.jsx(S,{width:"60px",height:"1rem"})}),i.jsx("th",{children:i.jsx(S,{width:"50px",height:"1rem"})}),i.jsx("th",{children:i.jsx(S,{width:"50px",height:"1rem"})}),i.jsx("th",{children:i.jsx(S,{width:"70px",height:"1rem"})})]})}),i.jsx("tbody",{children:Array.from({length:5}).map((t,e)=>i.jsxs("tr",{children:[i.jsx("td",{children:i.jsx(S,{width:"40px",height:"1rem"})}),i.jsx("td",{children:i.jsx(S,{width:"120px",height:"1rem"})}),i.jsx("td",{children:i.jsx(S,{width:"80px",height:"1rem"})}),i.jsx("td",{children:i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsx(S,{width:"50px",height:"24px",style:{borderRadius:"12px"}}),i.jsx(S,{width:"60px",height:"20px",style:{borderRadius:"10px"}})]})}),i.jsx("td",{children:i.jsxs("div",{className:"d-flex align-items-center gap-3",children:[i.jsx(S,{width:"16px",height:"16px"}),i.jsx(S,{width:"16px",height:"16px"}),i.jsx(S,{width:"16px",height:"16px"})]})})]},e))})]})}),i.jsxs("div",{className:"d-flex justify-content-between align-items-center p-3 border-top",children:[i.jsx(S,{width:"150px",height:"1rem"}),i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsx(S,{width:"80px",height:"32px",style:{borderRadius:"4px"}}),i.jsx(S,{width:"40px",height:"32px",style:{borderRadius:"4px"}}),i.jsx(S,{width:"40px",height:"32px",style:{borderRadius:"4px"}}),i.jsx(S,{width:"40px",height:"32px",style:{borderRadius:"4px"}}),i.jsx(S,{width:"80px",height:"32px",style:{borderRadius:"4px"}})]})]})]})})})]})})}),Gy=()=>i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center gap-3 flex-wrap mb-4",children:[i.jsx("nav",{"aria-label":"breadcrumb",children:i.jsxs("ol",{className:"breadcrumb m-0",children:[i.jsx("li",{className:"breadcrumb-item",children:i.jsx(S,{width:"50px",height:"1rem"})}),i.jsx("li",{className:"breadcrumb-item",children:i.jsx(S,{width:"80px",height:"1rem"})}),i.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:i.jsx(S,{width:"100px",height:"1rem"})})]})}),i.jsx(st,{width:"80px"})]}),i.jsxs("div",{className:"row",children:[i.jsx("div",{className:"col-12 col-md-5 col-lg-4 col-xl-3",children:i.jsxs(gt,{children:[i.jsxs("div",{className:"nav nav-pills nav-pill-card mb-4",children:[i.jsx("div",{className:"nav-item",children:i.jsx(S,{width:"60px",height:"38px",style:{borderRadius:"4px"},className:"me-2"})}),i.jsx("div",{className:"nav-item",children:i.jsx(S,{width:"100px",height:"38px",style:{borderRadius:"4px"},className:"me-2"})}),i.jsx("div",{className:"nav-item",children:i.jsx(S,{width:"70px",height:"38px",style:{borderRadius:"4px"}})})]}),i.jsx("div",{className:"tab-content",children:i.jsxs("div",{className:"row gy-3",children:[i.jsx("div",{className:"col-12",children:i.jsx(Ne,{labelWidth:"80px"})}),i.jsx("div",{className:"col-12",children:i.jsx(Ne,{labelWidth:"90px"})}),i.jsx("div",{className:"col-12",children:i.jsx(Ne,{labelWidth:"50px"})}),i.jsxs("div",{className:"col-12",children:[i.jsx(S,{width:"120px",height:"1rem",className:"mb-2"}),i.jsxs("div",{className:"py-2 px-3 bg-body border border-primary rounded",children:[i.jsx(S,{width:"100px",height:"1rem",className:"me-3"}),i.jsx(S,{width:"80px",height:"1rem"})]})]}),i.jsx("div",{className:"col-12",children:i.jsx(Ne,{labelWidth:"50px"})}),i.jsx("div",{className:"col-12",children:i.jsx(Ne,{labelWidth:"100px"})})]})})]})}),i.jsxs("div",{className:"col-12 col-md-7 col-lg-8 col-xl-9",children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-3 flex-wrap gap-2",children:[i.jsx(S,{width:"180px",height:"1.25rem"}),i.jsxs("div",{className:"d-flex align-items-center gap-2 flex-wrap",children:[i.jsx(st,{width:"100px"}),i.jsx(st,{width:"120px"})]})]}),i.jsxs(gt,{children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-4 pb-4 border-bottom flex-wrap gap-2",children:[i.jsx(S,{width:"150px",height:"1.25rem"}),i.jsx(st,{width:"100px"})]}),i.jsxs("div",{className:"row gy-4 custom-form-content",children:[i.jsx("div",{className:"col-12",children:i.jsxs("div",{className:"form-group",children:[i.jsx(S,{width:"80px",height:"1rem",className:"mb-2"}),i.jsx(S,{width:"100%",height:"38px",style:{borderRadius:"4px"}})]})}),Array.from({length:3}).map((t,e)=>i.jsx("div",{className:"col-xl-6 col-12",children:i.jsxs("div",{className:"form-group custom-form-group",children:[i.jsxs("label",{className:"form-label d-flex align-items-center justify-content-between gap-1 flex-wrap",children:[i.jsx(S,{width:"100px",height:"1rem"}),i.jsxs("span",{className:"d-flex align-items-center gap-lg-3 gap-2",children:[i.jsx(S,{width:"16px",height:"16px"}),i.jsx(S,{width:"16px",height:"16px"})]})]}),i.jsxs("div",{className:"d-flex align-items-start gap-lg-3 gap-2",children:[i.jsx(S,{width:"32px",height:"32px",style:{borderRadius:"4px"},className:"flex-shrink-0 mt-2"}),i.jsx("div",{className:"flex-grow-1",children:i.jsx(S,{width:"100%",height:"38px",style:{borderRadius:"4px"}})})]})]})},e)),i.jsx("div",{className:"col-12",children:i.jsxs("div",{className:"text-center py-5 border-2 border-dashed border-primary rounded",children:[i.jsx(S,{width:"48px",height:"48px",className:"mx-auto mb-3",style:{borderRadius:"50%"}}),i.jsx(S,{width:"200px",height:"1.25rem",className:"mb-2"}),i.jsx(S,{width:"300px",height:"1rem"})]})})]})]})]})]})]}),bP=()=>i.jsx("div",{className:"tab-pane fade show active",id:"v-pills-encounter-body-chart",role:"tabpanel",children:i.jsxs("div",{className:"encounter-body-chart-setting",children:[i.jsxs("h6",{className:"setting-title mb-3",children:[i.jsx(S,{width:"220px",height:"1.25rem",className:"d-inline-block me-2"}),i.jsx(S,{width:"20px",height:"20px",style:{borderRadius:"50%"},className:"d-inline-block"})]}),i.jsx(gt,{children:i.jsxs("form",{children:[i.jsxs("div",{className:"row gy-4 mb-5 pb-3",children:[i.jsx("div",{className:"col-lg-6",children:i.jsx(Ne,{labelWidth:"120px"})}),i.jsx("div",{className:"col-lg-6",children:i.jsx(Ne,{labelWidth:"140px"})}),i.jsx("div",{className:"col-lg-6",children:i.jsx(Ne,{labelWidth:"200px"})}),i.jsx("div",{className:"col-lg-6",children:i.jsx(Ne,{labelWidth:"100px"})})]}),i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap gap-3 mb-3",children:[i.jsxs("div",{children:[i.jsx(S,{width:"120px",height:"1rem",className:"mb-1"}),i.jsx(S,{width:"180px",height:"0.875rem"})]}),i.jsx(st,{width:"100px"})]}),i.jsx("div",{className:"table-responsive",children:i.jsxs("table",{className:"table table-bordered rounded simple-table",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{children:i.jsx(S,{width:"50px",height:"1rem"})}),i.jsx("th",{children:i.jsx(S,{width:"70px",height:"1rem"})}),i.jsx("th",{children:i.jsx(S,{width:"50px",height:"1rem"})}),i.jsx("th",{children:i.jsx(S,{width:"60px",height:"1rem"})})]})}),i.jsx("tbody",{children:Array.from({length:3}).map((t,e)=>i.jsxs("tr",{children:[i.jsx("td",{children:i.jsx(S,{width:"80px",height:"1rem"})}),i.jsx("td",{children:i.jsxs("div",{className:"form-check mb-0",children:[i.jsx(S,{width:"16px",height:"16px",style:{borderRadius:"50%"},className:"me-2 d-inline-block"}),i.jsx(S,{width:"60px",height:"1rem",className:"d-inline-block"})]})}),i.jsx("td",{children:i.jsx(S,{width:"40px",height:"40px",style:{borderRadius:"4px"}})}),i.jsx("td",{children:i.jsxs("div",{className:"d-flex gap-2",children:[i.jsx(S,{width:"16px",height:"16px"}),i.jsx(S,{width:"16px",height:"16px"})]})})]},e))})]})}),i.jsx("div",{className:"d-flex justify-content-end flex-wrap row-gap-2 column-gap-4 mb-5",children:i.jsx(st,{width:"80px"})})]})})]})}),kP=()=>i.jsx("div",{className:"tab-pane fade show active",id:"v-pills-widget-setting",role:"tabpanel","aria-labelledby":"v-pills-widget-setting-tab",tabIndex:0,children:i.jsxs("div",{className:"widget-setting",children:[i.jsxs("h6",{className:"setting-title mb-3",children:[i.jsx(S,{width:"140px",height:"1.25rem",className:"d-inline-block me-2"}),i.jsx(S,{width:"20px",height:"20px",style:{borderRadius:"50%"},className:"d-inline-block"})]}),i.jsxs(gt,{children:[i.jsx(S,{width:"60px",height:"1.125rem",className:"mb-3"}),i.jsxs("div",{className:"mb-3",children:[i.jsx(S,{width:"140px",height:"1rem",className:"mb-2"}),i.jsx(S,{width:"50px",height:"24px",style:{borderRadius:"12px"}})]}),i.jsxs("div",{className:"mb-3",children:[i.jsx(S,{width:"160px",height:"1rem",className:"mb-2"}),i.jsx(S,{width:"50px",height:"24px",style:{borderRadius:"12px"}})]}),i.jsxs("div",{className:"form-group",children:[i.jsx(S,{width:"120px",height:"1rem",className:"mb-2"}),i.jsx(S,{width:"100%",height:"38px",style:{borderRadius:"4px"}})]})]}),i.jsxs(gt,{children:[i.jsx(S,{width:"70px",height:"1.125rem",className:"mb-3"}),Array.from({length:5}).map((t,e)=>i.jsxs("div",{className:"mb-3",children:[i.jsx(S,{width:"160px",height:"1rem",className:"mb-2"}),i.jsx(S,{width:"50px",height:"24px",style:{borderRadius:"12px"}})]},e)),i.jsxs("div",{className:"form-group",children:[i.jsx(S,{width:"120px",height:"1rem",className:"mb-2"}),i.jsx(S,{width:"100%",height:"38px",style:{borderRadius:"4px"}})]})]}),i.jsxs(gt,{children:[i.jsx(S,{width:"80px",height:"1.125rem",className:"mb-3"}),Array.from({length:5}).map((t,e)=>i.jsxs("div",{className:"mb-3",children:[i.jsx(S,{width:"180px",height:"1rem",className:"mb-2"}),i.jsx(S,{width:"50px",height:"24px",style:{borderRadius:"12px"}})]},e))]}),i.jsxs(gt,{children:[i.jsx(S,{width:"100px",height:"1.125rem",className:"mb-3"}),i.jsx("div",{className:"row",children:i.jsx("div",{className:"col-md-6",children:i.jsx(Ne,{labelWidth:"100px"})})})]}),i.jsxs(gt,{children:[i.jsx(S,{width:"110px",height:"1.125rem",className:"mb-3"}),i.jsx("div",{className:"d-flex align-items-center gap-4 flex-wrap",children:Array.from({length:4}).map((t,e)=>i.jsxs("div",{className:"d-flex align-items-center gap-2 bg-body rounded widget-color-select",children:[i.jsx(S,{width:"40px",height:"38px",style:{borderRadius:"4px"}}),i.jsx(S,{width:"120px",height:"1rem"})]},e))})]}),i.jsxs(gt,{children:[i.jsx(S,{width:"110px",height:"1.125rem",className:"mb-3"}),Array.from({length:7}).map((t,e)=>i.jsxs("div",{className:"p-3 bg-body mb-2 d-flex align-items-center gap-3",children:[i.jsx(S,{width:"20px",height:"20px"}),i.jsx(S,{width:"180px",height:"1rem"})]},e))]}),i.jsxs(gt,{children:[i.jsx(S,{width:"150px",height:"1.125rem",className:"mb-3"}),i.jsxs("div",{className:"mb-3",children:[i.jsx(S,{width:"100px",height:"1rem",className:"mb-2"}),i.jsx(S,{width:"50px",height:"24px",style:{borderRadius:"12px"}})]}),i.jsxs("div",{className:"mb-3",children:[i.jsx(S,{width:"200px",height:"1rem",className:"mb-2"}),i.jsx(S,{width:"50px",height:"24px",style:{borderRadius:"12px"}})]})]}),i.jsx("div",{className:"d-flex justify-content-end mt-4",children:i.jsx(st,{width:"140px"})})]})}),wP=()=>i.jsx("div",{className:"tab-pane fade show active position-relative overflow-hidden z-0",id:"v-pills-google-event-template",role:"tabpanel","aria-labelledby":"v-pills-google-event-template-tab",tabIndex:"0",children:i.jsxs("div",{className:"google-event-template-setting",children:[i.jsxs("h6",{className:"setting-title mb-3",children:[i.jsx(S,{width:"180px",height:"1.25rem",className:"d-inline-block me-2"}),i.jsx(S,{width:"20px",height:"20px",style:{borderRadius:"50%"},className:"d-inline-block"})]}),i.jsxs(gt,{children:[i.jsx(S,{width:"180px",height:"1.125rem",className:"mb-3"}),i.jsxs("div",{className:"form-group mb-4",children:[i.jsx(S,{width:"150px",height:"1rem",className:"mb-2"}),i.jsx(S,{width:"100%",height:"38px",style:{borderRadius:"4px"}})]}),i.jsxs("div",{className:"form-group",children:[i.jsx(S,{width:"200px",height:"1.125rem",className:"mb-2"}),i.jsx(S,{width:"100%",height:"200px",style:{borderRadius:"4px"}})]})]}),i.jsx("div",{className:"d-flex justify-content-end gap-4 mb-5",children:i.jsx(st,{width:"80px"})})]})}),jP=()=>i.jsx("div",{className:"tab-pane fade show active position-relative",id:"v-pills-google-meet",role:"tabpanel","aria-labelledby":"v-pills-google-meet-tab",tabIndex:"0",children:i.jsxs("div",{className:"google-meet-setting",children:[i.jsxs("h6",{className:"setting-title mb-3",children:[i.jsx(S,{width:"120px",height:"1.25rem",className:"d-inline-block me-2"}),i.jsx(S,{width:"20px",height:"20px",style:{borderRadius:"50%"},className:"d-inline-block"})]}),i.jsx(gt,{children:i.jsx("div",{className:"row",children:i.jsxs("div",{className:"col-12",children:[i.jsx(S,{width:"200px",height:"1rem",className:"mb-2"}),i.jsx(S,{width:"50px",height:"24px",style:{borderRadius:"12px"}})]})})}),i.jsxs(gt,{children:[i.jsxs("div",{className:"row gy-4 pb-4 mb-4 border-bottom",children:[i.jsx("div",{className:"col-lg-4",children:i.jsx(Ne,{labelWidth:"160px"})}),i.jsx("div",{className:"col-lg-4",children:i.jsx(Ne,{labelWidth:"180px"})}),i.jsx("div",{className:"col-lg-4",children:i.jsx(Ne,{labelWidth:"90px"})})]}),i.jsx("div",{className:"row gy-4 pt-4",children:i.jsxs("div",{className:"col-12",children:[i.jsx(S,{width:"250px",height:"1.125rem",className:"mb-2"}),i.jsxs("div",{className:"input-group mb-2",children:[i.jsx(S,{width:"100%",height:"38px",style:{borderRadius:"4px"}}),i.jsx(S,{width:"50px",height:"38px",style:{borderRadius:"4px"}})]}),i.jsx(S,{width:"400px",height:"0.875rem"})]})}),i.jsx(S,{width:"150px",height:"1rem",className:"mt-4 mb-3"}),i.jsxs("div",{className:"bg-body p-3 rounded mb-2",children:[i.jsxs("div",{className:"d-flex align-items-md-center flex-md-row flex-column column-gap-3 row-gap-2 mb-2",children:[i.jsx(S,{width:"60px",height:"1rem",className:"flex-shrink-0"}),i.jsx(S,{width:"250px",height:"1rem"})]}),i.jsxs("div",{className:"d-flex align-items-md-center flex-md-row flex-column column-gap-3 row-gap-2 mt-2",children:[i.jsx(S,{width:"60px",height:"1rem",className:"flex-shrink-0"}),i.jsx(S,{width:"350px",height:"1rem"})]})]}),i.jsx(S,{width:"500px",height:"0.875rem"})]}),i.jsxs(gt,{children:[i.jsx(S,{width:"200px",height:"1.125rem",className:"mb-3"}),i.jsx("div",{className:"form-group mb-4",children:i.jsx(S,{width:"100%",height:"38px",style:{borderRadius:"4px"}})}),i.jsxs("div",{className:"form-group",children:[i.jsx(S,{width:"200px",height:"1.125rem",className:"mb-2"}),i.jsx(S,{width:"100%",height:"200px",style:{borderRadius:"4px"}})]})]}),i.jsx("div",{className:"d-flex justify-content-end gap-4 mb-5",children:i.jsx(st,{width:"80px"})})]})}),Pie=()=>i.jsx("div",{children:i.jsx("div",{className:"tab-pane fade show active",id:"v-pills-zoom-telemed",role:"tabpanel","aria-labelledby":"v-pills-zoom-telemed-tab",tabIndex:"0",children:i.jsxs("div",{className:"position-relative zoom-telemed-setting",children:[i.jsxs("h6",{className:"setting-title mb-3",children:[i.jsx(S,{width:"220px",height:"1.25rem",className:"d-inline-block me-2"}),i.jsx(S,{width:"20px",height:"20px",style:{borderRadius:"50%"},className:"d-inline-block"})]}),i.jsxs(gt,{children:[i.jsx(S,{width:"200px",height:"1.25rem",className:"mb-3"}),i.jsxs("div",{className:"d-flex justify-content-between align-items-center gap-3 form-switch custom-switch-xl",children:[i.jsx(S,{width:"250px",height:"1rem"}),i.jsx(S,{width:"50px",height:"24px",style:{borderRadius:"12px"}})]})]}),i.jsxs(gt,{children:[i.jsx(S,{width:"280px",height:"1.25rem",className:"mb-3"}),i.jsxs("div",{className:"d-flex justify-content-between align-items-center gap-3 form-switch custom-switch-xl",children:[i.jsx(S,{width:"300px",height:"1rem"}),i.jsx(S,{width:"50px",height:"24px",style:{borderRadius:"12px"}})]})]}),i.jsx("div",{className:"d-flex align-items-center justify-content-end gap-3 mb-5 mt-4",children:i.jsx(st,{width:"80px"})})]})})}),NP=()=>i.jsx("div",{children:i.jsx("div",{className:"tab-pane fade show active position-relative overflow-hidden z-0",id:"v-pills-pro-settings",role:"tabpanel","aria-labelledby":"v-pills-pro-settings-tab",tabIndex:"0",children:i.jsxs("div",{className:"pro-setting",children:[i.jsxs("h6",{className:"setting-title mb-3",children:[i.jsx(S,{width:"120px",height:"1.25rem",className:"d-inline-block me-2"}),i.jsx(S,{width:"20px",height:"20px",style:{borderRadius:"50%"},className:"d-inline-block"})]}),i.jsxs(gt,{children:[i.jsx(S,{width:"130px",height:"1.125rem",className:"mb-3"}),i.jsx(S,{width:"100px",height:"1rem",className:"mb-2"}),i.jsx(S,{width:"50px",height:"24px",style:{borderRadius:"12px"},className:"mb-3"}),i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-lg-6",children:i.jsx(Ne,{labelWidth:"80px"})}),i.jsx("div",{className:"col-lg-6",children:i.jsx(Ne,{labelWidth:"90px"})}),i.jsx("div",{className:"col-lg-6",children:i.jsx(Ne,{labelWidth:"110px"})})]}),i.jsxs("div",{className:"mt-4",children:[i.jsx(S,{width:"130px",height:"1.125rem",className:"mb-3"}),i.jsx("div",{className:"row gy-4",children:Array.from({length:11}).map((t,e)=>i.jsx("div",{className:"col-lg-4",children:i.jsxs("div",{className:"form-group pro-setting-color",children:[i.jsx(S,{width:"120px",height:"1rem",className:"mb-2"}),i.jsx(S,{width:"50px",height:"38px",style:{borderRadius:"4px"}})]})},e))})]})]}),i.jsxs(gt,{children:[i.jsx(S,{width:"130px",height:"1.125rem",className:"mb-3"}),i.jsx("div",{className:"row gy-4",children:Array.from({length:5}).map((t,e)=>i.jsx("div",{className:"col-lg-6",children:i.jsx(Ne,{labelWidth:"110px"})},e))})]}),i.jsxs(gt,{children:[i.jsx(S,{width:"130px",height:"1.125rem",className:"mb-3"}),i.jsx(S,{width:"150px",height:"1rem",className:"mb-2"}),i.jsx(S,{width:"50px",height:"24px",style:{borderRadius:"12px"},className:"mb-3"}),i.jsx(Ne,{labelWidth:"120px"})]}),i.jsxs(gt,{children:[i.jsx(S,{width:"160px",height:"1.125rem",className:"mb-3"}),i.jsxs("div",{className:"mb-3",children:[i.jsx(S,{width:"100px",height:"1rem",className:"mb-2"}),i.jsx(S,{width:"50px",height:"24px",style:{borderRadius:"12px"}})]}),i.jsxs("div",{className:"mb-3",children:[i.jsx(S,{width:"130px",height:"1rem",className:"mb-2"}),i.jsx(S,{width:"50px",height:"24px",style:{borderRadius:"12px"}})]})]}),i.jsxs(gt,{children:[i.jsx(S,{width:"180px",height:"1.125rem",className:"mb-3"}),i.jsx(S,{width:"150px",height:"1rem",className:"mb-2"}),i.jsx(S,{width:"50px",height:"24px",style:{borderRadius:"12px"},className:"mb-3"}),i.jsxs("div",{className:"row gy-4 mb-4",children:[i.jsx("div",{className:"col-lg-4",children:i.jsx(Ne,{labelWidth:"100px"})}),i.jsx("div",{className:"col-lg-4",children:i.jsx(Ne,{labelWidth:"110px"})}),i.jsx("div",{className:"col-lg-4",children:i.jsx(Ne,{labelWidth:"120px"})})]}),i.jsx(st,{width:"130px",className:"mb-4"}),i.jsx(S,{width:"140px",height:"1rem",className:"mb-3"}),i.jsx("div",{className:"mb-4",children:Array.from({length:5}).map((t,e)=>i.jsxs("div",{className:"mb-2",children:[i.jsx(S,{width:"80px",height:"1rem",className:"d-inline-block me-2"}),i.jsx(S,{width:"300px",height:"1rem",className:"d-inline-block"})]},e))}),i.jsx(S,{width:"180px",height:"1rem",className:"mb-2"}),i.jsx(S,{width:"50px",height:"24px",style:{borderRadius:"12px"},className:"mb-3"}),i.jsxs("div",{className:"row gy-4 mb-4",children:[i.jsx("div",{className:"col-lg-4",children:i.jsx(Ne,{labelWidth:"100px"})}),i.jsx("div",{className:"col-lg-4",children:i.jsx(Ne,{labelWidth:"110px"})}),i.jsx("div",{className:"col-lg-4",children:i.jsx(Ne,{labelWidth:"120px"})})]}),i.jsx(st,{width:"150px",className:"mb-4"}),i.jsx(S,{width:"160px",height:"1rem",className:"mb-3"}),i.jsx("div",{className:"mb-4",children:Array.from({length:5}).map((t,e)=>i.jsxs("div",{className:"mb-2",children:[i.jsx(S,{width:"80px",height:"1rem",className:"d-inline-block me-2"}),i.jsx(S,{width:"300px",height:"1rem",className:"d-inline-block"})]},e))})]}),i.jsxs(gt,{children:[i.jsx(S,{width:"180px",height:"1.125rem",className:"mb-3"}),i.jsx(S,{width:"200px",height:"1rem",className:"mb-2"}),i.jsx(S,{width:"50px",height:"24px",style:{borderRadius:"12px"},className:"mb-3"}),i.jsxs("div",{className:"row gy-4 mb-4",children:[i.jsx("div",{className:"col-lg-4",children:i.jsx(Ne,{labelWidth:"160px"})}),i.jsx("div",{className:"col-lg-4",children:i.jsx(Ne,{labelWidth:"170px"})}),i.jsx("div",{className:"col-lg-4",children:i.jsx(Ne,{labelWidth:"80px"})})]}),i.jsx("div",{className:"row gy-4 pt-4 mb-4",children:i.jsxs("div",{className:"col-12",children:[i.jsx(S,{width:"220px",height:"1.125rem",className:"mb-2"}),i.jsxs("div",{className:"input-group mb-2",children:[i.jsx(S,{width:"100%",height:"38px",style:{borderRadius:"4px"}}),i.jsx(S,{width:"50px",height:"38px",style:{borderRadius:"4px"}})]}),i.jsx(S,{width:"400px",height:"0.875rem"})]})}),i.jsx(S,{width:"250px",height:"1rem",className:"mb-2"}),i.jsx(S,{width:"50px",height:"24px",style:{borderRadius:"12px"}})]}),i.jsxs(gt,{children:[i.jsx(S,{width:"150px",height:"1.125rem",className:"mb-3"}),Array.from({length:3}).map((t,e)=>i.jsxs("div",{className:"mb-3",children:[i.jsx(S,{width:"200px",height:"1rem",className:"mb-2"}),i.jsx(S,{width:"50px",height:"24px",style:{borderRadius:"12px"}})]},e))]}),i.jsxs(gt,{children:[i.jsx(S,{width:"90px",height:"1.125rem",className:"mb-3"}),i.jsx(Ne,{labelWidth:"160px"})]}),i.jsx("div",{className:"d-flex justify-content-end gap-4 mb-5",children:i.jsx(st,{width:"80px"})})]})})}),Mie=()=>i.jsx("div",{className:"tab-pane fade show active position-relative",id:"v-pills-webhook",role:"tabpanel","aria-labelledby":"v-pills-webhooks-tab",tabIndex:"0",children:i.jsxs("div",{className:"webhook-setting",children:[i.jsx("div",{className:"d-flex justify-content-between align-items-center gap-3 flex-wrap mb-4",children:i.jsxs("h6",{className:"setting-title mb-3",children:[i.jsx(S,{width:"100px",height:"1.125rem",className:"d-inline-block me-2"}),i.jsx(S,{width:"20px",height:"20px",style:{borderRadius:"50%"},className:"d-inline-block"})]})}),i.jsx("div",{className:"mb-3",children:i.jsx("div",{className:"row g-3",children:Array.from({length:4}).map((t,e)=>i.jsx("div",{className:"col-md-3 col-sm-6",children:i.jsx("div",{className:"card card-block card-stretch card-height overflow-hidden",children:i.jsx("div",{className:"card-body",children:i.jsxs("div",{className:"d-flex align-items-center justify-content-between",children:[i.jsxs("div",{children:[i.jsx(S,{width:"60px",height:"1.5rem",className:"mb-2"}),i.jsx(S,{width:"100px",height:"0.875rem"})]}),i.jsx("div",{className:"card-icon ms-3",children:i.jsx(S,{width:"32px",height:"32px",style:{borderRadius:"50%"}})})]})})})},e))})}),i.jsx("div",{className:"",children:i.jsxs("div",{className:"nav nav-pills nav-pill-card mb-3",role:"tablist",children:[i.jsx("div",{className:"nav-item",role:"presentation",children:i.jsx(S,{width:"120px",height:"38px",style:{borderRadius:"4px"},className:"me-2"})}),i.jsx("div",{className:"nav-item",role:"presentation",children:i.jsx(S,{width:"100px",height:"38px",style:{borderRadius:"4px"},className:"me-2"})}),i.jsx("div",{className:"nav-item",role:"presentation",children:i.jsx(S,{width:"80px",height:"38px",style:{borderRadius:"4px"}})})]})})]})}),Ki={getWebhooks:(t={})=>ve({endpoint:"webhooks",method:"GET",data:t}),getWebhook:t=>ve({endpoint:`webhooks/${t}`,method:"GET"}),createWebhook:t=>ve({endpoint:"webhooks",method:"POST",data:t}),updateWebhook:(t,e)=>ve({endpoint:`webhooks/${t}`,method:"PUT",data:e}),deleteWebhook:t=>ve({endpoint:`webhooks/${t}`,method:"DELETE"}),testWebhook:(t,e={})=>ve({endpoint:`webhooks/${t}/test`,method:"POST",data:e}),getWebhookStats:(t={})=>ve({endpoint:"webhooks/statistics",method:"GET",data:t}),getAvailableEvents:()=>ve({endpoint:"webhooks/events",method:"GET"}),bulkDeleteWebhooks:t=>ve({endpoint:"webhooks/bulk-delete",method:"POST",data:{ids:t}}),updateWebhookStatus:(t,e)=>ve({endpoint:`webhooks/${t}/status`,method:"PATCH",data:{status:e}}),getTableConfig:()=>ve({endpoint:"webhooks/table-config",method:"GET"}),exchangeOAuth2Token:t=>ve({endpoint:"webhooks/oauth2/exchange-token",method:"POST",data:{code:t.code,client_id:t.clientId,client_secret:t.clientSecret,token_url:t.tokenUrl,redirect_uri:t.redirectUri}}),refreshOAuth2Token:t=>ve({endpoint:"webhooks/oauth2/refresh-token",method:"POST",data:{refresh_token:t.refreshToken,client_id:t.clientId,client_secret:t.clientSecret,token_url:t.tokenUrl}}),getWebhookLogs:(t={})=>ve({endpoint:"webhook-logs",method:"GET",data:t}),getWebhookLog:t=>ve({endpoint:`webhook-logs/${t}`,method:"GET"}),deleteWebhookLog:t=>ve({endpoint:`webhook-logs/${t}`,method:"DELETE"}),bulkDeleteWebhookLogs:t=>ve({endpoint:"webhook-logs",method:"DELETE",data:{ids:t}}),getWebhookLogStats:(t={})=>ve({endpoint:"webhook-logs/stats",method:"GET",data:t}),getWebhookLogsByWebhook:(t,e={})=>ve({endpoint:"webhook-logs",method:"GET",data:{webhook_id:t,...e}}),clearOldLogs:(t=30)=>ve({endpoint:"webhook-logs/clear",method:"POST",data:{days:t}}),exportWebhookLogs:(t={})=>ve({endpoint:"webhook-logs/export",method:"GET",data:t})},Hn={all:["webhooks"],lists:()=>[...Hn.all,"list"],list:t=>[...Hn.lists(),{filters:t}],details:()=>[...Hn.all,"detail"],detail:t=>[...Hn.details(),t],stats:()=>[...Hn.all,"stats"],statsList:t=>[...Hn.stats(),t],events:()=>[...Hn.all,"events"],tableConfig:()=>[...Hn.all,"table-config"]},js={all:["webhook-logs"],lists:()=>[...js.all,"list"],list:t=>[...js.lists(),{filters:t}],details:()=>[...js.all,"detail"],detail:t=>[...js.details(),t],stats:()=>[...js.all,"stats"],statsList:t=>[...js.stats(),t]},CP=(t={},e={})=>ft({queryKey:Hn.list(t),queryFn:()=>Ki.getWebhooks(t),enabled:e.enabled!==!1,...e}),Iie=(t,e={})=>ft({queryKey:Hn.detail(t),queryFn:()=>Ki.getWebhook(t),enabled:!!t,...e}),Oie=(t={},e={})=>ft({queryKey:Hn.statsList(t),queryFn:()=>Ki.getWebhookStats(t),enabled:e.enabled!==!1,...e}),Fie=(t={})=>ft({queryKey:Hn.tableConfig(),queryFn:()=>Ki.getTableConfig(),...t}),Lie=(t={})=>{const e=ze();return Le({mutationFn:n=>Ki.createWebhook(n),onSuccess:n=>{e.invalidateQueries({queryKey:Hn.lists()}),e.invalidateQueries({queryKey:Hn.stats()}),e.setQueryData(Hn.detail(n.id),n)},...t})},$ie=(t={})=>{const e=ze();return Le({mutationFn:({id:n,...s})=>Ki.updateWebhook(n,s),onSuccess:(n,s)=>{e.invalidateQueries({queryKey:Hn.lists()}),e.invalidateQueries({queryKey:Hn.stats()}),e.setQueryData(Hn.detail(s.id),n)},...t})},Bie=(t={})=>{const e=ze();return Le({mutationFn:n=>Ki.deleteWebhook(n),onSuccess:(n,s)=>{e.invalidateQueries({queryKey:Hn.lists()}),e.invalidateQueries({queryKey:Hn.stats()}),e.removeQueries({queryKey:Hn.detail(s)})},...t})},qie=(t={})=>{const e=ze();return Le({mutationFn:n=>Ki.testWebhook(n.webhookId,{event_name:n.eventName,payload:n.payload}),onSuccess:(n,s)=>{const a=typeof s=="object"?s.webhookId:s;e.invalidateQueries({queryKey:["webhook-logs"]}),e.setQueryData(Hn.detail(a),l=>({...l,lastTested:new Date().toISOString(),testResult:n}))},...t})},Hie=(t={})=>{const e=ze();return Le({mutationFn:({id:n,status:s})=>Ki.updateWebhookStatus(n,s),onSuccess:(n,s)=>{e.invalidateQueries({queryKey:Hn.lists()}),e.invalidateQueries({queryKey:Hn.stats()}),e.setQueryData(Hn.detail(s.id),n)},...t})},zie=(t={},e={})=>ft({queryKey:js.list(t),queryFn:()=>Ki.getWebhookLogs(t),...e}),Vie=(t={})=>{const e=ze();return Le({mutationFn:n=>Ki.deleteWebhookLog(n),onSuccess:(n,s)=>{e.invalidateQueries({queryKey:js.lists()}),e.invalidateQueries({queryKey:js.stats()}),e.removeQueries({queryKey:js.detail(s)})},...t})},Uie=(t={})=>{const e=ze();return Le({mutationFn:n=>Ki.bulkDeleteWebhookLogs(n),onSuccess:(n,s)=>{e.invalidateQueries({queryKey:js.lists()}),e.invalidateQueries({queryKey:js.stats()}),s.forEach(a=>{e.removeQueries({queryKey:js.detail(a)})})},...t})},Wie=()=>{const[t,e]=f.useState({startDate:null,endDate:null}),n={};t.startDate&&t.endDate&&(n.start_date=t.startDate,n.end_date=t.endDate);const{data:s,isLoading:a,error:l,refetch:o}=Oie(n),d=[{title:r("Activate Webhook","kivicare-clinic-management-system"),value:"0",key:"active_webhooks",icon:"ph-broadcast"},{title:r("Success Rate","kivicare-clinic-management-system"),value:"0%",key:"success_rate",icon:"ph-check-circle"},{title:r("Failed Deliveries","kivicare-clinic-management-system"),value:"0",key:"failed_deliveries",icon:"ph-warning-circle"},{title:r("Events Today","kivicare-clinic-management-system"),value:"0",key:"events_today",icon:"ph-bell"}].map(m=>{if(s?.data&&s?.data[m.key]!==void 0){let u=s?.data[m.key];return m.key==="success_rate"&&(u=`${u}%`),{...m,value:u.toString()}}return m});return a?i.jsx(Mie,{}):i.jsxs("div",{className:"mb-3",children:[l&&i.jsxs("div",{className:"alert alert-danger mb-3",children:[r("Error loading statistics:","kivicare-clinic-management-system")," ",l.message]}),i.jsx("div",{className:"row g-3",children:d.map((m,u)=>i.jsx("div",{className:"col-md-3 col-sm-6",children:i.jsx("div",{className:"card card-block card-stretch card-height overflow-hidden",children:i.jsx("div",{className:"card-body",children:i.jsxs("div",{className:"d-flex align-items-center justify-content-between",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"heading-color counter mb-2 fw-bold",children:a?i.jsx("span",{className:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"}):m.value}),i.jsx("p",{className:"text-body fw-medium mb-0",children:m.title})]}),i.jsx("div",{className:"card-icon ms-3",children:i.jsx("i",{className:`ph ${m.icon} fs-1 text-primary`})})]})})})},u))})]})},Kie=()=>{const{isAddonActive:t}=mt(),e=t("webhooks"),{data:n}=Sn(),s=n?.data?.hideUtilityLinks;return i.jsx("div",{className:"tab-pane fade show active position-relative",id:"v-pills-webhook",role:"tabpanel","aria-labelledby":"v-pills-webhooks-tab",tabIndex:"0",children:i.jsxs("div",{className:e?"webhook-setting":"p-4",children:[!e&&i.jsx(di,{text:r("Upgrade to access Webhooks","kivicare-clinic-management-system"),title:r("Premium Feature","kivicare-clinic-management-system"),icon:"ph-lock",link:"https://codecanyon.net/item/kivicare-webhook-addon/54591262"}),i.jsx("div",{className:"d-flex justify-content-between align-items-center gap-3 flex-wrap mb-4",children:i.jsxs("h6",{className:"setting-title mb-3",children:[r("Webhook","kivicare-clinic-management-system"),s!=="on"&&i.jsx("a",{href:"https://documentation.iqonic.design/kivicare-wordpress/kivicare-webhook/webhook-documentation/getting-started-webhook-documentation/what-is-kivicare-webhook-addon/",target:"_blank",rel:"noopener noreferrer",className:"ms-2",children:i.jsx("i",{className:"ph ph-question align-middle h5 text-primary"})})]})}),e&&i.jsx(Wie,{}),i.jsxs("div",{className:"",children:[i.jsxs(Mn,{variant:"pills",className:"nav-pill-card mb-3",children:[i.jsx(Mn.Item,{children:i.jsx(Mn.Link,{as:lc,to:"/setting/webhooks/configuration",children:r("Configuration","kivicare-clinic-management-system")})}),i.jsx(Mn.Item,{children:i.jsx(Mn.Link,{as:lc,to:"/setting/webhooks/events-log",children:r("Events Log","kivicare-clinic-management-system")})}),i.jsx(Mn.Item,{children:i.jsx(Mn.Link,{as:lc,to:"/setting/webhooks/testing",children:r("Testing","kivicare-clinic-management-system")})})]}),i.jsx("div",{className:"kc-tab-content",role:"tabpanel",children:e?i.jsx(fs,{}):null})]})]})})},Gie=({stepNumber:t,children:e})=>i.jsx("div",{className:"d-flex flex-column items-list",children:i.jsxs("div",{className:"d-flex align-items-md-center flex-md-row flex-column column-gap-3 row-gap-2",children:[i.jsxs("span",{className:"flex-shrink-0 h6 m-0 font-size-14",children:[r("Step","kivicare-clinic-management-system")," ",t,":"]}),i.jsx("span",{className:"font-size-14 heading-color",children:e})]})}),Yie=()=>{const{isAddonActive:t}=mt(),e=t("telemed"),{data:n,isLoading:s,error:a}=kn("settings","zoom-telemed",{},{enabled:e}),l=un("settings","zoom-telemed"),{control:o,handleSubmit:c,watch:d,reset:m,setValue:u,formState:{errors:h}}=en({defaultValues:{auth_type:"none",client_id:"",client_secret:"",server_to_server_enabled:!1},shouldUnregister:!1}),[p,g]=f.useState(!1),v=d("auth_type");d("server_to_server_enabled");const x=w=>{u("auth_type",w),w==="oauth"&&u("server_to_server_enabled",!1)};f.useEffect(()=>{if(n?.status&&n?.data){const w=n.data,j={auth_type:w.auth_type||"none",client_id:w.client_id||"",client_secret:w.client_secret||""};m(j)}},[n,m]);const y=w=>{g(!0);const T={auth_type:w.auth_type,client_id:w.client_id,client_secret:w.client_secret,server_to_server_enabled:w.server_to_server_enabled?"Yes":"No"};l.mutateAsync(T).then(j=>{console.log(j),j.status===!0?Ze.fire({icon:"success",title:r("Success","kivicare-clinic-management-system"),text:r(j.message||"Zoom Telemed settings saved successfully","kivicare-clinic-management-system"),confirmButtonText:r("Ok","kivicare-clinic-management-system")}):Ze.fire({icon:"error",title:r("Error","kivicare-clinic-management-system"),text:r(j.message||"Failed to save settings","kivicare-clinic-management-system"),confirmButtonText:r("Ok","kivicare-clinic-management-system")})}).finally(()=>{g(!1)})},b=[{name:"client_id",label:r("Zoom Telemed Client ID","kivicare-clinic-management-system"),placeholder:r("Enter your Zoom Client ID","kivicare-clinic-management-system"),isRequired:!0},{name:"client_secret",label:r("Zoom Telemed Client Secret","kivicare-clinic-management-system"),placeholder:r("Enter your Zoom Client Secret","kivicare-clinic-management-system"),isRequired:!0}],k=[{step:1,content:i.jsxs(i.Fragment,{children:[r("Sign up or Sign in here","kivicare-clinic-management-system")," ",i.jsx("a",{href:"https://marketplace.zoom.us/",target:"_blank",className:"fw-semibold",rel:"noreferrer",children:r("Zoom market Place portal","kivicare-clinic-management-system")})]})},{step:2,content:i.jsxs(i.Fragment,{children:[r("Click/Hover on Develop button at the right in navigation bar and click on build app","kivicare-clinic-management-system")," ",i.jsx("a",{href:"https://marketplace.zoom.us/develop/create",target:"_blank",className:"fw-semibold",rel:"noreferrer",children:r("Create app","kivicare-clinic-management-system")})]})},{step:3,content:r("Select OAuth and click Create","kivicare-clinic-management-system")},{step:4,content:r("Fill the mandatory information and In the App credentials tag you can see Client ID, Client secret And Redirect URL for OAuth.","kivicare-clinic-management-system")},{step:5,content:r("Copy and Paste Client ID, Client secret And Redirect URL here and click on save button and you are ready to go.","kivicare-clinic-management-system")}];if(a){let w;typeof a=="string"?w=a:a?.response?.data?.message?w=a.response.data.message:a?.message?w=a.message:w=r("An unknown error occurred","kivicare-clinic-management-system"),Ze.fire({icon:"error",title:r("Error","kivicare-clinic-management-system"),text:r(w,"kivicare-clinic-management-system"),confirmButtonText:r("Ok","kivicare-clinic-management-system")})}return e&&(p||s)?i.jsx(Pie,{}):i.jsx("div",{children:i.jsx("div",{className:"tab-pane fade show active",id:"v-pills-zoom-telemed",role:"tabpanel","aria-labelledby":"v-pills-zoom-telemed-tab",tabIndex:"0",children:i.jsxs("div",{className:`position-relative zoom-telemed-setting${e?"":" p-4"}`,children:[!e&&i.jsx(di,{title:r("Available In Telemed AddOn","kivicare-clinic-management-system"),link:"https://codecanyon.net/item/kivicare-telemed-addon/29363726?s_rank=9"}),i.jsxs("h6",{className:"setting-title mb-3",children:[r("Zoom Telemed Configuration","kivicare-clinic-management-system")," ",i.jsx("a",{href:"https://documentation.iqonic.design/kivicare-wordpress/kivicare-telemed-addon/documentation-telemed/getting-started-telemed-addon/what-is-kivicare-telemedicine-addon/",target:"_blank",rel:"noopener noreferrer",className:"ms-1",children:i.jsx("i",{className:"ph ph-question align-middle h5 text-primary"})})]}),(!p||!s)&&i.jsxs("form",{onSubmit:c(y),children:[i.jsx("div",{className:"card mb-4",children:i.jsxs("div",{className:"card-body p-3",children:[i.jsx("h5",{className:"mb-3",children:r("Zoom OAuth Configuration","kivicare-clinic-management-system")}),i.jsx("div",{className:"p-0 form-check form-switch",children:i.jsx(ye,{name:"auth_type",control:o,render:({field:w})=>i.jsx(i.Fragment,{children:i.jsxs("div",{className:"d-flex justify-content-between align-items-center gap-3 p-0 form-switch custom-switch-xl",children:[i.jsx("label",{className:"form-check-label",htmlFor:"zoomOAuthSwitch",children:r("Enable Zoom OAuth Configuration","kivicare-clinic-management-system")}),i.jsx("input",{className:"form-check-input",type:"checkbox",id:"zoomOAuthSwitch",checked:w.value==="oauth",onChange:T=>x(T.target.checked?"oauth":"none"),disabled:p||s})]})})})}),v==="oauth"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"row my-4",children:[b.map(w=>i.jsx("div",{className:"col-lg-4",children:i.jsx("div",{className:"mb-3",children:i.jsx(ye,{name:w.name,control:o,rules:{required:w.isRequired?`${w.label} is required`:!1},render:({field:T})=>i.jsxs(i.Fragment,{children:[i.jsxs("label",{htmlFor:T.name,className:"form-label",children:[w.label,w.isRequired&&i.jsx("span",{className:"input-field-required text-danger ms-1",children:"*"})]}),i.jsx("input",{type:"text",className:`form-control${h[w.name]?" is-invalid":""}`,id:T.name,name:T.name,placeholder:w.placeholder,value:T.value,onChange:T.onChange}),h[w.name]&&i.jsx("div",{className:"invalid-feedback",children:h[w.name].message})]})})})},w.name)),i.jsx("div",{className:"col-lg-4",children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{className:"form-label",children:r("Redirect URL","kivicare-clinic-management-system")}),i.jsxs("div",{className:"input-group",children:[i.jsx("input",{type:"text",className:"form-control",value:n?.data?.redirect_url||"",readOnly:!0,disabled:!0}),i.jsx("button",{type:"button",className:"btn btn-primary",onClick:()=>navigator.clipboard.writeText(n?.data?.redirect_url||""),children:i.jsx("i",{className:"ph ph-copy"})})]}),i.jsx("small",{className:"text-muted",children:r("Add this URL to your Zoom app's redirect URLs","kivicare-clinic-management-system")})]})})]}),i.jsx("h6",{className:"text-secondary font-size-14 mt-4",children:r("Guide to setup Zoom Telemed with OAuth","kivicare-clinic-management-system")}),i.jsx("div",{className:"bg-body p-3 rounded",children:k.map(w=>i.jsx(Gie,{stepNumber:w.step,children:w.content},w.step))})]})]})}),i.jsx("div",{className:"card",children:i.jsxs("div",{className:"card-body p-3",children:[i.jsx("h5",{className:"mb-3",children:r("Zoom Server To Server Configuration","kivicare-clinic-management-system")}),i.jsx("div",{className:"p-0 form-check form-switch",children:i.jsx(ye,{name:"auth_type",control:o,render:({field:w})=>i.jsx(i.Fragment,{children:i.jsxs("div",{className:"d-flex justify-content-between align-items-center gap-3 p-0 form-switch custom-switch-xl",children:[i.jsx("label",{className:"form-check-label",htmlFor:"zoomServerSwitch",children:r("Enable Zoom Server To Server Configuration","kivicare-clinic-management-system")}),i.jsx("input",{className:"form-check-input",type:"checkbox",id:"zoomServerSwitch",checked:w.value==="server-to-server",onChange:T=>x(T.target.checked?"server-to-server":"none"),disabled:p||s})]})})})}),v==="server-to-server"&&i.jsx("div",{className:"alert alert-info mb-4 bg-info-subtle",children:r("After enabling this, each doctor must configure their Server-to-Server in their own settings","kivicare-clinic-management-system")})]})}),i.jsx("div",{className:"d-flex align-items-center justify-content-end gap-3 mb-5 mt-4",children:i.jsx("button",{type:"submit",className:"btn btn-primary",disabled:p,children:p?i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),r("Saving...","kivicare-clinic-management-system")]}):r("Save","kivicare-clinic-management-system")})})]})]})})})},PC=()=>i.jsx("div",{className:"tab-pane fade show active",id:"v-pills-listings",role:"tabpanel","aria-labelledby":"v-pills-listings-tab",tabIndex:"0",children:i.jsx("div",{className:"add-listing-setting",children:i.jsxs("form",{children:[i.jsx(gt,{children:i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-lg-4",children:i.jsxs("div",{className:"form-group",children:[i.jsx(S,{width:"50px",height:"1rem",className:"mb-2"}),i.jsx(S,{width:"100%",height:"38px",style:{borderRadius:"4px"}})]})}),i.jsx("div",{className:"col-lg-4",children:i.jsxs("div",{className:"form-group",children:[i.jsx(S,{width:"40px",height:"1rem",className:"mb-2"}),i.jsx(S,{width:"100%",height:"38px",style:{borderRadius:"4px"}})]})}),i.jsx("div",{className:"col-lg-4",children:i.jsxs("div",{className:"form-group",children:[i.jsx(S,{width:"50px",height:"1rem",className:"mb-2"}),i.jsx(S,{width:"100%",height:"38px",style:{borderRadius:"4px"}})]})})]})}),i.jsxs("div",{className:"d-flex justify-content-end flex-wrap row-gap-2 column-gap-4 mb-5 mt-4",children:[i.jsx(st,{width:"70px"}),i.jsx(st,{width:"80px"})]})]})})}),_P=()=>i.jsx("div",{className:"appointment-setting-form",children:i.jsx("div",{className:"tab-pane fade show active",id:"v-pills-appointment-setting",role:"tabpanel","aria-labelledby":"v-pills-appointment-settings-tab",tabIndex:"0",children:i.jsxs("div",{className:"appointment-setting",children:[i.jsxs("h6",{className:"setting-title mb-3",children:[i.jsx(S,{width:"280px",height:"1.25rem",className:"d-inline-block me-2"}),i.jsx(S,{width:"20px",height:"20px",style:{borderRadius:"50%"},className:"d-inline-block"})]}),i.jsxs(gt,{children:[i.jsx(S,{width:"180px",height:"1rem",className:"mb-2"}),i.jsx(S,{width:"50px",height:"24px",style:{borderRadius:"12px"},className:"mb-3"}),i.jsxs("div",{className:"row gy-4 mt-2",children:[i.jsx("div",{className:"col-lg-6 mt-2",children:i.jsx(Ne,{labelWidth:"160px"})}),i.jsx("div",{className:"col-lg-6 mt-2",children:i.jsx(Ne,{labelWidth:"150px"})})]}),i.jsx(S,{width:"100%",height:"0.875rem",className:"mt-2"}),i.jsx(S,{width:"80%",height:"0.875rem"})]}),i.jsxs(gt,{children:[i.jsx(S,{width:"200px",height:"1rem",className:"mb-2"}),i.jsx(S,{width:"50px",height:"24px",style:{borderRadius:"12px"}})]}),i.jsxs(gt,{children:[i.jsx(S,{width:"140px",height:"1.125rem",className:"mb-3"}),i.jsx(S,{width:"120px",height:"1rem",className:"mb-2"}),i.jsx(S,{width:"50px",height:"24px",style:{borderRadius:"12px"},className:"mb-3"}),i.jsx(S,{width:"160px",height:"1rem",className:"mb-2"}),i.jsx(S,{width:"50px",height:"24px",style:{borderRadius:"12px"},className:"mb-3"}),i.jsx(S,{width:"180px",height:"1rem",className:"mb-2"}),i.jsx(S,{width:"50px",height:"24px",style:{borderRadius:"12px"},className:"mb-3"}),i.jsx(Ne,{labelWidth:"80px"})]}),i.jsxs(gt,{children:[i.jsx(S,{width:"140px",height:"1.125rem",className:"mb-3"}),i.jsx(S,{width:"160px",height:"1rem",className:"mb-2"}),i.jsx(S,{width:"50px",height:"24px",style:{borderRadius:"12px"}})]}),i.jsxs(gt,{children:[i.jsx(S,{width:"180px",height:"1.125rem",className:"mb-3"}),i.jsx(S,{width:"100%",height:"0.875rem",className:"mb-2"}),i.jsx(S,{width:"90%",height:"0.875rem",className:"mb-3"}),i.jsx(S,{width:"160px",height:"1rem",className:"mb-2"}),i.jsx(S,{width:"50px",height:"24px",style:{borderRadius:"12px"},className:"mt-3"}),i.jsx(Ne,{labelWidth:"80px"})]}),i.jsx("div",{className:"d-flex justify-content-end gap-4 mb-5",children:i.jsx(st,{width:"80px",height:"38px"})})]})})}),SP=()=>i.jsxs("div",{className:"permission-setting p-4 position-relative overflow-hidden z-0",children:[i.jsxs("h6",{className:"setting-title mb-3",children:[i.jsx(S,{width:"160px",height:"1.25rem",className:"d-inline-block me-2"}),i.jsx(S,{width:"20px",height:"20px",style:{borderRadius:"50%"},className:"d-inline-block"})]}),i.jsxs("div",{className:"permission-setting-tabs",children:[i.jsx("div",{className:"tab-nav-wrapper",children:i.jsx("ul",{className:"nav nav-pills nav-pill-card mb-4",role:"tablist",style:{flexWrap:"nowrap",minWidth:"max-content"},children:Array.from({length:5}).map((t,e)=>i.jsx("li",{className:"nav-item",role:"presentation",children:i.jsx(S,{width:"100px",height:"36px",style:{borderRadius:"4px"},className:"me-2"})},e))})}),i.jsx("div",{className:"card",children:i.jsx("div",{className:"card-body",children:i.jsx("div",{className:"tab-content",children:i.jsx("div",{className:"tab-pane fade show active",role:"tabpanel",children:i.jsxs("div",{className:"module-tabs-container",children:[i.jsx("div",{className:"tab-nav-wrapper",children:i.jsx("ul",{className:"nav nav-pills nav-pill-card mb-4",role:"tablist",style:{flexWrap:"nowrap",minWidth:"max-content"},children:Array.from({length:15}).map((t,e)=>i.jsx("li",{className:"nav-item",role:"presentation",children:i.jsx(S,{width:"120px",height:"36px",style:{borderRadius:"4px"},className:"me-2"})},e))})}),i.jsx("div",{className:"tab-content mt-2",style:{overflowX:"hidden"},children:i.jsx("div",{className:"tab-pane fade show active",role:"tabpanel",children:i.jsx("div",{className:"permission-switches",children:Array.from({length:12}).map((t,e)=>i.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-3",children:[i.jsxs("div",{className:"d-flex align-items-center gap-3",children:[i.jsx(S,{width:"200px",height:"1rem"}),i.jsx(S,{width:"60px",height:"24px",style:{borderRadius:"12px"}})]}),i.jsx(S,{width:"50px",height:"20px",style:{borderRadius:"10px"}})]},e))})})})]})})})})}),i.jsx("div",{className:"d-flex align-items-center justify-content-end gap-3 mb-5 mt-4",children:i.jsx(st,{width:"80px",height:"38px"})})]})]}),EP=()=>i.jsx("div",{children:i.jsx("div",{className:"tab-pane fade show active position-relative overflow-hidden z-0",id:"v-pills-sidebar-setting",children:i.jsxs("div",{className:"sidebar-setting p-4",children:[i.jsx("h6",{className:"setting-title mb-3",children:i.jsx(S,{width:"160px",height:"1.25rem"})}),i.jsx("ul",{className:"nav nav-pills nav-pill-card mb-4",children:Array.from({length:5}).map((t,e)=>i.jsx("li",{className:"nav-item",children:i.jsx(S,{width:"120px",height:"36px",style:{borderRadius:"4px"},className:"me-2"})},e))}),i.jsx("div",{className:"d-flex justify-content-end mb-3",children:i.jsxs("div",{children:[i.jsx(S,{width:"100px",height:"38px",style:{borderRadius:"4px"},className:"me-2"}),i.jsx(S,{width:"90px",height:"38px",style:{borderRadius:"4px"}})]})}),i.jsxs("div",{className:"sidebar-items bg-gray-900",children:[i.jsxs("div",{className:"row mb-2 bg-primary mx-0",children:[i.jsx("div",{className:"col-md-1 d-flex justify-content-center align-items-center",children:i.jsx("div",{className:"rounded px-3 py-2",children:i.jsx(S,{width:"40px",height:"1.125rem",className:"bg-white"})})}),i.jsx("div",{className:"col-md-3 d-flex justify-content-center align-items-center",children:i.jsx("div",{className:"rounded px-3 py-2",children:i.jsx(S,{width:"50px",height:"1.125rem",className:"bg-white"})})}),i.jsx("div",{className:"col-md-4 d-flex justify-content-center align-items-center",children:i.jsx("div",{className:"rounded px-3 py-2",children:i.jsx(S,{width:"35px",height:"1.125rem",className:"bg-white"})})}),i.jsx("div",{className:"col-md-3 d-flex justify-content-center align-items-center",children:i.jsx("div",{className:"rounded px-3 py-2",children:i.jsx(S,{width:"35px",height:"1.125rem",className:"bg-white"})})}),i.jsx("div",{className:"col-md-1 d-flex justify-content-center align-items-center",children:i.jsx("div",{className:"rounded px-3 py-2",children:i.jsx(S,{width:"50px",height:"1.125rem",className:"bg-white"})})})]}),Array.from({length:15}).map((t,e)=>i.jsx("div",{style:{paddingBlock:"10px",display:"flex",alignItems:"center",borderBottom:"1px var(--bs-border-style) var(--bs-border-color)"},children:i.jsxs("div",{className:"row",style:{width:"100%"},children:[i.jsx("div",{className:"col-md-1 d-flex align-items-center justify-content-center",children:i.jsx(S,{width:"20px",height:"20px"})}),i.jsx("div",{className:"col-md-3",children:i.jsx(S,{width:"100%",height:"38px",style:{borderRadius:"4px"}})}),i.jsx("div",{className:"col-md-4",children:i.jsx(S,{width:"100%",height:"38px",style:{borderRadius:"4px"}})}),i.jsx("div",{className:"col-md-3",children:i.jsx(S,{width:"100%",height:"38px",style:{borderRadius:"4px"}})}),i.jsx("div",{className:"col-md-1 d-flex align-items-center",children:i.jsx(S,{width:"24px",height:"24px"})})]})},e))]}),i.jsx("div",{className:"d-flex justify-content-end mt-3",children:i.jsxs("div",{children:[i.jsx(S,{width:"130px",height:"38px",style:{borderRadius:"4px"},className:"me-2"}),i.jsx(S,{width:"70px",height:"38px",style:{borderRadius:"4px"}})]})})]})})}),TP=()=>i.jsx("div",{className:"tab-pane fade show active",id:"v-pills-patient-setting",role:"tabpanel","aria-labelledby":"v-pills-patient-setting-tab",tabIndex:"0",children:i.jsxs("div",{className:"patient-setting",children:[i.jsxs("div",{className:"d-flex align-items-center gap-2 mb-3",children:[i.jsx(S,{width:"180px",height:"1.5rem"}),i.jsx(S,{width:"1rem",height:"1rem",style:{borderRadius:"50%"}})]}),i.jsx("div",{className:"card",children:i.jsxs("div",{className:"card-body p-3",children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-3",children:[i.jsx(S,{width:"200px",height:"1rem"}),i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsx(S,{width:"50px",height:"1rem"}),i.jsx(S,{width:"40px",height:"20px",style:{borderRadius:"10px"}})]})]}),i.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-3",children:[i.jsx(S,{width:"250px",height:"1rem"}),i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsx(S,{width:"50px",height:"1rem"}),i.jsx(S,{width:"40px",height:"20px",style:{borderRadius:"10px"}})]})]}),i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-lg-6",children:i.jsx(Ne,{labelWidth:"60px",inputHeight:"38px"})}),i.jsx("div",{className:"col-lg-6",children:i.jsx(Ne,{labelWidth:"70px",inputHeight:"38px"})})]}),i.jsx("div",{className:"d-flex justify-content-end flex-wrap gap-3 mt-5",children:i.jsx(S,{width:"80px",height:"38px",style:{borderRadius:"4px"}})})]})})]})}),Qie=()=>i.jsxs(ko,{fluid:!0,children:[i.jsxs("div",{className:"mb-4",children:[i.jsx(S,{width:"200px",height:"2rem",className:"mb-2"}),i.jsx(S,{width:"400px",height:"1rem"})]}),i.jsxs(Yn,{className:"g-4",children:[i.jsx(Et,{lg:6,children:i.jsxs(_t,{children:[i.jsxs(_t.Header,{children:[i.jsx(_t.Title,{className:"d-flex align-items-center",children:i.jsx(S,{width:"150px",height:"1.5rem"})}),i.jsx(_t.Subtitle,{className:"text-muted small",children:i.jsx(S,{width:"250px",height:"0.875rem"})})]}),i.jsx(_t.Body,{children:i.jsxs(Yn,{className:"g-3",children:[i.jsx(Et,{xs:12,children:i.jsxs("div",{className:"mb-3",children:[i.jsx(S,{width:"100px",height:"1rem",className:"mb-2"}),i.jsx(S,{width:"100%",height:"38px",style:{borderRadius:"4px"}})]})}),i.jsx(Et,{xs:12,children:i.jsxs("div",{className:"mb-3",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[i.jsx(S,{width:"100px",height:"1rem"}),i.jsx(st,{width:"100px",height:"31px"})]}),i.jsx(S,{width:"100%",height:"250px",style:{borderRadius:"4px"}})]})}),i.jsx(Et,{xs:12,children:i.jsxs("div",{className:"d-flex gap-2",children:[i.jsx(st,{width:"100%",height:"38px",className:"flex-fill"}),i.jsx(st,{width:"100px",height:"38px"})]})})]})})]})}),i.jsx(Et,{lg:6,children:i.jsxs(_t,{children:[i.jsxs(_t.Header,{children:[i.jsx(_t.Title,{children:i.jsx(S,{width:"150px",height:"1.5rem"})}),i.jsx(_t.Subtitle,{className:"text-muted",children:i.jsx(S,{width:"300px",height:"0.875rem"})})]}),i.jsx(_t.Body,{children:i.jsx("div",{style:{maxHeight:"450px",overflowY:"hidden"},children:i.jsx("div",{className:"d-grid gap-3",children:[1,2,3].map(t=>i.jsxs("div",{children:[i.jsx(S,{width:"120px",height:"1rem",className:"mb-2 pb-1"}),i.jsx("div",{className:"d-grid gap-2 mb-3",children:[1,2].map(e=>i.jsx("div",{className:"p-3 border rounded",children:i.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[i.jsxs("div",{className:"flex-grow-1",children:[i.jsx(S,{width:"150px",height:"1rem",className:"mb-1"}),i.jsx(S,{width:"100px",height:"0.75rem"})]}),i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsx(S,{width:"50px",height:"1.25rem",style:{borderRadius:"10px"}}),i.jsx(S,{width:"16px",height:"16px"})]})]})},e))})]},t))})})})]})})]}),i.jsx(Yn,{className:"mt-4",children:i.jsx(Et,{xs:12,children:i.jsxs(_t,{children:[i.jsxs(_t.Header,{children:[i.jsx(_t.Title,{children:i.jsx(S,{width:"120px",height:"1.5rem"})}),i.jsx(_t.Subtitle,{className:"text-muted",children:i.jsx(S,{width:"250px",height:"0.875rem"})})]}),i.jsx(_t.Body,{children:i.jsxs("div",{className:"text-center py-5",children:[i.jsx(S,{width:"60px",height:"60px",className:"d-block mx-auto mb-3",style:{borderRadius:"50%"}}),i.jsx(S,{width:"300px",height:"1rem",className:"mx-auto"})]})})]})})})]}),of=()=>i.jsxs("div",{className:"manage-email-template-setting",children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between gap-3 mb-4",children:[i.jsx(S,{width:"200px",height:"1.5rem"}),i.jsx(S,{width:"80px",height:"2rem",style:{borderRadius:"4px"}})]}),i.jsx("div",{className:"card",children:i.jsx("div",{className:"card-body",children:i.jsxs("div",{className:"row gy-3",children:[i.jsxs("div",{className:"form-group",children:[i.jsx(S,{width:"120px",height:"1.25rem",className:"mb-2"}),i.jsx(S,{width:"100%",height:"2.5rem",style:{borderRadius:"4px"}})]}),i.jsxs("div",{className:"form-group",children:[i.jsx(S,{width:"250px",height:"1.25rem",className:"mb-3"}),i.jsx("div",{className:"d-flex flex-wrap align-items-center gap-3",children:Array.from({length:6}).map((t,e)=>i.jsx(S,{width:"100px",height:"2rem",style:{borderRadius:"4px"}},e))})]}),i.jsxs("div",{className:"form-group",children:[i.jsx(S,{width:"120px",height:"1.25rem",className:"mb-2"}),i.jsx(S,{width:"100%",height:"200px",style:{borderRadius:"4px"}})]})]})})}),i.jsx("div",{className:"d-flex justify-content-end mt-4",children:i.jsx(S,{width:"80px",height:"2.5rem",style:{borderRadius:"4px"}})})]}),Zie=[{key:"doctor",label:r("Default status when doctor register","kivicare-clinic-management-system")},{key:"receptionist",label:r("Default status when Receptionist register","kivicare-clinic-management-system")},{key:"patient",label:r("Default status when patient register","kivicare-clinic-management-system")}],Xie={kiviCare_doctor:"doctor",kiviCare_receptionist:"receptionist",kiviCare_patient:"patient"},MC=[{key:Nx(),label:r("Clinic Admin","kivicare-clinic-management-system")},{key:oc(),label:r("Doctor","kivicare-clinic-management-system")},{key:cc(),label:r("Receptionist","kivicare-clinic-management-system")},{key:ol(),label:r("Patient","kivicare-clinic-management-system")}],Jie="https://www.google.com/recaptcha/admin",Rd={hideUtilityLinks:"off",currencyPrefix:"",currencyPostfix:"",countryCode:"us",countryDialCode:"+44",status:{doctor:"off",receptionist:"off",patient:"on"},role:{[oc()]:"on",[cc()]:"on",[ol()]:"on"},enableRecaptcha:"off",recaptchaSiteKey:"",recaptchaSecretKey:"",showOtherGender:"on",loginRedirects:{[Nx()]:"",[oc()]:"",[cc()]:"",[ol()]:""},logoutRedirects:{[Nx()]:"",[oc()]:"",[cc()]:"",[ol()]:""},allowEncounterEdit:"off"},ese=({setting:t,registrationSetting:e,watchedRoles:n,control:s,errors:a,isLoading:l,getBadge:o})=>{const c=n?.[t.key]==="on",d=m=>m===!0||m==="on"?"on":"off";return i.jsxs("div",{className:"d-flex flex-column row-gap-2",children:[i.jsx(ye,{name:`role.${t.key}`,control:s,render:({field:m})=>i.jsx(cn,{label:t.label,checked:m.value,onChange:u=>{const h=d(u);m.onChange(h)},badge:o(m.value),disabled:l,error:a.role?.[t.key]})}),i.jsx("div",{className:`kivi-collapse ${c&&e?"show":""}`,children:c&&e&&i.jsx("div",{className:"ms-4",children:i.jsx(ye,{name:`status.${e.key}`,control:s,render:({field:m})=>i.jsx(cn,{label:e.label,checked:m.value,onChange:u=>{const h=d(u);m.onChange(h)},badge:o(m.value),disabled:l,error:a.status?.[e.key]})})})})]})},tse=({error:t})=>(f.useEffect(()=>{if(t){let e;typeof t=="string"?e=t:t?.response?.data?.message?e=t.response.data.message:t?.message?e=t.message:e=r("An unknown error occurred","kivicare-clinic-management-system"),Ze.fire({icon:"error",title:r("Error","kivicare-clinic-management-system"),text:r(e,"kivicare-clinic-management-system"),confirmButtonText:r("Ok","kivicare-clinic-management-system")})}},[t]),null),nse=()=>{const[t,e]=f.useState(""),[n,s]=f.useState(!1),a=f.useRef(null),{data:l,isLoading:o,error:c}=kn("settings","general",{},{enabled:!0}),d=un("settings","general"),{data:m}=Sn(),u=m?.data?.hideUtilityLinks,{control:h,handleSubmit:p,watch:g,setValue:v,reset:x,formState:{errors:y}}=en({defaultValues:Rd}),b=g("enableRecaptcha"),k=g("role"),w=f.useMemo(()=>[{key:oc(),label:r("Doctor Role","kivicare-clinic-management-system")},{key:cc(),label:r("Receptionist Role","kivicare-clinic-management-system")},{key:ol(),label:r("Patient Role","kivicare-clinic-management-system")}],[]),T=f.useCallback(N=>({text:N==="on"?r("Active","kivicare-clinic-management-system"):r("Inactive","kivicare-clinic-management-system"),className:N==="on"?"text-primary bg-primary-subtle":"text-secondary bg-secondary-subtle"}),[]),j=f.useCallback(N=>{const A={...N};if(!A.role)A.role={...Rd.role};else{const E={...Rd.role};Object.keys(E).forEach(I=>{if(A.role[I]===void 0||A.role[I]===null)A.role[I]=E[I];else{const M=A.role[I];A.role[I]=M===!0||M==="on"?"on":"off"}})}if(!A.status)A.status={...Rd.status};else{const E={...Rd.status};Object.keys(E).forEach(I=>{if(A.status[I]===void 0||A.status[I]===null)A.status[I]=E[I];else{const M=A.status[I];A.status[I]=M===!0||M==="on"?"on":"off"}})}return["hideUtilityLinks","enableRecaptcha","showOtherGender","allowEncounterEdit"].forEach(E=>{if(A[E]!==void 0){const I=A[E];A[E]=I===!0||I==="on"?"on":"off"}}),(!A.countryCode||A.countryCode===null)&&(A.countryCode="us"),(!A.countryDialCode||A.countryDialCode===null)&&(A.countryDialCode="+44"),(!A.currencyPrefix||A.currencyPrefix===null)&&(A.currencyPrefix=""),(!A.currencyPostfix||A.currencyPostfix===null)&&(A.currencyPostfix=""),(!A.recaptchaSiteKey||A.recaptchaSiteKey===null)&&(A.recaptchaSiteKey=""),(!A.recaptchaSecretKey||A.recaptchaSecretKey===null)&&(A.recaptchaSecretKey=""),A},[]);f.useEffect(()=>{if(l?.data){const N=j(l.data);x(N)}},[l,x,j]);const D=f.useCallback(async N=>{try{e(""),s(!0);const A=j(N);if(!Object.values(A.role||{}).some(M=>M==="on")){e(r("At least one user registration role must be enabled.","kivicare-clinic-management-system")),a.current?.scrollIntoView({behavior:"smooth"}),a.current?.classList.add("highlight-section"),setTimeout(()=>{a.current?.classList.remove("highlight-section")},2e3);return}if(A.enableRecaptcha==="on"&&(!A.recaptchaSiteKey.trim()||!A.recaptchaSecretKey.trim())){e(r("Both Site Key and Secret Key are required when reCAPTCHA is enabled.","kivicare-clinic-management-system"));return}const E=await d.mutateAsync(A),I={icon:E.status?"success":"error",title:r(E.status?"Success":"Error","kivicare-clinic-management-system"),text:r(E.message,"kivicare-clinic-management-system"),confirmButtonText:r("Ok","kivicare-clinic-management-system")};Ze.fire(I),E.status?e(""):e(E.message)}catch(A){console.error("Failed to save settings:",A),Ze.fire({icon:"error",title:r("Error","kivicare-clinic-management-system"),text:r("Failed to save settings. Please try again.","kivicare-clinic-management-system"),confirmButtonText:r("Ok","kivicare-clinic-management-system")})}finally{s(!1)}},[d,j]),_=f.useCallback(N=>{const A=N?.iso2||"us",P=N?.dialCode?`+${N.dialCode}`:"+1";v("countryCode",A),v("countryDialCode",P)},[v]);return c?i.jsx(tse,{error:c}):o?i.jsx(fP,{}):i.jsx("div",{className:"row",children:i.jsx("div",{className:"col-12",children:i.jsx("form",{onSubmit:p(D),children:i.jsxs("div",{className:"row",children:[i.jsx("div",{className:"col-12",children:i.jsx(rr,{title:r("Utility Links Setting","kivicare-clinic-management-system"),children:i.jsx(ye,{name:"hideUtilityLinks",control:h,render:({field:N})=>i.jsx(cn,{label:r("Hide all utility links : Request features | Get Help | Documentation. ","kivicare-clinic-management-system"),checked:N.value,onChange:A=>{const P=A===!0||A==="on"?"on":"off";N.onChange(P)},disabled:n,error:y.hideUtilityLinks})})})}),i.jsx("div",{className:"col-12",children:i.jsx(rr,{title:r("Currency Setting","kivicare-clinic-management-system"),children:i.jsxs("div",{className:"row",children:[i.jsx("div",{className:"col-md-6",children:i.jsx(ye,{name:"currencyPrefix",control:h,render:({field:N})=>i.jsx(Ht,{label:r("Currency Prefix","kivicare-clinic-management-system"),value:N.value,onChange:N.onChange,placeholder:r("Enter currency prefix","kivicare-clinic-management-system"),disabled:n,error:y.currencyPrefix})})}),i.jsx("div",{className:"col-md-6",children:i.jsx(ye,{name:"currencyPostfix",control:h,render:({field:N})=>i.jsx(Ht,{label:r("Currency Postfix","kivicare-clinic-management-system"),value:N.value,onChange:N.onChange,placeholder:r("Enter currency postfix","kivicare-clinic-management-system"),disabled:n,error:y.currencyPostfix})})})]})})}),i.jsx("div",{className:"col-12",children:i.jsx(rr,{title:r("Country Code Setting","kivicare-clinic-management-system"),children:i.jsxs("div",{className:"row d-flex align-items-center",children:[i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{className:"form-label",children:r("Select Country","kivicare-clinic-management-system")}),i.jsx(ye,{name:"countryCode",control:h,render:({field:N})=>{const A=typeof N.value=="string"&&N.value.length===2?N.value.toLowerCase():"us";return i.jsx("div",{className:"react-international-phone",children:i.jsx(jI,{selectedCountry:A,onSelect:P=>{N.onChange(P.iso2),_(P)},dropdownStyleProps:{className:"country-selector-dropdown"},buttonStyleProps:{className:"country-selector-button"}})})}}),y.countryCode&&i.jsx("div",{className:"text-danger",children:y.countryCode.message})]})}),i.jsx("div",{className:"col-md-6",children:i.jsx(ye,{name:"countryDialCode",control:h,render:({field:N})=>i.jsx(Ht,{label:r("Country Dial Code","kivicare-clinic-management-system"),value:N.value||"+44",onChange:A=>{const P=A||"+44";N.onChange(P)},placeholder:r("Enter dial code","kivicare-clinic-management-system"),isDisable:!0,error:y.countryDialCode})})})]})})}),i.jsxs("div",{className:"col-12",children:[i.jsx("h4",{children:r("Registration Shortcode Setting","kivicare-clinic-management-system")}),i.jsx(rr,{title:r("Allowed User Role","kivicare-clinic-management-system"),...u!=="on"&&{helpUrl:"https://documentation.iqonic.design/kivicare-wordpress/kivicare-lite/documentation/settings-configuration/general-settings/#4-registration-shortcode-settings"},children:i.jsx("div",{className:"d-flex flex-column row-gap-3",ref:a,children:w.map(N=>{const A=Xie[N.key],P=Zie.find(E=>E.key===A);return i.jsx(ese,{setting:N,registrationSetting:P,watchedRoles:k,control:h,errors:y,isLoading:n,getBadge:T},N.key)})})})]}),i.jsx("div",{className:"col-12",children:i.jsx(rr,{title:r("Google Recaptcha Setting","kivicare-clinic-management-system"),...u!=="on"&&{helpUrl:"https://documentation.iqonic.design/kivicare-wordpress/kivicare-lite/documentation/settings-configuration/general-settings/#5-google-recaptcha-settings"},children:i.jsxs("div",{className:"d-flex flex-column row-gap-3",children:[i.jsx(ye,{name:"enableRecaptcha",control:h,render:({field:N})=>i.jsx(cn,{label:r("Enable Recaptcha","kivicare-clinic-management-system"),checked:N.value,onChange:A=>{const P=A===!0||A==="on"?"on":"off";N.onChange(P)},badge:T(N.value),disabled:n,error:y.enableRecaptcha})}),b==="on"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"row",children:[i.jsx("div",{className:"col-md-6",children:i.jsx(ye,{name:"recaptchaSiteKey",control:h,render:({field:N})=>i.jsx(Ht,{label:r("Recaptcha Site Key","kivicare-clinic-management-system"),value:N.value,onChange:N.onChange,placeholder:r("Enter site key","kivicare-clinic-management-system"),disabled:n,error:y.recaptchaSiteKey})})}),i.jsx("div",{className:"col-md-6",children:i.jsx(ye,{name:"recaptchaSecretKey",control:h,render:({field:N})=>i.jsx(Ht,{label:r("Recaptcha Secret Key","kivicare-clinic-management-system"),value:N.value,onChange:N.onChange,placeholder:r("Enter secret key","kivicare-clinic-management-system"),disabled:n,error:y.recaptchaSecretKey})})})]}),i.jsx("a",{href:Jie,target:"_blank",rel:"noopener noreferrer",className:"text-primary text-decoration-none",children:r("Please Click Here To Create New Site and a Secret Key","kivicare-clinic-management-system")})]}),t&&i.jsx("div",{className:"alert alert-danger mt-3",role:"alert",children:t})]})})}),i.jsx("div",{className:"col-12",children:i.jsx(rr,{title:r("Other Gender Setting","kivicare-clinic-management-system"),children:i.jsx(ye,{name:"showOtherGender",control:h,render:({field:N})=>i.jsx(cn,{label:r("Show Other Gender Option","kivicare-clinic-management-system"),checked:N.value,onChange:A=>{const P=A===!0||A==="on"?"on":"off";N.onChange(P)},badge:T(N.value),disabled:n,error:y.showOtherGender})})})}),i.jsx("div",{className:"col-12",children:i.jsx(rr,{title:r("Login Redirect Setting","kivicare-clinic-management-system"),...u!=="on"&&{helpUrl:"https://documentation.iqonic.design/kivicare-wordpress/kivicare-lite/documentation/settings-configuration/general-settings/#7-login-redirect-settings"},children:i.jsx("div",{className:"row",children:MC.map(N=>i.jsx("div",{className:"col-md-6 mb-3",children:i.jsx(ye,{name:`loginRedirects.${N.key}`,control:h,render:({field:A})=>i.jsx(Ht,{label:`${N.label} ${r("Login Redirect","kivicare-clinic-management-system")}`,value:A.value,onChange:A.onChange,placeholder:r("Enter redirect URL","kivicare-clinic-management-system"),disabled:n,error:y.loginRedirects?.[N.key]})})},N.key))})})}),i.jsx("div",{className:"col-12",children:i.jsx(rr,{title:r("Logout Redirect Setting","kivicare-clinic-management-system"),...u!=="on"&&{helpUrl:"https://documentation.iqonic.design/kivicare-wordpress/kivicare-lite/documentation/settings-configuration/general-settings/#8-logout-redirect-settings"},children:i.jsx("div",{className:"row",children:MC.map(N=>i.jsx("div",{className:"col-md-6 mb-3",children:i.jsx(ye,{name:`logoutRedirects.${N.key}`,control:h,render:({field:A})=>i.jsx(Ht,{label:`${N.label} ${r("Logout Redirect","kivicare-clinic-management-system")}`,value:A.value,onChange:A.onChange,placeholder:r("Enter redirect URL","kivicare-clinic-management-system"),disabled:n,error:y.logoutRedirects?.[N.key]})})},N.key))})})}),i.jsx("div",{className:"col-12",children:i.jsx(rr,{title:r("Encounter Setting","kivicare-clinic-management-system"),children:i.jsx(ye,{name:"allowEncounterEdit",control:h,render:({field:N})=>i.jsx(cn,{label:r("Allow Encounter Edit After Close","kivicare-clinic-management-system"),checked:N.value,onChange:A=>{const P=A===!0||A==="on"?"on":"off";N.onChange(P)},badge:T(N.value),disabled:n,error:y.allowEncounterEdit})})})}),i.jsx("div",{className:"col-12",children:i.jsx("div",{className:"d-flex justify-content-end gap-3",children:i.jsx("button",{type:"submit",className:"btn btn-primary",disabled:n,children:n?r("Saving...","kivicare-clinic-management-system"):r("Save Changes","kivicare-clinic-management-system")})})})]})})})})},IC=({value:t,onChange:e,placeholder:n,error:s,id:a})=>i.jsx(Un,{value:t,onChange:l=>{if(l&&l.length>0){const o=l[0],c=`${o.getHours().toString().padStart(2,"0")}:${o.getMinutes().toString().padStart(2,"0")}`;e(c)}},options:{enableTime:!0,noCalendar:!0,dateFormat:"H:i",time_24hr:!1,defaultHour:9,defaultMinute:0,minuteIncrement:5,inline:!0,locale:Wn()},className:`form-control d-none ${s?"is-invalid":""}`,placeholder:n,id:a}),ex=({isEditing:t=!1,isAdding:e=!1,...n})=>{const{id:s}=Yt(),a=hn(),l=ze(),{isAddonActive:o,userRole:c,currentDoctorId:d,hasCapability:m,defaultClinicId:u}=mt(),{data:h}=Sn(),p=h?.data?.hideUtilityLinks,g=t||e,[v,x]=f.useState(!1),[y,b]=f.useState([]),[k,w]=f.useState(""),[T,j]=f.useState(null),[D,_]=f.useState([]),[N,A]=f.useState([]),[P,E]=f.useState(!0),[I,M]=f.useState({module_type:"",scheduleDate:"",module_id:""}),[O,F]=f.useState("range"),[H,G]=f.useState([]),[z,ie]=f.useState(!1),[W,ge]=f.useState({start_time:"09:00",end_time:"17:00"}),[ae,U]=f.useState({module_type:"",scheduleDate:"",module_id:""}),X=o("kiviPro"),J=c==="kiviCare_doctor",he=Ga(k,500),le=Ln(),ee=f.useMemo(()=>{let V="",Z="";J&&d?(V="doctor",Z=d):ae.module_type&&ae.module_id&&(V=typeof ae.module_type=="object"?ae.module_type.id:ae.module_type,Z=typeof ae.module_id=="object"?ae.module_id.id:ae.module_id);const fe={module_type:V,module_id:Z};return t&&s&&(fe.exclude_id=s),fe},[ae.module_type,ae.module_id,J,d,t,s]),{data:me}=rJ(ee),K=f.useMemo(()=>me?.data?.disabled_dates?me.data.disabled_dates:[],[me]),re=async({page:V,per_page:Z,search:fe})=>{try{const Ce={dataType:"clinicList",page:V,per_page:Z,search:fe};return await l.fetchQuery({queryKey:pt.list(Ce),queryFn:()=>Dt.getStaticData(Ce),staleTime:300*1e3})}catch(Ce){return console.error("Error loading clinics:",Ce),{options:[]}}},oe=async({page:V,per_page:Z,search:fe})=>{try{const Ce={dataType:"staticData",staticDataType:"doctors",page:V,per_page:Z,search:fe};return(c==="kiviCare_clinic_admin"||c==="kiviCare_receptionist")&&u&&(Ce.clinic_ids=u),await l.fetchQuery({queryKey:pt.list(Ce),queryFn:()=>Dt.getStaticData(Ce),staleTime:300*1e3})}catch(Ce){return console.error("Error loading doctors:",Ce),{options:[]}}},[C,R]=f.useState({page:1,perPage:10,searchTerm:"",name:"",module_type:"",module_id:"",orderby:"id",order:"desc"}),{data:te,isLoading:ne,error:Y}=Cp({dataType:"staticData",staticDataType:"clinics"},{enabled:!0}),{data:q,isLoading:B}=Cp({dataType:"staticData",staticDataType:"doctors"},{enabled:!0}),se=un("settings","holidays/update"),Q=un("settings","holidays/delete"),pe=sJ(),$=f.useMemo(()=>Object.fromEntries(Object.entries(C).filter(([V,Z])=>Z!==""&&Z!==null&&Z!==void 0)),[C]),{data:ce,isLoading:De}=kn("settings","holidays",$,{enabled:!0}),xe=f.useMemo(()=>[{id:"clinic",label:r("Clinic","kivicare-clinic-management-system")},{id:"doctor",label:r("Doctor","kivicare-clinic-management-system")}],[]);f.useEffect(()=>{J&&d&&R(V=>({...V,module_type:"doctor",module_id:d}))},[J,d]),f.useEffect(()=>{te?.status&&te?.data&&_(te.data),ce?.status&&ce?.data&&(b(ce.data.data||[]),ce.data.pagination&&Qt(ce.data.pagination)),q?.status&&q?.data&&A(q.data)},[te,q,ce]),f.useEffect(()=>{if(t&&s&&y.length>0){const V=y.find(Z=>String(Z.id)===String(s));if(J&&V&&V.module_type_label==="clinic"){a("/setting/holidays",{replace:!0});return}V&&j(V)}else if(e)if(F("range"),G([]),ie(!1),ge({start_time:"09:00",end_time:"17:00"}),J){const V=N.find(Z=>Z.id===d);U({module_type:{id:"doctor",label:r("Doctor","kivicare-clinic-management-system")},scheduleDate:"",module_id:V||{id:d,label:""}})}else U({module_type:"",scheduleDate:"",module_id:""})},[t,e,s,y,J,d,N,a]),f.useEffect(()=>{R(V=>({...V,searchTerm:he,page:1}))},[he]);const Re=f.useCallback(V=>{kt({title:r("Delete Schedule?","kivicare-clinic-management-system"),text:r("You're about to delete this holiday.<br>This action cannot be undone.","kivicare-clinic-management-system"),icon:"ph-warning",confirmButtonText:r("Delete permanently","kivicare-clinic-management-system"),cancelButtonText:r("Keep holiday","kivicare-clinic-management-system"),confirmButtonClass:"btn-danger"}).then(Z=>{Z.isConfirmed&&(yt({title:r("Deleting Schedule...","kivicare-clinic-management-system"),text:r("Please wait while we remove the selected holiday.<br>This won't take long.","kivicare-clinic-management-system")}),Q.mutate({id:V},{onSuccess:fe=>{Tt({title:r("Schedule Deleted","kivicare-clinic-management-system"),text:fe?.message||r("Data has been deleted successfully.","kivicare-clinic-management-system"),confirmButtonText:r("Back to holidays","kivicare-clinic-management-system")}),l.invalidateQueries(["settings","listing"])},onError:fe=>{console.error("Delete clinic error:",fe);const Ce=fe?.response?.data?.message||fe?.message||r("Failed to delete Data. Please try again.","kivicare-clinic-management-system");rt({title:r("Error","kivicare-clinic-management-system"),text:Ce,confirmButtonText:r("OK","kivicare-clinic-management-system")})}}))})},[Q,l]),nt=f.useMemo(()=>[le.accessor("id",{id:"id",header:()=>r("ID","kivicare-clinic-management-system"),cell:V=>V.getValue()}),le.accessor("module_type_label",{header:()=>r("Schedule of","kivicare-clinic-management-system"),cell:V=>i.jsx("div",{className:"text-wrap",children:i.jsx("span",{className:"p",children:V.row.original.module_type_label})})}),le.accessor("name",{header:()=>r("Name","kivicare-clinic-management-system"),cell:V=>V.getValue()}),le.accessor("start_date",{header:()=>r("From Date","kivicare-clinic-management-system"),cell:V=>V.getValue()}),le.accessor("end_date",{header:()=>r("To Date","kivicare-clinic-management-system"),cell:V=>V.getValue()}),...m("clinic_schedule_edit")||m("clinic_schedule_delete")?[le.display({id:"actions",header:()=>r("Actions","kivicare-clinic-management-system"),cell:V=>{const Z=V.row.original,fe=Z.module_type_label==="clinic",Ce=!(J&&fe);return i.jsxs("div",{className:"d-flex align-items-center gap-3",children:[m("clinic_schedule_edit")&&Ce&&i.jsx(ht,{to:`/setting/holidays/edit/${Z.id}`,className:"btn btn-link text-success fs-5 p-0",title:r("Edit","kivicare-clinic-management-system"),children:i.jsx("i",{className:"ph ph-pencil-simple-line fs-5"})}),m("clinic_schedule_delete")&&Ce&&i.jsx("button",{type:"button",onClick:()=>Re(Z.id),className:"btn btn-link text-danger p-0",title:r("Delete","kivicare-clinic-management-system"),children:i.jsx("i",{className:"ph ph-trash fs-5"})})]})},enableSorting:!1})]:[]],[le,Re,m]),Pe=f.useCallback(V=>{w(V.target.value)},[]);f.useEffect(()=>{if(T){const V=xe.find(Ce=>Ce.id===T.module_type_label),Z=Ce=>new Date(Ce).toISOString().slice(0,10);let fe=null;T.module_type_label==="clinic"?fe=D.find(Ce=>String(Ce.id)===String(T.module_id)):T.module_type_label==="doctor"&&(fe=N.find(Ce=>String(Ce.id)===String(T.module_id))),U({id:Number(T.id),module_type:V||"",scheduleDate:{start:Z(T.start_date_raw),end:Z(T.end_date_raw)},module_id:fe||""})}},[T,D,N,xe]);const Ue=()=>{a("/setting/holidays/add")},Je=()=>{a("/setting/holidays")},et=()=>{a("/setting/holidays")},Be=async()=>{const V=O==="multiple"?H.length>0:!!ae.scheduleDate,Z=J?V:!!(ae.module_type&&V&&ae.module_id);if(z&&(!W.start_time||!W.end_time)){M(fe=>({...fe,scheduleDate:r("Start time and end time are required for time-specific holidays.","kivicare-clinic-management-system")})),E(!1);return}if(z&&W.start_time>=W.end_time){M(fe=>({...fe,scheduleDate:r("End time must be after start time.","kivicare-clinic-management-system")})),E(!1);return}if(!Z){M({module_type:!J&&!ae.module_type?r("Module Type is required.","kivicare-clinic-management-system"):"",scheduleDate:V?"":r("Schedule Date is required.","kivicare-clinic-management-system"),module_id:!J&&!ae.module_id?r("Module ID is required.","kivicare-clinic-management-system"):""}),E(!1);return}kt({title:r("Are you sure?","kivicare-clinic-management-system"),text:r("All the appointments on the selected date will be cancelled.","kivicare-clinic-management-system"),icon:"ph-warning",confirmButtonText:r("Yes, save","kivicare-clinic-management-system"),cancelButtonText:r("No, cancel","kivicare-clinic-management-system"),confirmButtonClass:"btn-primary"}).then(async fe=>{if(fe.isConfirmed){x(!0);try{const Ce={...ae,selectionMode:O,selectedDates:O==="multiple"?H:void 0,timeSpecific:z,...z&&{start_time:W.start_time,end_time:W.end_time}},Ke=await se.mutateAsync(Ce);await l.invalidateQueries(["settings","holidays"]),Ke.status!==!0?rt({title:r("Error","kivicare-clinic-management-system"),text:r(Ke.message,"kivicare-clinic-management-system"),confirmButtonText:r("Ok","kivicare-clinic-management-system")}):Tt({title:r("Success","kivicare-clinic-management-system"),text:r(Ke.message,"kivicare-clinic-management-system"),confirmButtonText:r("Ok","kivicare-clinic-management-system")}),x(!1),a("/setting/holidays"),U({module_type:"",scheduleDate:"",module_id:""}),T&&j(null),M({module_type:"",scheduleDate:"",module_id:""}),E(!0)}catch(Ce){x(!1),console.error("Error submitting form:",Ce),rt({title:r("Error","kivicare-clinic-management-system"),text:r("Failed to save holiday. Please try again.","kivicare-clinic-management-system"),confirmButtonText:r("Ok","kivicare-clinic-management-system")})}}})};f.useEffect(()=>{if(Y){let V;typeof Y=="string"?V=Y:Y?.response?.data?.message?V=Y.response.data.message:Y?.message?V=Y.message:V=r("An unknown error occurred","kivicare-clinic-management-system"),rt({title:r("Error","kivicare-clinic-management-system"),text:r(V,"kivicare-clinic-management-system"),confirmButtonText:r("Ok","kivicare-clinic-management-system")})}},[Y]);const[ke,_e]=f.useState(!1),Ye=async V=>{try{yt({title:r("Exporting...","kivicare-clinic-management-system"),text:r("Please wait. This may take a few seconds.","kivicare-clinic-management-system")});const Z={format:V,...$},fe=await pe.mutateAsync(Z);if(!fe.status||!fe.data||!fe.data.holidays)throw new Error(fe.message||r("Failed to retrieve export data","kivicare-clinic-management-system"));const Ce=new Date().toISOString().split("T")[0],Ke=fe.data.holidays;switch(V){case"csv":hs(Ke,`holidays-${Ce}.csv`);break;case"xls":ps(Ke,`holidays-${Ce}.xls`);break;case"pdf":gs(Ke,`holidays-${Ce}.pdf`,"Holidays List");break;default:throw new Error("Invalid export format")}Wi(),Se.success(r("Export completed successfully.","kivicare-clinic-management-system"))}catch(Z){console.error("Export error:",Z),rt({title:r("Error!","kivicare-clinic-management-system"),text:Z.message||r("Failed to export data. Please try again.","kivicare-clinic-management-system"),confirmButtonText:r("OK","kivicare-clinic-management-system")})}},tt=V=>{if(V==="pdf"){if(ke)return;_e(!0),Ye("pdf"),setTimeout(()=>_e(!1),2e3)}else Ye(V)},zt=()=>m("clinic_schedule_export")?i.jsxs("div",{className:"download-buttons d-flex align-items-center gap-3",children:[i.jsx("button",{className:"btn btn-white",onClick:()=>tt("csv"),title:r("Export CSV","kivicare-clinic-management-system"),children:i.jsx("i",{className:"ph ph-file-csv"})}),i.jsx("button",{className:"btn btn-white",onClick:()=>tt("xls"),title:r("Export Excel","kivicare-clinic-management-system"),children:i.jsx("i",{className:"ph ph-file-xls"})}),i.jsx("button",{className:"btn btn-white",onClick:()=>tt("pdf"),title:r("Export PDF","kivicare-clinic-management-system"),children:i.jsx("i",{className:"ph ph-file-pdf"})})]}):null,[Ft,Qt]=f.useState({total:0,lastPage:1,perPage:10,currentPage:1}),xt=V=>{R(Z=>({...Z,page:V}))},Ee=V=>{R(Z=>({...Z,page:1,perPage:V}))},Oe=V=>{const Z=V[0];R(Z?fe=>({...fe,page:1,orderby:Z.id,order:Z.desc?"desc":"asc"}):fe=>({...fe,page:1,orderby:"id",order:"desc"}))};return i.jsx("div",{className:"tab-content",id:"v-pills-tabContent",children:i.jsx("div",{className:"tab-pane fade show active",id:"v-pills-holidays",role:"tabpanel","aria-labelledby":"v-pills-holidays-tab",tabIndex:"0",children:g?i.jsxs("div",{className:"add-holiday-setting",children:[i.jsxs("div",{className:"card",children:[i.jsxs("div",{className:"card-header border-0 pb-0 d-flex align-items-center  justify-content-between ",children:[i.jsxs("div",{className:"custom-header ",children:[i.jsx("h4",{className:"card-title mb-2",children:e?r("Add Holiday","kivicare-clinic-management-system"):r("Edit Holiday","kivicare-clinic-management-system")}),i.jsx("p",{className:"text-muted mb-0",children:e?r("Create and  schedule a new holiday event for your clinic locations.","kivicare-clinic-management-system"):r("Update the holiday event details.","kivicare-clinic-management-system")})]}),i.jsxs("button",{onClick:Je,className:"btn btn-sm btn-primary fw-semibold d-flex align-items-center gap-1 back-btn",children:[i.jsx("i",{className:"ph ph-caret-left"}),i.jsx("span",{className:"font-size-14",children:r("Back","kivicare-clinic-management-system")})]})]}),i.jsx("div",{className:"card-body",children:i.jsxs("div",{className:"row g-4",children:[i.jsx("div",{className:"col-12",children:i.jsxs("div",{className:"row g-3",children:[!J&&i.jsx("div",{className:"col-lg-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{htmlFor:"holidayOf",className:"form-label",children:[r("Holiday Category","kivicare-clinic-management-system")," ",i.jsx("span",{className:"input-field-reuquired",children:"*"})]}),i.jsx(ct,{placeholder:r("Select Category","kivicare-clinic-management-system"),className:"w-100 react-select-box",classNamePrefix:"react-select",options:xe,getOptionValue:V=>V.id,getOptionLabel:V=>V.label,onChange:V=>{I?.module_type&&(M(Z=>({...Z,module_type:""})),E(!0)),U(Z=>({...Z,module_type:V||"",module_id:""}))},value:ae.module_type||null,isSearchable:!1,isClearable:!0,error:!!I?.module_type,styles:{menuPortal:V=>({...V,zIndex:9999})}},"holiday-of-select"),I?.module_type&&i.jsx("div",{className:"text-danger mt-1",children:I.module_type})]})}),!J&&i.jsx("div",{className:"col-lg-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{htmlFor:"doctor",className:"form-label",children:[ae.module_type?.id==="doctor"?r("Target Doctor","kivicare-clinic-management-system"):r("Target Clinic","kivicare-clinic-management-system")," ",i.jsx("span",{className:"input-field-reuquired",children:"*"})]}),i.jsx(rn,{className:"w-100 react-select-box",classNamePrefix:"react-select",loadOptions:ae.module_type?.id==="doctor"?oe:re,onChange:V=>{I?.module_id&&(M(Z=>({...Z,module_id:""})),E(!0)),U(Z=>({...Z,module_id:V||""}))},value:ae.module_id||null,isSearchable:!0,isClearable:!0,isDisabled:!ae.module_type,error:!!I?.module_id},`form-module-select-${ae.module_type?.id}`),I?.module_id&&i.jsx("div",{className:"text-danger mt-1",children:I.module_id})]})})]})}),i.jsx("div",{className:"col-12",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[r("Date Selection Mode","kivicare-clinic-management-system")," ",i.jsx("span",{className:"input-field-reuquired",children:"*"})]}),i.jsxs("div",{className:"btn-group w-100 mb-3",role:"group",children:[i.jsx("input",{type:"radio",className:"btn-check",name:"selectionMode",id:"mode-single",checked:O==="single",onChange:()=>{F("single"),G([]),U(V=>({...V,scheduleDate:""}))}}),i.jsxs("label",{className:"btn btn-outline-primary",htmlFor:"mode-single",children:[i.jsx("i",{className:"ph ph-calendar-blank me-2"}),r("Single","kivicare-clinic-management-system")]}),i.jsx("input",{type:"radio",className:"btn-check",name:"selectionMode",id:"mode-multiple",checked:O==="multiple",onChange:()=>{F("multiple"),G([]),U(V=>({...V,scheduleDate:""}))}}),i.jsxs("label",{className:"btn btn-outline-primary",htmlFor:"mode-multiple",children:[i.jsx("i",{className:"ph ph-calendar-check me-2"}),r("Multiple","kivicare-clinic-management-system")]}),i.jsx("input",{type:"radio",className:"btn-check",name:"selectionMode",id:"mode-range",checked:O==="range",onChange:()=>{F("range"),G([]),U(V=>({...V,scheduleDate:""}))}}),i.jsxs("label",{className:"btn btn-outline-primary",htmlFor:"mode-range",children:[i.jsx("i",{className:"ph ph-calendar-dots me-2"}),r("Date Range","kivicare-clinic-management-system")]})]})]})}),i.jsx("div",{className:"col-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{htmlFor:"scheduleDate",className:"form-label",children:[r("Schedule Date Selection","kivicare-clinic-management-system")," ",i.jsx("span",{className:"input-field-reuquired",children:"*"})]}),i.jsx("div",{className:"kc-flatpickr-calendar",children:i.jsx(Un,{options:{inline:!0,mode:O==="multiple"?"multiple":O==="single"?"single":"range",minDate:"today",locale:Wn(),...O==="multiple"&&{conjunction:", "},...K.length>0&&{disable:K},onDayCreate:(V,Z,fe,Ce)=>{if(K.length>0){const Ke=Ce.dateObj.getFullYear(),it=String(Ce.dateObj.getMonth()+1).padStart(2,"0"),at=String(Ce.dateObj.getDate()).padStart(2,"0"),ot=`${Ke}-${it}-${at}`;if(K.includes(ot)){Ce.classList.add("kc-holiday-disabled");const Nt=document.createElement("div");Nt.className="day-tooltip",Nt.innerHTML=`
                                  <span class="tooltip-info">${r("Holiday already scheduled","kivicare-clinic-management-system")}</span>
                                `,Ce.appendChild(Nt)}}}},className:"d-none",placeholder:r("dd / mm / yyyy","kivicare-clinic-management-system"),value:O==="multiple"?H.map(V=>Zn(V)):ae.scheduleDate&&ae.scheduleDate.start?[Zn(ae.scheduleDate.start),Zn(ae.scheduleDate.end||ae.scheduleDate.start)]:"",onChange:V=>{I?.scheduleDate&&(M(fe=>({...fe,scheduleDate:""})),E(!0));const Z=fe=>{if(!fe)return"";const Ce=fe instanceof Date?fe:new Date(fe);return`${Ce.getFullYear()}-${String(Ce.getMonth()+1).padStart(2,"0")}-${String(Ce.getDate()).padStart(2,"0")}`};O==="single"&&V.length>0?U(fe=>({...fe,scheduleDate:{start:Z(V[0]),end:Z(V[0])}})):O==="multiple"&&V.length>0?(G(V.map(fe=>Z(fe))),U(fe=>({...fe,scheduleDate:{start:Z(V[0]),end:Z(V[V.length-1])}}))):O==="range"&&V.length===2&&U(fe=>({...fe,scheduleDate:{start:Z(V[0]),end:Z(V[1])}}))},error:I?.scheduleDate?"true":"false"},`flatpickr-${O}-${ee.module_type}-${ee.module_id}-${K.length}`)}),I?.scheduleDate&&i.jsx("div",{className:"text-danger mt-1",children:I.scheduleDate}),K.length>0&&i.jsxs("div",{className:"alert alert-warning mt-3 py-2 px-3 d-flex align-items-center gap-2 bg-warning-subtle",children:[i.jsx("i",{className:"ph ph-warning-circle fs-5"}),i.jsxs("small",{children:[K.length," ",r("date(s) already have holidays and are disabled.","kivicare-clinic-management-system")]})]}),O==="multiple"&&H.length>0&&i.jsxs("div",{className:"alert alert-info mt-3 bg-primary-subtle",children:[i.jsxs("strong",{children:[r("Selected Dates","kivicare-clinic-management-system"),":"]}),i.jsx("div",{className:"mt-2",children:H.map((V,Z)=>i.jsx("span",{className:"badge bg-primary me-2 mb-1",children:V},Z))}),i.jsxs("small",{className:"d-block mt-2",children:[H.length," ",r("date(s) selected","kivicare-clinic-management-system")]})]})]})}),i.jsx("div",{className:"col-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"form-label mb-0",children:r("Apply Specific Time","kivicare-clinic-management-system")}),i.jsx("small",{className:"d-block text-muted",children:r("Set if the holiday isn't all-day","kivicare-clinic-management-system")})]}),i.jsx("div",{className:"form-check form-switch",children:i.jsx("input",{className:"form-check-input",type:"checkbox",role:"switch",id:"timeSpecific",checked:z,onChange:V=>ie(V.target.checked),style:{width:"3rem",height:"1.5rem",cursor:"pointer"}})})]}),z&&i.jsxs("div",{className:"row g-3",children:[i.jsxs("div",{className:"col-6",children:[i.jsxs("label",{htmlFor:"startTime",className:"form-label",children:[r("Start Time","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-reuquired",children:"*"})]}),i.jsx(IC,{placeholder:r("Select start time","kivicare-clinic-management-system"),value:W.start_time,onChange:V=>ge(Z=>({...Z,start_time:V})),id:"startTime"})]}),i.jsxs("div",{className:"col-6",children:[i.jsxs("label",{htmlFor:"endTime",className:"form-label",children:[r("End Time","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-reuquired",children:"*"})]}),i.jsx(IC,{placeholder:r("Select end time","kivicare-clinic-management-system"),value:W.end_time,onChange:V=>ge(Z=>({...Z,end_time:V})),id:"endTime"})]})]})]})})]})})]}),i.jsxs("div",{className:"d-flex justify-content-end flex-wrap row-gap-2 column-gap-4 mb-5 mt-4",children:[i.jsx("button",{type:"button",className:"btn btn-secondary",onClick:et,children:r("Cancel","kivicare-clinic-management-system")}),i.jsx("button",{type:"button",className:"btn btn-primary",onClick:Be,disabled:!P||v||B||De,children:v||B||De?T?r("Updating...","kivicare-clinic-management-system"):r("Saving...","kivicare-clinic-management-system"):T?r("Update","kivicare-clinic-management-system"):r("Save","kivicare-clinic-management-system")})]})]}):i.jsxs("div",{className:"holiday-setting",children:[i.jsxs("div",{className:"d-flex align-items-md-center justify-content-between row-gap-2 column-gap-3 flex-md-row flex-column mb-3",children:[i.jsxs("h6",{className:"setting-title mb-0 d-flex align-items-center",children:[r("Holiday List","kivicare-clinic-management-system"),p!=="on"&&i.jsx("span",{className:"ms-2",children:i.jsx("a",{href:"https://documentation.iqonic.design/kivicare-wordpress/kivicare-lite/documentation/settings-configuration/holidays-settings/",target:"_blank",rel:"noopener noreferrer",children:i.jsx("i",{className:"ph ph-question align-middle h5 text-primary"})})})]}),i.jsxs("div",{className:"d-flex align-items-center row-gap-2 column-gap-4 flex-wrap",children:[X&&i.jsx(zt,{}),m("clinic_schedule_add")&&i.jsxs("button",{onClick:Ue,className:"btn btn-primary d-flex align-items-center gap-2",children:[i.jsx("i",{className:"ph ph-plus-circle"}),i.jsx("span",{children:r("Add Holiday","kivicare-clinic-management-system")})]})]})]}),i.jsxs("div",{className:"d-flex justify-content-between flex-column flex-lg-row gap-3 mb-4",children:[!J&&i.jsxs("div",{className:"table-selection d-flex gap-3",children:[i.jsx(ct,{placeholder:r("Schedule Type","kivicare-clinic-management-system"),className:"w-100 react-select-box",classNamePrefix:"react-select",options:xe,getOptionValue:V=>V.id,getOptionLabel:V=>V.label,onChange:V=>{R(Z=>({...Z,module_type:V?V.id:"",module_id:""}))},value:xe.find(V=>V.id===C.module_type)||null,isSearchable:!1,isClearable:!0,styles:{menuPortal:V=>({...V,zIndex:9999})}},"schedule-type-select"),i.jsx(rn,{className:"w-100 react-select-box",classNamePrefix:"react-select",placeholder:C.module_type==="doctor"?r("Select Doctor","kivicare-clinic-management-system"):C.module_type==="clinic"?r("Select Clinic","kivicare-clinic-management-system"):r("Select Type First","kivicare-clinic-management-system"),loadOptions:C.module_type==="doctor"?oe:C.module_type==="clinic"?re:()=>Promise.resolve({options:[]}),isDisabled:!C.module_type,onChange:V=>{R(Z=>({...Z,module_id:V?V.id:""}))},isSearchable:!0,isClearable:!0},`filter-module-select-${C.module_type}`)]}),i.jsx("div",{className:"d-flex align-items-center input-search-select",children:i.jsxs("div",{className:"input-group input-group-search",children:[i.jsx("span",{className:"input-group-text",children:i.jsx("i",{className:"ph ph-magnifying-glass"})}),i.jsx("input",{type:"text",className:"form-control",placeholder:r("Search by filter","kivicare-clinic-management-system"),onChange:Pe})]})})]}),i.jsx("div",{className:"table-responsive",children:i.jsx(wn,{data:y,columns:nt,currentPage:Ft.currentPage,perPage:Ft.perPage,totalItems:Ft.total,lastPage:Ft.lastPage,onPageChange:xt,onPerPageChange:Ee,onSortingChange:Oe,manualSorting:!0,enableSelection:!1,isLoading:v||B||De})})]})})})},ise=()=>{const t=un("settings","configurations"),[e,n]=f.useState(!1),{isAddonActive:s}=mt(),a=s("kiviPro"),{data:l}=Sn(),o=l?.data?.hideUtilityLinks,{data:c,isLoading:d,error:m}=kn("settings","configurations",{},{enabled:!0}),u=[{label:r("Receptionist","kivicare-clinic-management-system"),name:"receptionist",status:0},{label:r("Billing","kivicare-clinic-management-system"),name:"billing",status:0},{label:r("Custom Fields","kivicare-clinic-management-system"),name:"custom_fields",status:0}],h=[{label:r("Problem","kivicare-clinic-management-system"),name:"problem",status:0},{label:r("Observations","kivicare-clinic-management-system"),name:"observation",status:0},{label:r("Note","kivicare-clinic-management-system"),name:"note",status:0}],p=[{label:r("Prescription","kivicare-clinic-management-system"),name:"prescription",status:0}],{register:g,handleSubmit:v,watch:x,setValue:y,reset:b}=en({defaultValues:{module_config:u,encounter_modules:h,prescription_modules:p}});f.useEffect(()=>{if(!c?.status||!c?.data)return;const j=_=>Array.isArray(_)?_.map(N=>({...N,status:Number(N.status)||0})):[],D={module_config:u,encounter_modules:h,prescription_modules:p};b(_=>{const N={..._};return["module_config","encounter_modules","prescription_modules"].forEach(A=>{const P=c?.data?.[A];N[A]=j(Array.isArray(P)&&P.length>0?P:D[A])}),N})},[c,b]);const k=async j=>{try{n(!0);const D={module_config:j.module_config,encounter_modules:j.encounter_modules,prescription_modules:j.prescription_modules},_=await t.mutateAsync(D);_.status!==!0?(n(!1),Ze.fire({icon:"error",title:r("Error","kivicare-clinic-management-system"),text:r(_.message,"kivicare-clinic-management-system"),confirmButtonText:r("Ok","kivicare-clinic-management-system")})):(n(!1),Ze.fire({icon:"success",title:r("Success","kivicare-clinic-management-system"),text:r(_.message,"kivicare-clinic-management-system"),confirmButtonText:r("Ok","kivicare-clinic-management-system")}))}catch(D){n(!1),console.error("Failed to save settings:",D)}},w=(j,D)=>{const N=x(j).map(A=>A.name===D?{...A,status:A.status===1?0:1}:A);y(j,N)};if(m){let j;typeof m=="string"?j=m:m?.response?.data?.message?j=m.response.data.message:m?.message?j=m.message:j=r("An unknown error occurred","kivicare-clinic-management-system"),Ze.fire({icon:"error",title:r("Error","kivicare-clinic-management-system"),text:r(j,"kivicare-clinic-management-system"),confirmButtonText:r("Ok","kivicare-clinic-management-system")})}const T=({title:j,name:D,disabled:_})=>{const N=x(D);return i.jsx("div",{className:"card",children:i.jsxs("div",{className:"card-body",children:[i.jsx("h6",{className:"mb-3",children:j}),i.jsx("div",{className:"",children:N.map(A=>i.jsxs("div",{className:"form-check form-check-inline",children:[i.jsx("input",{className:"form-check-input",type:"checkbox",checked:A.status===1,onChange:()=>w(D,A.name),id:A.name,disabled:_}),i.jsx("label",{htmlFor:A.name,className:"form-check-label",children:A.label})]},A.name))})]})})};return d?i.jsx(vP,{}):i.jsxs("div",{className:"tab-pane fade show active",id:"v-pills-configurations",role:"tabpanel","aria-labelledby":"v-pills-configurations-tab",tabIndex:"0",children:[d&&i.jsx("div",{className:"d-flex justify-content-center align-items-center my-5",style:{height:"100dvh"},children:i.jsx("div",{className:"spinner-border text-primary",role:"status","aria-hidden":"true"})}),!d&&i.jsxs("form",{onSubmit:v(k),className:"configuration-setting",children:[i.jsxs("h6",{className:"setting-title mb-3",children:[r("Enable/Disable Modules","kivicare-clinic-management-system")," ",o!=="on"&&i.jsx("a",{href:"https://documentation.iqonic.design/kivicare-wordpress/kivicare-lite/documentation/settings-configuration/system-configuration/",target:"_blank",rel:"noopener noreferrer",children:i.jsx("i",{className:"ph ph-question align-middle h5  text-primary"})})]}),i.jsx(T,{title:r("Module config","kivicare-clinic-management-system"),name:"module_config",disabled:e}),c?.data?.encounter_modules&&a&&Array.isArray(c.data.encounter_modules)&&i.jsx(T,{title:r("Encounter Module","kivicare-clinic-management-system"),name:"encounter_modules",disabled:e}),c?.data?.prescription_modules&&a&&Array.isArray(c.data.prescription_modules)&&i.jsx(T,{title:r("Prescription Module","kivicare-clinic-management-system"),name:"prescription_modules",disabled:e}),i.jsx("div",{className:"d-flex justify-content-end",children:i.jsx("button",{type:"submit",className:"btn btn-primary",children:r("Save","kivicare-clinic-management-system")})})]})]})},tx=[{id:"image/jpeg",text:r("JPEG Image (jpg, jpeg, jpe)","kivicare-clinic-management-system")},{id:"image/gif",text:r("GIF Image (gif)","kivicare-clinic-management-system")},{id:"image/png",text:r("PNG Image (png)","kivicare-clinic-management-system")},{id:"image/bmp",text:r("BMP Image (bmp)","kivicare-clinic-management-system")},{id:"image/tiff",text:r("TIFF Image (tiff, tif)","kivicare-clinic-management-system")},{id:"image/webp",text:r("WebP Image (webp)","kivicare-clinic-management-system")},{id:"image/avif",text:r("AVIF Image (avif)","kivicare-clinic-management-system")},{id:"image/x-icon",text:r("Icon (ico)","kivicare-clinic-management-system")},{id:"image/heic",text:r("HEIC Image (heic)","kivicare-clinic-management-system")},{id:"video/x-ms-asf",text:r("ASF Video (asf, asx)","kivicare-clinic-management-system")},{id:"video/x-ms-wmv",text:r("WMV Video (wmv)","kivicare-clinic-management-system")},{id:"video/avi",text:r("AVI Video (avi)","kivicare-clinic-management-system")},{id:"video/quicktime",text:r("QuickTime Video (mov, qt)","kivicare-clinic-management-system")},{id:"video/mpeg",text:r("MPEG Video (mpeg, mpg, mpe)","kivicare-clinic-management-system")},{id:"video/mp4",text:r("MP4 Video (mp4, m4v)","kivicare-clinic-management-system")},{id:"video/webm",text:r("WebM Video (webm)","kivicare-clinic-management-system")},{id:"audio/mpeg",text:r("MP3 Audio (mp3, m4a, m4b)","kivicare-clinic-management-system")},{id:"audio/aac",text:r("AAC Audio (aac)","kivicare-clinic-management-system")},{id:"audio/wav",text:r("WAV Audio (wav)","kivicare-clinic-management-system")},{id:"audio/ogg",text:r("OGG Audio (ogg, oga)","kivicare-clinic-management-system")},{id:"audio/flac",text:r("FLAC Audio (flac)","kivicare-clinic-management-system")},{id:"application/pdf",text:r("PDF Document (pdf)","kivicare-clinic-management-system")},{id:"application/msword",text:r("Word Document (doc)","kivicare-clinic-management-system")},{id:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",text:r("Word Document (docx)","kivicare-clinic-management-system")},{id:"application/vnd.ms-excel",text:r("Excel Spreadsheet (xls)","kivicare-clinic-management-system")},{id:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",text:r("Excel Spreadsheet (xlsx)","kivicare-clinic-management-system")},{id:"application/vnd.ms-powerpoint",text:r("PowerPoint (ppt, pps)","kivicare-clinic-management-system")},{id:"application/vnd.openxmlformats-officedocument.presentationml.presentation",text:r("PowerPoint (pptx)","kivicare-clinic-management-system")},{id:"text/plain",text:r("Text File (txt)","kivicare-clinic-management-system")},{id:"text/csv",text:r("CSV File (csv)","kivicare-clinic-management-system")},{id:"text/html",text:r("HTML File (htm, html)","kivicare-clinic-management-system")},{id:"application/zip",text:r("ZIP Archive (zip)","kivicare-clinic-management-system")},{id:"application/x-rar-compressed",text:r("RAR Archive (rar)","kivicare-clinic-management-system")},{id:"application/x-7z-compressed",text:r("7Z Archive (7z)","kivicare-clinic-management-system")}],nx=()=>{const t=hn(),{hasCapability:e,module_config:n,loading:s}=mt(),{data:a}=Sn(),l=a?.data?.hideUtilityLinks;if(f.useEffect(()=>{if(!s){if((n.custom_fields??"1")==="0"){t("/setting/general-setting",{replace:!0});return}e("custom_field_list")||t("/403",{replace:!0})}},[s,n,e,t]),s||n&&(n.custom_fields??"1")==="0"||!e("custom_field_list"))return null;const[o,c]=f.useState(!1),[d,m]=f.useState(!1),[u,h]=f.useState([]),[p,g]=f.useState(null),v=un("setting","custom-field/delete"),x=un("setting","custom-field/status"),{control:y,handleSubmit:b,formState:{errors:k},reset:w,watch:T}=en(),j=ze(),{isAddonActive:D}=mt(),[_,N]=f.useState([]),A=D("kiviPro"),[P,E]=f.useState(!1),{id:I}=Yt(),M=Kn(),O=f.useCallback((ke,_e)=>!ke||!Array.isArray(ke)||ke.length===0?[]:ke.map(Ye=>{const tt=typeof Ye=="object"?Ye.id:Ye;return _e.find(zt=>zt.id===tt)}).filter(Boolean),[]),F=f.useCallback(()=>({id:"",label:"",module_type:"",type:"",status:"",placeholder:"",isRequired:!1,options:[],file_types:[]}),[]),H=iJ(),[G,z]=f.useState(!1),ie=()=>i.jsxs("div",{className:"download-buttons d-flex align-items-center gap-3",children:[i.jsx(Qe,{placement:"top",overlay:i.jsx(ut,{children:r("Export CSV","kivicare-clinic-management-system")}),children:i.jsx("button",{className:"btn btn-white",onClick:()=>xe("csv"),disabled:H.isPending,children:i.jsx("i",{className:"ph ph-file-csv"})})}),i.jsx(Qe,{placement:"top",overlay:i.jsx(ut,{children:r("Export Excel","kivicare-clinic-management-system")}),children:i.jsx("button",{className:"btn btn-white",onClick:()=>xe("xls"),disabled:H.isPending,children:i.jsx("i",{className:"ph ph-file-xls"})})}),i.jsx(Qe,{placement:"top",overlay:i.jsx(ut,{children:r("Export PDF","kivicare-clinic-management-system")}),children:i.jsx("button",{className:"btn btn-white",onClick:()=>xe("pdf"),disabled:H.isPending||G,children:i.jsx("i",{className:"ph ph-file-pdf"})})})]}),[W,ge]=f.useState({page:1,perPage:10,searchTerm:"",input_type:"",module_type:"",status:""}),[ae,U]=f.useState([]),X=f.useMemo(()=>Object.fromEntries(Object.entries(W).filter(([ke,_e])=>_e!==""&&_e!==null&&_e!==void 0)),[W]),{data:J,isLoading:he,error:le}=kn("setting","custom-field",X,{enabled:!0}),ee=un("setting","custom-field/update"),{data:me,isLoading:K}=Cp({dataType:"staticData",staticDataType:"doctors"},{enabled:!0}),[re,oe]=f.useState(""),C=Ga(re,500),R=f.useCallback(ke=>{oe(ke.target.value)},[]),te=ke=>{const _e=ke[0];ge(_e?Ye=>({...Ye,page:1,orderby:_e.id,order:_e.desc?"desc":"asc"}):Ye=>({...Ye,page:1,orderby:"id",order:"desc"}))};f.useEffect(()=>{if(M.pathname.endsWith("/add"))c(!0),g(null),w(F());else if(I){const _e=u.find(Ye=>String(Ye.id)===I);if(_e){g(_e),c(!0);const Ye=O(_e.file_types,tx);w({id:_e.id,label:_e.field,module_type:pe.find(tt=>tt.label===_e.type)||null,type:$.find(tt=>tt.value===_e.inputType)||null,module_id:_e.module_id&&_.find(tt=>tt.id===_e.module_id)||null,status:ce.find(tt=>tt.id===_e.status)||null,placeholder:_e.placeholder||"",isRequired:!!_e.isRequired,options:_e.options||[],file_types:Ye})}else c(!1),g(null)}else c(!1),g(null),w(F())},[I,M.pathname,u,w,_,O,F]),f.useEffect(()=>{if(p){const ke=p.module_id&&_.length>0?_.find(Ye=>String(Ye.id)===String(p.module_id)):null,_e=O(p.file_types,tx);w({id:p.id,label:p.field,module_type:pe.find(Ye=>Ye.label===p.type)||null,type:$.find(Ye=>Ye.value===p.inputType)||null,module_id:ke||null,status:ce.find(Ye=>Ye.id===p.status)||null,placeholder:p.placeholder||"",isRequired:!!p.isRequired,options:p.options||[],file_types:_e})}},[p,_,O]),f.useEffect(()=>{const ke=T((_e,{name:Ye,type:tt})=>{Ye==="module_type"&&tt==="change"&&(_e.module_type?.id==="appointment_module"||w(Ft=>({...Ft,module_id:null}),{keepDefaultValues:!0}))});return()=>ke.unsubscribe()},[T,w]);const ne=T("module_type"),Y=T("type"),q=Ln(),B=[q.accessor("id",{id:"id",header:()=>r("ID","kivicare-clinic-management-system")}),q.accessor("field",{header:()=>r("Field","kivicare-clinic-management-system")}),q.accessor("inputType",{header:()=>r("Input Type","kivicare-clinic-management-system")}),q.accessor("type",{header:()=>r("Type","kivicare-clinic-management-system")}),q.accessor("status",{header:()=>r("Status","kivicare-clinic-management-system"),enableSorting:!1,cell:ke=>{const _e=ke.row.original.id,Ye=ke.row.original.status,tt=Ye===1,zt=Ye===0?"bg-danger-subtle":"bg-success-subtle",Ft=Ye===0?r("Inactive","kivicare-clinic-management-system"):r("Active","kivicare-clinic-management-system"),Qt=xt=>{const Ee=xt?1:0;x.mutate({id:_e,status:Ee},{onSuccess:()=>{Se.success(r("Field status has been updated.","kivicare-clinic-management-system")),j.invalidateQueries(["setting","custom-field"])},onError:()=>{Se.error(r("Failed to update field status.","kivicare-clinic-management-system"))}})};return i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsx(cn,{checked:tt,onChange:Qt,disabled:x.isPending,className:"m-0"}),i.jsx("span",{className:`badge ${zt}`,children:Ft})]})}}),...e("custom_field_edit")||e("custom_field_delete")?[q.accessor("actions",{header:()=>r("Actions","kivicare-clinic-management-system"),enableSorting:!1,cell:ke=>i.jsxs("div",{className:"d-flex align-items-center gap-3",children:[e("custom_field_edit")&&i.jsx(Qe,{placement:"top",overlay:i.jsx(ut,{children:r("Edit","kivicare-clinic-management-system")}),children:i.jsx(ht,{className:"text-success btn btn-link p-0",to:`/setting/custom-field/edit/${ke.row.original.id}`,children:i.jsx("i",{className:"ph ph-pencil-simple-line fs-5 p-0"})})}),e("custom_field_delete")&&i.jsx(Qe,{placement:"top",overlay:i.jsx(ut,{children:r("Delete","kivicare-clinic-management-system")}),children:i.jsx("button",{className:"btn btn-link text-danger p-0",onClick:()=>De(ke.cell.row.original.id),children:i.jsx("i",{className:"ph text-danger ph-trash fs-5 p-0"})})})]})})]:[]];f.useEffect(()=>{ge(ke=>({...ke,searchTerm:C,page:1}))},[C]),f.useEffect(()=>{if(!J?.status){h([]);return}if(J?.data?.data&&Array.isArray(J.data.data)){const ke=J.data.data.map(Ye=>{let tt={};try{tt=Ye.fields?JSON.parse(Ye.fields):{},typeof tt=="object"&&tt!==null?tt={label:tt.name||"",type:tt.type||"",placeholder:tt.placeholder||"",isRequired:tt.isRequired||0,options:tt.options||[],file_types:tt.file_upload_type||[],status:tt.status||1}:tt={label:"",type:"",placeholder:"",isRequired:0,options:[],file_types:[],status:1}}catch{tt={label:"",type:"",placeholder:"",isRequired:0,options:[],file_types:[],status:1}}return{id:Ye.id,field:tt.label,inputType:tt.type,type:pe.find(zt=>zt.id===Ye.module_type)?.label||Ye.module_type||"",module_id:Ye.module_id??null,placeholder:tt.placeholder,status:Number(Ye.status),isRequired:Number(tt.isRequired),options:tt.options,file_types:tt.file_types||[]}}),_e=A?ke:ke.filter(Ye=>Ye.type!=="Appointment Module");h(_e)}else h([])},[J,A]),f.useEffect(()=>{me?.status&&me?.data&&N(me.data)},[me]);const se=f.useCallback(ke=>{R(ke)},[R]),Q=J?.data?.pagination||{total:0,lastPage:1,perPage:10,currentPage:1},pe=[{id:"doctor_module",label:r("Doctor Module","kivicare-clinic-management-system")},{id:"patient_module",label:r("Patient Module","kivicare-clinic-management-system")},{id:"patient_encounter_module",label:r("Patient Encounter Module","kivicare-clinic-management-system")},{id:"appointment_module",label:r("Appointment Module","kivicare-clinic-management-system")}],$=[{value:"text",label:r("Text","kivicare-clinic-management-system")},{value:"number",label:r("Number","kivicare-clinic-management-system")},{value:"textarea",label:r("Textarea","kivicare-clinic-management-system")},{value:"file_upload",label:r("File Upload","kivicare-clinic-management-system")},{value:"select",label:r("Select","kivicare-clinic-management-system")},{value:"multi_select",label:r("Multi Select","kivicare-clinic-management-system")},{value:"radio",label:r("Radio","kivicare-clinic-management-system")},{value:"checkbox",label:r("Checkbox","kivicare-clinic-management-system")},{value:"calendar",label:r("Calendar","kivicare-clinic-management-system")}],ce=[{id:1,label:r("Active","kivicare-clinic-management-system")},{id:0,label:r("Inactive","kivicare-clinic-management-system")}],De=ke=>{kt({title:r("Delete Custom Field?","kivicare-clinic-management-system"),text:r("You're about to delete this custom field.<br>This action cannot be undone.","kivicare-clinic-management-system"),icon:"ph-warning",confirmButtonText:r("Delete permanently","kivicare-clinic-management-system"),cancelButtonText:r("Keep custom field","kivicare-clinic-management-system"),confirmButtonClass:"btn-danger"}).then(_e=>{_e.isConfirmed&&(yt({title:r("Deleting Custom Field...","kivicare-clinic-management-system"),text:r("Please wait while we remove the selected custom field.<br>This won't take long.","kivicare-clinic-management-system")}),v.mutate({id:ke},{onSuccess:Ye=>{Tt({title:r("Custom Field Deleted","kivicare-clinic-management-system"),text:Ye?.message||r("Data has been deleted successfully.","kivicare-clinic-management-system"),confirmButtonText:r("Back to custom fields","kivicare-clinic-management-system")}),j.invalidateQueries(["setting","custom-field"])},onError:Ye=>{console.error("Delete clinic error:",Ye);const tt=Ye?.response?.data?.message||Ye?.message||r("Failed to delete Data. Please try again.","kivicare-clinic-management-system");rt({title:r("Error","kivicare-clinic-management-system"),text:tt,confirmButtonText:r("OK","kivicare-clinic-management-system")})}}))})},xe=ke=>{A?(ke==="csv"&&nt(),ke==="xls"&&Pe(),ke==="pdf"&&Ue()):kt({title:r("Pro Feature","kivicare-clinic-management-system"),text:r("Exporting data is only available in KiviCare Pro version.","kivicare-clinic-management-system"),icon:"ph-warning",confirmButtonText:r("OK","kivicare-clinic-management-system"),showCancelButton:!1})},Re=async ke=>{try{const _e={format:ke,searchTerm:W.searchTerm,module_type:W.module_type,input_type:W.input_type,status:W.status},Ye=await H.mutateAsync(_e),tt=Ye?.data?.customFields||Ye?.customFields||Ye?.data?.data?.customFields;if(tt){const zt=new Date().toISOString().split("T")[0],Ft=tt.map(Qt=>({id:Qt.id,module:Qt.module,label:Qt.label,placeholder:Qt.placeholder,options:Qt.options,input_type:Qt.input_type,required:Qt.required,status:ke==="pdf"?Qt.status==1?"Active":"Inactive":Qt.status}));switch(ke){case"csv":hs(Ft,`custom-fields-${zt}.csv`);break;case"xls":ps(Ft,`custom-fields-${zt}.xls`);break;case"pdf":gs(Ft,`custom-fields-${zt}.pdf`,"Custom Fields List");break;default:throw new Error("Invalid export format")}Se.success(r("Export completed successfully.","kivicare-clinic-management-system"))}else throw console.error("No custom fields data found in response:",Ye),new Error(`No data received from server. Response structure: ${JSON.stringify(Ye,null,2)}`)}catch(_e){console.error("Export error:",_e),rt({title:r("Error!","kivicare-clinic-management-system"),text:_e.message||r("Failed to export data. Please try again.","kivicare-clinic-management-system"),confirmButtonText:r("OK","kivicare-clinic-management-system")})}},nt=()=>Re("csv"),Pe=()=>Re("xls"),Ue=()=>{G||(z(!0),Re("pdf").finally(()=>{setTimeout(()=>z(!1),1e3)}))},Je=()=>{m(!0)},et=()=>{j.invalidateQueries(["setting","custom-field"])},Be=async ke=>{try{E(!0);const _e={id:ke.id||"",module_type:{id:ke.module_type?.id||"",label:ke.module_type?.label||""},module_id:ke.module_id?{id:ke.module_id.id||ke.module_id,label:ke.module_id.label||""}:null,fields:[{label:ke.label,type:ke.type?.value||"",options:ke.options||[],file_types:ke.file_types||[],isRequired:ke.isRequired?"1":"0",placeholder:ke.placeholder||"",status:String(ke.status?.id??1)}]};ke.id&&(_e.fields[0].id=ke.id);const Ye=await ee.mutateAsync(_e);Ye.status!==!0?rt({title:r("Error","kivicare-clinic-management-system"),text:r(Ye.message,"kivicare-clinic-management-system"),confirmButtonText:r("Ok","kivicare-clinic-management-system")}):(Tt({title:r("Success","kivicare-clinic-management-system"),text:r(Ye.message,"kivicare-clinic-management-system"),confirmButtonText:r("Ok","kivicare-clinic-management-system")}),j.invalidateQueries(["setting","custom-field"]),t("/setting/custom-field"),c(!1),w())}catch(_e){console.error("Form submission error:",_e),rt({title:r("Error","kivicare-clinic-management-system"),text:r(_e.response?.data?.message||"Failed to save custom field","kivicare-clinic-management-system"),confirmButtonText:r("Ok","kivicare-clinic-management-system")})}finally{E(!1)}};if(le){let ke;typeof le=="string"?ke=le:le?.response?.data?.message?ke=le.response.data.message:le?.message?ke=le.message:ke=r("An unknown error occurred","kivicare-clinic-management-system"),rt({title:r("Error","kivicare-clinic-management-system"),text:r(ke,"kivicare-clinic-management-system"),confirmButtonText:r("Ok","kivicare-clinic-management-system")})}return i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"tab-pane fade show active",id:"v-pills-custom-filed",role:"tabpanel","aria-labelledby":"v-pills-custom-filed-tab",tabIndex:"0",children:[!o&&i.jsxs("div",{className:"custom-filed-setting",children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap gap-3 mb-5",children:[i.jsxs("h6",{className:"setting-title m-0",children:[r("Custom Field Data","kivicare-clinic-management-system")," ",l!=="on"&&i.jsx("a",{href:"https://documentation.iqonic.design/kivicare-wordpress/kivicare-lite/documentation/settings-configuration/custom-field-settings/",target:"_blank",rel:"noopener noreferrer",children:i.jsx("i",{className:"ph ph-question align-middle h5 text-primary"})})]}),i.jsxs("div",{className:"d-flex align-items-center flex-wrap gap-3",children:[e("custom_field_add")&&i.jsxs("button",{type:"button",className:"btn btn-primary d-flex align-items-center gap-2",onClick:()=>t("/setting/custom-field/add"),children:[i.jsx("i",{className:"ph ph-plus-circle"}),i.jsx("span",{children:r("Add Custom field","kivicare-clinic-management-system")})]}),A&&i.jsxs(i.Fragment,{children:[i.jsxs("button",{type:"button",className:"btn btn-secondary d-flex align-items-center gap-2",onClick:Je,children:[i.jsx("i",{className:"ph ph-upload"}),i.jsx("span",{children:r("Import Data","kivicare-clinic-management-system")})]}),e("custom_field_export")&&i.jsx(ie,{})]})]})]}),i.jsxs("div",{className:"d-flex justify-content-between flex-column flex-lg-row gap-3 mb-4",children:[i.jsxs("div",{className:"table-selection d-flex gap-3",children:[i.jsx(ct,{options:$,placeholder:r("Input Type","kivicare-clinic-management-system"),isSearchable:!0,onChange:ke=>{ge(_e=>({..._e,input_type:ke?ke.value:""}))},value:$.find(ke=>ke.value===W.input_type)||null,isClearable:!0,styles:{menuPortal:ke=>({...ke,zIndex:9999})}}),i.jsx(ct,{placeholder:r("Module Type","kivicare-clinic-management-system"),options:pe,onChange:ke=>{ge(_e=>({..._e,module_type:ke?ke.id:""}))},value:pe.find(ke=>ke.id===W.module_type)||null,isSearchable:!0,isClearable:!0,styles:{menuPortal:ke=>({...ke,zIndex:9999})}}),i.jsx(ct,{placeholder:r("Status","kivicare-clinic-management-system"),options:ce,getOptionLabel:ke=>ke.label,getOptionValue:ke=>ke.id,onChange:ke=>{ge(_e=>({..._e,status:ke?ke.id:""}))},value:ce.find(ke=>ke.id===W.status)||null,isClearable:!0,styles:{menuPortal:ke=>({...ke,zIndex:9999})}})]}),i.jsx("div",{className:"d-flex align-items-center input-search-select",children:i.jsxs("div",{className:"input-group input-group-search",children:[i.jsx("span",{className:"input-group-text",children:i.jsx("i",{className:"ph ph-magnifying-glass"})}),i.jsx("input",{type:"text",className:"form-control",placeholder:"Search Anything",onChange:se})]})})]}),i.jsx("div",{className:"table-responsive",children:i.jsx(wn,{data:u,columns:B,isLoading:he,error:le,currentPage:Q.currentPage,perPage:Q.perPage,totalItems:Q.total,lastPage:Q.lastPage,onPageChange:ke=>ge(_e=>({..._e,page:ke})),onPerPageChange:ke=>ge(_e=>({..._e,perPage:ke,page:1})),enableSelection:!1,onSortingChange:te,manualSorting:!0})})]}),o&&i.jsxs("div",{className:"add-custom-filed-setting",children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap gap-3 mb-3",children:[i.jsx("h6",{className:"setting-title m-0",children:p?r("Edit Custom Field","kivicare-clinic-management-system"):r("Add Custom Field","kivicare-clinic-management-system")}),i.jsxs("button",{type:"button",className:"btn btn-sm btn-primary fw-semibold d-flex align-items-center gap-1 back-btn",onClick:()=>{t("/setting/custom-field"),c(!1),g(null)},children:[i.jsx("i",{className:"ph ph-caret-left"}),i.jsx("span",{className:"font-size-14",children:r("Back","kivicare-clinic-management-system")})]})]}),i.jsxs("form",{onSubmit:b(Be),children:[i.jsx("div",{className:"card",children:i.jsx("div",{className:"card-body",children:i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-lg-4",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[r("Module","kivicare-clinic-management-system")," ",i.jsx("span",{className:"input-field-reuquired",children:"*"})]}),i.jsx(ye,{name:"module_type",control:y,rules:{required:r("Module is required","kivicare-clinic-management-system")},render:({field:ke})=>i.jsxs("div",{className:"position-relative",children:[i.jsxs("select",{className:"form-select select2-basic-single",value:ke.value?JSON.stringify(ke.value):"",onChange:_e=>{const Ye=pe.find(tt=>JSON.stringify(tt)===_e.target.value);ke.onChange(Ye||null)},children:[i.jsx("option",{value:"",children:r("Select Module","kivicare-clinic-management-system")}),pe.filter(_e=>A||_e.id!=="appointment_module").map(_e=>i.jsx("option",{value:JSON.stringify(_e),children:_e.label},_e.id))]}),ke.value&&i.jsx("button",{type:"button",className:"btn btn-sm position-absolute btn-flatpickr-clear",onClick:()=>ke.onChange(null),title:r("Clear selection","kivicare-clinic-management-system"),children:i.jsx("i",{className:"ph ph-x"})})]})}),k.module_type&&i.jsx("span",{className:"text-danger p",children:k.module_type.message})]})}),i.jsx("div",{className:"col-lg-4",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[r("Doctor","kivicare-clinic-management-system")," "]}),i.jsx(ye,{name:"module_id",control:y,render:({field:ke})=>i.jsxs("div",{className:"position-relative",children:[i.jsxs("select",{className:"form-select select2-basic-single",value:ke.value?JSON.stringify(ke.value):"",onChange:_e=>{const Ye=_.find(tt=>JSON.stringify(tt)===_e.target.value);ke.onChange(Ye||null)},disabled:!ne||ne.id!=="appointment_module",children:[i.jsx("option",{value:"",children:r("Select Doctor","kivicare-clinic-management-system")}),_.map(_e=>i.jsx("option",{value:JSON.stringify(_e),children:_e.label},_e.id))]}),ke.value&&ne?.id==="appointment_module"&&i.jsx("button",{type:"button",className:"btn btn-sm position-absolute btn-flatpickr-clear",onClick:()=>ke.onChange(null),title:r("Clear selection","kivicare-clinic-management-system"),children:i.jsx("i",{className:"ph ph-x"})})]})}),k.module_id&&i.jsx("span",{className:"text-danger p",children:k.module_id.message})]})}),i.jsx("div",{className:"col-lg-4",children:i.jsx("div",{className:"form-group",children:i.jsx(ye,{name:"label",control:y,rules:{required:r("Label is required","kivicare-clinic-management-system")},render:({field:ke})=>i.jsx(Ht,{placeholder:r('e.g. "Patient Module"',"kivicare-clinic-management-system"),required:!0,label:r("Label (Where it looks like)","kivicare-clinic-management-system"),hasTooltip:l!=="on",hasUrl:l!=="on"?"https://documentation.iqonic.design/kivicare-wordpress/kivicare-lite/documentation/core-concepts/custom-fields/":"",type:"text",isDisable:!1,error:k.label,value:ke.value??"",onChange:ke.onChange,className:"form-control"})})})}),i.jsx("div",{className:"col-lg-4",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[r("Input Type","kivicare-clinic-management-system")," ",i.jsx("span",{className:"input-field-reuquired",children:"*"})]}),i.jsx(ye,{name:"type",control:y,rules:{required:r("Input Type is required","kivicare-clinic-management-system")},render:({field:ke})=>i.jsxs("div",{className:"position-relative",children:[i.jsxs("select",{className:"form-select select2-basic-single",value:ke.value?JSON.stringify(ke.value):"",onChange:_e=>{const Ye=$.find(tt=>JSON.stringify(tt)===_e.target.value);ke.onChange(Ye||null)},children:[i.jsx("option",{value:"",children:r("Select Input Type","kivicare-clinic-management-system")}),$.map(_e=>i.jsx("option",{value:JSON.stringify(_e),children:_e.label},_e.value))]}),ke.value&&i.jsx("button",{type:"button",className:"btn btn-sm position-absolute btn-flatpickr-clear",onClick:()=>ke.onChange(null),title:r("Clear selection","kivicare-clinic-management-system"),children:i.jsx("i",{className:"ph ph-x"})})]})}),k.type&&i.jsx("span",{className:"text-danger p",children:k.type.message})]})}),Y?.value&&Y.value!=="file_upload"&&i.jsx("div",{className:"col-lg-4",children:i.jsx("div",{className:"form-group",children:i.jsx(ye,{name:"placeholder",control:y,render:({field:ke})=>i.jsx(Ht,{placeholder:r('eg "Enter placeholder" ',"kivicare-clinic-management-system"),required:!1,label:r("Placeholder","kivicare-clinic-management-system"),type:"text",isDisable:!1,error:k.placeholder,value:ke.value??"",onChange:ke.onChange,className:"form-control"})})})}),Y?.value&&Y.value==="file_upload"&&i.jsx("div",{className:"col-lg-4",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[r("File Types","kivicare-clinic-management-system")," ",i.jsx("span",{className:"input-field-reuquired",children:"*"})]}),i.jsx(ye,{name:"file_types",control:y,rules:{validate:ke=>Y?.value==="file_upload"&&(!ke||ke.length===0)?r("File types are required for file upload","kivicare-clinic-management-system"):!0},render:({field:ke})=>i.jsx(ct,{isMulti:!0,className:"w-100",placeholder:r("Select file types","kivicare-clinic-management-system"),options:tx,getOptionLabel:_e=>_e.text,getOptionValue:_e=>_e.id,value:ke.value||[],onChange:ke.onChange,isClearable:!0,styles:{menuPortal:_e=>({..._e,zIndex:9999})}})}),k.file_types&&i.jsx("span",{className:"text-danger p",children:k.file_types.message})]})}),Y?.value&&["select","multi_select","radio","checkbox"].includes(Y.value)&&i.jsx("div",{className:"col-lg-4",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[r("Options","kivicare-clinic-management-system")," ",i.jsx("span",{className:"input-field-reuquired",children:"*"})]}),i.jsx(ye,{name:"options",control:y,rules:{validate:ke=>Y?.value&&["select","multi_select","radio","checkbox"].includes(Y.value)&&(!ke||ke.length===0)?r("Options are required for this input type","kivicare-clinic-management-system"):!0},render:({field:ke})=>i.jsx(mu,{isMulti:!0,className:"w-100",placeholder:r("Type and press enter to add","kivicare-clinic-management-system"),value:ke.value||[],onChange:ke.onChange,onCreateOption:_e=>{const Ye={label:_e,value:_e};U(tt=>[...tt,Ye]),ke.onChange([...ke.value||[],Ye])},options:[...ae,...ke.value||[]],isClearable:!0})}),k.options&&i.jsx("span",{className:"text-danger p",children:k.options.message})]})}),i.jsx("div",{className:"col-lg-4",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[r("Status","kivicare-clinic-management-system")," ",i.jsx("span",{className:"input-field-reuquired",children:"*"})]}),i.jsx(ye,{name:"status",control:y,rules:{required:r("Status is required","kivicare-clinic-management-system")},render:({field:ke})=>i.jsxs("div",{className:"position-relative",children:[i.jsxs("select",{className:"form-select select2-basic-single",value:ke.value?JSON.stringify(ke.value):"",onChange:_e=>{const Ye=ce.find(tt=>JSON.stringify(tt)===_e.target.value);ke.onChange(Ye||null)},children:[i.jsx("option",{value:"",children:r("Select Status","kivicare-clinic-management-system")}),ce.map(_e=>i.jsx("option",{value:JSON.stringify(_e),children:_e.label},_e.id))]}),ke.value&&i.jsx("button",{type:"button",className:"btn btn-sm position-absolute btn-flatpickr-clear",onClick:()=>ke.onChange(null),title:r("Clear selection","kivicare-clinic-management-system"),children:i.jsx("i",{className:"ph ph-x"})})]})}),k.status&&i.jsx("span",{className:"text-danger p",children:k.status.message})]})}),i.jsx("div",{className:"col-lg-4",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[r("Validation","kivicare-clinic-management-system")," "]}),i.jsx(ye,{name:"isRequired",control:y,render:({field:ke})=>i.jsx("div",{className:"bg-body px-3 py-2 rounded",children:i.jsxs("div",{className:"form-check mb-0",children:[i.jsx("input",{className:"form-check-input",type:"checkbox",id:"mandatory-field",checked:!!ke.value,onChange:ke.onChange}),i.jsx("label",{htmlFor:"mandatory-field",className:"form-check-label",children:r("Mandatory field","kivicare-clinic-management-system")})]})})}),k.isRequired&&i.jsx("span",{className:"text-danger p",children:k.isRequired.message})]})})]})})}),i.jsxs("div",{className:"d-flex justify-content-end flex-wrap row-gap-2 column-gap-4 mb-5",children:[i.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>{t("/setting/custom-field"),c(!1),g(null)},children:r("Cancel","kivicare-clinic-management-system")}),i.jsx("button",{type:"submit",className:"btn btn-primary",disabled:P,children:P?p?r("Updating...","kivicare-clinic-management-system"):r("Saving...","kivicare-clinic-management-system"):p?r("Update","kivicare-clinic-management-system"):r("Save","kivicare-clinic-management-system")})]})]})]})]}),i.jsx(Lr,{show:d,onHide:()=>m(!1),onDataRefresh:et,context:"custom-fields"})]})},sse=()=>i.jsx("div",{className:"custom-form-preview-skeleton p-3",children:i.jsxs(Yn,{className:"g-3",children:[i.jsx(Et,{md:6,children:i.jsxs("div",{className:"mb-3",children:[i.jsx(S,{width:"120px",height:"1rem",className:"mb-2"}),i.jsx(S,{width:"100%",height:"2.5rem"})]})}),i.jsx(Et,{md:6,children:i.jsxs("div",{className:"mb-3",children:[i.jsx(S,{width:"100px",height:"1rem",className:"mb-2"}),i.jsx(S,{width:"100%",height:"2.5rem"})]})}),i.jsx(Et,{md:12,children:i.jsxs("div",{className:"mb-3",children:[i.jsx(S,{width:"150px",height:"1rem",className:"mb-2"}),i.jsx(S,{width:"100%",height:"5rem"})]})}),i.jsx(Et,{md:4,children:i.jsxs("div",{className:"mb-3",children:[i.jsx(S,{width:"90px",height:"1rem",className:"mb-2"}),i.jsx(S,{width:"100%",height:"2.5rem"})]})}),i.jsx(Et,{md:4,children:i.jsxs("div",{className:"mb-3",children:[i.jsx(S,{width:"110px",height:"1rem",className:"mb-2"}),i.jsx(S,{width:"100%",height:"2.5rem"})]})}),i.jsx(Et,{md:4,children:i.jsxs("div",{className:"mb-3",children:[i.jsx(S,{width:"80px",height:"1rem",className:"mb-2"}),i.jsx(S,{width:"100%",height:"2.5rem"})]})}),i.jsx(Et,{md:12,children:i.jsxs("div",{className:"mb-3",children:[i.jsx(S,{width:"130px",height:"1rem",className:"mb-2"}),i.jsxs("div",{className:"d-flex gap-3",children:[i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsx(S,{width:"20px",height:"20px",style:{borderRadius:"4px"}}),i.jsx(S,{width:"80px",height:"1rem"})]}),i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsx(S,{width:"20px",height:"20px",style:{borderRadius:"4px"}}),i.jsx(S,{width:"100px",height:"1rem"})]}),i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsx(S,{width:"20px",height:"20px",style:{borderRadius:"4px"}}),i.jsx(S,{width:"60px",height:"1rem"})]})]})]})})]})}),ase=()=>{const[t,e]=f.useState(""),[n,s]=f.useState(1),[a]=f.useState(10),[l,o]=f.useState(!1),[c,d]=f.useState(null),{hasCapability:m,isAddonActive:u}=mt(),h=u("kiviPro"),{data:p}=Sn(),g=p?.data?.hideUtilityLinks,{data:v,isLoading:x,error:y}=OJ({page:n,limit:a,search:t||void 0},{enabled:h}),b=$J(),k=BJ(),w=v?.pagination||{total:0,lastPage:1,perPage:a,currentPage:n},T=v?.data?.forms?.map(A=>({id:A.id,name:A.name?.text||A.name,type:A.moduleType?.label,status:A.status.label,statusValue:A.status.value,statusClass:A.status.value==="active"?"bg-success-subtle":"bg-danger-subtle",hasView:!0}))||[],j=Ln(),D=[j.accessor("id",{id:"id",header:()=>r("ID","kivicare-clinic-management-system")}),j.accessor("name",{header:()=>r("Name","kivicare-clinic-management-system")}),j.accessor("type",{header:()=>r("Type","kivicare-clinic-management-system")}),j.accessor("status",{header:()=>r("Status","kivicare-clinic-management-system"),cell:A=>{const P=A.row.original.id,E=A.row.original.statusValue,I=A.getValue(),M=E==="active",O=F=>{const H=F?1:0;k.mutate({id:P,status:H},{onSuccess:()=>{Se.success(r("Form status has been updated.","kivicare-clinic-management-system"))},onError:()=>{Se.error(r("Failed to update form status.","kivicare-clinic-management-system"))}})};return i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsx(cn,{checked:M,onChange:O,disabled:k.isLoading,className:"m-0"}),i.jsx("span",{className:`badge ${A.row.original.statusClass}`,children:I})]})}}),...m("custom_form_view")||m("custom_form_edit")||m("custom_form_delete")?[j.accessor("actions",{header:()=>r("Actions","kivicare-clinic-management-system"),enableSorting:!1,cell:A=>i.jsx(_,{hasView:A.row.original.hasView,id:A.row.original.id})})]:[]],_=({hasView:A,id:P})=>{const E=()=>{d(P),o(!0)},I=()=>{Ze.fire({title:r("Are you sure?","kivicare-clinic-management-system"),text:r("You won't be able to revert this!","kivicare-clinic-management-system"),icon:"warning",showCancelButton:!0,confirmButtonColor:"var(--bs-primary)",cancelButtonColor:"var(--bs-secondary)",confirmButtonText:r("Yes, delete it!","kivicare-clinic-management-system")}).then(M=>{M.isConfirmed&&b.mutate(P,{onSuccess:()=>{Ze.fire(r("Deleted!","kivicare-clinic-management-system"),r("Your form has been deleted.","kivicare-clinic-management-system"),"success")},onError:()=>{Ze.fire(r("Error!","kivicare-clinic-management-system"),r("Failed to delete the form.","kivicare-clinic-management-system"),"error")}})})};return i.jsxs("div",{className:"d-flex align-items-center gap-3",children:[A&&m("custom_form_view")&&i.jsx(Qe,{placement:"top",overlay:i.jsx(ut,{children:r("View","kivicare-clinic-management-system")}),children:i.jsx("button",{type:"button",onClick:E,className:"btn btn-link p-0 d-inline-block",children:i.jsx("span",{className:"text-gray fs-5",children:i.jsx("i",{className:"ph ph-eye"})})})}),m("custom_form_edit")&&i.jsx(Qe,{placement:"top",overlay:i.jsx(ut,{children:r("Edit","kivicare-clinic-management-system")}),children:i.jsx(ht,{to:`edit/${P}`,className:"d-inline-block delete-btn",children:i.jsx("span",{className:"text-success fs-5",children:i.jsx("i",{className:"ph ph-pencil-simple-line"})})})}),m("custom_form_delete")&&i.jsx(Qe,{placement:"top",overlay:i.jsx(ut,{children:r("Delete","kivicare-clinic-management-system")}),children:i.jsx("a",{href:"#",onClick:M=>{M.preventDefault(),I()},className:"d-inline-block delete-btn",children:i.jsx("span",{className:"text-danger fs-5",children:i.jsx("i",{className:"ph ph-trash"})})})})]})},N=A=>{e(A.target.value),s(1)};return y?i.jsx("div",{className:"alert alert-danger",children:r("Failed to load custom forms","kivicare-clinic-management-system")}):i.jsxs("div",{children:[i.jsx("div",{className:"tab-pane fade show active",id:"v-pills-custom-form",role:"tabpanel","aria-labelledby":"v-pills-custom-form-tab",tabIndex:"0",children:i.jsxs("div",{className:`custom-forms-setting${h?"":" p-4"}`,children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap gap-3 mb-3",children:[i.jsxs("h6",{className:"setting-title m-0",children:[r("Custom Form List","kivicare-clinic-management-system")," ",g!=="on"&&i.jsx("a",{href:"https://documentation.iqonic.design/kivicare-wordpress/kivicare-pro/documentation-kivicare-pro/configuration-kivi-pro/custom-form-settings/",target:"_blank",rel:"noopener noreferrer",children:i.jsx("i",{className:"ph ph-question align-middle h5 text-primary"})})]}),i.jsxs("div",{className:"d-flex align-items-center flex-wrap gap-3",children:[i.jsx("div",{className:"d-flex align-items-center input-search-select",children:i.jsxs("div",{className:"input-group input-group-search",children:[i.jsx("span",{className:"input-group-text",children:i.jsx("i",{className:"ph ph-magnifying-glass"})}),i.jsx("input",{type:"text",className:"form-control",placeholder:"Search Anything",value:t,onChange:N})]})}),m("custom_form_add")&&i.jsxs(ht,{to:"add/",className:`btn btn-primary d-flex align-items-center gap-2 ${h?"":"disabled"}`,children:[i.jsx("i",{className:"ph ph-plus-circle"}),i.jsx("span",{children:r("Add Form","kivicare-clinic-management-system")})]})]}),!h&&i.jsx(di,{title:r("Available For Kivicare Pro","kivicare-clinic-management-system"),link:"https://codecanyon.net/item/kivicare-pro-clinic-patient-management-system-ehr-addon/30690654?s_rank=3"})]}),i.jsx("div",{className:"table-responsive",children:i.jsx(wn,{data:T,columns:D,currentPage:w.currentPage,perPage:w.perPage,totalItems:w.total,lastPage:w.lastPage,enableSelection:!1,isLoading:x,onPageChange:s})})]})}),i.jsx(rse,{show:l,onHide:()=>o(!1),formId:c})]})},rse=({show:t,onHide:e,formId:n})=>{const{data:s,isLoading:a}=eP(n,{enabled:!!n}),l=s?.data;return i.jsxs(lt,{show:t,onHide:e,size:"lg",centered:!0,backdrop:"static",children:[i.jsx(lt.Header,{closeButton:!0,children:i.jsxs(lt.Title,{children:[r("Form Preview","kivicare-clinic-management-system")," - ",l?.name?.text||l?.name]})}),i.jsx(lt.Body,{children:a?i.jsx(sse,{}):i.jsxs("div",{className:"preview-container p-3",children:[i.jsx(Ua,{fields:l?.fields||[],data:{},readOnly:!1,formId:`preview_form_${n}`}),l?.fields?.length===0&&i.jsxs("div",{className:"text-center p-5",children:[i.jsx("i",{className:"ph ph-file-text font-size-48 text-muted mb-3 d-block"}),i.jsx("h6",{className:"text-muted",children:r("No Fields Added","kivicare-clinic-management-system")}),i.jsx("p",{className:"text-muted mb-0",children:r("Add some fields to see the form preview.","kivicare-clinic-management-system")})]})]})}),i.jsx(lt.Footer,{children:i.jsx("button",{type:"button",className:"btn btn-secondary",onClick:e,children:r("Close Preview","kivicare-clinic-management-system")})})]})};function lse(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return f.useMemo(()=>s=>{e.forEach(a=>a(s))},e)}const cf=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function rd(t){const e=Object.prototype.toString.call(t);return e==="[object Window]"||e==="[object global]"}function Lw(t){return"nodeType"in t}function Xi(t){var e,n;return t?rd(t)?t:Lw(t)&&(e=(n=t.ownerDocument)==null?void 0:n.defaultView)!=null?e:window:window}function $w(t){const{Document:e}=Xi(t);return t instanceof e}function uu(t){return rd(t)?!1:t instanceof Xi(t).HTMLElement}function AP(t){return t instanceof Xi(t).SVGElement}function ld(t){return t?rd(t)?t.document:Lw(t)?$w(t)?t:uu(t)||AP(t)?t.ownerDocument:document:document:document}const fa=cf?f.useLayoutEffect:f.useEffect;function df(t){const e=f.useRef(t);return fa(()=>{e.current=t}),f.useCallback(function(){for(var n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];return e.current==null?void 0:e.current(...s)},[])}function ose(){const t=f.useRef(null),e=f.useCallback((s,a)=>{t.current=setInterval(s,a)},[]),n=f.useCallback(()=>{t.current!==null&&(clearInterval(t.current),t.current=null)},[]);return[e,n]}function Pm(t,e){e===void 0&&(e=[t]);const n=f.useRef(t);return fa(()=>{n.current!==t&&(n.current=t)},e),n}function hu(t,e){const n=f.useRef();return f.useMemo(()=>{const s=t(n.current);return n.current=s,s},[...e])}function ig(t){const e=df(t),n=f.useRef(null),s=f.useCallback(a=>{a!==n.current&&e?.(a,n.current),n.current=a},[]);return[n,s]}function sg(t){const e=f.useRef();return f.useEffect(()=>{e.current=t},[t]),e.current}let ix={};function pu(t,e){return f.useMemo(()=>{if(e)return e;const n=ix[t]==null?0:ix[t]+1;return ix[t]=n,t+"-"+n},[t,e])}function DP(t){return function(e){for(var n=arguments.length,s=new Array(n>1?n-1:0),a=1;a<n;a++)s[a-1]=arguments[a];return s.reduce((l,o)=>{const c=Object.entries(o);for(const[d,m]of c){const u=l[d];u!=null&&(l[d]=u+t*m)}return l},{...e})}}const wc=DP(1),ag=DP(-1);function cse(t){return"clientX"in t&&"clientY"in t}function mf(t){if(!t)return!1;const{KeyboardEvent:e}=Xi(t.target);return e&&t instanceof e}function dse(t){if(!t)return!1;const{TouchEvent:e}=Xi(t.target);return e&&t instanceof e}function rg(t){if(dse(t)){if(t.touches&&t.touches.length){const{clientX:e,clientY:n}=t.touches[0];return{x:e,y:n}}else if(t.changedTouches&&t.changedTouches.length){const{clientX:e,clientY:n}=t.changedTouches[0];return{x:e,y:n}}}return cse(t)?{x:t.clientX,y:t.clientY}:null}const Wa=Object.freeze({Translate:{toString(t){if(!t)return;const{x:e,y:n}=t;return"translate3d("+(e?Math.round(e):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(t){if(!t)return;const{scaleX:e,scaleY:n}=t;return"scaleX("+e+") scaleY("+n+")"}},Transform:{toString(t){if(t)return[Wa.Translate.toString(t),Wa.Scale.toString(t)].join(" ")}},Transition:{toString(t){let{property:e,duration:n,easing:s}=t;return e+" "+n+"ms "+s}}}),OC="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function mse(t){return t.matches(OC)?t:t.querySelector(OC)}const use={display:"none"};function hse(t){let{id:e,value:n}=t;return He.createElement("div",{id:e,style:use},n)}function pse(t){let{id:e,announcement:n,ariaLiveType:s="assertive"}=t;const a={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return He.createElement("div",{id:e,style:a,role:"status","aria-live":s,"aria-atomic":!0},n)}function gse(){const[t,e]=f.useState("");return{announce:f.useCallback(s=>{s!=null&&e(s)},[]),announcement:t}}const RP=f.createContext(null);function fse(t){const e=f.useContext(RP);f.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(t)},[t,e])}function vse(){const[t]=f.useState(()=>new Set),e=f.useCallback(s=>(t.add(s),()=>t.delete(s)),[t]);return[f.useCallback(s=>{let{type:a,event:l}=s;t.forEach(o=>{var c;return(c=o[a])==null?void 0:c.call(o,l)})},[t]),e]}const xse={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},yse={onDragStart(t){let{active:e}=t;return"Picked up draggable item "+e.id+"."},onDragOver(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was moved over droppable area "+n.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was dropped over droppable area "+n.id:"Draggable item "+e.id+" was dropped."},onDragCancel(t){let{active:e}=t;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function bse(t){let{announcements:e=yse,container:n,hiddenTextDescribedById:s,screenReaderInstructions:a=xse}=t;const{announce:l,announcement:o}=gse(),c=pu("DndLiveRegion"),[d,m]=f.useState(!1);if(f.useEffect(()=>{m(!0)},[]),fse(f.useMemo(()=>({onDragStart(h){let{active:p}=h;l(e.onDragStart({active:p}))},onDragMove(h){let{active:p,over:g}=h;e.onDragMove&&l(e.onDragMove({active:p,over:g}))},onDragOver(h){let{active:p,over:g}=h;l(e.onDragOver({active:p,over:g}))},onDragEnd(h){let{active:p,over:g}=h;l(e.onDragEnd({active:p,over:g}))},onDragCancel(h){let{active:p,over:g}=h;l(e.onDragCancel({active:p,over:g}))}}),[l,e])),!d)return null;const u=He.createElement(He.Fragment,null,He.createElement(hse,{id:s,value:a.draggable}),He.createElement(pse,{id:c,announcement:o}));return n?Ma.createPortal(u,n):u}var ui;(function(t){t.DragStart="dragStart",t.DragMove="dragMove",t.DragEnd="dragEnd",t.DragCancel="dragCancel",t.DragOver="dragOver",t.RegisterDroppable="registerDroppable",t.SetDroppableDisabled="setDroppableDisabled",t.UnregisterDroppable="unregisterDroppable"})(ui||(ui={}));function lg(){}function Qh(t,e){return f.useMemo(()=>({sensor:t,options:e??{}}),[t,e])}function PP(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return f.useMemo(()=>[...e].filter(s=>s!=null),[...e])}const va=Object.freeze({x:0,y:0});function kse(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function wse(t,e){const n=rg(t);if(!n)return"0 0";const s={x:(n.x-e.left)/e.width*100,y:(n.y-e.top)/e.height*100};return s.x+"% "+s.y+"%"}function jse(t,e){let{data:{value:n}}=t,{data:{value:s}}=e;return n-s}function Nse(t,e){let{data:{value:n}}=t,{data:{value:s}}=e;return s-n}function Cse(t,e){if(!t||t.length===0)return null;const[n]=t;return n[e]}function FC(t,e,n){return e===void 0&&(e=t.left),n===void 0&&(n=t.top),{x:e+t.width*.5,y:n+t.height*.5}}const MP=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:s}=t;const a=FC(e,e.left,e.top),l=[];for(const o of s){const{id:c}=o,d=n.get(c);if(d){const m=kse(FC(d),a);l.push({id:c,data:{droppableContainer:o,value:m}})}}return l.sort(jse)};function _se(t,e){const n=Math.max(e.top,t.top),s=Math.max(e.left,t.left),a=Math.min(e.left+e.width,t.left+t.width),l=Math.min(e.top+e.height,t.top+t.height),o=a-s,c=l-n;if(s<a&&n<l){const d=e.width*e.height,m=t.width*t.height,u=o*c,h=u/(d+m-u);return Number(h.toFixed(4))}return 0}const IP=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:s}=t;const a=[];for(const l of s){const{id:o}=l,c=n.get(o);if(c){const d=_se(c,e);d>0&&a.push({id:o,data:{droppableContainer:l,value:d}})}}return a.sort(Nse)};function Sse(t,e,n){return{...t,scaleX:e&&n?e.width/n.width:1,scaleY:e&&n?e.height/n.height:1}}function OP(t,e){return t&&e?{x:t.left-e.left,y:t.top-e.top}:va}function Ese(t){return function(n){for(var s=arguments.length,a=new Array(s>1?s-1:0),l=1;l<s;l++)a[l-1]=arguments[l];return a.reduce((o,c)=>({...o,top:o.top+t*c.y,bottom:o.bottom+t*c.y,left:o.left+t*c.x,right:o.right+t*c.x}),{...n})}}const Tse=Ese(1);function FP(t){if(t.startsWith("matrix3d(")){const e=t.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(t.startsWith("matrix(")){const e=t.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function Ase(t,e,n){const s=FP(e);if(!s)return t;const{scaleX:a,scaleY:l,x:o,y:c}=s,d=t.left-o-(1-a)*parseFloat(n),m=t.top-c-(1-l)*parseFloat(n.slice(n.indexOf(" ")+1)),u=a?t.width/a:t.width,h=l?t.height/l:t.height;return{width:u,height:h,top:m,right:d+u,bottom:m+h,left:d}}const Dse={ignoreTransform:!1};function od(t,e){e===void 0&&(e=Dse);let n=t.getBoundingClientRect();if(e.ignoreTransform){const{transform:m,transformOrigin:u}=Xi(t).getComputedStyle(t);m&&(n=Ase(n,m,u))}const{top:s,left:a,width:l,height:o,bottom:c,right:d}=n;return{top:s,left:a,width:l,height:o,bottom:c,right:d}}function LC(t){return od(t,{ignoreTransform:!0})}function Rse(t){const e=t.innerWidth,n=t.innerHeight;return{top:0,left:0,right:e,bottom:n,width:e,height:n}}function Pse(t,e){return e===void 0&&(e=Xi(t).getComputedStyle(t)),e.position==="fixed"}function Mse(t,e){e===void 0&&(e=Xi(t).getComputedStyle(t));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(a=>{const l=e[a];return typeof l=="string"?n.test(l):!1})}function Bw(t,e){const n=[];function s(a){if(e!=null&&n.length>=e||!a)return n;if($w(a)&&a.scrollingElement!=null&&!n.includes(a.scrollingElement))return n.push(a.scrollingElement),n;if(!uu(a)||AP(a)||n.includes(a))return n;const l=Xi(t).getComputedStyle(a);return a!==t&&Mse(a,l)&&n.push(a),Pse(a,l)?n:s(a.parentNode)}return t?s(t):n}function LP(t){const[e]=Bw(t,1);return e??null}function sx(t){return!cf||!t?null:rd(t)?t:Lw(t)?$w(t)||t===ld(t).scrollingElement?window:uu(t)?t:null:null}function $P(t){return rd(t)?t.scrollX:t.scrollLeft}function BP(t){return rd(t)?t.scrollY:t.scrollTop}function Yy(t){return{x:$P(t),y:BP(t)}}var fi;(function(t){t[t.Forward=1]="Forward",t[t.Backward=-1]="Backward"})(fi||(fi={}));function qP(t){return!cf||!t?!1:t===document.scrollingElement}function HP(t){const e={x:0,y:0},n=qP(t)?{height:window.innerHeight,width:window.innerWidth}:{height:t.clientHeight,width:t.clientWidth},s={x:t.scrollWidth-n.width,y:t.scrollHeight-n.height},a=t.scrollTop<=e.y,l=t.scrollLeft<=e.x,o=t.scrollTop>=s.y,c=t.scrollLeft>=s.x;return{isTop:a,isLeft:l,isBottom:o,isRight:c,maxScroll:s,minScroll:e}}const Ise={x:.2,y:.2};function Ose(t,e,n,s,a){let{top:l,left:o,right:c,bottom:d}=n;s===void 0&&(s=10),a===void 0&&(a=Ise);const{isTop:m,isBottom:u,isLeft:h,isRight:p}=HP(t),g={x:0,y:0},v={x:0,y:0},x={height:e.height*a.y,width:e.width*a.x};return!m&&l<=e.top+x.height?(g.y=fi.Backward,v.y=s*Math.abs((e.top+x.height-l)/x.height)):!u&&d>=e.bottom-x.height&&(g.y=fi.Forward,v.y=s*Math.abs((e.bottom-x.height-d)/x.height)),!p&&c>=e.right-x.width?(g.x=fi.Forward,v.x=s*Math.abs((e.right-x.width-c)/x.width)):!h&&o<=e.left+x.width&&(g.x=fi.Backward,v.x=s*Math.abs((e.left+x.width-o)/x.width)),{direction:g,speed:v}}function Fse(t){if(t===document.scrollingElement){const{innerWidth:l,innerHeight:o}=window;return{top:0,left:0,right:l,bottom:o,width:l,height:o}}const{top:e,left:n,right:s,bottom:a}=t.getBoundingClientRect();return{top:e,left:n,right:s,bottom:a,width:t.clientWidth,height:t.clientHeight}}function zP(t){return t.reduce((e,n)=>wc(e,Yy(n)),va)}function Lse(t){return t.reduce((e,n)=>e+$P(n),0)}function $se(t){return t.reduce((e,n)=>e+BP(n),0)}function VP(t,e){if(e===void 0&&(e=od),!t)return;const{top:n,left:s,bottom:a,right:l}=e(t);LP(t)&&(a<=0||l<=0||n>=window.innerHeight||s>=window.innerWidth)&&t.scrollIntoView({block:"center",inline:"center"})}const Bse=[["x",["left","right"],Lse],["y",["top","bottom"],$se]];class qw{constructor(e,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const s=Bw(n),a=zP(s);this.rect={...e},this.width=e.width,this.height=e.height;for(const[l,o,c]of Bse)for(const d of o)Object.defineProperty(this,d,{get:()=>{const m=c(s),u=a[l]-m;return this.rect[d]+u},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class om{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var s;return(s=this.target)==null?void 0:s.removeEventListener(...n)})},this.target=e}add(e,n,s){var a;(a=this.target)==null||a.addEventListener(e,n,s),this.listeners.push([e,n,s])}}function qse(t){const{EventTarget:e}=Xi(t);return t instanceof e?t:ld(t)}function ax(t,e){const n=Math.abs(t.x),s=Math.abs(t.y);return typeof e=="number"?Math.sqrt(n**2+s**2)>e:"x"in e&&"y"in e?n>e.x&&s>e.y:"x"in e?n>e.x:"y"in e?s>e.y:!1}var Ls;(function(t){t.Click="click",t.DragStart="dragstart",t.Keydown="keydown",t.ContextMenu="contextmenu",t.Resize="resize",t.SelectionChange="selectionchange",t.VisibilityChange="visibilitychange"})(Ls||(Ls={}));function $C(t){t.preventDefault()}function Hse(t){t.stopPropagation()}var vn;(function(t){t.Space="Space",t.Down="ArrowDown",t.Right="ArrowRight",t.Left="ArrowLeft",t.Up="ArrowUp",t.Esc="Escape",t.Enter="Enter",t.Tab="Tab"})(vn||(vn={}));const UP={start:[vn.Space,vn.Enter],cancel:[vn.Esc],end:[vn.Space,vn.Enter,vn.Tab]},zse=(t,e)=>{let{currentCoordinates:n}=e;switch(t.code){case vn.Right:return{...n,x:n.x+25};case vn.Left:return{...n,x:n.x-25};case vn.Down:return{...n,y:n.y+25};case vn.Up:return{...n,y:n.y-25}}};class Hw{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:n}}=e;this.props=e,this.listeners=new om(ld(n)),this.windowListeners=new om(Xi(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Ls.Resize,this.handleCancel),this.windowListeners.add(Ls.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Ls.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:n}=this.props,s=e.node.current;s&&VP(s),n(va)}handleKeyDown(e){if(mf(e)){const{active:n,context:s,options:a}=this.props,{keyboardCodes:l=UP,coordinateGetter:o=zse,scrollBehavior:c="smooth"}=a,{code:d}=e;if(l.end.includes(d)){this.handleEnd(e);return}if(l.cancel.includes(d)){this.handleCancel(e);return}const{collisionRect:m}=s.current,u=m?{x:m.left,y:m.top}:va;this.referenceCoordinates||(this.referenceCoordinates=u);const h=o(e,{active:n,context:s.current,currentCoordinates:u});if(h){const p=ag(h,u),g={x:0,y:0},{scrollableAncestors:v}=s.current;for(const x of v){const y=e.code,{isTop:b,isRight:k,isLeft:w,isBottom:T,maxScroll:j,minScroll:D}=HP(x),_=Fse(x),N={x:Math.min(y===vn.Right?_.right-_.width/2:_.right,Math.max(y===vn.Right?_.left:_.left+_.width/2,h.x)),y:Math.min(y===vn.Down?_.bottom-_.height/2:_.bottom,Math.max(y===vn.Down?_.top:_.top+_.height/2,h.y))},A=y===vn.Right&&!k||y===vn.Left&&!w,P=y===vn.Down&&!T||y===vn.Up&&!b;if(A&&N.x!==h.x){const E=x.scrollLeft+p.x,I=y===vn.Right&&E<=j.x||y===vn.Left&&E>=D.x;if(I&&!p.y){x.scrollTo({left:E,behavior:c});return}I?g.x=x.scrollLeft-E:g.x=y===vn.Right?x.scrollLeft-j.x:x.scrollLeft-D.x,g.x&&x.scrollBy({left:-g.x,behavior:c});break}else if(P&&N.y!==h.y){const E=x.scrollTop+p.y,I=y===vn.Down&&E<=j.y||y===vn.Up&&E>=D.y;if(I&&!p.x){x.scrollTo({top:E,behavior:c});return}I?g.y=x.scrollTop-E:g.y=y===vn.Down?x.scrollTop-j.y:x.scrollTop-D.y,g.y&&x.scrollBy({top:-g.y,behavior:c});break}}this.handleMove(e,wc(ag(h,this.referenceCoordinates),g))}}}handleMove(e,n){const{onMove:s}=this.props;e.preventDefault(),s(n)}handleEnd(e){const{onEnd:n}=this.props;e.preventDefault(),this.detach(),n()}handleCancel(e){const{onCancel:n}=this.props;e.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}Hw.activators=[{eventName:"onKeyDown",handler:(t,e,n)=>{let{keyboardCodes:s=UP,onActivation:a}=e,{active:l}=n;const{code:o}=t.nativeEvent;if(s.start.includes(o)){const c=l.activatorNode.current;return c&&t.target!==c?!1:(t.preventDefault(),a?.({event:t.nativeEvent}),!0)}return!1}}];function BC(t){return!!(t&&"distance"in t)}function qC(t){return!!(t&&"delay"in t)}class zw{constructor(e,n,s){var a;s===void 0&&(s=qse(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=n;const{event:l}=e,{target:o}=l;this.props=e,this.events=n,this.document=ld(o),this.documentListeners=new om(this.document),this.listeners=new om(s),this.windowListeners=new om(Xi(o)),this.initialCoordinates=(a=rg(l))!=null?a:va,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:n,bypassActivationConstraint:s}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(Ls.Resize,this.handleCancel),this.windowListeners.add(Ls.DragStart,$C),this.windowListeners.add(Ls.VisibilityChange,this.handleCancel),this.windowListeners.add(Ls.ContextMenu,$C),this.documentListeners.add(Ls.Keydown,this.handleKeydown),n){if(s!=null&&s({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(qC(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(BC(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,n){const{active:s,onPending:a}=this.props;a(s,e,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:e}=this,{onStart:n}=this.props;e&&(this.activated=!0,this.documentListeners.add(Ls.Click,Hse,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Ls.SelectionChange,this.removeTextSelection),n(e))}handleMove(e){var n;const{activated:s,initialCoordinates:a,props:l}=this,{onMove:o,options:{activationConstraint:c}}=l;if(!a)return;const d=(n=rg(e))!=null?n:va,m=ag(a,d);if(!s&&c){if(BC(c)){if(c.tolerance!=null&&ax(m,c.tolerance))return this.handleCancel();if(ax(m,c.distance))return this.handleStart()}if(qC(c)&&ax(m,c.tolerance))return this.handleCancel();this.handlePending(c,m);return}e.cancelable&&e.preventDefault(),o(d)}handleEnd(){const{onAbort:e,onEnd:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleCancel(){const{onAbort:e,onCancel:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleKeydown(e){e.code===vn.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const Vse={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class Vw extends zw{constructor(e){const{event:n}=e,s=ld(n.target);super(e,Vse,s)}}Vw.activators=[{eventName:"onPointerDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:s}=e;return!n.isPrimary||n.button!==0?!1:(s?.({event:n}),!0)}}];const Use={move:{name:"mousemove"},end:{name:"mouseup"}};var Qy;(function(t){t[t.RightClick=2]="RightClick"})(Qy||(Qy={}));class WP extends zw{constructor(e){super(e,Use,ld(e.event.target))}}WP.activators=[{eventName:"onMouseDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:s}=e;return n.button===Qy.RightClick?!1:(s?.({event:n}),!0)}}];const rx={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class KP extends zw{constructor(e){super(e,rx)}static setup(){return window.addEventListener(rx.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(rx.move.name,e)};function e(){}}}KP.activators=[{eventName:"onTouchStart",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:s}=e;const{touches:a}=n;return a.length>1?!1:(s?.({event:n}),!0)}}];var cm;(function(t){t[t.Pointer=0]="Pointer",t[t.DraggableRect=1]="DraggableRect"})(cm||(cm={}));var og;(function(t){t[t.TreeOrder=0]="TreeOrder",t[t.ReversedTreeOrder=1]="ReversedTreeOrder"})(og||(og={}));function Wse(t){let{acceleration:e,activator:n=cm.Pointer,canScroll:s,draggingRect:a,enabled:l,interval:o=5,order:c=og.TreeOrder,pointerCoordinates:d,scrollableAncestors:m,scrollableAncestorRects:u,delta:h,threshold:p}=t;const g=Gse({delta:h,disabled:!l}),[v,x]=ose(),y=f.useRef({x:0,y:0}),b=f.useRef({x:0,y:0}),k=f.useMemo(()=>{switch(n){case cm.Pointer:return d?{top:d.y,bottom:d.y,left:d.x,right:d.x}:null;case cm.DraggableRect:return a}},[n,a,d]),w=f.useRef(null),T=f.useCallback(()=>{const D=w.current;if(!D)return;const _=y.current.x*b.current.x,N=y.current.y*b.current.y;D.scrollBy(_,N)},[]),j=f.useMemo(()=>c===og.TreeOrder?[...m].reverse():m,[c,m]);f.useEffect(()=>{if(!l||!m.length||!k){x();return}for(const D of j){if(s?.(D)===!1)continue;const _=m.indexOf(D),N=u[_];if(!N)continue;const{direction:A,speed:P}=Ose(D,N,k,e,p);for(const E of["x","y"])g[E][A[E]]||(P[E]=0,A[E]=0);if(P.x>0||P.y>0){x(),w.current=D,v(T,o),y.current=P,b.current=A;return}}y.current={x:0,y:0},b.current={x:0,y:0},x()},[e,T,s,x,l,o,JSON.stringify(k),JSON.stringify(g),v,m,j,u,JSON.stringify(p)])}const Kse={x:{[fi.Backward]:!1,[fi.Forward]:!1},y:{[fi.Backward]:!1,[fi.Forward]:!1}};function Gse(t){let{delta:e,disabled:n}=t;const s=sg(e);return hu(a=>{if(n||!s||!a)return Kse;const l={x:Math.sign(e.x-s.x),y:Math.sign(e.y-s.y)};return{x:{[fi.Backward]:a.x[fi.Backward]||l.x===-1,[fi.Forward]:a.x[fi.Forward]||l.x===1},y:{[fi.Backward]:a.y[fi.Backward]||l.y===-1,[fi.Forward]:a.y[fi.Forward]||l.y===1}}},[n,e,s])}function Yse(t,e){const n=e!=null?t.get(e):void 0,s=n?n.node.current:null;return hu(a=>{var l;return e==null?null:(l=s??a)!=null?l:null},[s,e])}function Qse(t,e){return f.useMemo(()=>t.reduce((n,s)=>{const{sensor:a}=s,l=a.activators.map(o=>({eventName:o.eventName,handler:e(o.handler,s)}));return[...n,...l]},[]),[t,e])}var Mm;(function(t){t[t.Always=0]="Always",t[t.BeforeDragging=1]="BeforeDragging",t[t.WhileDragging=2]="WhileDragging"})(Mm||(Mm={}));var Zy;(function(t){t.Optimized="optimized"})(Zy||(Zy={}));const HC=new Map;function Zse(t,e){let{dragging:n,dependencies:s,config:a}=e;const[l,o]=f.useState(null),{frequency:c,measure:d,strategy:m}=a,u=f.useRef(t),h=y(),p=Pm(h),g=f.useCallback(function(b){b===void 0&&(b=[]),!p.current&&o(k=>k===null?b:k.concat(b.filter(w=>!k.includes(w))))},[p]),v=f.useRef(null),x=hu(b=>{if(h&&!n)return HC;if(!b||b===HC||u.current!==t||l!=null){const k=new Map;for(let w of t){if(!w)continue;if(l&&l.length>0&&!l.includes(w.id)&&w.rect.current){k.set(w.id,w.rect.current);continue}const T=w.node.current,j=T?new qw(d(T),T):null;w.rect.current=j,j&&k.set(w.id,j)}return k}return b},[t,l,n,h,d]);return f.useEffect(()=>{u.current=t},[t]),f.useEffect(()=>{h||g()},[n,h]),f.useEffect(()=>{l&&l.length>0&&o(null)},[JSON.stringify(l)]),f.useEffect(()=>{h||typeof c!="number"||v.current!==null||(v.current=setTimeout(()=>{g(),v.current=null},c))},[c,h,g,...s]),{droppableRects:x,measureDroppableContainers:g,measuringScheduled:l!=null};function y(){switch(m){case Mm.Always:return!1;case Mm.BeforeDragging:return n;default:return!n}}}function Uw(t,e){return hu(n=>t?n||(typeof e=="function"?e(t):t):null,[e,t])}function Xse(t,e){return Uw(t,e)}function Jse(t){let{callback:e,disabled:n}=t;const s=df(e),a=f.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:l}=window;return new l(s)},[s,n]);return f.useEffect(()=>()=>a?.disconnect(),[a]),a}function uf(t){let{callback:e,disabled:n}=t;const s=df(e),a=f.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:l}=window;return new l(s)},[n]);return f.useEffect(()=>()=>a?.disconnect(),[a]),a}function eae(t){return new qw(od(t),t)}function zC(t,e,n){e===void 0&&(e=eae);const[s,a]=f.useState(null);function l(){a(d=>{if(!t)return null;if(t.isConnected===!1){var m;return(m=d??n)!=null?m:null}const u=e(t);return JSON.stringify(d)===JSON.stringify(u)?d:u})}const o=Jse({callback(d){if(t)for(const m of d){const{type:u,target:h}=m;if(u==="childList"&&h instanceof HTMLElement&&h.contains(t)){l();break}}}}),c=uf({callback:l});return fa(()=>{l(),t?(c?.observe(t),o?.observe(document.body,{childList:!0,subtree:!0})):(c?.disconnect(),o?.disconnect())},[t]),s}function tae(t){const e=Uw(t);return OP(t,e)}const VC=[];function nae(t){const e=f.useRef(t),n=hu(s=>t?s&&s!==VC&&t&&e.current&&t.parentNode===e.current.parentNode?s:Bw(t):VC,[t]);return f.useEffect(()=>{e.current=t},[t]),n}function iae(t){const[e,n]=f.useState(null),s=f.useRef(t),a=f.useCallback(l=>{const o=sx(l.target);o&&n(c=>c?(c.set(o,Yy(o)),new Map(c)):null)},[]);return f.useEffect(()=>{const l=s.current;if(t!==l){o(l);const c=t.map(d=>{const m=sx(d);return m?(m.addEventListener("scroll",a,{passive:!0}),[m,Yy(m)]):null}).filter(d=>d!=null);n(c.length?new Map(c):null),s.current=t}return()=>{o(t),o(l)};function o(c){c.forEach(d=>{const m=sx(d);m?.removeEventListener("scroll",a)})}},[a,t]),f.useMemo(()=>t.length?e?Array.from(e.values()).reduce((l,o)=>wc(l,o),va):zP(t):va,[t,e])}function UC(t,e){e===void 0&&(e=[]);const n=f.useRef(null);return f.useEffect(()=>{n.current=null},e),f.useEffect(()=>{const s=t!==va;s&&!n.current&&(n.current=t),!s&&n.current&&(n.current=null)},[t]),n.current?ag(t,n.current):va}function sae(t){f.useEffect(()=>{if(!cf)return;const e=t.map(n=>{let{sensor:s}=n;return s.setup==null?void 0:s.setup()});return()=>{for(const n of e)n?.()}},t.map(e=>{let{sensor:n}=e;return n}))}function aae(t,e){return f.useMemo(()=>t.reduce((n,s)=>{let{eventName:a,handler:l}=s;return n[a]=o=>{l(o,e)},n},{}),[t,e])}function GP(t){return f.useMemo(()=>t?Rse(t):null,[t])}const WC=[];function rae(t,e){e===void 0&&(e=od);const[n]=t,s=GP(n?Xi(n):null),[a,l]=f.useState(WC);function o(){l(()=>t.length?t.map(d=>qP(d)?s:new qw(e(d),d)):WC)}const c=uf({callback:o});return fa(()=>{c?.disconnect(),o(),t.forEach(d=>c?.observe(d))},[t]),a}function YP(t){if(!t)return null;if(t.children.length>1)return t;const e=t.children[0];return uu(e)?e:t}function lae(t){let{measure:e}=t;const[n,s]=f.useState(null),a=f.useCallback(m=>{for(const{target:u}of m)if(uu(u)){s(h=>{const p=e(u);return h?{...h,width:p.width,height:p.height}:p});break}},[e]),l=uf({callback:a}),o=f.useCallback(m=>{const u=YP(m);l?.disconnect(),u&&l?.observe(u),s(u?e(u):null)},[e,l]),[c,d]=ig(o);return f.useMemo(()=>({nodeRef:c,rect:n,setRef:d}),[n,c,d])}const oae=[{sensor:Vw,options:{}},{sensor:Hw,options:{}}],cae={current:{}},Zh={draggable:{measure:LC},droppable:{measure:LC,strategy:Mm.WhileDragging,frequency:Zy.Optimized},dragOverlay:{measure:od}};class dm extends Map{get(e){var n;return e!=null&&(n=super.get(e))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:n}=e;return!n})}getNodeFor(e){var n,s;return(n=(s=this.get(e))==null?void 0:s.node.current)!=null?n:void 0}}const dae={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new dm,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:lg},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Zh,measureDroppableContainers:lg,windowRect:null,measuringScheduled:!1},QP={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:lg,draggableNodes:new Map,over:null,measureDroppableContainers:lg},gu=f.createContext(QP),ZP=f.createContext(dae);function mae(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new dm}}}function uae(t,e){switch(e.type){case ui.DragStart:return{...t,draggable:{...t.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case ui.DragMove:return t.draggable.active==null?t:{...t,draggable:{...t.draggable,translate:{x:e.coordinates.x-t.draggable.initialCoordinates.x,y:e.coordinates.y-t.draggable.initialCoordinates.y}}};case ui.DragEnd:case ui.DragCancel:return{...t,draggable:{...t.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case ui.RegisterDroppable:{const{element:n}=e,{id:s}=n,a=new dm(t.droppable.containers);return a.set(s,n),{...t,droppable:{...t.droppable,containers:a}}}case ui.SetDroppableDisabled:{const{id:n,key:s,disabled:a}=e,l=t.droppable.containers.get(n);if(!l||s!==l.key)return t;const o=new dm(t.droppable.containers);return o.set(n,{...l,disabled:a}),{...t,droppable:{...t.droppable,containers:o}}}case ui.UnregisterDroppable:{const{id:n,key:s}=e,a=t.droppable.containers.get(n);if(!a||s!==a.key)return t;const l=new dm(t.droppable.containers);return l.delete(n),{...t,droppable:{...t.droppable,containers:l}}}default:return t}}function hae(t){let{disabled:e}=t;const{active:n,activatorEvent:s,draggableNodes:a}=f.useContext(gu),l=sg(s),o=sg(n?.id);return f.useEffect(()=>{if(!e&&!s&&l&&o!=null){if(!mf(l)||document.activeElement===l.target)return;const c=a.get(o);if(!c)return;const{activatorNode:d,node:m}=c;if(!d.current&&!m.current)return;requestAnimationFrame(()=>{for(const u of[d.current,m.current]){if(!u)continue;const h=mse(u);if(h){h.focus();break}}})}},[s,e,a,o,l]),null}function XP(t,e){let{transform:n,...s}=e;return t!=null&&t.length?t.reduce((a,l)=>l({transform:a,...s}),n):n}function pae(t){return f.useMemo(()=>({draggable:{...Zh.draggable,...t?.draggable},droppable:{...Zh.droppable,...t?.droppable},dragOverlay:{...Zh.dragOverlay,...t?.dragOverlay}}),[t?.draggable,t?.droppable,t?.dragOverlay])}function gae(t){let{activeNode:e,measure:n,initialRect:s,config:a=!0}=t;const l=f.useRef(!1),{x:o,y:c}=typeof a=="boolean"?{x:a,y:a}:a;fa(()=>{if(!o&&!c||!e){l.current=!1;return}if(l.current||!s)return;const m=e?.node.current;if(!m||m.isConnected===!1)return;const u=n(m),h=OP(u,s);if(o||(h.x=0),c||(h.y=0),l.current=!0,Math.abs(h.x)>0||Math.abs(h.y)>0){const p=LP(m);p&&p.scrollBy({top:h.y,left:h.x})}},[e,o,c,s,n])}const hf=f.createContext({...va,scaleX:1,scaleY:1});var Kr;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.Initializing=1]="Initializing",t[t.Initialized=2]="Initialized"})(Kr||(Kr={}));const Ww=f.memo(function(e){var n,s,a,l;let{id:o,accessibility:c,autoScroll:d=!0,children:m,sensors:u=oae,collisionDetection:h=IP,measuring:p,modifiers:g,...v}=e;const x=f.useReducer(uae,void 0,mae),[y,b]=x,[k,w]=vse(),[T,j]=f.useState(Kr.Uninitialized),D=T===Kr.Initialized,{draggable:{active:_,nodes:N,translate:A},droppable:{containers:P}}=y,E=_!=null?N.get(_):null,I=f.useRef({initial:null,translated:null}),M=f.useMemo(()=>{var Ee;return _!=null?{id:_,data:(Ee=E?.data)!=null?Ee:cae,rect:I}:null},[_,E]),O=f.useRef(null),[F,H]=f.useState(null),[G,z]=f.useState(null),ie=Pm(v,Object.values(v)),W=pu("DndDescribedBy",o),ge=f.useMemo(()=>P.getEnabled(),[P]),ae=pae(p),{droppableRects:U,measureDroppableContainers:X,measuringScheduled:J}=Zse(ge,{dragging:D,dependencies:[A.x,A.y],config:ae.droppable}),he=Yse(N,_),le=f.useMemo(()=>G?rg(G):null,[G]),ee=xt(),me=Xse(he,ae.draggable.measure);gae({activeNode:_!=null?N.get(_):null,config:ee.layoutShiftCompensation,initialRect:me,measure:ae.draggable.measure});const K=zC(he,ae.draggable.measure,me),re=zC(he?he.parentElement:null),oe=f.useRef({activatorEvent:null,active:null,activeNode:he,collisionRect:null,collisions:null,droppableRects:U,draggableNodes:N,draggingNode:null,draggingNodeRect:null,droppableContainers:P,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),C=P.getNodeFor((n=oe.current.over)==null?void 0:n.id),R=lae({measure:ae.dragOverlay.measure}),te=(s=R.nodeRef.current)!=null?s:he,ne=D?(a=R.rect)!=null?a:K:null,Y=!!(R.nodeRef.current&&R.rect),q=tae(Y?null:K),B=GP(te?Xi(te):null),se=nae(D?C??he:null),Q=rae(se),pe=XP(g,{transform:{x:A.x-q.x,y:A.y-q.y,scaleX:1,scaleY:1},activatorEvent:G,active:M,activeNodeRect:K,containerNodeRect:re,draggingNodeRect:ne,over:oe.current.over,overlayNodeRect:R.rect,scrollableAncestors:se,scrollableAncestorRects:Q,windowRect:B}),$=le?wc(le,A):null,ce=iae(se),De=UC(ce),xe=UC(ce,[K]),Re=wc(pe,De),nt=ne?Tse(ne,pe):null,Pe=M&&nt?h({active:M,collisionRect:nt,droppableRects:U,droppableContainers:ge,pointerCoordinates:$}):null,Ue=Cse(Pe,"id"),[Je,et]=f.useState(null),Be=Y?pe:wc(pe,xe),ke=Sse(Be,(l=Je?.rect)!=null?l:null,K),_e=f.useRef(null),Ye=f.useCallback((Ee,Oe)=>{let{sensor:V,options:Z}=Oe;if(O.current==null)return;const fe=N.get(O.current);if(!fe)return;const Ce=Ee.nativeEvent,Ke=new V({active:O.current,activeNode:fe,event:Ce,options:Z,context:oe,onAbort(at){if(!N.get(at))return;const{onDragAbort:Nt}=ie.current,dt={id:at};Nt?.(dt),k({type:"onDragAbort",event:dt})},onPending(at,ot,Nt,dt){if(!N.get(at))return;const{onDragPending:Wt}=ie.current,be={id:at,constraint:ot,initialCoordinates:Nt,offset:dt};Wt?.(be),k({type:"onDragPending",event:be})},onStart(at){const ot=O.current;if(ot==null)return;const Nt=N.get(ot);if(!Nt)return;const{onDragStart:dt}=ie.current,jt={activatorEvent:Ce,active:{id:ot,data:Nt.data,rect:I}};Ma.unstable_batchedUpdates(()=>{dt?.(jt),j(Kr.Initializing),b({type:ui.DragStart,initialCoordinates:at,active:ot}),k({type:"onDragStart",event:jt}),H(_e.current),z(Ce)})},onMove(at){b({type:ui.DragMove,coordinates:at})},onEnd:it(ui.DragEnd),onCancel:it(ui.DragCancel)});_e.current=Ke;function it(at){return async function(){const{active:Nt,collisions:dt,over:jt,scrollAdjustedTranslate:Wt}=oe.current;let be=null;if(Nt&&Wt){const{cancelDrop:ue}=ie.current;be={activatorEvent:Ce,active:Nt,collisions:dt,delta:Wt,over:jt},at===ui.DragEnd&&typeof ue=="function"&&await Promise.resolve(ue(be))&&(at=ui.DragCancel)}O.current=null,Ma.unstable_batchedUpdates(()=>{b({type:at}),j(Kr.Uninitialized),et(null),H(null),z(null),_e.current=null;const ue=at===ui.DragEnd?"onDragEnd":"onDragCancel";if(be){const Te=ie.current[ue];Te?.(be),k({type:ue,event:be})}})}}},[N]),tt=f.useCallback((Ee,Oe)=>(V,Z)=>{const fe=V.nativeEvent,Ce=N.get(Z);if(O.current!==null||!Ce||fe.dndKit||fe.defaultPrevented)return;const Ke={active:Ce};Ee(V,Oe.options,Ke)===!0&&(fe.dndKit={capturedBy:Oe.sensor},O.current=Z,Ye(V,Oe))},[N,Ye]),zt=Qse(u,tt);sae(u),fa(()=>{K&&T===Kr.Initializing&&j(Kr.Initialized)},[K,T]),f.useEffect(()=>{const{onDragMove:Ee}=ie.current,{active:Oe,activatorEvent:V,collisions:Z,over:fe}=oe.current;if(!Oe||!V)return;const Ce={active:Oe,activatorEvent:V,collisions:Z,delta:{x:Re.x,y:Re.y},over:fe};Ma.unstable_batchedUpdates(()=>{Ee?.(Ce),k({type:"onDragMove",event:Ce})})},[Re.x,Re.y]),f.useEffect(()=>{const{active:Ee,activatorEvent:Oe,collisions:V,droppableContainers:Z,scrollAdjustedTranslate:fe}=oe.current;if(!Ee||O.current==null||!Oe||!fe)return;const{onDragOver:Ce}=ie.current,Ke=Z.get(Ue),it=Ke&&Ke.rect.current?{id:Ke.id,rect:Ke.rect.current,data:Ke.data,disabled:Ke.disabled}:null,at={active:Ee,activatorEvent:Oe,collisions:V,delta:{x:fe.x,y:fe.y},over:it};Ma.unstable_batchedUpdates(()=>{et(it),Ce?.(at),k({type:"onDragOver",event:at})})},[Ue]),fa(()=>{oe.current={activatorEvent:G,active:M,activeNode:he,collisionRect:nt,collisions:Pe,droppableRects:U,draggableNodes:N,draggingNode:te,draggingNodeRect:ne,droppableContainers:P,over:Je,scrollableAncestors:se,scrollAdjustedTranslate:Re},I.current={initial:ne,translated:nt}},[M,he,Pe,nt,N,te,ne,U,P,Je,se,Re]),Wse({...ee,delta:A,draggingRect:nt,pointerCoordinates:$,scrollableAncestors:se,scrollableAncestorRects:Q});const Ft=f.useMemo(()=>({active:M,activeNode:he,activeNodeRect:K,activatorEvent:G,collisions:Pe,containerNodeRect:re,dragOverlay:R,draggableNodes:N,droppableContainers:P,droppableRects:U,over:Je,measureDroppableContainers:X,scrollableAncestors:se,scrollableAncestorRects:Q,measuringConfiguration:ae,measuringScheduled:J,windowRect:B}),[M,he,K,G,Pe,re,R,N,P,U,Je,X,se,Q,ae,J,B]),Qt=f.useMemo(()=>({activatorEvent:G,activators:zt,active:M,activeNodeRect:K,ariaDescribedById:{draggable:W},dispatch:b,draggableNodes:N,over:Je,measureDroppableContainers:X}),[G,zt,M,K,b,W,N,Je,X]);return He.createElement(RP.Provider,{value:w},He.createElement(gu.Provider,{value:Qt},He.createElement(ZP.Provider,{value:Ft},He.createElement(hf.Provider,{value:ke},m)),He.createElement(hae,{disabled:c?.restoreFocus===!1})),He.createElement(bse,{...c,hiddenTextDescribedById:W}));function xt(){const Ee=F?.autoScrollEnabled===!1,Oe=typeof d=="object"?d.enabled===!1:d===!1,V=D&&!Ee&&!Oe;return typeof d=="object"?{...d,enabled:V}:{enabled:V}}}),fae=f.createContext(null),KC="button",vae="Draggable";function xae(t){let{id:e,data:n,disabled:s=!1,attributes:a}=t;const l=pu(vae),{activators:o,activatorEvent:c,active:d,activeNodeRect:m,ariaDescribedById:u,draggableNodes:h,over:p}=f.useContext(gu),{role:g=KC,roleDescription:v="draggable",tabIndex:x=0}=a??{},y=d?.id===e,b=f.useContext(y?hf:fae),[k,w]=ig(),[T,j]=ig(),D=aae(o,e),_=Pm(n);fa(()=>(h.set(e,{id:e,key:l,node:k,activatorNode:T,data:_}),()=>{const A=h.get(e);A&&A.key===l&&h.delete(e)}),[h,e]);const N=f.useMemo(()=>({role:g,tabIndex:x,"aria-disabled":s,"aria-pressed":y&&g===KC?!0:void 0,"aria-roledescription":v,"aria-describedby":u.draggable}),[s,g,x,y,v,u.draggable]);return{active:d,activatorEvent:c,activeNodeRect:m,attributes:N,isDragging:y,listeners:s?void 0:D,node:k,over:p,setNodeRef:w,setActivatorNodeRef:j,transform:b}}function JP(){return f.useContext(ZP)}const yae="Droppable",bae={timeout:25};function kae(t){let{data:e,disabled:n=!1,id:s,resizeObserverConfig:a}=t;const l=pu(yae),{active:o,dispatch:c,over:d,measureDroppableContainers:m}=f.useContext(gu),u=f.useRef({disabled:n}),h=f.useRef(!1),p=f.useRef(null),g=f.useRef(null),{disabled:v,updateMeasurementsFor:x,timeout:y}={...bae,...a},b=Pm(x??s),k=f.useCallback(()=>{if(!h.current){h.current=!0;return}g.current!=null&&clearTimeout(g.current),g.current=setTimeout(()=>{m(Array.isArray(b.current)?b.current:[b.current]),g.current=null},y)},[y]),w=uf({callback:k,disabled:v||!o}),T=f.useCallback((N,A)=>{w&&(A&&(w.unobserve(A),h.current=!1),N&&w.observe(N))},[w]),[j,D]=ig(T),_=Pm(e);return f.useEffect(()=>{!w||!j.current||(w.disconnect(),h.current=!1,w.observe(j.current))},[j,w]),f.useEffect(()=>(c({type:ui.RegisterDroppable,element:{id:s,key:l,disabled:n,node:j,rect:p,data:_}}),()=>c({type:ui.UnregisterDroppable,key:l,id:s})),[s]),f.useEffect(()=>{n!==u.current.disabled&&(c({type:ui.SetDroppableDisabled,id:s,key:l,disabled:n}),u.current.disabled=n)},[s,l,n,c]),{active:o,rect:p,isOver:d?.id===s,node:j,over:d,setNodeRef:D}}function wae(t){let{animation:e,children:n}=t;const[s,a]=f.useState(null),[l,o]=f.useState(null),c=sg(n);return!n&&!s&&c&&a(c),fa(()=>{if(!l)return;const d=s?.key,m=s?.props.id;if(d==null||m==null){a(null);return}Promise.resolve(e(m,l)).then(()=>{a(null)})},[e,s,l]),He.createElement(He.Fragment,null,n,s?f.cloneElement(s,{ref:o}):null)}const jae={x:0,y:0,scaleX:1,scaleY:1};function Nae(t){let{children:e}=t;return He.createElement(gu.Provider,{value:QP},He.createElement(hf.Provider,{value:jae},e))}const Cae={position:"fixed",touchAction:"none"},_ae=t=>mf(t)?"transform 250ms ease":void 0,Sae=f.forwardRef((t,e)=>{let{as:n,activatorEvent:s,adjustScale:a,children:l,className:o,rect:c,style:d,transform:m,transition:u=_ae}=t;if(!c)return null;const h=a?m:{...m,scaleX:1,scaleY:1},p={...Cae,width:c.width,height:c.height,top:c.top,left:c.left,transform:Wa.Transform.toString(h),transformOrigin:a&&s?wse(s,c):void 0,transition:typeof u=="function"?u(s):u,...d};return He.createElement(n,{className:o,style:p,ref:e},l)}),Eae=t=>e=>{let{active:n,dragOverlay:s}=e;const a={},{styles:l,className:o}=t;if(l!=null&&l.active)for(const[c,d]of Object.entries(l.active))d!==void 0&&(a[c]=n.node.style.getPropertyValue(c),n.node.style.setProperty(c,d));if(l!=null&&l.dragOverlay)for(const[c,d]of Object.entries(l.dragOverlay))d!==void 0&&s.node.style.setProperty(c,d);return o!=null&&o.active&&n.node.classList.add(o.active),o!=null&&o.dragOverlay&&s.node.classList.add(o.dragOverlay),function(){for(const[d,m]of Object.entries(a))n.node.style.setProperty(d,m);o!=null&&o.active&&n.node.classList.remove(o.active)}},Tae=t=>{let{transform:{initial:e,final:n}}=t;return[{transform:Wa.Transform.toString(e)},{transform:Wa.Transform.toString(n)}]},Aae={duration:250,easing:"ease",keyframes:Tae,sideEffects:Eae({styles:{active:{opacity:"0"}}})};function Dae(t){let{config:e,draggableNodes:n,droppableContainers:s,measuringConfiguration:a}=t;return df((l,o)=>{if(e===null)return;const c=n.get(l);if(!c)return;const d=c.node.current;if(!d)return;const m=YP(o);if(!m)return;const{transform:u}=Xi(o).getComputedStyle(o),h=FP(u);if(!h)return;const p=typeof e=="function"?e:Rae(e);return VP(d,a.draggable.measure),p({active:{id:l,data:c.data,node:d,rect:a.draggable.measure(d)},draggableNodes:n,dragOverlay:{node:o,rect:a.dragOverlay.measure(m)},droppableContainers:s,measuringConfiguration:a,transform:h})})}function Rae(t){const{duration:e,easing:n,sideEffects:s,keyframes:a}={...Aae,...t};return l=>{let{active:o,dragOverlay:c,transform:d,...m}=l;if(!e)return;const u={x:c.rect.left-o.rect.left,y:c.rect.top-o.rect.top},h={scaleX:d.scaleX!==1?o.rect.width*d.scaleX/c.rect.width:1,scaleY:d.scaleY!==1?o.rect.height*d.scaleY/c.rect.height:1},p={x:d.x-u.x,y:d.y-u.y,...h},g=a({...m,active:o,dragOverlay:c,transform:{initial:d,final:p}}),[v]=g,x=g[g.length-1];if(JSON.stringify(v)===JSON.stringify(x))return;const y=s?.({active:o,dragOverlay:c,...m}),b=c.node.animate(g,{duration:e,easing:n,fill:"forwards"});return new Promise(k=>{b.onfinish=()=>{y?.(),k()}})}}let GC=0;function Pae(t){return f.useMemo(()=>{if(t!=null)return GC++,GC},[t])}const eM=He.memo(t=>{let{adjustScale:e=!1,children:n,dropAnimation:s,style:a,transition:l,modifiers:o,wrapperElement:c="div",className:d,zIndex:m=999}=t;const{activatorEvent:u,active:h,activeNodeRect:p,containerNodeRect:g,draggableNodes:v,droppableContainers:x,dragOverlay:y,over:b,measuringConfiguration:k,scrollableAncestors:w,scrollableAncestorRects:T,windowRect:j}=JP(),D=f.useContext(hf),_=Pae(h?.id),N=XP(o,{activatorEvent:u,active:h,activeNodeRect:p,containerNodeRect:g,draggingNodeRect:y.rect,over:b,overlayNodeRect:y.rect,scrollableAncestors:w,scrollableAncestorRects:T,transform:D,windowRect:j}),A=Uw(p),P=Dae({config:s,draggableNodes:v,droppableContainers:x,measuringConfiguration:k}),E=A?y.setRef:void 0;return He.createElement(Nae,null,He.createElement(wae,{animation:P},h&&_?He.createElement(Sae,{key:_,id:h.id,ref:E,as:c,activatorEvent:u,adjustScale:e,className:d,transition:l,rect:A,style:{zIndex:m,...a},transform:N},n):null))});function pf(t,e,n){const s=t.slice();return s.splice(n<0?s.length+n:n,0,s.splice(e,1)[0]),s}function Mae(t,e){return t.reduce((n,s,a)=>{const l=e.get(s);return l&&(n[a]=l),n},Array(t.length))}function vh(t){return t!==null&&t>=0}function Iae(t,e){if(t===e)return!0;if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function Oae(t){return typeof t=="boolean"?{draggable:t,droppable:t}:t}const Kw=t=>{let{rects:e,activeIndex:n,overIndex:s,index:a}=t;const l=pf(e,s,n),o=e[a],c=l[a];return!c||!o?null:{x:c.left-o.left,y:c.top-o.top,scaleX:c.width/o.width,scaleY:c.height/o.height}},xh={scaleX:1,scaleY:1},tM=t=>{var e;let{activeIndex:n,activeNodeRect:s,index:a,rects:l,overIndex:o}=t;const c=(e=l[n])!=null?e:s;if(!c)return null;if(a===n){const m=l[o];return m?{x:0,y:n<o?m.top+m.height-(c.top+c.height):m.top-c.top,...xh}:null}const d=Fae(l,a,n);return a>n&&a<=o?{x:0,y:-c.height-d,...xh}:a<n&&a>=o?{x:0,y:c.height+d,...xh}:{x:0,y:0,...xh}};function Fae(t,e,n){const s=t[e],a=t[e-1],l=t[e+1];return s?n<e?a?s.top-(a.top+a.height):l?l.top-(s.top+s.height):0:l?l.top-(s.top+s.height):a?s.top-(a.top+a.height):0:0}const nM="Sortable",iM=He.createContext({activeIndex:-1,containerId:nM,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:Kw,disabled:{draggable:!1,droppable:!1}});function Gw(t){let{children:e,id:n,items:s,strategy:a=Kw,disabled:l=!1}=t;const{active:o,dragOverlay:c,droppableRects:d,over:m,measureDroppableContainers:u}=JP(),h=pu(nM,n),p=c.rect!==null,g=f.useMemo(()=>s.map(D=>typeof D=="object"&&"id"in D?D.id:D),[s]),v=o!=null,x=o?g.indexOf(o.id):-1,y=m?g.indexOf(m.id):-1,b=f.useRef(g),k=!Iae(g,b.current),w=y!==-1&&x===-1||k,T=Oae(l);fa(()=>{k&&v&&u(g)},[k,g,v,u]),f.useEffect(()=>{b.current=g},[g]);const j=f.useMemo(()=>({activeIndex:x,containerId:h,disabled:T,disableTransforms:w,items:g,overIndex:y,useDragOverlay:p,sortedRects:Mae(g,d),strategy:a}),[x,h,T.draggable,T.droppable,w,g,y,d,p,a]);return He.createElement(iM.Provider,{value:j},e)}const Lae=t=>{let{id:e,items:n,activeIndex:s,overIndex:a}=t;return pf(n,s,a).indexOf(e)},$ae=t=>{let{containerId:e,isSorting:n,wasDragging:s,index:a,items:l,newIndex:o,previousItems:c,previousContainerId:d,transition:m}=t;return!m||!s||c!==l&&a===o?!1:n?!0:o!==a&&e===d},Bae={duration:200,easing:"ease"},sM="transform",qae=Wa.Transition.toString({property:sM,duration:0,easing:"linear"}),Hae={roleDescription:"sortable"};function zae(t){let{disabled:e,index:n,node:s,rect:a}=t;const[l,o]=f.useState(null),c=f.useRef(n);return fa(()=>{if(!e&&n!==c.current&&s.current){const d=a.current;if(d){const m=od(s.current,{ignoreTransform:!0}),u={x:d.left-m.left,y:d.top-m.top,scaleX:d.width/m.width,scaleY:d.height/m.height};(u.x||u.y)&&o(u)}}n!==c.current&&(c.current=n)},[e,n,s,a]),f.useEffect(()=>{l&&o(null)},[l]),l}function Yw(t){let{animateLayoutChanges:e=$ae,attributes:n,disabled:s,data:a,getNewIndex:l=Lae,id:o,strategy:c,resizeObserverConfig:d,transition:m=Bae}=t;const{items:u,containerId:h,activeIndex:p,disabled:g,disableTransforms:v,sortedRects:x,overIndex:y,useDragOverlay:b,strategy:k}=f.useContext(iM),w=Vae(s,g),T=u.indexOf(o),j=f.useMemo(()=>({sortable:{containerId:h,index:T,items:u},...a}),[h,a,T,u]),D=f.useMemo(()=>u.slice(u.indexOf(o)),[u,o]),{rect:_,node:N,isOver:A,setNodeRef:P}=kae({id:o,data:j,disabled:w.droppable,resizeObserverConfig:{updateMeasurementsFor:D,...d}}),{active:E,activatorEvent:I,activeNodeRect:M,attributes:O,setNodeRef:F,listeners:H,isDragging:G,over:z,setActivatorNodeRef:ie,transform:W}=xae({id:o,data:j,attributes:{...Hae,...n},disabled:w.draggable}),ge=lse(P,F),ae=!!E,U=ae&&!v&&vh(p)&&vh(y),X=!b&&G,J=X&&U?W:null,le=U?J??(c??k)({rects:x,activeNodeRect:M,activeIndex:p,overIndex:y,index:T}):null,ee=vh(p)&&vh(y)?l({id:o,items:u,activeIndex:p,overIndex:y}):T,me=E?.id,K=f.useRef({activeId:me,items:u,newIndex:ee,containerId:h}),re=u!==K.current.items,oe=e({active:E,containerId:h,isDragging:G,isSorting:ae,id:o,index:T,items:u,newIndex:K.current.newIndex,previousItems:K.current.items,previousContainerId:K.current.containerId,transition:m,wasDragging:K.current.activeId!=null}),C=zae({disabled:!oe,index:T,node:N,rect:_});return f.useEffect(()=>{ae&&K.current.newIndex!==ee&&(K.current.newIndex=ee),h!==K.current.containerId&&(K.current.containerId=h),u!==K.current.items&&(K.current.items=u)},[ae,ee,h,u]),f.useEffect(()=>{if(me===K.current.activeId)return;if(me!=null&&K.current.activeId==null){K.current.activeId=me;return}const te=setTimeout(()=>{K.current.activeId=me},50);return()=>clearTimeout(te)},[me]),{active:E,activeIndex:p,attributes:O,data:j,rect:_,index:T,newIndex:ee,items:u,isOver:A,isSorting:ae,isDragging:G,listeners:H,node:N,overIndex:y,over:z,setNodeRef:ge,setActivatorNodeRef:ie,setDroppableNodeRef:P,setDraggableNodeRef:F,transform:C??le,transition:R()};function R(){if(C||re&&K.current.newIndex===T)return qae;if(!(X&&!mf(I)||!m)&&(ae||oe))return Wa.Transition.toString({...m,property:sM})}}function Vae(t,e){var n,s;return typeof t=="boolean"?{draggable:t,droppable:!1}:{draggable:(n=t?.draggable)!=null?n:e.draggable,droppable:(s=t?.droppable)!=null?s:e.droppable}}vn.Down,vn.Right,vn.Up,vn.Left;const Uae="Patient Registration",Wae="appointment_module",Kae="active",Gae=[{id:"name",type:"text",label:"Full Name",placeholder:"Enter full name",required:!0,columnClass:"col-md-6 col-12"},{id:"email",type:"email",label:"Email",placeholder:"Enter email",required:!0,columnClass:"col-md-6 col-12"},{id:"phone",type:"text",label:"Phone",placeholder:"Enter phone",required:!1,columnClass:"col-md-6 col-12"},{id:"gender",type:"select",label:"Gender",placeholder:"Select gender",required:!0,columnClass:"col-md-6 col-12",options:["Male","Female","Other"]}],Yae={appointment_status:[{id:"1"}],show_mode:[{id:"appointment"}],clinics:[],roles:["doctor","receptionist"]},Qae={name:Uae,moduleType:Wae,status:Kae,fields:Gae,conditions:Yae},Zae=[{id:"image/jpeg",text:r("JPEG Image (jpg, jpeg, jpe)","kivicare-clinic-management-system")},{id:"image/gif",text:r("GIF Image (gif)","kivicare-clinic-management-system")},{id:"image/png",text:r("PNG Image (png)","kivicare-clinic-management-system")},{id:"image/bmp",text:r("BMP Image (bmp)","kivicare-clinic-management-system")},{id:"image/tiff",text:r("TIFF Image (tiff, tif)","kivicare-clinic-management-system")},{id:"image/webp",text:r("WebP Image (webp)","kivicare-clinic-management-system")},{id:"image/avif",text:r("AVIF Image (avif)","kivicare-clinic-management-system")},{id:"image/x-icon",text:r("Icon (ico)","kivicare-clinic-management-system")},{id:"image/heic",text:r("HEIC Image (heic)","kivicare-clinic-management-system")},{id:"video/x-ms-asf",text:r("ASF Video (asf, asx)","kivicare-clinic-management-system")},{id:"video/x-ms-wmv",text:r("WMV Video (wmv)","kivicare-clinic-management-system")},{id:"video/avi",text:r("AVI Video (avi)","kivicare-clinic-management-system")},{id:"video/quicktime",text:r("QuickTime Video (mov, qt)","kivicare-clinic-management-system")},{id:"video/mpeg",text:r("MPEG Video (mpeg, mpg, mpe)","kivicare-clinic-management-system")},{id:"video/mp4",text:r("MP4 Video (mp4, m4v)","kivicare-clinic-management-system")},{id:"video/webm",text:r("WebM Video (webm)","kivicare-clinic-management-system")},{id:"audio/mpeg",text:r("MP3 Audio (mp3, m4a, m4b)","kivicare-clinic-management-system")},{id:"audio/aac",text:r("AAC Audio (aac)","kivicare-clinic-management-system")},{id:"audio/wav",text:r("WAV Audio (wav)","kivicare-clinic-management-system")},{id:"audio/ogg",text:r("OGG Audio (ogg, oga)","kivicare-clinic-management-system")},{id:"audio/flac",text:r("FLAC Audio (flac)","kivicare-clinic-management-system")},{id:"application/pdf",text:r("PDF Document (pdf)","kivicare-clinic-management-system")},{id:"application/msword",text:r("Word Document (doc)","kivicare-clinic-management-system")},{id:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",text:r("Word Document (docx)","kivicare-clinic-management-system")},{id:"application/vnd.ms-excel",text:r("Excel Spreadsheet (xls)","kivicare-clinic-management-system")},{id:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",text:r("Excel Spreadsheet (xlsx)","kivicare-clinic-management-system")},{id:"application/vnd.ms-powerpoint",text:r("PowerPoint (ppt, pps)","kivicare-clinic-management-system")},{id:"application/vnd.openxmlformats-officedocument.presentationml.presentation",text:r("PowerPoint (pptx)","kivicare-clinic-management-system")},{id:"text/plain",text:r("Text File (txt)","kivicare-clinic-management-system")},{id:"text/csv",text:r("CSV File (csv)","kivicare-clinic-management-system")},{id:"text/html",text:r("HTML File (htm, html)","kivicare-clinic-management-system")},{id:"application/zip",text:r("ZIP Archive (zip)","kivicare-clinic-management-system")},{id:"application/x-rar-compressed",text:r("RAR Archive (rar)","kivicare-clinic-management-system")},{id:"application/x-7z-compressed",text:r("7Z Archive (7z)","kivicare-clinic-management-system")}],aM=[{type:"number",label:r("Number","kivicare-clinic-management-system"),icon:"ph-list-numbers"},{type:"textarea",label:r("Text Area","kivicare-clinic-management-system"),icon:"ph-article-ny-times"},{type:"email",label:r("Email","kivicare-clinic-management-system"),icon:"ph-envelope"},{type:"select",label:r("Dropdown","kivicare-clinic-management-system"),icon:"ph-caret-down"},{type:"radio",label:r("Radio Buttons","kivicare-clinic-management-system"),icon:"ph-radio-button"},{type:"checkbox",label:r("Checkbox","kivicare-clinic-management-system"),icon:"ph-check-square"},{type:"file",label:r("File Upload","kivicare-clinic-management-system"),icon:"ph-paperclip"},{type:"date",label:r("Date","kivicare-clinic-management-system"),icon:"ph-calendar"}],YC=[{value:"col-12",label:r("Full Width","kivicare-clinic-management-system")},{value:"col-md-6 col-12",label:r("Half Width (Desktop)","kivicare-clinic-management-system")},{value:"col-lg-4 col-md-6 col-12",label:r("One Third (Large Screen)","kivicare-clinic-management-system")},{value:"col-lg-3 col-md-6 col-12",label:r("One Fourth (Large Screen)","kivicare-clinic-management-system")},{value:"col-xl-2 col-lg-3 col-md-6 col-12",label:r("One Sixth (Extra Large)","kivicare-clinic-management-system")}],Xae=[{value:"appointment_module",label:r("Appointment","kivicare-clinic-management-system")},{value:"patient_encounter_module",label:r("Encounter","kivicare-clinic-management-system")},{value:"patient_module",label:r("Patient","kivicare-clinic-management-system")},{value:"doctor_module",label:r("Doctor","kivicare-clinic-management-system")}],QC=[{value:"active",label:r("Active","kivicare-clinic-management-system")},{value:"inactive",label:r("Inactive","kivicare-clinic-management-system")}],Jae=t=>({id:`field_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,type:t,label:`${t.charAt(0).toUpperCase()+t.slice(1)} ${r("Field","kivicare-clinic-management-system")}`,placeholder:`${r("Enter","kivicare-clinic-management-system")} ${t}`,required:!1,className:"",columnClass:"col-xl-6 col-12",options:t==="select"||t==="radio"?[r("Option 1","kivicare-clinic-management-system"),r("Option 2","kivicare-clinic-management-system")]:[],fileTypes:t==="file"?[]:void 0}),ere=({field:t,onEdit:e,onDelete:n,isActive:s,onClick:a})=>{const{attributes:l,listeners:o,setNodeRef:c,transform:d,transition:m,isDragging:u}=Yw({id:t.id}),h={transform:Wa.Transform.toString(d),transition:m,opacity:u?.5:1},p=()=>{switch(t.type){case"textarea":return i.jsx(Mt.Control,{as:"textarea",rows:1,placeholder:t.placeholder,onKeyDown:g=>g.stopPropagation()});case"select":return i.jsx(ct,{placeholder:t.placeholder,options:t.options?.map(g=>({label:g,value:g}))||[],className:"react-select-box",classNamePrefix:"react-select",styles:{menuPortal:g=>({...g,zIndex:9999})}});case"radio":return i.jsx("div",{className:"d-flex align-items-center column-gap-3 row-gap-2 flex-wrap",children:t.options?.map((g,v)=>i.jsx(Mt.Check,{inline:!0,label:g,name:t.id,type:"radio",id:`${t.id}-radio-${v}`,className:"m-0"},v))});case"checkbox":return i.jsx(Mt.Check,{type:"checkbox",label:t.placeholder});case"file":return i.jsx(Mt.Control,{type:"file",onKeyDown:g=>g.stopPropagation()});case"date":return i.jsxs("div",{className:"input-group",children:[i.jsx(Un,{onChange:()=>{},options:{dateFormat:"Y-m-d H:i",enableTime:!0,locale:Wn()},className:"form-control",placeholder:t.placeholder}),i.jsx("i",{className:"ph-light ph-calendar input-group-text"})]});default:return i.jsx(Mt.Control,{type:t.type,placeholder:t.placeholder,onKeyDown:g=>g.stopPropagation()})}};return i.jsxs("div",{ref:c,style:h,...l,className:`form-group custom-form-group ${s?"active":""}`,onClick:a,children:[i.jsxs("label",{className:"form-label d-flex align-items-center justify-content-between gap-1 flex-wrap",children:[i.jsxs("span",{children:[i.jsx("span",{dangerouslySetInnerHTML:{__html:FR(t.label)}}),t.required&&i.jsx("span",{className:"input-field-required text-danger",children:"*"})]}),i.jsxs("span",{className:"d-flex align-items-center gap-lg-3 gap-2",children:[i.jsx("button",{type:"button",className:"btn btn-link p-0",onClick:g=>{g.stopPropagation(),e(t)},children:i.jsx("i",{className:"ph ph-pencil-simple-line font-size-18 text-primary"})}),i.jsx("button",{type:"button",className:"btn btn-link p-0",onClick:g=>{g.stopPropagation(),n(t.id)},children:i.jsx("i",{className:"ph ph-trash font-size-18 text-danger"})})]})]}),i.jsxs("div",{className:"d-flex align-items-start gap-lg-3 gap-2",children:[i.jsx("i",{className:"ph ph-hand-grabbing p-3 font-size-18 rounded bg-primary-subtle icon-color flex-shrink-0",...o,style:{cursor:"grab"},onMouseDown:g=>g.preventDefault()}),i.jsx("div",{className:"flex-grow-1",children:p()})]})]})},ZC=({fieldType:t,onDragStart:e})=>{const n=aM.find(s=>s.type===t);return i.jsxs("div",{className:"d-flex align-items-center gap-lg-4 gap-2 p-3 bg-body rounded w-100",draggable:!0,onDragStart:s=>e(s,t),style:{cursor:"grab",userSelect:"none"},children:[i.jsx("i",{className:`ph ${n.icon} font-size-18 icon-color`}),i.jsx("span",{className:"font-size-14 fw-medium",children:n.label})]})},XC=()=>{const{id:t}=Yt(),{defaultClinicId:e}=mt(),n=!!t,[s,a]=f.useState("form"),[l,o]=f.useState(!1),[c,d]=f.useState(null),[m,u]=f.useState([]),[h,p]=f.useState(null),[g,v]=f.useState(!1),[x,y]=f.useState("right"),[b,k]=f.useState({name:"Custom Form",moduleType:"appointment_module",status:"active",formIcon:"",showInEncounter:!1,showInAppointment:!0,clinics:[],roles:[]}),[w,T]=f.useState(""),[j,D]=f.useState(!1),[_,N]=f.useState(!1),{control:A,handleSubmit:P,watch:E,setValue:I,reset:M,getValues:O}=en({defaultValues:b});f.useEffect(()=>{!n&&Jn()&&e&&(I("clinics",[String(e)]),k($=>({...$,clinics:[String(e)]})))},[e,n,I]);const F=E("name"),H=E("moduleType"),G=hn(),{data:z,isLoading:ie}=eP(t,{enabled:n}),[W,ge]=f.useState([]),[ae,U]=f.useState(""),[X,J]=f.useState(!1);f.useEffect(()=>{(async()=>{try{J(!0);const ce=await Dt.getClinics({page:1,per_page:100}),xe=(ce?.data?.data||ce?.data||[]).map(Re=>({value:Re.id,label:Re.clinic_name||Re.name||Re.label||Re.display_name}));ge(xe)}catch(ce){console.error("[Clinics] Error:",ce)}finally{J(!1)}})()},[]);const he=ae?W.filter($=>$.label.toLowerCase().includes(ae.toLowerCase())):W,le=FJ({onSuccess:$=>{console.log("Custom form created successfully:",$),G("/setting/custom-form/")},onError:$=>{console.error("Error creating custom form:",$)}}),ee=LJ({onSuccess:$=>{console.log("Custom form updated successfully:",$),G("/setting/custom-form/")},onError:$=>{console.error("Error updating custom form:",$)}});f.useEffect(()=>{if(n&&z){const $=z.data;M({name:$.name?.text||$.name,moduleType:$.moduleType,status:$.status?.value||$.status,showInEncounter:$.conditions?.show_mode?.some(ce=>ce.id==="encounter")||!1,showInAppointment:$.conditions?.show_mode?.some(ce=>ce.id==="appointment")||!1,clinics:$.conditions?.clinics||[],roles:$.conditions?.roles||[]}),u($.fields||[]),k(ce=>({...ce,name:$.name?.text||$.name,moduleType:$.moduleType?.value||$.moduleType,status:$.status?.value||$.status}))}},[z,n,M]);const me=$=>{if(Jn()&&e){const De=$.clinics||[],xe=String(e);De.includes(xe)||($.clinics=[...De,xe])}$.moduleType=$.moduleType?.value||$.moduleType;const ce={...$,fields:m};console.log("Saving form:",ce),n?ee.mutate({id:t,...ce}):le.mutate(ce)},K=$=>{$!==l&&(v(!0),y($?"right":"left"),setTimeout(()=>{o($),setTimeout(()=>v(!1),300)},150))},re=($,ce)=>{p(ce),$.dataTransfer.setData("text/plain",ce)},oe=$=>{$.preventDefault()},C=$=>{$.preventDefault();const ce=$.dataTransfer.getData("text/plain")||h;if(ce){const De=Jae(ce);u(xe=>[...xe,De]),d(De),o(!0)}p(null)},R=$=>{d($),K(!0)},te=$=>{Ze.fire({title:r("Are you sure?","kivicare-clinic-management-system"),text:r("You won't be able to revert this!","kivicare-clinic-management-system"),icon:"warning",showCancelButton:!0,confirmButtonText:r("Yes, delete it!","kivicare-clinic-management-system")}).then(ce=>{ce.isConfirmed&&(u(De=>De.filter(xe=>xe.id!==$)),c?.id===$&&(d(null),o(!1)),Ze.fire(r("Deleted!","kivicare-clinic-management-system"),r("Your field has been deleted.","kivicare-clinic-management-system"),"success"))})},ne=$=>{u(ce=>ce.map(De=>De.id===$.id?$:De)),d($)},Y=$=>{d($),K(!0)},q=()=>{try{const $=JSON.parse(w);$.name&&(I("name",$.name),k(ce=>({...ce,name:$.name}))),$.moduleType&&(I("moduleType",$.moduleType),k(ce=>({...ce,moduleType:$.moduleType}))),$.status&&(I("status",$.status),k(ce=>({...ce,status:$.status}))),$.conditions&&($.conditions.show_mode&&(I("showInEncounter",$.conditions.show_mode.some(ce=>ce.id==="encounter")),I("showInAppointment",$.conditions.show_mode.some(ce=>ce.id==="appointment"))),$.conditions.clinics&&I("clinics",$.conditions.clinics),$.conditions.roles&&I("roles",$.conditions.roles)),$.fields&&u($.fields),T(""),a("form"),Ze.fire(r("Success","kivicare-clinic-management-system"),r("Form imported successfully","kivicare-clinic-management-system"),"success")}catch{Ze.fire(r("Error","kivicare-clinic-management-system"),r("Invalid JSON format","kivicare-clinic-management-system"),"error")}},B=()=>{const $=O(),ce={name:$.name,moduleType:$.moduleType?.value||$.moduleType,status:$.status,fields:m,conditions:{show_mode:[],clinics:$.clinics||[],roles:$.roles||[]}};$.showInAppointment&&ce.conditions.show_mode.push({id:"appointment"}),$.showInEncounter&&ce.conditions.show_mode.push({id:"encounter"});const De="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(ce,null,2)),xe=document.createElement("a");xe.setAttribute("href",De),xe.setAttribute("download",($.name||"custom_form")+".json"),document.body.appendChild(xe),xe.click(),xe.remove()},se=()=>{D(!0)},Q=()=>{D(!1)},pe=$=>{const{active:ce,over:De}=$;ce.id!==De.id&&u(xe=>{const Re=xe.findIndex(Pe=>Pe.id===ce.id),nt=xe.findIndex(Pe=>Pe.id===De.id);return pf(xe,Re,nt)})};return n&&ie?i.jsx(Gy,{}):i.jsxs(i.Fragment,{children:[i.jsxs("form",{onSubmit:P(me),children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center gap-3 flex-wrap mb-4",children:[i.jsx(_i,{}),i.jsx("div",{children:i.jsxs(ht,{className:"btn btn-sm btn-primary fw-semibold d-flex align-items-center gap-1 back-btn",to:"/setting/custom-form/",children:[i.jsx("i",{className:"ph ph-caret-left"}),i.jsxs("span",{className:"font-size-14",children:[r("Back","kivicare-clinic-management-system")," "]})]})})]}),i.jsxs(Yn,{children:[i.jsx(Et,{xs:12,md:5,lg:4,xl:3,children:i.jsx("div",{className:"card",children:i.jsx("div",{className:"card-body",children:l?i.jsxs("div",{className:`slide-transition ${g&&x==="left"?"slide-enter-left":"slide-active"}`,children:[i.jsxs("button",{className:"d-flex align-items-center gap-2 mb-4 btn btn-link p-0",onClick:()=>K(!1),type:"button",children:[i.jsx("i",{className:"ph ph-caret-left font-size-18 icon-color"}),i.jsx("h6",{className:"m-0",children:r("Back to Fields","kivicare-clinic-management-system")})]}),i.jsxs(Yn,{className:"gy-3",children:[i.jsx(Et,{xs:12,children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{className:"form-label",children:r("Label","kivicare-clinic-management-system")}),i.jsx(Mt.Control,{type:"text",value:c?.label||"",onChange:$=>ne({...c,label:$.target.value}),onKeyDown:$=>$.stopPropagation(),placeholder:r("Field label (HTML allowed)","kivicare-clinic-management-system")}),i.jsx("small",{className:"text-muted",children:r("HTML tags like <strong>, <em>, <span> are allowed for formatting","kivicare-clinic-management-system")})]})}),i.jsx(Et,{xs:12,children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{className:"form-label",children:r("Placeholder","kivicare-clinic-management-system")}),i.jsx(Mt.Control,{type:"text",value:c?.placeholder||"",onChange:$=>ne({...c,placeholder:$.target.value}),onKeyDown:$=>$.stopPropagation(),placeholder:r("Field placeholder","kivicare-clinic-management-system")})]})}),i.jsx(Et,{xs:12,children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{className:"form-label",children:r("Field Type","kivicare-clinic-management-system")}),i.jsx(Mt.Control,{type:"text",value:c?.type||"",disabled:!0})]})}),c?.type==="file"&&i.jsx(Et,{xs:12,children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[r("File Types","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx(ct,{isMulti:!0,className:"react-select-box",classNamePrefix:"react-select",placeholder:r("Select file types","kivicare-clinic-management-system"),options:Zae,getOptionLabel:$=>$.text,getOptionValue:$=>$.id,value:c?.fileTypes||[],onChange:$=>ne({...c,fileTypes:$||[]}),isClearable:!0,styles:{menuPortal:$=>({...$,zIndex:9999})}}),i.jsx("small",{className:"text-muted",children:r("Select allowed file types for upload","kivicare-clinic-management-system")})]})}),i.jsx(Et,{xs:12,children:i.jsx("div",{className:"py-2 px-3 bg-body border border-primary rounded",children:i.jsx(Mt.Check,{inline:!0,label:r("Required field","kivicare-clinic-management-system"),checked:c?.required||!1,onChange:$=>ne({...c,required:$.target.checked}),type:"checkbox"})})}),i.jsx(Et,{xs:12,children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{className:"form-label",children:r("CSS Class","kivicare-clinic-management-system")}),i.jsx(Mt.Control,{type:"text",value:c?.className||"",onChange:$=>ne({...c,className:$.target.value}),onKeyDown:$=>$.stopPropagation(),placeholder:"mb-3"})]})}),i.jsx(Et,{xs:12,children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{className:"form-label",children:r("Column Width","kivicare-clinic-management-system")}),i.jsx(ct,{placeholder:r("Select column width","kivicare-clinic-management-system"),value:YC.find($=>$.value===c?.columnClass)||null,onChange:$=>ne({...c,columnClass:$?.value||"col-md-6 col-12"}),options:YC,className:"react-select-box",classNamePrefix:"react-select",styles:{menuPortal:$=>({...$,zIndex:9999})}})]})}),(c?.type==="select"||c?.type==="radio")&&i.jsx(Et,{xs:12,children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{className:"form-label",children:r("Options (one per line)","kivicare-clinic-management-system")}),i.jsx(Mt.Control,{as:"textarea",rows:3,value:c?.options?.join(`
`)||"",onChange:$=>ne({...c,options:$.target.value.split(`
`)}),onKeyDown:$=>$.stopPropagation(),placeholder:`${r("Option 1","kivicare-clinic-management-system")}
${r("Option 2","kivicare-clinic-management-system")}
${r("Option 3","kivicare-clinic-management-system")}`})]})})]})]}):i.jsxs("div",{className:`slide-transition ${g&&x==="right"?"slide-enter-right":"slide-active"}`,children:[i.jsxs("ul",{className:"nav nav-pills nav-pill-card mb-4",id:"pills-tab",role:"tablist",children:[i.jsx("li",{className:"nav-item m-0",role:"presentation",children:i.jsx("button",{className:`nav-link${s==="form"?" active":""}`,onClick:()=>a("form"),type:"button",children:r("Form","kivicare-clinic-management-system")})}),i.jsx("li",{className:"nav-item m-0",role:"presentation",children:i.jsx("button",{className:`nav-link${s==="formFields"?" active":""}`,onClick:()=>a("formFields"),type:"button",children:r("Form Fields","kivicare-clinic-management-system")})})]}),i.jsxs("div",{className:"tab-content",id:"pills-tabContent",children:[s==="form"&&i.jsx("div",{className:"tab-pane fade show active",children:i.jsxs(Yn,{className:"gy-3",children:[i.jsx(Et,{xs:12,children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{className:"form-label",children:r("Form Name","kivicare-clinic-management-system")}),i.jsx(ye,{name:"name",control:A,render:({field:$})=>i.jsx(Mt.Control,{...$,type:"text",onKeyDown:ce=>ce.stopPropagation(),placeholder:r("Enter form name","kivicare-clinic-management-system")})})]})}),i.jsx(Et,{xs:12,children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{className:"form-label",children:r("Module Type","kivicare-clinic-management-system")}),i.jsx(ye,{name:"moduleType",control:A,render:({field:$})=>i.jsx(ct,{placeholder:r("Select module type","kivicare-clinic-management-system"),value:$.value,onChange:$.onChange,options:Xae,isSearchable:!1,isDisabled:n,className:"react-select-box",classNamePrefix:"react-select",styles:{menuPortal:ce=>({...ce,zIndex:9999})}})})]})}),i.jsx(Et,{xs:12,children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{className:"form-label",children:r("Status","kivicare-clinic-management-system")}),i.jsx(ye,{name:"status",control:A,render:({field:$})=>i.jsx(ct,{placeholder:r("Select status","kivicare-clinic-management-system"),value:QC.find(ce=>ce.value===$.value)||null,onChange:ce=>$.onChange(ce?.value||""),options:QC,className:"react-select-box",classNamePrefix:"react-select",styles:{menuPortal:ce=>({...ce,zIndex:9999})}})})]})}),H.value==="appointment_module"&&i.jsx(i.Fragment,{children:i.jsx(Et,{xs:12,children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{className:"form-label",children:r("Show in Sections","kivicare-clinic-management-system")}),i.jsxs("div",{className:"py-2 px-3 bg-body border border-primary rounded d-flex align-items-center column-gap-3 row-gap-2 flex-wrap",children:[i.jsx(ye,{name:"showInAppointment",control:A,render:({field:$})=>i.jsx(Mt.Check,{inline:!0,label:r("Appointment","kivicare-clinic-management-system"),checked:$.value,onChange:ce=>$.onChange(ce.target.checked),type:"checkbox",id:"showInAppointment",className:"m-0"})}),i.jsx(ye,{name:"showInEncounter",control:A,render:({field:$})=>i.jsx(Mt.Check,{inline:!0,label:r("Encounter","kivicare-clinic-management-system"),checked:$.value,onChange:ce=>$.onChange(ce.target.checked),type:"checkbox",id:"showInEncounter",className:"m-0"})})]}),i.jsx("small",{className:"text-muted",children:r("Note: If encounter is selected, form will only be displayed if there has been an appointment encounter","kivicare-clinic-management-system")})]})})}),Cr()&&i.jsx(Et,{xs:12,children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{className:"form-label",children:r("Clinics","kivicare-clinic-management-system")}),i.jsx(ye,{name:"clinics",control:A,render:({field:$})=>i.jsx(ct,{placeholder:r("Select clinics","kivicare-clinic-management-system"),value:$.value?$.value.map(ce=>W.find(De=>String(De.value)===String(ce))).filter(Boolean):[],onChange:ce=>$.onChange(ce?ce.map(De=>De.value):[]),onInputChange:ce=>U(ce),options:he,isMulti:!0,isLoading:X,className:"react-select-box",menuPlacement:"top",classNamePrefix:"react-select",styles:{menuPortal:ce=>({...ce,zIndex:9999})},filterOption:null})}),i.jsx("small",{className:"text-muted",children:r("Note: To show form to all clinics, please leave the selection blank.","kivicare-clinic-management-system")})]})}),i.jsx(Et,{xs:12,children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{className:"form-label",children:r("Roles to Access","kivicare-clinic-management-system")}),i.jsx(ye,{name:"roles",control:A,render:({field:$})=>i.jsx(ct,{placeholder:r("Select roles","kivicare-clinic-management-system"),value:$.value?$.value.map(ce=>vj().find(De=>De.value===ce)):[],onChange:ce=>$.onChange(ce?ce.map(De=>De.value):[]),options:vj(),isMulti:!0,isSearchable:!1,className:"react-select-box",menuPlacement:"top",classNamePrefix:"react-select",styles:{menuPortal:ce=>({...ce,zIndex:9999})}})}),i.jsx("small",{className:"text-muted",children:r("Note: To show form to all roles, please leave the selection blank.","kivicare-clinic-management-system")})]})})]})}),s==="formFields"&&i.jsx("div",{className:"tab-pane fade show active",children:i.jsx("div",{className:"form-filed-content d-flex align-items-center gap-2 flex-column",children:aM.map($=>i.jsx(ZC,{fieldType:$.type,onDragStart:re},$.type))})})]})]})})})}),i.jsxs(Et,{xs:12,md:7,lg:8,xl:9,children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-3 flex-wrap gap-2",children:[i.jsx("h6",{className:"mb-0",children:n?r("Edit Custom Form","kivicare-clinic-management-system"):r("Add Custom Form","kivicare-clinic-management-system")}),i.jsxs("div",{className:"d-flex align-items-center gap-2 flex-wrap",children:[i.jsxs("button",{className:"btn btn-primary d-flex align-items-center gap-2",type:"button",onClick:()=>N(!0),children:[i.jsx("i",{className:"ph ph-upload"}),i.jsx("span",{children:r("Import","kivicare-clinic-management-system")})]}),i.jsxs("button",{className:"btn btn-primary d-flex align-items-center gap-2",type:"button",onClick:B,children:[i.jsx("i",{className:"ph ph-download"}),i.jsx("span",{children:r("Export","kivicare-clinic-management-system")})]}),i.jsxs("button",{className:"btn btn-secondary d-flex align-items-center gap-2",type:"button",onClick:se,children:[i.jsx("i",{className:"ph ph-eye"}),i.jsx("span",{children:r("View Form","kivicare-clinic-management-system")})]}),i.jsx("button",{type:"submit",className:"btn btn-primary",disabled:le.isPending||ee.isPending,children:le.isPending||ee.isPending?r("Saving...","kivicare-clinic-management-system"):n?r("Update Form","kivicare-clinic-management-system"):r("Save Form","kivicare-clinic-management-system")})]})]}),i.jsx("div",{className:"card",onDragOver:oe,onDrop:C,style:{minHeight:"400px"},children:i.jsxs("div",{className:"card-body",children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-4 pb-4 border-bottom flex-wrap gap-2",children:[i.jsx("h6",{className:"mb-0",children:b.name}),i.jsx("div",{className:"d-flex align-items-center gap-2",children:i.jsx("button",{className:"btn btn-primary",type:"button",onClick:()=>{o(!1),a("formFields")},children:r("Add fields","kivicare-clinic-management-system")})})]}),i.jsxs(Ww,{collisionDetection:IP,onDragEnd:pe,children:[i.jsx(Gw,{items:m.map($=>$.id),strategy:Kw,children:i.jsxs(Yn,{className:"gy-4 custom-form-content",children:[i.jsx(Et,{xs:12,children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{className:"form-label",children:r("Form Name","kivicare-clinic-management-system")}),i.jsx(Mt.Control,{type:"text",value:F,onChange:$=>I("name",$.target.value),onKeyDown:$=>$.stopPropagation(),placeholder:r("Enter form name","kivicare-clinic-management-system")})]})}),m.map($=>i.jsx(Et,{className:$.columnClass,children:i.jsx(ere,{field:$,onEdit:R,onDelete:te,isActive:c?.id===$.id,onClick:()=>Y($)})},$.id)),m.length===0&&i.jsx(Et,{xs:12,children:i.jsxs("div",{className:"text-center p-5 border-2 border-dashed rounded",style:{borderStyle:"dashed"},children:[i.jsx("i",{className:"ph ph-upload-simple font-size-32 text-muted mb-3"}),i.jsx("p",{className:"text-muted",children:r('Drag and drop form fields here or click "Add fields" to get started',"kivicare-clinic-management-system")})]})})]})}),i.jsx(eM,{children:h?i.jsx("div",{className:"opacity-50",children:i.jsx(ZC,{fieldType:h,onDragStart:re})}):null})]})]})})]})]})]}),i.jsxs(lt,{show:j,onHide:Q,size:"lg",centered:!0,backdrop:"static",children:[i.jsx(lt.Header,{closeButton:!0,children:i.jsxs(lt.Title,{children:[r("Form Preview","kivicare-clinic-management-system")," - ",F||b.name]})}),i.jsx(lt.Body,{children:i.jsxs("div",{className:"preview-container p-3",children:[i.jsx(Ua,{fields:m,data:{},readOnly:!1,formId:"preview_form"}),m.length===0&&i.jsxs("div",{className:"text-center p-5",children:[i.jsx("i",{className:"ph ph-file-text font-size-48 text-muted mb-3 d-block"}),i.jsx("h6",{className:"text-muted",children:r("No Fields Added","kivicare-clinic-management-system")}),i.jsx("p",{className:"text-muted mb-0",children:r("Add some fields to see the form preview.","kivicare-clinic-management-system")})]})]})}),i.jsx(lt.Footer,{children:i.jsx("button",{type:"button",className:"btn btn-secondary",onClick:Q,children:r("Close Preview","kivicare-clinic-management-system")})})]}),i.jsxs(lt,{show:_,onHide:()=>N(!1),size:"md",centered:!0,backdrop:"static",children:[i.jsx(lt.Header,{closeButton:!0,children:i.jsx(lt.Title,{children:r("Import Form","kivicare-clinic-management-system")})}),i.jsx(lt.Body,{children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{className:"form-label",children:r("Import JSON","kivicare-clinic-management-system")}),i.jsx(Mt.Control,{as:"textarea",rows:10,placeholder:r("Paste your JSON here","kivicare-clinic-management-system"),value:w,onChange:$=>T($.target.value)}),i.jsx("div",{className:"mt-2",children:i.jsx("a",{href:`data:text/json;charset=utf-8,${encodeURIComponent(JSON.stringify(Qae,null,2))}`,download:"sample1.json",children:r("Click here to download sample json file","kivicare-clinic-management-system")})})]})}),i.jsxs(lt.Footer,{children:[i.jsx("button",{type:"button",className:"btn btn-secondary me-2",onClick:()=>N(!1),children:r("Cancel","kivicare-clinic-management-system")}),i.jsx("button",{type:"button",className:"btn btn-primary",onClick:()=>{q(),N(!1)},children:r("Import Form","kivicare-clinic-management-system")})]})]})]})},tre=()=>{const{isAddonActive:t}=mt(),e=t("kiviPro"),{data:n,isLoading:s,isError:a,error:l}=ZX(),o=tJ(),c=nJ(),d=n?.data||[],{data:m}=Sn(),u=m?.data?.hideUtilityLinks,h=Ln(),p=f.useMemo(()=>[h.accessor("server_name",{header:r("Service Name","kivicare-clinic-management-system"),cell:g=>i.jsxs("div",{children:[i.jsx("h6",{className:"m-0",children:g.getValue()}),i.jsx("small",{className:"text-muted",children:g.row.original.server_url})]})}),h.accessor("server_type",{header:r("Type","kivicare-clinic-management-system"),cell:g=>{const v=g.row.original.type_label||g.getValue();let x="bg-primary";switch(v.toLowerCase()){case"email":x="bg-primary";break;case"whatsapp":x="bg-success";break;case"sms":x="bg-success";break;case"push notification":x="bg-warning";break;case"webhook":x="bg-info";break;case"custom api":x="bg-secondary";break;default:x="bg-secondary"}return i.jsx("span",{className:`badge ${x}`,children:v})}}),h.accessor("is_active",{header:r("Status","kivicare-clinic-management-system"),cell:g=>i.jsx("div",{className:"form-check form-switch custom-switch-xl",children:i.jsx("input",{className:"form-check-input",type:"checkbox",role:"switch",checked:!!g.getValue(),onClick:v=>{const x=g.row.original.id,y=v.target.checked;try{c.mutateAsync({id:x,data:{status:y}}).then(b=>{Se(b.message)})}catch{v.target.checked=!y,Se(r("Failed to update status","kivicare-clinic-management-system"))}}})})}),h.display({id:"actions",header:r("Action","kivicare-clinic-management-system"),cell:g=>{const{id:v}=g.row.original;return i.jsxs("div",{className:"d-flex gap-2",children:[i.jsx(ht,{to:`/setting/custom-notification/edit/${v}`,className:"btn btn-link text-secondary p-0",title:r("Configure","kivicare-clinic-management-system"),children:i.jsx("i",{className:"ph ph-gear"})}),i.jsx(ht,{to:`/setting/custom-notification/test/${v}`,className:"btn btn-link text-info p-0",title:r("Test","kivicare-clinic-management-system"),children:i.jsx("i",{className:"ph ph-flask"})}),i.jsx(ht,{onClick:async x=>{x.preventDefault(),Ze.fire({title:r("Are you sure?","kivicare-clinic-management-system"),text:r("You won't be able to revert this!","kivicare-clinic-management-system"),icon:"warning",showCancelButton:!0,confirmButtonText:r("Yes, delete it!","kivicare-clinic-management-system"),cancelButtonText:r("Cancel","kivicare-clinic-management-system"),confirmButtonColor:"#dc3545"}).then(async y=>{if(y.isConfirmed)try{await o.mutateAsync(v),Se(r("Service deleted successfully","kivicare-clinic-management-system"))}catch{Se(r("Failed to delete service","kivicare-clinic-management-system"))}})},className:"btn btn-link text-danger p-0",title:r("Delete","kivicare-clinic-management-system"),children:i.jsx("i",{className:"ph ph-trash"})})]})}})],[]);return e&&s?i.jsx(_n,{}):i.jsx("div",{className:"tab-pane fade show active position-relative overflow-hidden z-0",id:"v-pills-pro-settings",role:"tabpanel","aria-labelledby":"v-pills-pro-settings-tab",tabIndex:"0",children:i.jsxs("div",{className:`custom-notification-setting${e?"":" p-4"}`,children:[!e&&i.jsx(di,{title:r("Available For Kivicare Pro","kivicare-clinic-management-system"),link:"https://codecanyon.net/item/kivicare-pro-clinic-patient-management-system-ehr-addon/30690654?s_rank=3"}),i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[i.jsxs("h6",{className:"setting-title mb-0",children:[r("Custom Notification","kivicare-clinic-management-system"),u!=="on"&&i.jsx("a",{href:"https://documentation.iqonic.design/kivicare-wordpress/kivicare-pro/documentation-kivicare-pro/configuration-kivi-pro/custom-notification-settings-documentation/",target:"_blank",rel:"noreferrer",children:i.jsx("i",{className:"ph ph-question align-middle h5 ms-2 text-primary"})})]}),i.jsxs(ht,{to:"/setting/custom-notification/add",className:"btn btn-primary btn-sm",children:[i.jsx("i",{className:"ph ph-plus me-1"}),r("Add New Service","kivicare-clinic-management-system")]})]}),i.jsx("div",{className:"table-responsive",children:a?i.jsx("div",{className:"alert alert-danger",children:l?.message||r("Failed to load data","kivicare-clinic-management-system")}):i.jsx(wn,{data:d,columns:p,enableSelection:!1})})]})})},JC=()=>{const{id:t}=Yt(),e=hn(),n=t&&t!=="new",s=XX(),a=JX(),{data:l,isLoading:o}=QR(t,{enabled:n}),{control:c,handleSubmit:d,formState:{errors:m},setValue:u,watch:h,reset:p,getValues:g}=en({defaultValues:{serverType:"",serverName:"",serverUrl:"",port:443,httpMethod:"POST",authMethod:"none",apiKey:"",keyLocation:"header",headerParamName:"Authorization",username:"",password:"",encoding:"Base64",accessToken:"",tokenType:"Bearer",tokenExpiry:"",clientId:"",clientSecret:"",authUrl:"",tokenUrl:"",redirectUrl:"",scopes:"",refreshToken:"",jwtIssuer:"",jwtSubject:"",jwtAudience:"",jwtPrivateKey:"",jwtAlgorithm:"HS256",jwtExpiryDuration:"60",jwtExpiryUnit:"minutes",hmacAccessKey:"",hmacSecretKey:"",hmacAlgorithm:"HMAC-SHA256",hmacSignatureLocation:"header",hmacHeaderParamName:"X-Signature",senderName:"",senderEmail:"",enableSSL:!1,contentType:"application/json",customHeaders:[{key:"",value:""}],queryParams:[{key:"",value:""}],requestBodyFields:[{key:"",value:""}],requestBody:""}}),{append:v,remove:x}=yr({control:c,name:"customHeaders"}),{append:y,remove:b}=yr({control:c,name:"queryParams"}),{append:k,remove:w}=yr({control:c,name:"requestBodyFields"}),T=h(),[j,D]=f.useState(!1),[_,N]=f.useState(!1);f.useEffect(()=>{if(n&&l?.data){const C=l.data;let R=[{key:"",value:""}],te=C.request_body||"";if(C.request_body)try{const ne=JSON.parse(C.request_body);typeof ne=="object"&&ne!==null?(R=Object.entries(ne).map(([Y,q])=>({key:Y,value:typeof q=="string"?q:JSON.stringify(q)})),R.length===0&&(R=[{key:"",value:""}])):R=[{key:"",value:C.request_body}]}catch{if(C.content_type==="application/x-www-form-urlencoded")try{const Y=new URLSearchParams(C.request_body);R=[];for(let[q,B]of Y.entries())R.push({key:q,value:B});R.length===0&&(R=[{key:"",value:""}])}catch{R=[{key:"",value:C.request_body}]}else R=[{key:"",value:C.request_body}]}console.log(C.auth_config?.access_token,"ritesh"),p({serverType:C.server_type||"",serverName:C.server_name||"",serverUrl:C.server_url||"",port:C.port||443,httpMethod:C.http_method||"POST",authMethod:C.auth_method||"none",apiKey:C.auth_config?.api_key||"",keyLocation:C.auth_config?.key_location||"header",headerParamName:C.auth_config?.header_param_name||"Authorization",clientId:C.auth_config?.client_id||"",clientSecret:C.auth_config?.client_secret||"",authUrl:C.auth_config?.auth_url||"",tokenUrl:C.auth_config?.token_url||"",redirectUrl:C.auth_config?.redirect_url||"",username:C.auth_config?.username||"",password:C.auth_config?.password||"",accessToken:C.auth_config?.access_token||"",tokenExpiry:C.auth_config?.token_expiry||"",scopes:C.auth_config?.scopes,senderName:C.sender_name||"",senderEmail:C.sender_email||"",enableSSL:C.enable_ssl||!1,contentType:C.content_type||"application/json",customHeaders:C.custom_headers?.length>0?C.custom_headers:[{key:"",value:""}],queryParams:C.query_params?.length>0?C.query_params:[{key:"",value:""}],requestBodyFields:R,requestBody:te})}},[n,l,p]),f.useEffect(()=>{if(T.authMethod==="bearer"&&!T.redirectUrl){const C=window.kc_frontend.dashboard_uri+"/setting/custom-notification/oauth2/callback";u("redirectUrl",C)}},[T.authMethod,T.redirectUrl,u]);const A=[{name:"receiver_email",description:r("Recipient email address","kivicare-clinic-management-system"),example:"user@example.com"},{name:"receiver_number",description:r("Recipient phone number","kivicare-clinic-management-system"),example:"+1234567890"},{name:"subject",description:r("Message subject/title","kivicare-clinic-management-system"),example:"Appointment Confirmation"},{name:"content",description:r("Message content/body","kivicare-clinic-management-system"),example:"Your appointment is confirmed for tomorrow at 10:00 AM"},{name:"timestamp",description:r("Current timestamp","kivicare-clinic-management-system"),example:"2024-01-15 10:30:45"},{name:"clinic_name",description:r("Clinic/site name","kivicare-clinic-management-system"),example:"Healthcare Clinic"},{name:"content_sid",description:r("Content/Message SID identifier","kivicare-clinic-management-system"),example:"SM1234567890abcdef"}],P=[{value:"sms",label:"SMS"},{value:"whatsapp",label:"WhatsApp"},{value:"email",label:"Email"},{value:"webhook",label:"Webhook"},{value:"custom-api",label:"Custom API"},{value:"push-notification",label:"Push Notification"}],E=[{value:"none",label:"No Authentication"},{value:"apikey",label:"API Key Authentication"},{value:"basic",label:"Basic Authentication"},{value:"bearer",label:"Bearer Token Authentication (OAuth2 / JWT)"},{value:"jwt",label:"JWT (JSON Web Token)"},{value:"hmac",label:"HMAC / Signature Authentication"}],I=[{value:"GET",label:"GET"},{value:"POST",label:"POST"},{value:"PUT",label:"PUT"},{value:"PATCH",label:"PATCH"},{value:"DELETE",label:"DELETE"}],M=[{value:"application/json",label:"JSON"},{value:"application/xml",label:"XML"},{value:"application/x-www-form-urlencoded",label:"Form Data"},{value:"text/plain",label:"Plain Text"}],O=[{value:"header",label:"Header"},{value:"query",label:"Query Parameter"}],F=[{value:"Bearer",label:"Bearer"},{value:"Token",label:"Token"},{value:"JWT",label:"JWT"}],H=[{value:"HS256",label:"HS256"},{value:"HS384",label:"HS384"},{value:"HS512",label:"HS512"},{value:"RS256",label:"RS256"},{value:"RS384",label:"RS384"},{value:"RS512",label:"RS512"},{value:"ES256",label:"ES256"},{value:"ES384",label:"ES384"},{value:"ES512",label:"ES512"}],G=[{value:"HMAC-SHA256",label:"HMAC-SHA256"},{value:"HMAC-SHA1",label:"HMAC-SHA1"},{value:"HMAC-SHA512",label:"HMAC-SHA512"},{value:"HMAC-MD5",label:"HMAC-MD5"}],z=[{value:"header",label:"Header"},{value:"query",label:"Query Parameter"}],ie=[{value:"minutes",label:"Minutes"},{value:"hours",label:"Hours"},{value:"days",label:"Days"}],W=(C,R)=>{u(C,R)},ge=C=>{C==="customHeaders"?v({key:"",value:""}):C==="queryParams"?y({key:"",value:""}):C==="requestBodyFields"&&k({key:"",value:""})},ae=(C,R,te,ne)=>{if(C==="customHeaders"){const q=g("customHeaders").map((B,se)=>se===R?{...B,[te]:ne}:B);u("customHeaders",q)}else if(C==="queryParams"){const q=g("queryParams").map((B,se)=>se===R?{...B,[te]:ne}:B);u("queryParams",q)}else if(C==="requestBodyFields"){const q=g("requestBodyFields").map((B,se)=>se===R?{...B,[te]:ne}:B);u("requestBodyFields",q)}},U=(C,R)=>{C==="customHeaders"?x(R):C==="queryParams"?b(R):C==="requestBodyFields"&&w(R)},X=()=>{switch(T.serverType){case"sms":return r("Enter phone number (e.g., +1234567890)","kivicare-clinic-management-system");case"email":return r("Enter email address (e.g., noreply@domain.com)","kivicare-clinic-management-system");case"push-notification":return r("Enter app identifier or sender ID","kivicare-clinic-management-system");default:return r("Enter sender identifier","kivicare-clinic-management-system")}},J=()=>{switch(T.contentType){case"application/json":return`{
  "to": "{{receiver_number}}",
  "message": "{{content}}",
  "content_id": "{{contentid}}",
  "appointment_id": "{{appointment_id}}",
  "patient_name": "{{patient_name}}",
  "doctor_name": "{{doctor_name}}",
  "clinic_name": "{{clinic_name}}",
  "appointment_date": "{{appointment_date}}",
  "appointment_time": "{{appointment_time}}"
}`;case"application/xml":return`<?xml version="1.0"?>
<notification>
  <to>{{receiver_number}}</to>
  <message>{{content}}</message>
  <content_id>{{contentid}}</content_id>
  <appointment_id>{{appointment_id}}</appointment_id>
  <patient_name>{{patient_name}}</patient_name>
  <doctor_name>{{doctor_name}}</doctor_name>
  <clinic_name>{{clinic_name}}</clinic_name>
  <appointment_date>{{appointment_date}}</appointment_date>
  <appointment_time>{{appointment_time}}</appointment_time>
</notification>`;case"application/x-www-form-urlencoded":return"to={{receiver_number}}&message={{content}}&content_id={{contentid}}&appointment_id={{appointment_id}}&patient_name={{patient_name}}&doctor_name={{doctor_name}}&clinic_name={{clinic_name}}&appointment_date={{appointment_date}}&appointment_time={{appointment_time}}";default:return"Use variables like {{receiver_number}}, {{content}}, {{contentid}}, {{appointment_id}}, {{patient_name}}, {{doctor_name}}, {{clinic_name}}, {{appointment_date}}, {{appointment_time}}"}},he=()=>["POST","PUT","PATCH"].includes(T.httpMethod),le=async C=>{try{await navigator.clipboard.writeText(`{{${C}}}`),console.log(`Copied {{${C}}} to clipboard`)}catch{const te=document.createElement("textarea");te.value=`{{${C}}}`,document.body.appendChild(te),te.select(),document.execCommand("copy"),document.body.removeChild(te),console.log(`Copied {{${C}}} to clipboard`)}},ee=async()=>{if(!T.clientId||!T.clientSecret||!T.authUrl||!T.tokenUrl){Se.error(r("Error: Please fill in all required OAuth2 fields (Client ID, Client Secret, Auth URL, Token URL)","kivicare-clinic-management-system"));return}N(!0),Se.info(r("Starting OAuth2 authorization flow...","kivicare-clinic-management-system"));try{const C=new URLSearchParams({response_type:"code",client_id:T.clientId,redirect_uri:window.kc_frontend.dashboard_uri+"/setting/custom-notification/oauth2/callback",scope:T.scopes||"read write",state:Math.random().toString(36).substring(2,15)}),R=`${T.authUrl}?${C.toString()}`;Se.info(r("Opening authorization window...","kivicare-clinic-management-system"));const te=window.open(R,"oauth2_auth","width=600,height=700,scrollbars=yes,resizable=yes");if(!te)throw new Error(r("Failed to open authorization window. Please allow popups for this site.","kivicare-clinic-management-system"));const ne=q=>{q.origin===window.location.origin&&(q.data.type==="oauth2_success"&&q.data.code?(te.close(),window.removeEventListener("message",ne),me(q.data.code)):q.data.type==="oauth2_error"&&(te.close(),window.removeEventListener("message",ne),Se.error(r("Authorization failed: ","kivicare-clinic-management-system")+q.data.error),N(!1)))};window.addEventListener("message",ne);const Y=setInterval(()=>{te.closed&&(clearInterval(Y),window.removeEventListener("message",ne),Se.warning(r("Authorization cancelled by user","kivicare-clinic-management-system")),N(!1))},1e3)}catch(C){console.error("OAuth2 Error:",C),Se.error(r("Error: ","kivicare-clinic-management-system")+C.message),N(!1)}},me=async C=>{try{Se.info(r("Exchanging authorization code for access token...","kivicare-clinic-management-system"));const R=new URLSearchParams({grant_type:"authorization_code",client_id:T.clientId,client_secret:T.clientSecret,code:C,redirect_uri:T.redirectUrl||window.location.origin+"#/setting/custom-notification/oauth2/callback"}),te={"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json"},ne=btoa(`${T.clientId}:${T.clientSecret}`);te.Authorization=`Basic ${ne}`;const Y=await fetch(T.tokenUrl,{method:"POST",headers:te,body:R.toString(),mode:"cors",credentials:"omit"});let q,B;try{q=await Y.text(),B=JSON.parse(q)}catch{throw new Error(`Invalid response format: ${q.substring(0,200)}...`)}if(!Y.ok){const se=B?.error_description||B?.error||q;throw new Error(`Token exchange failed (${Y.status}): ${se}`)}if(B.access_token){if(W("accessToken",B.access_token),B.refresh_token&&W("refreshToken",B.refresh_token),B.expires_in){const se=new Date;se.setSeconds(se.getSeconds()+parseInt(B.expires_in)),W("tokenExpiry",se.toISOString().slice(0,16))}B.token_type&&W("tokenType",B.token_type),Se.success(r(" Access token generated successfully! Token will expire at: ","kivicare-clinic-management-system")+(B.expires_in?new Date(Date.now()+parseInt(B.expires_in)*1e3).toLocaleString():r("Unknown","kivicare-clinic-management-system")))}else throw B.error?new Error(B.error_description||B.error):new Error(r("No access token received from server. Response: ","kivicare-clinic-management-system")+JSON.stringify(B))}catch(R){console.error("Token Exchange Error:",R);let te=R.message;R.message.includes("CORS")?te=r("CORS error: The OAuth provider does not allow browser requests. You may need to configure CORS settings or use server-side token exchange.","kivicare-clinic-management-system"):R.message.includes("Failed to fetch")&&(te=r("Network error: Unable to reach the token endpoint. Please check the Token URL and your internet connection.","kivicare-clinic-management-system")),Se.error(r("Token exchange failed: ","kivicare-clinic-management-system")+te)}finally{N(!1)}},K=async()=>{if(!T.refreshToken||!T.tokenUrl){Se.error(r("Error: Refresh token and token URL are required for token refresh","kivicare-clinic-management-system"));return}N(!0),Se.info(r("Refreshing access token...","kivicare-clinic-management-system"));try{const C=new URLSearchParams({grant_type:"refresh_token",client_id:T.clientId,client_secret:T.clientSecret,refresh_token:T.refreshToken}),R={"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json"},te=btoa(`${T.clientId}:${T.clientSecret}`);R.Authorization=`Basic ${te}`;const ne=await fetch(T.tokenUrl,{method:"POST",headers:R,body:C.toString(),mode:"cors",credentials:"omit"});let Y,q;try{Y=await ne.text(),q=JSON.parse(Y)}catch{throw new Error(`Invalid response format: ${Y.substring(0,200)}...`)}if(!ne.ok){const B=q?.error_description||q?.error||Y;throw new Error(`Token refresh failed (${ne.status}): ${B}`)}if(q.access_token){if(W("accessToken",q.access_token),q.refresh_token&&W("refreshToken",q.refresh_token),q.expires_in){const B=new Date;B.setSeconds(B.getSeconds()+parseInt(q.expires_in)),W("tokenExpiry",B.toISOString().slice(0,16))}q.token_type&&W("tokenType",q.token_type),Se.success(r(" Access token refreshed successfully! New expiry: ","kivicare-clinic-management-system")+(q.expires_in?new Date(Date.now()+parseInt(q.expires_in)*1e3).toLocaleString():r("Unknown","kivicare-clinic-management-system")))}else throw new Error(r("No access token received during refresh","kivicare-clinic-management-system"))}catch(C){console.error("Token Refresh Error:",C),Se.error(r("Token refresh failed: ","kivicare-clinic-management-system")+C.message)}finally{N(!1)}},re=(C=T)=>{const R={};C.authMethod==="apikey"?(R.api_key=C.apiKey,R.key_location=C.keyLocation,R.header_param_name=C.headerParamName):C.authMethod==="basic"?(R.username=C.username,R.password=C.password,R.encoding=C.encoding):C.authMethod==="bearer"?(R.access_token=C.accessToken,R.token_type=C.tokenType,R.token_expiry=C.tokenExpiry,C.clientId&&(R.client_id=C.clientId),C.clientSecret&&(R.client_secret=C.clientSecret),C.authUrl&&(R.auth_url=C.authUrl),C.tokenUrl&&(R.token_url=C.tokenUrl),C.redirectUrl&&(R.redirect_url=C.redirectUrl),C.scopes&&(R.scopes=C.scopes),C.refreshToken&&(R.refresh_token=C.refreshToken)):C.authMethod==="jwt"?(R.issuer=C.jwtIssuer,R.subject=C.jwtSubject,R.audience=C.jwtAudience,R.private_key=C.jwtPrivateKey,R.algorithm=C.jwtAlgorithm,R.expiry_duration=C.jwtExpiryDuration,R.expiry_unit=C.jwtExpiryUnit):C.authMethod==="hmac"&&(R.access_key=C.hmacAccessKey,R.secret_key=C.hmacSecretKey,R.algorithm=C.hmacAlgorithm,R.signature_location=C.hmacSignatureLocation,R.header_param_name=C.hmacHeaderParamName);const te=C.customHeaders.filter(B=>B.key&&B.value),ne=C.queryParams.filter(B=>B.key&&B.value),Y=C.requestBodyFields?C.requestBodyFields.filter(B=>B.key&&B.value):[];let q=C.requestBody;if(C.contentType==="application/x-www-form-urlencoded"&&Y.length>0){const B=new URLSearchParams;Y.forEach(se=>{B.append(se.key,se.value)}),q=B.toString()}else if(C.contentType==="application/json"&&Y.length>0){const B={};Y.forEach(se=>{B[se.key]=se.value}),q=JSON.stringify(B)}else if(Y.length>0&&Y.some(B=>B.key&&B.value))if(C.contentType==="application/json"){const B={};Y.forEach(se=>{B[se.key]=se.value}),q=JSON.stringify(B)}else{const B=new URLSearchParams;Y.forEach(se=>{B.append(se.key,se.value)}),q=B.toString()}return{server_type:C.serverType,server_name:C.serverName,server_url:C.serverUrl,port:parseInt(C.port),http_method:C.httpMethod,auth_method:C.authMethod,auth_config:Object.keys(R).length>0?R:null,sender_name:C.senderName,sender_email:C.senderEmail,enable_ssl:C.enableSSL,content_type:C.contentType,custom_headers:te.length>0?te:null,query_params:ne.length>0?ne:null,request_body:q,is_active:!0}},oe=async C=>{D(!0);try{const R=re(C);n?(await a.mutateAsync({id:parseInt(t),data:R}),Se.success(r("Configuration updated successfully","kivicare-clinic-management-system"))):(await s.mutateAsync(R),Se.success(r("Configuration saved successfully","kivicare-clinic-management-system"))),e("/setting/custom-notification")}catch(R){console.error("Error saving notification service:",R)}finally{D(!1)}};return n&&o?i.jsx(Ky,{}):i.jsx("div",{className:"custom-notification-edit",children:i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[i.jsxs("div",{children:[i.jsx("h4",{className:"mb-1",children:n?r("Edit Notification Service","kivicare-clinic-management-system"):r("Create Notification Service","kivicare-clinic-management-system")}),i.jsx("p",{className:"text-muted mb-0",children:n?r("Configure settings for notification service ID:","kivicare-clinic-management-system")+" "+t:r("Configure settings for a new notification service","kivicare-clinic-management-system")})]}),i.jsx(ht,{to:"/setting/custom-notification",className:"btn btn-primary",children:r("Back","kivicare-clinic-management-system")})]}),i.jsxs("form",{onSubmit:d(oe),children:[i.jsxs("div",{className:"card mb-4",children:[i.jsx("div",{className:"card-header",children:i.jsx("h5",{className:"card-title mb-0",children:r("Basic Settings","kivicare-clinic-management-system")})}),i.jsxs("div",{className:"card-body",children:[i.jsxs("div",{className:"row",children:[i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"mb-3",children:[i.jsxs("label",{className:"form-label",children:[r("Notification Server Type","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx(ct,{options:P,value:P.find(C=>C.value===T.serverType)||null,onChange:C=>W("serverType",C?.value||""),placeholder:r("Select server type","kivicare-clinic-management-system"),classNamePrefix:"react-select",isClearable:!0,isSearchable:!1,styles:{menuPortal:C=>({...C,zIndex:9999})},className:m.serverType?"react-select-box is-invalid":"react-select-box"}),m.serverType&&i.jsx("div",{className:"invalid-feedback d-block",children:m.serverType})]})}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"mb-3",children:[i.jsxs("label",{className:"form-label",children:[r("Server Name","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx("input",{type:"text",className:`form-control ${m.serverName?"is-invalid":""}`,value:T.serverName,onChange:C=>W("serverName",C.target.value),placeholder:r("Enter server name","kivicare-clinic-management-system")}),m.serverName&&i.jsx("div",{className:"invalid-feedback",children:m.serverName})]})})]}),i.jsxs("div",{className:"row",children:[i.jsx("div",{className:"col-md-8",children:i.jsxs("div",{className:"mb-3",children:[i.jsxs("label",{className:"form-label",children:[r("Server URL / Host","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx("input",{type:"url",className:`form-control ${m.serverUrl?"is-invalid":""}`,value:T.serverUrl,onChange:C=>W("serverUrl",C.target.value),placeholder:r("https://api.example.com/v1/send","kivicare-clinic-management-system")}),m.serverUrl&&i.jsx("div",{className:"invalid-feedback",children:m.serverUrl})]})}),i.jsx("div",{className:"col-md-4",children:i.jsxs("div",{className:"mb-3",children:[i.jsxs("label",{className:"form-label",children:[r("Port Number","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx("input",{type:"number",className:`form-control ${m.port?"is-invalid":""}`,value:T.port,onChange:C=>W("port",C.target.value),placeholder:"443"}),m.port&&i.jsx("div",{className:"invalid-feedback",children:m.port})]})})]}),i.jsxs("div",{className:"mb-3",children:[i.jsxs("label",{className:"form-label",children:[r("HTTP Method","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx(ct,{options:I,value:I.find(C=>C.value===T.httpMethod)||null,onChange:C=>W("httpMethod",C?.value||"POST"),placeholder:r("Select HTTP method","kivicare-clinic-management-system"),className:m.httpMethod?"react-select-box is-invalid":"react-select-box",classNamePrefix:"react-select",isSearchable:!1,styles:{menuPortal:C=>({...C,zIndex:9999})}}),m.httpMethod&&i.jsx("div",{className:"invalid-feedback d-block",children:m.httpMethod})]})]})]}),i.jsxs("div",{className:"card mb-4",children:[i.jsx("div",{className:"card-header",children:i.jsx("h5",{className:"card-title mb-0",children:r("Authentication","kivicare-clinic-management-system")})}),i.jsxs("div",{className:"card-body",children:[i.jsxs("div",{className:"mb-3",children:[i.jsxs("label",{className:"form-label",children:[r("Authentication Method","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx(ct,{options:E,value:E.find(C=>C.value===T.authMethod)||null,onChange:C=>W("authMethod",C?.value||""),placeholder:r("Select authentication method","kivicare-clinic-management-system"),isSearchable:!1,className:m.authMethod?"react-select-box is-invalid":"react-select-box",classNamePrefix:"react-select",styles:{menuPortal:C=>({...C,zIndex:9999})}}),m.authMethod&&i.jsx("div",{className:"invalid-feedback d-block",children:m.authMethod})]}),T.authMethod==="apikey"&&i.jsxs("div",{className:"border p-3 rounded bg-body",children:[i.jsxs("h6",{className:"mb-3",children:[" ",r("API Key Authentication","kivicare-clinic-management-system")]}),i.jsxs("div",{className:"row",children:[i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"mb-3",children:[i.jsxs("label",{className:"form-label",children:[r("API Key","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx("input",{type:"password",className:`form-control ${m.apiKey?"is-invalid":""}`,value:T.apiKey,onChange:C=>W("apiKey",C.target.value),placeholder:r("Enter API key","kivicare-clinic-management-system")}),m.apiKey&&i.jsx("div",{className:"invalid-feedback",children:m.apiKey})]})}),i.jsx("div",{className:"col-md-3",children:i.jsxs("div",{className:"mb-3",children:[i.jsx("label",{className:"form-label",children:r("Key Location","kivicare-clinic-management-system")}),console.log(T),i.jsx(ct,{options:O,value:O.find(C=>C.value===T.keyLocation)||O[0],onChange:C=>W("keyLocation",C?.value||"header"),className:"react-select-box",classNamePrefix:"react-select",styles:{menuPortal:C=>({...C,zIndex:9999})}})]})}),i.jsx("div",{className:"col-md-3",children:i.jsxs("div",{className:"mb-3",children:[i.jsxs("label",{className:"form-label",children:[r("Header/Param Name","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx("input",{type:"text",className:`form-control ${m.headerParamName?"is-invalid":""}`,value:T.headerParamName,onChange:C=>W("headerParamName",C.target.value),placeholder:r("Authorization","kivicare-clinic-management-system")}),m.headerParamName&&i.jsx("div",{className:"invalid-feedback",children:m.headerParamName})]})})]})]}),T.authMethod==="basic"&&i.jsxs("div",{className:"border p-3 rounded bg-body",children:[i.jsxs("h6",{className:"mb-3",children:[" ",r("Basic Authentication","kivicare-clinic-management-system")]}),i.jsxs("div",{className:"row",children:[i.jsx("div",{className:"col-md-4",children:i.jsxs("div",{className:"mb-3",children:[i.jsxs("label",{className:"form-label",children:[r("Username","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx("input",{type:"text",className:`form-control ${m.username?"is-invalid":""}`,value:T.username,onChange:C=>W("username",C.target.value),placeholder:r("Enter username","kivicare-clinic-management-system")}),m.username&&i.jsx("div",{className:"invalid-feedback",children:m.username})]})}),i.jsx("div",{className:"col-md-4",children:i.jsxs("div",{className:"mb-3",children:[i.jsxs("label",{className:"form-label",children:[r("Password","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx("input",{type:"password",className:`form-control ${m.password?"is-invalid":""}`,value:T.password,onChange:C=>W("password",C.target.value),placeholder:r("Enter password","kivicare-clinic-management-system")}),m.password&&i.jsx("div",{className:"invalid-feedback",children:m.password})]})}),i.jsx("div",{className:"col-md-4",children:i.jsxs("div",{className:"mb-3",children:[i.jsx("label",{className:"form-label",children:r("Encoding","kivicare-clinic-management-system")}),i.jsx("input",{type:"text",className:"form-control",value:T.encoding,onChange:C=>W("encoding",C.target.value),placeholder:"Base64",readOnly:!0})]})})]})]}),T.authMethod==="bearer"&&i.jsxs("div",{className:"border p-3 rounded ",children:[i.jsxs("h6",{className:"mb-3",children:[" ",r("Bearer Token Authentication (OAuth2 / JWT)","kivicare-clinic-management-system")]}),i.jsxs("div",{className:"row",children:[i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"mb-3",children:[i.jsxs("label",{className:"form-label",children:[r("Access Token","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx("input",{type:"password",className:`form-control ${m.accessToken?"is-invalid":""}`,value:T.accessToken,onChange:C=>W("accessToken",C.target.value),placeholder:r("Enter access token","kivicare-clinic-management-system")}),m.accessToken&&i.jsx("div",{className:"invalid-feedback",children:m.accessToken})]})}),i.jsx("div",{className:"col-md-3",children:i.jsxs("div",{className:"mb-3",children:[i.jsx("label",{className:"form-label",children:r("Token Type","kivicare-clinic-management-system")}),i.jsx(ct,{options:F,value:F.find(C=>C.value===T.tokenType)||F[0],onChange:C=>W("tokenType",C?.value||"Bearer"),className:"react-select-box",classNamePrefix:"react-select",styles:{menuPortal:C=>({...C,zIndex:9999})}})]})}),i.jsx("div",{className:"col-md-3",children:i.jsxs("div",{className:"mb-3",children:[i.jsx("label",{className:"form-label",children:r("Token Expiry","kivicare-clinic-management-system")}),i.jsx("input",{type:"datetime-local",className:"form-control",value:T.tokenExpiry,onChange:C=>W("tokenExpiry",C.target.value)})]})})]}),i.jsx("h6",{className:"mt-4 mb-3",children:r("OAuth2 Flow (Optional)","kivicare-clinic-management-system")}),i.jsxs("div",{className:"row",children:[i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"mb-3",children:[i.jsx("label",{className:"form-label",children:r("Client ID","kivicare-clinic-management-system")}),i.jsx("input",{type:"text",className:"form-control",value:T.clientId,onChange:C=>W("clientId",C.target.value),placeholder:r("Enter client ID","kivicare-clinic-management-system")})]})}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"mb-3",children:[i.jsx("label",{className:"form-label",children:r("Client Secret","kivicare-clinic-management-system")}),i.jsx("input",{type:"password",className:"form-control",value:T.clientSecret,onChange:C=>W("clientSecret",C.target.value),placeholder:r("Enter client secret","kivicare-clinic-management-system")})]})}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"mb-3",children:[i.jsx("label",{className:"form-label",children:r("Authorization URL","kivicare-clinic-management-system")}),i.jsx("input",{type:"url",className:"form-control",value:T.authUrl,onChange:C=>W("authUrl",C.target.value),placeholder:r("Enter authorization URL","kivicare-clinic-management-system")})]})}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"mb-3",children:[i.jsx("label",{className:"form-label",children:r("Token URL","kivicare-clinic-management-system")}),i.jsx("input",{type:"url",className:"form-control",value:T.tokenUrl,onChange:C=>W("tokenUrl",C.target.value),placeholder:r("Enter token URL","kivicare-clinic-management-system")})]})}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"mb-3",children:[i.jsxs("label",{className:"form-label",children:[r("Redirect URL / Callback","kivicare-clinic-management-system"),i.jsx(Qe,{placement:"top",overlay:i.jsx(ut,{id:"redirect-url-tooltip",children:r("This is the callback URL you need to configure in your OAuth2 provider settings. It tells the provider where to send the authorization code after user approval.","kivicare-clinic-management-system")}),children:i.jsx("i",{className:"ph ph-info ms-1",style:{cursor:"help"}})})]}),i.jsxs("div",{className:"input-group",children:[i.jsx("input",{type:"url",className:"form-control",value:window.kc_frontend.dashboard_uri+"/setting/custom-notification/oauth2/callback",onChange:C=>W("redirectUrl",C.target.value),placeholder:r("OAuth2 callback URL","kivicare-clinic-management-system")}),i.jsx("button",{type:"button",className:"btn btn-outline-secondary",onClick:()=>{const C=window.kc_frontend.dashboard_uri+"/setting/custom-notification/oauth2/callback";W("redirectUrl",C)},title:r("Set default callback URL","kivicare-clinic-management-system"),children:i.jsx("i",{className:"ph ph-link"})}),i.jsx("button",{type:"button",className:"btn btn-outline-primary",onClick:async()=>{try{const C=window.kc_frontend.dashboard_uri+"/setting/custom-notification/oauth2/callback";await navigator.clipboard.writeText(C),Se.success(r(" Callback URL copied to clipboard!","kivicare-clinic-management-system"))}catch{const R=document.createElement("textarea");R.value=window.kc_frontend.dashboard_uri+"/setting/custom-notification/oauth2/callback",document.body.appendChild(R),R.select(),document.execCommand("copy"),document.body.removeChild(R),Se.success(r(" Callback URL copied to clipboard!","kivicare-clinic-management-system"))}},title:r("Copy callback URL to clipboard","kivicare-clinic-management-system"),children:i.jsx("i",{className:"ph ph-copy"})})]}),i.jsxs("div",{className:"form-text",children:[i.jsx("strong",{children:r("Important:","kivicare-clinic-management-system")})," ",r(`Copy this URL and paste it as the "Redirect URI" or "Callback URL" in your OAuth2 provider's application settings. This allows the provider to send the authorization code back to this application.`,"kivicare-clinic-management-system")]})]})}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"mb-3",children:[i.jsx("label",{className:"form-label",children:r("Scopes","kivicare-clinic-management-system")}),i.jsx("input",{type:"text",className:"form-control",value:T.scopes,onChange:C=>W("scopes",C.target.value),placeholder:r("Enter scopes (comma separated)","kivicare-clinic-management-system")})]})}),i.jsx("div",{className:"col-md-12",children:i.jsxs("div",{className:"mb-3",children:[i.jsx("label",{className:"form-label",children:r("Refresh Token","kivicare-clinic-management-system")}),i.jsx("input",{type:"password",className:"form-control",value:T.refreshToken,onChange:C=>W("refreshToken",C.target.value),placeholder:r("Enter refresh token","kivicare-clinic-management-system")})]})})]}),i.jsxs("div",{className:"mt-4 pt-3 border-top",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[i.jsxs("h6",{className:"mb-0",children:[" ",r("OAuth2 Token Generation","kivicare-clinic-management-system")]}),i.jsxs("div",{className:"d-flex gap-2",children:[i.jsx("button",{type:"button",className:"btn btn-success btn-sm",onClick:ee,disabled:_||!T.clientId||!T.clientSecret||!T.authUrl||!T.tokenUrl,children:_?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"spinner-border spinner-border-sm me-2",role:"status",children:i.jsx("span",{className:"visually-hidden",children:r("Loading...","kivicare-clinic-management-system")})}),r("Generating...","kivicare-clinic-management-system")]}):i.jsxs(i.Fragment,{children:[i.jsx("i",{className:"ph ph-key me-2"}),r("Generate Access Token","kivicare-clinic-management-system")]})}),T.refreshToken&&i.jsx("button",{type:"button",className:"btn btn-outline-primary btn-sm",onClick:K,disabled:_||!T.refreshToken||!T.tokenUrl,children:_?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"spinner-border spinner-border-sm me-2",role:"status",children:i.jsx("span",{className:"visually-hidden",children:r("Loading...","kivicare-clinic-management-system")})}),r("Refreshing...","kivicare-clinic-management-system")]}):i.jsxs(i.Fragment,{children:[i.jsx("i",{className:"ph ph-arrow-clockwise me-2"}),r("Refresh Token","kivicare-clinic-management-system")]})})]})]}),i.jsx("small",{className:"text-muted d-block mt-2",children:r('Fill in all OAuth2 fields above, then click "Generate Access Token" to start the OAuth2 authorization flow. This will automatically populate the Access Token field. If you have a refresh token, you can use the "Refresh Token" button to get a new access token without going through the full authorization flow again.',"kivicare-clinic-management-system")})]})]}),T.authMethod==="jwt"&&i.jsxs("div",{className:"border p-3 rounded bg-body",children:[i.jsxs("h6",{className:"mb-3",children:[" ",r("JWT (JSON Web Token)","kivicare-clinic-management-system")]}),i.jsxs("div",{className:"row",children:[i.jsx("div",{className:"col-md-4",children:i.jsxs("div",{className:"mb-3",children:[i.jsxs("label",{className:"form-label",children:[r("Issuer (iss)","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx("input",{type:"text",className:`form-control ${m.jwtIssuer?"is-invalid":""}`,value:T.jwtIssuer,onChange:C=>W("jwtIssuer",C.target.value),placeholder:r("Enter issuer","kivicare-clinic-management-system")}),m.jwtIssuer&&i.jsx("div",{className:"invalid-feedback",children:m.jwtIssuer})]})}),i.jsx("div",{className:"col-md-4",children:i.jsxs("div",{className:"mb-3",children:[i.jsx("label",{className:"form-label",children:r("Subject (sub)","kivicare-clinic-management-system")}),i.jsx("input",{type:"text",className:"form-control",value:T.jwtSubject,onChange:C=>W("jwtSubject",C.target.value),placeholder:r("Enter subject","kivicare-clinic-management-system")})]})}),i.jsx("div",{className:"col-md-4",children:i.jsxs("div",{className:"mb-3",children:[i.jsx("label",{className:"form-label",children:r("Audience (aud)","kivicare-clinic-management-system")}),i.jsx("input",{type:"text",className:"form-control",value:T.jwtAudience,onChange:C=>W("jwtAudience",C.target.value),placeholder:r("Enter audience","kivicare-clinic-management-system")})]})}),i.jsx("div",{className:"col-md-12",children:i.jsxs("div",{className:"mb-3",children:[i.jsxs("label",{className:"form-label",children:[r("Private Key / Secret","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx("textarea",{className:`form-control ${m.jwtPrivateKey?"is-invalid":""}`,rows:"4",value:T.jwtPrivateKey,onChange:C=>W("jwtPrivateKey",C.target.value),placeholder:r("Enter private key or secret","kivicare-clinic-management-system"),style:{fontFamily:"monospace"}}),m.jwtPrivateKey&&i.jsx("div",{className:"invalid-feedback",children:m.jwtPrivateKey})]})}),i.jsx("div",{className:"col-md-4",children:i.jsxs("div",{className:"mb-3",children:[i.jsx("label",{className:"form-label",children:r("Algorithm","kivicare-clinic-management-system")}),i.jsx(ct,{options:H,value:H.find(C=>C.value===T.jwtAlgorithm)||H[0],onChange:C=>W("jwtAlgorithm",C?.value||"HS256"),className:"react-select-box",classNamePrefix:"react-select",styles:{menuPortal:C=>({...C,zIndex:9999})}})]})}),i.jsx("div",{className:"col-md-4",children:i.jsxs("div",{className:"mb-3",children:[i.jsxs("label",{className:"form-label",children:[r("Expiry Duration","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx("input",{type:"number",className:`form-control ${m.jwtExpiryDuration?"is-invalid":""}`,value:T.jwtExpiryDuration,onChange:C=>W("jwtExpiryDuration",C.target.value),placeholder:"60",min:"1"}),m.jwtExpiryDuration&&i.jsx("div",{className:"invalid-feedback",children:m.jwtExpiryDuration})]})}),i.jsx("div",{className:"col-md-4",children:i.jsxs("div",{className:"mb-3",children:[i.jsx("label",{className:"form-label",children:r("Unit","kivicare-clinic-management-system")}),i.jsx(ct,{options:ie,value:ie.find(C=>C.value===T.jwtExpiryUnit)||ie[0],onChange:C=>W("jwtExpiryUnit",C?.value||"minutes"),className:"react-select-box",classNamePrefix:"react-select",styles:{menuPortal:C=>({...C,zIndex:9999})}})]})})]})]}),T.authMethod==="hmac"&&i.jsxs("div",{className:"border p-3 rounded bg-body",children:[i.jsxs("h6",{className:"mb-3",children:[" ",r("HMAC / Signature Authentication","kivicare-clinic-management-system")]}),i.jsxs("div",{className:"row",children:[i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"mb-3",children:[i.jsxs("label",{className:"form-label",children:[r("Access Key / Public Key","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx("input",{type:"text",className:`form-control ${m.hmacAccessKey?"is-invalid":""}`,value:T.hmacAccessKey,onChange:C=>W("hmacAccessKey",C.target.value),placeholder:r("Enter access key","kivicare-clinic-management-system")}),m.hmacAccessKey&&i.jsx("div",{className:"invalid-feedback",children:m.hmacAccessKey})]})}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"mb-3",children:[i.jsxs("label",{className:"form-label",children:[r("Secret Key","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx("input",{type:"password",className:`form-control ${m.hmacSecretKey?"is-invalid":""}`,value:T.hmacSecretKey,onChange:C=>W("hmacSecretKey",C.target.value),placeholder:r("Enter secret key","kivicare-clinic-management-system")}),m.hmacSecretKey&&i.jsx("div",{className:"invalid-feedback",children:m.hmacSecretKey})]})}),i.jsx("div",{className:"col-md-4",children:i.jsxs("div",{className:"mb-3",children:[i.jsx("label",{className:"form-label",children:r("Algorithm","kivicare-clinic-management-system")}),i.jsx(ct,{options:G,value:G.find(C=>C.value===T.hmacAlgorithm)||G[0],onChange:C=>W("hmacAlgorithm",C?.value||"HMAC-SHA256"),className:"react-select-box",classNamePrefix:"react-select",styles:{menuPortal:C=>({...C,zIndex:9999})}})]})}),i.jsx("div",{className:"col-md-4",children:i.jsxs("div",{className:"mb-3",children:[i.jsx("label",{className:"form-label",children:r("Signature Location","kivicare-clinic-management-system")}),i.jsx(ct,{options:z,value:z.find(C=>C.value===T.hmacSignatureLocation)||z[0],onChange:C=>W("hmacSignatureLocation",C?.value||"header"),className:"react-select-box",classNamePrefix:"react-select",styles:{menuPortal:C=>({...C,zIndex:9999})}})]})}),i.jsx("div",{className:"col-md-4",children:i.jsxs("div",{className:"mb-3",children:[i.jsxs("label",{className:"form-label",children:[r("Header/Param Name","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx("input",{type:"text",className:`form-control ${m.hmacHeaderParamName?"is-invalid":""}`,value:T.hmacHeaderParamName,onChange:C=>W("hmacHeaderParamName",C.target.value),placeholder:r("X-Signature","kivicare-clinic-management-system")}),m.hmacHeaderParamName&&i.jsx("div",{className:"invalid-feedback",children:m.hmacHeaderParamName})]})})]})]})]})]}),i.jsxs("div",{className:"card mb-4",children:[i.jsx("div",{className:"card-header",children:i.jsx("h5",{className:"card-title mb-0",children:r("Sender Configuration","kivicare-clinic-management-system")})}),i.jsxs("div",{className:"card-body",children:[i.jsxs("div",{className:"row",children:[i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"mb-3",children:[i.jsx("label",{className:"form-label",children:r("Sender Name / From","kivicare-clinic-management-system")}),i.jsx("input",{type:"text",className:"form-control",value:T.senderName,onChange:C=>W("senderName",C.target.value),placeholder:r("Enter sender name","kivicare-clinic-management-system")})]})}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"mb-3",children:[i.jsx("label",{className:"form-label",children:r("Sender Email / Number","kivicare-clinic-management-system")}),i.jsx("input",{type:"text",className:"form-control",value:T.senderEmail,onChange:C=>W("senderEmail",C.target.value),placeholder:X()})]})})]}),i.jsxs("div",{className:"d-flex align-items-center justify-content-between",children:[i.jsxs("div",{className:"form-check form-switch",children:[i.jsx("input",{className:"form-check-input",type:"checkbox",role:"switch",id:"enableSSL",checked:T.enableSSL,onChange:C=>W("enableSSL",C.target.checked)}),i.jsx("label",{className:"form-check-label",htmlFor:"enableSSL",children:r("Enable SSL/TLS","kivicare-clinic-management-system")})]}),i.jsx("span",{className:`badge ${T.enableSSL?"bg-success":"bg-warning"}`,children:T.enableSSL?r("Secure","kivicare-clinic-management-system"):r("Insecure","kivicare-clinic-management-system")})]})]})]}),i.jsxs("div",{className:"card mb-4",children:[i.jsx("div",{className:"card-header",children:i.jsx("h5",{className:"card-title mb-0",children:r("Request Configuration","kivicare-clinic-management-system")})}),i.jsxs("div",{className:"card-body",children:[i.jsxs("div",{className:"mb-3",children:[i.jsx("label",{className:"form-label",children:r("Content Type","kivicare-clinic-management-system")}),i.jsx(ct,{options:M,value:M.find(C=>C.value===T.contentType)||M[0],onChange:C=>W("contentType",C?.value||"application/json"),placeholder:r("Select content type","kivicare-clinic-management-system"),className:"react-select-box",classNamePrefix:"react-select",isSearchable:!1,styles:{menuPortal:C=>({...C,zIndex:9999})}})]}),i.jsxs("div",{className:"mb-3",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[i.jsx("label",{className:"form-label mb-0",children:r("Custom Headers","kivicare-clinic-management-system")}),i.jsxs("button",{type:"button",className:"btn btn-sm btn-primary",onClick:()=>ge("customHeaders"),children:[i.jsx("i",{className:"ph ph-plus me-1"}),r("Add Header","kivicare-clinic-management-system")]})]}),T.customHeaders.map((C,R)=>i.jsxs("div",{className:"row mb-2",children:[i.jsx("div",{className:"col-md-5",children:i.jsx("input",{type:"text",className:"form-control",placeholder:r("Header name","kivicare-clinic-management-system"),value:C.key,onChange:te=>ae("customHeaders",R,"key",te.target.value)})}),i.jsx("div",{className:"col-md-5",children:i.jsx("input",{type:"text",className:"form-control",placeholder:r("Header value","kivicare-clinic-management-system"),value:C.value,onChange:te=>ae("customHeaders",R,"value",te.target.value)})}),i.jsx("div",{className:"col-md-2",children:i.jsx("button",{type:"button",className:"btn btn-secondary btn-sm w-100",onClick:()=>U("customHeaders",R),children:i.jsx("i",{className:"ph ph-trash"})})})]},R))]}),i.jsxs("div",{className:"mb-3",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[i.jsx("label",{className:"form-label mb-0",children:r("Query Parameters","kivicare-clinic-management-system")}),i.jsxs("button",{type:"button",className:"btn btn-sm btn-primary",onClick:()=>ge("queryParams"),children:[i.jsx("i",{className:"ph ph-plus me-1"}),r("Add Parameter","kivicare-clinic-management-system")]})]}),T.queryParams.map((C,R)=>i.jsxs("div",{className:"row mb-2",children:[i.jsx("div",{className:"col-md-5",children:i.jsx("input",{type:"text",className:"form-control",placeholder:r("Parameter name","kivicare-clinic-management-system"),value:C.key,onChange:te=>ae("queryParams",R,"key",te.target.value)})}),i.jsx("div",{className:"col-md-5",children:i.jsx("input",{type:"text",className:"form-control",placeholder:r("Parameter value","kivicare-clinic-management-system"),value:C.value,onChange:te=>ae("queryParams",R,"value",te.target.value)})}),i.jsx("div",{className:"col-md-2",children:i.jsx("button",{type:"button",className:"btn btn-secondary btn-sm w-100",onClick:()=>U("queryParams",R),children:i.jsx("i",{className:"ph ph-trash"})})})]},R))]}),i.jsxs("div",{className:"mb-4",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsx("label",{className:"form-label mb-0",children:r("Dynamic Variables","kivicare-clinic-management-system")}),i.jsx(Qe,{placement:"top",overlay:i.jsx(ut,{id:"dynamic-variables-tooltip",children:r("Click any variable button to copy it to your clipboard, then paste it in your request body, headers, or query parameters. Variables will be automatically replaced with actual values when the notification is sent.","kivicare-clinic-management-system")}),children:i.jsx("i",{className:"ph ph-info ",style:{cursor:"help"}})})]}),i.jsx("small",{className:"text-muted",children:r("Click to copy variable to clipboard","kivicare-clinic-management-system")})]}),i.jsx("div",{className:"d-flex flex-wrap gap-2 mb-3",children:A.map((C,R)=>i.jsxs("button",{type:"button",className:"btn btn-sm btn-primary d-flex align-items-center gap-1",onClick:()=>le(C.name),title:`${C.description} - ${r("Example:","kivicare-clinic-management-system")} ${C.example}`,children:[i.jsx("code",{className:"small text-white",children:`{{${C.name}}}`}),i.jsx("i",{className:"ph ph-copy"})]},R))})]}),he()&&i.jsxs("div",{className:"mb-3",children:[i.jsx("label",{className:"form-label",children:r("Request Body","kivicare-clinic-management-system")}),T.contentType==="application/x-www-form-urlencoded"?i.jsxs("div",{children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[i.jsx("small",{className:"text-muted",children:r("Add key-value pairs for the request body","kivicare-clinic-management-system")}),i.jsxs("button",{type:"button",className:"btn btn-sm btn-outline-primary",onClick:()=>ge("requestBodyFields"),children:[i.jsx("i",{className:"ph ph-plus me-1"}),r("Add Field","kivicare-clinic-management-system")]})]}),T.requestBodyFields&&T.requestBodyFields.map((C,R)=>i.jsxs("div",{className:"row mb-2",children:[i.jsx("div",{className:"col-md-5",children:i.jsx("input",{type:"text",className:"form-control",placeholder:r("Field name","kivicare-clinic-management-system"),value:C.key,onChange:te=>ae("requestBodyFields",R,"key",te.target.value)})}),i.jsx("div",{className:"col-md-5",children:i.jsx("input",{type:"text",className:"form-control",placeholder:r("Field value","kivicare-clinic-management-system"),value:C.value,onChange:te=>ae("requestBodyFields",R,"value",te.target.value)})}),i.jsx("div",{className:"col-md-2",children:i.jsx("button",{type:"button",className:"btn btn-outline-danger btn-sm w-100",onClick:()=>U("requestBodyFields",R),children:i.jsx("i",{className:"ph ph-trash"})})})]},R))]}):i.jsx("textarea",{className:"form-control",rows:"8",value:T.requestBody,onChange:C=>W("requestBody",C.target.value),placeholder:J(),style:{fontFamily:"monospace"}}),i.jsx("div",{className:"form-text",children:r("Use the dynamic variables from above in your request body. Copy variables by clicking the copy button next to each variable.","kivicare-clinic-management-system")})]})]})]}),i.jsxs("div",{className:"d-flex gap-2",children:[i.jsxs("button",{type:"submit",className:"btn btn-primary",disabled:j||s.isPending||a.isPending,children:[i.jsx("i",{className:"ph ph-floppy-disk me-1"}),j||s.isPending||a.isPending?r("Saving...","kivicare-clinic-management-system"):r("Save Configuration","kivicare-clinic-management-system")]}),i.jsxs("button",{type:"button",className:"btn btn-secondary",children:[i.jsx("i",{className:"ph ph-lightning me-1"}),r("Test Connection","kivicare-clinic-management-system")]}),i.jsx(ht,{to:"/setting/custom-notification",className:"btn btn-secondary",children:r("Cancel","kivicare-clinic-management-system")})]})]})]})})},nre=()=>i.jsxs("div",{className:"custom-notification-test",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[i.jsxs("div",{children:[i.jsx(S,{width:"250px",height:"1.75rem",className:"mb-2"}),i.jsx(S,{width:"150px",height:"1rem"})]}),i.jsx(S,{width:"140px",height:"2.25rem",style:{borderRadius:"4px"}})]}),i.jsxs("div",{className:"row",children:[i.jsx("div",{className:"col-md-8",children:i.jsxs("div",{className:"card",children:[i.jsx("div",{className:"card-header",children:i.jsx(S,{width:"200px",height:"1.25rem"})}),i.jsxs("div",{className:"card-body",children:[i.jsxs("div",{className:"mb-3",children:[i.jsx(S,{width:"120px",height:"1rem",className:"mb-2"}),i.jsx(S,{width:"100%",height:"2.5rem",style:{borderRadius:"4px"}})]}),i.jsxs("div",{className:"mb-3",children:[i.jsx(S,{width:"100px",height:"1rem",className:"mb-2"}),i.jsx(S,{width:"100%",height:"120px",style:{borderRadius:"4px"}})]}),i.jsx(S,{width:"100px",height:"2.5rem",style:{borderRadius:"4px"}})]})]})}),i.jsx("div",{className:"col-md-4",children:i.jsxs("div",{className:"card",children:[i.jsx("div",{className:"card-header",children:i.jsx(S,{width:"160px",height:"1.25rem"})}),i.jsxs("div",{className:"card-body",children:[i.jsxs("div",{className:"mb-3",children:[i.jsx(S,{width:"100px",height:"0.875rem",className:"mb-1"}),i.jsx(S,{width:"140px",height:"1rem"})]}),i.jsxs("div",{className:"mb-3",children:[i.jsx(S,{width:"40px",height:"0.875rem",className:"mb-1"}),i.jsx(S,{width:"60px",height:"1.25rem",style:{borderRadius:"12px"}})]}),i.jsxs("div",{className:"mb-3",children:[i.jsx(S,{width:"50px",height:"0.875rem",className:"mb-1"}),i.jsx(S,{width:"70px",height:"1.25rem",style:{borderRadius:"12px"}})]}),i.jsxs("div",{className:"mb-3",children:[i.jsx(S,{width:"80px",height:"0.875rem",className:"mb-1"}),i.jsx(S,{width:"180px",height:"1rem"})]}),i.jsxs("div",{className:"mb-0",children:[i.jsx(S,{width:"90px",height:"0.875rem",className:"mb-1"}),i.jsx(S,{width:"120px",height:"1rem"})]})]})]})})]})]}),ire=()=>{const{id:t}=Yt(),[e,n]=f.useState(null),{data:s,isLoading:a}=QR(t),l=eJ(),{register:o,handleSubmit:c,formState:{errors:d},watch:m}=en({defaultValues:{recipient:"",message:""}}),u=m("message"),h=async x=>{try{const y=await l.mutateAsync({id:parseInt(t),data:{recipient:x.recipient,message:x.message}});n({success:!0,message:y.message||r("Test notification sent successfully!","kivicare-clinic-management-system"),timestamp:new Date().toLocaleString(),details:y.data||null}),Se.success(r("Test notification sent successfully!","kivicare-clinic-management-system"))}catch(y){console.error("Test notification error:",y);const b=y.response?.data?.message||y.message||r("Failed to send test notification","kivicare-clinic-management-system");n({success:!1,message:b,timestamp:new Date().toLocaleString(),details:y.response?.data?.data||null}),Se.error(b)}};return i.jsx("div",{className:"custom-notification-test",children:a?i.jsx(nre,{}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[i.jsxs("div",{children:[i.jsx("h4",{className:"mb-1",children:r("Test Notification Service","kivicare-clinic-management-system")}),i.jsx("p",{className:"text-muted mb-0",children:s?.data?.server_name?`${s.data.server_name} (ID: ${t})`:`${r("Service ID:","kivicare-clinic-management-system")} ${t}`})]}),i.jsxs(ht,{to:"/setting/custom-notification",className:"btn btn-outline-secondary",children:[i.jsx("i",{className:"ph ph-arrow-left me-1"}),r("Back to Services","kivicare-clinic-management-system")]})]}),i.jsxs("div",{className:"row",children:[i.jsxs("div",{className:"col-md-8",children:[i.jsxs("div",{className:"card",children:[i.jsx("div",{className:"card-header",children:i.jsx("h5",{className:"card-title mb-0",children:r("Send Test Notification","kivicare-clinic-management-system")})}),i.jsx("div",{className:"card-body",children:i.jsxs("form",{onSubmit:c(h),children:[i.jsxs("div",{className:"mb-3",children:[i.jsxs("label",{className:"form-label",children:[r("Test Recipient","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx("input",{type:"text",className:`form-control ${d.recipient?"is-invalid":""}`,placeholder:r("Enter email, phone number, or device token","kivicare-clinic-management-system"),...o("recipient",{required:r("Recipient is required","kivicare-clinic-management-system")})}),d.recipient&&i.jsx("div",{className:"invalid-feedback",children:d.recipient.message})]}),i.jsxs("div",{className:"mb-3",children:[i.jsxs("label",{className:"form-label",children:[r("Test Message","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx("textarea",{className:`form-control ${d.message?"is-invalid":""}`,rows:"4",placeholder:r("Enter test message content","kivicare-clinic-management-system"),...o("message",{required:r("Message is required","kivicare-clinic-management-system"),minLength:{value:1,message:r("Message cannot be empty","kivicare-clinic-management-system")}})}),d.message&&i.jsx("div",{className:"invalid-feedback",children:d.message.message})]}),i.jsx("button",{type:"submit",className:"btn btn-primary",disabled:l.isPending||!u?.trim(),children:l.isPending?i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status"}),r("Sending...","kivicare-clinic-management-system")]}):i.jsxs(i.Fragment,{children:[i.jsx("i",{className:"ph ph-paper-plane-tilt me-1"}),r("Send Test","kivicare-clinic-management-system")]})})]})})]}),e&&i.jsx("div",{className:`alert ${e.success?"alert-success":"alert-danger"} mt-3`,children:i.jsxs("div",{className:"d-flex align-items-start",children:[i.jsx("i",{className:`ph ${e.success?"ph-check-circle":"ph-x-circle"} me-2 mt-1`}),i.jsxs("div",{className:"flex-grow-1",children:[i.jsx("strong",{children:e.message}),i.jsx("br",{}),i.jsxs("small",{children:[r("Sent at:","kivicare-clinic-management-system")," ",e.timestamp]}),e.details&&i.jsxs("div",{className:"mt-2",children:[i.jsx("small",{className:"text-muted",children:i.jsx("strong",{children:r("Details:","kivicare-clinic-management-system")})}),i.jsx("pre",{className:"small p-2 mt-1 rounded",style:{textWrap:"wrap"},children:JSON.stringify(e.details,null,2)})]})]})]})})]}),i.jsx("div",{className:"col-md-4",children:i.jsxs("div",{className:"card",children:[i.jsx("div",{className:"card-header",children:i.jsx("h6",{className:"card-title mb-0",children:r("Service Information","kivicare-clinic-management-system")})}),i.jsx("div",{className:"card-body",children:s?.data?i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"mb-3",children:[i.jsx("label",{className:"form-label small text-muted",children:r("Service Name","kivicare-clinic-management-system")}),i.jsx("p",{className:"mb-0",children:s.data.server_name})]}),i.jsxs("div",{className:"mb-3",children:[i.jsx("label",{className:"form-label small text-muted",children:r("Type","kivicare-clinic-management-system")}),i.jsx("p",{className:"mb-0",children:i.jsx("span",{className:`badge ${g(s.data.server_type)}`,children:p(s.data.server_type)})})]}),i.jsxs("div",{className:"mb-3",children:[i.jsx("label",{className:"form-label small text-muted",children:r("Status","kivicare-clinic-management-system")}),i.jsx("p",{className:"mb-0",children:i.jsx("span",{className:`badge ${s.data.is_active?"bg-success":"bg-secondary"}`,children:s.data.is_active?r("Active","kivicare-clinic-management-system"):r("Inactive","kivicare-clinic-management-system")})})]}),i.jsxs("div",{className:"mb-3",children:[i.jsx("label",{className:"form-label small text-muted",children:r("Server URL","kivicare-clinic-management-system")}),i.jsx("p",{className:"mb-0 small text-break",children:s.data.server_url})]}),i.jsxs("div",{className:"mb-0",children:[i.jsx("label",{className:"form-label small text-muted",children:r("Authentication","kivicare-clinic-management-system")}),i.jsx("p",{className:"mb-0 small",children:v(s.data.auth_method)})]})]}):i.jsxs("div",{className:"text-center py-3",children:[i.jsx("div",{className:"spinner-border spinner-border-sm",role:"status",children:i.jsx("span",{className:"visually-hidden",children:r("Loading...","kivicare-clinic-management-system")})}),i.jsx("p",{className:"small text-muted mt-2 mb-0",children:r("Loading service info...","kivicare-clinic-management-system")})]})})]})})]})]})});function p(x){return{sms:"SMS",email:"Email",webhook:"Webhook","custom-api":"Custom API","push-notification":"Push Notification"}[x]||x}function g(x){return{sms:"bg-primary",email:"bg-info",webhook:"bg-warning","custom-api":"bg-secondary","push-notification":"bg-success"}[x]||"bg-secondary"}function v(x){return{none:r("No Authentication","kivicare-clinic-management-system"),apikey:r("API Key","kivicare-clinic-management-system"),basic:r("Basic Auth","kivicare-clinic-management-system"),bearer:r("Bearer Token","kivicare-clinic-management-system"),jwt:r("JWT","kivicare-clinic-management-system"),hmac:r("HMAC","kivicare-clinic-management-system")}[x]||x}},sre=()=>(f.useEffect(()=>{(()=>{try{let e=new URLSearchParams(window.location.search),n=e.get("code"),s=e.get("error"),a=e.get("error_description");if(!n&&!s&&window.location.hash){const l=new URLSearchParams(window.location.hash.substring(1));n=l.get("code"),s=l.get("error"),a=l.get("error_description")}s?window.opener?.postMessage({type:"oauth2_error",error:a||s},window.location.origin):n?window.opener?.postMessage({type:"oauth2_success",code:n},window.location.origin):window.opener?.postMessage({type:"oauth2_error",error:"No authorization code received"},window.location.origin),setTimeout(()=>{window.close()},1e3)}catch(e){console.error("OAuth2 callback error:",e),window.opener?.postMessage({type:"oauth2_error",error:"Callback processing failed: "+e.message},window.location.origin),setTimeout(()=>{window.close()},1e3)}})()},[]),i.jsx("div",{className:"d-flex justify-content-center align-items-center",style:{minHeight:"100vh"},children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"spinner-border text-primary",role:"status",children:i.jsx("span",{className:"visually-hidden",children:r("Loading...","kivicare-clinic-management-system")})}),i.jsx("h5",{children:r("Processing OAuth2 Authorization...","kivicare-clinic-management-system")}),i.jsx("p",{className:"text-muted",children:r("Please wait while we process your authorization. This window will close automatically.","kivicare-clinic-management-system")})]})})),are=()=>{const t=hn(),[e,n]=f.useState(!1),[s,a]=f.useState([]),[l,o]=f.useState({}),[c,d]=f.useState(""),[m,u]=f.useState(""),{data:h}=Sn(),p=h?.data?.hideUtilityLinks,{data:g,isLoading:v,error:x}=kn("settings","email-template",{},{enabled:!0}),y=un("settings","email-template"),b=Ln(),k=I=>{const M=[];return!I||typeof I!="object"||Object.keys(I).forEach(O=>{(Array.isArray(I[O])?I[O]:[]).forEach(H=>{M.push({...H,user_type:O})})}),M};f.useEffect(()=>{if(!g?.status||!g.data){a([]),o({});return}a(k(g.data.data)),o(g.data.dynamicKey||{})},[g]);const w=()=>{n(!1)},T=I=>{t(`/setting/email-template/edit/${I.ID}`)},j=()=>{t("/setting/email-template/test")},D=async(I,M)=>{const O={ID:I,post_status:M==="publish"?"draft":"publish"};y.mutate(O,{onError:F=>{console.error("Error updating status:",F),Ze.fire({icon:"error",title:r("Error","kivicare-clinic-management-system"),text:r("Failed to update template status","kivicare-clinic-management-system"),confirmButtonText:r("Ok","kivicare-clinic-management-system")})}})},_=I=>{console.log("sending test mail"),alert(r("Test mail send","kivicare-clinic-management-system"))},N=f.useMemo(()=>[...new Set(s.map(M=>M.user_type))].sort(),[s]),A=f.useMemo(()=>{let I=s;return c&&(I=I.filter(M=>M.post_title?.toLowerCase().includes(c.toLowerCase()))),m&&(I=I.filter(M=>M.user_type===m)),I},[s,c,m]),P=f.useMemo(()=>[b.accessor("templates",{id:"templates",header:()=>r("Templates","kivicare-clinic-management-system"),enableSorting:!1,cell:I=>i.jsx("div",{className:"text-wrap",children:i.jsx("span",{className:"p",children:I.row.original.post_title})})}),b.accessor("recipient",{id:"recipient",header:()=>r("Recipients","kivicare-clinic-management-system"),enableSorting:!1,cell:I=>i.jsx("div",{className:"text-wrap text-center",children:i.jsx("span",{className:"p text-capitalize",children:I.row.original.user_type})})}),b.accessor("status",{header:()=>r("Status","kivicare-clinic-management-system"),enableSorting:!1,cell:I=>i.jsx(cn,{checked:I.row.original.post_status==="publish",onChange:()=>D(I.row.original.ID,I.row.original.post_status),inputClassName:"text-center"})}),b.accessor("actions",{header:()=>r("Actions","kivicare-clinic-management-system"),enableSorting:!1,cell:I=>i.jsx("button",{onClick:()=>T(I.row.original),className:"btn btn-link text-secondary fw-semibold p-0 text-decoration-none",children:r("Manage","kivicare-clinic-management-system")})})],[v,l]);if(x){let I;typeof x=="string"?I=x:x?.response?.data?.message?I=x.response.data.message:x?.message?I=x.message:I=r("An unknown error occurred","kivicare-clinic-management-system"),Ze.fire({icon:"error",title:r("Error","kivicare-clinic-management-system"),text:r(I,"kivicare-clinic-management-system"),confirmButtonText:r("Ok","kivicare-clinic-management-system")})}const E=({type:I,title:M})=>i.jsxs("div",{className:"send-template-setting",children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between gap-3 mb-4",children:[i.jsx("h6",{className:"setting-title mb-0",children:M}),i.jsx("div",{children:i.jsxs("button",{onClick:w,className:"btn btn-sm btn-primary fw-semibold d-flex align-items-center gap-1 back-btn",children:[i.jsx("i",{className:"ph ph-caret-left"}),i.jsx("span",{className:"font-size-14",children:r("Back","kivicare-clinic-management-system")})]})})]}),i.jsx("div",{className:"card",children:i.jsx("div",{className:"card-body",children:i.jsxs("div",{className:"row gy-3",children:[i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[r("Email","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx("div",{className:"d-flex align-items-center gap-3",children:i.jsx("input",{type:"text",className:"form-control",placeholder:r("Enter email id","kivicare-clinic-management-system")})})]})}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[r("Test content","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx("input",{type:"text",className:"form-control",placeholder:r('e.g "Welcome to KiviCare, This is test email"',"kivicare-clinic-management-system")})]})})]})})}),i.jsxs("div",{className:"d-flex justify-content-end flex-wrap row-gap-2 column-gap-4 mb-5",children:[i.jsx("button",{type:"button",className:"btn btn-secondary",onClick:w,children:r("Cancel","kivicare-clinic-management-system")}),i.jsx("button",{type:"button",className:"btn btn-primary",onClick:()=>_(),children:r("Test","kivicare-clinic-management-system")})]})]});return v?i.jsx("div",{className:"container-fluid pb-0",children:i.jsx(_n,{columns:6,rows:10,showBreadcrumb:!1,showPageHeader:!0,showFilterBar:!0})}):i.jsx("div",{className:"tab-pane fade show active",id:"v-pills-email-template",role:"tabpanel","aria-labelledby":"v-pills-email-template-tab",tabIndex:"0",children:e?i.jsx(E,{type:"email",title:r("Test Email","kivicare-clinic-management-system")}):i.jsxs("div",{className:"email-template-setting",children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between gap-3 mb-4",children:[i.jsxs("h6",{className:"setting-title mb-0",children:[r("Email Template","kivicare-clinic-management-system")," ",p!=="on"&&i.jsx("a",{href:"https://documentation.iqonic.design/kivicare-wordpress/kivicare-lite/documentation/settings-configuration/email-template-settings/",target:"_blank",rel:"noopener noreferrer",children:i.jsx("i",{className:"ph ph-question align-middle h5  text-primary"})})]}),i.jsx("button",{type:"button",onClick:j,className:"btn btn-primary",children:r("Send Test Email","kivicare-clinic-management-system")})]}),i.jsxs("div",{className:"row mb-3 g-3 justify-content-end",children:[i.jsx("div",{className:"col-md-2",children:i.jsx("div",{className:"input-search-select",children:i.jsxs("div",{className:"input-group input-group-search ",children:[i.jsx("span",{className:"input-group-text",children:i.jsx("i",{className:"ph ph-magnifying-glass"})}),i.jsx("input",{type:"text",className:"form-control",placeholder:r("Search templates...","kivicare-clinic-management-system"),value:c,onChange:I=>d(I.target.value)}),c&&i.jsx("button",{className:"btn btn-outline-secondary",type:"button",onClick:()=>d(""),children:i.jsx("i",{className:"ph ph-x"})})]})})}),i.jsx("div",{className:"col-md-2",children:i.jsx(ct,{className:"react-select-box",classNamePrefix:"react-select",value:m?{value:m,label:m.charAt(0).toUpperCase()+m.slice(1)}:{value:"",label:r("All Recipients","kivicare-clinic-management-system")},onChange:I=>u(I?.value||""),options:[{value:"",label:r("All Recipients","kivicare-clinic-management-system")},...N.map(I=>({value:I,label:I.charAt(0).toUpperCase()+I.slice(1)}))],isClearable:!1,isSearchable:!1,styles:{menuPortal:I=>({...I,zIndex:9999})}})})]}),i.jsx("div",{className:"table-responsive",children:i.jsx(wn,{data:A,columns:P,enableSelection:!1,isLoading:v})})]})})};var rM=typeof global=="object"&&global&&global.Object===Object&&global,rre=typeof self=="object"&&self&&self.Object===Object&&self,er=rM||rre||Function("return this")(),bl=er.Symbol,lM=Object.prototype,lre=lM.hasOwnProperty,ore=lM.toString,Pd=bl?bl.toStringTag:void 0;function cre(t){var e=lre.call(t,Pd),n=t[Pd];try{t[Pd]=void 0;var s=!0}catch{}var a=ore.call(t);return s&&(e?t[Pd]=n:delete t[Pd]),a}var dre=Object.prototype,mre=dre.toString;function ure(t){return mre.call(t)}var hre="[object Null]",pre="[object Undefined]",e_=bl?bl.toStringTag:void 0;function cd(t){return t==null?t===void 0?pre:hre:e_&&e_ in Object(t)?cre(t):ure(t)}function Pr(t){return t!=null&&typeof t=="object"}var go=Array.isArray;function Sl(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}function oM(t){return t}var gre="[object AsyncFunction]",fre="[object Function]",vre="[object GeneratorFunction]",xre="[object Proxy]";function Qw(t){if(!Sl(t))return!1;var e=cd(t);return e==fre||e==vre||e==gre||e==xre}var lx=er["__core-js_shared__"],t_=(function(){var t=/[^.]+$/.exec(lx&&lx.keys&&lx.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""})();function yre(t){return!!t_&&t_ in t}var bre=Function.prototype,kre=bre.toString;function Mo(t){if(t!=null){try{return kre.call(t)}catch{}try{return t+""}catch{}}return""}var wre=/[\\^$.*+?()[\]{}|]/g,jre=/^\[object .+?Constructor\]$/,Nre=Function.prototype,Cre=Object.prototype,_re=Nre.toString,Sre=Cre.hasOwnProperty,Ere=RegExp("^"+_re.call(Sre).replace(wre,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Tre(t){if(!Sl(t)||yre(t))return!1;var e=Qw(t)?Ere:jre;return e.test(Mo(t))}function Are(t,e){return t?.[e]}function Io(t,e){var n=Are(t,e);return Tre(n)?n:void 0}var Xy=Io(er,"WeakMap"),n_=Object.create,Dre=(function(){function t(){}return function(e){if(!Sl(e))return{};if(n_)return n_(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}})();function Rre(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function Pre(t,e){var n=-1,s=t.length;for(e||(e=Array(s));++n<s;)e[n]=t[n];return e}var Mre=800,Ire=16,Ore=Date.now;function Fre(t){var e=0,n=0;return function(){var s=Ore(),a=Ire-(s-n);if(n=s,a>0){if(++e>=Mre)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}function Lre(t){return function(){return t}}var cg=(function(){try{var t=Io(Object,"defineProperty");return t({},"",{}),t}catch{}})(),$re=cg?function(t,e){return cg(t,"toString",{configurable:!0,enumerable:!1,value:Lre(e),writable:!0})}:oM,Bre=Fre($re);function qre(t,e){for(var n=-1,s=t==null?0:t.length;++n<s&&e(t[n],n,t)!==!1;);return t}var Hre=9007199254740991,zre=/^(?:0|[1-9]\d*)$/;function cM(t,e){var n=typeof t;return e=e??Hre,!!e&&(n=="number"||n!="symbol"&&zre.test(t))&&t>-1&&t%1==0&&t<e}function Zw(t,e,n){e=="__proto__"&&cg?cg(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function fu(t,e){return t===e||t!==t&&e!==e}var Vre=Object.prototype,Ure=Vre.hasOwnProperty;function dM(t,e,n){var s=t[e];(!(Ure.call(t,e)&&fu(s,n))||n===void 0&&!(e in t))&&Zw(t,e,n)}function Wre(t,e,n,s){var a=!n;n||(n={});for(var l=-1,o=e.length;++l<o;){var c=e[l],d=void 0;d===void 0&&(d=t[c]),a?Zw(n,c,d):dM(n,c,d)}return n}var i_=Math.max;function Kre(t,e,n){return e=i_(e===void 0?t.length-1:e,0),function(){for(var s=arguments,a=-1,l=i_(s.length-e,0),o=Array(l);++a<l;)o[a]=s[e+a];a=-1;for(var c=Array(e+1);++a<e;)c[a]=s[a];return c[e]=n(o),Rre(t,this,c)}}function Gre(t,e){return Bre(Kre(t,e,oM),t+"")}var Yre=9007199254740991;function mM(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=Yre}function gf(t){return t!=null&&mM(t.length)&&!Qw(t)}function Qre(t,e,n){if(!Sl(n))return!1;var s=typeof e;return(s=="number"?gf(n)&&cM(e,n.length):s=="string"&&e in n)?fu(n[e],t):!1}function Zre(t){return Gre(function(e,n){var s=-1,a=n.length,l=a>1?n[a-1]:void 0,o=a>2?n[2]:void 0;for(l=t.length>3&&typeof l=="function"?(a--,l):void 0,o&&Qre(n[0],n[1],o)&&(l=a<3?void 0:l,a=1),e=Object(e);++s<a;){var c=n[s];c&&t(e,c,s,l)}return e})}var Xre=Object.prototype;function Xw(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||Xre;return t===n}function Jre(t,e){for(var n=-1,s=Array(t);++n<t;)s[n]=e(n);return s}var ele="[object Arguments]";function s_(t){return Pr(t)&&cd(t)==ele}var uM=Object.prototype,tle=uM.hasOwnProperty,nle=uM.propertyIsEnumerable,Jy=s_((function(){return arguments})())?s_:function(t){return Pr(t)&&tle.call(t,"callee")&&!nle.call(t,"callee")};function ile(){return!1}var hM=typeof exports=="object"&&exports&&!exports.nodeType&&exports,a_=hM&&typeof module=="object"&&module&&!module.nodeType&&module,sle=a_&&a_.exports===hM,r_=sle?er.Buffer:void 0,ale=r_?r_.isBuffer:void 0,Im=ale||ile,rle="[object Arguments]",lle="[object Array]",ole="[object Boolean]",cle="[object Date]",dle="[object Error]",mle="[object Function]",ule="[object Map]",hle="[object Number]",ple="[object Object]",gle="[object RegExp]",fle="[object Set]",vle="[object String]",xle="[object WeakMap]",yle="[object ArrayBuffer]",ble="[object DataView]",kle="[object Float32Array]",wle="[object Float64Array]",jle="[object Int8Array]",Nle="[object Int16Array]",Cle="[object Int32Array]",_le="[object Uint8Array]",Sle="[object Uint8ClampedArray]",Ele="[object Uint16Array]",Tle="[object Uint32Array]",Bn={};Bn[kle]=Bn[wle]=Bn[jle]=Bn[Nle]=Bn[Cle]=Bn[_le]=Bn[Sle]=Bn[Ele]=Bn[Tle]=!0;Bn[rle]=Bn[lle]=Bn[yle]=Bn[ole]=Bn[ble]=Bn[cle]=Bn[dle]=Bn[mle]=Bn[ule]=Bn[hle]=Bn[ple]=Bn[gle]=Bn[fle]=Bn[vle]=Bn[xle]=!1;function Ale(t){return Pr(t)&&mM(t.length)&&!!Bn[cd(t)]}function Jw(t){return function(e){return t(e)}}var pM=typeof exports=="object"&&exports&&!exports.nodeType&&exports,mm=pM&&typeof module=="object"&&module&&!module.nodeType&&module,Dle=mm&&mm.exports===pM,ox=Dle&&rM.process,zc=(function(){try{var t=mm&&mm.require&&mm.require("util").types;return t||ox&&ox.binding&&ox.binding("util")}catch{}})(),l_=zc&&zc.isTypedArray,ej=l_?Jw(l_):Ale,Rle=Object.prototype,Ple=Rle.hasOwnProperty;function gM(t,e){var n=go(t),s=!n&&Jy(t),a=!n&&!s&&Im(t),l=!n&&!s&&!a&&ej(t),o=n||s||a||l,c=o?Jre(t.length,String):[],d=c.length;for(var m in t)(e||Ple.call(t,m))&&!(o&&(m=="length"||a&&(m=="offset"||m=="parent")||l&&(m=="buffer"||m=="byteLength"||m=="byteOffset")||cM(m,d)))&&c.push(m);return c}function fM(t,e){return function(n){return t(e(n))}}var Mle=fM(Object.keys,Object),Ile=Object.prototype,Ole=Ile.hasOwnProperty;function Fle(t){if(!Xw(t))return Mle(t);var e=[];for(var n in Object(t))Ole.call(t,n)&&n!="constructor"&&e.push(n);return e}function Lle(t){return gf(t)?gM(t):Fle(t)}function $le(t){var e=[];if(t!=null)for(var n in Object(t))e.push(n);return e}var Ble=Object.prototype,qle=Ble.hasOwnProperty;function Hle(t){if(!Sl(t))return $le(t);var e=Xw(t),n=[];for(var s in t)s=="constructor"&&(e||!qle.call(t,s))||n.push(s);return n}function vM(t){return gf(t)?gM(t,!0):Hle(t)}var Om=Io(Object,"create");function zle(){this.__data__=Om?Om(null):{},this.size=0}function Vle(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var Ule="__lodash_hash_undefined__",Wle=Object.prototype,Kle=Wle.hasOwnProperty;function Gle(t){var e=this.__data__;if(Om){var n=e[t];return n===Ule?void 0:n}return Kle.call(e,t)?e[t]:void 0}var Yle=Object.prototype,Qle=Yle.hasOwnProperty;function Zle(t){var e=this.__data__;return Om?e[t]!==void 0:Qle.call(e,t)}var Xle="__lodash_hash_undefined__";function Jle(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=Om&&e===void 0?Xle:e,this}function fo(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var s=t[e];this.set(s[0],s[1])}}fo.prototype.clear=zle;fo.prototype.delete=Vle;fo.prototype.get=Gle;fo.prototype.has=Zle;fo.prototype.set=Jle;function eoe(){this.__data__=[],this.size=0}function ff(t,e){for(var n=t.length;n--;)if(fu(t[n][0],e))return n;return-1}var toe=Array.prototype,noe=toe.splice;function ioe(t){var e=this.__data__,n=ff(e,t);if(n<0)return!1;var s=e.length-1;return n==s?e.pop():noe.call(e,n,1),--this.size,!0}function soe(t){var e=this.__data__,n=ff(e,t);return n<0?void 0:e[n][1]}function aoe(t){return ff(this.__data__,t)>-1}function roe(t,e){var n=this.__data__,s=ff(n,t);return s<0?(++this.size,n.push([t,e])):n[s][1]=e,this}function Br(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var s=t[e];this.set(s[0],s[1])}}Br.prototype.clear=eoe;Br.prototype.delete=ioe;Br.prototype.get=soe;Br.prototype.has=aoe;Br.prototype.set=roe;var Fm=Io(er,"Map");function loe(){this.size=0,this.__data__={hash:new fo,map:new(Fm||Br),string:new fo}}function ooe(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function vf(t,e){var n=t.__data__;return ooe(e)?n[typeof e=="string"?"string":"hash"]:n.map}function coe(t){var e=vf(this,t).delete(t);return this.size-=e?1:0,e}function doe(t){return vf(this,t).get(t)}function moe(t){return vf(this,t).has(t)}function uoe(t,e){var n=vf(this,t),s=n.size;return n.set(t,e),this.size+=n.size==s?0:1,this}function Oo(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var s=t[e];this.set(s[0],s[1])}}Oo.prototype.clear=loe;Oo.prototype.delete=coe;Oo.prototype.get=doe;Oo.prototype.has=moe;Oo.prototype.set=uoe;function hoe(t,e){for(var n=-1,s=e.length,a=t.length;++n<s;)t[a+n]=e[n];return t}var xM=fM(Object.getPrototypeOf,Object),poe="[object Object]",goe=Function.prototype,foe=Object.prototype,yM=goe.toString,voe=foe.hasOwnProperty,xoe=yM.call(Object);function yoe(t){if(!Pr(t)||cd(t)!=poe)return!1;var e=xM(t);if(e===null)return!0;var n=voe.call(e,"constructor")&&e.constructor;return typeof n=="function"&&n instanceof n&&yM.call(n)==xoe}function boe(){this.__data__=new Br,this.size=0}function koe(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}function woe(t){return this.__data__.get(t)}function joe(t){return this.__data__.has(t)}var Noe=200;function Coe(t,e){var n=this.__data__;if(n instanceof Br){var s=n.__data__;if(!Fm||s.length<Noe-1)return s.push([t,e]),this.size=++n.size,this;n=this.__data__=new Oo(s)}return n.set(t,e),this.size=n.size,this}function $a(t){var e=this.__data__=new Br(t);this.size=e.size}$a.prototype.clear=boe;$a.prototype.delete=koe;$a.prototype.get=woe;$a.prototype.has=joe;$a.prototype.set=Coe;var bM=typeof exports=="object"&&exports&&!exports.nodeType&&exports,o_=bM&&typeof module=="object"&&module&&!module.nodeType&&module,_oe=o_&&o_.exports===bM,c_=_oe?er.Buffer:void 0,d_=c_?c_.allocUnsafe:void 0;function kM(t,e){if(e)return t.slice();var n=t.length,s=d_?d_(n):new t.constructor(n);return t.copy(s),s}function Soe(t,e){for(var n=-1,s=t==null?0:t.length,a=0,l=[];++n<s;){var o=t[n];e(o,n,t)&&(l[a++]=o)}return l}function Eoe(){return[]}var Toe=Object.prototype,Aoe=Toe.propertyIsEnumerable,m_=Object.getOwnPropertySymbols,Doe=m_?function(t){return t==null?[]:(t=Object(t),Soe(m_(t),function(e){return Aoe.call(t,e)}))}:Eoe;function Roe(t,e,n){var s=e(t);return go(t)?s:hoe(s,n(t))}function eb(t){return Roe(t,Lle,Doe)}var tb=Io(er,"DataView"),nb=Io(er,"Promise"),ib=Io(er,"Set"),u_="[object Map]",Poe="[object Object]",h_="[object Promise]",p_="[object Set]",g_="[object WeakMap]",f_="[object DataView]",Moe=Mo(tb),Ioe=Mo(Fm),Ooe=Mo(nb),Foe=Mo(ib),Loe=Mo(Xy),la=cd;(tb&&la(new tb(new ArrayBuffer(1)))!=f_||Fm&&la(new Fm)!=u_||nb&&la(nb.resolve())!=h_||ib&&la(new ib)!=p_||Xy&&la(new Xy)!=g_)&&(la=function(t){var e=cd(t),n=e==Poe?t.constructor:void 0,s=n?Mo(n):"";if(s)switch(s){case Moe:return f_;case Ioe:return u_;case Ooe:return h_;case Foe:return p_;case Loe:return g_}return e});var $oe=Object.prototype,Boe=$oe.hasOwnProperty;function qoe(t){var e=t.length,n=new t.constructor(e);return e&&typeof t[0]=="string"&&Boe.call(t,"index")&&(n.index=t.index,n.input=t.input),n}var dg=er.Uint8Array;function tj(t){var e=new t.constructor(t.byteLength);return new dg(e).set(new dg(t)),e}function Hoe(t,e){var n=tj(t.buffer);return new t.constructor(n,t.byteOffset,t.byteLength)}var zoe=/\w*$/;function Voe(t){var e=new t.constructor(t.source,zoe.exec(t));return e.lastIndex=t.lastIndex,e}var v_=bl?bl.prototype:void 0,x_=v_?v_.valueOf:void 0;function Uoe(t){return x_?Object(x_.call(t)):{}}function wM(t,e){var n=e?tj(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}var Woe="[object Boolean]",Koe="[object Date]",Goe="[object Map]",Yoe="[object Number]",Qoe="[object RegExp]",Zoe="[object Set]",Xoe="[object String]",Joe="[object Symbol]",ece="[object ArrayBuffer]",tce="[object DataView]",nce="[object Float32Array]",ice="[object Float64Array]",sce="[object Int8Array]",ace="[object Int16Array]",rce="[object Int32Array]",lce="[object Uint8Array]",oce="[object Uint8ClampedArray]",cce="[object Uint16Array]",dce="[object Uint32Array]";function mce(t,e,n){var s=t.constructor;switch(e){case ece:return tj(t);case Woe:case Koe:return new s(+t);case tce:return Hoe(t);case nce:case ice:case sce:case ace:case rce:case lce:case oce:case cce:case dce:return wM(t,n);case Goe:return new s;case Yoe:case Xoe:return new s(t);case Qoe:return Voe(t);case Zoe:return new s;case Joe:return Uoe(t)}}function jM(t){return typeof t.constructor=="function"&&!Xw(t)?Dre(xM(t)):{}}var uce="[object Map]";function hce(t){return Pr(t)&&la(t)==uce}var y_=zc&&zc.isMap,pce=y_?Jw(y_):hce,gce="[object Set]";function fce(t){return Pr(t)&&la(t)==gce}var b_=zc&&zc.isSet,vce=b_?Jw(b_):fce,xce=1,NM="[object Arguments]",yce="[object Array]",bce="[object Boolean]",kce="[object Date]",wce="[object Error]",CM="[object Function]",jce="[object GeneratorFunction]",Nce="[object Map]",Cce="[object Number]",_M="[object Object]",_ce="[object RegExp]",Sce="[object Set]",Ece="[object String]",Tce="[object Symbol]",Ace="[object WeakMap]",Dce="[object ArrayBuffer]",Rce="[object DataView]",Pce="[object Float32Array]",Mce="[object Float64Array]",Ice="[object Int8Array]",Oce="[object Int16Array]",Fce="[object Int32Array]",Lce="[object Uint8Array]",$ce="[object Uint8ClampedArray]",Bce="[object Uint16Array]",qce="[object Uint32Array]",Dn={};Dn[NM]=Dn[yce]=Dn[Dce]=Dn[Rce]=Dn[bce]=Dn[kce]=Dn[Pce]=Dn[Mce]=Dn[Ice]=Dn[Oce]=Dn[Fce]=Dn[Nce]=Dn[Cce]=Dn[_M]=Dn[_ce]=Dn[Sce]=Dn[Ece]=Dn[Tce]=Dn[Lce]=Dn[$ce]=Dn[Bce]=Dn[qce]=!0;Dn[wce]=Dn[CM]=Dn[Ace]=!1;function Xh(t,e,n,s,a,l){var o,c=e&xce;if(o!==void 0)return o;if(!Sl(t))return t;var d=go(t);if(d)o=qoe(t);else{var m=la(t),u=m==CM||m==jce;if(Im(t))return kM(t,c);if(m==_M||m==NM||u&&!a)o=u?{}:jM(t);else{if(!Dn[m])return a?t:{};o=mce(t,m,c)}}l||(l=new $a);var h=l.get(t);if(h)return h;l.set(t,o),vce(t)?t.forEach(function(v){o.add(Xh(v,e,n,v,t,l))}):pce(t)&&t.forEach(function(v,x){o.set(x,Xh(v,e,n,x,t,l))});var p=eb,g=d?void 0:p(t);return qre(g||t,function(v,x){g&&(x=v,v=t[x]),dM(o,x,Xh(v,e,n,x,t,l))}),o}var Hce=1,zce=4;function jc(t){return Xh(t,Hce|zce)}var Vce="__lodash_hash_undefined__";function Uce(t){return this.__data__.set(t,Vce),this}function Wce(t){return this.__data__.has(t)}function mg(t){var e=-1,n=t==null?0:t.length;for(this.__data__=new Oo;++e<n;)this.add(t[e])}mg.prototype.add=mg.prototype.push=Uce;mg.prototype.has=Wce;function Kce(t,e){for(var n=-1,s=t==null?0:t.length;++n<s;)if(e(t[n],n,t))return!0;return!1}function Gce(t,e){return t.has(e)}var Yce=1,Qce=2;function SM(t,e,n,s,a,l){var o=n&Yce,c=t.length,d=e.length;if(c!=d&&!(o&&d>c))return!1;var m=l.get(t),u=l.get(e);if(m&&u)return m==e&&u==t;var h=-1,p=!0,g=n&Qce?new mg:void 0;for(l.set(t,e),l.set(e,t);++h<c;){var v=t[h],x=e[h];if(s)var y=o?s(x,v,h,e,t,l):s(v,x,h,t,e,l);if(y!==void 0){if(y)continue;p=!1;break}if(g){if(!Kce(e,function(b,k){if(!Gce(g,k)&&(v===b||a(v,b,n,s,l)))return g.push(k)})){p=!1;break}}else if(!(v===x||a(v,x,n,s,l))){p=!1;break}}return l.delete(t),l.delete(e),p}function Zce(t){var e=-1,n=Array(t.size);return t.forEach(function(s,a){n[++e]=[a,s]}),n}function Xce(t){var e=-1,n=Array(t.size);return t.forEach(function(s){n[++e]=s}),n}var Jce=1,ede=2,tde="[object Boolean]",nde="[object Date]",ide="[object Error]",sde="[object Map]",ade="[object Number]",rde="[object RegExp]",lde="[object Set]",ode="[object String]",cde="[object Symbol]",dde="[object ArrayBuffer]",mde="[object DataView]",k_=bl?bl.prototype:void 0,cx=k_?k_.valueOf:void 0;function ude(t,e,n,s,a,l,o){switch(n){case mde:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case dde:return!(t.byteLength!=e.byteLength||!l(new dg(t),new dg(e)));case tde:case nde:case ade:return fu(+t,+e);case ide:return t.name==e.name&&t.message==e.message;case rde:case ode:return t==e+"";case sde:var c=Zce;case lde:var d=s&Jce;if(c||(c=Xce),t.size!=e.size&&!d)return!1;var m=o.get(t);if(m)return m==e;s|=ede,o.set(t,e);var u=SM(c(t),c(e),s,a,l,o);return o.delete(t),u;case cde:if(cx)return cx.call(t)==cx.call(e)}return!1}var hde=1,pde=Object.prototype,gde=pde.hasOwnProperty;function fde(t,e,n,s,a,l){var o=n&hde,c=eb(t),d=c.length,m=eb(e),u=m.length;if(d!=u&&!o)return!1;for(var h=d;h--;){var p=c[h];if(!(o?p in e:gde.call(e,p)))return!1}var g=l.get(t),v=l.get(e);if(g&&v)return g==e&&v==t;var x=!0;l.set(t,e),l.set(e,t);for(var y=o;++h<d;){p=c[h];var b=t[p],k=e[p];if(s)var w=o?s(k,b,p,e,t,l):s(b,k,p,t,e,l);if(!(w===void 0?b===k||a(b,k,n,s,l):w)){x=!1;break}y||(y=p=="constructor")}if(x&&!y){var T=t.constructor,j=e.constructor;T!=j&&"constructor"in t&&"constructor"in e&&!(typeof T=="function"&&T instanceof T&&typeof j=="function"&&j instanceof j)&&(x=!1)}return l.delete(t),l.delete(e),x}var vde=1,w_="[object Arguments]",j_="[object Array]",yh="[object Object]",xde=Object.prototype,N_=xde.hasOwnProperty;function yde(t,e,n,s,a,l){var o=go(t),c=go(e),d=o?j_:la(t),m=c?j_:la(e);d=d==w_?yh:d,m=m==w_?yh:m;var u=d==yh,h=m==yh,p=d==m;if(p&&Im(t)){if(!Im(e))return!1;o=!0,u=!1}if(p&&!u)return l||(l=new $a),o||ej(t)?SM(t,e,n,s,a,l):ude(t,e,d,n,s,a,l);if(!(n&vde)){var g=u&&N_.call(t,"__wrapped__"),v=h&&N_.call(e,"__wrapped__");if(g||v){var x=g?t.value():t,y=v?e.value():e;return l||(l=new $a),a(x,y,n,s,l)}}return p?(l||(l=new $a),fde(t,e,n,s,a,l)):!1}function EM(t,e,n,s,a){return t===e?!0:t==null||e==null||!Pr(t)&&!Pr(e)?t!==t&&e!==e:yde(t,e,n,s,EM,a)}function bde(t){return function(e,n,s){for(var a=-1,l=Object(e),o=s(e),c=o.length;c--;){var d=o[++a];if(n(l[d],d,l)===!1)break}return e}}var kde=bde();function sb(t,e,n){(n!==void 0&&!fu(t[e],n)||n===void 0&&!(e in t))&&Zw(t,e,n)}function wde(t){return Pr(t)&&gf(t)}function ab(t,e){if(!(e==="constructor"&&typeof t[e]=="function")&&e!="__proto__")return t[e]}function jde(t){return Wre(t,vM(t))}function Nde(t,e,n,s,a,l,o){var c=ab(t,n),d=ab(e,n),m=o.get(d);if(m){sb(t,n,m);return}var u=l?l(c,d,n+"",t,e,o):void 0,h=u===void 0;if(h){var p=go(d),g=!p&&Im(d),v=!p&&!g&&ej(d);u=d,p||g||v?go(c)?u=c:wde(c)?u=Pre(c):g?(h=!1,u=kM(d,!0)):v?(h=!1,u=wM(d,!0)):u=[]:yoe(d)||Jy(d)?(u=c,Jy(c)?u=jde(c):(!Sl(c)||Qw(c))&&(u=jM(d))):h=!1}h&&(o.set(d,u),a(u,d,s,l,o),o.delete(d)),sb(t,n,u)}function TM(t,e,n,s,a){t!==e&&kde(e,function(l,o){if(a||(a=new $a),Sl(l))Nde(t,e,o,n,TM,s,a);else{var c=s?s(ab(t,o),l,o+"",t,e,a):void 0;c===void 0&&(c=l),sb(t,o,c)}},vM)}function Gr(t,e){return EM(t,e)}var ul=Zre(function(t,e,n){TM(t,e,n)}),St=(t=>(t[t.TYPE=3]="TYPE",t[t.LEVEL=12]="LEVEL",t[t.ATTRIBUTE=13]="ATTRIBUTE",t[t.BLOT=14]="BLOT",t[t.INLINE=7]="INLINE",t[t.BLOCK=11]="BLOCK",t[t.BLOCK_BLOT=10]="BLOCK_BLOT",t[t.INLINE_BLOT=6]="INLINE_BLOT",t[t.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",t[t.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",t[t.ANY=15]="ANY",t))(St||{});class Ka{constructor(e,n,s={}){this.attrName=e,this.keyName=n;const a=St.TYPE&St.ATTRIBUTE;this.scope=s.scope!=null?s.scope&St.LEVEL|a:St.ATTRIBUTE,s.whitelist!=null&&(this.whitelist=s.whitelist)}static keys(e){return Array.from(e.attributes).map(n=>n.name)}add(e,n){return this.canAdd(e,n)?(e.setAttribute(this.keyName,n),!0):!1}canAdd(e,n){return this.whitelist==null?!0:typeof n=="string"?this.whitelist.indexOf(n.replace(/["']/g,""))>-1:this.whitelist.indexOf(n)>-1}remove(e){e.removeAttribute(this.keyName)}value(e){const n=e.getAttribute(this.keyName);return this.canAdd(e,n)&&n?n:""}}class Nc extends Error{constructor(e){e="[Parchment] "+e,super(e),this.message=e,this.name=this.constructor.name}}const AM=class rb{constructor(){this.attributes={},this.classes={},this.tags={},this.types={}}static find(e,n=!1){if(e==null)return null;if(this.blots.has(e))return this.blots.get(e)||null;if(n){let s=null;try{s=e.parentNode}catch{return null}return this.find(s,n)}return null}create(e,n,s){const a=this.query(n);if(a==null)throw new Nc(`Unable to create ${n} blot`);const l=a,o=n instanceof Node||n.nodeType===Node.TEXT_NODE?n:l.create(s),c=new l(e,o,s);return rb.blots.set(c.domNode,c),c}find(e,n=!1){return rb.find(e,n)}query(e,n=St.ANY){let s;return typeof e=="string"?s=this.types[e]||this.attributes[e]:e instanceof Text||e.nodeType===Node.TEXT_NODE?s=this.types.text:typeof e=="number"?e&St.LEVEL&St.BLOCK?s=this.types.block:e&St.LEVEL&St.INLINE&&(s=this.types.inline):e instanceof Element&&((e.getAttribute("class")||"").split(/\s+/).some(a=>(s=this.classes[a],!!s)),s=s||this.tags[e.tagName]),s==null?null:"scope"in s&&n&St.LEVEL&s.scope&&n&St.TYPE&s.scope?s:null}register(...e){return e.map(n=>{const s="blotName"in n,a="attrName"in n;if(!s&&!a)throw new Nc("Invalid definition");if(s&&n.blotName==="abstract")throw new Nc("Cannot register abstract class");const l=s?n.blotName:a?n.attrName:void 0;return this.types[l]=n,a?typeof n.keyName=="string"&&(this.attributes[n.keyName]=n):s&&(n.className&&(this.classes[n.className]=n),n.tagName&&(Array.isArray(n.tagName)?n.tagName=n.tagName.map(o=>o.toUpperCase()):n.tagName=n.tagName.toUpperCase(),(Array.isArray(n.tagName)?n.tagName:[n.tagName]).forEach(o=>{(this.tags[o]==null||n.className==null)&&(this.tags[o]=n)}))),n})}};AM.blots=new WeakMap;let Vc=AM;function C_(t,e){return(t.getAttribute("class")||"").split(/\s+/).filter(n=>n.indexOf(`${e}-`)===0)}class Cde extends Ka{static keys(e){return(e.getAttribute("class")||"").split(/\s+/).map(n=>n.split("-").slice(0,-1).join("-"))}add(e,n){return this.canAdd(e,n)?(this.remove(e),e.classList.add(`${this.keyName}-${n}`),!0):!1}remove(e){C_(e,this.keyName).forEach(n=>{e.classList.remove(n)}),e.classList.length===0&&e.removeAttribute("class")}value(e){const n=(C_(e,this.keyName)[0]||"").slice(this.keyName.length+1);return this.canAdd(e,n)?n:""}}const ba=Cde;function dx(t){const e=t.split("-"),n=e.slice(1).map(s=>s[0].toUpperCase()+s.slice(1)).join("");return e[0]+n}class _de extends Ka{static keys(e){return(e.getAttribute("style")||"").split(";").map(n=>n.split(":")[0].trim())}add(e,n){return this.canAdd(e,n)?(e.style[dx(this.keyName)]=n,!0):!1}remove(e){e.style[dx(this.keyName)]="",e.getAttribute("style")||e.removeAttribute("style")}value(e){const n=e.style[dx(this.keyName)];return this.canAdd(e,n)?n:""}}const El=_de;class Sde{constructor(e){this.attributes={},this.domNode=e,this.build()}attribute(e,n){n?e.add(this.domNode,n)&&(e.value(this.domNode)!=null?this.attributes[e.attrName]=e:delete this.attributes[e.attrName]):(e.remove(this.domNode),delete this.attributes[e.attrName])}build(){this.attributes={};const e=Vc.find(this.domNode);if(e==null)return;const n=Ka.keys(this.domNode),s=ba.keys(this.domNode),a=El.keys(this.domNode);n.concat(s).concat(a).forEach(l=>{const o=e.scroll.query(l,St.ATTRIBUTE);o instanceof Ka&&(this.attributes[o.attrName]=o)})}copy(e){Object.keys(this.attributes).forEach(n=>{const s=this.attributes[n].value(this.domNode);e.format(n,s)})}move(e){this.copy(e),Object.keys(this.attributes).forEach(n=>{this.attributes[n].remove(this.domNode)}),this.attributes={}}values(){return Object.keys(this.attributes).reduce((e,n)=>(e[n]=this.attributes[n].value(this.domNode),e),{})}}const xf=Sde,DM=class{constructor(e,n){this.scroll=e,this.domNode=n,Vc.blots.set(n,this),this.prev=null,this.next=null}static create(e){if(this.tagName==null)throw new Nc("Blot definition missing tagName");let n,s;return Array.isArray(this.tagName)?(typeof e=="string"?(s=e.toUpperCase(),parseInt(s,10).toString()===s&&(s=parseInt(s,10))):typeof e=="number"&&(s=e),typeof s=="number"?n=document.createElement(this.tagName[s-1]):s&&this.tagName.indexOf(s)>-1?n=document.createElement(s):n=document.createElement(this.tagName[0])):n=document.createElement(this.tagName),this.className&&n.classList.add(this.className),n}get statics(){return this.constructor}attach(){}clone(){const e=this.domNode.cloneNode(!1);return this.scroll.create(e)}detach(){this.parent!=null&&this.parent.removeChild(this),Vc.blots.delete(this.domNode)}deleteAt(e,n){this.isolate(e,n).remove()}formatAt(e,n,s,a){const l=this.isolate(e,n);if(this.scroll.query(s,St.BLOT)!=null&&a)l.wrap(s,a);else if(this.scroll.query(s,St.ATTRIBUTE)!=null){const o=this.scroll.create(this.statics.scope);l.wrap(o),o.format(s,a)}}insertAt(e,n,s){const a=s==null?this.scroll.create("text",n):this.scroll.create(n,s),l=this.split(e);this.parent.insertBefore(a,l||void 0)}isolate(e,n){const s=this.split(e);if(s==null)throw new Error("Attempt to isolate at end");return s.split(n),s}length(){return 1}offset(e=this.parent){return this.parent==null||this===e?0:this.parent.children.offset(this)+this.parent.offset(e)}optimize(e){this.statics.requiredContainer&&!(this.parent instanceof this.statics.requiredContainer)&&this.wrap(this.statics.requiredContainer.blotName)}remove(){this.domNode.parentNode!=null&&this.domNode.parentNode.removeChild(this.domNode),this.detach()}replaceWith(e,n){const s=typeof e=="string"?this.scroll.create(e,n):e;return this.parent!=null&&(this.parent.insertBefore(s,this.next||void 0),this.remove()),s}split(e,n){return e===0?this:this.next}update(e,n){}wrap(e,n){const s=typeof e=="string"?this.scroll.create(e,n):e;if(this.parent!=null&&this.parent.insertBefore(s,this.next||void 0),typeof s.appendChild!="function")throw new Nc(`Cannot wrap ${e}`);return s.appendChild(this),s}};DM.blotName="abstract";let RM=DM;const PM=class extends RM{static value(e){return!0}index(e,n){return this.domNode===e||this.domNode.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(n,1):-1}position(e,n){let s=Array.from(this.parent.domNode.childNodes).indexOf(this.domNode);return e>0&&(s+=1),[this.parent.domNode,s]}value(){return{[this.statics.blotName]:this.statics.value(this.domNode)||!0}}};PM.scope=St.INLINE_BLOT;let Ede=PM;const Oi=Ede;class Tde{constructor(){this.head=null,this.tail=null,this.length=0}append(...e){if(this.insertBefore(e[0],null),e.length>1){const n=e.slice(1);this.append(...n)}}at(e){const n=this.iterator();let s=n();for(;s&&e>0;)e-=1,s=n();return s}contains(e){const n=this.iterator();let s=n();for(;s;){if(s===e)return!0;s=n()}return!1}indexOf(e){const n=this.iterator();let s=n(),a=0;for(;s;){if(s===e)return a;a+=1,s=n()}return-1}insertBefore(e,n){e!=null&&(this.remove(e),e.next=n,n!=null?(e.prev=n.prev,n.prev!=null&&(n.prev.next=e),n.prev=e,n===this.head&&(this.head=e)):this.tail!=null?(this.tail.next=e,e.prev=this.tail,this.tail=e):(e.prev=null,this.head=this.tail=e),this.length+=1)}offset(e){let n=0,s=this.head;for(;s!=null;){if(s===e)return n;n+=s.length(),s=s.next}return-1}remove(e){this.contains(e)&&(e.prev!=null&&(e.prev.next=e.next),e.next!=null&&(e.next.prev=e.prev),e===this.head&&(this.head=e.next),e===this.tail&&(this.tail=e.prev),this.length-=1)}iterator(e=this.head){return()=>{const n=e;return e!=null&&(e=e.next),n}}find(e,n=!1){const s=this.iterator();let a=s();for(;a;){const l=a.length();if(e<l||n&&e===l&&(a.next==null||a.next.length()!==0))return[a,e];e-=l,a=s()}return[null,0]}forEach(e){const n=this.iterator();let s=n();for(;s;)e(s),s=n()}forEachAt(e,n,s){if(n<=0)return;const[a,l]=this.find(e);let o=e-l;const c=this.iterator(a);let d=c();for(;d&&o<e+n;){const m=d.length();e>o?s(d,e-o,Math.min(n,o+m-e)):s(d,0,Math.min(m,e+n-o)),o+=m,d=c()}}map(e){return this.reduce((n,s)=>(n.push(e(s)),n),[])}reduce(e,n){const s=this.iterator();let a=s();for(;a;)n=e(n,a),a=s();return n}}function __(t,e){const n=e.find(t);if(n)return n;try{return e.create(t)}catch{const s=e.create(St.INLINE);return Array.from(t.childNodes).forEach(a=>{s.domNode.appendChild(a)}),t.parentNode&&t.parentNode.replaceChild(s.domNode,t),s.attach(),s}}const MM=class Ur extends RM{constructor(e,n){super(e,n),this.uiNode=null,this.build()}appendChild(e){this.insertBefore(e)}attach(){super.attach(),this.children.forEach(e=>{e.attach()})}attachUI(e){this.uiNode!=null&&this.uiNode.remove(),this.uiNode=e,Ur.uiClass&&this.uiNode.classList.add(Ur.uiClass),this.uiNode.setAttribute("contenteditable","false"),this.domNode.insertBefore(this.uiNode,this.domNode.firstChild)}build(){this.children=new Tde,Array.from(this.domNode.childNodes).filter(e=>e!==this.uiNode).reverse().forEach(e=>{try{const n=__(e,this.scroll);this.insertBefore(n,this.children.head||void 0)}catch(n){if(n instanceof Nc)return;throw n}})}deleteAt(e,n){if(e===0&&n===this.length())return this.remove();this.children.forEachAt(e,n,(s,a,l)=>{s.deleteAt(a,l)})}descendant(e,n=0){const[s,a]=this.children.find(n);return e.blotName==null&&e(s)||e.blotName!=null&&s instanceof e?[s,a]:s instanceof Ur?s.descendant(e,a):[null,-1]}descendants(e,n=0,s=Number.MAX_VALUE){let a=[],l=s;return this.children.forEachAt(n,s,(o,c,d)=>{(e.blotName==null&&e(o)||e.blotName!=null&&o instanceof e)&&a.push(o),o instanceof Ur&&(a=a.concat(o.descendants(e,c,l))),l-=d}),a}detach(){this.children.forEach(e=>{e.detach()}),super.detach()}enforceAllowedChildren(){let e=!1;this.children.forEach(n=>{e||this.statics.allowedChildren.some(s=>n instanceof s)||(n.statics.scope===St.BLOCK_BLOT?(n.next!=null&&this.splitAfter(n),n.prev!=null&&this.splitAfter(n.prev),n.parent.unwrap(),e=!0):n instanceof Ur?n.unwrap():n.remove())})}formatAt(e,n,s,a){this.children.forEachAt(e,n,(l,o,c)=>{l.formatAt(o,c,s,a)})}insertAt(e,n,s){const[a,l]=this.children.find(e);if(a)a.insertAt(l,n,s);else{const o=s==null?this.scroll.create("text",n):this.scroll.create(n,s);this.appendChild(o)}}insertBefore(e,n){e.parent!=null&&e.parent.children.remove(e);let s=null;this.children.insertBefore(e,n||null),e.parent=this,n!=null&&(s=n.domNode),(this.domNode.parentNode!==e.domNode||this.domNode.nextSibling!==s)&&this.domNode.insertBefore(e.domNode,s),e.attach()}length(){return this.children.reduce((e,n)=>e+n.length(),0)}moveChildren(e,n){this.children.forEach(s=>{e.insertBefore(s,n)})}optimize(e){if(super.optimize(e),this.enforceAllowedChildren(),this.uiNode!=null&&this.uiNode!==this.domNode.firstChild&&this.domNode.insertBefore(this.uiNode,this.domNode.firstChild),this.children.length===0)if(this.statics.defaultChild!=null){const n=this.scroll.create(this.statics.defaultChild.blotName);this.appendChild(n)}else this.remove()}path(e,n=!1){const[s,a]=this.children.find(e,n),l=[[this,e]];return s instanceof Ur?l.concat(s.path(a,n)):(s!=null&&l.push([s,a]),l)}removeChild(e){this.children.remove(e)}replaceWith(e,n){const s=typeof e=="string"?this.scroll.create(e,n):e;return s instanceof Ur&&this.moveChildren(s),super.replaceWith(s)}split(e,n=!1){if(!n){if(e===0)return this;if(e===this.length())return this.next}const s=this.clone();return this.parent&&this.parent.insertBefore(s,this.next||void 0),this.children.forEachAt(e,this.length(),(a,l,o)=>{const c=a.split(l,n);c!=null&&s.appendChild(c)}),s}splitAfter(e){const n=this.clone();for(;e.next!=null;)n.appendChild(e.next);return this.parent&&this.parent.insertBefore(n,this.next||void 0),n}unwrap(){this.parent&&this.moveChildren(this.parent,this.next||void 0),this.remove()}update(e,n){const s=[],a=[];e.forEach(l=>{l.target===this.domNode&&l.type==="childList"&&(s.push(...l.addedNodes),a.push(...l.removedNodes))}),a.forEach(l=>{if(l.parentNode!=null&&l.tagName!=="IFRAME"&&document.body.compareDocumentPosition(l)&Node.DOCUMENT_POSITION_CONTAINED_BY)return;const o=this.scroll.find(l);o!=null&&(o.domNode.parentNode==null||o.domNode.parentNode===this.domNode)&&o.detach()}),s.filter(l=>l.parentNode===this.domNode&&l!==this.uiNode).sort((l,o)=>l===o?0:l.compareDocumentPosition(o)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1).forEach(l=>{let o=null;l.nextSibling!=null&&(o=this.scroll.find(l.nextSibling));const c=__(l,this.scroll);(c.next!==o||c.next==null)&&(c.parent!=null&&c.parent.removeChild(this),this.insertBefore(c,o||void 0))}),this.enforceAllowedChildren()}};MM.uiClass="";let Ade=MM;const pa=Ade;function Dde(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}const ec=class tc extends pa{static create(e){return super.create(e)}static formats(e,n){const s=n.query(tc.blotName);if(!(s!=null&&e.tagName===s.tagName)){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return e.tagName.toLowerCase()}}constructor(e,n){super(e,n),this.attributes=new xf(this.domNode)}format(e,n){if(e===this.statics.blotName&&!n)this.children.forEach(s=>{s instanceof tc||(s=s.wrap(tc.blotName,!0)),this.attributes.copy(s)}),this.unwrap();else{const s=this.scroll.query(e,St.INLINE);if(s==null)return;s instanceof Ka?this.attributes.attribute(s,n):n&&(e!==this.statics.blotName||this.formats()[e]!==n)&&this.replaceWith(e,n)}}formats(){const e=this.attributes.values(),n=this.statics.formats(this.domNode,this.scroll);return n!=null&&(e[this.statics.blotName]=n),e}formatAt(e,n,s,a){this.formats()[s]!=null||this.scroll.query(s,St.ATTRIBUTE)?this.isolate(e,n).format(s,a):super.formatAt(e,n,s,a)}optimize(e){super.optimize(e);const n=this.formats();if(Object.keys(n).length===0)return this.unwrap();const s=this.next;s instanceof tc&&s.prev===this&&Dde(n,s.formats())&&(s.moveChildren(this),s.remove())}replaceWith(e,n){const s=super.replaceWith(e,n);return this.attributes.copy(s),s}update(e,n){super.update(e,n),e.some(s=>s.target===this.domNode&&s.type==="attributes")&&this.attributes.build()}wrap(e,n){const s=super.wrap(e,n);return s instanceof tc&&this.attributes.move(s),s}};ec.allowedChildren=[ec,Oi],ec.blotName="inline",ec.scope=St.INLINE_BLOT,ec.tagName="SPAN";let Rde=ec;const nj=Rde,nc=class lb extends pa{static create(e){return super.create(e)}static formats(e,n){const s=n.query(lb.blotName);if(!(s!=null&&e.tagName===s.tagName)){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return e.tagName.toLowerCase()}}constructor(e,n){super(e,n),this.attributes=new xf(this.domNode)}format(e,n){const s=this.scroll.query(e,St.BLOCK);s!=null&&(s instanceof Ka?this.attributes.attribute(s,n):e===this.statics.blotName&&!n?this.replaceWith(lb.blotName):n&&(e!==this.statics.blotName||this.formats()[e]!==n)&&this.replaceWith(e,n))}formats(){const e=this.attributes.values(),n=this.statics.formats(this.domNode,this.scroll);return n!=null&&(e[this.statics.blotName]=n),e}formatAt(e,n,s,a){this.scroll.query(s,St.BLOCK)!=null?this.format(s,a):super.formatAt(e,n,s,a)}insertAt(e,n,s){if(s==null||this.scroll.query(n,St.INLINE)!=null)super.insertAt(e,n,s);else{const a=this.split(e);if(a!=null){const l=this.scroll.create(n,s);a.parent.insertBefore(l,a)}else throw new Error("Attempt to insertAt after block boundaries")}}replaceWith(e,n){const s=super.replaceWith(e,n);return this.attributes.copy(s),s}update(e,n){super.update(e,n),e.some(s=>s.target===this.domNode&&s.type==="attributes")&&this.attributes.build()}};nc.blotName="block",nc.scope=St.BLOCK_BLOT,nc.tagName="P",nc.allowedChildren=[nj,nc,Oi];let Pde=nc;const Lm=Pde,ob=class extends pa{checkMerge(){return this.next!==null&&this.next.statics.blotName===this.statics.blotName}deleteAt(e,n){super.deleteAt(e,n),this.enforceAllowedChildren()}formatAt(e,n,s,a){super.formatAt(e,n,s,a),this.enforceAllowedChildren()}insertAt(e,n,s){super.insertAt(e,n,s),this.enforceAllowedChildren()}optimize(e){super.optimize(e),this.children.length>0&&this.next!=null&&this.checkMerge()&&(this.next.moveChildren(this),this.next.remove())}};ob.blotName="container",ob.scope=St.BLOCK_BLOT;let Mde=ob;const yf=Mde;class Ide extends Oi{static formats(e,n){}format(e,n){super.formatAt(0,this.length(),e,n)}formatAt(e,n,s,a){e===0&&n===this.length()?this.format(s,a):super.formatAt(e,n,s,a)}formats(){return this.statics.formats(this.domNode,this.scroll)}}const Is=Ide,Ode={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},Fde=100,ic=class extends pa{constructor(e,n){super(null,n),this.registry=e,this.scroll=this,this.build(),this.observer=new MutationObserver(s=>{this.update(s)}),this.observer.observe(this.domNode,Ode),this.attach()}create(e,n){return this.registry.create(this,e,n)}find(e,n=!1){const s=this.registry.find(e,n);return s?s.scroll===this?s:n?this.find(s.scroll.domNode.parentNode,!0):null:null}query(e,n=St.ANY){return this.registry.query(e,n)}register(...e){return this.registry.register(...e)}build(){this.scroll!=null&&super.build()}detach(){super.detach(),this.observer.disconnect()}deleteAt(e,n){this.update(),e===0&&n===this.length()?this.children.forEach(s=>{s.remove()}):super.deleteAt(e,n)}formatAt(e,n,s,a){this.update(),super.formatAt(e,n,s,a)}insertAt(e,n,s){this.update(),super.insertAt(e,n,s)}optimize(e=[],n={}){super.optimize(n);const s=n.mutationsMap||new WeakMap;let a=Array.from(this.observer.takeRecords());for(;a.length>0;)e.push(a.pop());const l=(d,m=!0)=>{d==null||d===this||d.domNode.parentNode!=null&&(s.has(d.domNode)||s.set(d.domNode,[]),m&&l(d.parent))},o=d=>{s.has(d.domNode)&&(d instanceof pa&&d.children.forEach(o),s.delete(d.domNode),d.optimize(n))};let c=e;for(let d=0;c.length>0;d+=1){if(d>=Fde)throw new Error("[Parchment] Maximum optimize iterations reached");for(c.forEach(m=>{const u=this.find(m.target,!0);u!=null&&(u.domNode===m.target&&(m.type==="childList"?(l(this.find(m.previousSibling,!1)),Array.from(m.addedNodes).forEach(h=>{const p=this.find(h,!1);l(p,!1),p instanceof pa&&p.children.forEach(g=>{l(g,!1)})})):m.type==="attributes"&&l(u.prev)),l(u))}),this.children.forEach(o),c=Array.from(this.observer.takeRecords()),a=c.slice();a.length>0;)e.push(a.pop())}}update(e,n={}){e=e||this.observer.takeRecords();const s=new WeakMap;e.map(a=>{const l=this.find(a.target,!0);return l==null?null:s.has(l.domNode)?(s.get(l.domNode).push(a),null):(s.set(l.domNode,[a]),l)}).forEach(a=>{a!=null&&a!==this&&s.has(a.domNode)&&a.update(s.get(a.domNode)||[],n)}),n.mutationsMap=s,s.has(this.domNode)&&super.update(s.get(this.domNode),n),this.optimize(e,n)}};ic.blotName="scroll",ic.defaultChild=Lm,ic.allowedChildren=[Lm,yf],ic.scope=St.BLOCK_BLOT,ic.tagName="DIV";let Lde=ic;const ij=Lde,cb=class IM extends Oi{static create(e){return document.createTextNode(e)}static value(e){return e.data}constructor(e,n){super(e,n),this.text=this.statics.value(this.domNode)}deleteAt(e,n){this.domNode.data=this.text=this.text.slice(0,e)+this.text.slice(e+n)}index(e,n){return this.domNode===e?n:-1}insertAt(e,n,s){s==null?(this.text=this.text.slice(0,e)+n+this.text.slice(e),this.domNode.data=this.text):super.insertAt(e,n,s)}length(){return this.text.length}optimize(e){super.optimize(e),this.text=this.statics.value(this.domNode),this.text.length===0?this.remove():this.next instanceof IM&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())}position(e,n=!1){return[this.domNode,e]}split(e,n=!1){if(!n){if(e===0)return this;if(e===this.length())return this.next}const s=this.scroll.create(this.domNode.splitText(e));return this.parent.insertBefore(s,this.next||void 0),this.text=this.statics.value(this.domNode),s}update(e,n){e.some(s=>s.type==="characterData"&&s.target===this.domNode)&&(this.text=this.statics.value(this.domNode))}value(){return this.text}};cb.blotName="text",cb.scope=St.INLINE_BLOT;let $de=cb;const ug=$de,Bde=Object.freeze(Object.defineProperty({__proto__:null,Attributor:Ka,AttributorStore:xf,BlockBlot:Lm,ClassAttributor:ba,ContainerBlot:yf,EmbedBlot:Is,InlineBlot:nj,LeafBlot:Oi,ParentBlot:pa,Registry:Vc,Scope:St,ScrollBlot:ij,StyleAttributor:El,TextBlot:ug},Symbol.toStringTag,{value:"Module"}));var bh={exports:{}},mx,S_;function qde(){if(S_)return mx;S_=1;var t=-1,e=1,n=0;function s(E,I,M,O,F){if(E===I)return E?[[n,E]]:[];if(M!=null){var H=A(E,I,M);if(H)return H}var G=c(E,I),z=E.substring(0,G);E=E.substring(G),I=I.substring(G),G=m(E,I);var ie=E.substring(E.length-G);E=E.substring(0,E.length-G),I=I.substring(0,I.length-G);var W=a(E,I);return z&&W.unshift([n,z]),ie&&W.push([n,ie]),k(W,F),O&&h(W),W}function a(E,I){var M;if(!E)return[[e,I]];if(!I)return[[t,E]];var O=E.length>I.length?E:I,F=E.length>I.length?I:E,H=O.indexOf(F);if(H!==-1)return M=[[e,O.substring(0,H)],[n,F],[e,O.substring(H+F.length)]],E.length>I.length&&(M[0][0]=M[2][0]=t),M;if(F.length===1)return[[t,E],[e,I]];var G=u(E,I);if(G){var z=G[0],ie=G[1],W=G[2],ge=G[3],ae=G[4],U=s(z,W),X=s(ie,ge);return U.concat([[n,ae]],X)}return l(E,I)}function l(E,I){for(var M=E.length,O=I.length,F=Math.ceil((M+O)/2),H=F,G=2*F,z=new Array(G),ie=new Array(G),W=0;W<G;W++)z[W]=-1,ie[W]=-1;z[H+1]=0,ie[H+1]=0;for(var ge=M-O,ae=ge%2!==0,U=0,X=0,J=0,he=0,le=0;le<F;le++){for(var ee=-le+U;ee<=le-X;ee+=2){var me=H+ee,K;ee===-le||ee!==le&&z[me-1]<z[me+1]?K=z[me+1]:K=z[me-1]+1;for(var re=K-ee;K<M&&re<O&&E.charAt(K)===I.charAt(re);)K++,re++;if(z[me]=K,K>M)X+=2;else if(re>O)U+=2;else if(ae){var oe=H+ge-ee;if(oe>=0&&oe<G&&ie[oe]!==-1){var C=M-ie[oe];if(K>=C)return o(E,I,K,re)}}}for(var R=-le+J;R<=le-he;R+=2){var oe=H+R,C;R===-le||R!==le&&ie[oe-1]<ie[oe+1]?C=ie[oe+1]:C=ie[oe-1]+1;for(var te=C-R;C<M&&te<O&&E.charAt(M-C-1)===I.charAt(O-te-1);)C++,te++;if(ie[oe]=C,C>M)he+=2;else if(te>O)J+=2;else if(!ae){var me=H+ge-R;if(me>=0&&me<G&&z[me]!==-1){var K=z[me],re=H+K-me;if(C=M-C,K>=C)return o(E,I,K,re)}}}}return[[t,E],[e,I]]}function o(E,I,M,O){var F=E.substring(0,M),H=I.substring(0,O),G=E.substring(M),z=I.substring(O),ie=s(F,H),W=s(G,z);return ie.concat(W)}function c(E,I){if(!E||!I||E.charAt(0)!==I.charAt(0))return 0;for(var M=0,O=Math.min(E.length,I.length),F=O,H=0;M<F;)E.substring(H,F)==I.substring(H,F)?(M=F,H=M):O=F,F=Math.floor((O-M)/2+M);return w(E.charCodeAt(F-1))&&F--,F}function d(E,I){var M=E.length,O=I.length;if(M==0||O==0)return 0;M>O?E=E.substring(M-O):M<O&&(I=I.substring(0,M));var F=Math.min(M,O);if(E==I)return F;for(var H=0,G=1;;){var z=E.substring(F-G),ie=I.indexOf(z);if(ie==-1)return H;G+=ie,(ie==0||E.substring(F-G)==I.substring(0,G))&&(H=G,G++)}}function m(E,I){if(!E||!I||E.slice(-1)!==I.slice(-1))return 0;for(var M=0,O=Math.min(E.length,I.length),F=O,H=0;M<F;)E.substring(E.length-F,E.length-H)==I.substring(I.length-F,I.length-H)?(M=F,H=M):O=F,F=Math.floor((O-M)/2+M);return T(E.charCodeAt(E.length-F))&&F--,F}function u(E,I){var M=E.length>I.length?E:I,O=E.length>I.length?I:E;if(M.length<4||O.length*2<M.length)return null;function F(X,J,he){for(var le=X.substring(he,he+Math.floor(X.length/4)),ee=-1,me="",K,re,oe,C;(ee=J.indexOf(le,ee+1))!==-1;){var R=c(X.substring(he),J.substring(ee)),te=m(X.substring(0,he),J.substring(0,ee));me.length<te+R&&(me=J.substring(ee-te,ee)+J.substring(ee,ee+R),K=X.substring(0,he-te),re=X.substring(he+R),oe=J.substring(0,ee-te),C=J.substring(ee+R))}return me.length*2>=X.length?[K,re,oe,C,me]:null}var H=F(M,O,Math.ceil(M.length/4)),G=F(M,O,Math.ceil(M.length/2)),z;if(!H&&!G)return null;G?H?z=H[4].length>G[4].length?H:G:z=G:z=H;var ie,W,ge,ae;E.length>I.length?(ie=z[0],W=z[1],ge=z[2],ae=z[3]):(ge=z[0],ae=z[1],ie=z[2],W=z[3]);var U=z[4];return[ie,W,ge,ae,U]}function h(E){for(var I=!1,M=[],O=0,F=null,H=0,G=0,z=0,ie=0,W=0;H<E.length;)E[H][0]==n?(M[O++]=H,G=ie,z=W,ie=0,W=0,F=E[H][1]):(E[H][0]==e?ie+=E[H][1].length:W+=E[H][1].length,F&&F.length<=Math.max(G,z)&&F.length<=Math.max(ie,W)&&(E.splice(M[O-1],0,[t,F]),E[M[O-1]+1][0]=e,O--,O--,H=O>0?M[O-1]:-1,G=0,z=0,ie=0,W=0,F=null,I=!0)),H++;for(I&&k(E),b(E),H=1;H<E.length;){if(E[H-1][0]==t&&E[H][0]==e){var ge=E[H-1][1],ae=E[H][1],U=d(ge,ae),X=d(ae,ge);U>=X?(U>=ge.length/2||U>=ae.length/2)&&(E.splice(H,0,[n,ae.substring(0,U)]),E[H-1][1]=ge.substring(0,ge.length-U),E[H+1][1]=ae.substring(U),H++):(X>=ge.length/2||X>=ae.length/2)&&(E.splice(H,0,[n,ge.substring(0,X)]),E[H-1][0]=e,E[H-1][1]=ae.substring(0,ae.length-X),E[H+1][0]=t,E[H+1][1]=ge.substring(X),H++),H++}H++}}var p=/[^a-zA-Z0-9]/,g=/\s/,v=/[\r\n]/,x=/\n\r?\n$/,y=/^\r?\n\r?\n/;function b(E){function I(X,J){if(!X||!J)return 6;var he=X.charAt(X.length-1),le=J.charAt(0),ee=he.match(p),me=le.match(p),K=ee&&he.match(g),re=me&&le.match(g),oe=K&&he.match(v),C=re&&le.match(v),R=oe&&X.match(x),te=C&&J.match(y);return R||te?5:oe||C?4:ee&&!K&&re?3:K||re?2:ee||me?1:0}for(var M=1;M<E.length-1;){if(E[M-1][0]==n&&E[M+1][0]==n){var O=E[M-1][1],F=E[M][1],H=E[M+1][1],G=m(O,F);if(G){var z=F.substring(F.length-G);O=O.substring(0,O.length-G),F=z+F.substring(0,F.length-G),H=z+H}for(var ie=O,W=F,ge=H,ae=I(O,F)+I(F,H);F.charAt(0)===H.charAt(0);){O+=F.charAt(0),F=F.substring(1)+H.charAt(0),H=H.substring(1);var U=I(O,F)+I(F,H);U>=ae&&(ae=U,ie=O,W=F,ge=H)}E[M-1][1]!=ie&&(ie?E[M-1][1]=ie:(E.splice(M-1,1),M--),E[M][1]=W,ge?E[M+1][1]=ge:(E.splice(M+1,1),M--))}M++}}function k(E,I){E.push([n,""]);for(var M=0,O=0,F=0,H="",G="",z;M<E.length;){if(M<E.length-1&&!E[M][1]){E.splice(M,1);continue}switch(E[M][0]){case e:F++,G+=E[M][1],M++;break;case t:O++,H+=E[M][1],M++;break;case n:var ie=M-F-O-1;if(I){if(ie>=0&&D(E[ie][1])){var W=E[ie][1].slice(-1);if(E[ie][1]=E[ie][1].slice(0,-1),H=W+H,G=W+G,!E[ie][1]){E.splice(ie,1),M--;var ge=ie-1;E[ge]&&E[ge][0]===e&&(F++,G=E[ge][1]+G,ge--),E[ge]&&E[ge][0]===t&&(O++,H=E[ge][1]+H,ge--),ie=ge}}if(j(E[M][1])){var W=E[M][1].charAt(0);E[M][1]=E[M][1].slice(1),H+=W,G+=W}}if(M<E.length-1&&!E[M][1]){E.splice(M,1);break}if(H.length>0||G.length>0){H.length>0&&G.length>0&&(z=c(G,H),z!==0&&(ie>=0?E[ie][1]+=G.substring(0,z):(E.splice(0,0,[n,G.substring(0,z)]),M++),G=G.substring(z),H=H.substring(z)),z=m(G,H),z!==0&&(E[M][1]=G.substring(G.length-z)+E[M][1],G=G.substring(0,G.length-z),H=H.substring(0,H.length-z)));var ae=F+O;H.length===0&&G.length===0?(E.splice(M-ae,ae),M=M-ae):H.length===0?(E.splice(M-ae,ae,[e,G]),M=M-ae+1):G.length===0?(E.splice(M-ae,ae,[t,H]),M=M-ae+1):(E.splice(M-ae,ae,[t,H],[e,G]),M=M-ae+2)}M!==0&&E[M-1][0]===n?(E[M-1][1]+=E[M][1],E.splice(M,1)):M++,F=0,O=0,H="",G="";break}}E[E.length-1][1]===""&&E.pop();var U=!1;for(M=1;M<E.length-1;)E[M-1][0]===n&&E[M+1][0]===n&&(E[M][1].substring(E[M][1].length-E[M-1][1].length)===E[M-1][1]?(E[M][1]=E[M-1][1]+E[M][1].substring(0,E[M][1].length-E[M-1][1].length),E[M+1][1]=E[M-1][1]+E[M+1][1],E.splice(M-1,1),U=!0):E[M][1].substring(0,E[M+1][1].length)==E[M+1][1]&&(E[M-1][1]+=E[M+1][1],E[M][1]=E[M][1].substring(E[M+1][1].length)+E[M+1][1],E.splice(M+1,1),U=!0)),M++;U&&k(E,I)}function w(E){return E>=55296&&E<=56319}function T(E){return E>=56320&&E<=57343}function j(E){return T(E.charCodeAt(0))}function D(E){return w(E.charCodeAt(E.length-1))}function _(E){for(var I=[],M=0;M<E.length;M++)E[M][1].length>0&&I.push(E[M]);return I}function N(E,I,M,O){return D(E)||j(O)?null:_([[n,E],[t,I],[e,M],[n,O]])}function A(E,I,M){var O=typeof M=="number"?{index:M,length:0}:M.oldRange,F=typeof M=="number"?null:M.newRange,H=E.length,G=I.length;if(O.length===0&&(F===null||F.length===0)){var z=O.index,ie=E.slice(0,z),W=E.slice(z),ge=F?F.index:null;e:{var ae=z+G-H;if(ge!==null&&ge!==ae||ae<0||ae>G)break e;var U=I.slice(0,ae),X=I.slice(ae);if(X!==W)break e;var J=Math.min(z,ae),he=ie.slice(0,J),le=U.slice(0,J);if(he!==le)break e;var ee=ie.slice(J),me=U.slice(J);return N(he,ee,me,W)}e:{if(ge!==null&&ge!==z)break e;var K=z,U=I.slice(0,K),X=I.slice(K);if(U!==ie)break e;var re=Math.min(H-K,G-K),oe=W.slice(W.length-re),C=X.slice(X.length-re);if(oe!==C)break e;var ee=W.slice(0,W.length-re),me=X.slice(0,X.length-re);return N(ie,ee,me,oe)}}if(O.length>0&&F&&F.length===0)e:{var he=E.slice(0,O.index),oe=E.slice(O.index+O.length),J=he.length,re=oe.length;if(G<J+re)break e;var le=I.slice(0,J),C=I.slice(G-re);if(he!==le||oe!==C)break e;var ee=E.slice(J,H-re),me=I.slice(J,G-re);return N(he,ee,me,oe)}return null}function P(E,I,M,O){return s(E,I,M,O,!0)}return P.INSERT=e,P.DELETE=t,P.EQUAL=n,mx=P,mx}var Ud={exports:{}};Ud.exports;var E_;function OM(){return E_||(E_=1,(function(t,e){var n=200,s="__lodash_hash_undefined__",a=9007199254740991,l="[object Arguments]",o="[object Array]",c="[object Boolean]",d="[object Date]",m="[object Error]",u="[object Function]",h="[object GeneratorFunction]",p="[object Map]",g="[object Number]",v="[object Object]",x="[object Promise]",y="[object RegExp]",b="[object Set]",k="[object String]",w="[object Symbol]",T="[object WeakMap]",j="[object ArrayBuffer]",D="[object DataView]",_="[object Float32Array]",N="[object Float64Array]",A="[object Int8Array]",P="[object Int16Array]",E="[object Int32Array]",I="[object Uint8Array]",M="[object Uint8ClampedArray]",O="[object Uint16Array]",F="[object Uint32Array]",H=/[\\^$.*+?()[\]{}|]/g,G=/\w*$/,z=/^\[object .+?Constructor\]$/,ie=/^(?:0|[1-9]\d*)$/,W={};W[l]=W[o]=W[j]=W[D]=W[c]=W[d]=W[_]=W[N]=W[A]=W[P]=W[E]=W[p]=W[g]=W[v]=W[y]=W[b]=W[k]=W[w]=W[I]=W[M]=W[O]=W[F]=!0,W[m]=W[u]=W[T]=!1;var ge=typeof Yr=="object"&&Yr&&Yr.Object===Object&&Yr,ae=typeof self=="object"&&self&&self.Object===Object&&self,U=ge||ae||Function("return this")(),X=e&&!e.nodeType&&e,J=X&&!0&&t&&!t.nodeType&&t,he=J&&J.exports===X;function le(L,de){return L.set(de[0],de[1]),L}function ee(L,de){return L.add(de),L}function me(L,de){for(var je=-1,Ve=L?L.length:0;++je<Ve&&de(L[je],je,L)!==!1;);return L}function K(L,de){for(var je=-1,Ve=de.length,Kt=L.length;++je<Ve;)L[Kt+je]=de[je];return L}function re(L,de,je,Ve){for(var Kt=-1,Pt=L?L.length:0;++Kt<Pt;)je=de(je,L[Kt],Kt,L);return je}function oe(L,de){for(var je=-1,Ve=Array(L);++je<L;)Ve[je]=de(je);return Ve}function C(L,de){return L?.[de]}function R(L){var de=!1;if(L!=null&&typeof L.toString!="function")try{de=!!(L+"")}catch{}return de}function te(L){var de=-1,je=Array(L.size);return L.forEach(function(Ve,Kt){je[++de]=[Kt,Ve]}),je}function ne(L,de){return function(je){return L(de(je))}}function Y(L){var de=-1,je=Array(L.size);return L.forEach(function(Ve){je[++de]=Ve}),je}var q=Array.prototype,B=Function.prototype,se=Object.prototype,Q=U["__core-js_shared__"],pe=(function(){var L=/[^.]+$/.exec(Q&&Q.keys&&Q.keys.IE_PROTO||"");return L?"Symbol(src)_1."+L:""})(),$=B.toString,ce=se.hasOwnProperty,De=se.toString,xe=RegExp("^"+$.call(ce).replace(H,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Re=he?U.Buffer:void 0,nt=U.Symbol,Pe=U.Uint8Array,Ue=ne(Object.getPrototypeOf,Object),Je=Object.create,et=se.propertyIsEnumerable,Be=q.splice,ke=Object.getOwnPropertySymbols,_e=Re?Re.isBuffer:void 0,Ye=ne(Object.keys,Object),tt=aa(U,"DataView"),zt=aa(U,"Map"),Ft=aa(U,"Promise"),Qt=aa(U,"Set"),xt=aa(U,"WeakMap"),Ee=aa(Object,"create"),Oe=qi(tt),V=qi(zt),Z=qi(Ft),fe=qi(Qt),Ce=qi(xt),Ke=nt?nt.prototype:void 0,it=Ke?Ke.valueOf:void 0;function at(L){var de=-1,je=L?L.length:0;for(this.clear();++de<je;){var Ve=L[de];this.set(Ve[0],Ve[1])}}function ot(){this.__data__=Ee?Ee(null):{}}function Nt(L){return this.has(L)&&delete this.__data__[L]}function dt(L){var de=this.__data__;if(Ee){var je=de[L];return je===s?void 0:je}return ce.call(de,L)?de[L]:void 0}function jt(L){var de=this.__data__;return Ee?de[L]!==void 0:ce.call(de,L)}function Wt(L,de){var je=this.__data__;return je[L]=Ee&&de===void 0?s:de,this}at.prototype.clear=ot,at.prototype.delete=Nt,at.prototype.get=dt,at.prototype.has=jt,at.prototype.set=Wt;function be(L){var de=-1,je=L?L.length:0;for(this.clear();++de<je;){var Ve=L[de];this.set(Ve[0],Ve[1])}}function ue(){this.__data__=[]}function Te(L){var de=this.__data__,je=Ji(de,L);if(je<0)return!1;var Ve=de.length-1;return je==Ve?de.pop():Be.call(de,je,1),!0}function Ie(L){var de=this.__data__,je=Ji(de,L);return je<0?void 0:de[je][1]}function qe(L){return Ji(this.__data__,L)>-1}function $e(L,de){var je=this.__data__,Ve=Ji(je,L);return Ve<0?je.push([L,de]):je[Ve][1]=de,this}be.prototype.clear=ue,be.prototype.delete=Te,be.prototype.get=Ie,be.prototype.has=qe,be.prototype.set=$e;function Xe(L){var de=-1,je=L?L.length:0;for(this.clear();++de<je;){var Ve=L[de];this.set(Ve[0],Ve[1])}}function bt(){this.__data__={hash:new at,map:new(zt||be),string:new at}}function Gt(L){return Al(this,L).delete(L)}function $n(L){return Al(this,L).get(L)}function ti(L){return Al(this,L).has(L)}function vs(L,de){return Al(this,L).set(L,de),this}Xe.prototype.clear=bt,Xe.prototype.delete=Gt,Xe.prototype.get=$n,Xe.prototype.has=ti,Xe.prototype.set=vs;function ln(L){this.__data__=new be(L)}function xs(){this.__data__=new be}function ri(L){return this.__data__.delete(L)}function Zt(L){return this.__data__.get(L)}function sa(L){return this.__data__.has(L)}function wa(L,de){var je=this.__data__;if(je instanceof be){var Ve=je.__data__;if(!zt||Ve.length<n-1)return Ve.push([L,de]),this;je=this.__data__=new Xe(Ve)}return je.set(L,de),this}ln.prototype.clear=xs,ln.prototype.delete=ri,ln.prototype.get=Zt,ln.prototype.has=sa,ln.prototype.set=wa;function ja(L,de){var je=vd(L)||Ho(L)?oe(L.length,String):[],Ve=je.length,Kt=!!Ve;for(var Pt in L)ce.call(L,Pt)&&!(Kt&&(Pt=="length"||Rf(Pt,Ve)))&&je.push(Pt);return je}function Hr(L,de,je){var Ve=L[de];(!(ce.call(L,de)&&_u(Ve,je))||je===void 0&&!(de in L))&&(L[de]=je)}function Ji(L,de){for(var je=L.length;je--;)if(_u(L[je][0],de))return je;return-1}function gi(L,de){return L&&fd(de,yd(de),L)}function ys(L,de,je,Ve,Kt,Pt,on){var nn;if(Ve&&(nn=Pt?Ve(L,Kt,Pt,on):Ve(L)),nn!==void 0)return nn;if(!Ca(L))return L;var li=vd(L);if(li){if(nn=Af(L),!de)return Sf(L,nn)}else{var xn=ir(L),Si=xn==u||xn==h;if(Su(L))return qo(L,de);if(xn==v||xn==l||Si&&!Pt){if(R(L))return Pt?L:{};if(nn=Na(Si?{}:L),!de)return Ef(L,gi(nn,L))}else{if(!W[xn])return Pt?L:{};nn=Df(L,xn,ys,de)}}on||(on=new ln);var es=on.get(L);if(es)return es;if(on.set(L,nn),!li)var mi=je?Tf(L):yd(L);return me(mi||L,function(Ei,bi){mi&&(bi=Ei,Ei=L[bi]),Hr(nn,bi,ys(Ei,de,je,Ve,bi,L,on))}),nn}function md(L){return Ca(L)?Je(L):{}}function ud(L,de,je){var Ve=de(L);return vd(L)?Ve:K(Ve,je(L))}function hd(L){return De.call(L)}function pd(L){if(!Ca(L)||Mf(L))return!1;var de=xd(L)||R(L)?xe:z;return de.test(qi(L))}function jf(L){if(!Nu(L))return Ye(L);var de=[];for(var je in Object(L))ce.call(L,je)&&je!="constructor"&&de.push(je);return de}function qo(L,de){if(de)return L.slice();var je=new L.constructor(L.length);return L.copy(je),je}function gd(L){var de=new L.constructor(L.byteLength);return new Pe(de).set(new Pe(L)),de}function Tl(L,de){var je=de?gd(L.buffer):L.buffer;return new L.constructor(je,L.byteOffset,L.byteLength)}function wu(L,de,je){var Ve=de?je(te(L),!0):te(L);return re(Ve,le,new L.constructor)}function ju(L){var de=new L.constructor(L.source,G.exec(L));return de.lastIndex=L.lastIndex,de}function Nf(L,de,je){var Ve=de?je(Y(L),!0):Y(L);return re(Ve,ee,new L.constructor)}function Cf(L){return it?Object(it.call(L)):{}}function _f(L,de){var je=de?gd(L.buffer):L.buffer;return new L.constructor(je,L.byteOffset,L.length)}function Sf(L,de){var je=-1,Ve=L.length;for(de||(de=Array(Ve));++je<Ve;)de[je]=L[je];return de}function fd(L,de,je,Ve){je||(je={});for(var Kt=-1,Pt=de.length;++Kt<Pt;){var on=de[Kt],nn=void 0;Hr(je,on,nn===void 0?L[on]:nn)}return je}function Ef(L,de){return fd(L,nr(L),de)}function Tf(L){return ud(L,yd,nr)}function Al(L,de){var je=L.__data__;return Pf(de)?je[typeof de=="string"?"string":"hash"]:je.map}function aa(L,de){var je=C(L,de);return pd(je)?je:void 0}var nr=ke?ne(ke,Object):Of,ir=hd;(tt&&ir(new tt(new ArrayBuffer(1)))!=D||zt&&ir(new zt)!=p||Ft&&ir(Ft.resolve())!=x||Qt&&ir(new Qt)!=b||xt&&ir(new xt)!=T)&&(ir=function(L){var de=De.call(L),je=de==v?L.constructor:void 0,Ve=je?qi(je):void 0;if(Ve)switch(Ve){case Oe:return D;case V:return p;case Z:return x;case fe:return b;case Ce:return T}return de});function Af(L){var de=L.length,je=L.constructor(de);return de&&typeof L[0]=="string"&&ce.call(L,"index")&&(je.index=L.index,je.input=L.input),je}function Na(L){return typeof L.constructor=="function"&&!Nu(L)?md(Ue(L)):{}}function Df(L,de,je,Ve){var Kt=L.constructor;switch(de){case j:return gd(L);case c:case d:return new Kt(+L);case D:return Tl(L,Ve);case _:case N:case A:case P:case E:case I:case M:case O:case F:return _f(L,Ve);case p:return wu(L,Ve,je);case g:case k:return new Kt(L);case y:return ju(L);case b:return Nf(L,Ve,je);case w:return Cf(L)}}function Rf(L,de){return de=de??a,!!de&&(typeof L=="number"||ie.test(L))&&L>-1&&L%1==0&&L<de}function Pf(L){var de=typeof L;return de=="string"||de=="number"||de=="symbol"||de=="boolean"?L!=="__proto__":L===null}function Mf(L){return!!pe&&pe in L}function Nu(L){var de=L&&L.constructor,je=typeof de=="function"&&de.prototype||se;return L===je}function qi(L){if(L!=null){try{return $.call(L)}catch{}try{return L+""}catch{}}return""}function Cu(L){return ys(L,!0,!0)}function _u(L,de){return L===de||L!==L&&de!==de}function Ho(L){return If(L)&&ce.call(L,"callee")&&(!et.call(L,"callee")||De.call(L)==l)}var vd=Array.isArray;function zo(L){return L!=null&&Eu(L.length)&&!xd(L)}function If(L){return Tu(L)&&zo(L)}var Su=_e||Ff;function xd(L){var de=Ca(L)?De.call(L):"";return de==u||de==h}function Eu(L){return typeof L=="number"&&L>-1&&L%1==0&&L<=a}function Ca(L){var de=typeof L;return!!L&&(de=="object"||de=="function")}function Tu(L){return!!L&&typeof L=="object"}function yd(L){return zo(L)?ja(L):jf(L)}function Of(){return[]}function Ff(){return!1}t.exports=Cu})(Ud,Ud.exports)),Ud.exports}var Wd={exports:{}};Wd.exports;var T_;function FM(){return T_||(T_=1,(function(t,e){var n=200,s="__lodash_hash_undefined__",a=1,l=2,o=9007199254740991,c="[object Arguments]",d="[object Array]",m="[object AsyncFunction]",u="[object Boolean]",h="[object Date]",p="[object Error]",g="[object Function]",v="[object GeneratorFunction]",x="[object Map]",y="[object Number]",b="[object Null]",k="[object Object]",w="[object Promise]",T="[object Proxy]",j="[object RegExp]",D="[object Set]",_="[object String]",N="[object Symbol]",A="[object Undefined]",P="[object WeakMap]",E="[object ArrayBuffer]",I="[object DataView]",M="[object Float32Array]",O="[object Float64Array]",F="[object Int8Array]",H="[object Int16Array]",G="[object Int32Array]",z="[object Uint8Array]",ie="[object Uint8ClampedArray]",W="[object Uint16Array]",ge="[object Uint32Array]",ae=/[\\^$.*+?()[\]{}|]/g,U=/^\[object .+?Constructor\]$/,X=/^(?:0|[1-9]\d*)$/,J={};J[M]=J[O]=J[F]=J[H]=J[G]=J[z]=J[ie]=J[W]=J[ge]=!0,J[c]=J[d]=J[E]=J[u]=J[I]=J[h]=J[p]=J[g]=J[x]=J[y]=J[k]=J[j]=J[D]=J[_]=J[P]=!1;var he=typeof Yr=="object"&&Yr&&Yr.Object===Object&&Yr,le=typeof self=="object"&&self&&self.Object===Object&&self,ee=he||le||Function("return this")(),me=e&&!e.nodeType&&e,K=me&&!0&&t&&!t.nodeType&&t,re=K&&K.exports===me,oe=re&&he.process,C=(function(){try{return oe&&oe.binding&&oe.binding("util")}catch{}})(),R=C&&C.isTypedArray;function te(L,de){for(var je=-1,Ve=L==null?0:L.length,Kt=0,Pt=[];++je<Ve;){var on=L[je];de(on,je,L)&&(Pt[Kt++]=on)}return Pt}function ne(L,de){for(var je=-1,Ve=de.length,Kt=L.length;++je<Ve;)L[Kt+je]=de[je];return L}function Y(L,de){for(var je=-1,Ve=L==null?0:L.length;++je<Ve;)if(de(L[je],je,L))return!0;return!1}function q(L,de){for(var je=-1,Ve=Array(L);++je<L;)Ve[je]=de(je);return Ve}function B(L){return function(de){return L(de)}}function se(L,de){return L.has(de)}function Q(L,de){return L?.[de]}function pe(L){var de=-1,je=Array(L.size);return L.forEach(function(Ve,Kt){je[++de]=[Kt,Ve]}),je}function $(L,de){return function(je){return L(de(je))}}function ce(L){var de=-1,je=Array(L.size);return L.forEach(function(Ve){je[++de]=Ve}),je}var De=Array.prototype,xe=Function.prototype,Re=Object.prototype,nt=ee["__core-js_shared__"],Pe=xe.toString,Ue=Re.hasOwnProperty,Je=(function(){var L=/[^.]+$/.exec(nt&&nt.keys&&nt.keys.IE_PROTO||"");return L?"Symbol(src)_1."+L:""})(),et=Re.toString,Be=RegExp("^"+Pe.call(Ue).replace(ae,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ke=re?ee.Buffer:void 0,_e=ee.Symbol,Ye=ee.Uint8Array,tt=Re.propertyIsEnumerable,zt=De.splice,Ft=_e?_e.toStringTag:void 0,Qt=Object.getOwnPropertySymbols,xt=ke?ke.isBuffer:void 0,Ee=$(Object.keys,Object),Oe=nr(ee,"DataView"),V=nr(ee,"Map"),Z=nr(ee,"Promise"),fe=nr(ee,"Set"),Ce=nr(ee,"WeakMap"),Ke=nr(Object,"create"),it=qi(Oe),at=qi(V),ot=qi(Z),Nt=qi(fe),dt=qi(Ce),jt=_e?_e.prototype:void 0,Wt=jt?jt.valueOf:void 0;function be(L){var de=-1,je=L==null?0:L.length;for(this.clear();++de<je;){var Ve=L[de];this.set(Ve[0],Ve[1])}}function ue(){this.__data__=Ke?Ke(null):{},this.size=0}function Te(L){var de=this.has(L)&&delete this.__data__[L];return this.size-=de?1:0,de}function Ie(L){var de=this.__data__;if(Ke){var je=de[L];return je===s?void 0:je}return Ue.call(de,L)?de[L]:void 0}function qe(L){var de=this.__data__;return Ke?de[L]!==void 0:Ue.call(de,L)}function $e(L,de){var je=this.__data__;return this.size+=this.has(L)?0:1,je[L]=Ke&&de===void 0?s:de,this}be.prototype.clear=ue,be.prototype.delete=Te,be.prototype.get=Ie,be.prototype.has=qe,be.prototype.set=$e;function Xe(L){var de=-1,je=L==null?0:L.length;for(this.clear();++de<je;){var Ve=L[de];this.set(Ve[0],Ve[1])}}function bt(){this.__data__=[],this.size=0}function Gt(L){var de=this.__data__,je=qo(de,L);if(je<0)return!1;var Ve=de.length-1;return je==Ve?de.pop():zt.call(de,je,1),--this.size,!0}function $n(L){var de=this.__data__,je=qo(de,L);return je<0?void 0:de[je][1]}function ti(L){return qo(this.__data__,L)>-1}function vs(L,de){var je=this.__data__,Ve=qo(je,L);return Ve<0?(++this.size,je.push([L,de])):je[Ve][1]=de,this}Xe.prototype.clear=bt,Xe.prototype.delete=Gt,Xe.prototype.get=$n,Xe.prototype.has=ti,Xe.prototype.set=vs;function ln(L){var de=-1,je=L==null?0:L.length;for(this.clear();++de<je;){var Ve=L[de];this.set(Ve[0],Ve[1])}}function xs(){this.size=0,this.__data__={hash:new be,map:new(V||Xe),string:new be}}function ri(L){var de=aa(this,L).delete(L);return this.size-=de?1:0,de}function Zt(L){return aa(this,L).get(L)}function sa(L){return aa(this,L).has(L)}function wa(L,de){var je=aa(this,L),Ve=je.size;return je.set(L,de),this.size+=je.size==Ve?0:1,this}ln.prototype.clear=xs,ln.prototype.delete=ri,ln.prototype.get=Zt,ln.prototype.has=sa,ln.prototype.set=wa;function ja(L){var de=-1,je=L==null?0:L.length;for(this.__data__=new ln;++de<je;)this.add(L[de])}function Hr(L){return this.__data__.set(L,s),this}function Ji(L){return this.__data__.has(L)}ja.prototype.add=ja.prototype.push=Hr,ja.prototype.has=Ji;function gi(L){var de=this.__data__=new Xe(L);this.size=de.size}function ys(){this.__data__=new Xe,this.size=0}function md(L){var de=this.__data__,je=de.delete(L);return this.size=de.size,je}function ud(L){return this.__data__.get(L)}function hd(L){return this.__data__.has(L)}function pd(L,de){var je=this.__data__;if(je instanceof Xe){var Ve=je.__data__;if(!V||Ve.length<n-1)return Ve.push([L,de]),this.size=++je.size,this;je=this.__data__=new ln(Ve)}return je.set(L,de),this.size=je.size,this}gi.prototype.clear=ys,gi.prototype.delete=md,gi.prototype.get=ud,gi.prototype.has=hd,gi.prototype.set=pd;function jf(L,de){var je=Ho(L),Ve=!je&&_u(L),Kt=!je&&!Ve&&zo(L),Pt=!je&&!Ve&&!Kt&&Tu(L),on=je||Ve||Kt||Pt,nn=on?q(L.length,String):[],li=nn.length;for(var xn in L)Ue.call(L,xn)&&!(on&&(xn=="length"||Kt&&(xn=="offset"||xn=="parent")||Pt&&(xn=="buffer"||xn=="byteLength"||xn=="byteOffset")||Df(xn,li)))&&nn.push(xn);return nn}function qo(L,de){for(var je=L.length;je--;)if(Cu(L[je][0],de))return je;return-1}function gd(L,de,je){var Ve=de(L);return Ho(L)?Ve:ne(Ve,je(L))}function Tl(L){return L==null?L===void 0?A:b:Ft&&Ft in Object(L)?ir(L):Nu(L)}function wu(L){return Ca(L)&&Tl(L)==c}function ju(L,de,je,Ve,Kt){return L===de?!0:L==null||de==null||!Ca(L)&&!Ca(de)?L!==L&&de!==de:Nf(L,de,je,Ve,ju,Kt)}function Nf(L,de,je,Ve,Kt,Pt){var on=Ho(L),nn=Ho(de),li=on?d:Na(L),xn=nn?d:Na(de);li=li==c?k:li,xn=xn==c?k:xn;var Si=li==k,es=xn==k,mi=li==xn;if(mi&&zo(L)){if(!zo(de))return!1;on=!0,Si=!1}if(mi&&!Si)return Pt||(Pt=new gi),on||Tu(L)?fd(L,de,je,Ve,Kt,Pt):Ef(L,de,li,je,Ve,Kt,Pt);if(!(je&a)){var Ei=Si&&Ue.call(L,"__wrapped__"),bi=es&&Ue.call(de,"__wrapped__");if(Ei||bi){var zr=Ei?L.value():L,sr=bi?de.value():de;return Pt||(Pt=new gi),Kt(zr,sr,je,Ve,Pt)}}return mi?(Pt||(Pt=new gi),Tf(L,de,je,Ve,Kt,Pt)):!1}function Cf(L){if(!Eu(L)||Pf(L))return!1;var de=Su(L)?Be:U;return de.test(qi(L))}function _f(L){return Ca(L)&&xd(L.length)&&!!J[Tl(L)]}function Sf(L){if(!Mf(L))return Ee(L);var de=[];for(var je in Object(L))Ue.call(L,je)&&je!="constructor"&&de.push(je);return de}function fd(L,de,je,Ve,Kt,Pt){var on=je&a,nn=L.length,li=de.length;if(nn!=li&&!(on&&li>nn))return!1;var xn=Pt.get(L);if(xn&&Pt.get(de))return xn==de;var Si=-1,es=!0,mi=je&l?new ja:void 0;for(Pt.set(L,de),Pt.set(de,L);++Si<nn;){var Ei=L[Si],bi=de[Si];if(Ve)var zr=on?Ve(bi,Ei,Si,de,L,Pt):Ve(Ei,bi,Si,L,de,Pt);if(zr!==void 0){if(zr)continue;es=!1;break}if(mi){if(!Y(de,function(sr,Dl){if(!se(mi,Dl)&&(Ei===sr||Kt(Ei,sr,je,Ve,Pt)))return mi.push(Dl)})){es=!1;break}}else if(!(Ei===bi||Kt(Ei,bi,je,Ve,Pt))){es=!1;break}}return Pt.delete(L),Pt.delete(de),es}function Ef(L,de,je,Ve,Kt,Pt,on){switch(je){case I:if(L.byteLength!=de.byteLength||L.byteOffset!=de.byteOffset)return!1;L=L.buffer,de=de.buffer;case E:return!(L.byteLength!=de.byteLength||!Pt(new Ye(L),new Ye(de)));case u:case h:case y:return Cu(+L,+de);case p:return L.name==de.name&&L.message==de.message;case j:case _:return L==de+"";case x:var nn=pe;case D:var li=Ve&a;if(nn||(nn=ce),L.size!=de.size&&!li)return!1;var xn=on.get(L);if(xn)return xn==de;Ve|=l,on.set(L,de);var Si=fd(nn(L),nn(de),Ve,Kt,Pt,on);return on.delete(L),Si;case N:if(Wt)return Wt.call(L)==Wt.call(de)}return!1}function Tf(L,de,je,Ve,Kt,Pt){var on=je&a,nn=Al(L),li=nn.length,xn=Al(de),Si=xn.length;if(li!=Si&&!on)return!1;for(var es=li;es--;){var mi=nn[es];if(!(on?mi in de:Ue.call(de,mi)))return!1}var Ei=Pt.get(L);if(Ei&&Pt.get(de))return Ei==de;var bi=!0;Pt.set(L,de),Pt.set(de,L);for(var zr=on;++es<li;){mi=nn[es];var sr=L[mi],Dl=de[mi];if(Ve)var gj=on?Ve(Dl,sr,mi,de,L,Pt):Ve(sr,Dl,mi,L,de,Pt);if(!(gj===void 0?sr===Dl||Kt(sr,Dl,je,Ve,Pt):gj)){bi=!1;break}zr||(zr=mi=="constructor")}if(bi&&!zr){var Au=L.constructor,Du=de.constructor;Au!=Du&&"constructor"in L&&"constructor"in de&&!(typeof Au=="function"&&Au instanceof Au&&typeof Du=="function"&&Du instanceof Du)&&(bi=!1)}return Pt.delete(L),Pt.delete(de),bi}function Al(L){return gd(L,yd,Af)}function aa(L,de){var je=L.__data__;return Rf(de)?je[typeof de=="string"?"string":"hash"]:je.map}function nr(L,de){var je=Q(L,de);return Cf(je)?je:void 0}function ir(L){var de=Ue.call(L,Ft),je=L[Ft];try{L[Ft]=void 0;var Ve=!0}catch{}var Kt=et.call(L);return Ve&&(de?L[Ft]=je:delete L[Ft]),Kt}var Af=Qt?function(L){return L==null?[]:(L=Object(L),te(Qt(L),function(de){return tt.call(L,de)}))}:Of,Na=Tl;(Oe&&Na(new Oe(new ArrayBuffer(1)))!=I||V&&Na(new V)!=x||Z&&Na(Z.resolve())!=w||fe&&Na(new fe)!=D||Ce&&Na(new Ce)!=P)&&(Na=function(L){var de=Tl(L),je=de==k?L.constructor:void 0,Ve=je?qi(je):"";if(Ve)switch(Ve){case it:return I;case at:return x;case ot:return w;case Nt:return D;case dt:return P}return de});function Df(L,de){return de=de??o,!!de&&(typeof L=="number"||X.test(L))&&L>-1&&L%1==0&&L<de}function Rf(L){var de=typeof L;return de=="string"||de=="number"||de=="symbol"||de=="boolean"?L!=="__proto__":L===null}function Pf(L){return!!Je&&Je in L}function Mf(L){var de=L&&L.constructor,je=typeof de=="function"&&de.prototype||Re;return L===je}function Nu(L){return et.call(L)}function qi(L){if(L!=null){try{return Pe.call(L)}catch{}try{return L+""}catch{}}return""}function Cu(L,de){return L===de||L!==L&&de!==de}var _u=wu((function(){return arguments})())?wu:function(L){return Ca(L)&&Ue.call(L,"callee")&&!tt.call(L,"callee")},Ho=Array.isArray;function vd(L){return L!=null&&xd(L.length)&&!Su(L)}var zo=xt||Ff;function If(L,de){return ju(L,de)}function Su(L){if(!Eu(L))return!1;var de=Tl(L);return de==g||de==v||de==m||de==T}function xd(L){return typeof L=="number"&&L>-1&&L%1==0&&L<=o}function Eu(L){var de=typeof L;return L!=null&&(de=="object"||de=="function")}function Ca(L){return L!=null&&typeof L=="object"}var Tu=R?B(R):_f;function yd(L){return vd(L)?jf(L):Sf(L)}function Of(){return[]}function Ff(){return!1}t.exports=If})(Wd,Wd.exports)),Wd.exports}var kh={},A_;function Hde(){if(A_)return kh;A_=1,Object.defineProperty(kh,"__esModule",{value:!0});const t=OM(),e=FM();var n;return(function(s){function a(d={},m={},u=!1){typeof d!="object"&&(d={}),typeof m!="object"&&(m={});let h=t(m);u||(h=Object.keys(h).reduce((p,g)=>(h[g]!=null&&(p[g]=h[g]),p),{}));for(const p in d)d[p]!==void 0&&m[p]===void 0&&(h[p]=d[p]);return Object.keys(h).length>0?h:void 0}s.compose=a;function l(d={},m={}){typeof d!="object"&&(d={}),typeof m!="object"&&(m={});const u=Object.keys(d).concat(Object.keys(m)).reduce((h,p)=>(e(d[p],m[p])||(h[p]=m[p]===void 0?null:m[p]),h),{});return Object.keys(u).length>0?u:void 0}s.diff=l;function o(d={},m={}){d=d||{};const u=Object.keys(m).reduce((h,p)=>(m[p]!==d[p]&&d[p]!==void 0&&(h[p]=m[p]),h),{});return Object.keys(d).reduce((h,p)=>(d[p]!==m[p]&&m[p]===void 0&&(h[p]=null),h),u)}s.invert=o;function c(d,m,u=!1){if(typeof d!="object")return m;if(typeof m!="object")return;if(!u)return m;const h=Object.keys(m).reduce((p,g)=>(d[g]===void 0&&(p[g]=m[g]),p),{});return Object.keys(h).length>0?h:void 0}s.transform=c})(n||(n={})),kh.default=n,kh}var wh={},D_;function LM(){if(D_)return wh;D_=1,Object.defineProperty(wh,"__esModule",{value:!0});var t;return(function(e){function n(s){return typeof s.delete=="number"?s.delete:typeof s.retain=="number"?s.retain:typeof s.retain=="object"&&s.retain!==null?1:typeof s.insert=="string"?s.insert.length:1}e.length=n})(t||(t={})),wh.default=t,wh}var jh={},R_;function zde(){if(R_)return jh;R_=1,Object.defineProperty(jh,"__esModule",{value:!0});const t=LM();class e{constructor(s){this.ops=s,this.index=0,this.offset=0}hasNext(){return this.peekLength()<1/0}next(s){s||(s=1/0);const a=this.ops[this.index];if(a){const l=this.offset,o=t.default.length(a);if(s>=o-l?(s=o-l,this.index+=1,this.offset=0):this.offset+=s,typeof a.delete=="number")return{delete:s};{const c={};return a.attributes&&(c.attributes=a.attributes),typeof a.retain=="number"?c.retain=s:typeof a.retain=="object"&&a.retain!==null?c.retain=a.retain:typeof a.insert=="string"?c.insert=a.insert.substr(l,s):c.insert=a.insert,c}}else return{retain:1/0}}peek(){return this.ops[this.index]}peekLength(){return this.ops[this.index]?t.default.length(this.ops[this.index])-this.offset:1/0}peekType(){const s=this.ops[this.index];return s?typeof s.delete=="number"?"delete":typeof s.retain=="number"||typeof s.retain=="object"&&s.retain!==null?"retain":"insert":"retain"}rest(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);{const s=this.offset,a=this.index,l=this.next(),o=this.ops.slice(this.index);return this.offset=s,this.index=a,[l].concat(o)}}else return[]}}return jh.default=e,jh}var P_;function Vde(){return P_||(P_=1,(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.AttributeMap=e.OpIterator=e.Op=void 0;const n=qde(),s=OM(),a=FM(),l=Hde();e.AttributeMap=l.default;const o=LM();e.Op=o.default;const c=zde();e.OpIterator=c.default;const d="\0",m=(h,p)=>{if(typeof h!="object"||h===null)throw new Error(`cannot retain a ${typeof h}`);if(typeof p!="object"||p===null)throw new Error(`cannot retain a ${typeof p}`);const g=Object.keys(h)[0];if(!g||g!==Object.keys(p)[0])throw new Error(`embed types not matched: ${g} != ${Object.keys(p)[0]}`);return[g,h[g],p[g]]};class u{constructor(p){Array.isArray(p)?this.ops=p:p!=null&&Array.isArray(p.ops)?this.ops=p.ops:this.ops=[]}static registerEmbed(p,g){this.handlers[p]=g}static unregisterEmbed(p){delete this.handlers[p]}static getHandler(p){const g=this.handlers[p];if(!g)throw new Error(`no handlers for embed type "${p}"`);return g}insert(p,g){const v={};return typeof p=="string"&&p.length===0?this:(v.insert=p,g!=null&&typeof g=="object"&&Object.keys(g).length>0&&(v.attributes=g),this.push(v))}delete(p){return p<=0?this:this.push({delete:p})}retain(p,g){if(typeof p=="number"&&p<=0)return this;const v={retain:p};return g!=null&&typeof g=="object"&&Object.keys(g).length>0&&(v.attributes=g),this.push(v)}push(p){let g=this.ops.length,v=this.ops[g-1];if(p=s(p),typeof v=="object"){if(typeof p.delete=="number"&&typeof v.delete=="number")return this.ops[g-1]={delete:v.delete+p.delete},this;if(typeof v.delete=="number"&&p.insert!=null&&(g-=1,v=this.ops[g-1],typeof v!="object"))return this.ops.unshift(p),this;if(a(p.attributes,v.attributes)){if(typeof p.insert=="string"&&typeof v.insert=="string")return this.ops[g-1]={insert:v.insert+p.insert},typeof p.attributes=="object"&&(this.ops[g-1].attributes=p.attributes),this;if(typeof p.retain=="number"&&typeof v.retain=="number")return this.ops[g-1]={retain:v.retain+p.retain},typeof p.attributes=="object"&&(this.ops[g-1].attributes=p.attributes),this}}return g===this.ops.length?this.ops.push(p):this.ops.splice(g,0,p),this}chop(){const p=this.ops[this.ops.length-1];return p&&typeof p.retain=="number"&&!p.attributes&&this.ops.pop(),this}filter(p){return this.ops.filter(p)}forEach(p){this.ops.forEach(p)}map(p){return this.ops.map(p)}partition(p){const g=[],v=[];return this.forEach(x=>{(p(x)?g:v).push(x)}),[g,v]}reduce(p,g){return this.ops.reduce(p,g)}changeLength(){return this.reduce((p,g)=>g.insert?p+o.default.length(g):g.delete?p-g.delete:p,0)}length(){return this.reduce((p,g)=>p+o.default.length(g),0)}slice(p=0,g=1/0){const v=[],x=new c.default(this.ops);let y=0;for(;y<g&&x.hasNext();){let b;y<p?b=x.next(p-y):(b=x.next(g-y),v.push(b)),y+=o.default.length(b)}return new u(v)}compose(p){const g=new c.default(this.ops),v=new c.default(p.ops),x=[],y=v.peek();if(y!=null&&typeof y.retain=="number"&&y.attributes==null){let k=y.retain;for(;g.peekType()==="insert"&&g.peekLength()<=k;)k-=g.peekLength(),x.push(g.next());y.retain-k>0&&v.next(y.retain-k)}const b=new u(x);for(;g.hasNext()||v.hasNext();)if(v.peekType()==="insert")b.push(v.next());else if(g.peekType()==="delete")b.push(g.next());else{const k=Math.min(g.peekLength(),v.peekLength()),w=g.next(k),T=v.next(k);if(T.retain){const j={};if(typeof w.retain=="number")j.retain=typeof T.retain=="number"?k:T.retain;else if(typeof T.retain=="number")w.retain==null?j.insert=w.insert:j.retain=w.retain;else{const _=w.retain==null?"insert":"retain",[N,A,P]=m(w[_],T.retain),E=u.getHandler(N);j[_]={[N]:E.compose(A,P,_==="retain")}}const D=l.default.compose(w.attributes,T.attributes,typeof w.retain=="number");if(D&&(j.attributes=D),b.push(j),!v.hasNext()&&a(b.ops[b.ops.length-1],j)){const _=new u(g.rest());return b.concat(_).chop()}}else typeof T.delete=="number"&&(typeof w.retain=="number"||typeof w.retain=="object"&&w.retain!==null)&&b.push(T)}return b.chop()}concat(p){const g=new u(this.ops.slice());return p.ops.length>0&&(g.push(p.ops[0]),g.ops=g.ops.concat(p.ops.slice(1))),g}diff(p,g){if(this.ops===p.ops)return new u;const v=[this,p].map(w=>w.map(T=>{if(T.insert!=null)return typeof T.insert=="string"?T.insert:d;const j=w===p?"on":"with";throw new Error("diff() called "+j+" non-document")}).join("")),x=new u,y=n(v[0],v[1],g,!0),b=new c.default(this.ops),k=new c.default(p.ops);return y.forEach(w=>{let T=w[1].length;for(;T>0;){let j=0;switch(w[0]){case n.INSERT:j=Math.min(k.peekLength(),T),x.push(k.next(j));break;case n.DELETE:j=Math.min(T,b.peekLength()),b.next(j),x.delete(j);break;case n.EQUAL:j=Math.min(b.peekLength(),k.peekLength(),T);const D=b.next(j),_=k.next(j);a(D.insert,_.insert)?x.retain(j,l.default.diff(D.attributes,_.attributes)):x.push(_).delete(j);break}T-=j}}),x.chop()}eachLine(p,g=`
`){const v=new c.default(this.ops);let x=new u,y=0;for(;v.hasNext();){if(v.peekType()!=="insert")return;const b=v.peek(),k=o.default.length(b)-v.peekLength(),w=typeof b.insert=="string"?b.insert.indexOf(g,k)-k:-1;if(w<0)x.push(v.next());else if(w>0)x.push(v.next(w));else{if(p(x,v.next(1).attributes||{},y)===!1)return;y+=1,x=new u}}x.length()>0&&p(x,{},y)}invert(p){const g=new u;return this.reduce((v,x)=>{if(x.insert)g.delete(o.default.length(x));else{if(typeof x.retain=="number"&&x.attributes==null)return g.retain(x.retain),v+x.retain;if(x.delete||typeof x.retain=="number"){const y=x.delete||x.retain;return p.slice(v,v+y).forEach(k=>{x.delete?g.push(k):x.retain&&x.attributes&&g.retain(o.default.length(k),l.default.invert(x.attributes,k.attributes))}),v+y}else if(typeof x.retain=="object"&&x.retain!==null){const y=p.slice(v,v+1),b=new c.default(y.ops).next(),[k,w,T]=m(x.retain,b.insert),j=u.getHandler(k);return g.retain({[k]:j.invert(w,T)},l.default.invert(x.attributes,b.attributes)),v+1}}return v},0),g.chop()}transform(p,g=!1){if(g=!!g,typeof p=="number")return this.transformPosition(p,g);const v=p,x=new c.default(this.ops),y=new c.default(v.ops),b=new u;for(;x.hasNext()||y.hasNext();)if(x.peekType()==="insert"&&(g||y.peekType()!=="insert"))b.retain(o.default.length(x.next()));else if(y.peekType()==="insert")b.push(y.next());else{const k=Math.min(x.peekLength(),y.peekLength()),w=x.next(k),T=y.next(k);if(w.delete)continue;if(T.delete)b.push(T);else{const j=w.retain,D=T.retain;let _=typeof D=="object"&&D!==null?D:k;if(typeof j=="object"&&j!==null&&typeof D=="object"&&D!==null){const N=Object.keys(j)[0];if(N===Object.keys(D)[0]){const A=u.getHandler(N);A&&(_={[N]:A.transform(j[N],D[N],g)})}}b.retain(_,l.default.transform(w.attributes,T.attributes,g))}}return b.chop()}transformPosition(p,g=!1){g=!!g;const v=new c.default(this.ops);let x=0;for(;v.hasNext()&&x<=p;){const y=v.peekLength(),b=v.peekType();if(v.next(),b==="delete"){p-=Math.min(y,p-x);continue}else b==="insert"&&(x<p||!g)&&(p+=y);x+=y}return p}}u.Op=o.default,u.OpIterator=c.default,u.AttributeMap=l.default,u.handlers={},e.default=u,t.exports=u,t.exports.default=u})(bh,bh.exports)),bh.exports}var Gs=Vde();const Ct=ya(Gs);class ka extends Is{static value(){}optimize(){(this.prev||this.next)&&this.remove()}length(){return 0}value(){return""}}ka.blotName="break";ka.tagName="BR";let xa=class extends ug{};const Ude={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function bf(t){return t.replace(/[&<>"']/g,e=>Ude[e])}class zi extends nj{static allowedChildren=[zi,ka,Is,xa];static order=["cursor","inline","link","underline","strike","italic","bold","script","code"];static compare(e,n){const s=zi.order.indexOf(e),a=zi.order.indexOf(n);return s>=0||a>=0?s-a:e===n?0:e<n?-1:1}formatAt(e,n,s,a){if(zi.compare(this.statics.blotName,s)<0&&this.scroll.query(s,St.BLOT)){const l=this.isolate(e,n);a&&l.wrap(s,a)}else super.formatAt(e,n,s,a)}optimize(e){if(super.optimize(e),this.parent instanceof zi&&zi.compare(this.statics.blotName,this.parent.statics.blotName)>0){const n=this.parent.isolate(this.offset(),this.length());this.moveChildren(n),n.wrap(this)}}}const M_=1;class Ni extends Lm{cache={};delta(){return this.cache.delta==null&&(this.cache.delta=$M(this)),this.cache.delta}deleteAt(e,n){super.deleteAt(e,n),this.cache={}}formatAt(e,n,s,a){n<=0||(this.scroll.query(s,St.BLOCK)?e+n===this.length()&&this.format(s,a):super.formatAt(e,Math.min(n,this.length()-e-1),s,a),this.cache={})}insertAt(e,n,s){if(s!=null){super.insertAt(e,n,s),this.cache={};return}if(n.length===0)return;const a=n.split(`
`),l=a.shift();l.length>0&&(e<this.length()-1||this.children.tail==null?super.insertAt(Math.min(e,this.length()-1),l):this.children.tail.insertAt(this.children.tail.length(),l),this.cache={});let o=this;a.reduce((c,d)=>(o=o.split(c,!0),o.insertAt(0,d),d.length),e+l.length)}insertBefore(e,n){const{head:s}=this.children;super.insertBefore(e,n),s instanceof ka&&s.remove(),this.cache={}}length(){return this.cache.length==null&&(this.cache.length=super.length()+M_),this.cache.length}moveChildren(e,n){super.moveChildren(e,n),this.cache={}}optimize(e){super.optimize(e),this.cache={}}path(e){return super.path(e,!0)}removeChild(e){super.removeChild(e),this.cache={}}split(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(n&&(e===0||e>=this.length()-M_)){const a=this.clone();return e===0?(this.parent.insertBefore(a,this),this):(this.parent.insertBefore(a,this.next),a)}const s=super.split(e,n);return this.cache={},s}}Ni.blotName="block";Ni.tagName="P";Ni.defaultChild=ka;Ni.allowedChildren=[ka,zi,Is,xa];class zs extends Is{attach(){super.attach(),this.attributes=new xf(this.domNode)}delta(){return new Ct().insert(this.value(),{...this.formats(),...this.attributes.values()})}format(e,n){const s=this.scroll.query(e,St.BLOCK_ATTRIBUTE);s!=null&&this.attributes.attribute(s,n)}formatAt(e,n,s,a){this.format(s,a)}insertAt(e,n,s){if(s!=null){super.insertAt(e,n,s);return}const a=n.split(`
`),l=a.pop(),o=a.map(d=>{const m=this.scroll.create(Ni.blotName);return m.insertAt(0,d),m}),c=this.split(e);o.forEach(d=>{this.parent.insertBefore(d,c)}),l&&this.parent.insertBefore(this.scroll.create("text",l),c)}}zs.scope=St.BLOCK_BLOT;function $M(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return t.descendants(Oi).reduce((n,s)=>s.length()===0?n:n.insert(s.value(),Bs(s,{},e)),new Ct).insert(`
`,Bs(t))}function Bs(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;return t==null||("formats"in t&&typeof t.formats=="function"&&(e={...e,...t.formats()},n&&delete e["code-token"]),t.parent==null||t.parent.statics.blotName==="scroll"||t.parent.statics.scope!==t.statics.scope)?e:Bs(t.parent,e,n)}class oa extends Is{static blotName="cursor";static className="ql-cursor";static tagName="span";static CONTENTS="\uFEFF";static value(){}constructor(e,n,s){super(e,n),this.selection=s,this.textNode=document.createTextNode(oa.CONTENTS),this.domNode.appendChild(this.textNode),this.savedLength=0}detach(){this.parent!=null&&this.parent.removeChild(this)}format(e,n){if(this.savedLength!==0){super.format(e,n);return}let s=this,a=0;for(;s!=null&&s.statics.scope!==St.BLOCK_BLOT;)a+=s.offset(s.parent),s=s.parent;s!=null&&(this.savedLength=oa.CONTENTS.length,s.optimize(),s.formatAt(a,oa.CONTENTS.length,e,n),this.savedLength=0)}index(e,n){return e===this.textNode?0:super.index(e,n)}length(){return this.savedLength}position(){return[this.textNode,this.textNode.data.length]}remove(){super.remove(),this.parent=null}restore(){if(this.selection.composing||this.parent==null)return null;const e=this.selection.getNativeRange();for(;this.domNode.lastChild!=null&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);const n=this.prev instanceof xa?this.prev:null,s=n?n.length():0,a=this.next instanceof xa?this.next:null,l=a?a.text:"",{textNode:o}=this,c=o.data.split(oa.CONTENTS).join("");o.data=oa.CONTENTS;let d;if(n)d=n,(c||a)&&(n.insertAt(n.length(),c+l),a&&a.remove());else if(a)d=a,a.insertAt(0,c);else{const m=document.createTextNode(c);d=this.scroll.create(m),this.parent.insertBefore(d,this)}if(this.remove(),e){const m=(p,g)=>n&&p===n.domNode?g:p===o?s+g-1:a&&p===a.domNode?s+c.length+g:null,u=m(e.start.node,e.start.offset),h=m(e.end.node,e.end.offset);if(u!==null&&h!==null)return{startNode:d.domNode,startOffset:u,endNode:d.domNode,endOffset:h}}return null}update(e,n){if(e.some(s=>s.type==="characterData"&&s.target===this.textNode)){const s=this.restore();s&&(n.range=s)}}optimize(e){super.optimize(e);let{parent:n}=this;for(;n;){if(n.domNode.tagName==="A"){this.savedLength=oa.CONTENTS.length,n.isolate(this.offset(n),this.length()).unwrap(),this.savedLength=0;break}n=n.parent}}value(){return""}}var ux={exports:{}},I_;function Wde(){return I_||(I_=1,(function(t){var e=Object.prototype.hasOwnProperty,n="~";function s(){}Object.create&&(s.prototype=Object.create(null),new s().__proto__||(n=!1));function a(d,m,u){this.fn=d,this.context=m,this.once=u||!1}function l(d,m,u,h,p){if(typeof u!="function")throw new TypeError("The listener must be a function");var g=new a(u,h||d,p),v=n?n+m:m;return d._events[v]?d._events[v].fn?d._events[v]=[d._events[v],g]:d._events[v].push(g):(d._events[v]=g,d._eventsCount++),d}function o(d,m){--d._eventsCount===0?d._events=new s:delete d._events[m]}function c(){this._events=new s,this._eventsCount=0}c.prototype.eventNames=function(){var m=[],u,h;if(this._eventsCount===0)return m;for(h in u=this._events)e.call(u,h)&&m.push(n?h.slice(1):h);return Object.getOwnPropertySymbols?m.concat(Object.getOwnPropertySymbols(u)):m},c.prototype.listeners=function(m){var u=n?n+m:m,h=this._events[u];if(!h)return[];if(h.fn)return[h.fn];for(var p=0,g=h.length,v=new Array(g);p<g;p++)v[p]=h[p].fn;return v},c.prototype.listenerCount=function(m){var u=n?n+m:m,h=this._events[u];return h?h.fn?1:h.length:0},c.prototype.emit=function(m,u,h,p,g,v){var x=n?n+m:m;if(!this._events[x])return!1;var y=this._events[x],b=arguments.length,k,w;if(y.fn){switch(y.once&&this.removeListener(m,y.fn,void 0,!0),b){case 1:return y.fn.call(y.context),!0;case 2:return y.fn.call(y.context,u),!0;case 3:return y.fn.call(y.context,u,h),!0;case 4:return y.fn.call(y.context,u,h,p),!0;case 5:return y.fn.call(y.context,u,h,p,g),!0;case 6:return y.fn.call(y.context,u,h,p,g,v),!0}for(w=1,k=new Array(b-1);w<b;w++)k[w-1]=arguments[w];y.fn.apply(y.context,k)}else{var T=y.length,j;for(w=0;w<T;w++)switch(y[w].once&&this.removeListener(m,y[w].fn,void 0,!0),b){case 1:y[w].fn.call(y[w].context);break;case 2:y[w].fn.call(y[w].context,u);break;case 3:y[w].fn.call(y[w].context,u,h);break;case 4:y[w].fn.call(y[w].context,u,h,p);break;default:if(!k)for(j=1,k=new Array(b-1);j<b;j++)k[j-1]=arguments[j];y[w].fn.apply(y[w].context,k)}}return!0},c.prototype.on=function(m,u,h){return l(this,m,u,h,!1)},c.prototype.once=function(m,u,h){return l(this,m,u,h,!0)},c.prototype.removeListener=function(m,u,h,p){var g=n?n+m:m;if(!this._events[g])return this;if(!u)return o(this,g),this;var v=this._events[g];if(v.fn)v.fn===u&&(!p||v.once)&&(!h||v.context===h)&&o(this,g);else{for(var x=0,y=[],b=v.length;x<b;x++)(v[x].fn!==u||p&&!v[x].once||h&&v[x].context!==h)&&y.push(v[x]);y.length?this._events[g]=y.length===1?y[0]:y:o(this,g)}return this},c.prototype.removeAllListeners=function(m){var u;return m?(u=n?n+m:m,this._events[u]&&o(this,u)):(this._events=new s,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=n,c.EventEmitter=c,t.exports=c})(ux)),ux.exports}var Kde=Wde();const Gde=ya(Kde),db=new WeakMap,mb=["error","warn","log","info"];let ub="warn";function BM(t){if(ub&&mb.indexOf(t)<=mb.indexOf(ub)){for(var e=arguments.length,n=new Array(e>1?e-1:0),s=1;s<e;s++)n[s-1]=arguments[s];console[t](...n)}}function qr(t){return mb.reduce((e,n)=>(e[n]=BM.bind(console,n,t),e),{})}qr.level=t=>{ub=t};BM.level=qr.level;const hx=qr("quill:events"),Yde=["selectionchange","mousedown","mouseup","click"];Yde.forEach(t=>{document.addEventListener(t,function(){for(var e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];Array.from(document.querySelectorAll(".ql-container")).forEach(a=>{const l=db.get(a);l&&l.emitter&&l.emitter.handleDOM(...n)})})});class wt extends Gde{static events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_BLOT_MOUNT:"scroll-blot-mount",SCROLL_BLOT_UNMOUNT:"scroll-blot-unmount",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SCROLL_EMBED_UPDATE:"scroll-embed-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change",COMPOSITION_BEFORE_START:"composition-before-start",COMPOSITION_START:"composition-start",COMPOSITION_BEFORE_END:"composition-before-end",COMPOSITION_END:"composition-end"};static sources={API:"api",SILENT:"silent",USER:"user"};constructor(){super(),this.domListeners={},this.on("error",hx.error)}emit(){for(var e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];return hx.log.call(hx,...n),super.emit(...n)}handleDOM(e){for(var n=arguments.length,s=new Array(n>1?n-1:0),a=1;a<n;a++)s[a-1]=arguments[a];(this.domListeners[e.type]||[]).forEach(l=>{let{node:o,handler:c}=l;(e.target===o||o.contains(e.target))&&c(e,...s)})}listenDOM(e,n,s){this.domListeners[e]||(this.domListeners[e]=[]),this.domListeners[e].push({node:n,handler:s})}}const px=qr("quill:selection");class vo{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;this.index=e,this.length=n}}class Qde{constructor(e,n){this.emitter=n,this.scroll=e,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=this.scroll.create("cursor",this),this.savedRange=new vo(0,0),this.lastRange=this.savedRange,this.lastNative=null,this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,()=>{!this.mouseDown&&!this.composing&&setTimeout(this.update.bind(this,wt.sources.USER),1)}),this.emitter.on(wt.events.SCROLL_BEFORE_UPDATE,()=>{if(!this.hasFocus())return;const s=this.getNativeRange();s!=null&&s.start.node!==this.cursor.textNode&&this.emitter.once(wt.events.SCROLL_UPDATE,(a,l)=>{try{this.root.contains(s.start.node)&&this.root.contains(s.end.node)&&this.setNativeRange(s.start.node,s.start.offset,s.end.node,s.end.offset);const o=l.some(c=>c.type==="characterData"||c.type==="childList"||c.type==="attributes"&&c.target===this.root);this.update(o?wt.sources.SILENT:a)}catch{}})}),this.emitter.on(wt.events.SCROLL_OPTIMIZE,(s,a)=>{if(a.range){const{startNode:l,startOffset:o,endNode:c,endOffset:d}=a.range;this.setNativeRange(l,o,c,d),this.update(wt.sources.SILENT)}}),this.update(wt.sources.SILENT)}handleComposition(){this.emitter.on(wt.events.COMPOSITION_BEFORE_START,()=>{this.composing=!0}),this.emitter.on(wt.events.COMPOSITION_END,()=>{if(this.composing=!1,this.cursor.parent){const e=this.cursor.restore();if(!e)return;setTimeout(()=>{this.setNativeRange(e.startNode,e.startOffset,e.endNode,e.endOffset)},1)}})}handleDragging(){this.emitter.listenDOM("mousedown",document.body,()=>{this.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,()=>{this.mouseDown=!1,this.update(wt.sources.USER)})}focus(){this.hasFocus()||(this.root.focus({preventScroll:!0}),this.setRange(this.savedRange))}format(e,n){this.scroll.update();const s=this.getNativeRange();if(!(s==null||!s.native.collapsed||this.scroll.query(e,St.BLOCK))){if(s.start.node!==this.cursor.textNode){const a=this.scroll.find(s.start.node,!1);if(a==null)return;if(a instanceof Oi){const l=a.split(s.start.offset);a.parent.insertBefore(this.cursor,l)}else a.insertBefore(this.cursor,s.start.node);this.cursor.attach()}this.cursor.format(e,n),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}getBounds(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;const s=this.scroll.length();e=Math.min(e,s-1),n=Math.min(e+n,s-1)-e;let a,[l,o]=this.scroll.leaf(e);if(l==null)return null;if(n>0&&o===l.length()){const[u]=this.scroll.leaf(e+1);if(u){const[h]=this.scroll.line(e),[p]=this.scroll.line(e+1);h===p&&(l=u,o=0)}}[a,o]=l.position(o,!0);const c=document.createRange();if(n>0)return c.setStart(a,o),[l,o]=this.scroll.leaf(e+n),l==null?null:([a,o]=l.position(o,!0),c.setEnd(a,o),c.getBoundingClientRect());let d="left",m;if(a instanceof Text){if(!a.data.length)return null;o<a.data.length?(c.setStart(a,o),c.setEnd(a,o+1)):(c.setStart(a,o-1),c.setEnd(a,o),d="right"),m=c.getBoundingClientRect()}else{if(!(l.domNode instanceof Element))return null;m=l.domNode.getBoundingClientRect(),o>0&&(d="right")}return{bottom:m.top+m.height,height:m.height,left:m[d],right:m[d],top:m.top,width:0}}getNativeRange(){const e=document.getSelection();if(e==null||e.rangeCount<=0)return null;const n=e.getRangeAt(0);if(n==null)return null;const s=this.normalizeNative(n);return px.info("getNativeRange",s),s}getRange(){const e=this.scroll.domNode;if("isConnected"in e&&!e.isConnected)return[null,null];const n=this.getNativeRange();return n==null?[null,null]:[this.normalizedToRange(n),n]}hasFocus(){return document.activeElement===this.root||document.activeElement!=null&&gx(this.root,document.activeElement)}normalizedToRange(e){const n=[[e.start.node,e.start.offset]];e.native.collapsed||n.push([e.end.node,e.end.offset]);const s=n.map(o=>{const[c,d]=o,m=this.scroll.find(c,!0),u=m.offset(this.scroll);return d===0?u:m instanceof Oi?u+m.index(c,d):u+m.length()}),a=Math.min(Math.max(...s),this.scroll.length()-1),l=Math.min(a,...s);return new vo(l,a-l)}normalizeNative(e){if(!gx(this.root,e.startContainer)||!e.collapsed&&!gx(this.root,e.endContainer))return null;const n={start:{node:e.startContainer,offset:e.startOffset},end:{node:e.endContainer,offset:e.endOffset},native:e};return[n.start,n.end].forEach(s=>{let{node:a,offset:l}=s;for(;!(a instanceof Text)&&a.childNodes.length>0;)if(a.childNodes.length>l)a=a.childNodes[l],l=0;else if(a.childNodes.length===l)a=a.lastChild,a instanceof Text?l=a.data.length:a.childNodes.length>0?l=a.childNodes.length:l=a.childNodes.length+1;else break;s.node=a,s.offset=l}),n}rangeToNative(e){const n=this.scroll.length(),s=(a,l)=>{a=Math.min(n-1,a);const[o,c]=this.scroll.leaf(a);return o?o.position(c,l):[null,-1]};return[...s(e.index,!1),...s(e.index+e.length,!0)]}setNativeRange(e,n){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:n,l=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(px.info("setNativeRange",e,n,s,a),e!=null&&(this.root.parentNode==null||e.parentNode==null||s.parentNode==null))return;const o=document.getSelection();if(o!=null)if(e!=null){this.hasFocus()||this.root.focus({preventScroll:!0});const{native:c}=this.getNativeRange()||{};if(c==null||l||e!==c.startContainer||n!==c.startOffset||s!==c.endContainer||a!==c.endOffset){e instanceof Element&&e.tagName==="BR"&&(n=Array.from(e.parentNode.childNodes).indexOf(e),e=e.parentNode),s instanceof Element&&s.tagName==="BR"&&(a=Array.from(s.parentNode.childNodes).indexOf(s),s=s.parentNode);const d=document.createRange();d.setStart(e,n),d.setEnd(s,a),o.removeAllRanges(),o.addRange(d)}}else o.removeAllRanges(),this.root.blur()}setRange(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:wt.sources.API;if(typeof n=="string"&&(s=n,n=!1),px.info("setRange",e),e!=null){const a=this.rangeToNative(e);this.setNativeRange(...a,n)}else this.setNativeRange(null);this.update(s)}update(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:wt.sources.USER;const n=this.lastRange,[s,a]=this.getRange();if(this.lastRange=s,this.lastNative=a,this.lastRange!=null&&(this.savedRange=this.lastRange),!Gr(n,this.lastRange)){if(!this.composing&&a!=null&&a.native.collapsed&&a.start.node!==this.cursor.textNode){const o=this.cursor.restore();o&&this.setNativeRange(o.startNode,o.startOffset,o.endNode,o.endOffset)}const l=[wt.events.SELECTION_CHANGE,jc(this.lastRange),jc(n),e];this.emitter.emit(wt.events.EDITOR_CHANGE,...l),e!==wt.sources.SILENT&&this.emitter.emit(...l)}}}function gx(t,e){try{e.parentNode}catch{return!1}return t.contains(e)}const Zde=/^[ -~]*$/;class Xde{constructor(e){this.scroll=e,this.delta=this.getDelta()}applyDelta(e){this.scroll.update();let n=this.scroll.length();this.scroll.batchStart();const s=O_(e),a=new Ct;return eme(s.ops.slice()).reduce((o,c)=>{const d=Gs.Op.length(c);let m=c.attributes||{},u=!1,h=!1;if(c.insert!=null){if(a.retain(d),typeof c.insert=="string"){const v=c.insert;h=!v.endsWith(`
`)&&(n<=o||!!this.scroll.descendant(zs,o)[0]),this.scroll.insertAt(o,v);const[x,y]=this.scroll.line(o);let b=ul({},Bs(x));if(x instanceof Ni){const[k]=x.descendant(Oi,y);k&&(b=ul(b,Bs(k)))}m=Gs.AttributeMap.diff(b,m)||{}}else if(typeof c.insert=="object"){const v=Object.keys(c.insert)[0];if(v==null)return o;const x=this.scroll.query(v,St.INLINE)!=null;if(x)(n<=o||this.scroll.descendant(zs,o)[0])&&(h=!0);else if(o>0){const[y,b]=this.scroll.descendant(Oi,o-1);y instanceof xa?y.value()[b]!==`
`&&(u=!0):y instanceof Is&&y.statics.scope===St.INLINE_BLOT&&(u=!0)}if(this.scroll.insertAt(o,v,c.insert[v]),x){const[y]=this.scroll.descendant(Oi,o);if(y){const b=ul({},Bs(y));m=Gs.AttributeMap.diff(b,m)||{}}}}n+=d}else if(a.push(c),c.retain!==null&&typeof c.retain=="object"){const v=Object.keys(c.retain)[0];if(v==null)return o;this.scroll.updateEmbedAt(o,v,c.retain[v])}Object.keys(m).forEach(v=>{this.scroll.formatAt(o,d,v,m[v])});const p=u?1:0,g=h?1:0;return n+=p+g,a.retain(p),a.delete(g),o+d+p+g},0),a.reduce((o,c)=>typeof c.delete=="number"?(this.scroll.deleteAt(o,c.delete),o):o+Gs.Op.length(c),0),this.scroll.batchEnd(),this.scroll.optimize(),this.update(s)}deleteText(e,n){return this.scroll.deleteAt(e,n),this.update(new Ct().retain(e).delete(n))}formatLine(e,n){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.scroll.update(),Object.keys(s).forEach(l=>{this.scroll.lines(e,Math.max(n,1)).forEach(o=>{o.format(l,s[l])})}),this.scroll.optimize();const a=new Ct().retain(e).retain(n,jc(s));return this.update(a)}formatText(e,n){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.keys(s).forEach(l=>{this.scroll.formatAt(e,n,l,s[l])});const a=new Ct().retain(e).retain(n,jc(s));return this.update(a)}getContents(e,n){return this.delta.slice(e,e+n)}getDelta(){return this.scroll.lines().reduce((e,n)=>e.concat(n.delta()),new Ct)}getFormat(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=[],a=[];n===0?this.scroll.path(e).forEach(c=>{const[d]=c;d instanceof Ni?s.push(d):d instanceof Oi&&a.push(d)}):(s=this.scroll.lines(e,n),a=this.scroll.descendants(Oi,e,n));const[l,o]=[s,a].map(c=>{const d=c.shift();if(d==null)return{};let m=Bs(d);for(;Object.keys(m).length>0;){const u=c.shift();if(u==null)return m;m=Jde(Bs(u),m)}return m});return{...l,...o}}getHTML(e,n){const[s,a]=this.scroll.line(e);if(s){const l=s.length();return s.length()>=a+n&&!(a===0&&n===l)?$m(s,a,n,!0):$m(this.scroll,e,n,!0)}return""}getText(e,n){return this.getContents(e,n).filter(s=>typeof s.insert=="string").map(s=>s.insert).join("")}insertContents(e,n){const s=O_(n),a=new Ct().retain(e).concat(s);return this.scroll.insertContents(e,s),this.update(a)}insertEmbed(e,n,s){return this.scroll.insertAt(e,n,s),this.update(new Ct().retain(e).insert({[n]:s}))}insertText(e,n){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return n=n.replace(/\r\n/g,`
`).replace(/\r/g,`
`),this.scroll.insertAt(e,n),Object.keys(s).forEach(a=>{this.scroll.formatAt(e,n.length,a,s[a])}),this.update(new Ct().retain(e).insert(n,jc(s)))}isBlank(){if(this.scroll.children.length===0)return!0;if(this.scroll.children.length>1)return!1;const e=this.scroll.children.head;if(e?.statics.blotName!==Ni.blotName)return!1;const n=e;return n.children.length>1?!1:n.children.head instanceof ka}removeFormat(e,n){const s=this.getText(e,n),[a,l]=this.scroll.line(e+n);let o=0,c=new Ct;a!=null&&(o=a.length()-l,c=a.delta().slice(l,l+o-1).insert(`
`));const m=this.getContents(e,n+o).diff(new Ct().insert(s).concat(c)),u=new Ct().retain(e).concat(m);return this.applyDelta(u)}update(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;const a=this.delta;if(n.length===1&&n[0].type==="characterData"&&n[0].target.data.match(Zde)&&this.scroll.find(n[0].target)){const l=this.scroll.find(n[0].target),o=Bs(l),c=l.offset(this.scroll),d=n[0].oldValue.replace(oa.CONTENTS,""),m=new Ct().insert(d),u=new Ct().insert(l.value()),h=s&&{oldRange:F_(s.oldRange,-c),newRange:F_(s.newRange,-c)};e=new Ct().retain(c).concat(m.diff(u,h)).reduce((g,v)=>v.insert?g.insert(v.insert,o):g.push(v),new Ct),this.delta=a.compose(e)}else this.delta=this.getDelta(),(!e||!Gr(a.compose(e),this.delta))&&(e=a.diff(this.delta,s));return e}}function sc(t,e,n){if(t.length===0){const[g]=fx(n.pop());return e<=0?`</li></${g}>`:`</li></${g}>${sc([],e-1,n)}`}const[{child:s,offset:a,length:l,indent:o,type:c},...d]=t,[m,u]=fx(c);if(o>e)return n.push(c),o===e+1?`<${m}><li${u}>${$m(s,a,l)}${sc(d,o,n)}`:`<${m}><li>${sc(t,e+1,n)}`;const h=n[n.length-1];if(o===e&&c===h)return`</li><li${u}>${$m(s,a,l)}${sc(d,o,n)}`;const[p]=fx(n.pop());return`</li></${p}>${sc(t,e-1,n)}`}function $m(t,e,n){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if("html"in t&&typeof t.html=="function")return t.html(e,n);if(t instanceof xa)return bf(t.value().slice(e,e+n)).replaceAll(" ","&nbsp;");if(t instanceof pa){if(t.statics.blotName==="list-container"){const m=[];return t.children.forEachAt(e,n,(u,h,p)=>{const g="formats"in u&&typeof u.formats=="function"?u.formats():{};m.push({child:u,offset:h,length:p,indent:g.indent||0,type:g.list})}),sc(m,-1,[])}const a=[];if(t.children.forEachAt(e,n,(m,u,h)=>{a.push($m(m,u,h))}),s||t.statics.blotName==="list")return a.join("");const{outerHTML:l,innerHTML:o}=t.domNode,[c,d]=l.split(`>${o}<`);return c==="<table"?`<table style="border: 1px solid #000;">${a.join("")}<${d}`:`${c}>${a.join("")}<${d}`}return t.domNode instanceof Element?t.domNode.outerHTML:""}function Jde(t,e){return Object.keys(e).reduce((n,s)=>{if(t[s]==null)return n;const a=e[s];return a===t[s]?n[s]=a:Array.isArray(a)?a.indexOf(t[s])<0?n[s]=a.concat([t[s]]):n[s]=a:n[s]=[a,t[s]],n},{})}function fx(t){const e=t==="ordered"?"ol":"ul";switch(t){case"checked":return[e,' data-list="checked"'];case"unchecked":return[e,' data-list="unchecked"'];default:return[e,""]}}function O_(t){return t.reduce((e,n)=>{if(typeof n.insert=="string"){const s=n.insert.replace(/\r\n/g,`
`).replace(/\r/g,`
`);return e.insert(s,n.attributes)}return e.push(n)},new Ct)}function F_(t,e){let{index:n,length:s}=t;return new vo(n+e,s)}function eme(t){const e=[];return t.forEach(n=>{typeof n.insert=="string"?n.insert.split(`
`).forEach((a,l)=>{l&&e.push({insert:`
`,attributes:n.attributes}),a&&e.push({insert:a,attributes:n.attributes})}):e.push(n)}),e}class tr{static DEFAULTS={};constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.quill=e,this.options=n}}const Nh="\uFEFF";class sj extends Is{constructor(e,n){super(e,n),this.contentNode=document.createElement("span"),this.contentNode.setAttribute("contenteditable","false"),Array.from(this.domNode.childNodes).forEach(s=>{this.contentNode.appendChild(s)}),this.leftGuard=document.createTextNode(Nh),this.rightGuard=document.createTextNode(Nh),this.domNode.appendChild(this.leftGuard),this.domNode.appendChild(this.contentNode),this.domNode.appendChild(this.rightGuard)}index(e,n){return e===this.leftGuard?0:e===this.rightGuard?1:super.index(e,n)}restore(e){let n=null,s;const a=e.data.split(Nh).join("");if(e===this.leftGuard)if(this.prev instanceof xa){const l=this.prev.length();this.prev.insertAt(l,a),n={startNode:this.prev.domNode,startOffset:l+a.length}}else s=document.createTextNode(a),this.parent.insertBefore(this.scroll.create(s),this),n={startNode:s,startOffset:a.length};else e===this.rightGuard&&(this.next instanceof xa?(this.next.insertAt(0,a),n={startNode:this.next.domNode,startOffset:a.length}):(s=document.createTextNode(a),this.parent.insertBefore(this.scroll.create(s),this.next),n={startNode:s,startOffset:a.length}));return e.data=Nh,n}update(e,n){e.forEach(s=>{if(s.type==="characterData"&&(s.target===this.leftGuard||s.target===this.rightGuard)){const a=this.restore(s.target);a&&(n.range=a)}})}}class tme{isComposing=!1;constructor(e,n){this.scroll=e,this.emitter=n,this.setupListeners()}setupListeners(){this.scroll.domNode.addEventListener("compositionstart",e=>{this.isComposing||this.handleCompositionStart(e)}),this.scroll.domNode.addEventListener("compositionend",e=>{this.isComposing&&queueMicrotask(()=>{this.handleCompositionEnd(e)})})}handleCompositionStart(e){const n=e.target instanceof Node?this.scroll.find(e.target,!0):null;n&&!(n instanceof sj)&&(this.emitter.emit(wt.events.COMPOSITION_BEFORE_START,e),this.scroll.batchStart(),this.emitter.emit(wt.events.COMPOSITION_START,e),this.isComposing=!0)}handleCompositionEnd(e){this.emitter.emit(wt.events.COMPOSITION_BEFORE_END,e),this.scroll.batchEnd(),this.emitter.emit(wt.events.COMPOSITION_END,e),this.isComposing=!1}}class dd{static DEFAULTS={modules:{}};static themes={default:dd};modules={};constructor(e,n){this.quill=e,this.options=n}init(){Object.keys(this.options.modules).forEach(e=>{this.modules[e]==null&&this.addModule(e)})}addModule(e){const n=this.quill.constructor.import(`modules/${e}`);return this.modules[e]=new n(this.quill,this.options.modules[e]||{}),this.modules[e]}}const nme=t=>t.parentElement||t.getRootNode().host||null,ime=t=>{const e=t.getBoundingClientRect(),n="offsetWidth"in t&&Math.abs(e.width)/t.offsetWidth||1,s="offsetHeight"in t&&Math.abs(e.height)/t.offsetHeight||1;return{top:e.top,right:e.left+t.clientWidth*n,bottom:e.top+t.clientHeight*s,left:e.left}},Ch=t=>{const e=parseInt(t,10);return Number.isNaN(e)?0:e},L_=(t,e,n,s,a,l)=>t<n&&e>s?0:t<n?-(n-t+a):e>s?e-t>s-n?t+a-n:e-s+l:0,sme=(t,e)=>{const n=t.ownerDocument;let s=e,a=t;for(;a;){const l=a===n.body,o=l?{top:0,right:window.visualViewport?.width??n.documentElement.clientWidth,bottom:window.visualViewport?.height??n.documentElement.clientHeight,left:0}:ime(a),c=getComputedStyle(a),d=L_(s.left,s.right,o.left,o.right,Ch(c.scrollPaddingLeft),Ch(c.scrollPaddingRight)),m=L_(s.top,s.bottom,o.top,o.bottom,Ch(c.scrollPaddingTop),Ch(c.scrollPaddingBottom));if(d||m)if(l)n.defaultView?.scrollBy(d,m);else{const{scrollLeft:u,scrollTop:h}=a;m&&(a.scrollTop+=m),d&&(a.scrollLeft+=d);const p=a.scrollLeft-u,g=a.scrollTop-h;s={left:s.left-p,top:s.top-g,right:s.right-p,bottom:s.bottom-g}}a=l||c.position==="fixed"?null:nme(a)}},ame=100,rme=["block","break","cursor","inline","scroll","text"],lme=(t,e,n)=>{const s=new Vc;return rme.forEach(a=>{const l=e.query(a);l&&s.register(l)}),t.forEach(a=>{let l=e.query(a);l||n.error(`Cannot register "${a}" specified in "formats" config. Are you sure it was registered?`);let o=0;for(;l;)if(s.register(l),l="blotName"in l?l.requiredContainer??null:null,o+=1,o>ame){n.error(`Cycle detected in registering blot requiredContainer: "${a}"`);break}}),s},Cc=qr("quill"),_h=new Vc;pa.uiClass="ql-ui";class Ge{static DEFAULTS={bounds:null,modules:{clipboard:!0,keyboard:!0,history:!0,uploader:!0},placeholder:"",readOnly:!1,registry:_h,theme:"default"};static events=wt.events;static sources=wt.sources;static version="2.0.3";static imports={delta:Ct,parchment:Bde,"core/module":tr,"core/theme":dd};static debug(e){e===!0&&(e="log"),qr.level(e)}static find(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return db.get(e)||_h.find(e,n)}static import(e){return this.imports[e]==null&&Cc.error(`Cannot import ${e}. Are you sure it was registered?`),this.imports[e]}static register(){if(typeof(arguments.length<=0?void 0:arguments[0])!="string"){const e=arguments.length<=0?void 0:arguments[0],n=!!(!(arguments.length<=1)&&arguments[1]),s="attrName"in e?e.attrName:e.blotName;typeof s=="string"?this.register(`formats/${s}`,e,n):Object.keys(e).forEach(a=>{this.register(a,e[a],n)})}else{const e=arguments.length<=0?void 0:arguments[0],n=arguments.length<=1?void 0:arguments[1],s=!!(!(arguments.length<=2)&&arguments[2]);this.imports[e]!=null&&!s&&Cc.warn(`Overwriting ${e} with`,n),this.imports[e]=n,(e.startsWith("blots/")||e.startsWith("formats/"))&&n&&typeof n!="boolean"&&n.blotName!=="abstract"&&_h.register(n),typeof n.register=="function"&&n.register(_h)}}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.options=ome(e,n),this.container=this.options.container,this.container==null){Cc.error("Invalid Quill container",e);return}this.options.debug&&Ge.debug(this.options.debug);const s=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",db.set(this.container,this),this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.emitter=new wt;const a=ij.blotName,l=this.options.registry.query(a);if(!l||!("blotName"in l))throw new Error(`Cannot initialize Quill without "${a}" blot`);if(this.scroll=new l(this.options.registry,this.root,{emitter:this.emitter}),this.editor=new Xde(this.scroll),this.selection=new Qde(this.scroll,this.emitter),this.composition=new tme(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.uploader=this.theme.addModule("uploader"),this.theme.addModule("input"),this.theme.addModule("uiNode"),this.theme.init(),this.emitter.on(wt.events.EDITOR_CHANGE,o=>{o===wt.events.TEXT_CHANGE&&this.root.classList.toggle("ql-blank",this.editor.isBlank())}),this.emitter.on(wt.events.SCROLL_UPDATE,(o,c)=>{const d=this.selection.lastRange,[m]=this.selection.getRange(),u=d&&m?{oldRange:d,newRange:m}:void 0;ra.call(this,()=>this.editor.update(null,c,u),o)}),this.emitter.on(wt.events.SCROLL_EMBED_UPDATE,(o,c)=>{const d=this.selection.lastRange,[m]=this.selection.getRange(),u=d&&m?{oldRange:d,newRange:m}:void 0;ra.call(this,()=>{const h=new Ct().retain(o.offset(this)).retain({[o.statics.blotName]:c});return this.editor.update(h,[],u)},Ge.sources.USER)}),s){const o=this.clipboard.convert({html:`${s}<p><br></p>`,text:`
`});this.setContents(o)}this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable(),this.allowReadOnlyEdits=!1}addContainer(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(typeof e=="string"){const s=e;e=document.createElement("div"),e.classList.add(s)}return this.container.insertBefore(e,n),e}blur(){this.selection.setRange(null)}deleteText(e,n,s){return[e,n,,s]=lr(e,n,s),ra.call(this,()=>this.editor.deleteText(e,n),s,e,-1*n)}disable(){this.enable(!1)}editReadOnly(e){this.allowReadOnlyEdits=!0;const n=e();return this.allowReadOnlyEdits=!1,n}enable(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.scroll.enable(e),this.container.classList.toggle("ql-disabled",!e)}focus(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.selection.focus(),e.preventScroll||this.scrollSelectionIntoView()}format(e,n){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:wt.sources.API;return ra.call(this,()=>{const a=this.getSelection(!0);let l=new Ct;if(a==null)return l;if(this.scroll.query(e,St.BLOCK))l=this.editor.formatLine(a.index,a.length,{[e]:n});else{if(a.length===0)return this.selection.format(e,n),l;l=this.editor.formatText(a.index,a.length,{[e]:n})}return this.setSelection(a,wt.sources.SILENT),l},s)}formatLine(e,n,s,a,l){let o;return[e,n,o,l]=lr(e,n,s,a,l),ra.call(this,()=>this.editor.formatLine(e,n,o),l,e,0)}formatText(e,n,s,a,l){let o;return[e,n,o,l]=lr(e,n,s,a,l),ra.call(this,()=>this.editor.formatText(e,n,o),l,e,0)}getBounds(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=null;if(typeof e=="number"?s=this.selection.getBounds(e,n):s=this.selection.getBounds(e.index,e.length),!s)return null;const a=this.container.getBoundingClientRect();return{bottom:s.bottom-a.top,height:s.height,left:s.left-a.left,right:s.right-a.left,top:s.top-a.top,width:s.width}}getContents(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-e;return[e,n]=lr(e,n),this.editor.getContents(e,n)}getFormat(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getSelection(!0),n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return typeof e=="number"?this.editor.getFormat(e,n):this.editor.getFormat(e.index,e.length)}getIndex(e){return e.offset(this.scroll)}getLength(){return this.scroll.length()}getLeaf(e){return this.scroll.leaf(e)}getLine(e){return this.scroll.line(e)}getLines(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;return typeof e!="number"?this.scroll.lines(e.index,e.length):this.scroll.lines(e,n)}getModule(e){return this.theme.modules[e]}getSelection(){return(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1)&&this.focus(),this.update(),this.selection.getRange()[0]}getSemanticHTML(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,n=arguments.length>1?arguments[1]:void 0;return typeof e=="number"&&(n=n??this.getLength()-e),[e,n]=lr(e,n),this.editor.getHTML(e,n)}getText(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,n=arguments.length>1?arguments[1]:void 0;return typeof e=="number"&&(n=n??this.getLength()-e),[e,n]=lr(e,n),this.editor.getText(e,n)}hasFocus(){return this.selection.hasFocus()}insertEmbed(e,n,s){let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:Ge.sources.API;return ra.call(this,()=>this.editor.insertEmbed(e,n,s),a,e)}insertText(e,n,s,a,l){let o;return[e,,o,l]=lr(e,0,s,a,l),ra.call(this,()=>this.editor.insertText(e,n,o),l,e,n.length)}isEnabled(){return this.scroll.isEnabled()}off(){return this.emitter.off(...arguments)}on(){return this.emitter.on(...arguments)}once(){return this.emitter.once(...arguments)}removeFormat(e,n,s){return[e,n,,s]=lr(e,n,s),ra.call(this,()=>this.editor.removeFormat(e,n),s,e)}scrollRectIntoView(e){sme(this.root,e)}scrollIntoView(){console.warn("Quill#scrollIntoView() has been deprecated and will be removed in the near future. Please use Quill#scrollSelectionIntoView() instead."),this.scrollSelectionIntoView()}scrollSelectionIntoView(){const e=this.selection.lastRange,n=e&&this.selection.getBounds(e.index,e.length);n&&this.scrollRectIntoView(n)}setContents(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:wt.sources.API;return ra.call(this,()=>{e=new Ct(e);const s=this.getLength(),a=this.editor.deleteText(0,s),l=this.editor.insertContents(0,e),o=this.editor.deleteText(this.getLength()-1,1);return a.compose(l).compose(o)},n)}setSelection(e,n,s){e==null?this.selection.setRange(null,n||Ge.sources.API):([e,n,,s]=lr(e,n,s),this.selection.setRange(new vo(Math.max(0,e),n),s),s!==wt.sources.SILENT&&this.scrollSelectionIntoView())}setText(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:wt.sources.API;const s=new Ct().insert(e);return this.setContents(s,n)}update(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:wt.sources.USER;const n=this.scroll.update(e);return this.selection.update(e),n}updateContents(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:wt.sources.API;return ra.call(this,()=>(e=new Ct(e),this.editor.applyDelta(e)),n,!0)}}function $_(t){return typeof t=="string"?document.querySelector(t):t}function vx(t){return Object.entries(t??{}).reduce((e,n)=>{let[s,a]=n;return{...e,[s]:a===!0?{}:a}},{})}function B_(t){return Object.fromEntries(Object.entries(t).filter(e=>e[1]!==void 0))}function ome(t,e){const n=$_(t);if(!n)throw new Error("Invalid Quill container");const a=!e.theme||e.theme===Ge.DEFAULTS.theme?dd:Ge.import(`themes/${e.theme}`);if(!a)throw new Error(`Invalid theme ${e.theme}. Did you register it?`);const{modules:l,...o}=Ge.DEFAULTS,{modules:c,...d}=a.DEFAULTS;let m=vx(e.modules);m!=null&&m.toolbar&&m.toolbar.constructor!==Object&&(m={...m,toolbar:{container:m.toolbar}});const u=ul({},vx(l),vx(c),m),h={...o,...B_(d),...B_(e)};let p=e.registry;return p?e.formats&&Cc.warn('Ignoring "formats" option because "registry" is specified'):p=e.formats?lme(e.formats,h.registry,Cc):h.registry,{...h,registry:p,container:n,theme:a,modules:Object.entries(u).reduce((g,v)=>{let[x,y]=v;if(!y)return g;const b=Ge.import(`modules/${x}`);return b==null?(Cc.error(`Cannot load ${x} module. Are you sure you registered it?`),g):{...g,[x]:ul({},b.DEFAULTS||{},y)}},{}),bounds:$_(h.bounds)}}function ra(t,e,n,s){if(!this.isEnabled()&&e===wt.sources.USER&&!this.allowReadOnlyEdits)return new Ct;let a=n==null?null:this.getSelection();const l=this.editor.delta,o=t();if(a!=null&&(n===!0&&(n=a.index),s==null?a=q_(a,o,e):s!==0&&(a=q_(a,n,s,e)),this.setSelection(a,wt.sources.SILENT)),o.length()>0){const c=[wt.events.TEXT_CHANGE,o,l,e];this.emitter.emit(wt.events.EDITOR_CHANGE,...c),e!==wt.sources.SILENT&&this.emitter.emit(...c)}return o}function lr(t,e,n,s,a){let l={};return typeof t.index=="number"&&typeof t.length=="number"?typeof e!="number"?(a=s,s=n,n=e,e=t.length,t=t.index):(e=t.length,t=t.index):typeof e!="number"&&(a=s,s=n,n=e,e=0),typeof n=="object"?(l=n,a=s):typeof n=="string"&&(s!=null?l[n]=s:a=n),a=a||wt.sources.API,[t,e,l,a]}function q_(t,e,n,s){const a=typeof n=="number"?n:0;if(t==null)return null;let l,o;return e&&typeof e.transformPosition=="function"?[l,o]=[t.index,t.index+t.length].map(c=>e.transformPosition(c,s!==wt.sources.USER)):[l,o]=[t.index,t.index+t.length].map(c=>c<e||c===e&&s===wt.sources.USER?c:a>=0?c+a:Math.max(e,c+a)),new vo(l,o-l)}class Fo extends yf{}function H_(t){return t instanceof Ni||t instanceof zs}function z_(t){return typeof t.updateContent=="function"}class cme extends ij{static blotName="scroll";static className="ql-editor";static tagName="DIV";static defaultChild=Ni;static allowedChildren=[Ni,zs,Fo];constructor(e,n,s){let{emitter:a}=s;super(e,n),this.emitter=a,this.batch=!1,this.optimize(),this.enable(),this.domNode.addEventListener("dragstart",l=>this.handleDragStart(l))}batchStart(){Array.isArray(this.batch)||(this.batch=[])}batchEnd(){if(!this.batch)return;const e=this.batch;this.batch=!1,this.update(e)}emitMount(e){this.emitter.emit(wt.events.SCROLL_BLOT_MOUNT,e)}emitUnmount(e){this.emitter.emit(wt.events.SCROLL_BLOT_UNMOUNT,e)}emitEmbedUpdate(e,n){this.emitter.emit(wt.events.SCROLL_EMBED_UPDATE,e,n)}deleteAt(e,n){const[s,a]=this.line(e),[l]=this.line(e+n);if(super.deleteAt(e,n),l!=null&&s!==l&&a>0){if(s instanceof zs||l instanceof zs){this.optimize();return}const o=l.children.head instanceof ka?null:l.children.head;s.moveChildren(l,o),s.remove()}this.optimize()}enable(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.domNode.setAttribute("contenteditable",e?"true":"false")}formatAt(e,n,s,a){super.formatAt(e,n,s,a),this.optimize()}insertAt(e,n,s){if(e>=this.length())if(s==null||this.scroll.query(n,St.BLOCK)==null){const a=this.scroll.create(this.statics.defaultChild.blotName);this.appendChild(a),s==null&&n.endsWith(`
`)?a.insertAt(0,n.slice(0,-1),s):a.insertAt(0,n,s)}else{const a=this.scroll.create(n,s);this.appendChild(a)}else super.insertAt(e,n,s);this.optimize()}insertBefore(e,n){if(e.statics.scope===St.INLINE_BLOT){const s=this.scroll.create(this.statics.defaultChild.blotName);s.appendChild(e),super.insertBefore(s,n)}else super.insertBefore(e,n)}insertContents(e,n){const s=this.deltaToRenderBlocks(n.concat(new Ct().insert(`
`))),a=s.pop();if(a==null)return;this.batchStart();const l=s.shift();if(l){const d=l.type==="block"&&(l.delta.length()===0||!this.descendant(zs,e)[0]&&e<this.length()),m=l.type==="block"?l.delta:new Ct().insert({[l.key]:l.value});xx(this,e,m);const u=l.type==="block"?1:0,h=e+m.length()+u;d&&this.insertAt(h-1,`
`);const p=Bs(this.line(e)[0]),g=Gs.AttributeMap.diff(p,l.attributes)||{};Object.keys(g).forEach(v=>{this.formatAt(h-1,1,v,g[v])}),e=h}let[o,c]=this.children.find(e);if(s.length&&(o&&(o=o.split(c),c=0),s.forEach(d=>{if(d.type==="block"){const m=this.createBlock(d.attributes,o||void 0);xx(m,0,d.delta)}else{const m=this.create(d.key,d.value);this.insertBefore(m,o||void 0),Object.keys(d.attributes).forEach(u=>{m.format(u,d.attributes[u])})}})),a.type==="block"&&a.delta.length()){const d=o?o.offset(o.scroll)+c:this.length();xx(this,d,a.delta)}this.batchEnd(),this.optimize()}isEnabled(){return this.domNode.getAttribute("contenteditable")==="true"}leaf(e){const n=this.path(e).pop();if(!n)return[null,-1];const[s,a]=n;return s instanceof Oi?[s,a]:[null,-1]}line(e){return e===this.length()?this.line(e-1):this.descendant(H_,e)}lines(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;const s=(a,l,o)=>{let c=[],d=o;return a.children.forEachAt(l,o,(m,u,h)=>{H_(m)?c.push(m):m instanceof yf&&(c=c.concat(s(m,u,d))),d-=h}),c};return s(this,e,n)}optimize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.batch||(super.optimize(e,n),e.length>0&&this.emitter.emit(wt.events.SCROLL_OPTIMIZE,e,n))}path(e){return super.path(e).slice(1)}remove(){}update(e){if(this.batch){Array.isArray(e)&&(this.batch=this.batch.concat(e));return}let n=wt.sources.USER;typeof e=="string"&&(n=e),Array.isArray(e)||(e=this.observer.takeRecords()),e=e.filter(s=>{let{target:a}=s;const l=this.find(a,!0);return l&&!z_(l)}),e.length>0&&this.emitter.emit(wt.events.SCROLL_BEFORE_UPDATE,n,e),super.update(e.concat([])),e.length>0&&this.emitter.emit(wt.events.SCROLL_UPDATE,n,e)}updateEmbedAt(e,n,s){const[a]=this.descendant(l=>l instanceof zs,e);a&&a.statics.blotName===n&&z_(a)&&a.updateContent(s)}handleDragStart(e){e.preventDefault()}deltaToRenderBlocks(e){const n=[];let s=new Ct;return e.forEach(a=>{const l=a?.insert;if(l)if(typeof l=="string"){const o=l.split(`
`);o.slice(0,-1).forEach(d=>{s.insert(d,a.attributes),n.push({type:"block",delta:s,attributes:a.attributes??{}}),s=new Ct});const c=o[o.length-1];c&&s.insert(c,a.attributes)}else{const o=Object.keys(l)[0];if(!o)return;this.query(o,St.INLINE)?s.push(a):(s.length()&&n.push({type:"block",delta:s,attributes:{}}),s=new Ct,n.push({type:"blockEmbed",key:o,value:l[o],attributes:a.attributes??{}}))}}),s.length()&&n.push({type:"block",delta:s,attributes:{}}),n}createBlock(e,n){let s;const a={};Object.entries(e).forEach(c=>{let[d,m]=c;this.query(d,St.BLOCK&St.BLOT)!=null?s=d:a[d]=m});const l=this.create(s||this.statics.defaultChild.blotName,s?e[s]:void 0);this.insertBefore(l,n||void 0);const o=l.length();return Object.entries(a).forEach(c=>{let[d,m]=c;l.formatAt(0,o,d,m)}),l}}function xx(t,e,n){n.reduce((s,a)=>{const l=Gs.Op.length(a);let o=a.attributes||{};if(a.insert!=null){if(typeof a.insert=="string"){const c=a.insert;t.insertAt(s,c);const[d]=t.descendant(Oi,s),m=Bs(d);o=Gs.AttributeMap.diff(m,o)||{}}else if(typeof a.insert=="object"){const c=Object.keys(a.insert)[0];if(c==null)return s;if(t.insertAt(s,c,a.insert[c]),t.scroll.query(c,St.INLINE)!=null){const[m]=t.descendant(Oi,s),u=Bs(m);o=Gs.AttributeMap.diff(u,o)||{}}}}return Object.keys(o).forEach(c=>{t.formatAt(s,l,c,o[c])}),s+l},e)}const aj={scope:St.BLOCK,whitelist:["right","center","justify"]},dme=new Ka("align","align",aj),qM=new ba("align","ql-align",aj),HM=new El("align","text-align",aj);class zM extends El{value(e){let n=super.value(e);return n.startsWith("rgb(")?(n=n.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),`#${n.split(",").map(a=>`00${parseInt(a,10).toString(16)}`.slice(-2)).join("")}`):n}}const mme=new ba("color","ql-color",{scope:St.INLINE}),rj=new zM("color","color",{scope:St.INLINE}),ume=new ba("background","ql-bg",{scope:St.INLINE}),lj=new zM("background","background-color",{scope:St.INLINE});class Lo extends Fo{static create(e){const n=super.create(e);return n.setAttribute("spellcheck","false"),n}code(e,n){return this.children.map(s=>s.length()<=1?"":s.domNode.innerText).join(`
`).slice(e,e+n)}html(e,n){return`<pre>
${bf(this.code(e,n))}
</pre>`}}class Gi extends Ni{static TAB="  ";static register(){Ge.register(Lo)}}class oj extends zi{}oj.blotName="code";oj.tagName="CODE";Gi.blotName="code-block";Gi.className="ql-code-block";Gi.tagName="DIV";Lo.blotName="code-block-container";Lo.className="ql-code-block-container";Lo.tagName="DIV";Lo.allowedChildren=[Gi];Gi.allowedChildren=[xa,ka,oa];Gi.requiredContainer=Lo;const cj={scope:St.BLOCK,whitelist:["rtl"]},VM=new Ka("direction","dir",cj),UM=new ba("direction","ql-direction",cj),WM=new El("direction","direction",cj),KM={scope:St.INLINE,whitelist:["serif","monospace"]},GM=new ba("font","ql-font",KM);class hme extends El{value(e){return super.value(e).replace(/["']/g,"")}}const YM=new hme("font","font-family",KM),QM=new ba("size","ql-size",{scope:St.INLINE,whitelist:["small","large","huge"]}),ZM=new El("size","font-size",{scope:St.INLINE,whitelist:["10px","18px","32px"]}),pme=qr("quill:keyboard"),gme=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey";class kf extends tr{static match(e,n){return["altKey","ctrlKey","metaKey","shiftKey"].some(s=>!!n[s]!==e[s]&&n[s]!==null)?!1:n.key===e.key||n.key===e.which}constructor(e,n){super(e,n),this.bindings={},Object.keys(this.options.bindings).forEach(s=>{this.options.bindings[s]&&this.addBinding(this.options.bindings[s])}),this.addBinding({key:"Enter",shiftKey:null},this.handleEnter),this.addBinding({key:"Enter",metaKey:null,ctrlKey:null,altKey:null},()=>{}),/Firefox/i.test(navigator.userAgent)?(this.addBinding({key:"Backspace"},{collapsed:!0},this.handleBackspace),this.addBinding({key:"Delete"},{collapsed:!0},this.handleDelete)):(this.addBinding({key:"Backspace"},{collapsed:!0,prefix:/^.?$/},this.handleBackspace),this.addBinding({key:"Delete"},{collapsed:!0,suffix:/^.?$/},this.handleDelete)),this.addBinding({key:"Backspace"},{collapsed:!1},this.handleDeleteRange),this.addBinding({key:"Delete"},{collapsed:!1},this.handleDeleteRange),this.addBinding({key:"Backspace",altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},this.handleBackspace),this.listen()}addBinding(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const a=vme(e);if(a==null){pme.warn("Attempted to add invalid keyboard binding",a);return}typeof n=="function"&&(n={handler:n}),typeof s=="function"&&(s={handler:s}),(Array.isArray(a.key)?a.key:[a.key]).forEach(o=>{const c={...a,key:o,...n,...s};this.bindings[c.key]=this.bindings[c.key]||[],this.bindings[c.key].push(c)})}listen(){this.quill.root.addEventListener("keydown",e=>{if(e.defaultPrevented||e.isComposing||e.keyCode===229&&(e.key==="Enter"||e.key==="Backspace"))return;const a=(this.bindings[e.key]||[]).concat(this.bindings[e.which]||[]).filter(b=>kf.match(e,b));if(a.length===0)return;const l=Ge.find(e.target,!0);if(l&&l.scroll!==this.quill.scroll)return;const o=this.quill.getSelection();if(o==null||!this.quill.hasFocus())return;const[c,d]=this.quill.getLine(o.index),[m,u]=this.quill.getLeaf(o.index),[h,p]=o.length===0?[m,u]:this.quill.getLeaf(o.index+o.length),g=m instanceof ug?m.value().slice(0,u):"",v=h instanceof ug?h.value().slice(p):"",x={collapsed:o.length===0,empty:o.length===0&&c.length()<=1,format:this.quill.getFormat(o),line:c,offset:d,prefix:g,suffix:v,event:e};a.some(b=>{if(b.collapsed!=null&&b.collapsed!==x.collapsed||b.empty!=null&&b.empty!==x.empty||b.offset!=null&&b.offset!==x.offset)return!1;if(Array.isArray(b.format)){if(b.format.every(k=>x.format[k]==null))return!1}else if(typeof b.format=="object"&&!Object.keys(b.format).every(k=>b.format[k]===!0?x.format[k]!=null:b.format[k]===!1?x.format[k]==null:Gr(b.format[k],x.format[k])))return!1;return b.prefix!=null&&!b.prefix.test(x.prefix)||b.suffix!=null&&!b.suffix.test(x.suffix)?!1:b.handler.call(this,o,x,b)!==!0})&&e.preventDefault()})}handleBackspace(e,n){const s=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(n.prefix)?2:1;if(e.index===0||this.quill.getLength()<=1)return;let a={};const[l]=this.quill.getLine(e.index);let o=new Ct().retain(e.index-s).delete(s);if(n.offset===0){const[c]=this.quill.getLine(e.index-1);if(c&&!(c.statics.blotName==="block"&&c.length()<=1)){const m=l.formats(),u=this.quill.getFormat(e.index-1,1);if(a=Gs.AttributeMap.diff(m,u)||{},Object.keys(a).length>0){const h=new Ct().retain(e.index+l.length()-2).retain(1,a);o=o.compose(h)}}}this.quill.updateContents(o,Ge.sources.USER),this.quill.focus()}handleDelete(e,n){const s=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(n.suffix)?2:1;if(e.index>=this.quill.getLength()-s)return;let a={};const[l]=this.quill.getLine(e.index);let o=new Ct().retain(e.index).delete(s);if(n.offset>=l.length()-1){const[c]=this.quill.getLine(e.index+1);if(c){const d=l.formats(),m=this.quill.getFormat(e.index,1);a=Gs.AttributeMap.diff(d,m)||{},Object.keys(a).length>0&&(o=o.retain(c.length()-1).retain(1,a))}}this.quill.updateContents(o,Ge.sources.USER),this.quill.focus()}handleDeleteRange(e){dj({range:e,quill:this.quill}),this.quill.focus()}handleEnter(e,n){const s=Object.keys(n.format).reduce((l,o)=>(this.quill.scroll.query(o,St.BLOCK)&&!Array.isArray(n.format[o])&&(l[o]=n.format[o]),l),{}),a=new Ct().retain(e.index).delete(e.length).insert(`
`,s);this.quill.updateContents(a,Ge.sources.USER),this.quill.setSelection(e.index+1,Ge.sources.SILENT),this.quill.focus()}}const fme={bindings:{bold:yx("bold"),italic:yx("italic"),underline:yx("underline"),indent:{key:"Tab",format:["blockquote","indent","list"],handler(t,e){return e.collapsed&&e.offset!==0?!0:(this.quill.format("indent","+1",Ge.sources.USER),!1)}},outdent:{key:"Tab",shiftKey:!0,format:["blockquote","indent","list"],handler(t,e){return e.collapsed&&e.offset!==0?!0:(this.quill.format("indent","-1",Ge.sources.USER),!1)}},"outdent backspace":{key:"Backspace",collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler(t,e){e.format.indent!=null?this.quill.format("indent","-1",Ge.sources.USER):e.format.list!=null&&this.quill.format("list",!1,Ge.sources.USER)}},"indent code-block":V_(!0),"outdent code-block":V_(!1),"remove tab":{key:"Tab",shiftKey:!0,collapsed:!0,prefix:/\t$/,handler(t){this.quill.deleteText(t.index-1,1,Ge.sources.USER)}},tab:{key:"Tab",handler(t,e){if(e.format.table)return!0;this.quill.history.cutoff();const n=new Ct().retain(t.index).delete(t.length).insert("	");return this.quill.updateContents(n,Ge.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(t.index+1,Ge.sources.SILENT),!1}},"blockquote empty enter":{key:"Enter",collapsed:!0,format:["blockquote"],empty:!0,handler(){this.quill.format("blockquote",!1,Ge.sources.USER)}},"list empty enter":{key:"Enter",collapsed:!0,format:["list"],empty:!0,handler(t,e){const n={list:!1};e.format.indent&&(n.indent=!1),this.quill.formatLine(t.index,t.length,n,Ge.sources.USER)}},"checklist enter":{key:"Enter",collapsed:!0,format:{list:"checked"},handler(t){const[e,n]=this.quill.getLine(t.index),s={...e.formats(),list:"checked"},a=new Ct().retain(t.index).insert(`
`,s).retain(e.length()-n-1).retain(1,{list:"unchecked"});this.quill.updateContents(a,Ge.sources.USER),this.quill.setSelection(t.index+1,Ge.sources.SILENT),this.quill.scrollSelectionIntoView()}},"header enter":{key:"Enter",collapsed:!0,format:["header"],suffix:/^$/,handler(t,e){const[n,s]=this.quill.getLine(t.index),a=new Ct().retain(t.index).insert(`
`,e.format).retain(n.length()-s-1).retain(1,{header:null});this.quill.updateContents(a,Ge.sources.USER),this.quill.setSelection(t.index+1,Ge.sources.SILENT),this.quill.scrollSelectionIntoView()}},"table backspace":{key:"Backspace",format:["table"],collapsed:!0,offset:0,handler(){}},"table delete":{key:"Delete",format:["table"],collapsed:!0,suffix:/^$/,handler(){}},"table enter":{key:"Enter",shiftKey:null,format:["table"],handler(t){const e=this.quill.getModule("table");if(e){const[n,s,a,l]=e.getTable(t),o=xme(n,s,a,l);if(o==null)return;let c=n.offset();if(o<0){const d=new Ct().retain(c).insert(`
`);this.quill.updateContents(d,Ge.sources.USER),this.quill.setSelection(t.index+1,t.length,Ge.sources.SILENT)}else if(o>0){c+=n.length();const d=new Ct().retain(c).insert(`
`);this.quill.updateContents(d,Ge.sources.USER),this.quill.setSelection(c,Ge.sources.USER)}}}},"table tab":{key:"Tab",shiftKey:null,format:["table"],handler(t,e){const{event:n,line:s}=e,a=s.offset(this.quill.scroll);n.shiftKey?this.quill.setSelection(a-1,Ge.sources.USER):this.quill.setSelection(a+s.length(),Ge.sources.USER)}},"list autofill":{key:" ",shiftKey:null,collapsed:!0,format:{"code-block":!1,blockquote:!1,table:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler(t,e){if(this.quill.scroll.query("list")==null)return!0;const{length:n}=e.prefix,[s,a]=this.quill.getLine(t.index);if(a>n)return!0;let l;switch(e.prefix.trim()){case"[]":case"[ ]":l="unchecked";break;case"[x]":l="checked";break;case"-":case"*":l="bullet";break;default:l="ordered"}this.quill.insertText(t.index," ",Ge.sources.USER),this.quill.history.cutoff();const o=new Ct().retain(t.index-a).delete(n+1).retain(s.length()-2-a).retain(1,{list:l});return this.quill.updateContents(o,Ge.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(t.index-n,Ge.sources.SILENT),!1}},"code exit":{key:"Enter",collapsed:!0,format:["code-block"],prefix:/^$/,suffix:/^\s*$/,handler(t){const[e,n]=this.quill.getLine(t.index);let s=2,a=e;for(;a!=null&&a.length()<=1&&a.formats()["code-block"];)if(a=a.prev,s-=1,s<=0){const l=new Ct().retain(t.index+e.length()-n-2).retain(1,{"code-block":null}).delete(1);return this.quill.updateContents(l,Ge.sources.USER),this.quill.setSelection(t.index-1,Ge.sources.SILENT),!1}return!0}},"embed left":Sh("ArrowLeft",!1),"embed left shift":Sh("ArrowLeft",!0),"embed right":Sh("ArrowRight",!1),"embed right shift":Sh("ArrowRight",!0),"table down":U_(!1),"table up":U_(!0)}};kf.DEFAULTS=fme;function V_(t){return{key:"Tab",shiftKey:!t,format:{"code-block":!0},handler(e,n){let{event:s}=n;const a=this.quill.scroll.query("code-block"),{TAB:l}=a;if(e.length===0&&!s.shiftKey){this.quill.insertText(e.index,l,Ge.sources.USER),this.quill.setSelection(e.index+l.length,Ge.sources.SILENT);return}const o=e.length===0?this.quill.getLines(e.index,1):this.quill.getLines(e);let{index:c,length:d}=e;o.forEach((m,u)=>{t?(m.insertAt(0,l),u===0?c+=l.length:d+=l.length):m.domNode.textContent.startsWith(l)&&(m.deleteAt(0,l.length),u===0?c-=l.length:d-=l.length)}),this.quill.update(Ge.sources.USER),this.quill.setSelection(c,d,Ge.sources.SILENT)}}}function Sh(t,e){return{key:t,shiftKey:e,altKey:null,[t==="ArrowLeft"?"prefix":"suffix"]:/^$/,handler(s){let{index:a}=s;t==="ArrowRight"&&(a+=s.length+1);const[l]=this.quill.getLeaf(a);return l instanceof Is?(t==="ArrowLeft"?e?this.quill.setSelection(s.index-1,s.length+1,Ge.sources.USER):this.quill.setSelection(s.index-1,Ge.sources.USER):e?this.quill.setSelection(s.index,s.length+1,Ge.sources.USER):this.quill.setSelection(s.index+s.length+1,Ge.sources.USER),!1):!0}}}function yx(t){return{key:t[0],shortKey:!0,handler(e,n){this.quill.format(t,!n.format[t],Ge.sources.USER)}}}function U_(t){return{key:t?"ArrowUp":"ArrowDown",collapsed:!0,format:["table"],handler(e,n){const s=t?"prev":"next",a=n.line,l=a.parent[s];if(l!=null){if(l.statics.blotName==="table-row"){let o=l.children.head,c=a;for(;c.prev!=null;)c=c.prev,o=o.next;const d=o.offset(this.quill.scroll)+Math.min(n.offset,o.length()-1);this.quill.setSelection(d,0,Ge.sources.USER)}}else{const o=a.table()[s];o!=null&&(t?this.quill.setSelection(o.offset(this.quill.scroll)+o.length()-1,0,Ge.sources.USER):this.quill.setSelection(o.offset(this.quill.scroll),0,Ge.sources.USER))}return!1}}}function vme(t){if(typeof t=="string"||typeof t=="number")t={key:t};else if(typeof t=="object")t=jc(t);else return null;return t.shortKey&&(t[gme]=t.shortKey,delete t.shortKey),t}function dj(t){let{quill:e,range:n}=t;const s=e.getLines(n);let a={};if(s.length>1){const l=s[0].formats(),o=s[s.length-1].formats();a=Gs.AttributeMap.diff(o,l)||{}}e.deleteText(n,Ge.sources.USER),Object.keys(a).length>0&&e.formatLine(n.index,1,a,Ge.sources.USER),e.setSelection(n.index,Ge.sources.SILENT)}function xme(t,e,n,s){return e.prev==null&&e.next==null?n.prev==null&&n.next==null?s===0?-1:1:n.prev==null?-1:1:e.prev==null?-1:e.next==null?1:null}const yme=/font-weight:\s*normal/,bme=["P","OL","UL"],W_=t=>t&&bme.includes(t.tagName),kme=t=>{Array.from(t.querySelectorAll("br")).filter(e=>W_(e.previousElementSibling)&&W_(e.nextElementSibling)).forEach(e=>{e.parentNode?.removeChild(e)})},wme=t=>{Array.from(t.querySelectorAll('b[style*="font-weight"]')).filter(e=>e.getAttribute("style")?.match(yme)).forEach(e=>{const n=t.createDocumentFragment();n.append(...e.childNodes),e.parentNode?.replaceChild(n,e)})};function jme(t){t.querySelector('[id^="docs-internal-guid-"]')&&(wme(t),kme(t))}const Nme=/\bmso-list:[^;]*ignore/i,Cme=/\bmso-list:[^;]*\bl(\d+)/i,_me=/\bmso-list:[^;]*\blevel(\d+)/i,Sme=(t,e)=>{const n=t.getAttribute("style"),s=n?.match(Cme);if(!s)return null;const a=Number(s[1]),l=n?.match(_me),o=l?Number(l[1]):1,c=new RegExp(`@list l${a}:level${o}\\s*\\{[^\\}]*mso-level-number-format:\\s*([\\w-]+)`,"i"),d=e.match(c),m=d&&d[1]==="bullet"?"bullet":"ordered";return{id:a,indent:o,type:m,element:t}},Eme=t=>{const e=Array.from(t.querySelectorAll("[style*=mso-list]")),n=[],s=[];e.forEach(o=>{(o.getAttribute("style")||"").match(Nme)?n.push(o):s.push(o)}),n.forEach(o=>o.parentNode?.removeChild(o));const a=t.documentElement.innerHTML,l=s.map(o=>Sme(o,a)).filter(o=>o);for(;l.length;){const o=[];let c=l.shift();for(;c;)o.push(c),c=l.length&&l[0]?.element===c.element.nextElementSibling&&l[0].id===c.id?l.shift():null;const d=document.createElement("ul");o.forEach(h=>{const p=document.createElement("li");p.setAttribute("data-list",h.type),h.indent>1&&p.setAttribute("class",`ql-indent-${h.indent-1}`),p.innerHTML=h.element.innerHTML,d.appendChild(p)});const m=o[0]?.element,{parentNode:u}=m??{};m&&u?.replaceChild(d,m),o.slice(1).forEach(h=>{let{element:p}=h;u?.removeChild(p)})}};function Tme(t){t.documentElement.getAttribute("xmlns:w")==="urn:schemas-microsoft-com:office:word"&&Eme(t)}const Ame=[Tme,jme],Dme=t=>{t.documentElement&&Ame.forEach(e=>{e(t)})},Rme=qr("quill:clipboard"),Pme=[[Node.TEXT_NODE,Wme],[Node.TEXT_NODE,G_],["br",$me],[Node.ELEMENT_NODE,G_],[Node.ELEMENT_NODE,Lme],[Node.ELEMENT_NODE,Fme],[Node.ELEMENT_NODE,Vme],["li",Hme],["ol, ul",zme],["pre",Bme],["tr",Ume],["b",bx("bold")],["i",bx("italic")],["strike",bx("strike")],["style",qme]],Mme=[dme,VM].reduce((t,e)=>(t[e.keyName]=e,t),{}),K_=[HM,lj,rj,WM,YM,ZM].reduce((t,e)=>(t[e.keyName]=e,t),{});class Ime extends tr{static DEFAULTS={matchers:[]};constructor(e,n){super(e,n),this.quill.root.addEventListener("copy",s=>this.onCaptureCopy(s,!1)),this.quill.root.addEventListener("cut",s=>this.onCaptureCopy(s,!0)),this.quill.root.addEventListener("paste",this.onCapturePaste.bind(this)),this.matchers=[],Pme.concat(this.options.matchers??[]).forEach(s=>{let[a,l]=s;this.addMatcher(a,l)})}addMatcher(e,n){this.matchers.push([e,n])}convert(e){let{html:n,text:s}=e,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(a[Gi.blotName])return new Ct().insert(s||"",{[Gi.blotName]:a[Gi.blotName]});if(!n)return new Ct().insert(s||"",a);const l=this.convertHTML(n);return vu(l,`
`)&&(l.ops[l.ops.length-1].attributes==null||a.table)?l.compose(new Ct().retain(l.length()-1).delete(1)):l}normalizeHTML(e){Dme(e)}convertHTML(e){const n=new DOMParser().parseFromString(e,"text/html");this.normalizeHTML(n);const s=n.body,a=new WeakMap,[l,o]=this.prepareMatching(s,a);return mj(this.quill.scroll,s,l,o,a)}dangerouslyPasteHTML(e,n){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Ge.sources.API;if(typeof e=="string"){const a=this.convert({html:e,text:""});this.quill.setContents(a,n),this.quill.setSelection(0,Ge.sources.SILENT)}else{const a=this.convert({html:n,text:""});this.quill.updateContents(new Ct().retain(e).concat(a),s),this.quill.setSelection(e+a.length(),Ge.sources.SILENT)}}onCaptureCopy(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(e.defaultPrevented)return;e.preventDefault();const[s]=this.quill.selection.getRange();if(s==null)return;const{html:a,text:l}=this.onCopy(s,n);e.clipboardData?.setData("text/plain",l),e.clipboardData?.setData("text/html",a),n&&dj({range:s,quill:this.quill})}normalizeURIList(e){return e.split(/\r?\n/).filter(n=>n[0]!=="#").join(`
`)}onCapturePaste(e){if(e.defaultPrevented||!this.quill.isEnabled())return;e.preventDefault();const n=this.quill.getSelection(!0);if(n==null)return;const s=e.clipboardData?.getData("text/html");let a=e.clipboardData?.getData("text/plain");if(!s&&!a){const o=e.clipboardData?.getData("text/uri-list");o&&(a=this.normalizeURIList(o))}const l=Array.from(e.clipboardData?.files||[]);if(!s&&l.length>0){this.quill.uploader.upload(n,l);return}if(s&&l.length>0){const o=new DOMParser().parseFromString(s,"text/html");if(o.body.childElementCount===1&&o.body.firstElementChild?.tagName==="IMG"){this.quill.uploader.upload(n,l);return}}this.onPaste(n,{html:s,text:a})}onCopy(e){const n=this.quill.getText(e);return{html:this.quill.getSemanticHTML(e),text:n}}onPaste(e,n){let{text:s,html:a}=n;const l=this.quill.getFormat(e.index),o=this.convert({text:s,html:a},l);Rme.log("onPaste",o,{text:s,html:a});const c=new Ct().retain(e.index).delete(e.length).concat(o);this.quill.updateContents(c,Ge.sources.USER),this.quill.setSelection(c.length()-e.length,Ge.sources.SILENT),this.quill.scrollSelectionIntoView()}prepareMatching(e,n){const s=[],a=[];return this.matchers.forEach(l=>{const[o,c]=l;switch(o){case Node.TEXT_NODE:a.push(c);break;case Node.ELEMENT_NODE:s.push(c);break;default:Array.from(e.querySelectorAll(o)).forEach(d=>{n.has(d)?n.get(d)?.push(c):n.set(d,[c])});break}}),[s,a]}}function $o(t,e,n,s){return s.query(e)?t.reduce((a,l)=>{if(!l.insert)return a;if(l.attributes&&l.attributes[e])return a.push(l);const o=n?{[e]:n}:{};return a.insert(l.insert,{...o,...l.attributes})},new Ct):t}function vu(t,e){let n="";for(let s=t.ops.length-1;s>=0&&n.length<e.length;--s){const a=t.ops[s];if(typeof a.insert!="string")break;n=a.insert+n}return n.slice(-1*e.length)===e}function ll(t,e){if(!(t instanceof Element))return!1;const n=e.query(t);return n&&n.prototype instanceof Is?!1:["address","article","blockquote","canvas","dd","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","iframe","li","main","nav","ol","output","p","pre","section","table","td","tr","ul","video"].includes(t.tagName.toLowerCase())}function Ome(t,e){return t.previousElementSibling&&t.nextElementSibling&&!ll(t.previousElementSibling,e)&&!ll(t.nextElementSibling,e)}const Eh=new WeakMap;function XM(t){return t==null?!1:(Eh.has(t)||(t.tagName==="PRE"?Eh.set(t,!0):Eh.set(t,XM(t.parentNode))),Eh.get(t))}function mj(t,e,n,s,a){return e.nodeType===e.TEXT_NODE?s.reduce((l,o)=>o(e,l,t),new Ct):e.nodeType===e.ELEMENT_NODE?Array.from(e.childNodes||[]).reduce((l,o)=>{let c=mj(t,o,n,s,a);return o.nodeType===e.ELEMENT_NODE&&(c=n.reduce((d,m)=>m(o,d,t),c),c=(a.get(o)||[]).reduce((d,m)=>m(o,d,t),c)),l.concat(c)},new Ct):new Ct}function bx(t){return(e,n,s)=>$o(n,t,!0,s)}function Fme(t,e,n){const s=Ka.keys(t),a=ba.keys(t),l=El.keys(t),o={};return s.concat(a).concat(l).forEach(c=>{let d=n.query(c,St.ATTRIBUTE);d!=null&&(o[d.attrName]=d.value(t),o[d.attrName])||(d=Mme[c],d!=null&&(d.attrName===c||d.keyName===c)&&(o[d.attrName]=d.value(t)||void 0),d=K_[c],d!=null&&(d.attrName===c||d.keyName===c)&&(d=K_[c],o[d.attrName]=d.value(t)||void 0))}),Object.entries(o).reduce((c,d)=>{let[m,u]=d;return $o(c,m,u,n)},e)}function Lme(t,e,n){const s=n.query(t);if(s==null)return e;if(s.prototype instanceof Is){const a={},l=s.value(t);if(l!=null)return a[s.blotName]=l,new Ct().insert(a,s.formats(t,n))}else if(s.prototype instanceof Lm&&!vu(e,`
`)&&e.insert(`
`),"blotName"in s&&"formats"in s&&typeof s.formats=="function")return $o(e,s.blotName,s.formats(t,n),n);return e}function $me(t,e){return vu(e,`
`)||e.insert(`
`),e}function Bme(t,e,n){const s=n.query("code-block"),a=s&&"formats"in s&&typeof s.formats=="function"?s.formats(t,n):!0;return $o(e,"code-block",a,n)}function qme(){return new Ct}function Hme(t,e,n){const s=n.query(t);if(s==null||s.blotName!=="list"||!vu(e,`
`))return e;let a=-1,l=t.parentNode;for(;l!=null;)["OL","UL"].includes(l.tagName)&&(a+=1),l=l.parentNode;return a<=0?e:e.reduce((o,c)=>c.insert?c.attributes&&typeof c.attributes.indent=="number"?o.push(c):o.insert(c.insert,{indent:a,...c.attributes||{}}):o,new Ct)}function zme(t,e,n){const s=t;let a=s.tagName==="OL"?"ordered":"bullet";const l=s.getAttribute("data-checked");return l&&(a=l==="true"?"checked":"unchecked"),$o(e,"list",a,n)}function G_(t,e,n){if(!vu(e,`
`)){if(ll(t,n)&&(t.childNodes.length>0||t instanceof HTMLParagraphElement))return e.insert(`
`);if(e.length()>0&&t.nextSibling){let s=t.nextSibling;for(;s!=null;){if(ll(s,n))return e.insert(`
`);const a=n.query(s);if(a&&a.prototype instanceof zs)return e.insert(`
`);s=s.firstChild}}}return e}function Vme(t,e,n){const s={},a=t.style||{};return a.fontStyle==="italic"&&(s.italic=!0),a.textDecoration==="underline"&&(s.underline=!0),a.textDecoration==="line-through"&&(s.strike=!0),(a.fontWeight?.startsWith("bold")||parseInt(a.fontWeight,10)>=700)&&(s.bold=!0),e=Object.entries(s).reduce((l,o)=>{let[c,d]=o;return $o(l,c,d,n)},e),parseFloat(a.textIndent||0)>0?new Ct().insert("	").concat(e):e}function Ume(t,e,n){const s=t.parentElement?.tagName==="TABLE"?t.parentElement:t.parentElement?.parentElement;if(s!=null){const l=Array.from(s.querySelectorAll("tr")).indexOf(t)+1;return $o(e,"table",l,n)}return e}function Wme(t,e,n){let s=t.data;if(t.parentElement?.tagName==="O:P")return e.insert(s.trim());if(!XM(t)){if(s.trim().length===0&&s.includes(`
`)&&!Ome(t,n))return e;s=s.replace(/[^\S\u00a0]/g," "),s=s.replace(/ {2,}/g," "),(t.previousSibling==null&&t.parentElement!=null&&ll(t.parentElement,n)||t.previousSibling instanceof Element&&ll(t.previousSibling,n))&&(s=s.replace(/^ /,"")),(t.nextSibling==null&&t.parentElement!=null&&ll(t.parentElement,n)||t.nextSibling instanceof Element&&ll(t.nextSibling,n))&&(s=s.replace(/ $/,"")),s=s.replaceAll(""," ")}return e.insert(s)}class Kme extends tr{static DEFAULTS={delay:1e3,maxStack:100,userOnly:!1};lastRecorded=0;ignoreChange=!1;stack={undo:[],redo:[]};currentRange=null;constructor(e,n){super(e,n),this.quill.on(Ge.events.EDITOR_CHANGE,(s,a,l,o)=>{s===Ge.events.SELECTION_CHANGE?a&&o!==Ge.sources.SILENT&&(this.currentRange=a):s===Ge.events.TEXT_CHANGE&&(this.ignoreChange||(!this.options.userOnly||o===Ge.sources.USER?this.record(a,l):this.transform(a)),this.currentRange=hb(this.currentRange,a))}),this.quill.keyboard.addBinding({key:"z",shortKey:!0},this.undo.bind(this)),this.quill.keyboard.addBinding({key:["z","Z"],shortKey:!0,shiftKey:!0},this.redo.bind(this)),/Win/i.test(navigator.platform)&&this.quill.keyboard.addBinding({key:"y",shortKey:!0},this.redo.bind(this)),this.quill.root.addEventListener("beforeinput",s=>{s.inputType==="historyUndo"?(this.undo(),s.preventDefault()):s.inputType==="historyRedo"&&(this.redo(),s.preventDefault())})}change(e,n){if(this.stack[e].length===0)return;const s=this.stack[e].pop();if(!s)return;const a=this.quill.getContents(),l=s.delta.invert(a);this.stack[n].push({delta:l,range:hb(s.range,l)}),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(s.delta,Ge.sources.USER),this.ignoreChange=!1,this.restoreSelection(s)}clear(){this.stack={undo:[],redo:[]}}cutoff(){this.lastRecorded=0}record(e,n){if(e.ops.length===0)return;this.stack.redo=[];let s=e.invert(n),a=this.currentRange;const l=Date.now();if(this.lastRecorded+this.options.delay>l&&this.stack.undo.length>0){const o=this.stack.undo.pop();o&&(s=s.compose(o.delta),a=o.range)}else this.lastRecorded=l;s.length()!==0&&(this.stack.undo.push({delta:s,range:a}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift())}redo(){this.change("redo","undo")}transform(e){Y_(this.stack.undo,e),Y_(this.stack.redo,e)}undo(){this.change("undo","redo")}restoreSelection(e){if(e.range)this.quill.setSelection(e.range,Ge.sources.USER);else{const n=Yme(this.quill.scroll,e.delta);this.quill.setSelection(n,Ge.sources.USER)}}}function Y_(t,e){let n=e;for(let s=t.length-1;s>=0;s-=1){const a=t[s];t[s]={delta:n.transform(a.delta,!0),range:a.range&&hb(a.range,n)},n=a.delta.transform(n),t[s].delta.length()===0&&t.splice(s,1)}}function Gme(t,e){const n=e.ops[e.ops.length-1];return n==null?!1:n.insert!=null?typeof n.insert=="string"&&n.insert.endsWith(`
`):n.attributes!=null?Object.keys(n.attributes).some(s=>t.query(s,St.BLOCK)!=null):!1}function Yme(t,e){const n=e.reduce((a,l)=>a+(l.delete||0),0);let s=e.length()-n;return Gme(t,e)&&(s-=1),s}function hb(t,e){if(!t)return t;const n=e.transformPosition(t.index),s=e.transformPosition(t.index+t.length);return{index:n,length:s-n}}class JM extends tr{constructor(e,n){super(e,n),e.root.addEventListener("drop",s=>{s.preventDefault();let a=null;if(document.caretRangeFromPoint)a=document.caretRangeFromPoint(s.clientX,s.clientY);else if(document.caretPositionFromPoint){const o=document.caretPositionFromPoint(s.clientX,s.clientY);a=document.createRange(),a.setStart(o.offsetNode,o.offset),a.setEnd(o.offsetNode,o.offset)}const l=a&&e.selection.normalizeNative(a);if(l){const o=e.selection.normalizedToRange(l);s.dataTransfer?.files&&this.upload(o,s.dataTransfer.files)}})}upload(e,n){const s=[];Array.from(n).forEach(a=>{a&&this.options.mimetypes?.includes(a.type)&&s.push(a)}),s.length>0&&this.options.handler.call(this,e,s)}}JM.DEFAULTS={mimetypes:["image/png","image/jpeg"],handler(t,e){if(!this.quill.scroll.query("image"))return;const n=e.map(s=>new Promise(a=>{const l=new FileReader;l.onload=()=>{a(l.result)},l.readAsDataURL(s)}));Promise.all(n).then(s=>{const a=s.reduce((l,o)=>l.insert({image:o}),new Ct().retain(t.index).delete(t.length));this.quill.updateContents(a,wt.sources.USER),this.quill.setSelection(t.index+s.length,wt.sources.SILENT)})}};const Qme=["insertText","insertReplacementText"];class Zme extends tr{constructor(e,n){super(e,n),e.root.addEventListener("beforeinput",s=>{this.handleBeforeInput(s)}),/Android/i.test(navigator.userAgent)||e.on(Ge.events.COMPOSITION_BEFORE_START,()=>{this.handleCompositionStart()})}deleteRange(e){dj({range:e,quill:this.quill})}replaceText(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";if(e.length===0)return!1;if(n){const s=this.quill.getFormat(e.index,1);this.deleteRange(e),this.quill.updateContents(new Ct().retain(e.index).insert(n,s),Ge.sources.USER)}else this.deleteRange(e);return this.quill.setSelection(e.index+n.length,0,Ge.sources.SILENT),!0}handleBeforeInput(e){if(this.quill.composition.isComposing||e.defaultPrevented||!Qme.includes(e.inputType))return;const n=e.getTargetRanges?e.getTargetRanges()[0]:null;if(!n||n.collapsed===!0)return;const s=Xme(e);if(s==null)return;const a=this.quill.selection.normalizeNative(n),l=a?this.quill.selection.normalizedToRange(a):null;l&&this.replaceText(l,s)&&e.preventDefault()}handleCompositionStart(){const e=this.quill.getSelection();e&&this.replaceText(e)}}function Xme(t){return typeof t.data=="string"?t.data:t.dataTransfer?.types.includes("text/plain")?t.dataTransfer.getData("text/plain"):null}const Jme=/Mac/i.test(navigator.platform),eue=100,tue=t=>!!(t.key==="ArrowLeft"||t.key==="ArrowRight"||t.key==="ArrowUp"||t.key==="ArrowDown"||t.key==="Home"||Jme&&t.key==="a"&&t.ctrlKey===!0);class nue extends tr{isListening=!1;selectionChangeDeadline=0;constructor(e,n){super(e,n),this.handleArrowKeys(),this.handleNavigationShortcuts()}handleArrowKeys(){this.quill.keyboard.addBinding({key:["ArrowLeft","ArrowRight"],offset:0,shiftKey:null,handler(e,n){let{line:s,event:a}=n;if(!(s instanceof pa)||!s.uiNode)return!0;const l=getComputedStyle(s.domNode).direction==="rtl";return l&&a.key!=="ArrowRight"||!l&&a.key!=="ArrowLeft"?!0:(this.quill.setSelection(e.index-1,e.length+(a.shiftKey?1:0),Ge.sources.USER),!1)}})}handleNavigationShortcuts(){this.quill.root.addEventListener("keydown",e=>{!e.defaultPrevented&&tue(e)&&this.ensureListeningToSelectionChange()})}ensureListeningToSelectionChange(){if(this.selectionChangeDeadline=Date.now()+eue,this.isListening)return;this.isListening=!0;const e=()=>{this.isListening=!1,Date.now()<=this.selectionChangeDeadline&&this.handleSelectionChange()};document.addEventListener("selectionchange",e,{once:!0})}handleSelectionChange(){const e=document.getSelection();if(!e)return;const n=e.getRangeAt(0);if(n.collapsed!==!0||n.startOffset!==0)return;const s=this.quill.scroll.find(n.startContainer);if(!(s instanceof pa)||!s.uiNode)return;const a=document.createRange();a.setStartAfter(s.uiNode),a.setEndAfter(s.uiNode),e.removeAllRanges(),e.addRange(a)}}Ge.register({"blots/block":Ni,"blots/block/embed":zs,"blots/break":ka,"blots/container":Fo,"blots/cursor":oa,"blots/embed":sj,"blots/inline":zi,"blots/scroll":cme,"blots/text":xa,"modules/clipboard":Ime,"modules/history":Kme,"modules/keyboard":kf,"modules/uploader":JM,"modules/input":Zme,"modules/uiNode":nue});class iue extends ba{add(e,n){let s=0;if(n==="+1"||n==="-1"){const a=this.value(e)||0;s=n==="+1"?a+1:a-1}else typeof n=="number"&&(s=n);return s===0?(this.remove(e),!0):super.add(e,s.toString())}canAdd(e,n){return super.canAdd(e,n)||super.canAdd(e,parseInt(n,10))}value(e){return parseInt(super.value(e),10)||void 0}}const sue=new iue("indent","ql-indent",{scope:St.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});class aue extends Ni{static blotName="blockquote";static tagName="blockquote"}class rue extends Ni{static blotName="header";static tagName=["H1","H2","H3","H4","H5","H6"];static formats(e){return this.tagName.indexOf(e.tagName)+1}}class xu extends Fo{}xu.blotName="list-container";xu.tagName="OL";class yu extends Ni{static create(e){const n=super.create();return n.setAttribute("data-list",e),n}static formats(e){return e.getAttribute("data-list")||void 0}static register(){Ge.register(xu)}constructor(e,n){super(e,n);const s=n.ownerDocument.createElement("span"),a=l=>{if(!e.isEnabled())return;const o=this.statics.formats(n,e);o==="checked"?(this.format("list","unchecked"),l.preventDefault()):o==="unchecked"&&(this.format("list","checked"),l.preventDefault())};s.addEventListener("mousedown",a),s.addEventListener("touchstart",a),this.attachUI(s)}format(e,n){e===this.statics.blotName&&n?this.domNode.setAttribute("data-list",n):super.format(e,n)}}yu.blotName="list";yu.tagName="LI";xu.allowedChildren=[yu];yu.requiredContainer=xu;class uj extends zi{static blotName="bold";static tagName=["STRONG","B"];static create(){return super.create()}static formats(){return!0}optimize(e){super.optimize(e),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}class lue extends uj{static blotName="italic";static tagName=["EM","I"]}class hg extends zi{static blotName="link";static tagName="A";static SANITIZED_URL="about:blank";static PROTOCOL_WHITELIST=["http","https","mailto","tel","sms"];static create(e){const n=super.create(e);return n.setAttribute("href",this.sanitize(e)),n.setAttribute("rel","noopener noreferrer"),n.setAttribute("target","_blank"),n}static formats(e){return e.getAttribute("href")}static sanitize(e){return eI(e,this.PROTOCOL_WHITELIST)?e:this.SANITIZED_URL}format(e,n){e!==this.statics.blotName||!n?super.format(e,n):this.domNode.setAttribute("href",this.constructor.sanitize(n))}}function eI(t,e){const n=document.createElement("a");n.href=t;const s=n.href.slice(0,n.href.indexOf(":"));return e.indexOf(s)>-1}class oue extends zi{static blotName="script";static tagName=["SUB","SUP"];static create(e){return e==="super"?document.createElement("sup"):e==="sub"?document.createElement("sub"):super.create(e)}static formats(e){if(e.tagName==="SUB")return"sub";if(e.tagName==="SUP")return"super"}}class cue extends uj{static blotName="strike";static tagName=["S","STRIKE"]}class due extends zi{static blotName="underline";static tagName="U"}class mue extends sj{static blotName="formula";static className="ql-formula";static tagName="SPAN";static create(e){if(window.katex==null)throw new Error("Formula module requires KaTeX.");const n=super.create(e);return typeof e=="string"&&(window.katex.render(e,n,{throwOnError:!1,errorColor:"#f00"}),n.setAttribute("data-value",e)),n}static value(e){return e.getAttribute("data-value")}html(){const{formula:e}=this.value();return`<span>${e}</span>`}}const Q_=["alt","height","width"];let uue=class extends Is{static blotName="image";static tagName="IMG";static create(e){const n=super.create(e);return typeof e=="string"&&n.setAttribute("src",this.sanitize(e)),n}static formats(e){return Q_.reduce((n,s)=>(e.hasAttribute(s)&&(n[s]=e.getAttribute(s)),n),{})}static match(e){return/\.(jpe?g|gif|png)$/.test(e)||/^data:image\/.+;base64/.test(e)}static sanitize(e){return eI(e,["http","https","data"])?e:"//:0"}static value(e){return e.getAttribute("src")}format(e,n){Q_.indexOf(e)>-1?n?this.domNode.setAttribute(e,n):this.domNode.removeAttribute(e):super.format(e,n)}};const Z_=["height","width"];class hue extends zs{static blotName="video";static className="ql-video";static tagName="IFRAME";static create(e){const n=super.create(e);return n.setAttribute("frameborder","0"),n.setAttribute("allowfullscreen","true"),n.setAttribute("src",this.sanitize(e)),n}static formats(e){return Z_.reduce((n,s)=>(e.hasAttribute(s)&&(n[s]=e.getAttribute(s)),n),{})}static sanitize(e){return hg.sanitize(e)}static value(e){return e.getAttribute("src")}format(e,n){Z_.indexOf(e)>-1?n?this.domNode.setAttribute(e,n):this.domNode.removeAttribute(e):super.format(e,n)}html(){const{video:e}=this.value();return`<a href="${e}">${e}</a>`}}const Kd=new ba("code-token","hljs",{scope:St.INLINE});class Mr extends zi{static formats(e,n){for(;e!=null&&e!==n.domNode;){if(e.classList&&e.classList.contains(Gi.className))return super.formats(e,n);e=e.parentNode}}constructor(e,n,s){super(e,n,s),Kd.add(this.domNode,s)}format(e,n){e!==Mr.blotName?super.format(e,n):n?Kd.add(this.domNode,n):(Kd.remove(this.domNode),this.domNode.classList.remove(this.statics.className))}optimize(){super.optimize(...arguments),Kd.value(this.domNode)||this.unwrap()}}Mr.blotName="code-token";Mr.className="ql-token";class qs extends Gi{static create(e){const n=super.create(e);return typeof e=="string"&&n.setAttribute("data-language",e),n}static formats(e){return e.getAttribute("data-language")||"plain"}static register(){}format(e,n){e===this.statics.blotName&&n?this.domNode.setAttribute("data-language",n):super.format(e,n)}replaceWith(e,n){return this.formatAt(0,this.length(),Mr.blotName,!1),super.replaceWith(e,n)}}class um extends Lo{attach(){super.attach(),this.forceNext=!1,this.scroll.emitMount(this)}format(e,n){e===qs.blotName&&(this.forceNext=!0,this.children.forEach(s=>{s.format(e,n)}))}formatAt(e,n,s,a){s===qs.blotName&&(this.forceNext=!0),super.formatAt(e,n,s,a)}highlight(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(this.children.head==null)return;const a=`${Array.from(this.domNode.childNodes).filter(o=>o!==this.uiNode).map(o=>o.textContent).join(`
`)}
`,l=qs.formats(this.children.head.domNode);if(n||this.forceNext||this.cachedText!==a){if(a.trim().length>0||this.cachedText==null){const o=this.children.reduce((d,m)=>d.concat($M(m,!1)),new Ct),c=e(a,l);o.diff(c).reduce((d,m)=>{let{retain:u,attributes:h}=m;return u?(h&&Object.keys(h).forEach(p=>{[qs.blotName,Mr.blotName].includes(p)&&this.formatAt(d,u,p,h[p])}),d+u):d},0)}this.cachedText=a,this.forceNext=!1}}html(e,n){const[s]=this.children.find(e);return`<pre data-language="${s?qs.formats(s.domNode):"plain"}">
${bf(this.code(e,n))}
</pre>`}optimize(e){if(super.optimize(e),this.parent!=null&&this.children.head!=null&&this.uiNode!=null){const n=qs.formats(this.children.head.domNode);n!==this.uiNode.value&&(this.uiNode.value=n)}}}um.allowedChildren=[qs];qs.requiredContainer=um;qs.allowedChildren=[Mr,oa,xa,ka];const pue=(t,e,n)=>{if(typeof t.versionString=="string"){const s=t.versionString.split(".")[0];if(parseInt(s,10)>=11)return t.highlight(n,{language:e}).value}return t.highlight(e,n).value};class tI extends tr{static register(){Ge.register(Mr,!0),Ge.register(qs,!0),Ge.register(um,!0)}constructor(e,n){if(super(e,n),this.options.hljs==null)throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");this.languages=this.options.languages.reduce((s,a)=>{let{key:l}=a;return s[l]=!0,s},{}),this.highlightBlot=this.highlightBlot.bind(this),this.initListener(),this.initTimer()}initListener(){this.quill.on(Ge.events.SCROLL_BLOT_MOUNT,e=>{if(!(e instanceof um))return;const n=this.quill.root.ownerDocument.createElement("select");this.options.languages.forEach(s=>{let{key:a,label:l}=s;const o=n.ownerDocument.createElement("option");o.textContent=l,o.setAttribute("value",a),n.appendChild(o)}),n.addEventListener("change",()=>{e.format(qs.blotName,n.value),this.quill.root.focus(),this.highlight(e,!0)}),e.uiNode==null&&(e.attachUI(n),e.children.head&&(n.value=qs.formats(e.children.head.domNode)))})}initTimer(){let e=null;this.quill.on(Ge.events.SCROLL_OPTIMIZE,()=>{e&&clearTimeout(e),e=setTimeout(()=>{this.highlight(),e=null},this.options.interval)})}highlight(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(this.quill.selection.composing)return;this.quill.update(Ge.sources.USER);const s=this.quill.getSelection();(e==null?this.quill.scroll.descendants(um):[e]).forEach(l=>{l.highlight(this.highlightBlot,n)}),this.quill.update(Ge.sources.SILENT),s!=null&&this.quill.setSelection(s,Ge.sources.SILENT)}highlightBlot(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"plain";if(n=this.languages[n]?n:"plain",n==="plain")return bf(e).split(`
`).reduce((a,l,o)=>(o!==0&&a.insert(`
`,{[Gi.blotName]:n}),a.insert(l)),new Ct);const s=this.quill.root.ownerDocument.createElement("div");return s.classList.add(Gi.className),s.innerHTML=pue(this.options.hljs,n,e),mj(this.quill.scroll,s,[(a,l)=>{const o=Kd.value(a);return o?l.compose(new Ct().retain(l.length(),{[Mr.blotName]:o})):l}],[(a,l)=>a.data.split(`
`).reduce((o,c,d)=>(d!==0&&o.insert(`
`,{[Gi.blotName]:n}),o.insert(c)),l)],new WeakMap)}}tI.DEFAULTS={hljs:window.hljs,interval:1e3,languages:[{key:"plain",label:"Plain"},{key:"bash",label:"Bash"},{key:"cpp",label:"C++"},{key:"cs",label:"C#"},{key:"css",label:"CSS"},{key:"diff",label:"Diff"},{key:"xml",label:"HTML/XML"},{key:"java",label:"Java"},{key:"javascript",label:"JavaScript"},{key:"markdown",label:"Markdown"},{key:"php",label:"PHP"},{key:"python",label:"Python"},{key:"ruby",label:"Ruby"},{key:"sql",label:"SQL"}]};class da extends Ni{static blotName="table";static tagName="TD";static create(e){const n=super.create();return e?n.setAttribute("data-row",e):n.setAttribute("data-row",hj()),n}static formats(e){if(e.hasAttribute("data-row"))return e.getAttribute("data-row")}cellOffset(){return this.parent?this.parent.children.indexOf(this):-1}format(e,n){e===da.blotName&&n?this.domNode.setAttribute("data-row",n):super.format(e,n)}row(){return this.parent}rowOffset(){return this.row()?this.row().rowOffset():-1}table(){return this.row()&&this.row().table()}}class xo extends Fo{static blotName="table-row";static tagName="TR";checkMerge(){if(super.checkMerge()&&this.next.children.head!=null){const e=this.children.head.formats(),n=this.children.tail.formats(),s=this.next.children.head.formats(),a=this.next.children.tail.formats();return e.table===n.table&&e.table===s.table&&e.table===a.table}return!1}optimize(e){super.optimize(e),this.children.forEach(n=>{if(n.next==null)return;const s=n.formats(),a=n.next.formats();if(s.table!==a.table){const l=this.splitAfter(n);l&&l.optimize(),this.prev&&this.prev.optimize()}})}rowOffset(){return this.parent?this.parent.children.indexOf(this):-1}table(){return this.parent&&this.parent.parent}}class hl extends Fo{static blotName="table-body";static tagName="TBODY"}class pg extends Fo{static blotName="table-container";static tagName="TABLE";balanceCells(){const e=this.descendants(xo),n=e.reduce((s,a)=>Math.max(a.children.length,s),0);e.forEach(s=>{new Array(n-s.children.length).fill(0).forEach(()=>{let a;s.children.head!=null&&(a=da.formats(s.children.head.domNode));const l=this.scroll.create(da.blotName,a);s.appendChild(l),l.optimize()})})}cells(e){return this.rows().map(n=>n.children.at(e))}deleteColumn(e){const[n]=this.descendant(hl);n==null||n.children.head==null||n.children.forEach(s=>{const a=s.children.at(e);a?.remove()})}insertColumn(e){const[n]=this.descendant(hl);n==null||n.children.head==null||n.children.forEach(s=>{const a=s.children.at(e),l=da.formats(s.children.head.domNode),o=this.scroll.create(da.blotName,l);s.insertBefore(o,a)})}insertRow(e){const[n]=this.descendant(hl);if(n==null||n.children.head==null)return;const s=hj(),a=this.scroll.create(xo.blotName);n.children.head.children.forEach(()=>{const o=this.scroll.create(da.blotName,s);a.appendChild(o)});const l=n.children.at(e);n.insertBefore(a,l)}rows(){const e=this.children.head;return e==null?[]:e.children.map(n=>n)}}pg.allowedChildren=[hl];hl.requiredContainer=pg;hl.allowedChildren=[xo];xo.requiredContainer=hl;xo.allowedChildren=[da];da.requiredContainer=xo;function hj(){return`row-${Math.random().toString(36).slice(2,6)}`}class gue extends tr{static register(){Ge.register(da),Ge.register(xo),Ge.register(hl),Ge.register(pg)}constructor(){super(...arguments),this.listenBalanceCells()}balanceTables(){this.quill.scroll.descendants(pg).forEach(e=>{e.balanceCells()})}deleteColumn(){const[e,,n]=this.getTable();n!=null&&(e.deleteColumn(n.cellOffset()),this.quill.update(Ge.sources.USER))}deleteRow(){const[,e]=this.getTable();e!=null&&(e.remove(),this.quill.update(Ge.sources.USER))}deleteTable(){const[e]=this.getTable();if(e==null)return;const n=e.offset();e.remove(),this.quill.update(Ge.sources.USER),this.quill.setSelection(n,Ge.sources.SILENT)}getTable(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.quill.getSelection();if(e==null)return[null,null,null,-1];const[n,s]=this.quill.getLine(e.index);if(n==null||n.statics.blotName!==da.blotName)return[null,null,null,-1];const a=n.parent;return[a.parent.parent,a,n,s]}insertColumn(e){const n=this.quill.getSelection();if(!n)return;const[s,a,l]=this.getTable(n);if(l==null)return;const o=l.cellOffset();s.insertColumn(o+e),this.quill.update(Ge.sources.USER);let c=a.rowOffset();e===0&&(c+=1),this.quill.setSelection(n.index+c,n.length,Ge.sources.SILENT)}insertColumnLeft(){this.insertColumn(0)}insertColumnRight(){this.insertColumn(1)}insertRow(e){const n=this.quill.getSelection();if(!n)return;const[s,a,l]=this.getTable(n);if(l==null)return;const o=a.rowOffset();s.insertRow(o+e),this.quill.update(Ge.sources.USER),e>0?this.quill.setSelection(n,Ge.sources.SILENT):this.quill.setSelection(n.index+a.children.length,n.length,Ge.sources.SILENT)}insertRowAbove(){this.insertRow(0)}insertRowBelow(){this.insertRow(1)}insertTable(e,n){const s=this.quill.getSelection();if(s==null)return;const a=new Array(e).fill(0).reduce(l=>{const o=new Array(n).fill(`
`).join("");return l.insert(o,{table:hj()})},new Ct().retain(s.index));this.quill.updateContents(a,Ge.sources.USER),this.quill.setSelection(s.index,Ge.sources.SILENT),this.balanceTables()}listenBalanceCells(){this.quill.on(Ge.events.SCROLL_OPTIMIZE,e=>{e.some(n=>["TD","TR","TBODY","TABLE"].includes(n.target.tagName)?(this.quill.once(Ge.events.TEXT_CHANGE,(s,a,l)=>{l===Ge.sources.USER&&this.balanceTables()}),!0):!1)})}}const X_=qr("quill:toolbar");class pj extends tr{constructor(e,n){if(super(e,n),Array.isArray(this.options.container)){const s=document.createElement("div");s.setAttribute("role","toolbar"),fue(s,this.options.container),e.container?.parentNode?.insertBefore(s,e.container),this.container=s}else typeof this.options.container=="string"?this.container=document.querySelector(this.options.container):this.container=this.options.container;if(!(this.container instanceof HTMLElement)){X_.error("Container required for toolbar",this.options);return}this.container.classList.add("ql-toolbar"),this.controls=[],this.handlers={},this.options.handlers&&Object.keys(this.options.handlers).forEach(s=>{const a=this.options.handlers?.[s];a&&this.addHandler(s,a)}),Array.from(this.container.querySelectorAll("button, select")).forEach(s=>{this.attach(s)}),this.quill.on(Ge.events.EDITOR_CHANGE,()=>{const[s]=this.quill.selection.getRange();this.update(s)})}addHandler(e,n){this.handlers[e]=n}attach(e){let n=Array.from(e.classList).find(a=>a.indexOf("ql-")===0);if(!n)return;if(n=n.slice(3),e.tagName==="BUTTON"&&e.setAttribute("type","button"),this.handlers[n]==null&&this.quill.scroll.query(n)==null){X_.warn("ignoring attaching to nonexistent format",n,e);return}const s=e.tagName==="SELECT"?"change":"click";e.addEventListener(s,a=>{let l;if(e.tagName==="SELECT"){if(e.selectedIndex<0)return;const c=e.options[e.selectedIndex];c.hasAttribute("selected")?l=!1:l=c.value||!1}else e.classList.contains("ql-active")?l=!1:l=e.value||!e.hasAttribute("value"),a.preventDefault();this.quill.focus();const[o]=this.quill.selection.getRange();if(this.handlers[n]!=null)this.handlers[n].call(this,l);else if(this.quill.scroll.query(n).prototype instanceof Is){if(l=prompt(`Enter ${n}`),!l)return;this.quill.updateContents(new Ct().retain(o.index).delete(o.length).insert({[n]:l}),Ge.sources.USER)}else this.quill.format(n,l,Ge.sources.USER);this.update(o)}),this.controls.push([n,e])}update(e){const n=e==null?{}:this.quill.getFormat(e);this.controls.forEach(s=>{const[a,l]=s;if(l.tagName==="SELECT"){let o=null;if(e==null)o=null;else if(n[a]==null)o=l.querySelector("option[selected]");else if(!Array.isArray(n[a])){let c=n[a];typeof c=="string"&&(c=c.replace(/"/g,'\\"')),o=l.querySelector(`option[value="${c}"]`)}o==null?(l.value="",l.selectedIndex=-1):o.selected=!0}else if(e==null)l.classList.remove("ql-active"),l.setAttribute("aria-pressed","false");else if(l.hasAttribute("value")){const o=n[a],c=o===l.getAttribute("value")||o!=null&&o.toString()===l.getAttribute("value")||o==null&&!l.getAttribute("value");l.classList.toggle("ql-active",c),l.setAttribute("aria-pressed",c.toString())}else{const o=n[a]!=null;l.classList.toggle("ql-active",o),l.setAttribute("aria-pressed",o.toString())}})}}pj.DEFAULTS={};function J_(t,e,n){const s=document.createElement("button");s.setAttribute("type","button"),s.classList.add(`ql-${e}`),s.setAttribute("aria-pressed","false"),n!=null?(s.value=n,s.setAttribute("aria-label",`${e}: ${n}`)):s.setAttribute("aria-label",e),t.appendChild(s)}function fue(t,e){Array.isArray(e[0])||(e=[e]),e.forEach(n=>{const s=document.createElement("span");s.classList.add("ql-formats"),n.forEach(a=>{if(typeof a=="string")J_(s,a);else{const l=Object.keys(a)[0],o=a[l];Array.isArray(o)?vue(s,l,o):J_(s,l,o)}}),t.appendChild(s)})}function vue(t,e,n){const s=document.createElement("select");s.classList.add(`ql-${e}`),n.forEach(a=>{const l=document.createElement("option");a!==!1?l.setAttribute("value",String(a)):l.setAttribute("selected","selected"),s.appendChild(l)}),t.appendChild(s)}pj.DEFAULTS={container:null,handlers:{clean(){const t=this.quill.getSelection();if(t!=null)if(t.length===0){const e=this.quill.getFormat();Object.keys(e).forEach(n=>{this.quill.scroll.query(n,St.INLINE)!=null&&this.quill.format(n,!1,Ge.sources.USER)})}else this.quill.removeFormat(t.index,t.length,Ge.sources.USER)},direction(t){const{align:e}=this.quill.getFormat();t==="rtl"&&e==null?this.quill.format("align","right",Ge.sources.USER):!t&&e==="right"&&this.quill.format("align",!1,Ge.sources.USER),this.quill.format("direction",t,Ge.sources.USER)},indent(t){const e=this.quill.getSelection(),n=this.quill.getFormat(e),s=parseInt(n.indent||0,10);if(t==="+1"||t==="-1"){let a=t==="+1"?1:-1;n.direction==="rtl"&&(a*=-1),this.quill.format("indent",s+a,Ge.sources.USER)}},link(t){t===!0&&(t=prompt("Enter link URL:")),this.quill.format("link",t,Ge.sources.USER)},list(t){const e=this.quill.getSelection(),n=this.quill.getFormat(e);t==="check"?n.list==="checked"||n.list==="unchecked"?this.quill.format("list",!1,Ge.sources.USER):this.quill.format("list","unchecked",Ge.sources.USER):this.quill.format("list",t,Ge.sources.USER)}}};const xue='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="3" x2="13" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="9" y1="4" y2="4"/></svg>',yue='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="14" x2="4" y1="14" y2="14"/><line class="ql-stroke" x1="12" x2="6" y1="4" y2="4"/></svg>',bue='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="15" x2="5" y1="14" y2="14"/><line class="ql-stroke" x1="15" x2="9" y1="4" y2="4"/></svg>',kue='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="15" x2="3" y1="14" y2="14"/><line class="ql-stroke" x1="15" x2="3" y1="4" y2="4"/></svg>',wue='<svg viewbox="0 0 18 18"><g class="ql-fill ql-color-label"><polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"/><rect height="1" width="1" x="4" y="4"/><polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"/><rect height="1" width="1" x="2" y="6"/><rect height="1" width="1" x="3" y="5"/><rect height="1" width="1" x="4" y="7"/><polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"/><rect height="1" width="1" x="2" y="12"/><rect height="1" width="1" x="2" y="9"/><rect height="1" width="1" x="2" y="15"/><polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"/><rect height="1" width="1" x="3" y="8"/><path d="M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z"/><path d="M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z"/><path d="M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z"/><rect height="1" width="1" x="12" y="2"/><rect height="1" width="1" x="11" y="3"/><path d="M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z"/><rect height="1" width="1" x="2" y="3"/><rect height="1" width="1" x="6" y="2"/><rect height="1" width="1" x="3" y="2"/><rect height="1" width="1" x="5" y="3"/><rect height="1" width="1" x="9" y="2"/><rect height="1" width="1" x="15" y="14"/><polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"/><rect height="1" width="1" x="13" y="7"/><rect height="1" width="1" x="15" y="5"/><rect height="1" width="1" x="14" y="6"/><rect height="1" width="1" x="15" y="8"/><rect height="1" width="1" x="14" y="9"/><path d="M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z"/><rect height="1" width="1" x="14" y="3"/><polygon points="12 6.868 12 6 11.62 6 12 6.868"/><rect height="1" width="1" x="15" y="2"/><rect height="1" width="1" x="12" y="5"/><rect height="1" width="1" x="13" y="4"/><polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"/><rect height="1" width="1" x="9" y="14"/><rect height="1" width="1" x="8" y="15"/><path d="M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z"/><rect height="1" width="1" x="5" y="15"/><path d="M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z"/><rect height="1" width="1" x="11" y="15"/><path d="M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z"/><rect height="1" width="1" x="14" y="15"/><rect height="1" width="1" x="15" y="11"/></g><polyline class="ql-stroke" points="5.5 13 9 5 12.5 13"/><line class="ql-stroke" x1="11.63" x2="6.38" y1="11" y2="11"/></svg>',jue='<svg viewbox="0 0 18 18"><rect class="ql-fill ql-stroke" height="3" width="3" x="4" y="5"/><rect class="ql-fill ql-stroke" height="3" width="3" x="11" y="5"/><path class="ql-even ql-fill ql-stroke" d="M7,8c0,4.031-3,5-3,5"/><path class="ql-even ql-fill ql-stroke" d="M14,8c0,4.031-3,5-3,5"/></svg>',Nue='<svg viewbox="0 0 18 18"><path class="ql-stroke" d="M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z"/><path class="ql-stroke" d="M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z"/></svg>',Cue='<svg class="" viewbox="0 0 18 18"><line class="ql-stroke" x1="5" x2="13" y1="3" y2="3"/><line class="ql-stroke" x1="6" x2="9.35" y1="12" y2="3"/><line class="ql-stroke" x1="11" x2="15" y1="11" y2="15"/><line class="ql-stroke" x1="15" x2="11" y1="11" y2="15"/><rect class="ql-fill" height="1" rx="0.5" ry="0.5" width="7" x="2" y="14"/></svg>',eS='<svg viewbox="0 0 18 18"><polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"/><polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"/><line class="ql-stroke" x1="10" x2="8" y1="5" y2="13"/></svg>',_ue='<svg viewbox="0 0 18 18"><line class="ql-color-label ql-stroke ql-transparent" x1="3" x2="15" y1="15" y2="15"/><polyline class="ql-stroke" points="5.5 11 9 3 12.5 11"/><line class="ql-stroke" x1="11.63" x2="6.38" y1="9" y2="9"/></svg>',Sue='<svg viewbox="0 0 18 18"><polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"/><line class="ql-stroke ql-fill" x1="15" x2="11" y1="4" y2="4"/><path class="ql-fill" d="M11,3a3,3,0,0,0,0,6h1V3H11Z"/><rect class="ql-fill" height="11" width="1" x="11" y="4"/><rect class="ql-fill" height="11" width="1" x="13" y="4"/></svg>',Eue='<svg viewbox="0 0 18 18"><polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"/><line class="ql-stroke ql-fill" x1="9" x2="5" y1="4" y2="4"/><path class="ql-fill" d="M5,3A3,3,0,0,0,5,9H6V3H5Z"/><rect class="ql-fill" height="11" width="1" x="5" y="4"/><rect class="ql-fill" height="11" width="1" x="7" y="4"/></svg>',Tue='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z"/><rect class="ql-fill" height="1.6" rx="0.8" ry="0.8" width="5" x="5.15" y="6.2"/><path class="ql-fill" d="M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z"/></svg>',Aue='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z"/></svg>',Due='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',Rue='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.65186,12.30664a2.6742,2.6742,0,0,1-2.915,2.68457,3.96592,3.96592,0,0,1-2.25537-.6709.56007.56007,0,0,1-.13232-.83594L11.64648,13c.209-.34082.48389-.36328.82471-.1543a2.32654,2.32654,0,0,0,1.12256.33008c.71484,0,1.12207-.35156,1.12207-.78125,0-.61523-.61621-.86816-1.46338-.86816H13.2085a.65159.65159,0,0,1-.68213-.41895l-.05518-.10937a.67114.67114,0,0,1,.14307-.78125l.71533-.86914a8.55289,8.55289,0,0,1,.68213-.7373V8.58887a3.93913,3.93913,0,0,1-.748.05469H11.9873a.54085.54085,0,0,1-.605-.60547V7.59863a.54085.54085,0,0,1,.605-.60547h3.75146a.53773.53773,0,0,1,.60547.59375v.17676a1.03723,1.03723,0,0,1-.27539.748L14.74854,10.0293A2.31132,2.31132,0,0,1,16.65186,12.30664ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',Pue='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm7.05371,7.96582v.38477c0,.39648-.165.60547-.46191.60547h-.47314v1.29785a.54085.54085,0,0,1-.605.60547h-.69336a.54085.54085,0,0,1-.605-.60547V12.95605H11.333a.5412.5412,0,0,1-.60547-.60547v-.15332a1.199,1.199,0,0,1,.22021-.748l2.56348-4.05957a.7819.7819,0,0,1,.72607-.39648h1.27637a.54085.54085,0,0,1,.605.60547v3.7627h.33008A.54055.54055,0,0,1,17.05371,11.96582ZM14.28125,8.7207h-.022a4.18969,4.18969,0,0,1-.38525.81348l-1.188,1.80469v.02246h1.5293V9.60059A7.04058,7.04058,0,0,1,14.28125,8.7207Z"/></svg>',Mue='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.74023,12.18555a2.75131,2.75131,0,0,1-2.91553,2.80566,3.908,3.908,0,0,1-2.25537-.68164.54809.54809,0,0,1-.13184-.8252L11.73438,13c.209-.34082.48389-.36328.8252-.1543a2.23757,2.23757,0,0,0,1.1001.33008,1.01827,1.01827,0,0,0,1.1001-.96777c0-.61621-.53906-.97949-1.25439-.97949a2.15554,2.15554,0,0,0-.64893.09961,1.15209,1.15209,0,0,1-.814.01074l-.12109-.04395a.64116.64116,0,0,1-.45117-.71484l.231-3.00391a.56666.56666,0,0,1,.62744-.583H15.541a.54085.54085,0,0,1,.605.60547v.43945a.54085.54085,0,0,1-.605.60547H13.41748l-.04395.72559a1.29306,1.29306,0,0,1-.04395.30859h.022a2.39776,2.39776,0,0,1,.57227-.07715A2.53266,2.53266,0,0,1,16.74023,12.18555ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',Iue='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M14.51758,9.64453a1.85627,1.85627,0,0,0-1.24316.38477H13.252a1.73532,1.73532,0,0,1,1.72754-1.4082,2.66491,2.66491,0,0,1,.5498.06641c.35254.05469.57227.01074.70508-.40723l.16406-.5166a.53393.53393,0,0,0-.373-.75977,4.83723,4.83723,0,0,0-1.17773-.14258c-2.43164,0-3.7627,2.17773-3.7627,4.43359,0,2.47559,1.60645,3.69629,3.19043,3.69629A2.70585,2.70585,0,0,0,16.96,12.19727,2.43861,2.43861,0,0,0,14.51758,9.64453Zm-.23047,3.58691c-.67187,0-1.22168-.81445-1.22168-1.45215,0-.47363.30762-.583.72559-.583.96875,0,1.27734.59375,1.27734,1.12207A.82182.82182,0,0,1,14.28711,13.23145ZM10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Z"/></svg>',Oue='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="13" y1="4" y2="4"/><line class="ql-stroke" x1="5" x2="11" y1="14" y2="14"/><line class="ql-stroke" x1="8" x2="10" y1="14" y2="4"/></svg>',Fue='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="10" width="12" x="3" y="4"/><circle class="ql-fill" cx="6" cy="7" r="1"/><polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"/></svg>',Lue='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"/></svg>',$ue='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-stroke" points="5 7 5 11 3 9 5 7"/></svg>',Bue='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="11" y1="7" y2="11"/><path class="ql-even ql-stroke" d="M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z"/><path class="ql-even ql-stroke" d="M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z"/></svg>',que='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="6" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="6" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="6" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="3" y1="4" y2="4"/><line class="ql-stroke" x1="3" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="3" x2="3" y1="14" y2="14"/></svg>',Hue='<svg class="" viewbox="0 0 18 18"><line class="ql-stroke" x1="9" x2="15" y1="4" y2="4"/><polyline class="ql-stroke" points="3 4 4 5 6 3"/><line class="ql-stroke" x1="9" x2="15" y1="14" y2="14"/><polyline class="ql-stroke" points="3 14 4 15 6 13"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-stroke" points="3 9 4 10 6 8"/></svg>',zue='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="7" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="7" x2="15" y1="14" y2="14"/><line class="ql-stroke ql-thin" x1="2.5" x2="4.5" y1="5.5" y2="5.5"/><path class="ql-fill" d="M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z"/><path class="ql-stroke ql-thin" d="M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156"/><path class="ql-stroke ql-thin" d="M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109"/></svg>',Vue='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z"/><path class="ql-fill" d="M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z"/></svg>',Uue='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z"/><path class="ql-fill" d="M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z"/></svg>',Wue='<svg viewbox="0 0 18 18"><line class="ql-stroke ql-thin" x1="15.5" x2="2.5" y1="8.5" y2="9.5"/><path class="ql-fill" d="M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z"/><path class="ql-fill" d="M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z"/></svg>',Kue='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="12" width="12" x="3" y="3"/><rect class="ql-fill" height="2" width="3" x="5" y="5"/><rect class="ql-fill" height="2" width="4" x="9" y="5"/><g class="ql-fill ql-transparent"><rect height="2" width="3" x="5" y="8"/><rect height="2" width="4" x="9" y="8"/><rect height="2" width="3" x="5" y="11"/><rect height="2" width="4" x="9" y="11"/></g></svg>',Gue='<svg viewbox="0 0 18 18"><path class="ql-stroke" d="M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3"/><rect class="ql-fill" height="1" rx="0.5" ry="0.5" width="12" x="3" y="15"/></svg>',Yue='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="12" width="12" x="3" y="3"/><rect class="ql-fill" height="12" width="1" x="5" y="3"/><rect class="ql-fill" height="12" width="1" x="12" y="3"/><rect class="ql-fill" height="2" width="8" x="5" y="8"/><rect class="ql-fill" height="1" width="3" x="3" y="5"/><rect class="ql-fill" height="1" width="3" x="3" y="7"/><rect class="ql-fill" height="1" width="3" x="3" y="10"/><rect class="ql-fill" height="1" width="3" x="3" y="12"/><rect class="ql-fill" height="1" width="3" x="12" y="5"/><rect class="ql-fill" height="1" width="3" x="12" y="7"/><rect class="ql-fill" height="1" width="3" x="12" y="10"/><rect class="ql-fill" height="1" width="3" x="12" y="12"/></svg>',Bm={align:{"":xue,center:yue,right:bue,justify:kue},background:wue,blockquote:jue,bold:Nue,clean:Cue,code:eS,"code-block":eS,color:_ue,direction:{"":Sue,rtl:Eue},formula:Tue,header:{1:Aue,2:Due,3:Rue,4:Pue,5:Mue,6:Iue},italic:Oue,image:Fue,indent:{"+1":Lue,"-1":$ue},link:Bue,list:{bullet:que,check:Hue,ordered:zue},script:{sub:Vue,super:Uue},strike:Wue,table:Kue,underline:Gue,video:Yue},Que='<svg viewbox="0 0 18 18"><polygon class="ql-stroke" points="7 11 9 13 11 11 7 11"/><polygon class="ql-stroke" points="7 7 9 5 11 7 7 7"/></svg>';let tS=0;function nS(t,e){t.setAttribute(e,`${t.getAttribute(e)!=="true"}`)}class wf{constructor(e){this.select=e,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",()=>{this.togglePicker()}),this.label.addEventListener("keydown",n=>{switch(n.key){case"Enter":this.togglePicker();break;case"Escape":this.escape(),n.preventDefault();break}}),this.select.addEventListener("change",this.update.bind(this))}togglePicker(){this.container.classList.toggle("ql-expanded"),nS(this.label,"aria-expanded"),nS(this.options,"aria-hidden")}buildItem(e){const n=document.createElement("span");n.tabIndex="0",n.setAttribute("role","button"),n.classList.add("ql-picker-item");const s=e.getAttribute("value");return s&&n.setAttribute("data-value",s),e.textContent&&n.setAttribute("data-label",e.textContent),n.addEventListener("click",()=>{this.selectItem(n,!0)}),n.addEventListener("keydown",a=>{switch(a.key){case"Enter":this.selectItem(n,!0),a.preventDefault();break;case"Escape":this.escape(),a.preventDefault();break}}),n}buildLabel(){const e=document.createElement("span");return e.classList.add("ql-picker-label"),e.innerHTML=Que,e.tabIndex="0",e.setAttribute("role","button"),e.setAttribute("aria-expanded","false"),this.container.appendChild(e),e}buildOptions(){const e=document.createElement("span");e.classList.add("ql-picker-options"),e.setAttribute("aria-hidden","true"),e.tabIndex="-1",e.id=`ql-picker-options-${tS}`,tS+=1,this.label.setAttribute("aria-controls",e.id),this.options=e,Array.from(this.select.options).forEach(n=>{const s=this.buildItem(n);e.appendChild(s),n.selected===!0&&this.selectItem(s)}),this.container.appendChild(e)}buildPicker(){Array.from(this.select.attributes).forEach(e=>{this.container.setAttribute(e.name,e.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}escape(){this.close(),setTimeout(()=>this.label.focus(),1)}close(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}selectItem(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const s=this.container.querySelector(".ql-selected");e!==s&&(s?.classList.remove("ql-selected"),e!=null&&(e.classList.add("ql-selected"),this.select.selectedIndex=Array.from(e.parentNode.children).indexOf(e),e.hasAttribute("data-value")?this.label.setAttribute("data-value",e.getAttribute("data-value")):this.label.removeAttribute("data-value"),e.hasAttribute("data-label")?this.label.setAttribute("data-label",e.getAttribute("data-label")):this.label.removeAttribute("data-label"),n&&(this.select.dispatchEvent(new Event("change")),this.close())))}update(){let e;if(this.select.selectedIndex>-1){const s=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];e=this.select.options[this.select.selectedIndex],this.selectItem(s)}else this.selectItem(null);const n=e!=null&&e!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",n)}}class nI extends wf{constructor(e,n){super(e),this.label.innerHTML=n,this.container.classList.add("ql-color-picker"),Array.from(this.container.querySelectorAll(".ql-picker-item")).slice(0,7).forEach(s=>{s.classList.add("ql-primary")})}buildItem(e){const n=super.buildItem(e);return n.style.backgroundColor=e.getAttribute("value")||"",n}selectItem(e,n){super.selectItem(e,n);const s=this.label.querySelector(".ql-color-label"),a=e&&e.getAttribute("data-value")||"";s&&(s.tagName==="line"?s.style.stroke=a:s.style.fill=a)}}class iI extends wf{constructor(e,n){super(e),this.container.classList.add("ql-icon-picker"),Array.from(this.container.querySelectorAll(".ql-picker-item")).forEach(s=>{s.innerHTML=n[s.getAttribute("data-value")||""]}),this.defaultItem=this.container.querySelector(".ql-selected"),this.selectItem(this.defaultItem)}selectItem(e,n){super.selectItem(e,n);const s=e||this.defaultItem;if(s!=null){if(this.label.innerHTML===s.innerHTML)return;this.label.innerHTML=s.innerHTML}}}const Zue=t=>{const{overflowY:e}=getComputedStyle(t,null);return e!=="visible"&&e!=="clip"};class sI{constructor(e,n){this.quill=e,this.boundsContainer=n||document.body,this.root=e.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,Zue(this.quill.root)&&this.quill.root.addEventListener("scroll",()=>{this.root.style.marginTop=`${-1*this.quill.root.scrollTop}px`}),this.hide()}hide(){this.root.classList.add("ql-hidden")}position(e){const n=e.left+e.width/2-this.root.offsetWidth/2,s=e.bottom+this.quill.root.scrollTop;this.root.style.left=`${n}px`,this.root.style.top=`${s}px`,this.root.classList.remove("ql-flip");const a=this.boundsContainer.getBoundingClientRect(),l=this.root.getBoundingClientRect();let o=0;if(l.right>a.right&&(o=a.right-l.right,this.root.style.left=`${n+o}px`),l.left<a.left&&(o=a.left-l.left,this.root.style.left=`${n+o}px`),l.bottom>a.bottom){const c=l.bottom-l.top,d=e.bottom-e.top+c;this.root.style.top=`${s-d}px`,this.root.classList.add("ql-flip")}return o}show(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}const Xue=[!1,"center","right","justify"],Jue=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],ehe=[!1,"serif","monospace"],the=["1","2","3",!1],nhe=["small",!1,"large","huge"];class bu extends dd{constructor(e,n){super(e,n);const s=a=>{if(!document.body.contains(e.root)){document.body.removeEventListener("click",s);return}this.tooltip!=null&&!this.tooltip.root.contains(a.target)&&document.activeElement!==this.tooltip.textbox&&!this.quill.hasFocus()&&this.tooltip.hide(),this.pickers!=null&&this.pickers.forEach(l=>{l.container.contains(a.target)||l.close()})};e.emitter.listenDOM("click",document.body,s)}addModule(e){const n=super.addModule(e);return e==="toolbar"&&this.extendToolbar(n),n}buildButtons(e,n){Array.from(e).forEach(s=>{(s.getAttribute("class")||"").split(/\s+/).forEach(l=>{if(l.startsWith("ql-")&&(l=l.slice(3),n[l]!=null))if(l==="direction")s.innerHTML=n[l][""]+n[l].rtl;else if(typeof n[l]=="string")s.innerHTML=n[l];else{const o=s.value||"";o!=null&&n[l][o]&&(s.innerHTML=n[l][o])}})})}buildPickers(e,n){this.pickers=Array.from(e).map(a=>{if(a.classList.contains("ql-align")&&(a.querySelector("option")==null&&Md(a,Xue),typeof n.align=="object"))return new iI(a,n.align);if(a.classList.contains("ql-background")||a.classList.contains("ql-color")){const l=a.classList.contains("ql-background")?"background":"color";return a.querySelector("option")==null&&Md(a,Jue,l==="background"?"#ffffff":"#000000"),new nI(a,n[l])}return a.querySelector("option")==null&&(a.classList.contains("ql-font")?Md(a,ehe):a.classList.contains("ql-header")?Md(a,the):a.classList.contains("ql-size")&&Md(a,nhe)),new wf(a)});const s=()=>{this.pickers.forEach(a=>{a.update()})};this.quill.on(wt.events.EDITOR_CHANGE,s)}}bu.DEFAULTS=ul({},dd.DEFAULTS,{modules:{toolbar:{handlers:{formula(){this.quill.theme.tooltip.edit("formula")},image(){let t=this.container.querySelector("input.ql-image[type=file]");t==null&&(t=document.createElement("input"),t.setAttribute("type","file"),t.setAttribute("accept",this.quill.uploader.options.mimetypes.join(", ")),t.classList.add("ql-image"),t.addEventListener("change",()=>{const e=this.quill.getSelection(!0);this.quill.uploader.upload(e,t.files),t.value=""}),this.container.appendChild(t)),t.click()},video(){this.quill.theme.tooltip.edit("video")}}}}});class aI extends sI{constructor(e,n){super(e,n),this.textbox=this.root.querySelector('input[type="text"]'),this.listen()}listen(){this.textbox.addEventListener("keydown",e=>{e.key==="Enter"?(this.save(),e.preventDefault()):e.key==="Escape"&&(this.cancel(),e.preventDefault())})}cancel(){this.hide(),this.restoreFocus()}edit(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"link",n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),this.textbox==null)return;n!=null?this.textbox.value=n:e!==this.root.getAttribute("data-mode")&&(this.textbox.value="");const s=this.quill.getBounds(this.quill.selection.savedRange);s!=null&&this.position(s),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute(`data-${e}`)||""),this.root.setAttribute("data-mode",e)}restoreFocus(){this.quill.focus({preventScroll:!0})}save(){let{value:e}=this.textbox;switch(this.root.getAttribute("data-mode")){case"link":{const{scrollTop:n}=this.quill.root;this.linkRange?(this.quill.formatText(this.linkRange,"link",e,wt.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",e,wt.sources.USER)),this.quill.root.scrollTop=n;break}case"video":e=ihe(e);case"formula":{if(!e)break;const n=this.quill.getSelection(!0);if(n!=null){const s=n.index+n.length;this.quill.insertEmbed(s,this.root.getAttribute("data-mode"),e,wt.sources.USER),this.root.getAttribute("data-mode")==="formula"&&this.quill.insertText(s+1," ",wt.sources.USER),this.quill.setSelection(s+2,wt.sources.USER)}break}}this.textbox.value="",this.hide()}}function ihe(t){let e=t.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||t.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return e?`${e[1]||"https"}://www.youtube.com/embed/${e[2]}?showinfo=0`:(e=t.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?`${e[1]||"https"}://player.vimeo.com/video/${e[2]}/`:t}function Md(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;e.forEach(s=>{const a=document.createElement("option");s===n?a.setAttribute("selected","selected"):a.setAttribute("value",String(s)),t.appendChild(a)})}const she=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]];class ahe extends aI{static TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join("");constructor(e,n){super(e,n),this.quill.on(wt.events.EDITOR_CHANGE,(s,a,l,o)=>{if(s===wt.events.SELECTION_CHANGE)if(a!=null&&a.length>0&&o===wt.sources.USER){this.show(),this.root.style.left="0px",this.root.style.width="",this.root.style.width=`${this.root.offsetWidth}px`;const c=this.quill.getLines(a.index,a.length);if(c.length===1){const d=this.quill.getBounds(a);d!=null&&this.position(d)}else{const d=c[c.length-1],m=this.quill.getIndex(d),u=Math.min(d.length()-1,a.index+a.length-m),h=this.quill.getBounds(new vo(m,u));h!=null&&this.position(h)}}else document.activeElement!==this.textbox&&this.quill.hasFocus()&&this.hide()})}listen(){super.listen(),this.root.querySelector(".ql-close").addEventListener("click",()=>{this.root.classList.remove("ql-editing")}),this.quill.on(wt.events.SCROLL_OPTIMIZE,()=>{setTimeout(()=>{if(this.root.classList.contains("ql-hidden"))return;const e=this.quill.getSelection();if(e!=null){const n=this.quill.getBounds(e);n!=null&&this.position(n)}},1)})}cancel(){this.show()}position(e){const n=super.position(e),s=this.root.querySelector(".ql-tooltip-arrow");return s.style.marginLeft="",n!==0&&(s.style.marginLeft=`${-1*n-s.offsetWidth/2}px`),n}}class rI extends bu{constructor(e,n){n.modules.toolbar!=null&&n.modules.toolbar.container==null&&(n.modules.toolbar.container=she),super(e,n),this.quill.container.classList.add("ql-bubble")}extendToolbar(e){this.tooltip=new ahe(this.quill,this.options.bounds),e.container!=null&&(this.tooltip.root.appendChild(e.container),this.buildButtons(e.container.querySelectorAll("button"),Bm),this.buildPickers(e.container.querySelectorAll("select"),Bm))}}rI.DEFAULTS=ul({},bu.DEFAULTS,{modules:{toolbar:{handlers:{link(t){t?this.quill.theme.tooltip.edit():this.quill.format("link",!1,Ge.sources.USER)}}}}});const rhe=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]];class lhe extends aI{static TEMPLATE=['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join("");preview=this.root.querySelector("a.ql-preview");listen(){super.listen(),this.root.querySelector("a.ql-action").addEventListener("click",e=>{this.root.classList.contains("ql-editing")?this.save():this.edit("link",this.preview.textContent),e.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",e=>{if(this.linkRange!=null){const n=this.linkRange;this.restoreFocus(),this.quill.formatText(n,"link",!1,wt.sources.USER),delete this.linkRange}e.preventDefault(),this.hide()}),this.quill.on(wt.events.SELECTION_CHANGE,(e,n,s)=>{if(e!=null){if(e.length===0&&s===wt.sources.USER){const[a,l]=this.quill.scroll.descendant(hg,e.index);if(a!=null){this.linkRange=new vo(e.index-l,a.length());const o=hg.formats(a.domNode);this.preview.textContent=o,this.preview.setAttribute("href",o),this.show();const c=this.quill.getBounds(this.linkRange);c!=null&&this.position(c);return}}else delete this.linkRange;this.hide()}})}show(){super.show(),this.root.removeAttribute("data-mode")}}class lI extends bu{constructor(e,n){n.modules.toolbar!=null&&n.modules.toolbar.container==null&&(n.modules.toolbar.container=rhe),super(e,n),this.quill.container.classList.add("ql-snow")}extendToolbar(e){e.container!=null&&(e.container.classList.add("ql-snow"),this.buildButtons(e.container.querySelectorAll("button"),Bm),this.buildPickers(e.container.querySelectorAll("select"),Bm),this.tooltip=new lhe(this.quill,this.options.bounds),e.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"k",shortKey:!0},(n,s)=>{e.handlers.link.call(e,!s.format.link)}))}}lI.DEFAULTS=ul({},bu.DEFAULTS,{modules:{toolbar:{handlers:{link(t){if(t){const e=this.quill.getSelection();if(e==null||e.length===0)return;let n=this.quill.getText(e);/^\S+@\S+\.\S+$/.test(n)&&n.indexOf("mailto:")!==0&&(n=`mailto:${n}`);const{tooltip:s}=this.quill.theme;s.edit("link",n)}else this.quill.format("link",!1,Ge.sources.USER)}}}}});Ge.register({"attributors/attribute/direction":VM,"attributors/class/align":qM,"attributors/class/background":ume,"attributors/class/color":mme,"attributors/class/direction":UM,"attributors/class/font":GM,"attributors/class/size":QM,"attributors/style/align":HM,"attributors/style/background":lj,"attributors/style/color":rj,"attributors/style/direction":WM,"attributors/style/font":YM,"attributors/style/size":ZM},!0);Ge.register({"formats/align":qM,"formats/direction":UM,"formats/indent":sue,"formats/background":lj,"formats/color":rj,"formats/font":GM,"formats/size":QM,"formats/blockquote":aue,"formats/code-block":Gi,"formats/header":rue,"formats/list":yu,"formats/bold":uj,"formats/code":oj,"formats/italic":lue,"formats/link":hg,"formats/script":oue,"formats/strike":cue,"formats/underline":due,"formats/formula":mue,"formats/image":uue,"formats/video":hue,"modules/syntax":tI,"modules/table":gue,"modules/toolbar":pj,"themes/bubble":rI,"themes/snow":lI,"ui/icons":Bm,"ui/picker":wf,"ui/icon-picker":iI,"ui/color-picker":nI,"ui/tooltip":sI},!0);class Bo extends He.Component{constructor(e){super(e),this.editingAreaRef=f.createRef(),this.containerRef=f.createRef(),this.dirtyProps=["modules","formats","bounds","theme","children"],this.cleanProps=["id","className","style","placeholder","tabIndex","onChange","onChangeSelection","onFocus","onBlur","onKeyPress","onKeyDown","onKeyUp"],this.state={generation:0},this.selection=null,this.onEditorChange=(s,a,l,o)=>{s==="text-change"?this.onEditorChangeText?.(this.editor.root.innerHTML,a,o,this.unprivilegedEditor):s==="selection-change"&&this.onEditorChangeSelection?.(a,o,this.unprivilegedEditor)};const n=this.isControlled()?e.value:e.defaultValue;this.value=n??""}validateProps(e){if(He.Children.count(e.children)>1)throw new Error("The Quill editing area can only be composed of a single React element.");if(He.Children.count(e.children)&&He.Children.only(e.children)?.type==="textarea")throw new Error("Quill does not support editing on a <textarea>. Use a <div> instead.");if(this.lastDeltaChangeSet&&e.value===this.lastDeltaChangeSet)throw new Error("You are passing the `delta` object from the `onChange` event back as `value`. You most probably want `editor.getContents()` instead. See: https://github.com/zenoamaro/react-quill#using-deltas")}shouldComponentUpdate(e,n){if(this.validateProps(e),!this.editor||this.state.generation!==n.generation)return!0;if("value"in e){const s=this.getEditorContents(),a=e.value??"";this.isEqualValue(a,s)||this.setEditorContents(this.editor,a)}return e.readOnly!==this.props.readOnly&&this.setEditorReadOnly(this.editor,e.readOnly),[...this.cleanProps,...this.dirtyProps].some(s=>!Gr(e[s],this.props[s]))}shouldComponentRegenerate(e){return this.dirtyProps.some(n=>!Gr(e[n],this.props[n]))}componentDidMount(){this.instantiateEditor(),this.setEditorContents(this.editor,this.getEditorContents())}componentWillUnmount(){this.destroyEditor()}componentDidUpdate(e,n){if(this.editor&&this.shouldComponentRegenerate(e)){const s=this.editor.getContents(),a=this.editor.getSelection();this.regenerationSnapshot={delta:s,selection:a},this.setState({generation:this.state.generation+1}),this.destroyEditor()}if(this.state.generation!==n.generation){const{delta:s,selection:a}=this.regenerationSnapshot;delete this.regenerationSnapshot,this.instantiateEditor();const l=this.editor;l.setContents(s),iS(()=>this.setEditorSelection(l,a))}}instantiateEditor(){this.editor?this.hookEditor(this.editor):this.editor=this.createEditor(this.getEditingArea(),this.getEditorConfig())}destroyEditor(){if(!this.editor)return;this.unhookEditor(this.editor);const e=this.props.modules?.toolbar;if(!(typeof e=="object"&&e&&"container"in e&&typeof e.container=="string"||typeof e=="string")){const s=this.containerRef.current?.querySelector(".ql-toolbar");s&&s.remove()}delete this.editor}isControlled(){return"value"in this.props}getEditorConfig(){return{bounds:this.props.bounds,formats:this.props.formats,modules:this.props.modules,placeholder:this.props.placeholder,readOnly:this.props.readOnly,tabIndex:this.props.tabIndex,theme:this.props.theme}}getEditor(){if(!this.editor)throw new Error("Accessing non-instantiated editor");return this.editor}createEditor(e,n){const s=new Ge(e,n);return n.tabIndex!=null&&this.setEditorTabIndex(s,n.tabIndex),this.hookEditor(s),s}hookEditor(e){this.unprivilegedEditor=this.makeUnprivilegedEditor(e),e.on("editor-change",this.onEditorChange)}unhookEditor(e){e.off("editor-change",this.onEditorChange)}getEditorContents(){return this.value}getEditorSelection(){return this.selection}isDelta(e){return e&&e.ops}isEqualValue(e,n){return this.isDelta(e)&&this.isDelta(n)?Gr(e.ops,n.ops):Gr(e,n)}setEditorContents(e,n){this.value=n;const s=this.getEditorSelection();typeof n=="string"?e.setContents(e.clipboard.convert({html:n})):e.setContents(n),iS(()=>this.setEditorSelection(e,s))}setEditorSelection(e,n){if(this.selection=n,n){const s=e.getLength();n.index=Math.max(0,Math.min(n.index,s-1)),n.length=Math.max(0,Math.min(n.length,s-1-n.index)),e.setSelection(n)}}setEditorTabIndex(e,n){e?.scroll?.domNode&&(e.scroll.domNode.tabIndex=n)}setEditorReadOnly(e,n){n?e.disable():e.enable()}makeUnprivilegedEditor(e){const n=e;return{getHTML:()=>n.root.innerHTML,getSemanticHTML:n.getSemanticHTML.bind(n),getLength:n.getLength.bind(n),getText:n.getText.bind(n),getContents:n.getContents.bind(n),getSelection:n.getSelection.bind(n),getBounds:n.getBounds.bind(n)}}getEditingArea(){const e=this.editingAreaRef.current;if(!e)throw new Error("Cannot find element for editing area");if(e.nodeType===3)throw new Error("Editing area cannot be a text node");return e}renderEditingArea(){const{children:e,preserveWhitespace:n}=this.props,{generation:s}=this.state,a={key:s,ref:this.editingAreaRef};return He.Children.count(e)?He.cloneElement(He.Children.only(e),a):n?He.createElement("pre",{...a}):He.createElement("div",{...a})}render(){return He.createElement("div",{ref:this.containerRef,id:this.props.id,style:this.props.style,key:this.state.generation,className:`quill ${this.props.className??""}`,onKeyPress:this.props.onKeyPress,onKeyDown:this.props.onKeyDown,onKeyUp:this.props.onKeyUp},this.renderEditingArea())}onEditorChangeText(e,n,s,a){if(!this.editor)return;const l=this.isDelta(this.value)?a.getContents():a.getHTML();l!==this.getEditorContents()&&(this.lastDeltaChangeSet=n,this.value=l,this.props.onChange?.(e,n,s,a))}onEditorChangeSelection(e,n,s){if(!this.editor)return;const a=this.getEditorSelection(),l=!a&&e,o=a&&!e;Gr(e,a)||(this.selection=e,this.props.onChangeSelection?.(e,n,s),l?this.props.onFocus?.(e,n,s):o&&this.props.onBlur?.(a,n,s))}focus(){this.editor&&this.editor.focus()}blur(){this.editor&&(this.selection=null,this.editor.blur())}}Bo.displayName="React Quill";Bo.Quill=Ge;Bo.defaultProps={theme:"snow",modules:{},readOnly:!1};function iS(t){Promise.resolve().then(t)}const ohe=({isEditing:t})=>{const{id:e}=Yt(),n=hn(),[s,a]=f.useState(""),[l,o]=f.useState(""),[c,d]=f.useState([]),[m,u]=f.useState(!1),[h,p]=f.useState(!1),g=f.useRef(null),{data:v,isLoading:x,error:y}=kn("settings","email-template",{id:e},{enabled:t&&!!e,select:_=>_?.status&&_.data?{status:_.status,message:_.message,data:{templatePost:_.data.templatePost||{},dynamicKeys:_.data.dynamic_keys||[]}}:_}),b=un("settings","email-template");f.useEffect(()=>{if(v?.status&&v.data&&!h){const{templatePost:_,dynamicKeys:N}=v.data;o(_.post_title||""),a(_.post_content||""),p(!0),d(N.map(A=>A.replace(/[{}]/g,""))||[])}},[v,h]),f.useEffect(()=>{if(y){let _;typeof y=="string"?_=y:y?.response?.data?.message?_=y.response.data.message:y?.message?_=y.message:_=r("Failed to load template","kivicare-clinic-management-system"),Ze.fire({icon:"error",title:r("Error","kivicare-clinic-management-system"),text:_,confirmButtonText:r("Ok","kivicare-clinic-management-system")}).then(()=>n(-1))}},[y,n]);const k=_=>{h&&a(_)},w=async()=>{try{const _={ID:e,post_content:s,post_title:l};u(!0);const N=await b.mutateAsync(_);N.status!==!0?Ze.fire({icon:"error",title:r("Error","kivicare-clinic-management-system"),text:N.message||r("Failed to update template","kivicare-clinic-management-system"),confirmButtonText:r("Ok","kivicare-clinic-management-system")}):Ze.fire({icon:"success",title:r("Success","kivicare-clinic-management-system"),text:N.message||r("Template updated successfully","kivicare-clinic-management-system"),confirmButtonText:r("Ok","kivicare-clinic-management-system")}).then(()=>n("/setting/email-template"))}catch(_){console.error("Error updating template:",_),Ze.fire({icon:"error",title:r("Error","kivicare-clinic-management-system"),text:r("An error occurred while updating the template","kivicare-clinic-management-system"),confirmButtonText:r("Ok","kivicare-clinic-management-system")})}finally{u(!1)}},T=_=>{navigator.clipboard.writeText(`{{${_}}}`),Ze.fire({title:r("Key Copied!","kivicare-clinic-management-system"),icon:"success",timer:1e3,showConfirmButton:!1,position:"top-end",toast:!0})},j={toolbar:[[{header:[1,2,!1]}],["bold","italic","underline","strike","blockquote"],[{list:"ordered"},{list:"bullet"},{indent:"-1"},{indent:"+1"}],["link","image"],["clean"]]},D=["header","bold","italic","underline","strike","blockquote","list","indent","link","image"];return x&&!v?i.jsx(of,{}):i.jsxs("div",{className:"manage-email-template-setting",children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between gap-3 mb-4",children:[i.jsx("h6",{className:"setting-title mb-0",children:r("Edit Email Template","kivicare-clinic-management-system")}),i.jsx("div",{children:i.jsxs("button",{onClick:()=>n(-1),className:"btn btn-sm btn-primary fw-semibold d-flex align-items-center gap-1 back-btn",disabled:m,children:[i.jsx("i",{className:"ph ph-caret-left"}),i.jsx("span",{className:"font-size-14",children:r("Back","kivicare-clinic-management-system")})]})})]}),i.jsx("div",{className:"card",children:i.jsx("div",{className:"card-body",children:i.jsxs("div",{className:"row gy-3",children:[i.jsxs("div",{className:"form-group",children:[i.jsx("label",{htmlFor:"emailSubject",className:"form-label h6",children:r("Email Subject","kivicare-clinic-management-system")}),i.jsx("input",{type:"text",id:"emailSubject",className:"form-control",placeholder:r("Email Subject","kivicare-clinic-management-system"),value:l,onChange:_=>o(_.target.value),disabled:m})]}),c.length>0&&i.jsxs("div",{className:"form-group",children:[i.jsx("label",{className:"form-label h6",children:r("Template Dynamic Keys List (click to copy)","kivicare-clinic-management-system")}),i.jsx("div",{className:"d-flex flex-wrap align-items-center gap-3",children:c.map(_=>i.jsx(Qe,{placement:"top",overlay:N=>i.jsx(ut,{...N,children:r("Click to Copy","kivicare-clinic-management-system")}),children:i.jsxs("button",{className:"btn btn-primary btn-sm d-flex align-items-center gap-1",onClick:()=>T(_),disabled:m,children:[_,i.jsx("i",{className:"ph ph-copy"})]})},_))})]}),i.jsxs("div",{className:"form-group",children:[i.jsx("label",{className:"form-label h6",children:r("Email Content","kivicare-clinic-management-system")}),i.jsx(Bo,{ref:g,theme:"snow",value:s,onChange:k,modules:j,formats:D,readOnly:m||x})]})]})})}),i.jsx("div",{className:"d-flex justify-content-end mt-4",children:i.jsx("button",{type:"button",className:"btn btn-primary",onClick:w,disabled:m||x||!h,children:m?r("Saving...","kivicare-clinic-management-system"):r("Save","kivicare-clinic-management-system")})})]})},che=()=>{const t=hn(),[e,n]=f.useState(""),[s,a]=f.useState(""),[l,o]=f.useState(!1),c=un("settings","email-template/test"),d=()=>{t("/setting/email-template")},m=async()=>{if(!e.trim()){Ze.fire({icon:"error",title:r("Error","kivicare-clinic-management-system"),text:r("Please enter an email address","kivicare-clinic-management-system"),confirmButtonText:r("Ok","kivicare-clinic-management-system")});return}if(!s.trim()){Ze.fire({icon:"error",title:r("Error","kivicare-clinic-management-system"),text:r("Please enter test content","kivicare-clinic-management-system"),confirmButtonText:r("Ok","kivicare-clinic-management-system")});return}try{o(!0);const u={email:e,content:s},h=await c.mutateAsync(u);if(h?.status===!0)Ze.fire({icon:"success",title:r("Success","kivicare-clinic-management-system"),text:h.message||r("Test email sent successfully","kivicare-clinic-management-system"),confirmButtonText:r("Ok","kivicare-clinic-management-system")}),n(""),a("");else throw new Error(h?.message||"Failed to send test email")}catch(u){console.error("Error sending test email:",u),Ze.fire({icon:"error",title:r("Error","kivicare-clinic-management-system"),text:u.message||r("Failed to send test email","kivicare-clinic-management-system"),confirmButtonText:r("Ok","kivicare-clinic-management-system")})}finally{o(!1)}};return i.jsx("div",{className:"tab-pane fade show active",children:i.jsxs("div",{className:"send-template-setting",children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between gap-3 mb-4",children:[i.jsx("h6",{className:"setting-title mb-0",children:r("Test Email","kivicare-clinic-management-system")}),i.jsx("div",{children:i.jsxs("button",{onClick:d,className:"btn btn-sm btn-primary fw-semibold d-flex align-items-center gap-1 back-btn",disabled:l,children:[i.jsx("i",{className:"ph ph-caret-left"}),i.jsx("span",{className:"font-size-14",children:r("Back","kivicare-clinic-management-system")})]})})]}),i.jsx("div",{className:"card",children:i.jsx("div",{className:"card-body",children:i.jsxs("div",{className:"row gy-3",children:[i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[r("Email","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx("div",{className:"d-flex align-items-center gap-3",children:i.jsx("input",{type:"email",className:"form-control",placeholder:r("Enter email id","kivicare-clinic-management-system"),value:e,onChange:u=>n(u.target.value),required:!0,disabled:l})})]})}),i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[r("Test content","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx("input",{type:"text",className:"form-control",placeholder:r('e.g "Welcome to KiviCare, This is test email"',"kivicare-clinic-management-system"),value:s,onChange:u=>a(u.target.value),required:!0,disabled:l})]})})]})})}),i.jsxs("div",{className:"d-flex justify-content-end flex-wrap row-gap-2 column-gap-4 mb-5 mt-4",children:[i.jsx("button",{type:"button",className:"btn btn-secondary",onClick:d,disabled:l,children:r("Cancel","kivicare-clinic-management-system")}),i.jsx("button",{type:"button",className:"btn btn-primary",onClick:m,disabled:l,children:l?r("Sending...","kivicare-clinic-management-system"):r("Send Test Email","kivicare-clinic-management-system")})]})]})})},sS=({show:t,onSave:e,onCancel:n,existingImageData:s=[],editData:a=null,title:l=null})=>{const{control:o,handleSubmit:c,setValue:d,reset:m,setError:u,clearErrors:h,formState:{errors:p}}=en({defaultValues:{name:"",url:"",imageId:""}}),g=f.useRef(null);f.useEffect(()=>{t&&a?(d("name",a.name||""),d("url",a.url||""),d("imageId",a.imageId||"")):t||(m(),h(),g.current&&g.current.clearImage())},[t,a,d,m,h]);const v=x=>{e(x)};return i.jsxs(lt,{show:t,onHide:n,centered:!0,children:[i.jsx(lt.Header,{closeButton:!0,children:i.jsx(lt.Title,{children:l||r("Upload New","kivicare-clinic-management-system")})}),i.jsx(lt.Body,{children:i.jsxs("div",{className:"row",children:[i.jsx("div",{className:"col-12",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[r("Name","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx(ye,{name:"name",control:o,rules:{required:r("Name is required","kivicare-clinic-management-system")},render:({field:x})=>i.jsx("input",{...x,type:"text",className:`form-control ${p.name?"is-invalid":""}`,placeholder:r("Image name","kivicare-clinic-management-system")})}),p.name&&i.jsx("div",{className:"invalid-feedback d-block",children:p.name.message})]})}),i.jsx("div",{className:"col-12",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[r("Upload File","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx(ye,{name:"url",control:o,rules:{required:r("Image is required","kivicare-clinic-management-system")},render:({field:x})=>i.jsxs(i.Fragment,{children:[i.jsx(ef,{ref:g,id:a?`edit-image-upload-${a.id}`:"new-image-upload",name:a?`edit_image_${a.id}`:"new_image",defaultImage:a?.url,defaultImageId:a?.imageId,className:"mb-0",required:!0,onChange:(y,b)=>{if(s.some((w,T)=>a&&T===a.index?!1:w.imageId===b)){u("url",{type:"duplicate",message:r("This image is already uploaded","kivicare-clinic-management-system")}),d("url",a?.url||""),d("imageId",a?.imageId||"");return}h("url"),d("url",y.url||""),d("imageId",b||"")},errors:p.url?{[a?`edit_image_${a.id}`:"new_image"]:{message:p.url.message}}:{}}),p.url&&i.jsx("div",{className:"invalid-feedback d-block",children:p.url.message})]})})]})})]})}),i.jsxs(lt.Footer,{children:[i.jsx("button",{type:"button",className:"btn btn-secondary",onClick:n,children:r("Cancel","kivicare-clinic-management-system")}),i.jsx("button",{type:"button",className:"btn btn-primary ms-2",onClick:c(v),children:r("Save","kivicare-clinic-management-system")})]})]})},dhe=()=>{const{isAddonActive:t}=mt(),e=t("bodyChart"),{data:n,isLoading:s,error:a}=gte({enabled:e}),l=f.useRef(!1),o=f.useRef(null),c=(U,X=null)=>{if(l.current){let J;switch(X){case"add":J=r("Image template added successfully","kivicare-clinic-management-system");break;case"delete":J=r("Image template deleted successfully","kivicare-clinic-management-system");break;case"edit":J=r("Image template updated successfully","kivicare-clinic-management-system");break;default:J=r("Image template updated successfully","kivicare-clinic-management-system")}Se.success(J)}else Ze.fire(r("Success","kivicare-clinic-management-system"),U,"success");l.current=!1,o.current=null},d=fte({onSuccess:()=>c(r("Configuration saved successfully","kivicare-clinic-management-system"),o.current),onError:U=>{Ze.fire(r("Error","kivicare-clinic-management-system"),U.message||r("Failed to save configuration","kivicare-clinic-management-system"),"error"),l.current=!1,o.current=null}}),m=vte({onSuccess:()=>c(r("Configuration updated successfully","kivicare-clinic-management-system"),o.current),onError:U=>{Ze.fire(r("Error","kivicare-clinic-management-system"),U.message||r("Failed to update configuration","kivicare-clinic-management-system"),"error"),l.current=!1,o.current=null}}),{control:u,handleSubmit:h,watch:p,setValue:g,reset:v,getValues:x,register:y,formState:{errors:b,isValid:k}}=en({defaultValues:{theme:"whiteTheme",menuBarPosition:"left",replaceOrNewAfterEditImage:"new",menu:[],defaultImageData:[],defaultImage:-1},mode:"onChange"}),{fields:w,append:T,remove:j}=yr({control:u,name:"defaultImageData"}),[D,_]=f.useState(!1),[N,A]=f.useState(null),P=p();f.useEffect(()=>{n?.data&&v({theme:n.data.theme||"whiteTheme",menuBarPosition:n.data.menuBarPosition||"left",replaceOrNewAfterEditImage:n.data.replaceOrNewAfterEditImage||"new",menu:n.data.menu||[],defaultImageData:n.data.defaultImageData&&Array.isArray(n.data.defaultImageData)?n.data.defaultImageData.map((U,X)=>({id:X+1,name:U.name||"",url:U.url||"",imageId:U.imageId||""})):[],defaultImage:n.data.defaultImage})},[n,v]);const E=f.useMemo(()=>w.map((U,X)=>({id:U.id,name:U.name||"",url:U.url||"",imageId:U.imageId||"",placeholder:U.name||r("Image name","kivicare-clinic-management-system"),defaultValue:U.name||"",radioId:`radioDefault${U.id}`,selected:P.defaultImage===(U.imageId||"")})),[w,P.defaultImage]),I=f.useMemo(()=>Ln(),[]);f.useRef(null);const M=async U=>{console.log(U);const X=x("defaultImageData")||[],J={...U,defaultImageData:X};try{if(!J.defaultImageData||J.defaultImageData.length===0){const me={...J,defaultImageData:[],defaultImage:-1};n?.data?await m.mutateAsync(me):await d.mutateAsync(me);return}if(J.defaultImageData.some(me=>!me.name||me.name.trim()===""||!me.url&&!me.imageId)){Ze.fire(r("Validation Error","kivicare-clinic-management-system"),r("Please complete all required fields in the image templates","kivicare-clinic-management-system"),"warning");return}if(J.defaultImageData.length>0&&(!J.defaultImage||J.defaultImage===-1||J.defaultImage==="")){Ze.fire(r("Validation Error","kivicare-clinic-management-system"),r("Please select a default image from the image templates","kivicare-clinic-management-system"),"warning");return}if(!J.defaultImageData.some(me=>me.imageId===J.defaultImage)){Ze.fire(r("Validation Error","kivicare-clinic-management-system"),r("Selected default image is no longer available. Please select another default image.","kivicare-clinic-management-system"),"warning");return}const ee={...J,defaultImageData:J.defaultImageData.map(me=>({id:me.id,name:me.name.trim(),url:me.url||"",imageId:me.imageId||""}))};n?.data?await m.mutateAsync(ee):await d.mutateAsync(ee)}catch(he){console.error("Error saving configuration:",he)}},O=f.useCallback(U=>{const X=w[U];if(j(U),P.defaultImage===X.imageId){const J=w.filter((he,le)=>le!==U);J.length>0&&J[0].imageId?g("defaultImage",J[0].imageId):g("defaultImage",-1)}setTimeout(()=>{l.current=!0,o.current="delete",h(M)()},100)},[w,j,g,P.defaultImage,h,M]),F=U=>{const X=w[U];A({...X,index:U})},H=U=>{N&&(g(`defaultImageData.${N.index}.name`,U.name),g(`defaultImageData.${N.index}.url`,U.url),g(`defaultImageData.${N.index}.imageId`,U.imageId),A(null),setTimeout(()=>{l.current=!0,o.current="edit",h(M)()},100))},G=f.useMemo(()=>[I.accessor("name",{header:()=>r("Name","kivicare-clinic-management-system"),cell:U=>i.jsx("span",{children:U.row.original.name})}),I.accessor("radio",{header:()=>r("Default","kivicare-clinic-management-system"),cell:U=>i.jsx(ye,{name:"defaultImage",control:u,render:({field:X})=>{const J=U.row.original.imageId;return i.jsxs("div",{className:"form-check mb-0",children:[i.jsx("input",{className:"form-check-input",type:"radio",name:"defaultImage",id:U.row.original.radioId,value:J,checked:X.value===J,disabled:!J,onChange:()=>{J&&X.onChange(J)}}),i.jsx("label",{className:"form-check-label",htmlFor:U.row.original.radioId,children:r("Default","kivicare-clinic-management-system")})]})}},`radio-${U.row.original.id}`)}),I.accessor("url",{header:()=>r("Image","kivicare-clinic-management-system"),cell:U=>i.jsx("div",{className:"d-flex align-items-center",children:U.row.original.url?i.jsx("img",{src:U.row.original.url,alt:U.row.original.name,className:"rounded",style:{width:"40px",height:"40px",objectFit:"cover"}}):i.jsx("div",{className:"bg-light rounded d-flex align-items-center justify-content-center",style:{width:"40px",height:"40px"},children:i.jsx("i",{className:"ph ph-image text-muted"})})})}),I.accessor("action",{header:()=>r("Action","kivicare-clinic-management-system"),cell:U=>i.jsxs("div",{className:"d-flex gap-2",children:[i.jsx("button",{type:"button",className:"btn btn-link p-0 text-primary",onClick:()=>F(U.row.index),title:r("Edit","kivicare-clinic-management-system"),children:i.jsx("i",{className:"ph ph-pencil-simple fs-5"})}),i.jsx("button",{type:"button",className:"btn btn-link p-0 text-danger",onClick:()=>O(U.row.index),title:r("Delete","kivicare-clinic-management-system"),children:i.jsx("i",{className:"ph ph-trash fs-5"})})]})})],[I,w.length,O,u]),z=zT({data:E,columns:G,getCoreRowModel:HT(),autoResetPageIndex:!1,autoResetExpanded:!1,autoResetSorting:!1,autoResetFilters:!1,autoResetRowSelection:!1,autoResetColumnOrder:!1,autoResetColumnPinning:!1,autoResetColumnSizing:!1,autoResetColumnVisibility:!1,autoResetGlobalFilter:!1,autoResetGrouping:!1}),ie=()=>{_(!0)},W=U=>{if((x("defaultImageData")||[]).some(me=>me.imageId===U.imageId)){Ze.fire(r("Error","kivicare-clinic-management-system"),r("This image is already used in another template","kivicare-clinic-management-system"),"error");return}const le={id:`${Date.now()}-${Math.random().toString(36).substr(2,9)}`,name:U.name,url:U.url,imageId:U.imageId};T(le),_(!1);const ee=x("defaultImage");(!ee||ee===-1||ee==="")&&le.imageId&&g("defaultImage",le.imageId),setTimeout(()=>{l.current=!0,o.current="add",h(M)()},100)};if(s)return i.jsx(bP,{});if(a)return i.jsxs("div",{className:"alert alert-danger",role:"alert",children:[r("Error loading configuration:","kivicare-clinic-management-system")," ",a.message]});const ge=[{id:"theme-mode",label:r("Theme mode","kivicare-clinic-management-system"),required:!0,value:P.theme,options:[{value:"whiteTheme",label:r("Light","kivicare-clinic-management-system")},{value:"blackTheme",label:r("Dark","kivicare-clinic-management-system")}]},{id:"menu-position",label:r("Menu bar position","kivicare-clinic-management-system"),required:!0,value:P.menuBarPosition,options:[{value:"left",label:r("Left","kivicare-clinic-management-system")},{value:"right",label:r("Right","kivicare-clinic-management-system")},{value:"top",label:r("Top","kivicare-clinic-management-system")},{value:"bottom",label:r("Bottom","kivicare-clinic-management-system")}]},{id:"image-handling",label:r("Image Handling Preference (when image save after editing)","kivicare-clinic-management-system"),required:!0,value:P.replaceOrNewAfterEditImage,options:[{value:"new",label:r("Create New Image","kivicare-clinic-management-system")},{value:"replace",label:r("Replace Original Image","kivicare-clinic-management-system")}]},{id:"menu-type",label:r("Menu Type","kivicare-clinic-management-system"),required:!0,value:P.menu,options:[{value:"crop",label:r("Crop","kivicare-clinic-management-system")},{value:"flip",label:r("Flip","kivicare-clinic-management-system")},{value:"rotate",label:r("Rotate","kivicare-clinic-management-system")},{value:"draw",label:r("Draw","kivicare-clinic-management-system")},{value:"shape",label:r("Shape","kivicare-clinic-management-system")},{value:"icon",label:r("Icon","kivicare-clinic-management-system")},{value:"filter",label:r("Filter","kivicare-clinic-management-system")},{value:"text",label:r("Text","kivicare-clinic-management-system")},{value:"mask",label:r("Mask","kivicare-clinic-management-system")}],isMulti:!0}],ae=({fieldConfig:U,control:X,errors:J})=>{const he=U.isMulti?U.value?.map(me=>({value:typeof me=="object"?me.id:me,label:typeof me=="object"?me.label:U.options.find(K=>K.value===me)?.label||me}))||[]:U.options.find(me=>me.value===U.value)||null,ee={"theme-mode":"theme","menu-position":"menuBarPosition","image-handling":"replaceOrNewAfterEditImage","menu-type":"menu"}[U.id];return i.jsx("div",{className:"col-lg-6",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{htmlFor:U.id,className:"form-label",children:[U.label," ",U.required&&i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx(ye,{name:ee,control:X,rules:{required:U.required?r("This field is required","kivicare-clinic-management-system"):!1},render:({field:me})=>i.jsx(ct,{...me,className:`react-select-box ${J[ee]?"is-invalid":""}`,classNamePrefix:"react-select",options:U.options,isSearchable:!1,isMulti:U.isMulti||!1,value:he,onChange:K=>{let re;U.isMulti?re=K?K.map(oe=>({id:oe.value,label:oe.label})):[]:re=K?K.value:"",me.onChange(re)},id:U.id,styles:{menuPortal:K=>({...K,zIndex:9999})}})}),J[ee]&&i.jsx("div",{className:"invalid-feedback d-block",children:J[ee].message})]})})};return i.jsx("div",{className:"tab-pane fade show active position-relative overflow-hidden z-0",id:"v-pills-encounter-body-chart",role:"tabpanel",children:i.jsxs("div",{className:`encounter-body-chart-setting${e?"":" p-4"}`,children:[i.jsxs("h6",{className:"setting-title mb-3",children:[r("Encounter body chart Settings","kivicare-clinic-management-system"),i.jsx("a",{href:"https://apps.iqonic.design/docs/product/kivicare/kivicare-encounter-body-chart-addon-24687/",target:"_blank",rel:"noopener noreferrer",className:"ms-1",children:i.jsx("i",{className:"ph ph-question align-middle h5 text-primary"})})]}),!e&&i.jsx(di,{title:r("Available For Encounter Body Chart Addon","kivicare-clinic-management-system"),link:"https://codecanyon.net/item/kivicare-encounter-body-chart-addon/51585503"}),i.jsx("div",{className:"card",children:i.jsx("div",{className:"card-body",children:i.jsxs("form",{onSubmit:h(M),children:[i.jsx("div",{className:"row gy-4 mb-5 pb-3",children:ge.map(U=>i.jsx(ae,{fieldConfig:U,control:u,errors:b},U.id))}),i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap gap-3 mb-3",children:[i.jsxs("label",{className:"form-label mb-0",children:[r("Image Template","kivicare-clinic-management-system"),i.jsx("div",{className:"text-muted small fw-normal",children:r("Add image templates for body chart","kivicare-clinic-management-system")})]}),i.jsxs("button",{type:"button",className:"btn btn-primary d-flex align-items-center gap-2",onClick:ie,children:[i.jsx("i",{className:"ph ph-plus-circle"}),i.jsx("span",{children:r("Add New","kivicare-clinic-management-system")})]})]}),i.jsx(sS,{show:D,onSave:W,onCancel:()=>_(!1),existingImageData:x("defaultImageData")||[]}),i.jsx(sS,{show:!!N,onSave:H,onCancel:()=>A(null),existingImageData:x("defaultImageData")||[],editData:N,title:r("Edit Image Template","kivicare-clinic-management-system")}),i.jsx("div",{className:"table-responsive",children:i.jsxs("table",{className:"table table-bordered rounded simple-table",children:[i.jsx("thead",{children:z.getHeaderGroups().map(U=>i.jsx("tr",{children:U.headers.map(X=>i.jsx("th",{children:Np(X.column.columnDef.header,X.getContext())},X.id))},U.id))}),i.jsx("tbody",{children:z.getRowModel().rows.map(U=>i.jsx("tr",{children:U.getVisibleCells().map((X,J)=>i.jsxs("td",{children:[J===0&&i.jsxs(i.Fragment,{children:[i.jsx("input",{type:"hidden",...y(`defaultImageData.${U.index}.name`),defaultValue:U.original.name}),i.jsx("input",{type:"hidden",...y(`defaultImageData.${U.index}.url`),defaultValue:U.original.url}),i.jsx("input",{type:"hidden",...y(`defaultImageData.${U.index}.imageId`),defaultValue:U.original.imageId})]}),Np(X.column.columnDef.cell,X.getContext())]},`cell-${U.original.id}-${X.column.id}`))},`row-${U.original.id}`))})]})}),b.defaultImage&&i.jsxs("div",{className:"alert alert-danger mt-3",role:"alert",children:[i.jsx("i",{className:"ph ph-warning-circle me-2"}),b.defaultImage.message]}),b.defaultImageData&&i.jsxs("div",{className:"alert alert-danger mt-3",role:"alert",children:[i.jsx("i",{className:"ph ph-warning-circle me-2"}),Array.isArray(b.defaultImageData)?i.jsx("ul",{className:"mb-0",children:b.defaultImageData.map((U,X)=>U&&i.jsxs("li",{children:[r("Row","kivicare-clinic-management-system")," ",X+1,":",U.name?.message&&` ${U.name.message}`,U.url?.message&&` ${U.url.message}`]},X))}):b.defaultImageData.message]}),i.jsx("div",{className:"d-flex justify-content-end flex-wrap row-gap-2 column-gap-4 mb-5",children:i.jsx("button",{type:"submit",className:"btn btn-primary",disabled:d.isLoading||m.isLoading,children:d.isLoading||m.isLoading?i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),r("Saving...","kivicare-clinic-management-system")]}):r("Save","kivicare-clinic-management-system")})})]})})})]})})},mhe=()=>{const[t,e]=f.useState({ID:"",post_title:"",post_content:""}),{isAddonActive:n}=mt(),s=n("kiviPro"),{data:a,isLoading:l,error:o}=kn("settings","google-event-template",{},{enabled:s}),c=un("settings","google-event-template"),[d,m]=f.useState(!1),{data:u}=Sn(),h=u?.data?.hideUtilityLinks;f.useEffect(()=>{if(!a?.data?.data)return;const x=a.data.data;e({ID:x.ID||"",post_title:x.post_title||"",post_content:x.post_content||""})},[a]);const p=x=>{e(y=>({...y,post_title:x.target.value}))},g=x=>{e(y=>({...y,post_content:x}))},v=async()=>{try{m(!0),(await c.mutateAsync(t)).status!==!0?Ze.fire({icon:"error",title:r("Error","kivicare-clinic-management-system"),text:r("Failed to save settings","kivicare-clinic-management-system"),confirmButtonText:r("Ok","kivicare-clinic-management-system")}):Ze.fire({icon:"success",title:r("Success","kivicare-clinic-management-system"),text:r("Settings saved successfully!","kivicare-clinic-management-system"),confirmButtonText:r("Ok","kivicare-clinic-management-system")}),m(!1)}catch(x){m(!1),console.error("Error submitting form:",x)}};if(o){let x;typeof o=="string"?x=o:o?.response?.data?.message?x=o.response.data.message:o?.message?x=o.message:x=r("An unknown error occurred","kivicare-clinic-management-system"),Ze.fire({icon:"error",title:r("Error","kivicare-clinic-management-system"),text:r(x,"kivicare-clinic-management-system"),confirmButtonText:r("Ok","kivicare-clinic-management-system")})}return(l||d)&&s?i.jsx(wP,{}):i.jsx("div",{className:"tab-pane fade show active position-relative overflow-hidden z-0",id:"v-pills-google-event-template",role:"tabpanel","aria-labelledby":"v-pills-google-event-template-tab",tabIndex:"0",children:i.jsxs("div",{className:`google-event-template-setting${s?"":" p-4"}`,children:[!s&&i.jsx(di,{title:r("Available For Kivicare Pro","kivicare-clinic-management-system"),link:"https://codecanyon.net/item/kivicare-pro-clinic-patient-management-system-ehr-addon/30690654?s_rank=3"}),i.jsxs("h6",{className:"setting-title mb-3",children:[r("Google Event Template","kivicare-clinic-management-system"),h!=="on"&&i.jsx("a",{href:"https://documentation.iqonic.design/kivicare-wordpress/kivicare-pro/documentation-kivicare-pro/configuration-kivi-pro/google-event-template/",target:"_blank",rel:"noopener noreferrer",className:"ms-1",children:i.jsx("i",{className:"ph ph-question align-middle h5 text-primary"})})]}),!l&&!d&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"card",children:i.jsxs("div",{className:"card-body p-3",children:[i.jsx("h6",{className:"mb-3",children:r("Google Event Template","kivicare-clinic-management-system")}),i.jsxs("div",{className:"form-group mb-4",children:[i.jsx("label",{htmlFor:"event-title",className:"form-label",children:r("Google Event Title","kivicare-clinic-management-system")}),i.jsx("input",{type:"text",id:"event-title",className:"form-control",placeholder:"Service_name",value:t?.post_title,onChange:p,disabled:d||l})]}),i.jsxs("div",{className:"form-group",children:[i.jsx("label",{htmlFor:"event-description",className:"form-label h6",children:r("Google Event Description","kivicare-clinic-management-system")}),t?.ID&&i.jsx(Bo,{theme:"snow",value:t?.post_content||"",onChange:g},t?.ID)]})]})}),i.jsx("div",{className:"d-flex justify-content-end gap-4 mb-5",children:i.jsx("button",{type:"button",className:"btn btn-primary",onClick:v,disabled:d||l,children:r("Save","kivicare-clinic-management-system")})})]})]})})},uhe=()=>{const[t,e]=f.useState(!1),{isAddonActive:n}=mt(),s=n("googlemeet"),{data:a,isLoading:l,error:o,refetch:c}=kn("settings","googlemeet",{},{enabled:s}),[d,m]=f.useState(""),u=un("settings","googlemeet"),{data:h}=Sn(),p=h?.data?.hideUtilityLinks,{control:g,handleSubmit:v,watch:x,reset:y,formState:{errors:b}}=en({defaultValues:{enableCal:!1,client_id:"",client_secret:"",app_name:""}}),k=x("enableCal"),w=[{id:"client_id",label:r("Google Meet Client ID","kivicare-clinic-management-system"),placeholder:"EXAMPLE-1234567890.apps.googleusercontent.com"},{id:"client_secret",label:r("Google Meet Client Secret","kivicare-clinic-management-system"),placeholder:"EXAMPLE-GOCSPX-ecA6KW3s9suV9ifVKET5FwqxzW"},{id:"app_name",label:r("App Name","kivicare-clinic-management-system"),placeholder:"My Google App Name"}];f.useEffect(()=>{!a?.status||!a?.data?.data||(m(a.data.data),!(!a?.data?.config?.data||Object.keys(a.data.config.data).length===0)&&y(_=>{const N=Object.fromEntries(Object.entries(a.data.config.data).filter(([A,P])=>P!=null&&P!==""));return{..._,...N,enableCal:N.enableCal==="Yes"}}))},[a,y]);const T=_=>{m(N=>({...N,post_title:_.target.value}))},j=_=>{m(N=>({...N,post_content:_}))},D=async _=>{try{e(!0);const A={google_meet_config:{..._,enableCal:_.enableCal?"Yes":"No"},google_meet_event_template:d};(await u.mutateAsync(A)).status!==!0?Ze.fire({icon:"error",title:r("Error","kivicare-clinic-management-system"),text:r("Failed to save settings","kivicare-clinic-management-system"),confirmButtonText:r("Ok","kivicare-clinic-management-system")}):(Ze.fire({icon:"success",title:r("Success","kivicare-clinic-management-system"),text:r("Settings saved successfully!","kivicare-clinic-management-system"),confirmButtonText:r("Ok","kivicare-clinic-management-system")}),c()),e(!1)}catch(N){e(!1),console.error("Error submitting form:",N)}};if(o){let _;typeof o=="string"?_=o:o?.response?.data?.message?_=o.response.data.message:o?.message?_=o.message:_=r("An unknown error occurred","kivicare-clinic-management-system"),Ze.fire({icon:"error",title:r("Error","kivicare-clinic-management-system"),text:r(_,"kivicare-clinic-management-system"),confirmButtonText:r("Ok","kivicare-clinic-management-system")})}return s&&(l||t)?i.jsx(jP,{}):i.jsx("div",{className:"tab-pane fade show active position-relative",id:"v-pills-google-meet",role:"tabpanel","aria-labelledby":"v-pills-google-meet-tab",tabIndex:"0",children:i.jsxs("div",{className:`google-meet-setting${s?"":" p-4"}`,children:[!s&&i.jsx(di,{title:r("Available In GoogleMeet AddOn","kivicare-clinic-management-system"),link:"https://codecanyon.net/item/kivicare-google-meet-telemed-addon/35301137?s_rank=21"}),i.jsxs("h6",{className:"setting-title mb-3",children:[r("Google Meet","kivicare-clinic-management-system"),p!=="on"&&i.jsx("a",{href:"https://documentation.iqonic.design/kivicare-wordpress/google-meet-telemed-woocommerce-addon/doc-google-meet/getting-started-googlemeet/what-is-kivicare-google-meet-addon/",target:"_blank",rel:"noopener noreferrer",className:"ms-1",children:i.jsx("i",{className:"ph ph-question align-middle h5 text-primary"})})]}),(!t||!l)&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"card mb-3",children:i.jsx("div",{className:"card-body p-3",children:i.jsx("div",{className:"row",children:i.jsx("div",{className:"col-12",children:i.jsx(ye,{name:"enableCal",control:g,render:({field:_})=>i.jsx(cn,{label:r("Google Meet Configuration","kivicare-clinic-management-system"),checked:_.value,onChange:_.onChange,disabled:t||l,error:b?.enableCal})})})})})}),i.jsxs("form",{onSubmit:v(D),children:[k&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"card mb-3",children:i.jsxs("div",{className:"card-body p-3",children:[i.jsxs("div",{className:"row gy-4",children:[w.map(({id:_,label:N,placeholder:A})=>i.jsx("div",{className:"col-lg-4",children:i.jsx("div",{className:"form-group",children:i.jsx(ye,{name:_,control:g,rules:{required:`${_} is required`},render:({field:P})=>i.jsx(Ht,{label:N,type:"text",className:"form-control",placeholder:A,value:P.value,required:!0,onChange:P.onChange,isDisable:t||l,error:b[_]})})})},_)),i.jsx("div",{className:"col-12",children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{className:"form-label h6",children:r("Google Cloud Console Redirection URL","kivicare-clinic-management-system")}),i.jsxs("div",{className:"input-group",children:[i.jsx("input",{type:"text",className:"form-control",value:a?.data?.redirection_url||"",readOnly:!0,disabled:t||l,placeholder:r("Redirection URL will appear here...","kivicare-clinic-management-system")}),i.jsx("button",{className:"btn btn-primary",type:"button",onClick:()=>{a?.data?.redirection_url&&(navigator.clipboard.writeText(a.data.redirection_url),Ze.fire({icon:"success",title:r("Copied!","kivicare-clinic-management-system"),text:r("Redirection URL copied to clipboard","kivicare-clinic-management-system"),confirmButtonText:r("OK","kivicare-clinic-management-system")}))},disabled:!a?.data?.redirection_url||t||l,children:i.jsx("i",{className:"ph ph-copy"})})]}),i.jsxs("div",{className:"form-text",children:[i.jsx("i",{className:"ph ph-info text-primary me-1"}),r("Copy this URL and add it to your Google Cloud Console as an authorized redirect URI","kivicare-clinic-management-system")]})]})})]}),i.jsxs("div",{className:"pt-4 mt-4 border-top",children:[i.jsx("h6",{className:"text-secondary font-size-14",children:r("Guide to setup Google Meet.","kivicare-clinic-management-system")}),i.jsxs("div",{className:"bg-body p-3 rounded mb-2",children:[i.jsxs("div",{className:"d-flex align-items-md-center flex-md-row flex-column column-gap-3 row-gap-2",children:[i.jsx("span",{className:"flex-shrink-0 h6 m-0 font-size-14",children:r("Step 1:","kivicare-clinic-management-system")}),i.jsx("a",{href:"https://documentation.iqonic.design/kivicare-wordpress/google-meet-telemed-woocommerce-addon/doc-google-meet/configuration-doc/global-google-meet-settings-admin/",target:"_blank",className:"font-size-14 heading-color",children:r("Please refer the following link for the setup.","kivicare-clinic-management-system")})]}),i.jsxs("div",{className:"d-flex align-items-md-center flex-md-row flex-column column-gap-3 row-gap-2 mt-2",children:[i.jsx("span",{className:"flex-shrink-0 h6 m-0 font-size-14",children:r("Step 2:","kivicare-clinic-management-system")}),i.jsx("span",{className:"font-size-14 heading-color",children:r("Copy the Redirection URL above and add it to your Google Cloud Console as an authorized redirect URI","kivicare-clinic-management-system")})]})]})]}),i.jsxs("p",{className:"font-size-12 mb-0",children:[i.jsx("span",{className:"text-primary",children:r("Note:","kivicare-clinic-management-system")})," ",r("If you have already set up Google Calendar, you can use the same Client ID and Client Secret here.","kivicare-clinic-management-system")]})]})}),i.jsx("div",{className:"card mb-3",children:i.jsxs("div",{className:"card-body p-3",children:[i.jsx("h6",{className:"mb-3",children:r("Google Meet Event Template","kivicare-clinic-management-system")}),i.jsx("div",{className:"form-group mb-4",children:i.jsx("input",{type:"text",id:"event-title",className:"form-control",placeholder:"Service_name",value:d.post_title,onChange:T,disabled:t||l})}),i.jsxs("div",{className:"form-group",children:[i.jsx("label",{htmlFor:"eventDescription",className:"form-label fw-semibold text-body",children:r("Google Event Description","kivicare-clinic-management-system")}),i.jsx("div",{className:"quill-editor-wrapper",children:i.jsx(Bo,{theme:"snow",value:d.post_content,onChange:j})})]})]})})]}),i.jsx("div",{className:"d-flex justify-content-end gap-4 mb-5",children:i.jsx("button",{type:"submit",className:"btn btn-primary",disabled:t||l,children:r("Save","kivicare-clinic-management-system")})})]})]})]})})},hhe=()=>{const{isAddonActive:t,googleMeetIntegration:e}=mt();if(!t("googlemeet")||e!=="yes")return i.jsx(gg,{to:"/setting",replace:!0});const n=t("googlemeet"),[s,a]=f.useState(!1),[l,o]=f.useState(!1),{data:c,isLoading:d,error:m,refetch:u}=kn("settings","googlemeet/doctor-config",{},{enabled:n}),{refetch:h}=kn("settings","googlemeet/authorize",{},{enabled:!1}),{refetch:p}=kn("settings","googlemeet/disconnect",{},{enabled:!1});f.useEffect(()=>{const y=new URLSearchParams(window.location.search);y.get("google_meet_connected")==="1"&&(Ze.fire({icon:"success",title:r("Success","kivicare-clinic-management-system"),text:r("Google Meet connected successfully!","kivicare-clinic-management-system"),confirmButtonText:r("OK","kivicare-clinic-management-system")}),y.delete("google_meet_connected"),window.history.replaceState({},document.title,window.location.pathname),u())},[u]);const g=async()=>{const{data:y}=await u();if(!(y?.data?.is_zoom_connected&&!(await Ze.fire({title:r("Warning","kivicare-clinic-management-system"),text:r("Press yes to connect to Google Meet. Connecting to Google Meet will disconnect Zoom.","kivicare-clinic-management-system"),icon:"warning",showCancelButton:!0,confirmButtonText:r("Yes","kivicare-clinic-management-system"),cancelButtonText:r("No","kivicare-clinic-management-system")})).isConfirmed))try{a(!0);const{data:k}=await h();k?.data?.redirect_url?window.location.href=k.data.redirect_url:Ze.fire({icon:"error",title:r("Error","kivicare-clinic-management-system"),text:k?.message||r("Failed to initiate Google Meet connection","kivicare-clinic-management-system"),confirmButtonText:r("OK","kivicare-clinic-management-system")})}catch(k){console.error("Connection failed:",k),Ze.fire({icon:"error",title:r("Error","kivicare-clinic-management-system"),text:k.message||r("An error occurred","kivicare-clinic-management-system"),confirmButtonText:r("OK","kivicare-clinic-management-system")})}finally{a(!1)}},v=async()=>{if((await Ze.fire({title:r("Disconnect Google Meet","kivicare-clinic-management-system"),message:r("Are you sure you want to disconnect your Google Meet account?","kivicare-clinic-management-system"),confirmButtonText:r("Disconnect","kivicare-clinic-management-system"),cancelButtonText:r("Cancel","kivicare-clinic-management-system"),showCancelButton:!0,icon:"warning",confirmButtonVariant:"danger"})).isConfirmed)try{o(!0);const{data:b}=await p();b?.status?(u(),Ze.fire({icon:"success",title:r("Success","kivicare-clinic-management-system"),text:r("Disconnected from Google Meet","kivicare-clinic-management-system"),confirmButtonText:r("OK","kivicare-clinic-management-system")})):Ze.fire({icon:"error",title:r("Error","kivicare-clinic-management-system"),text:b?.message||r("Failed to disconnect from Google Meet","kivicare-clinic-management-system"),confirmButtonText:r("OK","kivicare-clinic-management-system")})}catch(b){console.error("Disconnection failed:",b),Ze.fire({icon:"error",title:r("Error","kivicare-clinic-management-system"),text:b.message||r("An error occurred","kivicare-clinic-management-system"),confirmButtonText:r("OK","kivicare-clinic-management-system")})}finally{o(!1)}},x=()=>!c||!c.data?null:c.data.is_connected?i.jsxs("div",{className:"alert alert-success d-flex align-items-center justify-content-between",children:[i.jsxs("div",{children:[i.jsx("i",{className:"fas fa-check-circle me-2"}),r("Your Google Meet account is connected","kivicare-clinic-management-system")]}),i.jsx("button",{className:"btn btn-sm btn-outline-danger",onClick:v,disabled:l,children:l?r("Disconnecting...","kivicare-clinic-management-system"):r("Disconnect","kivicare-clinic-management-system")})]}):i.jsxs("div",{className:"alert alert-warning d-flex align-items-center justify-content-between",children:[i.jsxs("div",{children:[i.jsx("i",{className:"fas fa-exclamation-triangle me-2"}),r("Your Google Meet account is not connected","kivicare-clinic-management-system")]}),i.jsx("button",{className:"btn btn-sm btn-primary",onClick:g,disabled:s,children:s?r("Connecting...","kivicare-clinic-management-system"):r("Connect Google Meet Account","kivicare-clinic-management-system")})]});return i.jsx("div",{className:"google-meet-configuration",children:i.jsx("div",{className:"card",children:i.jsxs("div",{className:"card-body p-4",children:[i.jsx("div",{className:"d-flex align-items-center mb-4",children:i.jsx("h4",{className:"mb-0",children:r("Google Meet Settings","kivicare-clinic-management-system")})}),d||s||l?i.jsxs("div",{className:"text-center py-4 border-start border-end",children:[i.jsx("div",{className:"spinner-border text-primary",role:"status",children:i.jsx("span",{className:"visually-hidden",children:"Loading..."})}),i.jsx("p",{className:"mt-2",children:r("Loading Google Meet configuration...","kivicare-clinic-management-system")})]}):m?i.jsxs("div",{className:"alert alert-danger",children:[i.jsx("i",{className:"fas fa-exclamation-circle me-2"}),r("Failed to load Google Meet configuration:","kivicare-clinic-management-system")," ",m.message]}):i.jsxs(i.Fragment,{children:[n?x():i.jsx("div",{className:"alert alert-warning",children:r("Google Meet telemedicine is not currently enabled. Please contact your administrator.","kivicare-clinic-management-system")}),i.jsxs("div",{className:"mt-4 pt-3 border-top",children:[i.jsx("h6",{className:"mb-3",children:r("Need help?","kivicare-clinic-management-system")}),i.jsxs("ul",{className:"list-group list-group-flush",children:[i.jsxs("li",{className:"list-group-item d-flex align-items-center",children:[i.jsx("i",{className:"fas fa-question-circle text-primary me-3"}),i.jsxs("div",{children:[i.jsx("a",{href:"https://apps.iqonic.design/docs/product/kivicare/google-meet-telemed-woocommerce-addon/doctor/",className:"text-decoration-none",target:"_blank",rel:"noopener noreferrer",children:r("Google Meet integration documentation","kivicare-clinic-management-system")}),i.jsx("p",{className:"mb-0 small text-muted",children:r("Learn how to set up and use Google Meet telemedicine","kivicare-clinic-management-system")})]})]}),i.jsxs("li",{className:"list-group-item d-flex align-items-center",children:[i.jsx("i",{className:"fas fa-video text-primary me-3"}),i.jsxs("div",{children:[i.jsx("a",{href:"https://support.google.com/meet",className:"text-decoration-none",target:"_blank",rel:"noopener noreferrer",children:r("Google Meet requirements","kivicare-clinic-management-system")}),i.jsx("p",{className:"mb-0 small text-muted",children:r("System requirements for participants","kivicare-clinic-management-system")})]})]})]})]})]})]})})})},Qo=[{id:1,label:r("Active","kivicare-clinic-management-system")},{id:0,label:r("Inactive","kivicare-clinic-management-system")}],aS=[{label:"Prescription type",value:"prescription_type"},{label:"Service type",value:"service_type"}],phe={page:1,perPage:10,searchTerm:"",type:"",status:""},kx=()=>{const[t,e]=f.useState(!1),[n,s]=f.useState(!1),[a,l]=f.useState([]),[o,c]=f.useState(null),[d,m]=f.useState(""),[u,h]=f.useState(aS),[p,g]=f.useState(phe),[v,x]=f.useState(!1),y=Cr(),b=hn(),k=Kn(),{id:w}=Yt(),T=ze(),j=Ga(d,500),{control:D,handleSubmit:_,formState:{errors:N},reset:A}=en(),{isAddonActive:P,hasCapability:E}=mt(),I=P("kiviPro"),{data:M}=Sn(),O=M?.data?.hideUtilityLinks,{data:F,isLoading:H,error:G}=kn("settings","listing",p,{enabled:!0}),{data:z}=Cp({dataType:"staticData",staticDataType:"staticDataTypes"},{enabled:!!F}),ie=un("settings","listing/update"),W=un("settings","listing/delete"),ge=aJ(),ae=F?.data?.pagination||{total:0,lastPage:1,perPage:10,currentPage:1};f.useEffect(()=>{g(q=>({...q,searchTerm:j,page:1}))},[j]),f.useEffect(()=>{if(z?.status&&z?.data&&h(z.data.length?z.data:aS),!F?.status){l([]);return}l(Array.isArray(F?.data?.data)?F.data.data.map(q=>({id:q.id,name:q.label,type:q.type,raw_type:q.raw_type,status:q.status===1?r("Active","kivicare-clinic-management-system"):r("Inactive","kivicare-clinic-management-system")})):[])},[F,z]),f.useEffect(()=>{if(k.pathname.endsWith("/add"))s(!0),c(null),A({id:"",label:"",type:"",status:""});else if(w){const B=a.find(se=>String(se.id)===w);B&&(c(B),s(!0),A({id:B.id,label:B.name,type:u.find(se=>se.value===(F?.data?.data?.find(Q=>Q.id===B.id)?.raw_type||B.type.replace(/\s+/g,"_").toLowerCase()))||null,status:Qo.find(se=>se.label===B.status)||null}))}else s(!1),c(null),A({id:"",label:"",type:"",status:""})},[w,k.pathname,a,A,u]);const U=f.useCallback(q=>{m(q.target.value)},[]),X=f.useCallback(q=>{kt({title:r("Delete Listing?","kivicare-clinic-management-system"),text:r("You're about to delete this listing.<br>This action cannot be undone.","kivicare-clinic-management-system"),icon:"ph-warning",confirmButtonText:r("Delete permanently","kivicare-clinic-management-system"),cancelButtonText:r("Keep listing","kivicare-clinic-management-system"),confirmButtonClass:"btn-danger"}).then(B=>{B.isConfirmed&&(yt({title:r("Deleting Listing...","kivicare-clinic-management-system"),text:r("Please wait while we remove the selected listing.<br>This won't take long.","kivicare-clinic-management-system")}),W.mutate({id:q},{onSuccess:se=>{Tt({title:r("Listing Deleted","kivicare-clinic-management-system"),text:se?.message||r("Data has been deleted successfully.","kivicare-clinic-management-system"),confirmButtonText:r("Back to listings","kivicare-clinic-management-system")}),T.invalidateQueries(["settings","listing"])},onError:se=>{console.error("Delete clinic error:",se);const Q=se?.response?.data?.message||se?.message||r("Failed to delete Data. Please try again.","kivicare-clinic-management-system");rt({title:r("Error","kivicare-clinic-management-system"),text:Q,confirmButtonText:r("OK","kivicare-clinic-management-system")})}}))})},[W,T]),J=f.useCallback(async q=>{try{e(!0),!o&&(!q.id||q.id==="")&&delete q.id;const B=await ie.mutateAsync(q);B.status!==!0?rt({title:r("Error","kivicare-clinic-management-system"),text:r(B.message,"kivicare-clinic-management-system"),confirmButtonText:r("Ok","kivicare-clinic-management-system")}):Tt({title:r("Success","kivicare-clinic-management-system"),text:r(B.message,"kivicare-clinic-management-system"),confirmButtonText:r("Ok","kivicare-clinic-management-system")}),await T.invalidateQueries(["settings","listing"]),s(!1),c(null),A(),b("/setting/listings")}catch(B){console.error("Error submitting form:",B)}finally{e(!1)}},[o,b,T,A,ie]),[he,le]=f.useState(!1),ee=async q=>{try{yt({title:r("Exporting...","kivicare-clinic-management-system"),text:r("Please wait. This may take a few seconds.","kivicare-clinic-management-system")});const B={format:q,searchTerm:p.searchTerm||"",type:p.type||"",status:p.status!==""?p.status:void 0},se=await ge.mutateAsync(B);if(!se.status||!se.data||!se.data.listings)throw new Error(se.message||r("Failed to retrieve export data","kivicare-clinic-management-system"));const Q=new Date().toISOString().split("T")[0],pe=se.data.listings;switch(q){case"csv":hs(pe,`listings-${Q}.csv`);break;case"xls":ps(pe,`listings-${Q}.xls`);break;case"pdf":gs(pe,`listings-${Q}.pdf`,"Listings Data");break;default:throw new Error("Invalid export format")}Wi(),Se.success(r("Export completed successfully.","kivicare-clinic-management-system"))}catch(B){console.error("Export error:",B),rt({title:r("Error!","kivicare-clinic-management-system"),text:B.message||r("Failed to export data. Please try again.","kivicare-clinic-management-system"),confirmButtonText:r("OK","kivicare-clinic-management-system")})}},me=f.useCallback(()=>ee("csv"),[]),K=f.useCallback(()=>ee("xls"),[]),re=f.useCallback(()=>{he||(le(!0),ee("pdf"),setTimeout(()=>le(!1),2e3))},[he]),oe=f.useCallback(q=>{if(!I){kt({title:r("Pro Feature","kivicare-clinic-management-system"),text:r("Exporting data is only available in KiviCare Pro version.","kivicare-clinic-management-system"),icon:"ph-warning",confirmButtonText:r("OK","kivicare-clinic-management-system"),showCancelButton:!1});return}switch(q){case"csv":me();break;case"xls":K();break;case"pdf":re();break}},[me,K,re,I]),C=f.useCallback(()=>{x(!0)},[]),R=f.useCallback(()=>{T.invalidateQueries(["settings","listing"])},[T]),te=f.useCallback(()=>i.jsxs("div",{className:"download-buttons d-flex align-items-center gap-3",children:[i.jsx("button",{className:"btn btn-white",onClick:()=>oe("csv"),title:r("Export CSV","kivicare-clinic-management-system"),children:i.jsx("i",{className:"ph ph-file-csv"})}),i.jsx("button",{className:"btn btn-white",onClick:()=>oe("xls"),title:r("Export Excel","kivicare-clinic-management-system"),children:i.jsx("i",{className:"ph ph-file-xls"})}),i.jsx("button",{className:"btn btn-white",onClick:()=>oe("pdf"),title:r("Export PDF","kivicare-clinic-management-system"),children:i.jsx("i",{className:"ph ph-file-pdf"})})]}),[oe]),ne=Ln(),Y=f.useMemo(()=>[ne.accessor("id",{id:"id",header:()=>r("ID","kivicare-clinic-management-system"),cell:q=>i.jsx("div",{className:"font-weight-medium",children:q.getValue()})}),ne.accessor("name",{id:"name",header:()=>r("Name","kivicare-clinic-management-system"),cell:q=>i.jsx("div",{className:"text-wrap",children:i.jsx("span",{className:"p",children:q.row.original.name})})}),ne.accessor("type",{id:"type",header:()=>r("Type","kivicare-clinic-management-system"),cell:q=>i.jsx("div",{className:"text-wrap",children:i.jsx("span",{className:"p",children:q.row.original.type})})}),ne.accessor("status",{header:()=>r("Status","kivicare-clinic-management-system"),enableSorting:!1,cell:q=>{const B=q.getValue(),se=Qo.find(Q=>Q.label===B)||{label:r("Unknown","kivicare-clinic-management-system"),class:"bg-body"};return se.label===r("Active","kivicare-clinic-management-system")?se.class="bg-success-subtle text-success":se.label===r("Inactive","kivicare-clinic-management-system")&&(se.class="bg-danger-subtle text-danger"),i.jsx("span",{className:`badge ${se.class} px-3 py-2`,children:se.label})}}),ne.accessor("actions",{header:()=>r("Action","kivicare-clinic-management-system"),enableSorting:!1,cell:q=>i.jsxs("div",{className:"d-flex align-items-center gap-3",children:[E("static_data_edit")&&i.jsx(ht,{className:"text-success btn btn-link p-0",to:`/setting/listings/edit/${q.cell.row.original.id}`,children:i.jsx("i",{className:"h6 text-success ph ph-pencil-simple-line"})}),y&&i.jsx("button",{type:"button",className:"btn btn-link text-danger p-0",onClick:()=>X(q.cell.row.original.id),children:i.jsx("i",{className:"ph h6 text-danger ph-trash"})})]})})],[ne,X,E]);if(G){let q;typeof G=="string"?q=G:G?.response?.data?.message?q=G.response.data.message:G?.message?q=G.message:q=r("An unknown error occurred","kivicare-clinic-management-system"),rt({title:r("Error","kivicare-clinic-management-system"),text:r(q,"kivicare-clinic-management-system"),confirmButtonText:r("Ok","kivicare-clinic-management-system")})}return!n&&H?i.jsx("div",{className:"container-fluid pb-0",children:i.jsx(_n,{columns:6,rows:5,showBreadcrumb:!1,showPageHeader:!0,showFilterBar:!0})}):i.jsxs("div",{className:"tab-pane fade show active",id:"v-pills-listings",role:"tabpanel","aria-labelledby":"v-pills-listings-tab",tabIndex:"0",children:[n?i.jsx("div",{className:"add-listing-setting",children:i.jsxs("form",{onSubmit:_(J),children:[i.jsx("div",{className:"card",children:i.jsx("div",{className:"card-body",children:i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-lg-4",children:i.jsxs("div",{className:"form-group",children:[i.jsx(ye,{name:"label",control:D,rules:{required:r("Label is required","kivicare-clinic-management-system")},render:({field:q})=>i.jsx(Ht,{label:r("Label","kivicare-clinic-management-system"),placeholder:r("Dummy Data","kivicare-clinic-management-system"),required:!0,type:"text",isDisable:!1,error:N.label,value:q.value??"",onChange:q.onChange,showError:!1,className:"form-control"})}),N.label&&i.jsx("span",{className:"text-danger p",children:N.label.message})]})}),i.jsx("div",{className:"col-lg-4",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[r("Type","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-reuquired",children:"*"})]}),i.jsx(ye,{name:"type",control:D,rules:{required:r("Type is required","kivicare-clinic-management-system")},render:({field:q})=>i.jsxs("select",{className:"form-select select2-basic-single",value:q.value?JSON.stringify(q.value):"",onChange:B=>{const se=u.find(Q=>JSON.stringify(Q)===B.target.value);q.onChange(se||null)},children:[i.jsx("option",{value:"",children:r("Select Type","kivicare-clinic-management-system")}),u.map(B=>i.jsx("option",{value:JSON.stringify(B),children:B.label},B.value))]})}),N.type&&i.jsx("span",{className:"text-danger p",children:N.type.message})]})}),i.jsx("div",{className:"col-lg-4",children:i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{className:"form-label",children:[r("Status","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-reuquired",children:"*"})]}),i.jsx(ye,{name:"status",control:D,rules:{required:r("Status is required","kivicare-clinic-management-system")},render:({field:q})=>i.jsxs("select",{className:"form-select select2-basic-single",value:q.value?JSON.stringify(q.value):"",onChange:B=>{const se=Qo.find(Q=>JSON.stringify(Q)===B.target.value);q.onChange(se||null)},children:[i.jsx("option",{value:"",children:r("Select Status","kivicare-clinic-management-system")}),Qo.map(B=>i.jsx("option",{value:JSON.stringify(B),children:B.label},B.id))]})}),N.status&&i.jsx("span",{className:"text-danger p",children:N.status.message})]})})]})})}),i.jsxs("div",{className:"d-flex justify-content-end flex-wrap row-gap-2 column-gap-4 mb-5 mt-4",children:[i.jsx("button",{type:"button",className:"btn btn-outline-secondary",onClick:()=>{b("/setting/listings"),s(!1),c(null)},children:r("Back","kivicare-clinic-management-system")}),i.jsx("button",{type:"submit",className:"btn btn-primary",disabled:t,children:t?o?r("Updating...","kivicare-clinic-management-system"):r("Saving...","kivicare-clinic-management-system"):o?r("Update","kivicare-clinic-management-system"):r("Save","kivicare-clinic-management-system")})]})]})}):i.jsxs("div",{className:"listing-setting",children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap gap-3 mb-5",children:[i.jsxs("h6",{className:"setting-title m-0",children:[r("Listing Data","kivicare-clinic-management-system"),O!=="on"&&i.jsx("a",{href:"https://documentation.iqonic.design/kivicare-wordpress/kivicare-lite/documentation/settings-configuration/listings-configuration/",target:"_blank",rel:"noopener noreferrer",className:"ms-1",children:i.jsx("i",{className:"ph ph-question align-middle h5 text-primary"})})]}),i.jsxs("div",{className:"d-flex align-items-center flex-wrap gap-3",children:[E("static_data_add")&&i.jsxs("button",{onClick:()=>b("/setting/listings/add"),className:"btn btn-primary d-flex align-items-center gap-2",children:[i.jsx("i",{className:"ph ph-plus-circle"}),i.jsx("span",{children:r("Add List","kivicare-clinic-management-system")})]}),I&&E("static_data_export")&&i.jsxs(i.Fragment,{children:[i.jsxs("button",{onClick:C,className:"btn btn-secondary d-flex align-items-center gap-2",children:[i.jsx("i",{className:"ph ph-download-simple"}),i.jsx("span",{children:r("Import Data","kivicare-clinic-management-system")})]}),i.jsx(te,{})]}),I&&!E("static_data_export")&&i.jsxs("button",{onClick:C,className:"btn btn-secondary d-flex align-items-center gap-2",children:[i.jsx("i",{className:"ph ph-download-simple"}),i.jsx("span",{children:r("Import Data","kivicare-clinic-management-system")})]})]})]}),i.jsxs("div",{className:"d-flex justify-content-between flex-column flex-sm-row gap-3 mb-4",children:[i.jsxs("div",{className:"table-selection d-flex gap-3 flex-sm-row",children:[i.jsx(ct,{placeholder:r("Select Type","kivicare-clinic-management-system"),options:u,onChange:q=>{g(B=>({...B,type:q?q.value:"",page:1}))},value:u.find(q=>q.value===p.type)||null,isClearable:!0,styles:{menuPortal:q=>({...q,zIndex:9999})},className:"react-select-box kc-react-select-h-auto",classNamePrefix:"react-select"}),i.jsx(ct,{placeholder:r("Status","kivicare-clinic-management-system"),options:Qo,getOptionLabel:q=>q.label,getOptionValue:q=>q.id,onChange:q=>{g(B=>({...B,status:q?q.id:"",page:1}))},value:Qo.find(q=>q.id===p.status)||null,isClearable:!0,styles:{menuPortal:q=>({...q,zIndex:9999})},className:"react-select-box kc-react-select-h-auto",classNamePrefix:"react-select"})]}),i.jsx("div",{className:"d-flex align-items-center input-search-select",children:i.jsxs("div",{className:"input-group input-group-search",children:[i.jsx("span",{className:"input-group-text",children:i.jsx("i",{className:"ph ph-magnifying-glass"})}),i.jsx("input",{type:"text",className:"form-control",placeholder:r("Search Anything","kivicare-clinic-management-system"),onChange:U})]})})]}),i.jsx(wn,{data:a,columns:Y,isLoading:H,error:G,currentPage:ae.currentPage,perPage:ae.perPage,totalItems:ae.total,lastPage:ae.lastPage,onPageChange:q=>g(B=>({...B,page:q})),onPerPageChange:q=>g(B=>({...B,perPage:q,page:1})),enableSelection:!1})]}),i.jsx(Lr,{show:v,onHide:()=>x(!1),onReopenImport:()=>x(!0),onDataRefresh:R,context:"listing"})]})},ghe=()=>{const[t,e]=f.useState(!1),{control:n,handleSubmit:s,watch:a,reset:l,formState:{errors:o}}=en({defaultValues:{enable:"off",only_number:"off",prefix_value:"",postfix_value:""}}),{data:c,isLoading:d,error:m}=kn("settings","patient-setting",{},{enabled:!0}),u=un("settings","patient-setting"),{data:h}=Sn(),p=h?.data?.hideUtilityLinks,g=a("enable"),v=y=>({text:y==="on"?r("Active","kivicare-clinic-management-system"):r("Inactive","kivicare-clinic-management-system"),className:y==="on"?"text-primary bg-primary-subtle":"text-secondary bg-secondary-subtle"});f.useEffect(()=>{!c?.status||!c?.data||(e(!1),l(y=>{const b={...y,...Object.fromEntries(Object.entries(c.data).filter(([,k])=>k!=null&&k!==""))};return b.enable=b.enable===!0?"on":"off",b.only_number=b.only_number===!0?"on":"off",b}))},[c,l]);const x=async y=>{e(!0),y.enable=y.enable==="on",y.only_number=y.only_number==="on";try{const b=await u.mutateAsync(y);Ze.fire({icon:b.status?"success":"error",title:b.status?r("Success","kivicare-clinic-management-system"):r("Error","kivicare-clinic-management-system"),text:r(b.message,"kivicare-clinic-management-system"),confirmButtonText:r("Ok","kivicare-clinic-management-system")})}catch(b){console.error("Error submitting form:",b)}finally{e(!1)}};if(m){const y=typeof m=="string"?m:m?.response?.data?.message||m?.message||r("An unknown error occurred","kivicare-clinic-management-system");Ze.fire({icon:"error",title:r("Error","kivicare-clinic-management-system"),text:y,confirmButtonText:r("Ok","kivicare-clinic-management-system")})}return i.jsx("div",{className:"tab-pane fade show active",id:"v-pills-patient-setting",role:"tabpanel","aria-labelledby":"v-pills-patient-setting-tab",tabIndex:"0",children:i.jsxs("div",{className:"patient-setting",children:[i.jsxs("h6",{className:"setting-title mb-3",children:[r("Patient Settings","kivicare-clinic-management-system"),p!=="on"&&i.jsx("a",{href:"https://documentation.iqonic.design/kivicare-wordpress/kivicare-lite/documentation/settings-configuration/patient-settings/",target:"_blank",className:"ms-1",children:i.jsx("i",{className:"ph ph-question align-middle h5 text-primary"})})]}),d?i.jsx(TP,{}):i.jsx("div",{className:"card",children:i.jsx("div",{className:"card-body p-3",children:i.jsxs("form",{onSubmit:s(x),children:[i.jsx(ye,{name:"enable",control:n,render:({field:y})=>i.jsx(cn,{label:r("Patient unique ID Setting","kivicare-clinic-management-system"),checked:y.value,onChange:y.onChange,badge:v(y.value),disabled:t})}),g==="on"&&i.jsxs(i.Fragment,{children:[i.jsx(ye,{name:"only_number",control:n,render:({field:y})=>i.jsx(cn,{label:r("Show only numbers in patient unique ID","kivicare-clinic-management-system"),className:"my-3",checked:y.value,onChange:y.onChange,badge:v(y.value),disabled:t})}),i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-lg-6",children:i.jsx(ye,{name:"prefix_value",control:n,render:({field:y})=>i.jsx(Ht,{label:r("Prefix","kivicare-clinic-management-system"),value:y.value,onChange:y.onChange,placeholder:r("e.g., PAT-","kivicare-clinic-management-system"),error:o.prefix_value,disabled:t})})}),i.jsx("div",{className:"col-lg-6",children:i.jsx(ye,{name:"postfix_value",control:n,render:({field:y})=>i.jsx(Ht,{label:r("Postfix","kivicare-clinic-management-system"),value:y.value,onChange:y.onChange,placeholder:r("e.g., -001","kivicare-clinic-management-system"),error:o.postfix_value,disabled:t})})})]})]}),i.jsx("div",{className:"d-flex justify-content-end flex-wrap gap-3 mt-5",children:i.jsx("button",{type:"submit",className:"btn btn-primary",disabled:t,children:r("Save","kivicare-clinic-management-system")})})]})})})]})})},fhe=()=>{const t=ze(),{data:e,isLoading:n}=kn("settings","payments-gateway",{},{enabled:!0}),{mutateAsync:s}=un(),{data:a}=Sn(),l=a?.data?.hideUtilityLinks,o=async m=>{const u=m.status?"off":"on",h={paypal:"enablePaypal",woocommerce:"enableWooCommerce",manual:"enablePayLater",knit_pay:"enableKnitPay"};if(h[m.id])try{await s({module:"settings",key:`payment-gateway/${m.id}`,data:{id:m.id,[h[m.id]]:u}}),At.fire({icon:"success",title:r("Success","kivicare-clinic-management-system"),text:r("Status updated successfully.","kivicare-clinic-management-system"),position:"center",showConfirmButton:!1,timer:1500}),t.invalidateQueries({queryKey:[...Pn.details(),"settings","payments-gateway"]})}catch(p){console.error("Toggle Error:",p);const g=p?.response?.data?.message||p.message||r("Update failed","kivicare-clinic-management-system");At.fire({icon:"error",title:r("Cannot Enable Gateway","kivicare-clinic-management-system"),text:g,position:"center",confirmButtonText:r("OK","kivicare-clinic-management-system")})}},c=Ln(),d=f.useMemo(()=>[c.accessor("name",{header:r("Payment method","kivicare-clinic-management-system"),cell:m=>i.jsx("h6",{className:"m-0",children:m.getValue()})}),c.accessor("status",{header:r("Status","kivicare-clinic-management-system"),cell:m=>i.jsx("div",{className:"form-check form-switch custom-switch-xl p-0",children:i.jsx("input",{className:"form-check-input",type:"checkbox",role:"switch",checked:!!m.getValue(),onChange:()=>o(m.row.original),style:{cursor:"pointer"}})})}),c.display({id:"actions",header:r("Action","kivicare-clinic-management-system"),cell:m=>i.jsx(ht,{to:`/setting/payment/${m.row.original.id}`,className:"btn btn-link text-secondary fw-semibold p-0",children:r("Manage","kivicare-clinic-management-system")})})],[]);return i.jsxs("div",{className:"payment-setting",children:[i.jsxs("h6",{className:"setting-title mb-3",children:[r("Payment Setting","kivicare-clinic-management-system"),l!=="on"&&i.jsx("a",{href:"https://documentation.iqonic.design/kivicare-wordpress/kivicare-lite/documentation/settings-configuration/payment-settings/",target:"_blank",rel:"noreferrer",className:"ms-1",children:i.jsx("i",{className:"ph ph-question align-middle h5 text-primary"})})]}),i.jsx("div",{className:"table-responsive",children:i.jsx(wn,{data:e?.data||[],columns:d,enableSelection:!1,isLoading:n})})]})},rS=He.memo(({items:t,activeTab:e,onSelect:n,baseId:s})=>{const a=He.useRef(null),[l,o]=He.useState(!1),[c,d]=He.useState(!1),m=He.useCallback(()=>{const p=a.current;if(!p)return;const{scrollLeft:g,scrollWidth:v,clientWidth:x}=p;o(g>0),d(g<v-x-1)},[]);He.useEffect(()=>{m();const p=a.current;if(!p)return;const g=new ResizeObserver(m);return g.observe(p),()=>g.disconnect()},[t,m]);const u=()=>{const p=a.current;p&&(p.scrollBy({left:-200,behavior:"smooth"}),setTimeout(m,300))},h=()=>{const p=a.current;p&&(p.scrollBy({left:200,behavior:"smooth"}),setTimeout(m,300))};return i.jsxs("div",{className:"tab-nav-wrapper mb-4 position-relative",children:[l&&i.jsx("button",{type:"button",className:"tab-nav-scroll-btn tab-nav-scroll-left rounded-circle",onClick:u,"aria-label":r("Scroll left","kivicare-clinic-management-system"),children:i.jsx("i",{className:"ph ph-caret-left"})}),i.jsx("div",{ref:a,className:"tab-nav-scroll-container",onScroll:m,style:{overflowX:"auto",scrollbarWidth:"none",msOverflowStyle:"none"},children:i.jsx("ul",{className:"nav nav-pills nav-pill-card mb-0",role:"tablist",style:{flexWrap:"nowrap",minWidth:"max-content"},children:t.map(p=>{const g=typeof p=="string"?p:p.key,v=typeof p=="string"?p:p.name;return i.jsx("li",{className:"nav-item",role:"presentation",children:i.jsx("button",{className:`nav-link ${e===g?"active":""}`,id:`${s}-${g}-tab`,"data-bs-toggle":"tab","data-bs-target":`#${s}-${g}`,type:"button",role:"tab","aria-controls":`${s}-${g}`,"aria-selected":e===g,onClick:()=>n(g),children:v})},g)})})}),c&&i.jsx("button",{type:"button",className:"tab-nav-scroll-btn tab-nav-scroll-right rounded-circle",onClick:h,"aria-label":r("Scroll right","kivicare-clinic-management-system"),children:i.jsx("i",{className:"ph ph-caret-right"})})]})}),vhe=()=>{const{isAddonActive:t}=mt(),e=t("kiviPro"),{data:n}=Sn(),s=n?.data?.hideUtilityLinks,{data:a,isLoading:l,error:o}=kn("settings","permission-setting",{},{enabled:e}),[c,d]=f.useState({}),m=ze(),u=f.useMemo(()=>[{key:"administrator",name:r("Administrator","kivicare-clinic-management-system")},{key:"clinic_admin",name:r("Clinic Admin","kivicare-clinic-management-system")},{key:"doctor",name:r("Doctor","kivicare-clinic-management-system")},{key:"patient",name:r("Patient","kivicare-clinic-management-system")},{key:"receptionist",name:r("Receptionist","kivicare-clinic-management-system")}],[]),h=f.useMemo(()=>[{key:"appointment_module",name:r("Appointment","kivicare-clinic-management-system"),permissions:[{key:"appointment_list",label:r("Appointment List","kivicare-clinic-management-system")},{key:"appointment_add",label:r("Appointment Add","kivicare-clinic-management-system")},{key:"appointment_edit",label:r("Appointment Edit","kivicare-clinic-management-system")},{key:"appointment_view",label:r("Appointment View","kivicare-clinic-management-system")},{key:"appointment_delete",label:r("Appointment Delete","kivicare-clinic-management-system")},{key:"appointment_export",label:r("Appointment Export","kivicare-clinic-management-system")},{key:"patient_appointment_status_change",label:r("Patient Appointment Status Change","kivicare-clinic-management-system")},{key:"appointment_cancel",label:r("Appointment Cancel","kivicare-clinic-management-system")}]},{key:"billing_module",name:r("Billing","kivicare-clinic-management-system"),permissions:[{key:"patient_bill_list",label:r("Patient Bill List","kivicare-clinic-management-system")},{key:"patient_bill_add",label:r("Patient Bill Add","kivicare-clinic-management-system")},{key:"patient_bill_edit",label:r("Patient Bill Edit","kivicare-clinic-management-system")},{key:"patient_bill_view",label:r("Patient Bill View","kivicare-clinic-management-system")},{key:"patient_bill_export",label:r("Patient Bill Export","kivicare-clinic-management-system")},{key:"patient_bill_delete",label:r("Patient Bill Delete","kivicare-clinic-management-system")}]},{key:"clinic_module",name:r("Clinic","kivicare-clinic-management-system"),permissions:[{key:"clinic_list",label:r("Clinic List","kivicare-clinic-management-system")},{key:"clinic_add",label:r("Clinic Add","kivicare-clinic-management-system")},{key:"clinic_edit",label:r("Clinic Edit","kivicare-clinic-management-system")},{key:"clinic_delete",label:r("Clinic Delete","kivicare-clinic-management-system")},{key:"clinic_profile",label:r("Clinic Profile","kivicare-clinic-management-system")},{key:"clinic_resend_credential",label:r("Clinic Resend Credential","kivicare-clinic-management-system")},{key:"clinic_export",label:r("Clinic Export","kivicare-clinic-management-system")}]},{key:"clinical_detail_module",name:r("Clinical Detail","kivicare-clinic-management-system"),permissions:[{key:"medical_records_list",label:r("Medical Records List","kivicare-clinic-management-system")},{key:"medical_records_add",label:r("Medical Records Add","kivicare-clinic-management-system")},{key:"medical_records_delete",label:r("Medical Records Delete","kivicare-clinic-management-system")},{key:"medical_records_view",label:r("Medical Records View","kivicare-clinic-management-system")}]},{key:"custom_field_module",name:r("Custom Field","kivicare-clinic-management-system"),permissions:[{key:"custom_field_list",label:r("Custom Field List","kivicare-clinic-management-system")},{key:"custom_field_add",label:r("Custom Field Add","kivicare-clinic-management-system")},{key:"custom_field_edit",label:r("Custom Field Edit","kivicare-clinic-management-system")},{key:"custom_field_delete",label:r("Custom Field Delete","kivicare-clinic-management-system")},{key:"custom_field_export",label:r("Custom Field Export","kivicare-clinic-management-system")}]},{key:"dashboard_module",name:r("Dashboard","kivicare-clinic-management-system"),permissions:[{key:"dashboard_total_patient",label:r("Dashboard Total Patient","kivicare-clinic-management-system")},{key:"dashboard_total_doctor",label:r("Dashboard Total Doctor","kivicare-clinic-management-system")},{key:"dashboard_total_appointment",label:r("Dashboard Total Appointment","kivicare-clinic-management-system")},{key:"dashboard_total_revenue",label:r("Dashboard Total Revenue","kivicare-clinic-management-system")},{key:"dashboard_total_today_appointment",label:r("Dashboard Total Today Appointment","kivicare-clinic-management-system")},{key:"dashboard_total_service",label:r("Dashboard Total Service","kivicare-clinic-management-system")},{key:"dashboard_total_clinic",label:r("Dashboard Total Clinic","kivicare-clinic-management-system")},{key:"dashboard",label:r("Dashboard","kivicare-clinic-management-system")},{key:"doctor_dashboard",label:r("Doctor Dashboard","kivicare-clinic-management-system")},{key:"home_page",label:r("Home Page","kivicare-clinic-management-system")}]},{key:"doctor_module",name:r("Doctor","kivicare-clinic-management-system"),permissions:[{key:"doctor_list",label:r("Doctor List","kivicare-clinic-management-system")},{key:"doctor_add",label:r("Doctor Add","kivicare-clinic-management-system")},{key:"doctor_edit",label:r("Doctor Edit","kivicare-clinic-management-system")},{key:"doctor_delete",label:r("Doctor Delete","kivicare-clinic-management-system")},{key:"doctor_session",label:r("Doctor Session","kivicare-clinic-management-system")},{key:"doctor_service",label:r("Doctor Delete","kivicare-clinic-management-system")},{key:"doctor_resend_credential",label:r("Doctor Resend Credential","kivicare-clinic-management-system")},{key:"patient_review_get",label:r("Patient Review Get","kivicare-clinic-management-system")},{key:"doctor_export",label:r("Doctor Export","kivicare-clinic-management-system")}]},{key:"encounter_module",name:r("Encounter","kivicare-clinic-management-system"),permissions:[{key:"patient_encounter_list",label:r("Patient Encounter List","kivicare-clinic-management-system")},{key:"patient_encounter_add",label:r("Patient Encounter Add","kivicare-clinic-management-system")},{key:"patient_encounter_edit",label:r("Patient Encounter Edit","kivicare-clinic-management-system")},{key:"patient_encounter_view",label:r("Patient Encounter View","kivicare-clinic-management-system")},{key:"patient_encounter_delete",label:r("Patient Encounter Delete","kivicare-clinic-management-system")},{key:"patient_encounter_view_billing",label:r("Patient Encounter View Billing","kivicare-clinic-management-system")},{key:"patient_encounter_export",label:r("Patient Encounter Export","kivicare-clinic-management-system")}]},{key:"encounters_template_module",name:r("Encounter Template","kivicare-clinic-management-system"),permissions:[{key:"encounters_template_list",label:r("Encounters Template List","kivicare-clinic-management-system")},{key:"encounters_template_add",label:r("Encounters Template Add","kivicare-clinic-management-system")},{key:"encounters_template_edit",label:r("Encounters Template Edit","kivicare-clinic-management-system")},{key:"encounters_template_view",label:r("Encounters Template View","kivicare-clinic-management-system")},{key:"encounters_template_delete",label:r("Encounters Template Delete","kivicare-clinic-management-system")}]},{key:"holiday_module",name:r("Holiday","kivicare-clinic-management-system"),permissions:[{key:"clinic_schedule",label:r("Clinic Schedule","kivicare-clinic-management-system")},{key:"clinic_schedule_add",label:r("Clinic Schedule Add","kivicare-clinic-management-system")},{key:"clinic_schedule_edit",label:r("Clinic Schedule Edit","kivicare-clinic-management-system")},{key:"clinic_schedule_delete",label:r("Clinic Schedule Delete","kivicare-clinic-management-system")},{key:"clinic_schedule_export",label:r("Clinic Schedule Export","kivicare-clinic-management-system")}]},{key:"other_module",name:r("Other","kivicare-clinic-management-system"),permissions:[{key:"dashboard",label:r("Dashboard","kivicare-clinic-management-system")},{key:"doctor_dashboard",label:r("Doctor Dashboard","kivicare-clinic-management-system")},{key:"home_page",label:r("Home Page","kivicare-clinic-management-system")},{key:"medical_records_view",label:r("Medical Records View","kivicare-clinic-management-system")},{key:"patient_bill_delete",label:r("Patient Bill Delete","kivicare-clinic-management-system")}]},{key:"tax_module",name:r("Tax","kivicare-clinic-management-system"),permissions:[{key:"tax_list",label:r("Tax List","kivicare-clinic-management-system")},{key:"tax_add",label:r("Tax Add","kivicare-clinic-management-system")},{key:"tax_edit",label:r("Tax Edit","kivicare-clinic-management-system")},{key:"tax_delete",label:r("Tax Delete","kivicare-clinic-management-system")},{key:"tax_export",label:r("Tax Export","kivicare-clinic-management-system")}]},{key:"custom_form_module",name:r("Custom Form","kivicare-clinic-management-system"),permissions:[{key:"custom_form_list",label:r("Custom Form List","kivicare-clinic-management-system")},{key:"custom_form_add",label:r("Custom Form Add","kivicare-clinic-management-system")},{key:"custom_form_edit",label:r("Custom Form Edit","kivicare-clinic-management-system")},{key:"custom_form_view",label:r("Custom Form View","kivicare-clinic-management-system")},{key:"custom_form_delete",label:r("Custom Form Delete","kivicare-clinic-management-system")},{key:"change_password",label:r("Change Password","kivicare-clinic-management-system")}]},{key:"patient_module",name:r("Patient","kivicare-clinic-management-system"),permissions:[{key:"patient_list",label:r("Patient List","kivicare-clinic-management-system")},{key:"patient_add",label:r("Patient Add","kivicare-clinic-management-system")},{key:"patient_edit",label:r("Patient Edit","kivicare-clinic-management-system")},{key:"patient_delete",label:r("Patient Delete","kivicare-clinic-management-system")},{key:"patient_profile",label:r("Patient Profile","kivicare-clinic-management-system")},{key:"patient_resend_credential",label:r("Patient Resend Credential","kivicare-clinic-management-system")},{key:"patient_export",label:r("Patient Export","kivicare-clinic-management-system")},{key:"patient_clinic",label:r("Patient Clinic","kivicare-clinic-management-system")},{key:"patient_appointment",label:r("Patient Appointment","kivicare-clinic-management-system")},{key:"patient_appointment_report",label:r("Patient Report","kivicare-clinic-management-system")},{key:"patient_encounter",label:r("Patient Encounter","kivicare-clinic-management-system")}]},{key:"patient_report_module",name:r("Patient Reports","kivicare-clinic-management-system"),permissions:[{key:"patient_report",label:r("Patient Reports","kivicare-clinic-management-system")},{key:"patient_report_add",label:r("Patient Reports Add","kivicare-clinic-management-system")},{key:"patient_report_view",label:r("Patient Reports View","kivicare-clinic-management-system")},{key:"patient_report_delete",label:r("Patient Reports Delete","kivicare-clinic-management-system")},{key:"patient_report_edit",label:r("Patient Reports Edit","kivicare-clinic-management-system")}]},{key:"patient_review_module",name:r("Patient Review","kivicare-clinic-management-system"),permissions:[{key:"patient_review_add",label:r("Patient Review Add","kivicare-clinic-management-system")},{key:"patient_review_edit",label:r("Patient Review Edit","kivicare-clinic-management-system")},{key:"patient_review_get",label:r("Patient Review Get","kivicare-clinic-management-system")},{key:"patient_review_delete",label:r("Patient Review Delete","kivicare-clinic-management-system")}]},{key:"prescription_module",name:r("Prescription","kivicare-clinic-management-system"),permissions:[{key:"prescription_list",label:r("Prescription List","kivicare-clinic-management-system")},{key:"prescription_add",label:r("Prescription Add","kivicare-clinic-management-system")},{key:"prescription_edit",label:r("Prescription Edit","kivicare-clinic-management-system")},{key:"prescription_delete",label:r("Prescription Delete","kivicare-clinic-management-system")},{key:"prescription_export",label:r("Prescription Export","kivicare-clinic-management-system")}]},{key:"receptionist_module",name:r("Receptionist","kivicare-clinic-management-system"),permissions:[{key:"receptionist_list",label:r("Receptionist List","kivicare-clinic-management-system")},{key:"receptionist_add",label:r("Receptionist Add","kivicare-clinic-management-system")},{key:"receptionist_edit",label:r("Receptionist Edit","kivicare-clinic-management-system")},{key:"receptionist_delete",label:r("Receptionist Delete","kivicare-clinic-management-system")},{key:"receptionist_resend_credential",label:r("Receptionist Resend Credential","kivicare-clinic-management-system")},{key:"receptionist_export",label:r("Receptionist Export","kivicare-clinic-management-system")}]},{key:"service_module",name:r("Service","kivicare-clinic-management-system"),permissions:[{key:"service_list",label:r("Service List","kivicare-clinic-management-system")},{key:"service_add",label:r("Service Add","kivicare-clinic-management-system")},{key:"service_edit",label:r("Service Edit","kivicare-clinic-management-system")},{key:"service_delete",label:r("Service Delete","kivicare-clinic-management-system")},{key:"service_export",label:r("Service Export","kivicare-clinic-management-system")}]},{key:"session_module",name:r("Doctor Session","kivicare-clinic-management-system"),permissions:[{key:"doctor_session_list",label:r("Doctor Session List","kivicare-clinic-management-system")},{key:"doctor_session_add",label:r("Doctor Session Add","kivicare-clinic-management-system")},{key:"doctor_session_edit",label:r("Doctor Session Edit","kivicare-clinic-management-system")},{key:"doctor_session_delete",label:r("Doctor Session Delete","kivicare-clinic-management-system")},{key:"doctor_session_export",label:r("Doctor Session Export","kivicare-clinic-management-system")}]},{key:"static_data_module",name:r("Static/Listing Data","kivicare-clinic-management-system"),permissions:[{key:"static_data_list",label:r("Static Data List","kivicare-clinic-management-system")},{key:"static_data_add",label:r("Static Data Add","kivicare-clinic-management-system")},{key:"static_data_edit",label:r("Static Data Edit","kivicare-clinic-management-system")},{key:"static_data_export",label:r("Static Data Export","kivicare-clinic-management-system")}]}],[]),p=f.useMemo(()=>({administrator:{modules:h.filter(ne=>ne.key!=="patient_review_module"),permissions:{appointment_module:["appointment_list","appointment_add","appointment_edit","appointment_view","appointment_delete","appointment_export","patient_appointment_status_change"],billing_module:["patient_bill_list","patient_bill_add","patient_bill_edit","patient_bill_view","patient_bill_export"],clinic_module:["clinic_list","clinic_add","clinic_edit","clinic_delete","clinic_profile","clinic_resend_credential","clinic_export"],clinical_detail_module:["medical_records_list","medical_records_add","medical_records_delete"],custom_field_module:["custom_field_list","custom_field_add","custom_field_edit","custom_field_delete","custom_field_export"],dashboard_module:["dashboard_total_patient","dashboard_total_doctor","dashboard_total_appointment","dashboard_total_revenue","dashboard_total_service","dashboard_total_clinic"],doctor_module:["doctor_list","doctor_add","doctor_edit","doctor_delete","doctor_resend_credential","patient_review_get","doctor_export"],encounter_module:["patient_encounter_list","patient_encounter_add","patient_encounter_edit","patient_encounter_view","patient_encounter_delete","patient_encounter_view_billing","patient_encounter_export"],encounters_template_module:["encounters_template_list","encounters_template_add","encounters_template_edit","encounters_template_view","encounters_template_delete"],holiday_module:["clinic_schedule","clinic_schedule_add","clinic_schedule_edit","clinic_schedule_delete","clinic_schedule_export"],other_module:["medical_records_view","patient_bill_delete"],tax_module:["tax_list","tax_add","tax_edit","tax_delete","tax_export"],custom_form_module:["custom_form_list","custom_form_add","custom_form_edit","custom_form_view","custom_form_delete","change_password"],patient_module:["patient_list","patient_add","patient_edit","patient_delete","patient_profile","patient_resend_credential","patient_export","patient_appointment","patient_appointment_report","patient_encounter"],patient_report_module:["patient_report","patient_report_add","patient_report_view","patient_report_delete","patient_report_edit"],prescription_module:["prescription_list","prescription_add","prescription_edit","prescription_delete","prescription_export"],receptionist_module:["receptionist_list","receptionist_add","receptionist_edit","receptionist_delete","receptionist_resend_credential","receptionist_export"],service_module:["service_list","service_add","service_edit","service_delete","service_export"],session_module:["doctor_session_list","doctor_session_add","doctor_session_edit","doctor_session_delete","doctor_session_export"],static_data_module:["static_data_list","static_data_add","static_data_edit","static_data_export"]}},clinic_admin:{modules:h.filter(ne=>ne.key!=="clinic_module"&&ne.key!=="patient_review_module"),permissions:{appointment_module:["appointment_list","appointment_add","appointment_edit","appointment_view","appointment_delete","appointment_export","patient_appointment_status_change"],billing_module:["patient_bill_list","patient_bill_add","patient_bill_edit","patient_bill_view","patient_bill_export"],clinical_detail_module:["medical_records_list","medical_records_add","medical_records_delete"],custom_field_module:["custom_field_list","custom_field_add","custom_field_edit","custom_field_delete","custom_field_export"],dashboard_module:["dashboard_total_patient","dashboard_total_doctor","dashboard_total_appointment","dashboard_total_revenue","dashboard_total_service"],doctor_module:["doctor_list","doctor_add","doctor_edit","doctor_delete","doctor_resend_credential","patient_review_get","doctor_export"],encounter_module:["patient_encounter_list","patient_encounter_add","patient_encounter_edit","patient_encounter_view","patient_encounter_delete","patient_encounter_export","patient_encounter_view_billing"],encounters_template_module:["encounters_template_list","encounters_template_add","encounters_template_edit","encounters_template_view","encounters_template_delete"],holiday_module:["clinic_schedule","clinic_schedule_add","clinic_schedule_edit","clinic_schedule_delete","clinic_schedule_export"],tax_module:["tax_list","tax_add","tax_edit","tax_delete","tax_export"],custom_form_module:["custom_form_list","custom_form_add","custom_form_edit","custom_form_view","custom_form_delete","change_password"],other_module:["dashboard","medical_records_view"],patient_module:["patient_list","patient_add","patient_edit","patient_delete","patient_profile","patient_resend_credential","patient_export","patient_appointment","patient_appointment_report","patient_encounter"],patient_report_module:["patient_report","patient_report_add","patient_report_view","patient_report_delete","patient_report_edit"],prescription_module:["prescription_list","prescription_add","prescription_edit","prescription_delete","prescription_export"],receptionist_module:["receptionist_list","receptionist_add","receptionist_edit","receptionist_delete","receptionist_resend_credential","receptionist_export"],service_module:["service_list","service_add","service_edit","service_delete","service_export"],session_module:["doctor_session_list","doctor_session_add","doctor_session_edit","doctor_session_delete","doctor_session_export"],static_data_module:["static_data_list","static_data_add","static_data_edit","static_data_export"]}},doctor:{modules:h.filter(ne=>!["clinic_module","doctor_module","receptionist_module","custom_field_module","patient_review_module","tax_module","custom_form_module"].includes(ne.key)),permissions:{appointment_module:["appointment_list","appointment_add","appointment_edit","appointment_view","appointment_delete","appointment_export","patient_appointment_status_change"],billing_module:["patient_bill_list","patient_bill_add","patient_bill_edit","patient_bill_view","patient_bill_export"],clinical_detail_module:["medical_records_list","medical_records_add","medical_records_delete"],dashboard_module:["dashboard_total_patient","dashboard_total_appointment","dashboard_total_today_appointment","dashboard_total_service"],encounter_module:["patient_encounter_list","patient_encounter_add","patient_encounter_edit","patient_encounter_view","patient_encounter_delete","patient_encounter_export","patient_encounter_view_billing"],encounters_template_module:["encounters_template_list","encounters_template_add","encounters_template_edit","encounters_template_view","encounters_template_delete"],holiday_module:["clinic_schedule","clinic_schedule_add","clinic_schedule_edit","clinic_schedule_delete","clinic_schedule_export"],other_module:["dashboard","change_password","medical_records_view"],patient_module:["patient_list","patient_add","patient_edit","patient_delete","patient_profile","patient_resend_credential","patient_export","patient_appointment","patient_appointment_report","patient_encounter"],patient_report_module:["patient_report","patient_report_add","patient_report_view","patient_report_delete","patient_report_edit"],prescription_module:["prescription_list","prescription_add","prescription_edit","prescription_delete","prescription_export"],service_module:["service_list","service_add","service_edit","service_delete","service_export"],session_module:["doctor_session_list","doctor_session_add","doctor_session_edit","doctor_session_delete","doctor_session_export"],static_data_module:["static_data_list","static_data_add","static_data_edit","static_data_export"]}},patient:{modules:h.filter(ne=>["appointment_module","billing_module","clinical_detail_module","encounter_module","other_module","patient_module","patient_report_module","patient_review_module","prescription_module"].includes(ne.key)),permissions:{appointment_module:["appointment_list","appointment_add","appointment_edit","appointment_view","appointment_cancel","appointment_export"],billing_module:["patient_bill_list","patient_bill_view","patient_bill_export"],clinical_detail_module:["medical_records_list"],encounter_module:["patient_encounter_list","patient_encounter_view","patient_encounter_export","patient_encounter_view_billing"],other_module:["dashboard","doctor_dashboard","change_password","medical_records_view","home_page"],patient_module:["patient_profile","patient_clinic"],patient_report_module:["patient_report","patient_report_add","patient_report_view","patient_report_delete","patient_report_edit"],patient_review_module:["patient_review_add","patient_review_edit","patient_review_get","patient_review_delete"],prescription_module:["prescription_list","prescription_export"]}},receptionist:{modules:h.filter(ne=>!["clinic_module","receptionist_module","custom_field_module","patient_review_module","tax_module","custom_form_module"].includes(ne.key)),permissions:{appointment_module:["appointment_list","appointment_add","appointment_edit","appointment_view","appointment_delete","appointment_export","patient_appointment_status_change"],billing_module:["patient_bill_list","patient_bill_add","patient_bill_edit","patient_bill_view","patient_bill_export"],clinical_detail_module:["medical_records_list","medical_records_add","medical_records_delete"],dashboard_module:["dashboard_total_patient","dashboard_total_doctor","dashboard_total_appointment","dashboard_total_revenue","dashboard_total_service","dashboard_total_today_appointment"],doctor_module:["doctor_list","doctor_add","doctor_edit","doctor_delete","doctor_resend_credential","doctor_export","patient_review_get"],encounter_module:["patient_encounter_list","patient_encounter_add","patient_encounter_edit","patient_encounter_view","patient_encounter_delete","patient_encounter_view_billing","patient_encounter_export"],encounters_template_module:["encounters_template_list","encounters_template_add","encounters_template_edit","encounters_template_view","encounters_template_delete"],holiday_module:["clinic_schedule","clinic_schedule_add","clinic_schedule_edit","clinic_schedule_delete","clinic_schedule_export"],other_module:["dashboard","change_password","medical_records_view"],patient_module:["patient_list","patient_add","patient_edit","patient_delete","patient_profile","patient_resend_credential","patient_export","patient_appointment","patient_appointment_report","patient_encounter"],patient_report_module:["patient_report","patient_report_add","patient_report_view","patient_report_delete","patient_report_edit"],prescription_module:["prescription_list","prescription_add","prescription_edit","prescription_delete","prescription_export"],service_module:["service_list","service_add","service_edit","service_delete","service_export"],session_module:["doctor_session_list","doctor_session_add","doctor_session_edit","doctor_session_export"],static_data_module:["static_data_list","static_data_add","static_data_edit","static_data_export"]}}}),[h]),[g,v]=f.useState(u),[x,y]=f.useState("administrator"),[b,k]=f.useState(p.administrator.modules),[w,T]=f.useState(p.administrator.modules[0]?.key||""),{control:j,handleSubmit:D,setValue:_,watch:N}=en({defaultValues:{}}),A=N(`${x}.appointment_module.appointment_list`)??!0,P=N(`${x}.billing_module.patient_bill_list`)??!0,E=N(`${x}.service_module.service_list`)??!0,I=N(`${x}.prescription_module.prescription_list`)??!0,M=N(`${x}.clinical_detail_module.medical_records_list`)??!0,O=N(`${x}.static_data_module.static_data_list`)??!0,F=N(`${x}.holiday_module.clinic_schedule`)??!0,H=N(`${x}.encounter_module.patient_encounter_list`)??!0,G=N(`${x}.receptionist_module.receptionist_list`)??!0,z=N(`${x}.doctor_module.doctor_list`)??!0,ie=N(`${x}.custom_field_module.custom_field_list`)??!0,W=N(`${x}.session_module.doctor_session_list`)??!0,ge=N(`${x}.clinic_module.clinic_list`)??!0,ae=N(`${x}.dashboard_module.dashboard_total_patient`)??!0,U=N(`${x}.patient_report_module.patient_report`)??!0,X=N(`${x}.patient_module.patient_list`)??!0,J=N(`${x}.tax_module.tax_list`)??!0,he=N(`${x}.custom_form_module.custom_form_list`)??!0,le=N(`${x}.encounters_template_module.encounters_template_list`)??!0,[ee,me]=f.useState(!1),K=un("settings","permission-setting");f.useEffect(()=>{if(a?.status&&a?.data){const ne=a.data;d(ne);const Y=u.map(B=>({...B,capabilities:ne[B.key]?.capabilities||{}}));v(Y),y("administrator"),k(p.administrator.modules),T(p.administrator.modules[0]?.key);const q={};u.forEach(B=>{const se=B.key;(p[se]?.modules||[]).forEach(pe=>{const $=pe.key;(p[se]?.permissions[$]||[]).forEach(De=>{const xe=ne[se]?.capabilities?.[$]?.[De];q[`${se}.${$}.${De}`]=xe!==void 0?xe:!0})})}),Object.entries(q).forEach(([B,se])=>_(B,se))}},[a,_,u,p]);const re=f.useCallback(ne=>{y(ne);const Y=p[ne]?.modules||[];k(Y),T(Y[0]?.key||"")},[p]);f.useEffect(()=>{c&&c[x]&&(p[x]?.modules||[]).forEach(Y=>{const q=Y.key;(p[x]?.permissions[q]||[]).forEach(se=>{const Q=c[x]?.capabilities?.[q]?.[se];_(`${x}.${q}.${se}`,Q!==void 0?Q:!0)})})},[x,c,p,_]);const oe=f.useCallback((ne,Y)=>{const q=h.find(se=>se.key===Y)?.permissions||[],B=p[ne]?.permissions[Y]||[];return q.filter(se=>B.includes(se.key)).map(se=>({key:se.key,label:se.label,value:c[ne]?.capabilities?.[Y]?.[se.key]||!1}))},[h,p,c]),C=ne=>({text:ne===!0?r("Active","kivicare-clinic-management-system"):r("Inactive","kivicare-clinic-management-system"),className:ne===!0?"text-primary bg-primary-subtle":"text-secondary bg-secondary-subtle"}),R=f.useCallback((ne,Y,q)=>{const B={};return Object.entries(ne).forEach(([se,Q])=>{B[se]={name:Y[se]?.name||se,capabilities:{}},Object.entries(Q).forEach(([pe,$])=>{B[se].capabilities[pe]={...$}})}),{data:B,type:q}},[]),te=f.useCallback(async ne=>{try{if(!ne||Object.keys(ne).length===0){Ze.fire({icon:"error",title:r("Error","kivicare-clinic-management-system"),text:r("No permission data to save","kivicare-clinic-management-system"),confirmButtonText:r("Ok","kivicare-clinic-management-system")});return}me(!0);const Y=R(ne,c,x);if(!Y.data||Object.keys(Y.data).length===0)throw new Error(r("Invalid permission data structure","kivicare-clinic-management-system"));const q=await K.mutateAsync(Y);q.status!==!0?(me(!1),Ze.fire({icon:"error",title:r("Error","kivicare-clinic-management-system"),text:r(q.message,"kivicare-clinic-management-system"),confirmButtonText:r("Ok","kivicare-clinic-management-system")})):(me(!1),m.invalidateQueries(["config"]),Ze.fire({icon:"success",title:r("Success","kivicare-clinic-management-system"),text:r(q.message,"kivicare-clinic-management-system"),confirmButtonText:r("Ok","kivicare-clinic-management-system")}))}catch(Y){me(!1),console.error("Failed to save settings:",Y);const q=Y?.response?.data?.message||Y?.message||r("Failed to save permission settings","kivicare-clinic-management-system");Ze.fire({icon:"error",title:r("Error","kivicare-clinic-management-system"),text:r(q,"kivicare-clinic-management-system"),confirmButtonText:r("Ok","kivicare-clinic-management-system")})}},[R,c,x,K]);if(o){let ne;return typeof o=="string"?ne=o:o?.response?.data?.message?ne=o.response.data.message:o?.message?ne=o.message:ne=r("An unknown error occurred","kivicare-clinic-management-system"),i.jsx(Ze,{icon:"error",title:r("Error","kivicare-clinic-management-system"),text:r(ne,"kivicare-clinic-management-system"),confirmButtonText:r("Ok","kivicare-clinic-management-system")})}return i.jsxs("div",{className:`permission-setting${e?"":" p-4 position-relative overflow-hidden z-0"}`,children:[!e&&i.jsx(di,{title:r("Available For Kivicare Pro","kivicare-clinic-management-system"),link:"https://codecanyon.net/item/kivicare-pro-clinic-patient-management-system-ehr-addon/30690654?s_rank=3"}),i.jsxs("h6",{className:"setting-title mb-3",children:[r("Permission Setting","kivicare-clinic-management-system")," "," ",s!=="on"&&i.jsx("a",{href:"https://documentation.iqonic.design/kivicare-wordpress/kivicare-pro/documentation-kivicare-pro/configuration-kivi-pro/permission-settings/",target:"_blank",rel:"noreferrer",children:i.jsx("i",{className:"ph ph-question align-middle h5 text-primary"})})]}),e&&(l||ee)&&i.jsx(SP,{}),i.jsx("div",{className:"permission-setting-tabs",children:i.jsxs("form",{onSubmit:D(te),children:[i.jsx(rS,{items:g,activeTab:x,onSelect:re,baseId:"role"}),i.jsx("div",{className:"card",children:i.jsx("div",{className:"card-body",children:i.jsx("div",{className:"tab-content",children:i.jsx("div",{className:"tab-pane fade show active",id:`role-${x}`,role:"tabpanel",children:i.jsxs("div",{className:"module-tabs-container",children:[i.jsx(rS,{items:b,activeTab:w,onSelect:T,baseId:"module"}),i.jsx("div",{className:"tab-content mt-4 ",style:{overflowX:"hidden"},children:i.jsx("div",{className:"tab-pane fade show active",id:`module-${w}`,role:"tabpanel",children:oe(x,w).map(ne=>{let Y=!1;return w==="appointment_module"&&ne.key!=="appointment_list"?Y=!A:w==="billing_module"&&ne.key!=="patient_bill_list"?Y=!P:w==="service_module"&&ne.key!=="service_list"?Y=!E:w==="prescription_module"&&ne.key!=="prescription_list"?Y=!I:w==="clinical_detail_module"&&ne.key!=="medical_records_list"?Y=!M:w==="static_data_module"&&ne.key!=="static_data_list"?Y=!O:w==="holiday_module"&&ne.key!=="clinic_schedule"?Y=!F:w==="encounter_module"&&ne.key!=="patient_encounter_list"?Y=!H:w==="receptionist_module"&&ne.key!=="receptionist_list"?Y=!G:w==="doctor_module"&&ne.key!=="doctor_list"?Y=!z:w==="custom_field_module"&&ne.key!=="custom_field_list"?Y=!ie:w==="session_module"&&ne.key!=="doctor_session_list"?Y=!W:w==="clinic_module"&&ne.key!=="clinic_list"?Y=!ge:w==="dashboard_module"&&ne.key!=="dashboard_total_patient"?Y=!ae:w==="encounters_template_module"&&ne.key!=="encounters_template_list"?Y=!le:w==="patient_module"&&ne.key!=="patient_list"?Y=!X:w==="patient_report_module"&&ne.key!=="patient_report"?Y=!U:w==="tax_module"&&ne.key!=="tax_list"?Y=!J:w==="custom_form_module"&&ne.key!=="custom_form_list"&&(Y=!he),i.jsx(ye,{name:`${x}.${w}.${ne.key}`,control:j,render:({field:q})=>i.jsx(cn,{label:ne.label,checked:q.value,onChange:q.onChange,badge:C(q.value),className:"mb-2",inputClassName:"mb-2",disabled:Y})},ne.key)})})})]})})})})}),i.jsx("div",{className:"d-flex align-items-center justify-content-end gap-3 mb-5 mt-4",children:i.jsx("button",{type:"submit",className:"btn btn-primary",disabled:ee,children:ee?i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),r("Saving...","kivicare-clinic-management-system")]}):r("Save","kivicare-clinic-management-system")})})]})})]})},lS=({isOpen:t,onClose:e,isLoading:n,messageData:s,setMessageData:a,onSubmit:l,disabled:o=!1,mode:c="sms",requiredFields:d=[]})=>{if(!t)return null;const m=o||n||!s?.phoneNumber||!s?.messageContent||d.some(g=>!g.value),u=g=>{const{name:v,value:x}=g.target;a(y=>({...y,[v]:x}))},h=c==="whatsapp"?r("Test WhatsApp Message","kivicare-clinic-management-system"):r("Test SMS","kivicare-clinic-management-system"),p=c==="whatsapp"?r("Welcome to KiviCare, This is test WhatsApp message","kivicare-clinic-management-system"):r("Welcome to KiviCare, This is test SMS message","kivicare-clinic-management-system");return i.jsx("div",{className:"modal fade show d-block",tabIndex:"-1",role:"dialog",children:i.jsx("div",{className:"modal-dialog",role:"document",children:i.jsxs("div",{className:"modal-content",children:[i.jsxs("div",{className:"modal-header",children:[i.jsx("h5",{className:"modal-title",children:h}),i.jsx("button",{type:"button",className:"btn-close",onClick:e,disabled:n,"aria-label":r("Close","kivicare-clinic-management-system"),children:i.jsx("i",{class:"ph ph-x-circle h4 mb-0 icon-color fw-normal"})})]}),i.jsxs("div",{className:"modal-body",children:[i.jsxs("div",{className:"mb-3",children:[i.jsx("label",{className:"form-label",children:r("Phone Number","kivicare-clinic-management-system")}),i.jsx("input",{type:"text",name:"phoneNumber",className:"form-control",value:s.phoneNumber||"",onChange:u,placeholder:r("Enter phone number with country code (e.g., +1234567890)","kivicare-clinic-management-system"),disabled:n})]}),i.jsxs("div",{className:"mb-3",children:[i.jsx("label",{className:"form-label",children:r("Message Content","kivicare-clinic-management-system")}),i.jsx("textarea",{name:"messageContent",className:"form-control",rows:"4",value:s.messageContent||p,onChange:u,disabled:n})]}),i.jsx("div",{className:"alert alert-warning mb-0",children:c==="whatsapp"?r("Note: Standard Twilio WhatsApp Charges Applicable","kivicare-clinic-management-system"):r("Note: Standard Twilio SMS Charges Applicable","kivicare-clinic-management-system")})]}),i.jsxs("div",{className:"modal-footer",children:[i.jsx("button",{type:"button",className:"btn btn-secondary",onClick:e,disabled:n,children:r("Cancel","kivicare-clinic-management-system")}),i.jsxs("button",{type:"button",className:"btn btn-primary ms-2",onClick:g=>{g.preventDefault(),l()},disabled:m,children:[n&&i.jsx("span",{className:"spinner-border spinner-border-sm me-1",role:"status","aria-hidden":"true"}),r("Send Test","kivicare-clinic-management-system")]})]})]})})})},Vr=({title:t,children:e,className:n=""})=>i.jsx("div",{className:`card ${n}`,children:i.jsxs("div",{className:"card-body p-3",children:[i.jsx("h6",{className:"mb-3 fw-semibold",children:r(t,"kivicare-clinic-management-system")}),e]})}),oS=({title:t,text:e})=>i.jsx("div",{className:"bg-body p-3 rounded",children:i.jsxs("div",{className:"d-flex align-items-md-center flex-md-row flex-column column-gap-3 row-gap-2",children:[i.jsx("span",{className:"flex-shrink-0 h6 m-0 font-size-14",children:r(t,"kivicare-clinic-management-system")}),i.jsx("span",{className:"font-size-14 heading-color",children:r(e,"kivicare-clinic-management-system")})]})}),xhe=()=>{const{isAddonActive:t,darkMode:e,toggleDarkMode:n}=mt(),s=t("kiviPro"),[a,l]=f.useState(!1),[o,c]=f.useState(""),d=un("settings","pro-settings"),{data:m}=Sn(),u=m?.data?.hideUtilityLinks,{data:h,isLoading:p,error:g}=kn("settings","pro-settings",{},{enabled:s}),{control:v,handleSubmit:x,watch:y,reset:b,formState:{errors:k}}=en({defaultValues:{site_logo:"",site_mini_logo:"",dark_site_logo:"",dark_site_mini_logo:"",rtl:!1,darkMode:!1,themeColor:"#007bff",primaryColor:"#5670CC",secondaryColor:"#f68685",successColor:"#219653",warningColor:"#FAA100",dangerColor:"#F54438",infoColor:"#007EA7",bodyBg:"#f5f6fa",bodyColor:"#828A90",borderColor:"#dbdfe7",headingColor:"#3F414D",cardColor:"#ffffff",darkPrimaryColor:"#5670CC",darkSecondaryColor:"#f68685",darkSuccessColor:"#219653",darkWarningColor:"#FAA100",darkDangerColor:"#F54438",darkInfoColor:"#007EA7",darkBodyBg:"#1e2023",darkBodyColor:"#828A90",darkBorderColor:"#303030",darkHeadingColor:"#d6dce2",darkCardColor:"#252934",wordpressLogo:"",wordpressLogoStatus:!1,enabledCustomizableSms:!1,enabledCustomizableWhatsApp:!1,enableTwilioSms:!1,twilioSmsAccountSID:"",twilioSmsAuthToken:"",twilioSmsPhoneNumber:"",enableTwilioWhatsApp:!1,twilioWhatsAppAccountSID:"",twilioWhatsAppAuthToken:"",twilioWhatsAppPhoneNumber:"",googleCalendarConfiguration:!1,googleCalendarClientId:"",googleCalendarClientSecret:"",appName:"",patientCalendarEvent:!1,clinicEncounterPrint:!1,doctorEncounterPrint:!1,hideEncounterClinicalDetails:!1,copyrightText:"KiviCare - Clinic and Patient Management System (EHR)",AdminSlug:"",clinicAdminSlug:"",doctorSlug:"",receptionistSlug:"",patientSlug:""}}),[w,T]=f.useState(e?"dark":"light");f.useEffect(()=>{T(e?"dark":"light")},[e]),f.useEffect(()=>{if(h){const C=ne=>ne===!0||ne==="true"||ne===1||ne==="1"||ne==="yes"||ne==="on",R=["rtl","darkMode","wordpressLogoStatus","enabledCustomizableSms","enabledCustomizableWhatsApp","enableTwilioSms","enableTwilioWhatsApp","googleCalendarConfiguration","patientCalendarEvent","clinicEncounterPrint","doctorEncounterPrint","hideEncounterClinicalDetails"],te={...h};R.forEach(ne=>{ne in te&&(te[ne]=C(te[ne]))}),b(ne=>({...ne,...te})),(te.rtl===!0||te.rtl==="true")&&(document.documentElement.setAttribute("dir","rtl"),document.documentElement.setAttribute("lang","ar"),document.body.classList.add("rtl-mode"))}},[h,b]);const j=(C="light")=>{const R=C==="dark";return{primary:y(R?"darkPrimaryColor":"primaryColor"),secondary:y(R?"darkSecondaryColor":"secondaryColor"),success:y(R?"darkSuccessColor":"successColor"),warning:y(R?"darkWarningColor":"warningColor"),danger:y(R?"darkDangerColor":"dangerColor"),info:y(R?"darkInfoColor":"infoColor"),"body-bg":y(R?"darkBodyBg":"bodyBg"),"body-color":y(R?"darkBodyColor":"bodyColor"),"border-color":y(R?"darkBorderColor":"borderColor"),"heading-color":y(R?"darkHeadingColor":"headingColor"),"gray-900":y(R?"darkCardColor":"cardColor")}},D=()=>{const C=j("light"),R=j("dark"),te=ne=>Object.fromEntries(Object.entries(ne).filter(([Y,q])=>q&&q.trim()!==""));mC(te(C),te(R))},_=y("googleCalendarConfiguration"),N=y("wordpressLogoStatus"),A=y("enableTwilioSms"),P=y("enableTwilioWhatsApp"),E=C=>({text:C===!0||C==="on"?r("Active","kivicare-clinic-management-system"):r("Inactive","kivicare-clinic-management-system"),className:C===!0||C==="on"?"text-primary bg-primary-subtle":"text-secondary bg-secondary-subtle"}),I=[{key:"clinicEncounterPrint",label:r("Include Encounter Clinical Details In Prescription Print","kivicare-clinic-management-system")},{key:"doctorEncounterPrint",label:r("Include Encounter Custom Fields In Prescription Print","kivicare-clinic-management-system")},{key:"hideEncounterClinicalDetails",label:r("Hide Encounter Clinical Details To Patient","kivicare-clinic-management-system")}],M=[{key:"googleCalendarClientId",label:r("Google Calendar Client Id","kivicare-clinic-management-system"),placeholder:r("Enter Google Calendar Client Id","kivicare-clinic-management-system"),isInteger:!1},{key:"googleCalendarClientSecret",label:r("Google Calendar Client Secret","kivicare-clinic-management-system"),placeholder:r("Enter Google Calendar Client Secret","kivicare-clinic-management-system"),isInteger:!1},{key:"appName",label:r("App Name","kivicare-clinic-management-system"),placeholder:r("Enter App Name","kivicare-clinic-management-system"),isInteger:!1}];r("Step 1:","kivicare-clinic-management-system"),r("Please refer the following link for the setup.","kivicare-clinic-management-system");const O=[{key:"twilioSmsAccountSID",label:r("ACCOUNT SID","kivicare-clinic-management-system"),placeholder:r("Enter ACCOUNT SID","kivicare-clinic-management-system"),isInteger:!1},{key:"twilioSmsAuthToken",label:r("AUTH TOKEN","kivicare-clinic-management-system"),placeholder:r("Enter AUTH TOKEN","kivicare-clinic-management-system"),isInteger:!1},{key:"twilioSmsPhoneNumber",label:r("PHONE NUMBER","kivicare-clinic-management-system"),placeholder:r("Enter PHONE NUMBER","kivicare-clinic-management-system"),isInteger:!1}],F=[{key:"twilioWhatsAppAccountSID",label:r("ACCOUNT SID","kivicare-clinic-management-system"),placeholder:r("Enter ACCOUNT SID","kivicare-clinic-management-system"),isInteger:!1},{key:"twilioWhatsAppAuthToken",label:r("AUTH TOKEN","kivicare-clinic-management-system"),placeholder:r("Enter AUTH TOKEN","kivicare-clinic-management-system"),isInteger:!1},{key:"twilioWhatsAppPhoneNumber",label:r("PHONE NUMBER","kivicare-clinic-management-system"),placeholder:r("Enter PHONE NUMBER","kivicare-clinic-management-system"),isInteger:!1}],H=[{title:r("Step 1:","kivicare-clinic-management-system"),text:r("You can sign up for a free Twilio trial account here: Step 1: You can sign up for a free Twilio trial account here","kivicare-clinic-management-system")},{title:r("Step 2:","kivicare-clinic-management-system"),text:r("To get the Twilio CLI connected to your account. Visit , Twilo SMS portal and youll find your unique Account SID and Auth Token to provide to the CLI.","kivicare-clinic-management-system")},{title:r("Step 3:","kivicare-clinic-management-system"),text:r("Copy and Paste ACCOUNT SID and AUTH TOKEN and click on save button and here you go.","kivicare-clinic-management-system")},{title:r("Step 4 (Optional):","kivicare-clinic-management-system"),text:r("To get your first Twilio phone number for sending sms. Visit , head on over to the console and you will get phone number to send SMS if you dont want any particular number to send message use your SID.","kivicare-clinic-management-system")},{title:r("Important Note:","kivicare-clinic-management-system"),text:r("Reciever(doctor/patient) Phone/contact No must be in twillo specific format ([+] [country code] [mobile number] ) , Please Refer here for more details","kivicare-clinic-management-system")}],G=C=>C?String(C).toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,"").replace(/-+/g,"-"):"",z=C=>{const R=C.key;C.ctrlKey||C.metaKey||C.altKey||["Backspace","Delete","ArrowLeft","ArrowRight","ArrowUp","ArrowDown","Tab","Home","End"].includes(R)||/^[a-z0-9-]$/.test(R)||C.preventDefault()},ie=un("settings","sms-whatsapp-template/test"),[W,ge]=f.useState(!1),[ae,U]=f.useState(!1),[X,J]=f.useState({phoneNumber:"",messageContent:"Welcome to KiviCare, This is test SMS message"}),[he,le]=f.useState({phoneNumber:"",messageContent:"Welcome to KiviCare, This is test WhatsApp message"}),ee=async()=>{try{l(!0),ie.mutate({type:"sms",mobile:X.phoneNumber,content:X.messageContent},{onSuccess:()=>{Ze.fire({icon:"success",title:r("Success","kivicare-clinic-management-system"),text:r("Test SMS sent successfully!","kivicare-clinic-management-system"),confirmButtonText:r("OK","kivicare-clinic-management-system")}),ge(!1)},onError:C=>{Ze.fire({icon:"error",title:r("Error","kivicare-clinic-management-system"),text:C.message||r("Failed to send test SMS","kivicare-clinic-management-system"),confirmButtonText:r("OK","kivicare-clinic-management-system")})},onSettled:()=>{l(!1)}})}catch{l(!1)}},me=async()=>{try{l(!0),ie.mutate({type:"whatsapp",mobile:he.phoneNumber,content:he.messageContent},{onSuccess:()=>{Ze.fire({icon:"success",title:r("Success","kivicare-clinic-management-system"),text:r("Test WhatsApp message sent successfully!","kivicare-clinic-management-system"),confirmButtonText:r("OK","kivicare-clinic-management-system")}),U(!1)},onError:C=>{Ze.fire({icon:"error",title:r("Error","kivicare-clinic-management-system"),text:C?.response?.data?.message||C?.message||r("Failed to send test WhatsApp message","kivicare-clinic-management-system"),confirmButtonText:r("OK","kivicare-clinic-management-system")})},onSettled:()=>{l(!1)}})}catch{l(!1)}},K=()=>{Ze.fire({title:r("Reset Color Settings","kivicare-clinic-management-system"),text:r("Are you sure you want to reset all color settings to their default values?","kivicare-clinic-management-system"),icon:"warning",showCancelButton:!0,confirmButtonText:r("Yes, reset","kivicare-clinic-management-system"),cancelButtonText:r("Cancel","kivicare-clinic-management-system")}).then(C=>{C.isConfirmed&&(b(R=>({...R,primaryColor:"#5670CC",secondaryColor:"#f68685",successColor:"#219653",warningColor:"#FAA100",dangerColor:"#F54438",infoColor:"#007EA7",bodyBg:"#f5f6fa",bodyColor:"#828A90",borderColor:"#dbdfe7",headingColor:"#3F414D",cardColor:"#ffffff",darkPrimaryColor:"#5670CC",darkSecondaryColor:"#f68685",darkSuccessColor:"#219653",darkWarningColor:"#FAA100",darkDangerColor:"#F54438",darkInfoColor:"#007EA7",darkBodyBg:"#1e2023",darkBodyColor:"#828A90",darkBorderColor:"#303030",darkHeadingColor:"#d6dce2",darkCardColor:"#252934"})),setTimeout(D,100))})},re=C=>!C||/^\d+$/.test(String(C))?!0:r("Invalid parameter","kivicare-clinic-management-system"),oe=async C=>{try{c(""),l(!0);const R=w==="dark",te=Q=>Object.fromEntries(Object.entries(Q).filter(([pe,$])=>$&&$.trim()!=="")),ne={primary:C.primaryColor,secondary:C.secondaryColor,success:C.successColor,warning:C.warningColor,danger:C.dangerColor,info:C.infoColor,"body-bg":C.bodyBg,"body-color":C.bodyColor,"border-color":C.borderColor,"heading-color":C.headingColor,"gray-900":C.cardColor},Y={primary:C.darkPrimaryColor,secondary:C.darkSecondaryColor,success:C.darkSuccessColor,warning:C.darkWarningColor,danger:C.darkDangerColor,info:C.darkInfoColor,"body-bg":C.darkBodyBg,"body-color":C.darkBodyColor,"border-color":C.darkBorderColor,"heading-color":C.darkHeadingColor,"gray-900":C.darkCardColor},q=mC(te(ne),te(Y)),B={...C,darkMode:R,site_logo:C.site_logo&&C.site_logo.id?C.site_logo.id:null,site_mini_logo:C.site_mini_logo&&C.site_mini_logo.id?C.site_mini_logo.id:null,dark_site_logo:C.dark_site_logo&&C.dark_site_logo.id?C.dark_site_logo.id:null,dark_site_mini_logo:C.dark_site_mini_logo&&C.dark_site_mini_logo.id?C.dark_site_mini_logo.id:null,wordpressLogo:C.wordpressLogo&&C.wordpressLogo.id?C.wordpressLogo.id:null,clinicEncounterPrint:C.clinicEncounterPrint,doctorEncounterPrint:C.doctorEncounterPrint,hideEncounterClinicalDetails:C.hideEncounterClinicalDetails,rtl:C.rtl,customNotification:[{type:"sms",status:C.enabledCustomizableSms?"yes":"no"},{type:"whatsapp",status:C.enabledCustomizableWhatsApp?"yes":"no"}],twilioSms:{account_id:C.twilioSmsAccountSID||"",auth_token:C.twilioSmsAuthToken||"",to_number:C.twilioSmsPhoneNumber||"",enableSMS:C.enableTwilioSms},twilioWhatsApp:{account_id:C.twilioWhatsAppAccountSID||"",auth_token:C.twilioWhatsAppAuthToken||"",to_number:C.twilioWhatsAppPhoneNumber||"",enableWhatsApp:C.enableTwilioWhatsApp},googleAccount:{client_id:C.googleCalendarClientId,client_secret:C.googleCalendarClientSecret,app_name:C.appName,enableCal:!!C.googleCalendarConfiguration},generatedColors:q},se=await d.mutateAsync(B);se.status!==!0?(l(!1),c(se.message),Ze.fire({icon:"error",title:r("Error","kivicare-clinic-management-system"),text:r(se.message,"kivicare-clinic-management-system"),confirmButtonText:r("Ok","kivicare-clinic-management-system")})):(l(!1),c(""),C.rtl===!0||C.rtl==="true"?(document.documentElement.setAttribute("dir","rtl"),document.documentElement.setAttribute("lang","ar"),document.body.classList.add("rtl-mode")):(document.documentElement.setAttribute("dir","ltr"),document.documentElement.setAttribute("lang","en"),document.body.classList.remove("rtl-mode")),C.darkMode===!0||C.darkMode==="true"?document.body.setAttribute("data-bs-theme","dark"):document.body.setAttribute("data-bs-theme","light"),Ze.fire({icon:"success",title:r("Success","kivicare-clinic-management-system"),text:r(se.message,"kivicare-clinic-management-system"),confirmButtonText:r("Ok","kivicare-clinic-management-system")}))}catch(R){l(!1),console.error("Failed to save settings:",R)}};if(g){let C;typeof g=="string"?C=g:g?.response?.data?.message?C=g.response.data.message:g?.message?C=g.message:C=r("An unknown error occurred","kivicare-clinic-management-system"),Ze.fire({icon:"error",title:r("Error","kivicare-clinic-management-system"),text:r(C,"kivicare-clinic-management-system"),confirmButtonText:r("Ok","kivicare-clinic-management-system")})}return i.jsx(i.Fragment,{children:i.jsx("div",{className:"tab-pane fade show active position-relative overflow-hidden z-0",id:"v-pills-pro-settings",role:"tabpanel","aria-labelledby":"v-pills-pro-settings-tab",tabIndex:"0",children:i.jsxs("div",{className:`pro-setting${s?"":" p-4"}`,children:[!s&&i.jsx(di,{title:r("Available For Kivicare Pro","kivicare-clinic-management-system"),link:"https://codecanyon.net/item/kivicare-pro-clinic-patient-management-system-ehr-addon/30690654?s_rank=3"}),i.jsxs("h6",{className:"setting-title mb-3",children:[r("Pro Settings","kivicare-clinic-management-system")," ",u!=="on"&&i.jsx("a",{href:"https://documentation.iqonic.design/kivicare-wordpress/kivicare-pro/documentation-kivicare-pro/configuration-kivi-pro/pro-settings/",target:"_blank",rel:"noreferrer",children:i.jsx("i",{className:"ph ph-question align-middle h5 text-primary"})})]}),s&&p&&i.jsx(NP,{}),!p&&i.jsxs("form",{onSubmit:x(oe),children:[i.jsxs(Vr,{title:r("Theme Setting","kivicare-clinic-management-system"),children:[i.jsx(ye,{name:"rtl",control:v,render:({field:C})=>i.jsx(cn,{label:r("RTL Mode","kivicare-clinic-management-system"),checked:C.value,onChange:C.onChange,badge:E(C.value),disabled:a,error:k?.rtl})}),i.jsx("div",{className:"mt-4",children:i.jsxs(Cg,{id:"pills-tab",activeKey:w,onSelect:C=>{T(C),C==="light"&&e&&n(),C==="dark"&&!e&&n()},className:"mb-3 nav-fill",children:[i.jsxs(Rc,{eventKey:"light",title:r("Light Mode","kivicare-clinic-management-system"),children:[i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-lg-6",children:i.jsx(ye,{name:"site_logo",control:v,render:({field:C})=>i.jsx(Dd,{label:r("Site Logo","kivicare-clinic-management-system"),value:C.value,onChange:C.onChange,className:"col-md-6",preview:!!C.value,disabled:a})})}),i.jsx("div",{className:"col-lg-6",children:i.jsx(ye,{name:"site_mini_logo",control:v,render:({field:C})=>i.jsx(Dd,{label:r("Site Mini Logo","kivicare-clinic-management-system"),value:C.value,onChange:C.onChange,className:"col-md-6",preview:!!C.value,disabled:a})})})]}),i.jsx("div",{className:"row gy-4",children:i.jsxs("div",{className:"col-12",children:[i.jsxs("h6",{children:[r("Color Settings","kivicare-clinic-management-system")," ",i.jsxs("span",{className:" cursor-pointer ",onClick:K,children:["  ",i.jsx("i",{className:"ph ph-arrow-clockwise"})]})," "]}),i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-lg-4",children:i.jsx("div",{className:"form-group pro-setting-color",children:i.jsx(ye,{name:"primaryColor",control:v,render:({field:C})=>i.jsx(Ht,{label:r("Primary Color","kivicare-clinic-management-system"),type:"color",value:C.value,onChange:R=>{C.onChange(R),D()},disabled:a,error:k?.primaryColor,className:"form-control-color"})})})}),i.jsx("div",{className:"col-lg-4",children:i.jsx("div",{className:"form-group pro-setting-color",children:i.jsx(ye,{name:"secondaryColor",control:v,render:({field:C})=>i.jsx(Ht,{label:r("Secondary Color","kivicare-clinic-management-system"),type:"color",value:C.value,onChange:R=>{C.onChange(R),D()},disabled:a,error:k?.secondaryColor,className:"form-control-color"})})})}),i.jsx("div",{className:"col-lg-4",children:i.jsx("div",{className:"form-group pro-setting-color",children:i.jsx(ye,{name:"successColor",control:v,render:({field:C})=>i.jsx(Ht,{label:r("Success Color","kivicare-clinic-management-system"),type:"color",value:C.value,onChange:R=>{C.onChange(R),D()},disabled:a,error:k?.successColor,className:"form-control-color"})})})}),i.jsx("div",{className:"col-lg-4",children:i.jsx("div",{className:"form-group pro-setting-color",children:i.jsx(ye,{name:"warningColor",control:v,render:({field:C})=>i.jsx(Ht,{label:r("Warning Color","kivicare-clinic-management-system"),type:"color",value:C.value,onChange:R=>{C.onChange(R),D()},disabled:a,error:k?.warningColor,className:"form-control-color"})})})}),i.jsx("div",{className:"col-lg-4",children:i.jsx("div",{className:"form-group pro-setting-color",children:i.jsx(ye,{name:"dangerColor",control:v,render:({field:C})=>i.jsx(Ht,{label:r("Danger Color","kivicare-clinic-management-system"),type:"color",value:C.value,onChange:R=>{C.onChange(R),D()},disabled:a,error:k?.dangerColor,className:"form-control-color"})})})}),i.jsx("div",{className:"col-lg-4",children:i.jsx("div",{className:"form-group pro-setting-color",children:i.jsx(ye,{name:"infoColor",control:v,render:({field:C})=>i.jsx(Ht,{label:r("Info Color","kivicare-clinic-management-system"),type:"color",value:C.value,onChange:R=>{C.onChange(R),D()},disabled:a,error:k?.infoColor,className:"form-control-color"})})})}),i.jsx("div",{className:"col-lg-4",children:i.jsx("div",{className:"form-group pro-setting-color",children:i.jsx(ye,{name:"bodyBg",control:v,render:({field:C})=>i.jsx(Ht,{label:r("Body Background Color","kivicare-clinic-management-system"),type:"color",value:C.value,onChange:R=>{C.onChange(R),D()},disabled:a,error:k?.bodyBg,className:"form-control-color"})})})}),i.jsx("div",{className:"col-lg-4",children:i.jsx("div",{className:"form-group pro-setting-color",children:i.jsx(ye,{name:"bodyColor",control:v,render:({field:C})=>i.jsx(Ht,{label:r("Body Text Color","kivicare-clinic-management-system"),type:"color",value:C.value,onChange:R=>{C.onChange(R),D()},disabled:a,error:k?.bodyColor,className:"form-control-color"})})})}),i.jsx("div",{className:"col-lg-4",children:i.jsx("div",{className:"form-group pro-setting-color",children:i.jsx(ye,{name:"borderColor",control:v,render:({field:C})=>i.jsx(Ht,{label:r("Border Color","kivicare-clinic-management-system"),type:"color",value:C.value,onChange:R=>{C.onChange(R),D()},disabled:a,error:k?.borderColor,className:"form-control-color"})})})}),i.jsx("div",{className:"col-lg-4",children:i.jsx("div",{className:"form-group pro-setting-color",children:i.jsx(ye,{name:"headingColor",control:v,render:({field:C})=>i.jsx(Ht,{label:r("Heading Color","kivicare-clinic-management-system"),type:"color",value:C.value,onChange:R=>{C.onChange(R),D()},disabled:a,error:k?.headingColor,className:"form-control-color"})})})}),i.jsx("div",{className:"col-lg-4",children:i.jsx("div",{className:"form-group pro-setting-color",children:i.jsx(ye,{name:"cardColor",control:v,render:({field:C})=>i.jsx(Ht,{label:r("Card Color","kivicare-clinic-management-system"),type:"color",value:C.value,onChange:R=>{C.onChange(R),D()},disabled:a,error:k?.cardColor,className:"form-control-color"})})})})]})]})})]}),i.jsx(Rc,{eventKey:"dark",title:r("Dark Mode","kivicare-clinic-management-system"),children:i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-lg-6",children:i.jsx(ye,{name:"dark_site_logo",control:v,render:({field:C})=>i.jsx(Dd,{label:r("Site Logo","kivicare-clinic-management-system"),value:C.value,onChange:C.onChange,className:"col-md-6",preview:!!C.value,disabled:a})})}),i.jsx("div",{className:"col-lg-6",children:i.jsx(ye,{name:"dark_site_mini_logo",control:v,render:({field:C})=>i.jsx(Dd,{label:r("Site Mini Logo","kivicare-clinic-management-system"),value:C.value,onChange:C.onChange,className:"col-md-6",preview:!!C.value,disabled:a})})}),i.jsxs("div",{className:"col-12",children:[i.jsxs("h6",{children:[r("Color Settings","kivicare-clinic-management-system")," ",i.jsxs("span",{className:" cursor-pointer ",onClick:K,children:["  ",i.jsx("i",{className:"ph ph-arrow-clockwise"})]})," "]}),i.jsxs("div",{className:"row gy-4",children:[i.jsx("div",{className:"col-lg-4",children:i.jsx("div",{className:"form-group pro-setting-color",children:i.jsx(ye,{name:"darkPrimaryColor",control:v,render:({field:C})=>i.jsx(Ht,{label:r("Primary Color","kivicare-clinic-management-system"),type:"color",value:C.value,onChange:R=>{C.onChange(R),D()},disabled:a,error:k?.darkPrimaryColor,className:"form-control-color"})})})}),i.jsx("div",{className:"col-lg-4",children:i.jsx("div",{className:"form-group pro-setting-color",children:i.jsx(ye,{name:"darkSecondaryColor",control:v,render:({field:C})=>i.jsx(Ht,{label:r("Secondary Color","kivicare-clinic-management-system"),type:"color",value:C.value,onChange:R=>{C.onChange(R),D()},disabled:a,error:k?.darkSecondaryColor,className:"form-control-color"})})})}),i.jsx("div",{className:"col-lg-4",children:i.jsx("div",{className:"form-group pro-setting-color",children:i.jsx(ye,{name:"darkSuccessColor",control:v,render:({field:C})=>i.jsx(Ht,{label:r("Success Color","kivicare-clinic-management-system"),type:"color",value:C.value,onChange:R=>{C.onChange(R),D()},disabled:a,error:k?.darkSuccessColor,className:"form-control-color"})})})}),i.jsx("div",{className:"col-lg-4",children:i.jsx("div",{className:"form-group pro-setting-color",children:i.jsx(ye,{name:"darkWarningColor",control:v,render:({field:C})=>i.jsx(Ht,{label:r("Warning Color","kivicare-clinic-management-system"),type:"color",value:C.value,onChange:R=>{C.onChange(R),D()},disabled:a,error:k?.darkWarningColor,className:"form-control-color"})})})}),i.jsx("div",{className:"col-lg-4",children:i.jsx("div",{className:"form-group pro-setting-color",children:i.jsx(ye,{name:"darkDangerColor",control:v,render:({field:C})=>i.jsx(Ht,{label:r("Danger Color","kivicare-clinic-management-system"),type:"color",value:C.value,onChange:R=>{C.onChange(R),D()},disabled:a,error:k?.darkDangerColor,className:"form-control-color"})})})}),i.jsx("div",{className:"col-lg-4",children:i.jsx("div",{className:"form-group pro-setting-color",children:i.jsx(ye,{name:"darkInfoColor",control:v,render:({field:C})=>i.jsx(Ht,{label:r("Info Color","kivicare-clinic-management-system"),type:"color",value:C.value,onChange:R=>{C.onChange(R),D()},disabled:a,error:k?.darkInfoColor,className:"form-control-color"})})})}),i.jsx("div",{className:"col-lg-4",children:i.jsx("div",{className:"form-group pro-setting-color",children:i.jsx(ye,{name:"darkBodyBg",control:v,render:({field:C})=>i.jsx(Ht,{label:r("Body Background Color","kivicare-clinic-management-system"),type:"color",value:C.value,onChange:R=>{C.onChange(R),D()},disabled:a,error:k?.darkBodyBg,className:"form-control-color"})})})}),i.jsx("div",{className:"col-lg-4",children:i.jsx("div",{className:"form-group pro-setting-color",children:i.jsx(ye,{name:"darkBodyColor",control:v,render:({field:C})=>i.jsx(Ht,{label:r("Body Text Color","kivicare-clinic-management-system"),type:"color",value:C.value,onChange:R=>{C.onChange(R),D()},disabled:a,error:k?.darkBodyColor,className:"form-control-color"})})})}),i.jsx("div",{className:"col-lg-4",children:i.jsx("div",{className:"form-group pro-setting-color",children:i.jsx(ye,{name:"darkHeadingColor",control:v,render:({field:C})=>i.jsx(Ht,{label:r("Heading Color","kivicare-clinic-management-system"),type:"color",value:C.value,onChange:R=>{C.onChange(R),D()},disabled:a,error:k?.darkHeadingColor,className:"form-control-color"})})})}),i.jsx("div",{className:"col-lg-4",children:i.jsx("div",{className:"form-group pro-setting-color",children:i.jsx(ye,{name:"darkCardColor",control:v,render:({field:C})=>i.jsx(Ht,{label:r("Card Color","kivicare-clinic-management-system"),type:"color",value:C.value,onChange:R=>{C.onChange(R),D()},disabled:a,error:k?.darkCardColor,className:"form-control-color"})})})}),i.jsx("div",{className:"col-lg-4",children:i.jsx("div",{className:"form-group pro-setting-color",children:i.jsx(ye,{name:"darkBorderColor",control:v,render:({field:C})=>i.jsx(Ht,{label:r("Border Color","kivicare-clinic-management-system"),type:"color",value:C.value,onChange:R=>{C.onChange(R),D()},disabled:a,error:k?.darkBorderColor,className:"form-control-color"})})})})]})]})]})})]})})]}),i.jsxs(Vr,{title:r("Dashboard Slug","kivicare-clinic-management-system"),children:[i.jsx("div",{className:"col-12",children:i.jsxs("small",{className:"text-muted d-block mb-1",children:[i.jsx("span",{className:"text-primary",children:r("Note :","kivicare-clinic-management-system")})," ",r("If you change slug here then you need to also change in general setting login redirect url slug","kivicare-clinic-management-system")]})}),i.jsxs("div",{className:"row gy-4 ",children:[i.jsx("div",{className:"col-lg-6",children:i.jsx(ye,{name:"AdminSlug",control:v,render:({field:C})=>i.jsx(Ht,{label:r("Admin Slug","kivicare-clinic-management-system"),value:C.value,onChange:R=>C.onChange(G(R?.target?R.target.value:R)),onKeyDown:z,placeholder:r("e.g. kivicare-admin","kivicare-clinic-management-system"),error:k?.AdminSlug})})}),i.jsx("div",{className:"col-lg-6",children:i.jsx(ye,{name:"clinicAdminSlug",control:v,render:({field:C})=>i.jsx(Ht,{label:r("Clinic Admin Slug","kivicare-clinic-management-system"),value:C.value,onChange:R=>C.onChange(G(R?.target?R.target.value:R)),onKeyDown:z,placeholder:r("e.g. kivicare-clinic-admin","kivicare-clinic-management-system"),error:k?.clinicAdminSlug})})}),i.jsx("div",{className:"col-lg-6",children:i.jsx(ye,{name:"doctorSlug",control:v,render:({field:C})=>i.jsx(Ht,{label:r("Doctor Slug","kivicare-clinic-management-system"),value:C.value,onChange:R=>C.onChange(G(R?.target?R.target.value:R)),onKeyDown:z,placeholder:r("e.g. kivicare-doctor","kivicare-clinic-management-system"),error:k?.doctorSlug})})}),i.jsx("div",{className:"col-lg-6",children:i.jsx(ye,{name:"receptionistSlug",control:v,render:({field:C})=>i.jsx(Ht,{label:r("Receptionist Slug","kivicare-clinic-management-system"),value:C.value,onChange:R=>C.onChange(G(R?.target?R.target.value:R)),onKeyDown:z,placeholder:r("e.g. kivicare-receptionist","kivicare-clinic-management-system"),error:k?.receptionistSlug})})}),i.jsx("div",{className:"col-lg-6",children:i.jsx(ye,{name:"patientSlug",control:v,render:({field:C})=>i.jsx(Ht,{label:r("Patient Slug","kivicare-clinic-management-system"),value:C.value,onChange:R=>C.onChange(G(R?.target?R.target.value:R)),onKeyDown:z,placeholder:r("e.g. kivicare-patient","kivicare-clinic-management-system"),error:k?.patientSlug})})})]})]}),i.jsxs(Vr,{title:r("WordPress Logo","kivicare-clinic-management-system"),children:[i.jsx(ye,{name:"wordpressLogoStatus",control:v,render:({field:C})=>i.jsx(cn,{label:r("Enable WordPress Logo","kivicare-clinic-management-system"),checked:C.value,onChange:C.onChange,badge:E(C.value),disabled:a,error:k?.wordpressLogo})}),N||N=="on"?i.jsx(ye,{name:"wordpressLogo",control:v,render:({field:C})=>i.jsx(Dd,{label:r("WordPress Logo","kivicare-clinic-management-system"),value:C.value,onChange:C.onChange,className:"col-md-6",preview:!!C.value,disabled:a})}):i.jsx(i.Fragment,{})]}),i.jsxs(Vr,{title:r("Custom Notification","kivicare-clinic-management-system"),children:[i.jsx(ye,{name:"enabledCustomizableSms",control:v,render:({field:C})=>i.jsx(cn,{label:r("Enable SMS","kivicare-clinic-management-system"),checked:C.value,onChange:C.onChange,badge:E(C.value),disabled:a,error:k?.enabledCustomizableSms})}),i.jsx(ye,{name:"enabledCustomizableWhatsApp",control:v,render:({field:C})=>i.jsx(cn,{label:r("Enable whatsApp","kivicare-clinic-management-system"),checked:C.value,onChange:C.onChange,badge:E(C.value),disabled:a,error:k?.enabledCustomizableWhatsApp})})]}),i.jsxs(Vr,{title:r("Twilio Account Settings","kivicare-clinic-management-system"),children:[i.jsx(ye,{name:"enableTwilioSms",control:v,render:({field:C})=>i.jsx(cn,{label:r("SMS Configuration","kivicare-clinic-management-system"),checked:C.value,onChange:C.onChange,badge:E(C.value),disabled:a,error:k?.enableTwilioSms})}),A||A=="on"?i.jsxs(f.Fragment,{children:[i.jsx("div",{className:"row gy-4",children:O.map(C=>i.jsx("div",{className:"col-lg-4",children:i.jsx(ye,{name:C.key,control:v,rules:{required:A||A=="on"?r("This field is required","kivicare-clinic-management-system"):!1,validate:C.isInteger&&(A||A=="on")?re:void 0},render:({field:R})=>i.jsx(Ht,{label:r(C.label,"kivicare-clinic-management-system"),value:R.value,onChange:R.onChange,placeholder:r(C.placeholder,"kivicare-clinic-management-system"),disabled:a,required:!0,error:k?.[C.key]})})},C.key))}),i.jsx("div",{className:"my-4",children:i.jsxs("button",{type:"button",className:"btn btn-primary",onClick:()=>ge(!0),disabled:a||!y("twilioSmsAccountSID")||!y("twilioSmsAuthToken"),children:[i.jsx("i",{className:"ph ph-chat-circle-text"})," ",r("Send Test SMS","kivicare-clinic-management-system")]})}),i.jsx(lS,{isOpen:W,onClose:()=>ge(!1),isLoading:a,messageData:X,setMessageData:J,onSubmit:ee,mode:"sms",requiredFields:[{value:y("twilioSmsAccountSID"),label:"Account SID"},{value:y("twilioSmsAuthToken"),label:"Auth Token"}]}),i.jsxs("div",{className:"my-4",children:[i.jsx("h6",{className:"text-secondary font-size-14",children:r("Twilio SMS guide","kivicare-clinic-management-system")}),H.map(C=>i.jsx(oS,{title:C.title,text:C.text}))]})]}):i.jsx(i.Fragment,{}),i.jsx(ye,{name:"enableTwilioWhatsApp",control:v,render:({field:C})=>i.jsx(cn,{label:r("WhatsApp Configuration","kivicare-clinic-management-system"),checked:C.value,onChange:C.onChange,badge:E(C.value),disabled:a,error:k?.enableTwilioWhatsApp})}),P||P=="on"?i.jsxs(f.Fragment,{children:[i.jsx("div",{className:"row gy-4",children:F.map(C=>i.jsx("div",{className:"col-lg-4",children:i.jsx(ye,{name:C.key,control:v,rules:{required:P||P=="on"?r("This field is required","kivicare-clinic-management-system"):!1,validate:C.isInteger&&(P||P=="on")?re:void 0},render:({field:R})=>i.jsx(Ht,{label:r(C.label,"kivicare-clinic-management-system"),value:R.value,onChange:R.onChange,placeholder:r(C.placeholder,"kivicare-clinic-management-system"),disabled:a,required:!0,error:k?.[C.key]})})},C.key))}),i.jsx("div",{className:"my-4",children:i.jsxs("button",{type:"button",className:"btn btn-primary",onClick:()=>U(!0),disabled:a||!y("twilioWhatsAppAccountSID")||!y("twilioWhatsAppAuthToken"),children:[i.jsx("i",{className:"ph ph-whatsapp-logo"})," ",r("Send Test WhatsApp","kivicare-clinic-management-system")]})}),i.jsx(lS,{isOpen:ae,onClose:()=>U(!1),isLoading:a,messageData:he,setMessageData:le,onSubmit:me,mode:"whatsapp",requiredFields:[{value:y("twilioWhatsAppAccountSID"),label:"Account SID"},{value:y("twilioWhatsAppAuthToken"),label:"Auth Token"}]}),i.jsxs("div",{className:"my-4",children:[i.jsx("h6",{className:"text-secondary font-size-14",children:r("Twilio WhatsApp guide","kivicare-clinic-management-system")}),H.map(C=>i.jsx(oS,{title:C.title,text:C.text}))]})]}):i.jsx(i.Fragment,{})]}),i.jsxs(Vr,{title:r("Google Account Settings","kivicare-clinic-management-system"),children:[i.jsx(ye,{name:"googleCalendarConfiguration",control:v,render:({field:C})=>i.jsx(cn,{label:r("Google Calendar Configuration","kivicare-clinic-management-system"),className:"mb-3",checked:C.value,onChange:C.onChange,badge:E(C.value),disabled:a,error:k?.googleCalendarConfiguration})}),_||_=="on"?i.jsxs(f.Fragment,{children:[i.jsx("div",{className:"row gy-4",children:M.map(C=>i.jsx("div",{className:"col-lg-4",children:i.jsx(ye,{name:C.key,control:v,rules:{required:_||_=="on"?r("This field is required","kivicare-clinic-management-system"):!1,validate:C.isInteger&&(_||_=="on")?re:void 0},render:({field:R})=>i.jsx(Ht,{label:r(C.label,"kivicare-clinic-management-system"),value:R.value,onChange:R.onChange,placeholder:r(C.placeholder,"kivicare-clinic-management-system"),disabled:a,required:!0,error:k?.[C.key]})})},C.key))}),i.jsx("div",{className:"row gy-4 pt-4",children:i.jsx("div",{className:"col-12",children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{className:"form-label h6",children:r("Google Cloud Console Redirection URL","kivicare-clinic-management-system")}),i.jsxs("div",{className:"input-group",children:[i.jsx("input",{type:"text",className:"form-control",value:h?.googleCalendarRedirectionUrl||"",readOnly:!0,disabled:a,placeholder:r("Redirection URL will appear here...","kivicare-clinic-management-system")}),i.jsx("button",{className:"btn btn-outline-secondary",type:"button",onClick:()=>{h?.googleCalendarRedirectionUrl&&(navigator.clipboard.writeText(h.googleCalendarRedirectionUrl),Ze.fire({icon:"success",title:r("Copied!","kivicare-clinic-management-system"),text:r("Redirection URL copied to clipboard","kivicare-clinic-management-system"),confirmButtonText:r("OK","kivicare-clinic-management-system")}))},disabled:!h?.googleCalendarRedirectionUrl||a,children:i.jsx("i",{className:"ph ph-copy"})})]}),i.jsxs("div",{className:"form-text",children:[i.jsx("i",{className:"ph ph-info text-primary me-1"}),r("Copy this URL and add it to your Google Cloud Console as an authorized redirect URI","kivicare-clinic-management-system")]})]})})})]}):i.jsx(i.Fragment,{}),i.jsx(ye,{name:"patientCalendarEvent",control:v,render:({field:C})=>i.jsx(cn,{label:r("Setting for add event in calendar for patient.","kivicare-clinic-management-system"),checked:C.value,onChange:C.onChange,disabled:a,error:k?.patientCalendarEvent})})]}),i.jsx(Vr,{title:r("Encounters Settings","kivicare-clinic-management-system"),children:I.map(C=>i.jsx(ye,{name:C.key,control:v,render:({field:R})=>i.jsx(cn,{label:r(C.label,"kivicare-clinic-management-system"),className:"mb-3",checked:R.value,onChange:R.onChange,badge:E(R.value),disabled:a,error:k?.[C.key]})}))}),i.jsx(Vr,{title:r("Copyright","kivicare-clinic-management-system"),children:i.jsx(ye,{name:"copyrightText",control:v,render:({field:C})=>i.jsx(Ht,{label:r("Change Copyright Text","kivicare-clinic-management-system"),placeholder:r("Western State Pain Institute","kivicare-clinic-management-system"),value:C.value,onChange:C.onChange,error:k?.copyrightText})})}),i.jsx("div",{className:"d-flex justify-content-end gap-4 mb-5",children:i.jsx("button",{type:"submit",className:"btn btn-primary",children:r("Save","kivicare-clinic-management-system")})})]})]})})})},yhe=()=>{const{isAddonActive:t}=mt(),e=t("kiviPro"),{data:n}=Sn(),s=n?.data?.hideUtilityLinks,a=un("settings","sms-whatsapp-template"),l=un("settings","sms-whatsapp-template/test"),[o,c]=f.useState(!1),[d,m]=f.useState(""),[u,h]=f.useState(!1),[p,g]=f.useState(!1),[v,x]=f.useState([]),y=()=>setShow(!1),b=()=>{h(!0),setTimeout(()=>g(!0),10)},k=()=>{g(!1),setTimeout(()=>h(!1),300)},{data:w,isLoading:T,error:j}=kn("settings","sms-whatsapp-template",{},{enabled:e}),D=P=>{const E=[];return!P||typeof P!="object"||Object.keys(P).forEach(I=>{(Array.isArray(P[I])?P[I]:[]).forEach(O=>{E.push({...O,user_type:I})})}),E};f.useEffect(()=>{if(!w?.status||!w.data){x([]);return}x(D(w.data.data))},[w]);const _=async(P,E)=>{c(!0);const I={ID:P,post_status:E==="publish"?"draft":"publish"};a.mutate(I,{onSuccess:()=>{x(M=>M.map(O=>O.ID===P?{...O,post_status:I.post_status}:O)),c(!1)},onError:M=>{console.error("Error submitting form:",M),c(!1)}})},N=Ln(),A=f.useMemo(()=>[N.accessor("post_title",{id:"templates",header:()=>r("Templates","kivicare-clinic-management-system"),enableSorting:!1,cell:P=>i.jsx("div",{className:"text-wrap",children:i.jsx("span",{className:"p",children:P.getValue()})})}),N.accessor("user_type",{id:"recipient",header:()=>r("Recipients","kivicare-clinic-management-system"),enableSorting:!1,cell:P=>i.jsx("div",{className:"text-wrap text-center",children:i.jsx("span",{className:"p text-capitalize",children:P.getValue()})})}),N.accessor("post_status",{header:()=>r("Status","kivicare-clinic-management-system"),enableSorting:!1,cell:P=>i.jsx(cn,{checked:P.getValue()==="publish",onChange:()=>_(P.row.original.ID,P.getValue()),inputClassName:"text-center"})}),N.accessor("ID",{id:"actions",header:()=>r("Actions","kivicare-clinic-management-system"),enableSorting:!1,cell:P=>i.jsx(ht,{to:`/setting/sms-whatsapp-template/edit/${P.getValue()}`,className:"btn btn-link text-secondary fw-semibold p-0 text-decoration-none",children:r("Manage","kivicare-clinic-management-system")})})],[]);if(j){const P=typeof j=="string"?j:j?.response?.data?.message||j?.message||r("An unknown error occurred","kivicare-clinic-management-system");Ze.fire({icon:"error",title:r("Error","kivicare-clinic-management-system"),text:r(P,"kivicare-clinic-management-system"),confirmButtonText:r("Ok","kivicare-clinic-management-system")})}return i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"tab-pane fade show active position-relative overflow-hidden z-0",id:"v-pills-smswhatsapp-template",role:"tabpanel","aria-labelledby":"v-pills-smswhatsapp-template-tab",tabIndex:"0",children:i.jsxs("div",{className:`sms-template-setting${e?"":" p-4"}`,children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap gap-3 mb-4",children:[i.jsxs("h6",{className:"setting-title mb-0",children:[r("SMS/WhatsApp Template","kivicare-clinic-management-system"),s!=="on"&&i.jsx("a",{href:"https://documentation.iqonic.design/kivicare-wordpress/kivicare-pro/documentation-kivicare-pro/configuration-kivi-pro/sms-whatsapp-template-settings/",target:"_blank",rel:"noopener noreferrer",className:"ms-2",children:i.jsx("i",{className:"ph ph-question align-middle h5 text-primary"})})]}),i.jsxs("div",{className:"d-flex flex-wrap gap-2",children:[i.jsx("button",{className:"btn btn-secondary",disabled:!e,onClick:()=>{e&&(m("sms"),b())},children:r("Send Test SMS","kivicare-clinic-management-system")}),i.jsx("button",{className:"btn btn-primary",disabled:!e,onClick:()=>{e&&(m("whatsapp"),b())},children:r("Send Test Whatsapp","kivicare-clinic-management-system")})]}),!e&&i.jsx(di,{title:r("Available For Kivicare Pro","kivicare-clinic-management-system"),link:"https://codecanyon.net/item/kivicare-pro-clinic-patient-management-system-ehr-addon/30690654?s_rank=3"})]}),i.jsx("div",{className:"table-responsive",children:i.jsx(wn,{data:v,columns:A,enableSelection:!1,isLoading:o||T})})]})}),u&&i.jsxs(lt,{show:p,onHide:y,centered:!0,className:"modal",tabIndex:"-1",role:"dialog",children:[i.jsxs(lt.Header,{children:[i.jsx("h5",{className:"modal-title",children:d==="sms"?r("Send Test SMS","kivicare-clinic-management-system"):r("Send Test Whatsapp","kivicare-clinic-management-system")}),i.jsx("button",{type:"button",className:"btn btn-link p-0",onClick:k,"aria-label":"Close",children:i.jsx("i",{className:"ph ph-x-circle h4 mb-0 icon-color fw-normal"})})]}),i.jsx(lt.Body,{children:i.jsxs("form",{onSubmit:P=>{P.preventDefault();const E=new FormData(P.target),I=E.get("mobile"),M=E.get("content");l.mutate({type:d,mobile:I,content:M},{onSuccess:()=>{Ze.fire({icon:"success",title:r("Success","kivicare-clinic-management-system"),text:r("Test message sent successfully!","kivicare-clinic-management-system"),confirmButtonText:r("OK","kivicare-clinic-management-system")}),k()},onError:O=>{const F=O?.response?.data?.message||O?.message||r("Something went wrong","kivicare-clinic-management-system");Ze.fire({icon:"error",title:r("Error","kivicare-clinic-management-system"),text:F,confirmButtonText:r("OK","kivicare-clinic-management-system")})}})},children:[i.jsxs("div",{className:"mb-3",children:[i.jsx("label",{htmlFor:"mobile",className:"form-label",children:r("Mobile Number","kivicare-clinic-management-system")}),i.jsx("input",{type:"text",name:"mobile",className:"form-control",required:!0})]}),i.jsxs("div",{className:"mb-3",children:[i.jsx("label",{htmlFor:"content",className:"form-label",children:r("Content","kivicare-clinic-management-system")}),i.jsx("textarea",{name:"content",className:"form-control",rows:"3",required:!0})]}),i.jsxs("div",{className:"d-flex justify-content-end gap-2",children:[i.jsx("button",{type:"button",className:"btn btn-secondary",onClick:k,children:r("Cancel","kivicare-clinic-management-system")}),i.jsx("button",{type:"submit",className:"btn btn-primary",disabled:l.isLoading,children:l.isLoading?r("Sending...","kivicare-clinic-management-system"):r("Send","kivicare-clinic-management-system")})]})]})})]})]})},bhe=()=>{const{id:t}=Yt(),e=hn(),{isAddonActive:n}=mt(),s=n("kiviPro"),[a,l]=f.useState(""),[o,c]=f.useState(""),[d,m]=f.useState(""),[u,h]=f.useState([]),[p,g]=f.useState(!0),[v,x]=f.useState(!1),y=un("settings","sms-whatsapp-template"),{data:b,isLoading:k,error:w}=kn("settings","sms-whatsapp-template",{id:t},{enabled:s&&!!t,select:A=>A?.status&&A.data?{status:A.status,message:A.message,data:{post_content:A.data.templatePost?.post_content||"",post_status:A.data.templatePost?.post_status||"draft",post_title:A.data.templatePost?.post_title||"",content_sid:A.data.templatePost?.content_sid||"",dynamic_keys:A.data.dynamic_keys||[]}}:A});f.useEffect(()=>{if(b?.status&&b.data&&!v){const{post_content:A,content_sid:P,post_title:E,dynamic_keys:I}=b.data;l(A),c(P),m(E),h(I.map(M=>M.replace(/[{}]/g,""))),x(!0),g(!1)}},[b,v]),f.useEffect(()=>{if(w){let A;typeof w=="string"?A=w:w?.response?.data?.message?A=w.response.data.message:w?.message?A=w.message:A=r("Failed to load template","kivicare-clinic-management-system"),Ze.fire({icon:"error",title:r("Error","kivicare-clinic-management-system"),text:A,confirmButtonText:r("Ok","kivicare-clinic-management-system")}).then(()=>e(-1))}},[w,e]);const T=A=>{v&&l(A)},j=f.useCallback(A=>{navigator.clipboard.writeText(`{{${A}}}`),Ze.fire({title:r("Key Copied!","kivicare-clinic-management-system"),icon:"success",timer:1e3,showConfirmButton:!1,position:"top-end",toast:!0})},[]),D=f.useCallback(async()=>{try{if(!v)return;g(!0);const A={ID:t,content_sid:o,post_content:a},P=await y.mutateAsync(A);P.status!==!0?Ze.fire({icon:"error",title:r("Error","kivicare-clinic-management-system"),text:r(P.message,"kivicare-clinic-management-system"),confirmButtonText:r("Ok","kivicare-clinic-management-system")}):(Ze.fire({icon:"success",title:r("Success","kivicare-clinic-management-system"),text:r(P.message,"kivicare-clinic-management-system"),confirmButtonText:r("Ok","kivicare-clinic-management-system")}),e("/setting/sms-whatsapp-template"))}catch(A){Ze.fire({icon:"error",title:r("Error","kivicare-clinic-management-system"),text:r(A.message||"Failed to save template","kivicare-clinic-management-system"),confirmButtonText:r("Ok","kivicare-clinic-management-system")})}finally{g(!1)}},[t,o,a,y,e,v]),_={toolbar:[[{header:[1,2,!1]}],["bold","italic","underline","strike","blockquote"],[{list:"ordered"},{list:"bullet"},{indent:"-1"},{indent:"+1"}],["link","image"],["clean"]]},N=["header","bold","italic","underline","strike","blockquote","list","indent","link","image"];return k&&!v||!b?i.jsx(of,{}):i.jsxs("div",{className:"edit-template-page",children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between gap-3 mb-4",children:[i.jsx("h6",{className:"setting-title mb-0",children:r("Edit SMS/WhatsApp Template","kivicare-clinic-management-system")}),i.jsxs("button",{onClick:()=>e("/setting/sms-whatsapp-template"),className:"btn btn-sm btn-primary fw-semibold d-flex align-items-center gap-1 back-btn",disabled:p,children:[i.jsx("i",{className:"ph ph-caret-left"}),i.jsx("span",{className:"font-size-14",children:r("Back","kivicare-clinic-management-system")})]})]}),i.jsx("div",{className:"card",children:i.jsxs("div",{className:"card-body",children:[i.jsx("div",{className:"mb-3",children:i.jsx("h5",{className:"mb-0",children:d})}),i.jsx("div",{className:"row mb-4",children:i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"form-group",children:[i.jsx("label",{className:"form-label",children:r("Content SID","kivicare-clinic-management-system")}),i.jsx("input",{type:"text",className:"form-control",placeholder:r("Enter Content SID","kivicare-clinic-management-system"),value:o,onChange:A=>c(A.target.value),disabled:p||!v})]})})}),u.length>0&&i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"form-label",children:r("Template Dynamic Keys List (click to copy)","kivicare-clinic-management-system")}),i.jsx("div",{className:"d-flex flex-wrap align-items-center gap-3",children:u.map(A=>i.jsx(Qe,{placement:"top",overlay:P=>i.jsx(ut,{...P,children:r("Click to Copy","kivicare-clinic-management-system")}),children:i.jsxs("button",{className:"btn btn-primary btn-sm d-flex align-items-center gap-1",onClick:()=>j(A),disabled:p||!v,children:[A,i.jsx("i",{className:"ph ph-copy"})]},A)},A))})]}),i.jsxs("div",{className:"form-group",children:[i.jsx("label",{className:"form-label",children:r("Template Content","kivicare-clinic-management-system")}),i.jsx(Bo,{theme:"snow",value:a,onChange:T,modules:_,formats:N,readOnly:p||!v})]})]})}),i.jsxs("div",{className:"d-flex justify-content-end gap-3 mt-4",children:[i.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>e("/setting/sms-whatsapp-template"),disabled:p,children:r("Cancel","kivicare-clinic-management-system")}),i.jsx("button",{type:"button",className:"btn btn-primary",onClick:D,disabled:p||!v,children:p?r("Saving...","kivicare-clinic-management-system"):r("Save Changes","kivicare-clinic-management-system")})]})]})},khe=()=>{const[t,e]=f.useState({page:1,per_page:10}),n=Ln(),{data:s,isLoading:a,error:l,refetch:o}=CP(t),c=Hie({onSuccess:()=>{Se.success(r("Webhook status updated","kivicare-clinic-management-system")),o()},onError:()=>{Se.error(r("Failed to update webhook status","kivicare-clinic-management-system"))}}),d=Bie({onSuccess:()=>{Se.success(r("Webhook deleted successfully","kivicare-clinic-management-system")),o()},onError:()=>{Se.error(r("Failed to delete webhook","kivicare-clinic-management-system"))}}),m=s?.data?.data||[],u={currentPage:s?.data?.pagination?.currentPage||1,perPage:s?.data?.pagination?.perPage||10,totalItems:s?.data?.pagination?.total||0,lastPage:s?.data?.pagination?.lastPage||1},h=async(k,w)=>{const T=w===1?0:1;console.log(w),c.mutate({id:k,status:T})},p=k=>{Ze.fire({title:r("Are you sure?","kivicare-clinic-management-system"),text:r("You won't be able to revert this!","kivicare-clinic-management-system"),icon:"warning",showCancelButton:!0,confirmButtonText:r("Yes, delete it!","kivicare-clinic-management-system"),cancelButtonText:r("Cancel","kivicare-clinic-management-system"),confirmButtonColor:"#dc3545"}).then(w=>{w.isConfirmed&&d.mutate(k)})},g=f.useMemo(()=>[n.accessor("id",{header:r("ID","kivicare-clinic-management-system"),cell:k=>k.getValue(),enableSorting:!0}),n.accessor("name",{header:r("Name","kivicare-clinic-management-system"),cell:k=>i.jsxs("div",{children:[i.jsx("div",{className:"fw-semibold",children:k.getValue()}),i.jsx("small",{className:"text-muted",children:k.row.original.module_name})]}),enableSorting:!0}),n.accessor("endpoint",{header:r("Endpoint","kivicare-clinic-management-system"),cell:k=>{const w=k.getValue();return i.jsx("code",{className:"text-break",children:w})},enableSorting:!1}),n.accessor("event_name",{header:r("Event","kivicare-clinic-management-system"),cell:k=>i.jsx("span",{className:"badge bg-info",children:k.getValue()}),enableSorting:!0}),n.accessor("status",{header:r("Status","kivicare-clinic-management-system"),cell:k=>{const w=k.row.original,T=k.getValue();return i.jsxs("div",{className:"d-flex align-items-center",children:[i.jsx("span",{className:`badge ${T===1?"bg-success":"bg-danger"} me-2`,children:T===1?r("Active","kivicare-clinic-management-system"):r("Inactive","kivicare-clinic-management-system")}),i.jsx("div",{className:"form-check form-switch",children:i.jsx("input",{className:"form-check-input",type:"checkbox",role:"switch",id:`status-toggle-${w.id}`,defaultChecked:T===1,onChange:()=>h(w.id,T)})})]})},enableSorting:!0}),n.accessor("updated_at",{header:r("Last Delivery","kivicare-clinic-management-system"),cell:k=>{const w=k.getValue();return i.jsx("span",{children:w?new Date(w).toLocaleDateString():r("Never","kivicare-clinic-management-system")})},enableSorting:!0}),n.display({id:"actions",header:r("Actions","kivicare-clinic-management-system"),cell:k=>{const w=k.row.original;return i.jsxs("div",{className:"d-flex align-items-center gap-3",role:"group",children:[i.jsx(Qe,{placement:"top",overlay:i.jsx(ut,{children:r("Edit Webhook","kivicare-clinic-management-system")}),children:i.jsx(ht,{to:`/setting/webhooks/configuration/edit/${w.id}`,className:"btn btn-link text-success fs-5 p-0",children:i.jsx("i",{className:"ph ph-pencil-simple-line"})})}),i.jsx(Qe,{placement:"top",overlay:i.jsx(ut,{children:r("Delete Webhook","kivicare-clinic-management-system")}),children:i.jsx("button",{type:"button",className:"btn btn-link text-danger fs-5 p-0",onClick:()=>p(w.id),children:i.jsx("i",{className:"ph text-bold ph-trash"})})})]})}})],[n]),v=k=>{e(w=>({...w,page:k}))},x=k=>{e(w=>({...w,page:1,per_page:k}))},y=k=>{console.log("Sorting changed:",k)},b=()=>i.jsx("tr",{children:i.jsx("td",{colSpan:g.length,className:"text-center py-4 border-start border-end",children:i.jsxs("div",{className:"d-flex flex-column align-items-center",children:[i.jsx("i",{className:"ph ph-webhook text-muted"}),i.jsx("p",{className:"text-muted mb-3",children:r("No webhooks configured yet","kivicare-clinic-management-system")}),i.jsx(ht,{to:"/setting/webhooks/configuration/add",className:"btn btn-outline-primary btn-sm",children:r("Create Your First Webhook","kivicare-clinic-management-system")})]})})});return a?i.jsx(Die,{}):i.jsxs("div",{className:"webhook-configuration",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[i.jsx("h4",{className:"mb-0",children:r("Webhook Configuration","kivicare-clinic-management-system")}),i.jsxs(ht,{to:"/setting/webhooks/configuration/add",className:"btn btn-primary",children:[i.jsx("i",{className:"ph ph-plus me-2"}),r("Add Webhook","kivicare-clinic-management-system")]})]}),i.jsx(wn,{data:m,columns:g,isLoading:a,error:l,pagination:u,currentPage:u.currentPage,perPage:u.perPage,totalItems:u.totalItems,lastPage:u.lastPage,onPageChange:v,onPerPageChange:x,onSortingChange:y,moduleNamePlural:"webhooks",renderEmptyState:b,enableSelection:!1,manualPagination:!0,manualFiltering:!0})]})},whe=()=>{const[t,e]=f.useState({page:1,per_page:10,webhook_id:"",status:"",date_from:"",date_to:""}),[n,s]=f.useState(!1),[a,l]=f.useState(null),{data:o,isLoading:c,error:d,refetch:m}=zie(t);Vie();const u=Uie({onSuccess:()=>{Se.success(r("Events log deleted successfully","kivicare-clinic-management-system")),m()},onError:()=>{Se.error(r("Failed to delete event log","kivicare-clinic-management-system"))}}),[h,p]=f.useState(!1),g=f.useMemo(()=>[{type:"number",name:"webhook_id",label:r("Webhook ID","kivicare-clinic-management-system"),placeholder:r("Enter webhook ID","kivicare-clinic-management-system")},{type:"select",name:"status",label:r("Status","kivicare-clinic-management-system"),placeholder:r("All Statuses","kivicare-clinic-management-system"),options:[{value:"success",label:r("Success","kivicare-clinic-management-system")},{value:"failed",label:r("Failed","kivicare-clinic-management-system")},{value:"pending",label:r("Pending","kivicare-clinic-management-system")}]},{type:"dateRange",name:"date_range",label:r("Date Range","kivicare-clinic-management-system"),startDateKey:"date_from",endDateKey:"date_to",placeholder:r("Select date range","kivicare-clinic-management-system")}],[]),v=f.useMemo(()=>["webhook_id","status","date_from","date_to"].some(A=>{const P=t[A];return P!=null&&P!==""}),[t]),x=f.useMemo(()=>[{accessorKey:"id",header:r("ID","kivicare-clinic-management-system"),size:80},{accessorKey:"webhook_name",header:r("Webhook","kivicare-clinic-management-system"),cell:({row:N})=>i.jsxs("div",{children:[i.jsx("div",{className:"fw-medium",children:N.original.webhook_name||r("Unknown Webhook","kivicare-clinic-management-system")}),i.jsxs("div",{className:"text-muted small",children:["ID: ",N.original.webhook_id]})]})},{accessorKey:"event_type",header:r("Event Type","kivicare-clinic-management-system"),cell:({row:N})=>i.jsx(ca,{bg:"primary",children:N.original.event_type||r("Unknown","kivicare-clinic-management-system")})},{accessorKey:"status",header:r("Status","kivicare-clinic-management-system"),cell:({row:N})=>{const A=N.original.status,P={success:"success",failed:"danger",pending:"warning"};return i.jsx(ca,{bg:P[A]||"secondary",children:A||r("Unknown","kivicare-clinic-management-system")})}},{accessorKey:"created_at",header:r("Created At","kivicare-clinic-management-system"),cell:({row:N})=>{const A=new Date(N.original.created_at);return i.jsxs(i.Fragment,{children:[i.jsx("div",{children:A.toLocaleDateString()}),i.jsx("div",{children:A.toLocaleTimeString()})]})}},{accessorKey:"execution_time",header:r("Execution Time","kivicare-clinic-management-system"),cell:({row:N})=>i.jsx("span",{children:N.original.execution_time?`${N.original.execution_time}ms`:"-"})},{accessorKey:"actions",header:r("Actions","kivicare-clinic-management-system"),enableSorting:!1,cell:({row:N})=>{const A=P=>E=>i.jsx(ut,{...E,children:P});return i.jsxs("div",{className:"d-flex align-items-center gap-3",children:[i.jsx(Qe,{placement:"top",overlay:A(r("View Log Details","kivicare-clinic-management-system")),children:i.jsx("button",{onClick:()=>k(N.original),className:"btn btn-link",children:i.jsx("i",{className:"ph ph-eye fs-5 p-0"})})}),i.jsx(Qe,{placement:"top",overlay:A(r("Delete patient","kivicare-clinic-management-system")),children:i.jsx("button",{className:"btn btn-link text-danger fs-5 p-0",onClick:()=>j(N.original),children:i.jsx("i",{className:"ph text-bold ph-trash"})})})]})}}],[]),y=N=>{e(A=>({...A,page:N}))},b=N=>{e(A=>({...A,page:1,per_page:N}))},k=N=>{l(N),s(!0)},w=N=>{e(A=>({...A,...N,page:1})),p(!1)},T=()=>{e({page:1,per_page:10,webhook_id:"",status:"",date_from:"",date_to:""}),p(!1)},j=N=>{Ze.fire({title:r("Are you sure?","kivicare-clinic-management-system"),text:r("You won't be able to revert this!","kivicare-clinic-management-system"),icon:"warning",showCancelButton:!0,confirmButtonText:r("Yes, delete it!","kivicare-clinic-management-system"),cancelButtonText:r("Cancel","kivicare-clinic-management-system"),confirmButtonColor:"#dc3545"}).then(A=>{A.isConfirmed&&u.mutate(N)})};r("Delete","kivicare-clinic-management-system");const D=o?.data?.logs||[],_=o?.data?.pagination||{};return i.jsxs(ko,{fluid:!0,children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[i.jsx("h5",{className:"mb-0",children:r("Webhook Event Logs","kivicare-clinic-management-system")}),i.jsxs(Xt,{variant:"btn btn-primary d-flex align-items-center gap-2",onClick:()=>p(!0),children:[i.jsx("i",{className:"ph ph-funnel"}),r("Filters","kivicare-clinic-management-system")]})]}),i.jsx(wn,{data:D,columns:x,isLoading:c,error:d,pagination:_,currentPage:t.currentPage,perPage:t.perPage,totalItems:_.total||0,lastPage:_.lastPage||1,onPageChange:y,onPerPageChange:b,enableSelection:!0,moduleNamePlural:r("webhook logs","kivicare-clinic-management-system"),bulkActions:[{label:r("Delete","kivicare-clinic-management-system"),action:(N,A)=>{const P=N.map(E=>E.id);kt({title:r("Delete Events log?","kivicare-clinic-management-system"),text:r(`Youre about to delete <strong>${N.length} events log</strong>.<br>This action cannot be undone.`,"kivicare-clinic-management-system"),icon:"ph-warning",confirmButtonText:r("Delete permanently","kivicare-clinic-management-system"),cancelButtonText:r("Keep events log","kivicare-clinic-management-system"),confirmButtonClass:"btn-danger"}).then(E=>{E.isConfirmed&&u.mutate(P)})},icon:i.jsx("i",{className:"ph ph-trash"})}],bulkActionsButtonText:r("Bulk Actions","kivicare-clinic-management-system")}),i.jsxs(lt,{show:n,onHide:()=>s(!1),size:"xl",scrollable:!0,children:[i.jsxs(lt.Header,{className:"pb-3",children:[i.jsxs("h5",{className:"mb-0",children:[r("Webhook Log Details","kivicare-clinic-management-system")," - ",a?.webhook_name]}),i.jsx("button",{type:"button",className:"btn btn-link p-0",onClick:()=>s(!1),"aria-label":"Close",children:i.jsx("i",{className:"ph ph-x-circle h4 mb-0 icon-color fw-normal"})})]}),i.jsx(lt.Body,{className:"p-4",children:a&&i.jsxs(i.Fragment,{children:[i.jsxs(Yn,{className:"",children:[i.jsx(Et,{md:6,children:i.jsxs(_t,{className:"mb-3",children:[i.jsx("div",{children:i.jsx("h6",{className:"mb-0",children:r("Event Information","kivicare-clinic-management-system")})}),i.jsx($x,{size:"sm",className:"mt-4",children:i.jsxs("tbody",{children:[i.jsxs("tr",{children:[i.jsx("td",{children:i.jsxs("strong",{children:[r("Event Type","kivicare-clinic-management-system"),":"]})}),i.jsx("td",{children:i.jsx(ca,{bg:"primary",children:a.event_type})})]}),i.jsxs("tr",{children:[i.jsx("td",{children:i.jsxs("strong",{children:[r("Status","kivicare-clinic-management-system"),":"]})}),i.jsx("td",{children:i.jsx(ca,{bg:a.status==="success"?"success":a.status==="failed"?"danger":"warning",children:a.status})})]}),i.jsxs("tr",{children:[i.jsx("td",{children:i.jsxs("strong",{children:[r("Execution Time","kivicare-clinic-management-system"),":"]})}),i.jsx("td",{children:a.execution_time?`${a.execution_time}ms`:"-"})]}),i.jsxs("tr",{children:[i.jsx("td",{children:i.jsxs("strong",{children:[r("Created At","kivicare-clinic-management-system"),":"]})}),i.jsx("td",{children:new Date(a.created_at).toLocaleString()})]})]})})]})}),i.jsx(Et,{md:6,children:i.jsxs(_t,{className:"mb-3",children:[i.jsx("div",{children:i.jsx("h6",{className:"mb-0",children:r("Response Information","kivicare-clinic-management-system")})}),i.jsx($x,{size:"sm",className:"mt-4",children:i.jsxs("tbody",{children:[i.jsxs("tr",{children:[i.jsx("td",{children:i.jsxs("strong",{children:[r("Response Code","kivicare-clinic-management-system"),":"]})}),i.jsx("td",{children:i.jsx(ca,{bg:a.response_code>=200&&a.response_code<300?"success":"danger",children:a.response_code||"-"})})]}),i.jsxs("tr",{children:[i.jsx("td",{children:i.jsxs("strong",{children:[r("Response Body","kivicare-clinic-management-system"),":"]})}),i.jsx("td",{className:"small text-truncate",style:{maxWidth:"200px"},children:a.response?.body?a.response.body.substring(0,100)+"...":"-"})]})]})})]})})]}),a.payload&&i.jsxs(_t,{className:"mb-3",children:[i.jsx("div",{className:"mb-2",children:i.jsx("h6",{className:"mb-0",children:r("Payload Data","kivicare-clinic-management-system")})}),i.jsx("pre",{className:"bg-light p-3 rounded",style:{maxHeight:"400px",overflow:"auto"},children:i.jsx("code",{children:JSON.stringify(a.payload,null,2)})})]}),a.response&&i.jsxs(_t,{className:"mb-3",children:[i.jsx("div",{className:"mb-2",children:i.jsx("h6",{className:"mb-0",children:r("Response Data","kivicare-clinic-management-system")})}),i.jsx("pre",{className:"bg-light p-3 rounded",style:{maxHeight:"400px",overflow:"auto"},children:i.jsx("code",{children:JSON.stringify(a.response,null,2)})})]}),a.error_message&&i.jsxs(_t,{children:[i.jsx("div",{className:"mb-2",children:i.jsx("h6",{className:"mb-0 text-danger",children:r("Error Message","kivicare-clinic-management-system")})}),i.jsx("div",{className:"alert alert-danger",children:i.jsx("pre",{children:i.jsx("code",{children:a.error_message})})})]})]})}),i.jsx(lt.Footer,{children:i.jsx(Xt,{variant:"secondary",onClick:()=>s(!1),children:r("Close","kivicare-clinic-management-system")})})]}),i.jsx(na,{show:h,onHide:()=>p(!1),queryParams:t,onApplyFilters:w,onResetFilters:T,title:r("Filter Webhook Logs","kivicare-clinic-management-system"),fields:g,hasAppliedFilters:v})]})},oI=({initialData:t=null,onSubmit:e,isLoading:n=!1,isEditing:s=!1})=>{const[a,l]=f.useState(null),[o,c]=f.useState([]),[d,m]=f.useState({header:[],body:[],query_params:[]}),[u,h]=f.useState(!0),{control:p,handleSubmit:g,formState:{errors:v},setValue:x,watch:y,reset:b,getValues:k}=en({defaultValues:{name:"",moduleName:"",eventName:"",webhookUrl:"",httpMethod:"POST",status:1,authMethod:"none",authConfig:{apiKey:"",keyLocation:"header",headerName:"Authorization",username:"",password:"",encoding:"Base64",bearerToken:"",tokenType:"Bearer",tokenExpiry:"",clientId:"",clientSecret:"",authUrl:"",tokenUrl:"",redirectUrl:"",scopes:"",refreshToken:"",accessToken:"",jwtIssuer:"",jwtSubject:"",jwtAudience:"",jwtPrivateKey:"",jwtAlgorithm:"HS256",jwtExpiryDuration:"60",jwtExpiryUnit:"minutes",hmacAccessKey:"",hmacSecretKey:"",hmacAlgorithm:"HMAC-SHA256",hmacSignatureLocation:"header",hmacHeaderParamName:"X-Signature"},contentType:"application/json",customHeaders:[{key:"",value:""}],queryParams:[{key:"",value:""}],requestBody:"",timeout:30,retryAttempts:3,retryDelay:5,enableSSL:!0}}),{fields:w,append:T,remove:j}=yr({control:p,name:"customHeaders"}),{fields:D,append:_,remove:N}=yr({control:p,name:"queryParams"}),A=y(),[P,E]=f.useState(!1),[I,M]=f.useState(!1),[O,F]=f.useState(""),[H,G]=f.useState(""),[z,ie]=f.useState(!1),[W,ge]=f.useState(null),ae=f.useRef(null);f.useEffect(()=>{(async()=>{try{const ce=await Ki.getTableConfig();ce.data&&l(ce.data)}catch(ce){console.error("Failed to load table config:",ce),Se.error(r("Failed to load configuration","kivicare-clinic-management-system"))}finally{h(!1)}})()},[]),f.useEffect(()=>{const $=y((ce,{name:De})=>{if(ce.moduleName){const xe=a?.modules?.find(Re=>Re.value===ce.moduleName);xe&&(c(xe.events||[]),De==="moduleName"&&!s&&x("eventName",""),m({header:[],body:[],query_params:[]}))}if(ce.eventName){const xe=o.find(Re=>Re.value===ce.eventName);xe?.dynamic_variables&&m(xe.dynamic_variables)}});return()=>$.unsubscribe()},[a,y,o,x,s]),f.useEffect(()=>{const $=k("moduleName");if($&&a?.modules){const ce=a.modules.find(De=>De.value===$);ce&&c(ce.events||[])}},[a,k]),f.useEffect(()=>{const $=k("eventName");if($&&o.length>0){const ce=o.find(De=>De.value===$);ce?.dynamic_variables&&m(ce.dynamic_variables)}},[o,k]),f.useEffect(()=>{s&&t&&(console.log("Initial Data:",t),b({name:t.name||"",moduleName:t.moduleName||"",eventName:t.eventName||"",webhookUrl:t?.webhookData?.url||"",httpMethod:t?.methods||"POST",status:t.status||1,authMethod:t?.webhookData?.auth_method||"none",authConfig:{apiKey:t?.webhookData?.auth_config?.api_key||"",keyLocation:t?.webhookData?.auth_config?.key_location||"header",headerName:t?.webhookData?.auth_config?.header_name||"Authorization",username:t?.webhookData?.auth_config?.username||"",password:t?.webhookData?.auth_config?.password||"",encoding:t?.webhookData?.auth_config?.encoding||"Base64",bearerToken:t?.webhookData?.auth_config?.bearer_token||"",tokenType:t?.webhookData?.auth_config?.token_type||"Bearer",tokenExpiry:t?.webhookData?.auth_config?.token_expiry||"",clientId:t?.webhookData?.auth_config?.client_id||"",clientSecret:t?.webhookData?.auth_config?.client_secret||"",authUrl:t?.webhookData?.auth_config?.auth_url||"",tokenUrl:t?.webhookData?.auth_config?.token_url||"",redirectUrl:t?.webhookData?.auth_config?.redirect_url||"",scopes:t?.webhookData?.auth_config?.scopes||"",refreshToken:t?.webhookData?.auth_config?.refresh_token||"",accessToken:t?.webhookData?.auth_config?.access_token||"",jwtIssuer:t?.webhookData?.auth_config?.jwt_issuer||"",jwtSubject:t?.webhookData?.auth_config?.jwt_subject||"",jwtAudience:t?.webhookData?.auth_config?.jwt_audience||"",jwtPrivateKey:t?.webhookData?.auth_config?.jwt_private_key||"",jwtAlgorithm:t?.webhookData?.auth_config?.jwt_algorithm||"HS256",jwtExpiryDuration:t?.webhookData?.auth_config?.jwt_expiry_duration||"60",jwtExpiryUnit:t?.webhookData?.auth_config?.jwt_expiry_unit||"minutes",hmacAccessKey:t?.webhookData?.auth_config?.hmac_access_key||"",hmacSecretKey:t?.webhookData?.auth_config?.hmac_secret_key||"",hmacAlgorithm:t?.webhookData?.auth_config?.hmac_algorithm||"HMAC-SHA256",hmacSignatureLocation:t?.webhookData?.auth_config?.hmac_signature_location||"header",hmacHeaderParamName:t?.webhookData?.auth_config?.hmac_header_param_name||"X-Signature"},contentType:t?.webhookData?.content_type||"application/json",customHeaders:t?.webhookData?.custom_headers?.length>0?t.webhookData.custom_headers:[{key:"",value:""}],queryParams:t?.webhookData?.query_params?.length>0?t.webhookData.query_params:[{key:"",value:""}],requestBody:t?.webhookData?.request_body||"",timeout:t?.webhookData?.timeout||30,retryAttempts:t?.webhookData?.retry_attempts||3,retryDelay:t?.webhookData?.retry_delay||5,enableSSL:t?.webhookData?.enable_ssl!==!1}))},[s,t,b]),f.useEffect(()=>{if(A.authMethod==="oauth2"&&!A.authConfig.redirectUrl){const $=window.kc_frontend.dashboard_uri+"/setting/webhooks/oauth2/callback";x("authConfig.redirectUrl",$)}},[A.authMethod,A.authConfig.redirectUrl,x]);const U=async $=>{try{await navigator.clipboard.writeText($),Se.success(r("Copied to clipboard!","kivicare-clinic-management-system"))}catch(ce){console.error("Failed to copy:",ce),Se.error(r("Failed to copy to clipboard","kivicare-clinic-management-system"))}},X=$=>{if(F($),!$.trim()){G(""),ie(!1),ge(null);return}try{const ce=JSON.parse($);if(!ce.name){G(r("Missing required field: name","kivicare-clinic-management-system")),ie(!1),ge(null);return}if(!ce.module_name){G(r("Missing required field: module_name","kivicare-clinic-management-system")),ie(!1),ge(null);return}if(!ce.webhook_data?.url){G(r("Missing required field: webhook_data.url","kivicare-clinic-management-system")),ie(!1),ge(null);return}G(""),ie(!0),ge(ce)}catch(ce){G(r("Invalid JSON format: ","kivicare-clinic-management-system")+ce.message),ie(!1),ge(null)}},J=$=>{const ce=$.target.files[0];if(!ce)return;if(!ce.name.endsWith(".json")){Se.error(r("Please select a valid JSON file","kivicare-clinic-management-system"));return}const De=new FileReader;De.onload=xe=>{try{const Re=xe.target.result;X(Re)}catch{Se.error(r("Failed to read file","kivicare-clinic-management-system"))}},De.onerror=()=>{Se.error(r("Failed to read file","kivicare-clinic-management-system"))},De.readAsText(ce)},he=()=>{if(!z||!W){Se.error(r("Please provide valid JSON configuration","kivicare-clinic-management-system"));return}try{b({name:W.name||"",moduleName:W.module_name||"",eventName:W.event_name||"",webhookUrl:W.webhook_data?.url||"",httpMethod:W.methods||"POST",status:W.status||1,authMethod:W.webhook_data?.auth_method||"none",authConfig:{apiKey:W.webhook_data?.auth_config?.api_key||"",keyLocation:W.webhook_data?.auth_config?.key_location||"header",headerName:W.webhook_data?.auth_config?.header_name||"Authorization",username:W.webhook_data?.auth_config?.username||"",password:W.webhook_data?.auth_config?.password||"",encoding:W.webhook_data?.auth_config?.encoding||"Base64",bearerToken:W.webhook_data?.auth_config?.bearer_token||"",tokenType:W.webhook_data?.auth_config?.token_type||"Bearer",tokenExpiry:W.webhook_data?.auth_config?.token_expiry||"",clientId:W.webhook_data?.auth_config?.client_id||"",clientSecret:W.webhook_data?.auth_config?.client_secret||"",authUrl:W.webhook_data?.auth_config?.auth_url||"",tokenUrl:W.webhook_data?.auth_config?.token_url||"",redirectUrl:W.webhook_data?.auth_config?.redirect_url||"",scopes:W.webhook_data?.auth_config?.scopes||"",refreshToken:W.webhook_data?.auth_config?.refresh_token||"",accessToken:W.webhook_data?.auth_config?.access_token||"",jwtIssuer:W.webhook_data?.auth_config?.jwt_issuer||"",jwtSubject:W.webhook_data?.auth_config?.jwt_subject||"",jwtAudience:W.webhook_data?.auth_config?.jwt_audience||"",jwtPrivateKey:W.webhook_data?.auth_config?.jwt_private_key||"",jwtAlgorithm:W.webhook_data?.auth_config?.jwt_algorithm||"HS256",jwtExpiryDuration:W.webhook_data?.auth_config?.jwt_expiry_duration||"60",jwtExpiryUnit:W.webhook_data?.auth_config?.jwt_expiry_unit||"minutes",hmacAccessKey:W.webhook_data?.auth_config?.hmac_access_key||"",hmacSecretKey:W.webhook_data?.auth_config?.hmac_secret_key||"",hmacAlgorithm:W.webhook_data?.auth_config?.hmac_algorithm||"HMAC-SHA256",hmacSignatureLocation:W.webhook_data?.auth_config?.hmac_signature_location||"header",hmacHeaderParamName:W.webhook_data?.auth_config?.hmac_header_param_name||"X-Signature"},contentType:W.webhook_data?.content_type||"application/json",customHeaders:W.webhook_data?.custom_headers?.length>0?W.webhook_data.custom_headers:[{key:"",value:""}],queryParams:W.webhook_data?.query_params?.length>0?W.webhook_data.query_params:[{key:"",value:""}],requestBody:W.webhook_data?.request_body||"",timeout:W.webhook_data?.timeout||30,retryAttempts:W.webhook_data?.retry_attempts||3,retryDelay:W.webhook_data?.retry_delay||5,enableSSL:W.webhook_data?.enable_ssl!==!1}),le(),Se.success(r("Webhook configuration imported successfully!","kivicare-clinic-management-system"))}catch($){console.error("Import error:",$),Se.error(r("Failed to import configuration. Please try again.","kivicare-clinic-management-system"))}},le=()=>{M(!1),F(""),G(""),ie(!1),ge(null),ae.current&&(ae.current.value="")},ee=async()=>{const{clientId:$,authUrl:ce,redirectUrl:De,scopes:xe}=A.authConfig;if(!$||!ce||!De){Se.error(r("Please fill in Client ID, Authorization URL, and Redirect URL","kivicare-clinic-management-system"));return}E(!0);try{const Re=new URLSearchParams({client_id:$,redirect_uri:De,response_type:"code",scope:xe||"",state:Math.random().toString(36).substring(7)}),nt=`${ce}?${Re.toString()}`,Pe=600,Ue=700,Je=window.screenX+(window.outerWidth-Pe)/2,et=window.screenY+(window.outerHeight-Ue)/2,Be=window.open(nt,"OAuth2 Authorization",`width=${Pe},height=${Ue},left=${Je},top=${et},toolbar=no,location=no,status=no,menubar=no,scrollbars=yes,resizable=yes`);if(!Be){Se.error(r("Popup blocked. Please allow popups for this site.","kivicare-clinic-management-system")),E(!1);return}const ke=async Ye=>{Ye.origin===window.location.origin&&Ye.data.type==="oauth2_callback"&&(window.removeEventListener("message",ke),Be.close(),Ye.data.code?await me(Ye.data.code):Ye.data.error&&(Se.error(r("Authorization failed: ","kivicare-clinic-management-system")+Ye.data.error),E(!1)))};window.addEventListener("message",ke);const _e=setInterval(()=>{Be.closed&&(clearInterval(_e),window.removeEventListener("message",ke),E(!1))},1e3)}catch(Re){console.error("OAuth2 generation error:",Re),Se.error(r("Failed to generate OAuth2 token","kivicare-clinic-management-system")),E(!1)}},me=async $=>{const{clientId:ce,clientSecret:De,tokenUrl:xe,redirectUrl:Re}=A.authConfig;try{const nt=await Ki.exchangeOAuth2Token({code:$,clientId:ce,clientSecret:De,tokenUrl:xe,redirectUri:Re});x("authConfig.accessToken",nt?.data?.access_token),nt?.data?.refresh_token&&x("authConfig.refreshToken",nt?.data?.refresh_token),Se.success(r("OAuth2 tokens generated successfully!","kivicare-clinic-management-system")),E(!1)}catch(nt){console.error("Token exchange error:",nt),Se.error(r("Failed to exchange authorization code for token","kivicare-clinic-management-system")),E(!1)}},K=async()=>{const{clientId:$,clientSecret:ce,tokenUrl:De,refreshToken:xe}=A.authConfig;if(!xe){Se.error(r("No refresh token available","kivicare-clinic-management-system"));return}E(!0);try{const Re=await Ki.refreshOAuth2Token({refreshToken:xe,clientId:$,clientSecret:ce,tokenUrl:De});console.log(Re,"test"),x("authConfig.accessToken",Re.data.access_token),Re.data.refresh_token&&x("authConfig.refreshToken",Re.data.refresh_token),Se.success(r("Access token refreshed successfully!","kivicare-clinic-management-system")),E(!1)}catch(Re){console.error("Token refresh error:",Re),Se.error(r("Failed to refresh access token","kivicare-clinic-management-system")),E(!1)}},re=a?.modules?.map($=>({value:$.value,label:$.label}))||[],oe=o.map($=>({value:$.value,label:$.label})),C=[{value:"GET",label:"GET"},{value:"POST",label:"POST"},{value:"PUT",label:"PUT"},{value:"PATCH",label:"PATCH"},{value:"DELETE",label:"DELETE"}],R=[{value:"none",label:r("No Authentication","kivicare-clinic-management-system")},{value:"apikey",label:r("API Key Authentication","kivicare-clinic-management-system")},{value:"basic",label:r("Basic Authentication","kivicare-clinic-management-system")},{value:"bearer",label:r("Bearer Token Authentication (OAuth2 / JWT)","kivicare-clinic-management-system")},{value:"oauth2",label:r("OAuth2 Authentication","kivicare-clinic-management-system")},{value:"hmac",label:r("HMAC / Signature Authentication","kivicare-clinic-management-system")}],te=[{value:"application/json",label:"JSON"},{value:"application/xml",label:"XML"},{value:"application/x-www-form-urlencoded",label:"Form Data"},{value:"text/plain",label:"Plain Text"}],ne=[{value:"header",label:r("Header","kivicare-clinic-management-system")},{value:"query",label:r("Query Parameter","kivicare-clinic-management-system")}],Y=[{value:"Bearer",label:"Bearer"},{value:"Token",label:"Token"},{value:"JWT",label:"JWT"}],q=[{value:"HMAC-SHA256",label:"HMAC-SHA256"},{value:"HMAC-SHA1",label:"HMAC-SHA1"},{value:"HMAC-SHA512",label:"HMAC-SHA512"},{value:"HMAC-MD5",label:"HMAC-MD5"}];r("Minutes","kivicare-clinic-management-system"),r("Hours","kivicare-clinic-management-system"),r("Days","kivicare-clinic-management-system");const B=()=>{switch(A.contentType){case"application/json":return`{
                    "event": "{{event_name}}",
                    "module": "{{module_name}}",
                    "data": {
                        "id": "{{record_id}}",
                        "timestamp": "{{timestamp}}"
                    }}`;case"application/xml":return`<?xml version="1.0"?>
                    <webhook>
                    <event>{{event_name}}</event>
                    <module>{{module_name}}</module>
                    <data>
                        <id>{{record_id}}</id>
                        <timestamp>{{timestamp}}</timestamp>
                    </data>
                    </webhook>`;case"application/x-www-form-urlencoded":return"event={{event_name}}&module={{module_name}}&id={{record_id}}&timestamp={{timestamp}}";default:return"Use variables like {{event_name}}, {{module_name}}, {{record_id}}, {{timestamp}}"}},se=()=>["POST","PUT","PATCH"].includes(A.httpMethod),Q=$=>{const ce={};$.authMethod==="apikey"?(ce.api_key=$.authConfig.apiKey,ce.key_location=$.authConfig.keyLocation,ce.header_name=$.authConfig.headerName):$.authMethod==="basic"?(ce.username=$.authConfig.username,ce.password=$.authConfig.password,ce.encoding=$.authConfig.encoding):$.authMethod==="bearer"?(ce.bearer_token=$.authConfig.bearerToken,ce.token_type=$.authConfig.tokenType,ce.token_expiry=$.authConfig.tokenExpiry):$.authMethod==="oauth2"?(ce.client_id=$.authConfig.clientId,ce.client_secret=$.authConfig.clientSecret,ce.auth_url=$.authConfig.authUrl,ce.token_url=$.authConfig.tokenUrl,ce.redirect_url=$.authConfig.redirectUrl,ce.scopes=$.authConfig.scopes,ce.refresh_token=$.authConfig.refreshToken,ce.access_token=$.authConfig.accessToken):$.authMethod==="hmac"&&(ce.hmac_access_key=$.authConfig.hmacAccessKey,ce.hmac_secret_key=$.authConfig.hmacSecretKey,ce.hmac_algorithm=$.authConfig.hmacAlgorithm,ce.hmac_signature_location=$.authConfig.hmacSignatureLocation,ce.hmac_header_param_name=$.authConfig.hmacHeaderParamName);const De=$.customHeaders.filter(nt=>nt.key&&nt.value),xe=$.queryParams.filter(nt=>nt.key&&nt.value),Re={url:$.webhookUrl,method:$.httpMethod,auth_method:$.authMethod,auth_config:ce,content_type:$.contentType,custom_headers:De,query_params:xe,request_body:$.requestBody,timeout:parseInt($.timeout),retry_attempts:parseInt($.retryAttempts),retry_delay:parseInt($.retryDelay),enable_ssl:$.enableSSL};return{name:$.name,module_name:$.moduleName,event_name:$.eventName,methods:$.httpMethod,webhook_data:Re,status:$.status}},pe=$=>{const ce=Q($);e(ce)};return i.jsxs("form",{onSubmit:g(pe),className:"webhook-form",children:[i.jsx("div",{className:"d-flex justify-content-end gap-2 mb-3",children:i.jsxs("button",{type:"button",className:"btn btn-secondary btn-sm",onClick:()=>M(!0),children:[i.jsx("i",{className:"ph ph-upload me-1"}),r("Import JSON","kivicare-clinic-management-system")]})}),i.jsxs("div",{className:"card mb-4",children:[i.jsx("div",{className:"card-header",children:i.jsx("h5",{className:"mb-0",children:r("Basic Settings","kivicare-clinic-management-system")})}),i.jsx("div",{className:"card-body",children:i.jsxs("div",{className:"row g-3",children:[i.jsxs("div",{className:"col-md-6",children:[i.jsxs("label",{className:"form-label",children:[r("Webhook Name","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx(ye,{name:"name",control:p,rules:{required:r("Webhook name is required","kivicare-clinic-management-system")},render:({field:$})=>i.jsx("input",{...$,type:"text",className:`form-control ${v.name?"is-invalid":""}`,placeholder:r("Enter webhook name","kivicare-clinic-management-system")})}),v.name&&i.jsx("div",{className:"invalid-feedback d-block",children:v.name.message})]}),i.jsxs("div",{className:"col-md-6",children:[i.jsxs("label",{className:"form-label",children:[r("Module","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx(ye,{name:"moduleName",control:p,rules:{required:r("Module is required","kivicare-clinic-management-system")},render:({field:$})=>i.jsx(ct,{...$,options:re,className:`react-select-box ${v.eventName?"is-invalid":""}`,isSearchable:!1,classNamePrefix:"react-select",placeholder:r("Select module","kivicare-clinic-management-system"),value:re.find(ce=>ce.value===$.value),onChange:ce=>$.onChange(ce?.value),styles:{menuPortal:ce=>({...ce,zIndex:9999})}})}),v.moduleName&&i.jsx("div",{className:"invalid-feedback d-block",children:v.moduleName.message})]}),i.jsxs("div",{className:"col-md-6",children:[i.jsxs("label",{className:"form-label",children:[r("Event","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx(ye,{name:"eventName",control:p,rules:{required:r("Event is required","kivicare-clinic-management-system")},render:({field:$})=>i.jsx(ct,{...$,options:oe,className:`react-select-box ${v.eventName?"is-invalid":""}`,isSearchable:!1,classNamePrefix:"react-select",placeholder:r("Select event","kivicare-clinic-management-system"),value:oe.find(ce=>ce.value===$.value),onChange:ce=>$.onChange(ce?.value),styles:{menuPortal:ce=>({...ce,zIndex:9999})}})}),v.eventName&&i.jsx("div",{className:"invalid-feedback d-block",children:v.eventName.message})]}),i.jsxs("div",{className:"col-md-6",children:[i.jsxs("label",{className:"form-label",children:[r("HTTP Method","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx(ye,{name:"httpMethod",control:p,rules:{required:r("HTTP method is required","kivicare-clinic-management-system")},render:({field:$})=>i.jsx(ct,{...$,options:C,value:C.find(ce=>ce.value===$.value),onChange:ce=>$.onChange(ce?.value),isSearchable:!1,className:"react-select-box",classNamePrefix:"react-select",styles:{menuPortal:ce=>({...ce,zIndex:9999})}})})]}),i.jsxs("div",{className:"col-12",children:[i.jsxs("label",{className:"form-label",children:[r("Webhook URL","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx(ye,{name:"webhookUrl",control:p,rules:{required:r("Webhook URL is required","kivicare-clinic-management-system"),pattern:{value:/^https?:\/\/.+/,message:r("Please enter a valid URL","kivicare-clinic-management-system")}},render:({field:$})=>i.jsx("input",{...$,type:"url",className:`form-control ${v.webhookUrl?"is-invalid":""}`,placeholder:"https://example.com/webhook"})}),v.webhookUrl&&i.jsx("div",{className:"invalid-feedback d-block",children:v.webhookUrl.message})]}),i.jsxs("div",{className:"col-md-6",children:[i.jsx("label",{className:"form-label",children:r("Status","kivicare-clinic-management-system")}),i.jsx(ye,{name:"status",control:p,render:({field:$})=>i.jsxs("div",{className:"form-check form-switch",children:[i.jsx("input",{...$,type:"checkbox",className:"form-check-input",checked:$.value===1,onChange:ce=>$.onChange(ce.target.checked?1:0)}),i.jsx("label",{className:"form-check-label",children:$.value===1?r("Active","kivicare-clinic-management-system"):r("Inactive","kivicare-clinic-management-system")})]})})]})]})})]}),i.jsxs("div",{className:"card mb-4",children:[i.jsx("div",{className:"card-header",children:i.jsx("h5",{className:"mb-0",children:r("Authentication","kivicare-clinic-management-system")})}),i.jsx("div",{className:"card-body",children:i.jsxs("div",{className:"row g-3",children:[i.jsxs("div",{className:"col-12",children:[i.jsx("label",{className:"form-label",children:r("Authentication Method","kivicare-clinic-management-system")}),i.jsx(ye,{name:"authMethod",control:p,render:({field:$})=>i.jsx(ct,{...$,options:R,value:R.find(ce=>ce.value===$.value),onChange:ce=>$.onChange(ce?.value),isSearchable:!1,className:"react-select-box",classNamePrefix:"react-select",styles:{menuPortal:ce=>({...ce,zIndex:9999})}})})]}),A.authMethod==="apikey"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"col-md-6",children:[i.jsx("label",{className:"form-label",children:r("API Key","kivicare-clinic-management-system")}),i.jsx(ye,{name:"authConfig.apiKey",control:p,render:({field:$})=>i.jsx("input",{...$,type:"text",className:"form-control",placeholder:r("Enter API key","kivicare-clinic-management-system")})})]}),i.jsxs("div",{className:"col-md-3",children:[i.jsx("label",{className:"form-label",children:r("Location","kivicare-clinic-management-system")}),i.jsx(ye,{name:"authConfig.keyLocation",control:p,render:({field:$})=>i.jsx(ct,{...$,options:ne,className:"react-select-box",classNamePrefix:"react-select",value:ne.find(ce=>ce.value===$.value),onChange:ce=>$.onChange(ce?.value),styles:{menuPortal:ce=>({...ce,zIndex:9999})}})})]}),i.jsxs("div",{className:"col-md-3",children:[i.jsx("label",{className:"form-label",children:r("Header/Param Name","kivicare-clinic-management-system")}),i.jsx(ye,{name:"authConfig.headerName",control:p,render:({field:$})=>i.jsx("input",{...$,type:"text",className:"form-control",placeholder:"Authorization"})})]})]}),A.authMethod==="basic"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"col-md-6",children:[i.jsx("label",{className:"form-label",children:r("Username","kivicare-clinic-management-system")}),i.jsx(ye,{name:"authConfig.username",control:p,render:({field:$})=>i.jsx("input",{...$,type:"text",className:"form-control",placeholder:r("Enter username","kivicare-clinic-management-system")})})]}),i.jsxs("div",{className:"col-md-6",children:[i.jsx("label",{className:"form-label",children:r("Password","kivicare-clinic-management-system")}),i.jsx(ye,{name:"authConfig.password",control:p,render:({field:$})=>i.jsx("input",{...$,type:"password",className:"form-control",placeholder:r("Enter password","kivicare-clinic-management-system")})})]})]}),A.authMethod==="bearer"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"col-md-8",children:[i.jsx("label",{className:"form-label",children:r("Bearer Token","kivicare-clinic-management-system")}),i.jsx(ye,{name:"authConfig.bearerToken",control:p,render:({field:$})=>i.jsx("input",{...$,type:"text",className:"form-control",placeholder:r("Enter bearer token","kivicare-clinic-management-system")})})]}),i.jsxs("div",{className:"col-md-4",children:[i.jsx("label",{className:"form-label",children:r("Token Type","kivicare-clinic-management-system")}),i.jsx(ye,{name:"authConfig.tokenType",control:p,render:({field:$})=>i.jsx(ct,{...$,options:Y,className:"react-select-box",classNamePrefix:"react-select",value:Y.find(ce=>ce.value===$.value),onChange:ce=>$.onChange(ce?.value),styles:{menuPortal:ce=>({...ce,zIndex:9999})}})})]}),i.jsxs("div",{className:"col-md-12",children:[i.jsx("label",{className:"form-label",children:r("Token Expiry (Optional)","kivicare-clinic-management-system")}),i.jsx(ye,{name:"authConfig.tokenExpiry",control:p,render:({field:$})=>i.jsx("input",{...$,type:"datetime-local",className:"form-control"})}),i.jsx("small",{className:"text-muted",children:r("Set when the token expires to get a reminder to refresh it","kivicare-clinic-management-system")})]})]}),A.authMethod==="oauth2"&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"col-12",children:i.jsxs("div",{className:"alert alert-info",children:[i.jsx("i",{className:"ph ph-info me-2"}),r("OAuth2 allows secure authorization without sharing passwords. Configure your OAuth2 provider settings below.","kivicare-clinic-management-system")]})}),i.jsxs("div",{className:"col-md-6",children:[i.jsxs("label",{className:"form-label",children:[r("Client ID","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx(ye,{name:"authConfig.clientId",control:p,render:({field:$})=>i.jsx("input",{...$,type:"text",className:"form-control",placeholder:r("Enter client ID","kivicare-clinic-management-system")})})]}),i.jsxs("div",{className:"col-md-6",children:[i.jsxs("label",{className:"form-label",children:[r("Client Secret","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx(ye,{name:"authConfig.clientSecret",control:p,render:({field:$})=>i.jsx("input",{...$,type:"password",className:"form-control",placeholder:r("Enter client secret","kivicare-clinic-management-system")})})]}),i.jsxs("div",{className:"col-md-6",children:[i.jsxs("label",{className:"form-label",children:[r("Authorization URL","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx(ye,{name:"authConfig.authUrl",control:p,render:({field:$})=>i.jsx("input",{...$,type:"url",className:"form-control",placeholder:"https://provider.com/oauth/authorize"})})]}),i.jsxs("div",{className:"col-md-6",children:[i.jsxs("label",{className:"form-label",children:[r("Token URL","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx(ye,{name:"authConfig.tokenUrl",control:p,render:({field:$})=>i.jsx("input",{...$,type:"url",className:"form-control",placeholder:"https://provider.com/oauth/token"})})]}),i.jsxs("div",{className:"col-12",children:[i.jsx("label",{className:"form-label",children:r("Redirect URL (Callback)","kivicare-clinic-management-system")}),i.jsxs("div",{className:"input-group",children:[i.jsx(ye,{name:"authConfig.redirectUrl",control:p,render:({field:$})=>i.jsx("input",{...$,type:"url",className:"form-control",placeholder:window.kc_frontend.dashboard_uri+"/setting/webhooks/oauth2/callback",readOnly:!0})}),i.jsx("button",{type:"button",className:"btn btn-outline-secondary",onClick:()=>U(A.authConfig.redirectUrl),title:r("Copy to clipboard","kivicare-clinic-management-system"),children:i.jsx("i",{className:"ph ph-copy"})})]}),i.jsx("small",{className:"text-muted",children:r("Configure this URL in your OAuth2 provider settings","kivicare-clinic-management-system")})]}),"                                ",i.jsxs("div",{className:"col-12",children:[i.jsx("label",{className:"form-label",children:r("Scopes","kivicare-clinic-management-system")}),i.jsx(ye,{name:"authConfig.scopes",control:p,render:({field:$})=>i.jsx("input",{...$,type:"text",className:"form-control",placeholder:"read write admin"})}),i.jsx("small",{className:"text-muted",children:r("Space-separated list of permission scopes","kivicare-clinic-management-system")})]}),i.jsxs("div",{className:"col-md-6",children:[i.jsx("label",{className:"form-label",children:r("Access Token","kivicare-clinic-management-system")}),i.jsx(ye,{name:"authConfig.accessToken",control:p,render:({field:$})=>i.jsx("input",{...$,type:"text",className:"form-control",placeholder:r("Generated after authorization","kivicare-clinic-management-system"),readOnly:!0})})]}),i.jsxs("div",{className:"col-md-6",children:[i.jsx("label",{className:"form-label",children:r("Refresh Token","kivicare-clinic-management-system")}),i.jsx(ye,{name:"authConfig.refreshToken",control:p,render:({field:$})=>i.jsx("input",{...$,type:"text",className:"form-control",placeholder:r("Generated after authorization","kivicare-clinic-management-system"),readOnly:!0})})]}),i.jsxs("div",{className:"col-12",children:[i.jsxs("div",{className:"d-flex gap-2",children:[i.jsx("button",{type:"button",className:"btn btn-primary",onClick:ee,disabled:P||!A.authConfig.clientId||!A.authConfig.authUrl||!A.authConfig.redirectUrl,children:P?i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),r("Authorizing...","kivicare-clinic-management-system")]}):i.jsxs(i.Fragment,{children:[i.jsx("i",{className:"ph ph-key me-2"}),r("Generate OAuth2 Token","kivicare-clinic-management-system")]})}),A.authConfig.refreshToken&&i.jsxs("button",{type:"button",className:"btn btn-outline-primary",onClick:K,disabled:P,children:[i.jsx("i",{className:"ph ph-arrows-clockwise me-2"}),r("Refresh Token","kivicare-clinic-management-system")]})]}),i.jsx("small",{className:"text-muted d-block mt-2",children:r('Click "Generate OAuth2 Token" to open authorization popup and obtain access tokens',"kivicare-clinic-management-system")})]})]}),A.authMethod==="hmac"&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"col-12",children:i.jsxs("div",{className:"alert alert-info",children:[i.jsx("i",{className:"ph ph-info me-2"}),r("HMAC (Hash-based Message Authentication Code) provides request signing for enhanced security.","kivicare-clinic-management-system")]})}),i.jsxs("div",{className:"col-md-6",children:[i.jsxs("label",{className:"form-label",children:[r("Access Key","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx(ye,{name:"authConfig.hmacAccessKey",control:p,render:({field:$})=>i.jsx("input",{...$,type:"text",className:"form-control",placeholder:r("Enter access key","kivicare-clinic-management-system")})})]}),i.jsxs("div",{className:"col-md-6",children:[i.jsxs("label",{className:"form-label",children:[r("Secret Key","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx(ye,{name:"authConfig.hmacSecretKey",control:p,render:({field:$})=>i.jsx("input",{...$,type:"password",className:"form-control",placeholder:r("Enter secret key","kivicare-clinic-management-system")})})]}),i.jsxs("div",{className:"col-md-4",children:[i.jsx("label",{className:"form-label",children:r("Algorithm","kivicare-clinic-management-system")}),i.jsx(ye,{name:"authConfig.hmacAlgorithm",control:p,render:({field:$})=>i.jsx(ct,{...$,options:q,className:"react-select-box",classNamePrefix:"react-select",value:q.find(ce=>ce.value===$.value),onChange:ce=>$.onChange(ce?.value),styles:{menuPortal:ce=>({...ce,zIndex:9999})}})})]}),i.jsxs("div",{className:"col-md-4",children:[i.jsx("label",{className:"form-label",children:r("Signature Location","kivicare-clinic-management-system")}),i.jsx(ye,{name:"authConfig.hmacSignatureLocation",control:p,render:({field:$})=>i.jsx(ct,{...$,options:ne,className:"react-select-box",classNamePrefix:"react-select",value:ne.find(ce=>ce.value===$.value),onChange:ce=>$.onChange(ce?.value),styles:{menuPortal:ce=>({...ce,zIndex:9999})}})})]}),i.jsxs("div",{className:"col-md-4",children:[i.jsx("label",{className:"form-label",children:r("Header/Param Name","kivicare-clinic-management-system")}),i.jsx(ye,{name:"authConfig.hmacHeaderParamName",control:p,render:({field:$})=>i.jsx("input",{...$,type:"text",className:"form-control",placeholder:"X-Signature"})})]})]})]})})]}),i.jsxs("div",{className:"card mb-4",children:[i.jsx("div",{className:"card-header",children:i.jsx("h5",{className:"mb-0",children:r("Request Configuration","kivicare-clinic-management-system")})}),i.jsx("div",{className:"card-body",children:i.jsxs("div",{className:"row g-3",children:[i.jsxs("div",{className:"col-md-6",children:[i.jsx("label",{className:"form-label",children:r("Content Type","kivicare-clinic-management-system")}),i.jsx(ye,{name:"contentType",control:p,render:({field:$})=>i.jsx(ct,{...$,options:te,className:"react-select-box",classNamePrefix:"react-select",value:te.find(ce=>ce.value===$.value),onChange:ce=>$.onChange(ce?.value),styles:{menuPortal:ce=>({...ce,zIndex:9999})}})})]}),i.jsxs("div",{className:"col-12",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[i.jsx("label",{className:"form-label mb-0",children:r("Custom Headers","kivicare-clinic-management-system")}),i.jsxs("button",{type:"button",className:"btn btn-sm btn-primary",onClick:()=>T({key:"",value:""}),children:[i.jsx("i",{className:"ph ph-plus me-1"}),r("Add Header","kivicare-clinic-management-system")]})]}),w.map(($,ce)=>i.jsxs("div",{className:"row g-2 mb-2",children:[i.jsx("div",{className:"col-5",children:i.jsx(ye,{name:`customHeaders.${ce}.key`,control:p,render:({field:De})=>i.jsx("input",{...De,type:"text",className:"form-control",placeholder:r("Header Name","kivicare-clinic-management-system")})})}),i.jsx("div",{className:"col-6",children:i.jsx(ye,{name:`customHeaders.${ce}.value`,control:p,render:({field:De})=>i.jsx(ct,{...De,options:d.header?.map(xe=>({value:xe,label:xe}))||[],className:"react-select-box",classNamePrefix:"react-select",placeholder:r("Header Value","kivicare-clinic-management-system"),isClearable:!0,value:De.value?{value:De.value,label:De.value}:null,onChange:xe=>De.onChange(xe?.value||""),onInputChange:(xe,{action:Re})=>{Re==="input-change"&&De.onChange(xe)},styles:{menuPortal:xe=>({...xe,zIndex:9999})}})})}),i.jsx("div",{className:"col-1",children:i.jsx("button",{type:"button",className:"btn btn-secondary w-100",onClick:()=>j(ce),children:i.jsx("i",{className:"ph ph-trash"})})})]},$.id))]}),i.jsxs("div",{className:"col-12",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[i.jsx("label",{className:"form-label mb-0",children:r("Query Parameters","kivicare-clinic-management-system")}),i.jsxs("button",{type:"button",className:"btn btn-sm btn-primary",onClick:()=>_({key:"",value:""}),children:[i.jsx("i",{className:"ph ph-plus me-1"}),r("Add Parameter","kivicare-clinic-management-system")]})]}),D.map(($,ce)=>i.jsxs("div",{className:"row g-2 mb-2",children:[i.jsx("div",{className:"col-5",children:i.jsx(ye,{name:`queryParams.${ce}.key`,control:p,render:({field:De})=>i.jsx("input",{...De,type:"text",className:"form-control",placeholder:r("Parameter Name","kivicare-clinic-management-system")})})}),i.jsx("div",{className:"col-6",children:i.jsx(ye,{name:`queryParams.${ce}.value`,control:p,render:({field:De})=>i.jsx(ct,{...De,options:d.query_params?.map(xe=>({value:xe,label:xe}))||[],className:"react-select-box",classNamePrefix:"react-select",placeholder:r("Parameter Value","kivicare-clinic-management-system"),isClearable:!0,value:De.value?{value:De.value,label:De.value}:null,onChange:xe=>De.onChange(xe?.value||""),onInputChange:(xe,{action:Re})=>{Re==="input-change"&&De.onChange(xe)},styles:{menuPortal:xe=>({...xe,zIndex:9999})}})})}),i.jsx("div",{className:"col-1",children:i.jsx("button",{type:"button",className:"btn btn-secondary w-100",onClick:()=>N(ce),children:i.jsx("i",{className:"ph ph-trash"})})})]},$.id))]}),se()&&i.jsxs("div",{className:"col-12",children:[i.jsx("div",{className:"d-flex justify-content-between align-items-center mb-2",children:i.jsx("label",{className:"form-label mb-0",children:r("Request Body","kivicare-clinic-management-system")})}),d.body?.length>0?i.jsxs("div",{className:"mb-2",children:[i.jsx("small",{className:"text-muted d-block mb-2",children:i.jsx("strong",{children:r("Available Variables - Click to copy:","kivicare-clinic-management-system")})}),i.jsx("div",{className:"d-flex flex-wrap gap-1",children:d.body.map(($,ce)=>i.jsxs("button",{type:"button",className:"btn btn-sm btn-outline-primary",onClick:()=>U($),title:r("Click to copy","kivicare-clinic-management-system"),children:[i.jsx("i",{className:"ph ph-copy me-1"}),$]},ce))})]}):i.jsx("div",{className:"mb-2",children:i.jsx("small",{className:"text-muted d-block mb-2",children:i.jsx("em",{children:r("Select a module and event above to see available variables","kivicare-clinic-management-system")})})}),i.jsx(ye,{name:"requestBody",control:p,render:({field:$})=>i.jsx("textarea",{...$,className:"form-control font-monospace",rows:"8",placeholder:B()})}),i.jsx("small",{className:"text-muted",children:r("Click on variable buttons above to copy them to clipboard, then paste in the body","kivicare-clinic-management-system")})]})]})})]}),i.jsxs("div",{className:"card mb-4",children:[i.jsx("div",{className:"card-header",children:i.jsx("h5",{className:"mb-0",children:r("Advanced Settings","kivicare-clinic-management-system")})}),i.jsx("div",{className:"card-body",children:i.jsxs("div",{className:"row g-3",children:[i.jsxs("div",{className:"col-md-4",children:[i.jsx("label",{className:"form-label",children:r("Timeout (seconds)","kivicare-clinic-management-system")}),i.jsx(ye,{name:"timeout",control:p,render:({field:$})=>i.jsx("input",{...$,type:"number",min:"1",max:"300",className:"form-control"})})]}),i.jsxs("div",{className:"col-md-4",children:[i.jsx("label",{className:"form-label",children:r("Retry Attempts","kivicare-clinic-management-system")}),i.jsx(ye,{name:"retryAttempts",control:p,render:({field:$})=>i.jsx("input",{...$,type:"number",min:"0",max:"10",className:"form-control"})})]}),i.jsxs("div",{className:"col-md-4",children:[i.jsx("label",{className:"form-label",children:r("Retry Delay (seconds)","kivicare-clinic-management-system")}),i.jsx(ye,{name:"retryDelay",control:p,render:({field:$})=>i.jsx("input",{...$,type:"number",min:"1",max:"60",className:"form-control"})})]}),i.jsx("div",{className:"col-12",children:i.jsx(ye,{name:"enableSSL",control:p,render:({field:$})=>i.jsxs("div",{className:"form-check",children:[i.jsx("input",{...$,type:"checkbox",className:"form-check-input",checked:$.value,onChange:ce=>$.onChange(ce.target.checked)}),i.jsx("label",{className:"form-check-label",children:r("Enable SSL Certificate Verification","kivicare-clinic-management-system")})]})})})]})})]}),i.jsx("div",{className:"d-flex justify-content-end gap-2",children:i.jsx("button",{type:"submit",className:"btn btn-primary",disabled:n,children:n?i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),r("Saving...","kivicare-clinic-management-system")]}):i.jsxs(i.Fragment,{children:[i.jsx("i",{className:"ph ph-floppy-disk me-2"}),s?r("Update Webhook","kivicare-clinic-management-system"):r("Create Webhook","kivicare-clinic-management-system")]})})}),i.jsxs(lt,{show:I,onHide:le,size:"lg",centered:!0,children:[i.jsxs(lt.Header,{className:"pb-3",children:[i.jsxs("h5",{className:"mb-0",children:[i.jsx("i",{className:"ph ph-upload me-2"}),r("Import Webhook Configuration","kivicare-clinic-management-system")]}),i.jsx("button",{type:"button",className:"btn btn-link p-0",onClick:le,"aria-label":"Close",children:i.jsx("i",{className:"ph ph-x-circle h4 mb-0 icon-color fw-normal"})})]}),i.jsxs(lt.Body,{children:[i.jsxs("div",{className:"mb-4",children:[i.jsxs("label",{className:"form-label fw-semibold",children:[i.jsx("i",{className:"ph ph-file-arrow-up me-2"}),r("Upload JSON File","kivicare-clinic-management-system")]}),i.jsxs("div",{className:"d-flex gap-2",children:[i.jsx("input",{ref:ae,type:"file",accept:".json",className:"form-control",onChange:J}),i.jsx(Xt,{variant:"outline-secondary",onClick:()=>ae.current?.click(),children:i.jsx("i",{className:"ph ph-file"})})]}),i.jsx("small",{className:"text-muted",children:r("Upload a .json file containing the webhook configuration","kivicare-clinic-management-system")})]}),i.jsx("div",{className:"text-center mb-4",children:i.jsx("span",{className:"badge bg-secondary",children:r("OR","kivicare-clinic-management-system")})}),i.jsxs("div",{className:"mb-3",children:[i.jsxs("label",{className:"form-label fw-semibold",children:[i.jsx("i",{className:"ph ph-code me-2"}),r("Paste JSON Configuration","kivicare-clinic-management-system")]}),i.jsx("textarea",{className:`form-control font-monospace ${H?"is-invalid":z?"is-valid":""}`,rows:"12",value:O,onChange:$=>X($.target.value),placeholder:JSON.stringify({name:"Example Webhook",module_name:"appointment",event_name:"created",webhook_data:{url:"https://example.com/webhook",method:"POST"}},null,2),style:{fontSize:"0.875rem"}}),H&&i.jsxs("div",{className:"invalid-feedback d-block",children:[i.jsx("i",{className:"ph ph-warning-circle me-1"}),H]}),z&&!H&&i.jsxs("div",{className:"valid-feedback d-block",children:[i.jsx("i",{className:"ph ph-check-circle me-1"}),r("Valid JSON configuration detected","kivicare-clinic-management-system")]}),i.jsxs("small",{className:"text-muted d-block mt-2",children:[i.jsx("i",{className:"ph ph-info me-1"}),r("Paste a valid webhook JSON configuration. The format will be validated automatically.","kivicare-clinic-management-system")]})]}),W&&z&&i.jsxs("div",{className:"alert alert-info bg-info-subtle mt-3",children:[i.jsxs("h6",{className:"alert-heading",children:[i.jsx("i",{className:"ph ph-eye me-2"}),r("Configuration Preview","kivicare-clinic-management-system")]}),i.jsx("hr",{}),i.jsxs("div",{className:"small",children:[i.jsxs("div",{className:"row",children:[i.jsxs("div",{className:"col-md-6",children:[i.jsx("strong",{children:r("Name:","kivicare-clinic-management-system")})," ",W.name]}),i.jsxs("div",{className:"col-md-6",children:[i.jsx("strong",{children:r("Module:","kivicare-clinic-management-system")})," ",W.module_name]})]}),i.jsxs("div",{className:"row mt-2",children:[i.jsxs("div",{className:"col-md-6",children:[i.jsx("strong",{children:r("Event:","kivicare-clinic-management-system")})," ",W.event_name||r("N/A","kivicare-clinic-management-system")]}),i.jsxs("div",{className:"col-md-6",children:[i.jsx("strong",{children:r("URL:","kivicare-clinic-management-system")}),i.jsx("span",{className:"text-truncate d-inline-block",style:{maxWidth:"200px"},children:W.webhook_data?.url})]})]}),i.jsxs("div",{className:"row mt-2",children:[i.jsxs("div",{className:"col-md-6",children:[i.jsx("strong",{children:r("Method:","kivicare-clinic-management-system")})," ",W.methods||W.webhook_data?.method||"POST"]}),i.jsxs("div",{className:"col-md-6",children:[i.jsx("strong",{children:r("Auth:","kivicare-clinic-management-system")})," ",W.webhook_data?.auth_method||"none"]})]})]})]})]}),i.jsxs(lt.Footer,{children:[i.jsxs(Xt,{variant:"secondary",className:"me-2",onClick:le,children:[i.jsx("i",{className:"ph ph-x me-1"}),r("Cancel","kivicare-clinic-management-system")]}),i.jsxs(Xt,{variant:"primary",onClick:he,disabled:!z,children:[i.jsx("i",{className:"ph ph-upload me-1"}),r("Import Configuration","kivicare-clinic-management-system")]})]})]})]})};function jhe(){const t=hn(),e=Lie({onSuccess:()=>{Se.success(r("Webhook created successfully","kivicare-clinic-management-system")),t("/setting/webhooks/configuration")},onError:s=>{console.error("Error creating webhook:",s),Se.error(r("Failed to create webhook","kivicare-clinic-management-system"))}}),n=s=>{e.mutate(s)};return i.jsxs("div",{className:"add-webhook-configuration",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"mb-1",children:r("Add New Webhook","kivicare-clinic-management-system")}),i.jsx("p",{className:"text-muted mb-0",children:r("Configure a new webhook to send notifications when events occur","kivicare-clinic-management-system")})]}),i.jsx("button",{className:"btn btn-primary",onClick:()=>t("/setting/webhooks/configuration"),children:r("Back","kivicare-clinic-management-system")})]}),i.jsx(oI,{onSubmit:n,isLoading:e.isLoading,isEditing:!1})]})}function Nhe(){const{id:t}=Yt(),e=hn(),{data:n,isLoading:s}=Iie(t,{enabled:!!t}),a=$ie({onSuccess:()=>{Se.success(r("Webhook updated successfully","kivicare-clinic-management-system")),e("/setting/webhooks/configuration")},onError:o=>{console.error("Error updating webhook:",o),Se.error(r("Failed to update webhook","kivicare-clinic-management-system"))}}),l=o=>{a.mutate({id:t,...o})};return s?i.jsx(yP,{}):n?.data?i.jsxs("div",{className:"edit-webhook-configuration",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"mb-1",children:r("Edit Webhook","kivicare-clinic-management-system")}),i.jsx("p",{className:"text-muted mb-0",children:r("Update webhook configuration and settings","kivicare-clinic-management-system")})]}),i.jsx(ht,{to:"/setting/webhooks/configuration",className:"btn btn-primary",children:r("Back","kivicare-clinic-management-system")})]}),i.jsx(oI,{initialData:n.data,onSubmit:l,isLoading:a.isLoading,isEditing:!0})]}):i.jsx("div",{className:"alert alert-warning",children:r("Webhook not found","kivicare-clinic-management-system")})}const Che=()=>{const[t,e]=f.useState(""),[n,s]=f.useState(""),[a,l]=f.useState(""),[o,c]=f.useState([]),[d,m]=f.useState(!1),{data:u}=CP({page:1,per_page:100}),h=u?.data?.data||[],p=h.map(_=>({value:_.id,label:_.name,url:_.url,method:_.method,status:_.status})),{data:g}=Fie(),v=g?.data?.modules||[];g?.data?.common_variables;const x=qie({onSuccess:_=>{let N=null,A=null;for(const I of v){const M=I.events.find(O=>O.value===n);if(M){N=I,A=M;break}}const P=_.data||_,E={id:Date.now(),webhook:P.webhook_data?.name||h.find(I=>I.id==t)?.name||"Unknown",module:N?.label||"Unknown",event:A?.label||n,status:P.success?"success":"failed",responseCode:P.status_code||0,responseTime:P.execution_time||0,response:P.response||P.error||"No response data",url:P.webhook_data?.url||"Unknown URL",method:P.webhook_data?.method||"POST",timestamp:new Date().toLocaleString()};c(I=>[E,...I]),_.status?Se.success(r("Test webhook delivered successfully","kivicare-clinic-management-system")):Se.error(r("Test webhook delivery failed","kivicare-clinic-management-system"))},onError:_=>{let N=null,A=null;for(const E of v){const I=E.events.find(M=>M.value===n);if(I){N=E,A=I;break}}const P={id:Date.now(),webhook:h.find(E=>E.id==t)?.name||"Unknown",module:N?.label||"Unknown",event:A?.label||n,status:"failed",responseCode:0,responseTime:0,response:_.message||"Network error occurred",url:"Unknown URL",method:"Unknown",timestamp:new Date().toLocaleString()};c(E=>[P,...E]),Se.error(r("Test failed: Network error","kivicare-clinic-management-system"))}}),y=_=>{let N=null,A=null;for(const I of v){const M=I.events.find(O=>O.value===_);if(M){N=I,A=M;break}}if(!A)return{};const P=A.dynamic_variables,E={};return P.body?.forEach(I=>{const M=I.replace(/{{|}}/g,"");if(M.includes("_id"))M.includes("appointment_id")?E[M]=Math.floor(Math.random()*1e3)+1:M.includes("patient_id")?E[M]=Math.floor(Math.random()*500)+100:M.includes("doctor_id")?E[M]=Math.floor(Math.random()*100)+50:M.includes("clinic_id")?E[M]=Math.floor(Math.random()*10)+1:M.includes("encounter_id")?E[M]=Math.floor(Math.random()*2e3)+500:E[M]=Math.floor(Math.random()*1e3)+1;else if(M.includes("_email"))M.includes("patient_email")?E[M]="john.doe@example.com":M.includes("doctor_email")?E[M]="dr.smith@kivicare.com":M.includes("clinic_email")?E[M]="info@healthclinic.com":E[M]="contact@kivicare.com";else if(M.includes("_name")||M.includes("_full_name"))M.includes("patient")?E[M]="John Doe":M.includes("doctor")?E[M]="Dr. Sarah Smith":M.includes("clinic")?E[M]="Main Health Clinic":M.includes("first_name")?E[M]="John":M.includes("last_name")?E[M]="Doe":M.includes("service_names")?E[M]="General Consultation, Blood Test":E[M]="Sample Name";else if(M.includes("_contact_number")||M.includes("_phone")){const O=["+1-555-0123","+1 (555) 123-4567","555-123-4567"];E[M]=O[Math.floor(Math.random()*O.length)]}else if(M.includes("_date")){const O=new Date;if(M.includes("appointment_date")||M.includes("encounter_date")){const F=new Date(O);F.setDate(O.getDate()+Math.floor(Math.random()*30)+1),E[M]=F.toISOString().split("T")[0]}else if(M.includes("dob")||M.includes("date_of_birth")){const F=1970+Math.floor(Math.random()*40);E[M]=`${F}-${String(Math.floor(Math.random()*12)+1).padStart(2,"0")}-${String(Math.floor(Math.random()*28)+1).padStart(2,"0")}`}else if(M.includes("registered_date")){const F=new Date(O);F.setDate(O.getDate()-Math.floor(Math.random()*365)),E[M]=F.toISOString().split("T")[0]}else E[M]=O.toISOString().split("T")[0]}else if(M.includes("_time"))if(M.includes("start_time")){const O=["09:00:00","10:00:00","11:00:00","14:00:00","15:00:00"];E[M]=O[Math.floor(Math.random()*O.length)]}else if(M.includes("end_time")){const O=["09:30:00","10:30:00","11:30:00","14:30:00","15:30:00"];E[M]=O[Math.floor(Math.random()*O.length)]}else E[M]=new Date().toTimeString().split(" ")[0];else if(M.includes("_address")){const O=["123 Main Street, New York, NY 10001","456 Oak Avenue, Los Angeles, CA 90210","789 Elm Drive, Chicago, IL 60601","321 Pine Road, Houston, TX 77001"];E[M]=O[Math.floor(Math.random()*O.length)]}else if(M.includes("_status"))if(M.includes("appointment_status")){const O=["1","2","3"];E[M]=O[Math.floor(Math.random()*O.length)]}else E[M]="1";else if(M.includes("_gender")){const O=["male","female","other"];E[M]=O[Math.floor(Math.random()*O.length)]}else if(M.includes("blood_group")){const O=["A+","A-","B+","B-","AB+","AB-","O+","O-"];E[M]=O[Math.floor(Math.random()*O.length)]}else if(M.includes("specialization")){const O=["Cardiology","Neurology","Orthopedics","Pediatrics","Dermatology"];E[M]=O[Math.floor(Math.random()*O.length)]}else if(M.includes("qualification")){const O=["MBBS, MD","MBBS, MS","BDS, MDS","BAMS","BHMS"];E[M]=O[Math.floor(Math.random()*O.length)]}else if(M.includes("experience"))E[M]=`${Math.floor(Math.random()*20)+1} years`;else if(M.includes("description"))M.includes("doctor")?E[M]="Experienced physician with expertise in general medicine and patient care.":M.includes("encounter")?E[M]="Regular check-up and consultation for ongoing health monitoring.":E[M]="Sample description for healthcare services.";else if(M.includes("postal_code")||M.includes("zip_code"))E[M]=String(Math.floor(Math.random()*9e4)+1e4);else if(M.includes("city")){const O=["New York","Los Angeles","Chicago","Houston","Phoenix"];E[M]=O[Math.floor(Math.random()*O.length)]}else if(M.includes("country")){const O=["United States","Canada","United Kingdom","Australia"];E[M]=O[Math.floor(Math.random()*O.length)]}else if(M.includes("profile_photo")||M.includes("signature"))E[M]=`https://via.placeholder.com/150x150?text=${M.replace(/_/g,"+")}`;else if(M.includes("clinic_ids")||M.includes("_ids"))E[M]="[1, 2, 3]";else if(M.includes("custom_fields_data"))E[M]=JSON.stringify({insurance_provider:"Blue Cross Blue Shield",emergency_contact:"+1-555-9876",allergies:"None known",medical_history:"Hypertension"});else if(M==="current_date_time")E[M]=new Date().toISOString();else if(M==="current_date")E[M]=new Date().toISOString().split("T")[0];else if(M==="current_time")E[M]=new Date().toTimeString().split(" ")[0];else if(M==="current_user_id")E[M]="1";else{const O=M.replace(/_/g," ").replace(/\b\w/g,F=>F.toUpperCase());E[M]=`Sample ${O}`}}),{event:_,module:N?.value,data:E,metadata:{timestamp:new Date().toISOString(),webhook_id:t,test_mode:!0}}},b=_=>{s(_);const N=y(_);l(JSON.stringify(N,null,2)),Se.success(r("Sample payload loaded","kivicare-clinic-management-system"))},k=_=>{try{return JSON.parse(_),!0}catch{return!1}},w=async()=>{if(!t||!n||!a){Se.error(r("Please select a webhook, event, and provide payload data","kivicare-clinic-management-system"));return}if(!k(a)){Se.error(r("Invalid JSON payload","kivicare-clinic-management-system"));return}m(!0);try{await x.mutateAsync({webhookId:t,eventName:n,payload:JSON.parse(a)})}finally{m(!1)}},T=async()=>{if(!t){Se.error(r("Please select a webhook endpoint","kivicare-clinic-management-system"));return}m(!0);for(const _ of v.slice(0,3)){const N=_.events[0];if(N)try{s(N.value);const A=y(N.value);l(JSON.stringify(A,null,2)),await x.mutateAsync({webhookId:t,eventName:N.value,payload:A}),await new Promise(P=>setTimeout(P,1e3))}catch(A){console.error("Bulk test error:",A)}}m(!1),Se.success(r("Bulk test completed","kivicare-clinic-management-system"))},j=_=>{switch(_){case"success":return i.jsx("i",{className:"bi bi-check-circle-fill text-success me-2"});case"failed":return i.jsx("i",{className:"bi bi-x-circle-fill text-danger me-2"});default:return i.jsx("i",{className:"bi bi-clock-fill text-warning me-2"})}},D=_=>{switch(_){case"success":return"success";case"failed":return"danger";default:return"warning"}};return i.jsxs(ko,{fluid:!0,children:[i.jsxs("div",{className:"mb-4",children:[i.jsx("h2",{className:"mb-2",children:r("Webhook Testing","kivicare-clinic-management-system")}),i.jsx("p",{className:"text-muted",children:r("Test webhook deliveries with sample or custom payloads","kivicare-clinic-management-system")})]}),i.jsxs(Yn,{className:"g-4",children:[i.jsx(Et,{lg:6,children:i.jsxs(_t,{children:[i.jsxs(_t.Header,{className:"mb-1",children:[i.jsx("h4",{className:"d-flex align-items-center",children:r("Test Configuration","kivicare-clinic-management-system")}),i.jsx("p",{className:"text-muted mb-0",children:r("Configure and execute webhook tests","kivicare-clinic-management-system")})]}),i.jsx(_t.Body,{children:i.jsxs(Yn,{className:"g-3",children:[i.jsx(Et,{xs:12,children:i.jsxs(Mt.Group,{children:[i.jsx(Mt.Label,{children:r("Select Webhook","kivicare-clinic-management-system")}),i.jsx(ct,{value:p.find(_=>_.value==t)||null,onChange:_=>e(_?_.value:""),options:p,placeholder:r("Choose webhook endpoint...","kivicare-clinic-management-system"),isClearable:!0,isSearchable:!0,noOptionsMessage:()=>r("No webhooks found","kivicare-clinic-management-system"),loadingMessage:()=>r("Loading webhooks...","kivicare-clinic-management-system"),className:"react-select-box",classNamePrefix:"react-select",styles:{menuPortal:_=>({..._,zIndex:9999})}}),h.length===0&&i.jsx(Mt.Text,{className:"text-muted",children:r("No webhooks configured. Please create a webhook first.","kivicare-clinic-management-system")})]})}),i.jsx(Et,{xs:12,children:i.jsxs(Mt.Group,{children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[i.jsx(Mt.Label,{children:r("Payload Data","kivicare-clinic-management-system")}),i.jsxs(Xt,{variant:"btn btn-secondary",size:"sm",onClick:()=>b(n),disabled:!n,children:[i.jsx("i",{className:"bi bi-code me-1"}),r("Reload Sample","kivicare-clinic-management-system")]})]}),i.jsx(Mt.Control,{as:"textarea",rows:10,value:a,onChange:_=>l(_.target.value),placeholder:r("Enter JSON payload or select a sample from the right panel...","kivicare-clinic-management-system")}),a&&!k(a)&&i.jsx(Mt.Text,{className:"text-danger",children:r("Invalid JSON format","kivicare-clinic-management-system")})]})}),i.jsx(Et,{xs:12,children:i.jsxs("div",{className:"d-flex gap-2",children:[i.jsx(Xt,{variant:"primary",onClick:w,disabled:d||!t||!n||!a,className:"flex-fill",children:d?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"spinner-border spinner-border-sm me-2",role:"status",children:i.jsx("span",{className:"visually-hidden",children:r("Loading...","kivicare-clinic-management-system")})}),r("Testing...","kivicare-clinic-management-system")]}):i.jsxs(i.Fragment,{children:[i.jsx("i",{className:"bi bi-play-fill me-2"}),r("Send Test","kivicare-clinic-management-system")]})}),i.jsx(Xt,{variant:"btn btn-primary",onClick:T,disabled:d||!t,children:r("Bulk Test","kivicare-clinic-management-system")})]})})]})})]})}),i.jsx(Et,{lg:6,children:i.jsxs(_t,{children:[i.jsxs(_t.Header,{className:"mb-1",children:[i.jsx("h4",{className:"d-flex align-items-center",children:r("Sample Payloads","kivicare-clinic-management-system")}),i.jsx("p",{className:"text-muted mb-0",children:r("Click on any event below to load its sample payload for testing","kivicare-clinic-management-system")})]}),i.jsx(_t.Body,{children:i.jsx("div",{style:{maxHeight:"450px",overflowY:"auto"},children:v.length===0?i.jsxs("div",{className:"text-center py-4 border-start border-end",children:[i.jsx("div",{className:"spinner-border text-muted",role:"status",children:i.jsx("span",{className:"visually-hidden",children:r("Loading...","kivicare-clinic-management-system")})}),i.jsx("p",{className:"text-muted mt-2",children:r("Loading events...","kivicare-clinic-management-system")})]}):i.jsx("div",{className:"d-grid gap-3",children:v.map(_=>i.jsxs("div",{children:[i.jsx("h6",{className:"text-muted mb-2 border-bottom pb-1",children:_.label}),i.jsx("div",{className:"d-grid gap-2 mb-3",children:_.events.map(N=>i.jsx("div",{className:`p-3 border rounded cursor-pointer transition-colors ${n===N.value?"border-primary bg-primary bg-opacity-10":"border-light hover:bg-light"}`,onClick:()=>b(N.value),onMouseEnter:A=>{n!==N.value&&(A.target.style.backgroundColor="#f8f9fa")},onMouseLeave:A=>{n!==N.value&&(A.target.style.backgroundColor="")},children:i.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[i.jsxs("div",{className:"flex-grow-1",children:[i.jsx("div",{className:"fw-medium mb-1",children:N.label}),i.jsx("div",{className:"small text-muted",children:N.value})]}),i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[n===N.value&&i.jsx(ca,{bg:"primary",className:"small",children:r("Selected","kivicare-clinic-management-system")}),i.jsxs(ca,{bg:"secondary",className:"small",children:[N.dynamic_variables?.body?.length||0," ",r("vars","kivicare-clinic-management-system")]}),i.jsx("i",{className:"bi bi-arrow-right text-muted"})]})]})},N.value))})]},_.value))})})})]})})]}),i.jsx(Yn,{className:"mt-4",children:i.jsx(Et,{xs:12,children:i.jsxs(_t,{children:[i.jsxs(_t.Header,{children:[i.jsx("h4",{className:"d-flex align-items-center",children:r("Test Results","kivicare-clinic-management-system")}),i.jsx("p",{className:"text-muted mb-0",children:r("Recent webhook test deliveries and responses","kivicare-clinic-management-system")})]}),i.jsx(_t.Body,{children:o.length===0?i.jsxs("div",{className:"text-center py-5 text-muted",children:[i.jsx("i",{className:"bi bi-play display-1 opacity-25 d-block mb-3"}),i.jsx("p",{children:r("No test results yet. Run a test to see delivery results here.","kivicare-clinic-management-system")})]}):i.jsx("div",{style:{maxHeight:"500px",overflowY:"auto"},children:i.jsx("div",{className:"d-grid gap-3",children:o.map(_=>i.jsxs("div",{className:"border rounded p-3",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-start mb-3",children:[i.jsxs("div",{className:"d-flex align-items-center",children:[j(_.status),i.jsxs("div",{children:[i.jsx("p",{className:"fw-medium mb-1",children:_.webhook}),i.jsxs("p",{className:"text-muted small mb-1",children:[_.module,"  ",_.event]}),i.jsxs("p",{className:"text-muted small mb-0",children:[i.jsx(ca,{bg:"secondary",className:"me-2",children:_.method}),_.url]})]})]}),i.jsxs("div",{className:"text-end",children:[i.jsx(ca,{bg:D(_.status),className:"mb-1",children:_.responseCode}),i.jsxs("p",{className:"text-muted small mb-1",children:[_.responseTime,"ms"]}),i.jsx("p",{className:"text-muted small mb-0",children:_.timestamp})]})]}),i.jsx("hr",{className:"my-3"}),i.jsxs("div",{children:[i.jsx(Mt.Label,{className:"small text-muted",children:r("Response Details","kivicare-clinic-management-system")}),i.jsxs("div",{className:"bg-light p-3 rounded mt-1",children:[i.jsxs("div",{className:"row g-2 mb-2",children:[i.jsxs("div",{className:"col-auto",children:[i.jsx("small",{className:"text-muted",children:r("Status:","kivicare-clinic-management-system")}),i.jsx(ca,{bg:D(_.status),className:"ms-1",children:_.status.toUpperCase()})]}),i.jsxs("div",{className:"col-auto",children:[i.jsx("small",{className:"text-muted",children:r("Code:","kivicare-clinic-management-system")}),i.jsx("span",{className:"ms-1 fw-medium",children:_.responseCode})]}),i.jsxs("div",{className:"col-auto",children:[i.jsx("small",{className:"text-muted",children:r("Time:","kivicare-clinic-management-system")}),i.jsxs("span",{className:"ms-1 fw-medium",children:[_.responseTime,"ms"]})]})]}),i.jsxs("div",{children:[i.jsx("small",{className:"text-muted d-block mb-1",children:r("Response Body:","kivicare-clinic-management-system")}),i.jsx("pre",{className:"small mb-0",style:{overflowX:"auto",fontSize:"0.75rem",maxHeight:"150px",overflowY:"auto",backgroundColor:"white",border:"1px solid #dee2e6",borderRadius:"0.25rem",padding:"0.5rem"},children:typeof _.response=="string"?_.response:JSON.stringify(_.response,null,2)})]})]})]})]},_.id))})})})]})})})]})},_he=()=>(f.useEffect(()=>{const t=new URLSearchParams(window.location.search),e=t.get("code"),n=t.get("error"),s=t.get("error_description");window.opener?(e?window.opener.postMessage({type:"oauth2_callback",code:e},window.location.origin):n&&window.opener.postMessage({type:"oauth2_callback",error:s||n},window.location.origin),setTimeout(()=>{window.close()},500)):console.error("OAuth2Callback: No opener window found")},[]),i.jsx("div",{className:"d-flex justify-content-center align-items-center vh-100",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"spinner-border text-primary",role:"status",children:i.jsx("span",{className:"visually-hidden",children:r("Loading...","kivicare-clinic-management-system")})}),i.jsx("h5",{children:r("Processing OAuth2 Authorization...","kivicare-clinic-management-system")}),i.jsx("p",{className:"text-muted",children:r("This window will close automatically.","kivicare-clinic-management-system")})]})})),She=[{att_name:"clinic",name:r("Choose your Clinic","kivicare-clinic-management-system"),fixed:!1},{att_name:"doctor",name:r("Choose your Doctor","kivicare-clinic-management-system"),fixed:!1},{att_name:"servicesCategory",name:r("Services from Category","kivicare-clinic-management-system"),fixed:!1},{att_name:"selectDateTime",name:r("Select Date and Time","kivicare-clinic-management-system"),fixed:!0},{att_name:"userDetail",name:r("User Detail information","kivicare-clinic-management-system"),fixed:!0},{att_name:"appointmentExtra",name:r("Appointment Extra Data","kivicare-clinic-management-system"),fixed:!0},{att_name:"confirmation",name:r("Confirmation","kivicare-clinic-management-system"),fixed:!0}],wx=[{id:1,label:r("Show Phone & Email","kivicare-clinic-management-system")},{id:2,label:r("Show Phone Number","kivicare-clinic-management-system")},{id:3,label:r("Show Email Address","kivicare-clinic-management-system")},{id:4,label:r("Hide contact details","kivicare-clinic-management-system")}],Id={clinic:[{key:"showClinicImage",label:r("Show Clinic Image","kivicare-clinic-management-system")},{key:"showClinicAddress",label:r("Show Clinic Address","kivicare-clinic-management-system")}],doctor:[{key:"showDoctorImage",label:r("Show Doctor Image","kivicare-clinic-management-system")},{key:"showDoctorExperience",label:r("Show Doctor Experience","kivicare-clinic-management-system")},{key:"showDoctorSpeciality",label:r("Show doctor speciality","kivicare-clinic-management-system")},{key:"showDoctorDegree",label:r("Show doctor degree","kivicare-clinic-management-system")},{key:"showDoctorRating",label:r("Show doctor rating","kivicare-clinic-management-system")}],service:[{key:"showServiceImage",label:r("Show Service Image","kivicare-clinic-management-system")},{key:"showServicetype",label:r("Show Service Type","kivicare-clinic-management-system")},{key:"showServicePrice",label:r("Show Service Price","kivicare-clinic-management-system")},{key:"showServiceDuration",label:r("Show Service Duration","kivicare-clinic-management-system")},{key:"skip_service_when_single",label:r("Skip service when single is present","kivicare-clinic-management-system")}],color:[{key:"primaryColor",label:r("Primary Color","kivicare-clinic-management-system")},{key:"primaryHoverColor",label:r("Primary Hover Color","kivicare-clinic-management-system")},{key:"secondaryColor",label:r("Secondary Color","kivicare-clinic-management-system")},{key:"secondaryHoverColor",label:r("Secondary Hover Color","kivicare-clinic-management-system")}],print:[{key:"widget_print",label:r("Print Detail","kivicare-clinic-management-system")},{key:"afterWoocommerceRedirect",label:r("Redirect to Print after payment","kivicare-clinic-management-system")}]},Ehe=({label:t,value:e="#000000",onChange:n,disabled:s=!1})=>i.jsxs("div",{className:"d-flex align-items-center gap-2 bg-body rounded widget-color-select",children:[i.jsx("input",{type:"color",className:"form-control form-control-color",value:e,title:r("Choose your color","kivicare-clinic-management-system"),onChange:n,disabled:s}),i.jsx("label",{className:"form-label",children:r(t,"kivicare-clinic-management-system")})]}),Zo=({title:t,children:e,className:n=""})=>i.jsx("div",{className:`card ${n}`,children:i.jsxs("div",{className:"card-body p-3",children:[i.jsx("h6",{className:"mb-3 fw-semibold",children:r(t,"kivicare-clinic-management-system")}),e]})}),The=({id:t,name:e,fixed:n,disabled:s})=>{const{attributes:a,listeners:l,setNodeRef:o,transform:c,transition:d,isDragging:m}=Yw({id:t,disabled:n}),u={transform:Wa.Transform.toString(c),transition:d,opacity:m?.7:1,cursor:n?"not-allowed":"grab",background:m?"#eaf1ff":void 0,boxShadow:m?"0 0 10px #5670CC":void 0,pointerEvents:n?"none":"auto",filter:s?"grayscale(1) opacity(0.5)":void 0};return i.jsxs("div",{ref:o,style:u,...a,...!n&&!s?l:{},className:`p-3 bg-body mb-2 d-flex align-items-center gap-3 ${s?"disabled":""}`,children:[!n&&!s&&i.jsx("i",{className:"ph ph-list fs-5"}),i.jsx("span",{className:"font-size-14 flex-grow-1",children:r(e,"kivicare-clinic-management-system")})]})},Ahe=()=>{const{isAddonActive:t}=mt(),e=t("kiviPro"),{data:n,isLoading:s,error:a}=kn("settings","widget-setting",{},{enabled:!0}),l=un("settings","widget-setting"),[o,c]=f.useState(!1),{data:d}=Sn(),m=d?.data?.hideUtilityLinks,{control:u,handleSubmit:h,setValue:p,watch:g,reset:v}=en({defaultValues:{showClinicImage:!1,showClinicAddress:!1,clinicContactDetails:wx[0],showDoctorImage:!1,showDoctorExperience:!1,showDoctorSpeciality:!1,showDoctorDegree:!1,showDoctorRating:!1,doctorContactDetails:wx[0],primaryColor:"#5670CC",primaryHoverColor:"#4563CC",secondaryColor:"#F67E7D",secondaryHoverColor:"#000000",widget_print:!1,afterWoocommerceRedirect:!1,widgetOrder:She,showServiceImage:!0,showServicetype:!0,showServicePrice:!0,showServiceDuration:!0,skip_service_when_single:!1}}),x=g("widgetOrder"),y=PP(Qh(Vw,{activationConstraint:{distance:5}}));f.useEffect(()=>{!n?.status||!n?.data||v(D=>({...D,...Object.fromEntries(Object.entries(n.data).filter(([_,N])=>N!=null&&N!==""))}))},[n,v]),f.useEffect(()=>{if(!a)return;const D=typeof a=="string"?a:a?.response?.data?.message||a?.message||r("An unknown error occurred","kivicare-clinic-management-system");Ze.fire({icon:"error",title:r("Error","kivicare-clinic-management-system"),text:D,confirmButtonText:r("Ok","kivicare-clinic-management-system")})},[a]);const b=D=>{const{active:_,over:N}=D;if(!N||_.id===N.id)return;const A=x.findIndex(E=>E.att_name===_.id),P=x.findIndex(E=>E.att_name===N.id);if(!x[A].fixed&&!x[P].fixed){const E=pf(x,A,P);p("widgetOrder",E,{shouldDirty:!0})}},k=h(async D=>{c(!0);try{const _={...D,widgetOrder:x},N=await l.mutateAsync(_);Ze.fire({icon:N.status?"success":"error",title:r(N.status?"Success":"Error","kivicare-clinic-management-system"),text:N.message,confirmButtonText:r("Ok","kivicare-clinic-management-system")})}catch(_){console.error("Error saving settings:",_),Ze.fire({icon:"error",title:r("Error","kivicare-clinic-management-system"),text:r("Failed to save settings. Please try again.","kivicare-clinic-management-system"),confirmButtonText:r("Ok","kivicare-clinic-management-system")})}finally{c(!1)}}),w=D=>({text:D?r("Active","kivicare-clinic-management-system"):r("Inactive","kivicare-clinic-management-system"),className:D?"text-primary bg-primary-subtle":"text-secondary bg-secondary-subtle"}),T=D=>D.map(({key:_,label:N})=>i.jsx(ye,{name:_,control:u,render:({field:A})=>i.jsx(cn,{label:N,checked:A.value,onChange:A.onChange,badge:w(A.value),className:"mb-3",disabled:o})},_)),j=D=>i.jsx(ye,{name:D,control:u,render:({field:_})=>i.jsxs("div",{className:"form-group",children:[i.jsx("label",{className:"d-flex align-items-center column-gap-3 row-gap-1 form-check-label h6 font-size-14",children:i.jsx("span",{className:"mb-0 font-size-14",children:r("Contact Details","kivicare-clinic-management-system")})}),i.jsx(ct,{className:"react-select-box",options:wx,value:_.value,onChange:_.onChange,isDisabled:o,getOptionLabel:N=>N.label,getOptionValue:N=>N.id,classNamePrefix:"react-select",styles:{menuPortal:N=>({...N,zIndex:9999})}})]})});return s?i.jsx(kP,{}):i.jsx("div",{className:"tab-pane fade show active",id:"v-pills-widget-setting",role:"tabpanel","aria-labelledby":"v-pills-widget-setting-tab",tabIndex:0,children:i.jsxs("div",{className:"widget-setting",children:[i.jsxs("h6",{className:"setting-title mb-3",children:[r("Widget Settings","kivicare-clinic-management-system"),m!=="on"&&i.jsx("a",{href:"https://documentation.iqonic.design/kivicare-wordpress/kivicare-lite/documentation/settings-configuration/widget-settings/",target:"_blank",rel:"noopener noreferrer",className:"ms-1",children:i.jsx("i",{className:"ph ph-question align-middle h5 text-primary Google Event Template"})})]}),e&&i.jsxs(Zo,{title:"Clinic",children:[T(Id.clinic),j("clinicContactDetails")]}),i.jsxs(Zo,{title:"Doctor",children:[T(Id.doctor),j("doctorContactDetails")]}),i.jsx(Zo,{title:"Service",children:T(Id.service)}),i.jsx(Zo,{title:"Widget Color",children:i.jsx("div",{className:"d-flex align-items-center gap-4 flex-wrap",children:Id.color.map(({key:D,label:_})=>i.jsx(ye,{name:D,control:u,render:({field:N})=>i.jsx(Ehe,{label:_,value:N.value,onChange:A=>N.onChange(A.target.value),disabled:o})},D))})}),i.jsxs("div",{className:"position-relative",children:[!e&&i.jsx(di,{title:r("Available For Kivicare Pro","kivicare-clinic-management-system"),text:r("Change widget order setting is available in Kivicare Pro. Upgrade now to access these features.","kivicare-clinic-management-system"),link:"https://codecanyon.net/item/kivicare-pro-clinic-patient-management-system-ehr-addon/30690654?s_rank=3"}),i.jsx(Zo,{title:"Widget Order",children:i.jsx(Ww,{sensors:y,collisionDetection:MP,onDragEnd:b,children:i.jsx(Gw,{items:x.map(D=>D.att_name),strategy:tM,children:x.map(D=>i.jsx(The,{id:D.att_name,name:D.name,fixed:D.fixed,disabled:o},D.att_name))})})})]}),i.jsx(Zo,{title:"Print Detail setting",children:T(Id.print)}),i.jsx("div",{className:"d-flex justify-content-end mt-4",children:i.jsx("button",{type:"button",className:"btn btn-primary px-4",onClick:k,disabled:o,children:o?i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status"}),r("Saving...","kivicare-clinic-management-system")]}):r("Save Settings","kivicare-clinic-management-system")})})]})})},Dhe=({title:t,titleId:e,...n},s)=>f.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",height:26,viewBox:"0 0 114 26",width:114,ref:s,"aria-labelledby":e,...n},t?f.createElement("title",{id:e},t):null,f.createElement("path",{d:"m23.6977 25.2924h-20.10301c-1.32885 0-2.58954-.6978-3.202853-1.8892-.698493-1.3617-.4429462-2.9956.630343-4.068l13.98692-13.97375h-10.01743c-2.7599 0-4.99167-2.22968-4.99167-4.987h18.5186c1.3288 0 2.5895.69784 3.2028 1.88927.6986 1.36164.443 2.9956-.6303 4.0679l-13.98691 13.97378h11.60181c2.7599 0 4.9917 2.2297 4.9917 4.987zm79.5603-25.2924c-2.879 0-5.4691 1.24249-7.241 3.23389-1.7883-1.9914-4.3781-3.23389-7.2401-3.23389-5.3497 0-9.7108 4.56149-9.7108 9.88887v15.40353c2.7598 0 4.9915-2.2297 4.9915-4.987v-10.46757c0-2.5701 1.9933-4.74871 4.5487-4.85083 2.692-.10213 4.9237 2.05945 4.9237 4.73169v10.58671c0 2.7573 2.2317 4.987 4.9915 4.987v-15.45457c0-2.5701 1.9935-4.74871 4.5485-4.85083 2.692-.10213 4.924 2.05945 4.924 4.73169v10.58671c0 2.7573 2.232 4.987 4.991 4.987v-15.40353c-.017-5.32738-4.378-9.88887-9.727-9.88887zm-54.3805 12.8334c0 7.0806-5.7583 12.8335-12.8455 12.8335-7.0871 0-12.8454-5.7529-12.8454-12.8335 0-7.0805 5.7753-12.8334 12.8454-12.8334 7.0702 0 12.8455 5.7529 12.8455 12.8334zm-4.9917 0c0-4.32315-3.5265-7.8464-7.8538-7.8464-4.3272 0-7.8538 3.52325-7.8538 7.8464 0 4.3233 3.5266 7.8465 7.8538 7.8465 4.3273 0 7.8538-3.5232 7.8538-7.8465zm32.6758 0c0 7.0806-5.758 12.8335-12.8451 12.8335-7.0877 0-12.8458-5.7529-12.8458-12.8335 0-7.0805 5.7757-12.8334 12.8458-12.8334 7.0696 0 12.8451 5.7529 12.8451 12.8334zm-4.9915 0c0-4.32315-3.5264-7.8464-7.8536-7.8464-4.3273 0-7.8541 3.52325-7.8541 7.8464 0 4.3233 3.5268 7.8465 7.8541 7.8465 4.3272 0 7.8536-3.5232 7.8536-7.8465z",fill:"#0b5cff"})),cS=f.forwardRef(Dhe);function Rhe(){const{isAddonActive:t,zoomIntegration:e}=mt();if(!t("telemed")||e!=="yes")return i.jsx(gg,{to:"/setting",replace:!0});const n=ze(),s=t("telemed"),[a,l]=f.useState(!1),[o,c]=f.useState(!1),{register:d,handleSubmit:m,reset:u,control:h,watch:p,formState:{isDirty:g,errors:v},getValues:x}=en({defaultValues:{auth_type:"none",account_id:"",client_id:"",client_secret:"",enable_server_to_server:!1}}),y=p("enable_server_to_server"),{data:b,isLoading:k,error:w}=kn("settings","zoom-telemed/doctor-config",{},{enabled:s});f.useEffect(()=>{if(b?.data){const M=b.data,O=M.auth_type==="server-to-server",F=M.is_connected===!0,H={auth_type:M.auth_type,account_id:M.account_id||"",client_id:M.client_id||"",client_secret:M.client_secret||"",enable_server_to_server:O&&F};u(H)}},[b,u]);const{refetch:T}=kn("settings","zoom-telemed/authorize",{},{enabled:a}),{refetch:j}=kn("settings","zoom-telemed/disconnect",{},{enabled:s&&b?.data?.connection_status==="not_connected"}),D=un("settings","zoom-telemed/doctor-config"),_=un("settings","zoom-telemed/test-connection"),N=async M=>{const O=M.enable_server_to_server,F=b?.data?.is_google_meet_connected;if(!(O&&F&&!(await Ze.fire({title:r("Warning","kivicare-clinic-management-system"),text:r("Press Yes to save server to server oauth configuration and will disconnect Google Meet.","kivicare-clinic-management-system"),icon:"warning",showCancelButton:!0,confirmButtonText:r("Yes","kivicare-clinic-management-system"),cancelButtonText:r("No","kivicare-clinic-management-system")})).isConfirmed))try{l(!0),await D.mutateAsync({...M,auth_type:O?"server-to-server":"none"}),n.invalidateQueries(["settings","zoom-telemed/doctor-config"]),n.invalidateQueries(["config"]),Ze.fire({title:r("Success","kivicare-clinic-management-system"),text:r("Configuration saved successfully","kivicare-clinic-management-system"),icon:"success",confirmButtonText:r("OK","kivicare-clinic-management-system")})}catch(H){console.error("Update failed:",H),Ze.fire({title:r("Error","kivicare-clinic-management-system"),text:H?.response?.data?.message||r("Failed to save settings","kivicare-clinic-management-system"),icon:"error",confirmButtonText:r("OK","kivicare-clinic-management-system")})}finally{l(!1)}},A=async()=>{if(!(b?.data?.is_google_meet_connected&&!(await Ze.fire({title:r("Warning","kivicare-clinic-management-system"),text:r("Press yes to connect to Zoom. Connecting to Zoom will disconnect Google Meet.","kivicare-clinic-management-system"),icon:"warning",showCancelButton:!0,confirmButtonText:r("Yes","kivicare-clinic-management-system"),cancelButtonText:r("No","kivicare-clinic-management-system")})).isConfirmed))try{l(!0);const{data:O}=await T();window.location.href=O?.data?.redirect_url}catch(O){console.error("Connection failed:",O),alert(r("Failed to connect to Zoom. Please try again.","kivicare-clinic-management-system"))}finally{l(!1)}},P=async()=>{_.mutateAsync({...x(),auth_type:"server-to-server"}).then(M=>{M?.data?.success?Ze.fire({title:r("Test Zoom Configuration","kivicare-clinic-management-system"),text:r("Zoom configuration test successful!","kivicare-clinic-management-system"),icon:"success",confirmButtonText:r("OK","kivicare-clinic-management-system")}):Ze.fire({title:r("Test Zoom Configuration","kivicare-clinic-management-system"),text:r("Zoom configuration test failed. Please check your settings.","kivicare-clinic-management-system"),icon:"error",confirmButtonText:r("OK","kivicare-clinic-management-system")})}).catch(M=>{console.error("Test failed:",M),Ze.fire({title:r("Test Zoom Configuration","kivicare-clinic-management-system"),text:M?.response?.data?.data?.error||M?.message,icon:"error",confirmButtonText:r("OK","kivicare-clinic-management-system")})})},E=async()=>{if((await Ze.fire({title:r("Disconnect Zoom","kivicare-clinic-management-system"),message:r("Are you sure you want to disconnect your Zoom account?","kivicare-clinic-management-system"),confirmButtonText:r("Disconnect","kivicare-clinic-management-system"),cancelButtonText:r("Cancel","kivicare-clinic-management-system"),showCancelButton:!0,icon:"warning",confirmButtonVariant:"danger"})).isConfirmed)try{c(!0);const{data:O}=await j();n.invalidateQueries(["settings","zoom-telemed/doctor-config"])}catch(O){console.error("Disconnection failed:",O),alert(r("Failed to disconnect from Zoom. Please try again.","kivicare-clinic-management-system"))}finally{c(!1)}},I=()=>b?b?.data?.auth_type!=="oauth"?i.jsxs("div",{className:"mb-4",children:[i.jsx("h5",{className:"mb-3",children:r("Zoom Telemed Server To Server Oauth","kivicare-clinic-management-system")}),i.jsxs("form",{onSubmit:m(N),children:[i.jsx("div",{className:"mb-3 p-0 form-check form-switch",children:i.jsx(ye,{name:"enable_server_to_server",control:h,render:({field:M})=>i.jsxs("div",{className:"d-flex justify-content-between align-items-center gap-3",children:[i.jsx("label",{className:"form-check-label",htmlFor:"enableServerToServer",children:r("Zoom Telemed Server To Server Oauth Configuration","kivicare-clinic-management-system")}),i.jsx("input",{className:"form-check-input",type:"checkbox",id:"enableServerToServer",checked:M.value,onChange:O=>M.onChange(O.target.checked),disabled:a})]})})}),y&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"mb-3",children:[i.jsxs("label",{className:"form-label",children:[r("Account ID","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx("input",{type:"text",className:`form-control ${v.account_id?"is-invalid":""}`,placeholder:r("Enter Zoom Account ID","kivicare-clinic-management-system"),...d("account_id",{required:r("Account ID is required","kivicare-clinic-management-system")})}),v.account_id&&i.jsx("div",{className:"invalid-feedback",children:v.account_id.message}),i.jsx("div",{className:"form-text",children:r("Find this in your Zoom app credentials","kivicare-clinic-management-system")})]}),i.jsxs("div",{className:"mb-3",children:[i.jsxs("label",{className:"form-label",children:[r("Client ID","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx("input",{type:"text",className:`form-control ${v.client_id?"is-invalid":""}`,placeholder:r("Enter Client ID","kivicare-clinic-management-system"),...d("client_id",{required:r("Client ID is required","kivicare-clinic-management-system")})}),v.client_id&&i.jsx("div",{className:"invalid-feedback",children:v.client_id.message})]}),i.jsxs("div",{className:"mb-3",children:[i.jsxs("label",{className:"form-label",children:[r("Client Secret","kivicare-clinic-management-system")," ",i.jsx("span",{className:"text-danger",children:"*"})]}),i.jsx("input",{type:"password",className:`form-control ${v.client_secret?"is-invalid":""}`,placeholder:r("Enter Client Secret","kivicare-clinic-management-system"),...d("client_secret",{required:r("Client Secret is required","kivicare-clinic-management-system")})}),v.client_secret&&i.jsx("div",{className:"invalid-feedback",children:v.client_secret.message})]})]}),i.jsxs("div",{className:"d-flex gap-2",children:[i.jsx("button",{type:"submit",className:"btn btn-primary",disabled:a||!g,children:a?r("Saving...","kivicare-clinic-management-system"):r("Save Settings","kivicare-clinic-management-system")}),y&&i.jsx("button",{type:"button",className:"btn btn-outline-secondary",onClick:P,children:r("Test Zoom Config","kivicare-clinic-management-system")})]})]}),y&&i.jsxs("div",{className:"alert alert-info bg-info-subtle mt-4",children:[r("Your administrator has enabled server to server authentication.","kivicare-clinic-management-system"),i.jsx("br",{}),r("Meetings will be created using these credentials.","kivicare-clinic-management-system")]})]}):b?.data?.auth_type==="oauth"?i.jsxs("div",{className:"bg-body p-4 rounded",children:[i.jsx("h5",{className:"mb-3",children:r("Zoom Account Connection","kivicare-clinic-management-system")}),b?.data?.is_connected?i.jsxs("div",{className:"alert alert-success d-flex align-items-center justify-content-between",children:[i.jsxs("div",{children:[i.jsx("i",{className:"fas fa-check-circle me-2"}),r("Your Zoom account is connected","kivicare-clinic-management-system")]}),i.jsx("button",{className:"btn btn-sm btn-outline-danger",onClick:E,disabled:o,children:o?r("Disconnecting...","kivicare-clinic-management-system"):r("Disconnect","kivicare-clinic-management-system")})]}):i.jsxs("div",{className:"bg-warning-subtle p-3 rounded d-flex align-items-center justify-content-between",children:[i.jsxs("div",{children:[i.jsx("i",{className:"fas fa-exclamation-triangle me-2"}),r("Your Zoom account is not connected","kivicare-clinic-management-system")]}),i.jsx("button",{className:"btn btn-sm btn-warning",onClick:A,disabled:a,children:a?r("Connecting...","kivicare-clinic-management-system"):r("Connect Zoom Account","kivicare-clinic-management-system")})]}),i.jsxs("div",{className:"mt-3",children:[i.jsxs("p",{className:"mb-1",children:[i.jsx("strong",{children:r("Connection Status:","kivicare-clinic-management-system")})," ",b?.data?.connection_status==="not_connected"?r("Not Connected","kivicare-clinic-management-system"):r("Connected","kivicare-clinic-management-system")]}),i.jsx("p",{className:"mb-0 text-muted",children:b?.data?.is_connected?r("You can now create Zoom meetings directly from appointments","kivicare-clinic-management-system"):r("Connect your Zoom account to enable telemedicine features","kivicare-clinic-management-system")})]})]}):i.jsxs("div",{className:"alert alert-warning",children:[i.jsx(cS,{}),r("Zoom telemedicine is not currently enabled. Please contact your administrator.","kivicare-clinic-management-system")]}):null;return i.jsx("div",{className:"zoom-telemed-configuration",children:i.jsx("div",{className:"card",children:i.jsxs("div",{className:"card-body p-4",children:[i.jsxs("div",{className:"d-flex align-items-center mb-4",children:[i.jsx(cS,{width:70,className:"me-3"}),i.jsx("h4",{className:"mb-0",children:r("Telemedicine Settings","kivicare-clinic-management-system")})]}),k?i.jsxs("div",{className:"text-center py-4 border-start border-end",children:[i.jsx("div",{className:"spinner-border text-primary",role:"status",children:i.jsx("span",{className:"visually-hidden",children:"Loading..."})}),i.jsx("p",{className:"mt-2",children:r("Loading Zoom configuration...","kivicare-clinic-management-system")})]}):w?i.jsxs("div",{className:"bg-danger-subtle p-3 rounded d-flex align-items-center gap-1",children:[i.jsx("i",{className:"ph ph-exclamation-mark fs-4 me-2"}),r("Failed to load Zoom configuration:","kivicare-clinic-management-system")," ",w.message]}):I(),i.jsxs("div",{className:"mt-5",children:[i.jsx("h6",{className:"mb-3",children:r("Need help?","kivicare-clinic-management-system")}),i.jsxs("ul",{className:"list-group list-group-flush",children:[i.jsxs("li",{className:"list-group-item d-flex gap-3",children:[i.jsx("i",{className:"ph ph-question text-primary fs-4"}),i.jsxs("div",{children:[i.jsx("a",{href:"https://documentation.iqonic.design/kivicare-wordpress/kivicare-telemed-addon/documentation/configuration-telemed-addon/doctor-level-configuration/",className:"text-decoration-none",children:r("Zoom integration documentation","kivicare-clinic-management-system")}),i.jsx("p",{className:"mb-0 small text-muted",children:r("Learn how to set up and use Zoom telemedicine","kivicare-clinic-management-system")})]})]}),i.jsxs("li",{className:"list-group-item d-flex gap-3",children:[i.jsx("i",{className:"ph ph-video fs-4 text-primary"}),i.jsxs("div",{children:[i.jsx("a",{href:"https://documentation.iqonic.design/kivicare-wordpress/kivicare-telemed-addon/documentation/getting-started-telemed-addon/system-requirements-zoom-account-types/",className:"text-decoration-none",children:r("Zoom meeting requirements","kivicare-clinic-management-system")}),i.jsx("p",{className:"mb-0 small text-muted",children:r("System requirements for participants","kivicare-clinic-management-system")})]})]})]})]})]})})})}const ku={list:(t={})=>ve({endpoint:"push-templates",method:"GET",data:t}),get:t=>ve({endpoint:`push-templates/${t}`,method:"GET"}),save:t=>ve({endpoint:"push-templates",method:"POST",data:t}),setStatus:(t,e)=>ve({endpoint:`push-templates/${t}/status`,method:"POST",data:{enabled:e}}),sendTest:t=>ve({endpoint:"push-templates/test-notification",method:"POST",data:t})},Uc={all:["pushTemplates"],list:()=>[...Uc.all,"list"],detail:t=>[...Uc.all,"detail",t]},Phe=(t={})=>ft({queryKey:Uc.list(),queryFn:async()=>{const e=await ku.list();return e?.data??e??[]},...t}),Mhe=(t,e={})=>ft({queryKey:Uc.detail(t),queryFn:async()=>{const n=await ku.get(t);return n?.data??n??null},enabled:!!t,...e}),Ihe=(t={})=>{const e=ze();return Le({mutationFn:n=>ku.save(n),onSuccess:()=>{e.invalidateQueries({queryKey:Uc.list()})},...t})},Ohe=(t={})=>{const e=ze();return Le({mutationFn:({name:n,enabled:s})=>ku.setStatus(n,s),onSuccess:()=>{e.invalidateQueries({queryKey:Uc.list()})},...t})},Fhe=(t={})=>Le({mutationFn:e=>ku.sendTest(e),...t}),Lhe=()=>{const[t,e]=f.useState(!1),[n,s]=f.useState(!1),a=f.useRef(null),{isAddonActive:l}=mt(),o=l("api"),{data:c}=Sn(),d=c?.data?.hideUtilityLinks,{data:m,isLoading:u,error:h}=kn("settings","app-configuration",{},{enabled:o}),p=un("settings","app-configuration"),{register:g,handleSubmit:v,reset:x,formState:{errors:y,isDirty:b}}=en({mode:"onBlur",reValidateMode:"onChange",defaultValues:{serverKey:"",client_emaail:"",privat_key:"",project_id:"",server_client_id:""}}),{mutateAsync:k,isLoading:w}=Ohe({onSuccess:()=>{Se.success(r("Template saved","kivicare-clinic-management-system")),N()},onError:H=>{Se.error(r("Failed to update template status","kivicare-clinic-management-system"))}});f.useEffect(()=>{if(!o||!m?.status||!m?.data||n)return;const H=Object.fromEntries(Object.entries(m.data).filter(([G,z])=>z!=null&&z!==""));x(H),s(!0)},[m,x,o,n]);const T=[{key:"serverKey",label:r("Firebase Server Key","kivicare-clinic-management-system"),placeholder:r("Firebase Server Key","kivicare-clinic-management-system"),required:!0},{key:"server_client_id",label:r("Firebase Server Client Id","kivicare-clinic-management-system"),placeholder:r("Firebase Server Client Id","kivicare-clinic-management-system"),required:!0},{key:"client_emaail",label:r("Client Email","kivicare-clinic-management-system"),placeholder:r("Client Email","kivicare-clinic-management-system"),required:!0,pattern:{value:/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/,message:r("Please enter a valid email address","kivicare-clinic-management-system")}},{key:"privat_key",label:r("Private Key","kivicare-clinic-management-system"),placeholder:r("Private Key","kivicare-clinic-management-system"),required:!0},{key:"project_id",label:r("Project Id","kivicare-clinic-management-system"),placeholder:r("Project Id","kivicare-clinic-management-system"),required:!0}],j=async H=>{e(!0);try{const G=await p.mutateAsync(H);G.status!==!0?Ze.fire({icon:"error",title:r("Error","kivicare-clinic-management-system"),text:r(G.message,"kivicare-clinic-management-system"),confirmButtonText:r("Ok","kivicare-clinic-management-system")}):Ze.fire({icon:"success",title:r("Success","kivicare-clinic-management-system"),text:r(G.message,"kivicare-clinic-management-system"),confirmButtonText:r("Ok","kivicare-clinic-management-system")})}catch(G){console.error("Failed to save settings:",G)}finally{e(!1)}},{data:D=[],isLoading:_,refetch:N}=Phe({enabled:o}),A=hn(),P=H=>{A(`/setting/push-template/edit/${H}`)},E=Ln(),I=async(H,G)=>{a.current&&clearTimeout(a.current),a.current=setTimeout(async()=>{try{await k({name:H,enabled:G==="on"?"off":"on"})}catch(z){console.error("Failed to toggle template enabled",z)}},500)},M=()=>{A("/setting/push-template/test-notification")},O=[E.accessor(H=>H.title,{id:"title",header:()=>r("Name","kivicare-clinic-management-system"),cell:H=>i.jsx("div",{className:"text-wrap",children:i.jsx("span",{className:"p",children:H.getValue()})})}),E.accessor(H=>H.recipients,{id:"recipients",header:()=>r("Recipients","kivicare-clinic-management-system"),cell:H=>i.jsx("div",{className:"text-wrap text-center",children:i.jsx("span",{className:"p text-capitalize",children:(H.getValue()||[]).join(", ")})})}),E.accessor(H=>H.enabled,{id:"enabled",header:()=>r("Enabled","kivicare-clinic-management-system"),cell:H=>i.jsx(cn,{checked:H.getValue(),onChange:()=>I(H.row.original.name,H.getValue())})}),E.display({id:"actions",header:()=>r("Actions","kivicare-clinic-management-system"),cell:H=>i.jsx("button",{className:"btn btn-link p-0",onClick:()=>P(H.row.original.name),children:r("Manage","kivicare-clinic-management-system")})})];if(h){let H;typeof h=="string"?H=h:h?.response?.data?.message?H=h.response.data.message:h?.message?H=h.message:H=r("An unknown error occurred","kivicare-clinic-management-system"),Ze.fire({icon:"error",title:r("Error","kivicare-clinic-management-system"),text:r(H,"kivicare-clinic-management-system"),confirmButtonText:r("Ok","kivicare-clinic-management-system")})}const F=({title:H,fields:G,errors:z,register:ie})=>i.jsx("div",{className:"card",children:i.jsxs("div",{className:"card-body",children:[i.jsx("h6",{className:"mb-3",children:H}),i.jsx("div",{className:"row gy-4",children:G.map(W=>i.jsx("div",{className:"col-md-6",children:i.jsxs("div",{className:"mb-3",children:[i.jsxs("label",{htmlFor:W.key,className:"form-label",children:[W.label,W.required&&" *"]}),i.jsx("input",{type:"text",id:W.key,className:`form-control ${z[W.key]?"is-invalid":""}`,placeholder:W.placeholder,disabled:t,...ie(W.key,{required:W.required?r(`${W.label} is required`,"kivicare-clinic-management-system"):!1,pattern:W.pattern})}),z[W.key]&&i.jsx("div",{className:"invalid-feedback",children:z[W.key].message})]})},W.key))})]})});return u?i.jsx(xP,{}):i.jsx("div",{className:"tab-pane fade show active position-relative overflow-hidden z-0",id:"v-pills-app-configuration",role:"tabpanel","aria-labelledby":"v-pills-app-configuration-tab",tabIndex:"0",children:i.jsxs("div",{className:`app-configuration-setting${o?"":" p-4"}`,children:[!o&&i.jsx(di,{title:r("Available For Kivicare Flutter","kivicare-clinic-management-system"),text:r("This feature is available For Kivicare Flutter App users. Please upgrade to access this feature.","kivicare-clinic-management-system"),link:"https://codecanyon.net/item/kivicare-flutter-app-clinic-patient-management-system/30970616"}),i.jsxs("h6",{className:"setting-title mb-3",children:[r("App Configurations","kivicare-clinic-management-system")," ",d!=="on"&&i.jsx("a",{href:"https://apps.iqonic.design/docs/product/kivicare/clinic-admin/settings/#app-config",target:"_blank",rel:"noopener noreferrer",children:i.jsx("i",{className:"ph ph-question align-middle h5 text-primary"})})]}),o&&u&&i.jsx("div",{className:"d-flex justify-content-center align-items-center my-5",style:{height:"100dvh"},children:i.jsx("div",{className:"spinner-border text-primary",role:"status","aria-hidden":"true"})}),!u&&i.jsxs("form",{onSubmit:v(j),children:[i.jsx(F,{title:r("Firebase Cloud Messaging Configuration","kivicare-clinic-management-system"),fields:T,errors:y,register:g}),i.jsx("div",{className:"d-flex justify-content-end flex-wrap row-gap-2 column-gap-4 mb-5",children:i.jsx("button",{type:"submit",className:"btn btn-primary",disabled:t||!b,children:t?i.jsx("span",{className:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"}):r("Save","kivicare-clinic-management-system")})})]}),o&&i.jsxs("div",{className:"mt-4",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[i.jsx("h6",{className:"mb-0",children:r("Push Notification Templates","kivicare-clinic-management-system")}),i.jsx("button",{className:"btn btn-sm btn-primary",onClick:M,children:r("Send Test Notification","kivicare-clinic-management-system")})]}),i.jsx("div",{className:"table-responsive mb-3",children:i.jsx(wn,{data:D,columns:O,isLoading:_,moduleNamePlural:r("Templates","kivicare-clinic-management-system"),bordered:!0,responsive:!0,enableSelection:!1,pagination:null})})]})]})})},dS=()=>{const t=ze(),{name:e}=Yt(),n=hn(),[s,a]=f.useState(!1),l=!e,[o,c]=f.useState(l?{user:null,recipients:[],title:"",body:"",data:{},enabled:!0}:null),[d,m]=f.useState({}),[u,h]=f.useState([]),[p,g]=f.useState(null),{data:v,isLoading:x,error:y}=Mhe(e,{enabled:!!e}),b=Ihe({onSuccess:()=>{Ze.fire({icon:"success",title:r("Success","kivicare-clinic-management-system"),text:r("Template saved","kivicare-clinic-management-system")}).then(()=>n(-1))},onError:A=>{Ze.fire({icon:"error",title:r("Error","kivicare-clinic-management-system"),text:A?.message||r("Failed to save template","kivicare-clinic-management-system")})}}),{mutateAsync:k}=Fhe({onSuccess:()=>{Ze.fire({icon:"success",title:r("Success","kivicare-clinic-management-system"),text:r("Test notification sent successfully","kivicare-clinic-management-system")}).then(()=>n(-1))},onError:A=>{Ze.fire({icon:"error",title:r("Error","kivicare-clinic-management-system"),text:A?.message||r("Failed to send test notification","kivicare-clinic-management-system")})}});f.useEffect(()=>{if(v){const A=v.template||null;if(A){c({title:A.title||"",body:A.body||"",data:A.data||{},recipients:A.recipients||[],enabled:!!A.enabled});const P=v.dynamic_keys||v.dynamicKeys||[];h(Array.isArray(P)?P.map(E=>E.replace(/[{}]/g,"")):[])}}},[v]),f.useEffect(()=>{if(y){let A=y?.response?.data?.message||y?.message||r("Failed to load template","kivicare-clinic-management-system");Ze.fire({icon:"error",title:r("Error","kivicare-clinic-management-system"),text:A,confirmButtonText:r("Ok","kivicare-clinic-management-system")}).then(()=>n(-1))}},[y,n]);const w=A=>{navigator.clipboard.writeText(`{{${A}}}`),g(A),setTimeout(()=>{g(P=>P===A?null:P)},1500)},T=[{value:"patient",label:r("Patient","kivicare-clinic-management-system")},{value:"doctor",label:r("Doctor","kivicare-clinic-management-system")},{value:"receptionist",label:r("Receptionist","kivicare-clinic-management-system")},{value:"clinic",label:r("Clinic Admin","kivicare-clinic-management-system")}],j=()=>{const A={};return l&&!o?.user?.value&&(A.user=r("Selection is required","kivicare-clinic-management-system")),o?.recipients?.length||(A.recipients=r("Recipients is required","kivicare-clinic-management-system")),o?.title?.trim()||(A.title=r("Title is required","kivicare-clinic-management-system")),o?.body?.trim()||(A.body=r("Body is required","kivicare-clinic-management-system")),m(A),Object.keys(A).length===0},D=async()=>{if(j()){a(!0);try{const A={name:e,title:o.title||"",body:o.body||"",data:o.data||{},recipients:o.recipients||[],enabled:!!o.enabled};await b.mutateAsync(A)}catch(A){console.error("Failed to save push template",A)}finally{a(!1)}}},_=async()=>{if(j()){a(!0);try{await k({userId:o.user?.value,recipients:Array.isArray(o.recipients)?o?.recipients?.[0]:o.recipients,title:o.title,body:o.body,data:o.data||"",enabled:!!o.enabled})}catch(A){console.error("Failed to send test notification",A)}finally{a(!1)}}},N=f.useCallback(async({page:A,per_page:P,search:E,recipient_type:I})=>{if(!I)return{data:[],pagination:{has_more:!1}};let M={page:A,per_page:P,search:E};I==="patient"?(M.dataType="staticData",M.staticDataType="patients"):I==="doctor"?(M.dataType="staticData",M.staticDataType="doctors"):I==="receptionist"?(M.dataType="staticData",M.staticDataType="users",M.role=cc()):I==="clinic"&&(M.dataType="clinicList");try{return await t.fetchQuery({queryKey:pt.list(M),queryFn:()=>Dt.getStaticData(M),staleTime:3e5})}catch(O){return console.error("Error loading test users:",O),{data:[],pagination:{has_more:!1}}}},[t]);return x&&!l?i.jsx(of,{}):!o&&!l?null:i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"manage-push-notification-template",children:i.jsxs("div",{className:"d-flex align-items-center justify-content-between gap-3 mb-3",children:[i.jsx("h6",{className:"setting-title mb-0",children:l?r("Send Test Notification","kivicare-clinic-management-system"):`${r("Edit Push Template","kivicare-clinic-management-system")} : ${e}`}),i.jsx("div",{className:"d-flex gap-2",children:i.jsx("button",{className:"btn btn-sm btn-secondary",onClick:()=>n(-1),children:r("Back","kivicare-clinic-management-system")})})]})}),i.jsx("div",{className:"card mb-4",children:i.jsxs("div",{className:"card-body",children:[u.length>0&&i.jsxs("div",{className:"form-group mb-3",children:[i.jsx("label",{className:"form-label h6",children:r("Template Dynamic Keys List (click to copy)","kivicare-clinic-management-system")}),i.jsx("div",{className:"d-flex flex-wrap align-items-center gap-3",children:u.map(A=>i.jsx(Qe,{placement:"top",overlay:P=>i.jsx(ut,{...P,children:p===A?r("Copied","kivicare-clinic-management-system"):r("Click to Copy","kivicare-clinic-management-system")}),children:i.jsxs("button",{className:"btn btn-primary btn-sm d-flex align-items-center gap-1",onClick:()=>w(A),children:[A," ",i.jsx("i",{className:"ph ph-copy"})]})},A))})]}),i.jsxs("div",{className:"row gy-3",children:[l&&i.jsxs("div",{className:"col-md-6",children:[i.jsxs("label",{className:"form-label",children:[r("Recipients","kivicare-clinic-management-system")," *"]}),i.jsx(ct,{options:T,value:T.find(A=>o?.recipients?.[0]===A.value)||null,onChange:A=>c(P=>({...P,recipients:A?[A.value]:[],user:null})),className:"react-select-box",classNamePrefix:"react-select",styles:{menuPortal:A=>({...A,zIndex:9999})}}),d.recipients&&i.jsx("div",{className:"invalid-feedback d-block",children:d.recipients})]}),l&&i.jsxs("div",{className:"col-md-6",children:[i.jsxs("label",{className:"form-label",children:[(()=>{const A=o?.recipients?.[0];return A==="patient"?r("Select Patient","kivicare-clinic-management-system"):A==="doctor"?r("Select Doctor","kivicare-clinic-management-system"):A==="receptionist"?r("Select Receptionist","kivicare-clinic-management-system"):A==="clinic"?r("Select Clinic","kivicare-clinic-management-system"):r("Select User","kivicare-clinic-management-system")})()," *"]}),i.jsx(rn,{id:"test-user",loadOptions:N,value:o?.user||null,onChange:A=>c(P=>({...P,user:A})),dependencies:{recipient_type:o?.recipients?.[0]},placeholder:r("Select search result","kivicare-clinic-management-system"),className:`react-select-box ${d.user?"is-invalid":""}`,classNamePrefix:"react-select",isDisabled:!o?.recipients?.[0]},`test-user-${o?.recipients?.[0]}`),d.user&&i.jsx("div",{className:"invalid-feedback d-block",children:d.user})]}),i.jsxs("div",{className:"col-md-6",children:[i.jsxs("label",{className:"form-label",children:[r("Title","kivicare-clinic-management-system")," *"]}),i.jsx("input",{type:"text",className:`form-control ${d.title?"is-invalid":""}`,placeholder:r("Enter notification title","kivicare-clinic-management-system"),value:o?.title||"",onChange:A=>c(P=>({...P,title:A.target.value}))}),d.title&&i.jsx("div",{className:"invalid-feedback d-block",children:d.title})]}),i.jsxs("div",{className:"col-12",children:[i.jsxs("label",{className:"form-label",children:[r("Body","kivicare-clinic-management-system")," *"]}),i.jsx("textarea",{className:`form-control ${d.body?"is-invalid":""}`,rows:4,placeholder:r("Enter notification body","kivicare-clinic-management-system"),value:o?.body||"",onChange:A=>c(P=>({...P,body:A.target.value}))}),d.body&&i.jsx("div",{className:"invalid-feedback d-block",children:d.body})]})]})]})}),i.jsx("div",{className:"d-flex justify-content-end mt-4",children:i.jsx("button",{className:"btn btn-sm btn-primary",onClick:l?_:D,disabled:s,children:s?i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),l?r("Sending...","kivicare-clinic-management-system"):r("Saving...","kivicare-clinic-management-system")]}):l?r("Send Notification","kivicare-clinic-management-system"):r("Save Template","kivicare-clinic-management-system")})})]})},$he=()=>{const{isAddonActive:t}=mt(),e=t("kiviPro"),{control:n,handleSubmit:s,watch:a,reset:l,errors:o}=en({defaultValues:{only_same_day_book:!1,post_book:"365",pre_book:"0",fileUploadEnabled:!1,emailReminder:!1,emailReminderHours:"24",smsReminder:!1,whatsappReminder:!1,appointmentDescription:!1,showPatientInfo:!1,cancellationBufferEnabled:!1,cancellationBufferHours:"365"}}),[c,d]=f.useState(!1),[m,u]=f.useState(""),h=a("only_same_day_book"),p=a("emailReminder"),g=a("smsReminder"),v=a("whatsappReminder"),x=a("cancellationBufferEnabled"),y=un("settings","appointment-setting"),{data:b,isLoading:k,error:w}=kn("settings","appointment-setting");f.useEffect(()=>{if(b){const D=P=>!!["true",!0,1,"1","yes","on"].includes(P),_=["only_same_day_book","fileUploadEnabled","emailReminder","smsReminder","whatsappReminder","appointmentDescription","showPatientInfo","cancellationBufferEnabled"],N=b.data||b,A={...N};_.forEach(P=>{A[P]=D(N[P])}),l(P=>({...P,...A}))}},[b,l]);const T=async D=>{const _=parseInt(D.post_book,10),N=parseInt(D.pre_book,10);if(!D.only_same_day_book&&!isNaN(N)&&!isNaN(_)&&N>_){u("Booking Close Before cannot be greater than Booking Open Before."),Ze.fire({icon:"error",title:r("Invalid Settings","kivicare-clinic-management-system"),text:r('"Booking Close Before (in Days)" cannot be greater than "Booking Open Before (in Days)".',"kivicare-clinic-management-system"),confirmButtonText:r("Ok","kivicare-clinic-management-system")});return}d(!0),u("");try{const P=await y.mutateAsync(D);if(d(!1),!P.status){u(P.message),Ze.fire({icon:"error",title:r("Error","kivicare-clinic-management-system"),text:r(P.message,"kivicare-clinic-management-system"),confirmButtonText:r("Ok","kivicare-clinic-management-system")});return}Ze.fire({icon:"success",title:r("Success","kivicare-clinic-management-system"),text:r(P.message,"kivicare-clinic-management-system"),confirmButtonText:r("Ok","kivicare-clinic-management-system")})}catch(P){d(!1),console.error("Failed to save settings:",P),Ze.fire({icon:"error",title:r("Error","kivicare-clinic-management-system"),text:r("An unexpected error occurred","kivicare-clinic-management-system"),confirmButtonText:r("Ok","kivicare-clinic-management-system")})}};if(w){const D=typeof w=="string"?w:w?.response?.data?.message||w?.message||r("An unknown error occurred","kivicare-clinic-management-system");Ze.fire({icon:"error",title:r("Error","kivicare-clinic-management-system"),text:r(D,"kivicare-clinic-management-system"),confirmButtonText:r("Ok","kivicare-clinic-management-system")})}const j=({title:D,children:_,className:N=""})=>i.jsx("div",{className:`card ${N}`,children:i.jsxs("div",{className:"card-body p-3",children:[i.jsx("h6",{className:"mb-3 fw-semibold",children:r(D,"kivicare-clinic-management-system")}),_]})});return i.jsx("form",{onSubmit:s(T),className:"appointment-setting-form",children:i.jsx("div",{className:"tab-pane fade show active",id:"v-pills-appointment-setting",role:"tabpanel","aria-labelledby":"v-pills-appointment-settings-tab",tabIndex:"0",children:i.jsxs("div",{className:"appointment-setting",children:[i.jsxs("h6",{className:"setting-title mb-3",children:[r("Restrict Advance Appointment Booking","kivicare-clinic-management-system"),i.jsx("a",{href:"https://documentation.iqonic.design/kivicare-wordpress/kivicare-lite/documentation/settings-configuration/appointment-settings/",target:"_blank",rel:"noopener noreferrer",className:"ms-1",children:i.jsx("i",{className:"ph ph-question align-middle h5 text-primary"})})]}),k&&i.jsx(_P,{}),!k&&i.jsxs(i.Fragment,{children:[i.jsxs(j,{children:[i.jsx(ye,{name:"only_same_day_book",control:n,render:({field:D})=>i.jsx(cn,{label:r("Allow Same Day Booking Only.","kivicare-clinic-management-system"),checked:D.value,onChange:D.onChange,disabled:c,error:o?.only_same_day_book})}),i.jsxs("div",{className:"row gy-4 mt-2",children:[i.jsx("div",{className:"col-lg-6 mt-2",children:i.jsx(ye,{name:"post_book",control:n,render:({field:D})=>i.jsx(Ht,{type:"number",label:r("Booking Open Before (in Days)","kivicare-clinic-management-system"),placeholder:r("365","kivicare-clinic-management-system"),value:D.value,onChange:D.onChange,error:o?.post_book,isDisable:h})})}),i.jsx("div",{className:"col-lg-6 mt-2",children:i.jsx(ye,{name:"pre_book",control:n,render:({field:D})=>i.jsx(Ht,{type:"number",label:r("Booking Close Before (in Days)","kivicare-clinic-management-system"),placeholder:r("0","kivicare-clinic-management-system"),value:D.value,onChange:D.onChange,error:o?.pre_book,isDisable:h})})})]}),i.jsxs("span",{className:"font-size-14 mt-2",children:[i.jsxs("span",{className:"text-primary fw-medium",children:[r("Note","kivicare-clinic-management-system"),":"]})," ",r("For example, Booking Open Before: 60 days, Booking Close Before: 7 days, As consideration for the current date, The appointment booking opens 60 days ago and closed 7 days ago.","kivicare-clinic-management-system")]})]}),i.jsx(j,{children:i.jsx(ye,{name:"fileUploadEnabled",control:n,render:({field:D})=>i.jsx(cn,{label:r("Appointment File Upload Setting.","kivicare-clinic-management-system"),checked:D.value,onChange:D.onChange,disabled:c,error:o?.fileUploadEnabled})})}),i.jsxs(j,{title:r("Appointment Reminder","kivicare-clinic-management-system"),children:[i.jsx(ye,{name:"emailReminder",control:n,render:({field:D})=>i.jsx(cn,{label:r("Email Reminder.","kivicare-clinic-management-system"),checked:D.value,onChange:D.onChange,className:"mb-2",disabled:c,error:o?.emailReminder})}),e&&i.jsx(ye,{name:"smsReminder",control:n,render:({field:D})=>{const _=b?.data?.isTwilioSmsConfigured??b?.isTwilioSmsConfigured;return i.jsx(cn,{label:r("SMS Reminder (Twilio)","kivicare-clinic-management-system"),checked:D.value,onChange:D.onChange,disabled:c||!_,error:o?.smsReminder,className:"mb-2"})}}),e&&i.jsx(ye,{name:"whatsappReminder",control:n,render:({field:D})=>{const _=b?.data?.isTwilioWhatsAppConfigured??b?.isTwilioWhatsAppConfigured;return i.jsxs("div",{children:[i.jsx(cn,{label:r("WhatsApp Reminder (Twilio)","kivicare-clinic-management-system"),checked:D.value,onChange:D.onChange,disabled:c||!_,error:o?.whatsappReminder,className:"mb-2"}),i.jsxs("small",{className:"text-muted d-block mb-1",children:[i.jsx("span",{className:"text-primary",children:r("Note :","kivicare-clinic-management-system")})," ",r("When you configure your Twilio account for SMS or WhatsApp, you can enable SMS and WhatsApp reminders.","kivicare-clinic-management-system")]})]})}}),(p||g||v)&&i.jsx(ye,{name:"emailReminderHours",control:n,render:({field:D})=>i.jsx(Ht,{type:"number",label:r("Select Hours","kivicare-clinic-management-system"),placeholder:r("365","kivicare-clinic-management-system"),value:D.value,onChange:D.onChange,error:o?.emailReminderHours,className:"mb-2"})})]}),i.jsx(j,{title:r("Appointment Setting","kivicare-clinic-management-system"),children:i.jsx(ye,{name:"appointmentDescription",control:n,render:({field:D})=>i.jsx(cn,{label:r("Appointment Description","kivicare-clinic-management-system"),checked:D.value,onChange:D.onChange,disabled:c,error:o?.appointmentDescription,className:"mb-2"})})}),i.jsxs(j,{title:r("Appointment Cancellation Buffer","kivicare-clinic-management-system"),children:[i.jsx("span",{className:"font-size-14",children:r("To prevent appointments from getting canceled too close to the appointment time by patients, you can set a cancellation buffer.","kivicare-clinic-management-system")}),i.jsx(ye,{name:"cancellationBufferEnabled",control:n,render:({field:D})=>i.jsx(cn,{label:r("Enable Cancellation Buffer","kivicare-clinic-management-system"),checked:D.value,onChange:D.onChange,disabled:c,error:o?.cancellationBufferEnabled,className:"mt-3"})}),x&&i.jsx(ye,{name:"cancellationBufferHours",control:n,render:({field:D})=>i.jsx(Ht,{type:"number",label:r("Select Hours","kivicare-clinic-management-system"),placeholder:r("e.g. 24","kivicare-clinic-management-system"),value:D.value,onChange:D.onChange,error:o?.cancellationBufferHours})})]}),i.jsx("div",{className:"d-flex justify-content-end gap-4 mb-5",children:i.jsx("button",{type:"submit",className:"btn btn-primary",children:r("Save","kivicare-clinic-management-system")})})]})]})})})},pb=(t,e=null,n=0)=>{let s=[];return t.forEach(a=>{const l=a.id||`kc-uid-${Math.random().toString(36).slice(2)}`,o=a.type||(a.childrens&&a.childrens.length>0?"parent":"route");s.push({...a,id:l,parentId:e,level:n,type:o,iconClass:a.iconClass||"",routeClass:a.routeClass||`custom_${l}`}),a.childrens&&a.childrens.length>0&&(s=s.concat(pb(a.childrens,l,n+1)))}),s},Bhe=t=>{const e={};t.forEach(s=>{const{isDefault:a,level:l,parentId:o,id:c,...d}=s;e[s.id]={...d,type:s.type,label:s.label,link:s.link||"",iconClass:s.iconClass||"",routeClass:s.routeClass,childrens:[]}});const n=[];return t.forEach(s=>{s.parentId&&e[s.parentId]?e[s.parentId].childrens.push(e[s.id]):n.push(e[s.id])}),n},qhe=t=>{const e=[];t.forEach(n=>{for(;e.length>0&&e[e.length-1].level>=n.level;)e.pop();n.parentId=e.length>0?e[e.length-1].id:null,e.push(n)})},cI=({item:t,onChange:e,onDelete:n})=>{const{attributes:s,listeners:a,setNodeRef:l,transform:o,transition:c,isDragging:d}=Yw({id:t.id}),m={transform:Wa.Transform.toString(o),transition:c,opacity:d?0:1,background:"transparent",paddingBlock:"10px",display:"flex",alignItems:"center",borderBottom:"1px var(--bs-border-style) var(--bs-border-color)"},u=t.type==="group",h=t.isDefault;return i.jsx("div",{ref:l,style:m,...s,children:i.jsxs("div",{className:"row",style:{width:"100%"},children:[i.jsx("div",{className:"col-md-1 d-flex align-items-center justify-content-center",children:i.jsx("i",{className:"ph ph-hand-grabbing",style:{cursor:"grab"},...a})}),i.jsx("div",{className:"col-md-3",children:i.jsx("input",{type:"text",className:"form-control",value:t.label,onChange:p=>e(t.id,"label",p.target.value),style:{fontWeight:u?"bold":"normal"},disabled:h})}),i.jsx("div",{className:"col-md-4",children:!u&&i.jsx("input",{type:"text",className:"form-control",value:t.link,onChange:p=>e(t.id,"link",p.target.value),disabled:h})}),i.jsx("div",{className:"col-md-3",children:!u&&i.jsx("input",{type:"text",className:"form-control",placeholder:"ph ph-icon-name",value:t.iconClass,onChange:p=>e(t.id,"iconClass",p.target.value)})}),i.jsx("div",{className:"col-md-1 d-flex align-items-center",children:!h&&i.jsx("button",{className:"btn btn-link text-danger fs-5 p-0",onClick:()=>n(t.id),children:i.jsx("i",{className:"ph ph-trash"})})})]})})},Hhe=({allItems:t,onChange:e,onDelete:n,activeItem:s,activeSubtreeIds:a,placeholderIndex:l,placeholderLevel:o})=>{let c=t;s&&(c=c.filter(m=>m.id!==s.id&&!a.includes(m.id)));const d=c.map(m=>m.id);return i.jsx(Gw,{items:d,strategy:tM,children:c.reduce((m,u,h)=>(l===h&&m.push(i.jsx("div",{style:{marginLeft:o*22,height:"2px",background:"dodgerblue",marginBottom:"10px"}},`placeholder-${h}`)),m.push(i.jsx("div",{style:{marginLeft:u.level*22},children:i.jsx(cI,{item:u,onChange:e,onDelete:n})},u.id)),l===c.length&&h===c.length-1&&m.push(i.jsx("div",{style:{marginLeft:o*22,height:"2px",background:"dodgerblue",marginBottom:"10px"}},"placeholder-end")),m),[])})},zhe=()=>{const{isAddonActive:t}=mt(),e=t("kiviPro"),{data:n,isLoading:s}=kn("settings","sidebar-setting",{},{enabled:e}),a=un("settings","sidebar-setting"),{data:l}=Sn(),o=l?.data?.hideUtilityLinks,[c,d]=f.useState([]),[m,u]=f.useState({}),[h,p]=f.useState({}),[g,v]=f.useState("administrator"),[x,y]=f.useState(!1),[b,k]=f.useState(null),[w,T]=f.useState(null),[j,D]=f.useState([]),[_,N]=f.useState(null),[A,P]=f.useState(null);f.useEffect(()=>{if(!n?.status||!n?.data?.data)return;const ae=Object.keys(n.data.data),U=ae.map(he=>({id:he,label:r(he.replace("_"," ").replace(/\b\w/g,le=>le.toUpperCase()),"kivicare-clinic-management-system"),title:r(he.replace("_"," ").replace(/\b\w/g,le=>le.toUpperCase()),"kivicare-clinic-management-system")}));d(U);const X={},J={};ae.forEach(he=>{const le=n.data.data[he].current,ee=n.data.data[he].default,me=pb(le),K=pb(ee),re=new Set(K.map(oe=>oe.routeClass));X[he]=me.map(oe=>({...oe,isDefault:re.has(oe.routeClass)})),J[he]=K.map(oe=>({...oe,isDefault:!0}))}),u(X),p(J),v(ae[0]||"administrator")},[n]);const E=PP(Qh(WP),Qh(KP),Qh(Hw)),I=(ae,U,X)=>{u(J=>({...J,[g]:J[g].map(he=>he.id===ae?{...he,[U]:X}:he)}))},M=ae=>{u(U=>{const X=[...U[g]],J=X.findIndex(me=>me.id===ae);if(J===-1||X[J].isDefault)return U;const he=X[J].level;let le=J+1;for(;le<X.length&&X[le].level>he;)le++;const ee=[...X.slice(0,J),...X.slice(le)];return{...U,[g]:ee}})},O=()=>{const ae=`kc-uid-${Math.random().toString(36).slice(2)}`,U={id:ae,type:"group",label:"New Section",link:"",iconClass:"",routeClass:`custom_group_${ae}`,parentId:null,level:0,isDefault:!1};u(X=>({...X,[g]:[...X[g],U]}))},F=()=>{const ae=`kc-uid-${Math.random().toString(36).slice(2)}`,U={id:ae,type:"route",label:"New Item",link:"/",iconClass:"ph ph-question",routeClass:`custom_route_${ae}`,parentId:null,level:0,isDefault:!1};u(X=>({...X,[g]:[...X[g],U]}))},H=()=>{Ze.fire({title:r("Are you sure?","kivicare-clinic-management-system"),text:r("Are you sure you want to reset to default positions? All customizations will be lost.","kivicare-clinic-management-system"),icon:"warning",showCancelButton:!0,confirmButtonText:r("Yes, reset it!","kivicare-clinic-management-system"),cancelButtonText:r("No, cancel!","kivicare-clinic-management-system")}).then(ae=>{ae.isConfirmed&&(y(!0),a.mutateAsync({type:"settings",subType:"sidebar-setting",settings:{reset:!0,type:g}}).then(async U=>{U?.status?(u(X=>({...X,[g]:h[g]})),await Ze.fire({icon:"success",title:r("Reset successful!","kivicare-clinic-management-system")})):Ze.fire({icon:"error",title:r("Failed to reset","kivicare-clinic-management-system"),text:U?.message||"Unknown error"})}).catch(U=>{Ze.fire({icon:"error",title:r("Failed to reset","kivicare-clinic-management-system"),text:U.message})}).finally(()=>{y(!1)}))})},G=ae=>{const U=ae.active.id,X=m[g].findIndex(ee=>ee.id===U),J=m[g][X];T(J);let he=[],le=X+1;for(;le<m[g].length&&m[g][le].level>J.level;)he.push(m[g][le].id),le++;D(he),N(null),P(null)},z=(ae,U)=>{const{active:X,over:J}=ae;if(!J||X.id===J.id)return null;const he=U.findIndex(Q=>Q.id===J.id);if(he===-1)return null;const le=ae.active.rect.current.translated,ee=ae.over.rect,me=U[he],K=le.top>ee.top+ee.height/2;let re=he+(K?1:0);const oe=le.left-ee.left;let R=me.level+Math.round(oe/22);R=Math.max(0,R);const te=re>0?U[re-1]:null,ne=re<U.length?U[re]:null;let Y=te?te.type==="group"?te.level:te.level+1:0,q=0;ne&&ne.level>Y&&(q=ne.level);let B=Math.max(q,Math.min(R,Y));w.type==="group"&&(B=0);let se=null;if(B>0&&te){let Q=te;for(;Q&&Q.level>=B;)Q=U.find(pe=>pe.id===Q.parentId);Q&&Q.level===B-1?se=Q.id:(B=Y,se=te.parentId)}return{newIndex:re,newDepth:B,newParentId:se}},ie=ae=>{if(!w)return;const U=m[g].filter(J=>J.id!==w.id&&!j.includes(J.id)),X=z(ae,U);if(!X){N(null),P(null);return}N(X.newIndex),P(X.newDepth)},W=ae=>{if(!w)return;const U=m[g].filter(oe=>oe.id!==w.id&&!j.includes(oe.id)),X=z(ae,U);if(N(null),P(null),T(null),D([]),!X)return;const{newIndex:J,newDepth:he,newParentId:le}=X,ee={...w,level:he,parentId:le},me=m[g].filter(oe=>j.includes(oe.id));let K=[...U.slice(0,J),ee,...me,...U.slice(J)];qhe(K),K=K.map(oe=>oe.isDefault&&oe.routeClass!=="patient_encounter_list"&&oe.routeClass!=="encounter_template"?{...oe,parentId:null,level:0}:oe);const re=new Set(K.map(oe=>oe.parentId).filter(oe=>oe!==null));K.forEach(oe=>{re.has(oe.id)?(oe.type==="route"||oe.type==="href")&&(oe.type="parent"):oe.type==="parent"&&!oe.isDefault&&(oe.type="route")}),u(oe=>({...oe,[g]:K}))},ge=async()=>{y(!0),k(null);try{const ae=Bhe(m[g]),U=await a.mutateAsync({type:"settings",subType:"sidebar-setting",settings:{type:g,data:ae}});if(!U?.status)throw new Error(U?.message||"Save failed");await Ze.fire({icon:"success",title:r("Settings saved successfully!","kivicare-clinic-management-system"),confirmButtonText:r("OK","kivicare-clinic-management-system")})}catch(ae){k(ae.message),Ze.fire({icon:"error",title:r("Failed to save settings","kivicare-clinic-management-system"),text:ae.message})}finally{y(!1)}};return s?i.jsx(EP,{}):i.jsx("div",{children:i.jsx("div",{className:"tab-pane fade show active position-relative overflow-hidden z-0",id:"v-pills-sidebar-setting",children:i.jsxs("div",{className:`sidebar-setting${e?"":" p-4"}`,children:[!e&&i.jsx(di,{title:r("Available For Kivicare Pro","kivicare-clinic-management-system"),link:"https://codecanyon.net/item/kivicare-pro-clinic-patient-management-system-ehr-addon/30690654?s_rank=3"}),i.jsxs("h6",{className:"setting-title mb-3",children:[r("Sidebar Settings","kivicare-clinic-management-system")," ",o!=="on"&&i.jsx("a",{href:"https://documentation.iqonic.design/kivicare-wordpress/kivicare-pro/documentation-kivicare-pro/configuration-kivi-pro/sidebar-settings/",target:"_blank",rel:"noopener noreferrer",children:i.jsx("i",{className:"ph ph-question align-middle h5 text-primary"})})]}),i.jsx("ul",{className:"nav nav-pills nav-pill-card mb-4",children:c.map(ae=>i.jsx("li",{className:"nav-item",children:i.jsx("button",{className:`nav-link ${g===ae.id?"active":""}`,onClick:()=>v(ae.id),children:ae.label})},ae.id))}),i.jsx("div",{className:"d-flex justify-content-end mb-3",children:i.jsxs("div",{children:[i.jsx("button",{className:"btn btn-primary me-2",onClick:O,children:r("Add Section","kivicare-clinic-management-system")}),i.jsx("button",{className:"btn btn-primary me-2",onClick:F,children:r("Add Item","kivicare-clinic-management-system")})]})}),c.map(ae=>i.jsxs("div",{style:{display:g===ae.id?"block":"none"},children:[i.jsxs("div",{className:"sidebar-items bg-gray-900",children:[i.jsxs("div",{className:"row mb-2 bg-primary mx-0",children:[i.jsx("div",{className:"col-md-1  d-flex justify-content-center align-items-center",children:i.jsx("div",{className:" rounded px-3 py-2",children:i.jsx("h6",{className:"text-white m-0",children:r("Drag","kivicare-clinic-management-system")})})}),i.jsx("div",{className:"col-md-3 d-flex justify-content-center align-items-center",children:i.jsx("div",{className:" rounded px-3 py-2",children:i.jsx("h6",{className:"text-white m-0",children:r("Label","kivicare-clinic-management-system")})})}),i.jsx("div",{className:"col-md-4 d-flex justify-content-center align-items-center",children:i.jsx("div",{className:" rounded px-3 py-2",children:i.jsx("h6",{className:"text-white m-0",children:r("URL","kivicare-clinic-management-system")})})}),i.jsx("div",{className:"col-md-3 d-flex justify-content-center align-items-center",children:i.jsx("div",{className:" rounded px-3 py-2",children:i.jsx("h6",{className:"text-white m-0",children:r("Icon","kivicare-clinic-management-system")})})}),i.jsx("div",{className:"col-md-1 d-flex justify-content-center align-items-center",children:i.jsx("div",{className:" rounded px-3 py-2",children:i.jsx("h6",{className:"text-white m-0",children:r("Action","kivicare-clinic-management-system")})})})]}),i.jsxs(Ww,{sensors:E,collisionDetection:MP,onDragStart:G,onDragOver:ie,onDragEnd:W,children:[i.jsx(Hhe,{allItems:m[ae.id]||[],onChange:I,onDelete:M,activeItem:w,activeSubtreeIds:j,placeholderIndex:_,placeholderLevel:A}),i.jsx(eM,{dropAnimation:null,children:w?i.jsx(cI,{item:w,onChange:()=>{},onDelete:()=>{}}):null})]})]}),i.jsx("div",{className:"d-flex justify-content-end mt-3",children:i.jsxs("div",{children:[i.jsx("button",{className:"btn btn-secondary me-2",onClick:H,disabled:x,children:r("Reset to Default","kivicare-clinic-management-system")}),i.jsx("button",{className:"btn btn-primary",onClick:ge,disabled:x,children:x?r("Saving...","kivicare-clinic-management-system"):r("Save","kivicare-clinic-management-system")})]})}),b&&i.jsx("div",{className:"alert alert-danger mt-3",children:b})]},ae.id))]})})})},Vhe=()=>{const{data:t,isLoading:e,refetch:n}=kn("settings","google-calendar-integration"),s=un("settings","google-calendar-integration/connect"),a=un("settings","google-calendar-integration/disconnect"),[l,o]=He.useState(!1),c=t?.connected||!1;f.useEffect(()=>{const u=new URLSearchParams(window.location.search),h=window.location.hash;if(u.get("google_calendar_connected")==="1"&&Ze.fire({icon:"success",title:r("Success","kivicare-clinic-management-system"),text:r("Google Calendar connected successfully!","kivicare-clinic-management-system"),confirmButtonText:r("OK","kivicare-clinic-management-system")}).then(()=>{window.history.replaceState({},document.title,window.location.pathname+h),n()}),u.get("google_calendar_error")==="1"){const p=u.get("error_code")||"unknown";let g=r("An error occurred during Google Calendar connection","kivicare-clinic-management-system");switch(p){case"oauth_cancelled":g=r("Google Calendar connection was cancelled","kivicare-clinic-management-system");break;case"invalid_callback":g=r("Invalid callback parameters received","kivicare-clinic-management-system");break;case"invalid_state":g=r("Invalid authentication state","kivicare-clinic-management-system");break;case"state_mismatch":g=r("Authentication state verification failed","kivicare-clinic-management-system");break;case"auth_failed":g=r("Failed to obtain Google Calendar authorization","kivicare-clinic-management-system");break;case"processing_error":g=r("Error processing Google Calendar connection","kivicare-clinic-management-system");break;default:g=r("An unknown error occurred during Google Calendar connection","kivicare-clinic-management-system")}Ze.fire({icon:"error",title:r("Error","kivicare-clinic-management-system"),text:g,confirmButtonText:r("OK","kivicare-clinic-management-system")}).then(()=>{window.history.replaceState({},document.title,window.location.pathname+h)})}},[n]);const d=async()=>{o(!0);try{const u=await s.mutateAsync({});u.url?(sessionStorage.setItem("kc_oauth_in_progress","1"),window.location.href=u.url):Ze.fire({icon:"error",title:r("Error","kivicare-clinic-management-system"),text:r("Failed to get authentication URL","kivicare-clinic-management-system"),confirmButtonText:r("OK","kivicare-clinic-management-system")})}catch(u){console.error("Connection error:",u);let h=r("An error occurred during connection","kivicare-clinic-management-system");u?.message?h=u.message:u?.response?.data?.message&&(h=u.response.data.message),Ze.fire({icon:"error",title:r("Error","kivicare-clinic-management-system"),text:h,confirmButtonText:r("OK","kivicare-clinic-management-system")})}finally{o(!1)}},m=async()=>{o(!0);try{await a.mutateAsync({}),Ze.fire({icon:"success",title:r("Success","kivicare-clinic-management-system"),text:r("Google Calendar disconnected successfully!","kivicare-clinic-management-system"),confirmButtonText:r("OK","kivicare-clinic-management-system")}),n()}catch(u){console.error("Disconnection error:",u);let h=r("An error occurred during disconnection","kivicare-clinic-management-system");u?.message?h=u.message:u?.response?.data?.message&&(h=u.response.data.message),Ze.fire({icon:"error",title:r("Error","kivicare-clinic-management-system"),text:h,confirmButtonText:r("OK","kivicare-clinic-management-system")})}finally{o(!1)}};return f.useEffect(()=>{sessionStorage.removeItem("kc_oauth_in_progress")},[]),i.jsx("div",{className:"card mt-4 mx-auto",style:{maxWidth:900,borderRadius:8},children:i.jsxs("div",{className:"card-body py-4 px-5",children:[i.jsx("h4",{className:"mb-4",children:r("Google Calendar Integration","kivicare-clinic-management-system")}),i.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[i.jsx("div",{className:"fs-5",children:c?i.jsxs("span",{className:"text-success",children:[i.jsx("i",{className:"fas fa-check-circle me-2"}),r("You are connected with the google calender.","kivicare-clinic-management-system")]}):i.jsxs("span",{children:[i.jsx("i",{className:"fas fa-calendar me-2"}),r("Please connect with your Google Account to get appointments in Google Calendar automatically.","kivicare-clinic-management-system")]})}),i.jsx("button",{className:`btn ${c?"btn-outline-danger":"btn-primary"}`,onClick:c?m:d,disabled:l||e,children:l?i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),r("Please wait...","kivicare-clinic-management-system")]}):i.jsx(i.Fragment,{children:c?r("Disconnect","kivicare-clinic-management-system"):r("Connect to Google","kivicare-clinic-management-system")})})]})]})})},jx=()=>{const t=Kn(),e=Yt(),n=t.pathname.includes("/add"),s=t.pathname.includes("/edit/");return n?i.jsx(Rm,{}):s?i.jsx(Rm,{sessionId:e.id}):i.jsx(Ow,{})},Uhe=[Gn({path:"/setting",title:"Setting",outlet:kie,meta:{description:"Setting",showInSidebar:!0},skeleton:Tie,children:[We({path:"general-setting",component:nse,title:"General Setting",index:!0,meta:{description:"General Setting",breadcrumb:"General Setting"},skeleton:fP}),We({path:"holidays",component:ex,title:"Holidays",roles:["administrator","doctor","receptionist","clinic_admin"],index:!0,permissions:["clinic_schedule"],meta:{description:"Holidays",breadcrumb:"Holidays"},skeleton:Aie}),We({path:"holidays/add",component:ex,title:"Add Holiday",props:{isAdding:!0},permissions:["clinic_schedule_add","clinic_schedule"],meta:{description:"Add a new Holiday",breadcrumb:"Add Holiday"}}),We({path:"holidays/edit/:id",component:ex,title:"Edit Holiday",props:{isEditing:!0},permissions:["clinic_schedule_edit","clinic_schedule"],meta:{description:"Edit existing Holidays",breadcrumb:"Edit Holiday"}}),We({path:"doctor-session",component:jx,title:"setting/Doctor Session",roles:["doctor","receptionist"],permissions:["doctor_session_list"],index:!0,meta:{description:"Doctor Session",breadcrumb:"Doctor Session"}}),We({path:"doctor-session/add",component:jx,title:"Add Doctor Session",roles:["doctor","receptionist"],permissions:["doctor_session_add","doctor_session_list"],meta:{description:"Add new doctor session",breadcrumb:"Add Doctor Session"}}),We({path:"doctor-session/edit/:id",component:jx,title:"Edit Doctor Session",roles:["doctor","receptionist"],permissions:["doctor_session_edit","doctor_session_list"],meta:{description:"Edit existing doctor session",breadcrumb:"Edit Doctor Session"}}),We({path:"configurations",component:ise,title:"Configuration Setting",roles:["administrator"],index:!0,meta:{description:"Configuration Setting",breadcrumb:"Configuration Setting"},skeleton:vP}),We({path:"app-configuration",component:Lhe,title:"App Configuration Setting",roles:["administrator"],index:!0,meta:{description:"App Configuration Setting",breadcrumb:"App Configuration Setting"},skeleton:xP}),We({path:"email-template",component:are,title:"Email Template Settting",index:!0,meta:{description:"Email Template Settting",breadcrumb:"Email Template Settting"},skeleton:()=>i.jsx("div",{className:"container-fluid pb-0",children:i.jsx(_n,{columns:6,rows:5,showBreadcrumb:!0,showPageHeader:!0,showFilterBar:!0})})}),We({path:"email-template/edit/:id",component:ohe,title:"Edit Email Template",props:{isEditing:!0},meta:{description:"Edit existing Email",breadcrumb:"Edit Email Template"}}),We({path:"email-template/test",component:che,title:"Test Email"}),We({path:"push-template/test-notification",component:dS,title:"Send Test Notification",meta:{description:"Send test push notification",breadcrumb:"Send Test Notification"}}),We({path:"push-template/edit/:name",component:dS,title:"Edit Push Template",props:{isEditing:!0},meta:{description:"Edit existing Push Template",breadcrumb:"Edit Push Template"},skeleton:of}),We({path:"sms-whatsapp-template",component:yhe,title:"SMS-WhatsApp Template setting",index:!0,meta:{description:"SMS-WhatsApp Template setting",breadcrumb:"SMS-WhatsApp Template setting"}}),We({path:"sms-whatsapp-template/edit/:id",component:bhe,title:"SMS-WhatsApp Edit Template",index:!0,meta:{description:"SMS-WhatsApp edit Template",breadcrumb:"SMS-WhatsApp edit Template"}}),Gn({path:"webhooks",title:"WebHook setting",outlet:Kie,meta:{description:"WebHook setting",breadcrumb:"WebHook setting",hideSettingSidebar:!1},children:[We({path:"",element:i.jsx(gg,{to:"./configuration",replace:!0}),index:!0}),Gn({path:"configuration",title:"WebHook configuration",outlet:Eie,meta:{description:"WebHook configuration",breadcrumb:"WebHook configuration",noTransitionAnimation:!0},children:[We({path:"",component:khe,title:r("WebHooks","kivicare-clinic-management-system"),meta:{description:r("webhook","kivicare-clinic-management-system"),breadcrumb:r("WebHook","kivicare-clinic-management-system"),noTransitionAnimation:!0},skeleton:()=>i.jsx("div",{className:"container-fluid pb-0",children:i.jsx(_n,{columns:6,rows:5,showBreadcrumb:!1,showPageHeader:!0,showFilterBar:!1})})}),We({path:"add",component:jhe,skeleton:RC,title:r("Add WebHook","kivicare-clinic-management-system"),meta:{description:r("Add new webhook","kivicare-clinic-management-system"),breadcrumb:r("Add WebHook","kivicare-clinic-management-system"),noTransitionAnimation:!0}}),We({path:"edit/:id",component:Nhe,skeleton:RC,title:r("Edit WebHook","kivicare-clinic-management-system"),meta:{description:r("Edit existing webhook","kivicare-clinic-management-system"),breadcrumb:r("Edit WebHook","kivicare-clinic-management-system"),noTransitionAnimation:!0}})]}),We({path:"events-log",component:whe,title:r("Events Log","kivicare-clinic-management-system"),meta:{description:r("Webhook events and logs","kivicare-clinic-management-system"),breadcrumb:r("Events Log","kivicare-clinic-management-system"),noTransitionAnimation:!0},skeleton:()=>i.jsx("div",{className:"container-fluid pb-0",children:i.jsx(_n,{columns:5,rows:5,showBreadcrumb:!1,showPageHeader:!1,showFilterBar:!1})})}),We({path:"testing",component:Che,title:r("Testing","kivicare-clinic-management-system"),meta:{description:r("Webhook testing tools","kivicare-clinic-management-system"),breadcrumb:r("Testing","kivicare-clinic-management-system"),noTransitionAnimation:!0},skeleton:Qie}),We({path:"oauth2/callback",component:_he,title:r("OAuth2 Callback","kivicare-clinic-management-system"),meta:{description:r("OAuth2 authorization callback","kivicare-clinic-management-system"),breadcrumb:r("OAuth2 Callback","kivicare-clinic-management-system")}})]}),Gn({path:"custom-notification",title:"Custom Notification",outlet:Sie,meta:{description:"Custom Notification",breadcrumb:"Custom Notification"},children:[We({path:"",component:tre,title:"Custom Notification",index:!0,meta:{description:"Custom Notification",breadcrumb:"Custom Notification"},skeleton:()=>i.jsx("div",{className:"container-fluid pb-0",children:i.jsx(_n,{columns:6,rows:5,showBreadcrumb:!1,showPageHeader:!0,showFilterBar:!1})})}),We({path:"add",component:JC,skeleton:Ky,title:"Create Notification Service",meta:{description:"Create new notification service",breadcrumb:"Create Service"}}),We({path:"edit/:id",component:JC,skeleton:Ky,title:"Configure Notification Service",meta:{description:"Configure notification service settings",breadcrumb:"Configure Service"}}),We({path:"test/:id",component:ire,title:"Test Notification Service",meta:{description:"Test notification service",breadcrumb:"Test Service"}}),We({path:"oauth2/callback",component:sre,title:"OAuth2 Callback",meta:{description:"OAuth2 authorization callback",breadcrumb:"OAuth2 Callback"}})]}),Gn({path:"custom-form",title:"Custom Form setting",outlet:_ie,permissions:["custom_form_list"],meta:{description:"Custom Form setting",breadcrumb:"Custom Form setting"},children:[We({path:"",component:ase,skeleton:Rie,title:"Custom Form setting",index:!0,permissions:["custom_form_list"],meta:{description:"Custom Form setting",breadcrumb:"Custom Form setting"}}),We({path:"add",component:XC,skeleton:Gy,title:"Add Custom Form",permissions:["custom_form_add","custom_form_list"],meta:{description:"Add new custom form",breadcrumb:"Add Custom Form",hideSettingSidebar:!0}}),We({path:"edit/:id",component:XC,skeleton:Gy,title:"Edit Custom Form",permissions:["custom_form_edit","custom_form_list"],meta:{description:"Edit existing custom form",breadcrumb:"Edit Custom Form",hideSettingSidebar:!0}})]}),We({path:"encounter-body-chart",component:dhe,title:"Encounter Body Chart setting",index:!0,meta:{description:"Encounter Body Chart setting",breadcrumb:"Encounter Body Chart setting"},skeleton:bP}),We({path:"patient-setting",component:ghe,title:"patient setting",index:!0,meta:{description:"patient setting",breadcrumb:"patient setting"},skeleton:TP}),We({path:"widget-setting",component:Ahe,title:"Widget setting",index:!0,meta:{description:"Widget setting",breadcrumb:"Widget setting"},skeleton:kP}),We({path:"google-event-template",component:mhe,title:"Google Event template setting",index:!0,meta:{description:"Google Event template setting",breadcrumb:"Google Event template setting"},skeleton:wP}),We({path:"google-meet",component:uhe,title:"Google Meet Setting",roles:["administrator"],index:!0,meta:{description:"Google Meet Setting",breadcrumb:"Google Meet Setting"},skeleton:jP}),We({path:"google-meet-configuration",component:hhe,title:"Google Meet Configuration",roles:["doctor"],index:!0,meta:{description:"Google Meet Configuration",breadcrumb:"Google Meet Configuration"}}),We({path:"zoom-telemed",component:Yie,title:"Zoom Telemed setting",roles:["administrator"],index:!0,meta:{description:"Zoom Telemed setting",breadcrumb:"Zoom Telemed setting"}}),We({path:"zoom-configuration",component:Rhe,title:"Zoom Telemed setting",roles:["doctor"],index:!0,meta:{description:"Zoom Telemed setting",breadcrumb:"Zoom Telemed setting"}}),We({path:"listings",component:kx,title:"listings setting",index:!0,permissions:["static_data_list"],meta:{description:"Listing setting",breadcrumb:"Listing setting"},skeleton:()=>i.jsx("div",{className:"container-fluid pb-0",children:i.jsx(_n,{columns:6,rows:5,showBreadcrumb:!1,showPageHeader:!0,showFilterBar:!0})})}),We({path:"listings/add",component:kx,title:"Add Listing",permissions:["static_data_add","static_data_list"],meta:{description:"Add Listing",breadcrumb:"Add Listing"},skeleton:PC}),We({path:"listings/edit/:id",component:kx,title:"Edit Listing",permissions:["static_data_edit","static_data_list"],meta:{description:"Edit Listing",breadcrumb:"Edit Listing"},skeleton:PC}),We({path:"custom-field",component:nx,title:"Cusotm Field Setting",index:!0,permissions:["custom_field_list"],meta:{description:"Cusotm Field Setting",breadcrumb:"Cusotm Field Setting"},skeleton:()=>i.jsx("div",{className:"container-fluid pb-0",children:i.jsx(_n,{columns:6,rows:5,showBreadcrumb:!0,showPageHeader:!0,showFilterBar:!0})})}),We({path:"custom-field/add",component:nx,title:"Add Custom Field",permissions:["custom_field_add","custom_field_list"],meta:{description:"Add new custom field",breadcrumb:"Add Custom Field"}}),We({path:"custom-field/edit/:id",component:nx,title:"Edit Custom Field",permissions:["custom_field_edit","custom_field_list"],meta:{description:"Edit existing custom field",breadcrumb:"Edit Custom Field"}}),We({path:"pro-settings",component:xhe,title:"Pro Setting",index:!0,meta:{description:"Pro Setting",breadcrumb:"Pro Setting"},skeleton:NP}),We({path:"payments",component:fhe,title:"Payment Methods",index:!0,meta:{description:"List of all payment methods",breadcrumb:"Payment Methods"},skeleton:()=>i.jsx("div",{className:"container-fluid pb-0",children:i.jsx(_n,{columns:6,rows:5,showBreadcrumb:!1,showPageHeader:!1,showFilterBar:!1})})}),We({path:"payment/:gateway",component:jie,title:"Update Payment Setting",meta:{description:"Update payment method by key",breadcrumb:"Update"}}),We({path:"appointment-settings",component:$he,title:"Appointment settings",index:!0,skeleton:_P,meta:{description:"Appointment settings"}}),We({path:"permission",component:vhe,title:"Permission Setting",index:!0,skeleton:SP,meta:{description:"Permission Setting"}}),We({path:"sidebar-settings",component:zhe,title:"Sidebar Setting",index:!0,skeleton:EP,meta:{description:"Sidebar Setting"}}),We({path:"google-calendar-integration",component:Vhe,title:"Google Calendar Integration",index:!0,meta:{description:"Google Calendar Integration"}})]})],Whe=()=>{const t=Kn();return i.jsxs("div",{className:"billings-container",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center gap-3 flex-wrap mb-4",children:[i.jsx(_i,{}),i.jsx("div",{children:t.pathname!=="/billings"&&i.jsx(ei,{size:"sm"})})]}),i.jsx(fs,{})]})},Khe=()=>{const{getCurrencyDetail:t,isAddonActive:e,hasCapability:n}=mt(),s=e("kiviPro"),a=Xn(),l=Jn(),o=Li(),{data:c,isLoading:d}=XV({enabled:s}),m=c?.data?.encounters||[],[u,h]=f.useState(""),p=f.useMemo(()=>m.find(B=>String(B.id)===String(u)),[m,u]),[g,v]=f.useState(!1),x=t(),y=x.prefix,b=x.postfix,[k,w]=f.useState({page:1,perPage:10,search:"",status:"",orderBy:"",order:"",date_from:"",date_to:""}),[T,j]=f.useState(!1),[D,_]=f.useState(!1),[N,A]=f.useState(null),[P,E]=f.useState({serviceItems:[],discount:0,status:"unpaid"}),[I,M]=f.useState(!1),{data:O,isLoading:F}=qk(N,{enabled:!!N&&D});f.useEffect(()=>{O&&E(O?.data)},[O]);const H=B=>{A(B.id),_(!0)},G=()=>{j(!1),h("")},z=()=>{_(!1),A(null),M(!1)},ie=f.useMemo(()=>Object.fromEntries(Object.entries(k).filter(([B,se])=>se!==""&&se!==null&&se!==void 0)),[k]),{data:W,isLoading:ge,error:ae}=GV(ie,{enabled:s}),U=tU(),X=W?.data?.billings||[],J=W?.data?.pagination||{total:0,lastPage:1,perPage:10,currentPage:1},he=[{value:"Paid",label:r("Paid","kivicare-clinic-management-system")},{value:"Unpaid",label:r("Unpaid","kivicare-clinic-management-system")}],[le,ee]=f.useState(""),me=Ga(le,500);f.useEffect(()=>{w(B=>({...B,search:me,page:1}))},[me]);const K=B=>{ee(B.target.value)},re=async B=>{try{yt({title:r("Exporting...","kivicare-clinic-management-system"),text:r("Please wait. This may take a few seconds.","kivicare-clinic-management-system")});const se={format:B,...ie},pe=(await U.mutateAsync(se))?.data?.bills||[];if(!pe.length){kt({icon:"ph-info",iconColor:"text-info",bgIconColor:"bg-info",title:r("No data","kivicare-clinic-management-system"),text:r("No billing records found for export.","kivicare-clinic-management-system"),confirmButtonText:r("OK","kivicare-clinic-management-system"),showCancelButton:!1});return}const $=new Date().toISOString().split("T")[0],ce=pe.map(De=>({id:De.id,total_amount:De.total_amount,discount:De.discount,actual_amount:De.actual_amount,encounter_id:De.encounter_id,encounter_date:De.encounter_date,clinic_id:De.clinic_id,doctor_id:De.doctor_id,patient_id:De.patient_id,appointment_id:De.appointment_id,status:De.status,doctor_name:De.doctor_name,patient_name:De.patient_name,clinic_name:De.clinic_name,service_name:De.service_name}));switch(B){case"csv":hs(ce,`bills-${$}.csv`);break;case"xls":ps(ce,`bills-${$}.xls`);break;case"pdf":gs(ce,`bills-${$}.pdf`,"Billing Records");break;default:throw new Error("Invalid export format")}Wi(),Se.success(r("Export completed successfully.","kivicare-clinic-management-system"))}catch(se){console.error("Export error:",se),rt({title:r("Error!","kivicare-clinic-management-system"),text:se.message||r("Failed to export data. Please try again.","kivicare-clinic-management-system"),confirmButtonText:r("OK","kivicare-clinic-management-system")})}},oe=Ln(),C=f.useMemo(()=>[oe.accessor("invoiceId",{id:"invoiceId",header:()=>r("Bill ID","kivicare-clinic-management-system"),cell:B=>B.getValue()}),oe.accessor("encounter_id",{id:"encounter_id",header:()=>r("Encounter ID","kivicare-clinic-management-system"),cell:B=>B.getValue()}),...o?[]:[oe.accessor("doctor.name",{id:"doctorName",header:()=>r("Doctor","kivicare-clinic-management-system"),cell:B=>i.jsx(dn,{profileUrl:B.row.original.doctor.doctor_image_url,name:B.getValue(),email:B.row.original.doctor.email,fallbackText:B.getValue()?.charAt(0)||"D",variant:"primary",size:"sm"})})],...!a&&!l?[oe.accessor("clinic.name",{header:()=>r("Clinic","kivicare-clinic-management-system"),cell:B=>i.jsx(dn,{profileUrl:B.row.original.clinic.clinic_image_url,name:B.getValue(),email:B.row.original.clinic.email,fallbackText:B.getValue()?.charAt(0)||"D",variant:"primary",size:"sm"})})]:[],oe.accessor("patient.name",{id:"patientName",header:()=>r("Patient","kivicare-clinic-management-system"),cell:B=>i.jsx(dn,{profileUrl:B.row.original.patient.patient_image_url,name:B.getValue(),email:B.row.original.patient.email,fallbackText:B.getValue()?.charAt(0)||"P",variant:"primary",size:"sm"})}),oe.accessor("services",{header:()=>r("Services","kivicare-clinic-management-system"),cell:B=>B.getValue()}),oe.accessor("total_amount",{header:()=>r("Total","kivicare-clinic-management-system"),cell:B=>y+B.getValue()+b}),oe.accessor("discount",{header:()=>r("Discount","kivicare-clinic-management-system"),cell:B=>y+B.getValue()+b}),oe.accessor("actual_amount",{header:()=>r("Amount Due","kivicare-clinic-management-system"),cell:B=>y+B.getValue()+b}),oe.accessor("date",{header:()=>r("Date","kivicare-clinic-management-system"),cell:B=>B.getValue()}),oe.accessor("status",{header:()=>r("Status","kivicare-clinic-management-system"),cell:B=>{const se=B.getValue(),Q=se==="paid"?"Paid":"Unpaid",pe=se==="paid"?"bg-success-subtle text-success":"bg-danger-subtle text-danger";return i.jsx("span",{className:`badge ${pe} px-3 py-2`,children:Q})}}),oe.accessor("actions",{header:()=>r("Action","kivicare-clinic-management-system"),enableSorting:!1,cell:({row:B})=>{const se=Q=>pe=>i.jsx(ut,{id:`tooltip-${B.original.id}-${Q}`,...pe,children:Q});return i.jsxs("div",{className:"d-flex align-items-center gap-3",children:[n("patient_bill_view")&&i.jsx(Qe,{placement:"top",overlay:se(r("Bill Detail","kivicare-clinic-management-system")),children:i.jsx(ht,{to:`/billings/view/${B.original.id}`,className:"btn btn-link text-gray fs-5 p-0",children:i.jsx("i",{className:"ph ph-eye"})})}),n("patient_bill_edit")&&B.original.status!=="paid"&&i.jsx(Qe,{placement:"top",overlay:se(r("Edit","kivicare-clinic-management-system")),children:i.jsx("button",{className:"btn btn-link text-success fs-5 p-0",onClick:()=>H(B.original),children:i.jsx("i",{className:"ph ph-pencil-simple-line"})})}),n("patient_encounter_view")&&i.jsx(Qe,{placement:"top",overlay:se(r("Encounter Details","kivicare-clinic-management-system")),children:i.jsx(ht,{to:`/encounter/dashboard/${B.original.encounter_id}/clinical-details`,className:"btn btn-link text-gray fs-5 p-0",children:i.jsx("i",{className:"ph ph-gauge"})})})]})}})],[n]),R=B=>{const se=B[0];w(se?Q=>({...Q,page:1,orderBy:se.id,order:se.desc?"desc":"asc"}):Q=>({...Q,page:1,orderBy:"",order:""}))},te=()=>{if(!u){rt({title:r("Error","kivicare-clinic-management-system"),text:r("Please select an encounter to add a bill.","kivicare-clinic-management-system")});return}E({serviceItems:[],taxItems:[],discount:0,discountEnabled:!1,status:"unpaid",clinic:{id:p.clinicId,name:p.clinicName,email:"",clinic_image_url:p.clinic_image_url||""},doctor:{id:p.doctorId,name:p.doctorName,email:"",doctor_image_url:p.doctor_image_url||""},patient:{id:p.patientId,name:p.patientName,email:"",patient_image_url:p.patient_image_url||""},patientEncounter:{id:p.id,appointmentId:p.appointmentId||null},serviceTotal:0,taxTotal:0,discountValue:0,totalPayable:0}),j(!1),h(""),_(!0)},ne=[{type:"number",name:"id",label:r("Bill ID","kivicare-clinic-management-system"),placeholder:r("Enter Bill ID","kivicare-clinic-management-system")},{type:"number",name:"encounter_id",label:r("Encounter ID","kivicare-clinic-management-system"),placeholder:r("Enter Encounter ID","kivicare-clinic-management-system")},{type:"text",name:"doctorName",label:r("Doctor Name","kivicare-clinic-management-system"),placeholder:r("Enter Doctor Name","kivicare-clinic-management-system"),min:1},...!a&&!l?[{type:"text",name:"clinicName",label:r("Clinic Name","kivicare-clinic-management-system"),placeholder:r("Enter Clinic Name","kivicare-clinic-management-system"),min:1}]:[],{type:"text",name:"patientName",label:r("Patient Name","kivicare-clinic-management-system"),placeholder:r("Enter Patient Name","kivicare-clinic-management-system"),min:1},{type:"text",name:"serviceName",label:r("Service Name","kivicare-clinic-management-system"),placeholder:r("Enter Service Name","kivicare-clinic-management-system"),min:1},{type:"select",name:"status",label:r("Status","kivicare-clinic-management-system"),options:he,placeholder:r("Select status","kivicare-clinic-management-system")}],Y=f.useMemo(()=>["search","status","date_from","date_to","id","encounter_id","doctorName","clinicName","patientName","serviceName"].some(se=>{const Q=k[se];return typeof Q=="object"&&Q!==null?Q.value!==void 0&&Q.value!=="":Q!=null&&Q!==""}),[k]),q=f.useRef(null);return i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"d-flex justify-content-between align-items-center gap-3 flex-wrap mb-4"}),i.jsxs("div",{className:"table-content",children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap row-gap-2 column-gap-3 mb-4",children:[i.jsx("div",{className:"page-title",children:i.jsx("h6",{className:"m-0",children:r("Billing Records","kivicare-clinic-management-system")})}),i.jsxs("div",{className:" d-flex align-items-center row-gap-2 column-gap-3 flex-wrap",children:[n("patient_bill_add")&&i.jsxs("button",{type:"button",className:"btn btn-secondary d-flex align-items-center gap-2",onClick:()=>j(!0),children:[i.jsx("i",{className:"ph ph-plus-circle"}),i.jsx("span",{children:r("Add Bill","kivicare-clinic-management-system")})]}),i.jsxs("button",{className:"btn btn-primary d-flex align-items-center gap-2",onClick:()=>v(!0),children:[i.jsx("i",{className:"ph ph-funnel"}),i.jsx("span",{children:r("Filter","kivicare-clinic-management-system")})]})]})]}),i.jsxs("div",{className:"d-flex justify-content-between align-items-xl-center flex-column flex-lg-row gap-3 mb-4",children:[i.jsxs("div",{className:"table-selection d-flex gap-3 flex-column flex-sm-row",children:[i.jsxs("div",{className:"input-group position-relative",children:[i.jsx(Un,{ref:q,onChange:B=>{if(B.length===2){const[se,Q]=B;w(pe=>({...pe,date_from:se.toISOString().split("T")[0],date_to:Q.toISOString().split("T")[0],page:1}))}},options:{mode:"range",dateFormat:xi(window.kc_frontend.date_format),locale:Wn()},className:"form-control w-auto",placeholder:r("Select date range","kivicare-clinic-management-system")}),k.date_from&&k.date_to&&i.jsx("button",{type:"button",className:"btn btn-sm position-absolute btn-flatpickr-clear",onClick:()=>{w(B=>({...B,date_from:"",date_to:"",page:1})),q.current&&q.current.flatpickr&&q.current.flatpickr.clear()},title:r("Clear date range","kivicare-clinic-management-system"),children:i.jsx("i",{className:"ph ph-x"})}),i.jsx("div",{className:"input-group-text",children:i.jsx("i",{className:"ph ph-calendar"})})]}),i.jsx("div",{children:i.jsx(ct,{placeholder:r("Status","kivicare-clinic-management-system"),className:"react-select-box",classNamePrefix:"react-select",options:he,onChange:B=>w(se=>({...se,status:B?B.value:"",page:1})),isClearable:!0,styles:{menuPortal:B=>({...B,zIndex:9999})}})})]}),i.jsx("div",{className:"table-action-right",children:i.jsxs("div",{className:"d-flex align-items-center input-search-select gap-3",children:[i.jsxs("div",{className:"input-group input-group-search",children:[i.jsx("span",{className:"input-group-text",children:i.jsx("i",{className:"ph ph-magnifying-glass"})}),i.jsx("input",{type:"text",className:"form-control",placeholder:r("Search...","kivicare-clinic-management-system"),value:le,onChange:K})]}),n("patient_bill_export")&&s&&i.jsxs("div",{className:"download-buttons d-flex align-items-center gap-2",children:[i.jsx(Qe,{placement:"top",overlay:i.jsx(ut,{children:r("Export CSV","kivicare-clinic-management-system")}),children:i.jsx("button",{className:"btn btn-white",onClick:()=>re("csv"),disabled:U.isPending,children:i.jsx("i",{className:"ph ph-file-csv"})})}),i.jsx(Qe,{placement:"top",overlay:i.jsx(ut,{children:r("Export Excel","kivicare-clinic-management-system")}),children:i.jsx("button",{className:"btn btn-white",onClick:()=>re("xls"),disabled:U.isPending,children:i.jsx("i",{className:"ph ph-file-xls"})})}),i.jsx(Qe,{placement:"top",overlay:i.jsx(ut,{children:r("Export PDF","kivicare-clinic-management-system")}),children:i.jsx("button",{className:"btn btn-white",onClick:()=>re("pdf"),disabled:U.isPending,children:i.jsx("i",{className:"ph ph-file-pdf"})})})]})]})})]})]}),i.jsx(wn,{data:X,columns:C,isLoading:ge,error:ae,currentPage:J.currentPage,perPage:J.perPage,totalItems:J.total,lastPage:J.lastPage,onPageChange:B=>w(se=>({...se,page:B})),onPerPageChange:B=>w(se=>({...se,perPage:B,page:1})),onSortingChange:R,enableSelection:!1,moduleNamePlural:"Billing records"}),i.jsx(Hk,{show:D,onHide:z,editFormData:P,setEditFormData:E,showAddServiceItemForm:I,setShowAddServiceItemForm:M,editBillId:N,handleCloseEditModal:z}),i.jsxs(lt,{show:T,onHide:G,centered:!0,children:[i.jsx(lt.Header,{closeButton:!0,children:i.jsx(lt.Title,{children:r("Add New Bill","kivicare-clinic-management-system")})}),i.jsx(lt.Body,{className:"p-0",children:i.jsxs("div",{className:"modal-body",children:[i.jsxs("div",{className:"mb-2",children:[i.jsxs("label",{htmlFor:"select_type",className:"form-label",children:[r("Select Encounter ID","kivicare-clinic-management-system"),i.jsx("span",{className:"input-field-reuquired",children:"*"})]}),i.jsx(ct,{id:"select_type",className:"react-select-box",classNamePrefix:"react-select",placeholder:r("Select Encounter","kivicare-clinic-management-system"),isLoading:d,options:m.map(B=>({value:B.id,label:`Encounter #${B.id}`,encounter:B})),value:m.map(B=>({value:B.id,label:`Encounter #${B.id}`,encounter:B})).find(B=>String(B.value)===String(u))||null,onChange:B=>h(B?B.value:""),styles:{menuPortal:B=>({...B,zIndex:9999})},isClearable:!0})]}),p&&i.jsxs(i.Fragment,{children:[i.jsx("h6",{className:"font-size-14",children:r("Encounter Details","kivicare-clinic-management-system")}),i.jsxs("div",{className:"bg-body p-3 rounded",children:[i.jsxs("div",{className:"d-flex align-items-center justify-content-between gap-2 flex-sm-nowrap flex-wrap mb-2",children:[i.jsxs("span",{className:"font-size-14",children:[r("Date","kivicare-clinic-management-system"),":"]}),i.jsx("h6",{className:"font-size-14 mb-0",children:p.encounterDate?new Date(p.encounterDate).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"-"})]}),i.jsxs("div",{className:"d-flex align-items-center justify-content-between gap-2 flex-sm-nowrap flex-wrap mb-2",children:[i.jsxs("span",{className:"font-size-14",children:[r("Patient Name","kivicare-clinic-management-system"),":"]}),i.jsx(dn,{profileUrl:p.patient_image_url,name:p.patientName||"-",variant:"primary",size:"sm"})]}),i.jsxs("div",{className:"d-flex align-items-center justify-content-between gap-2 flex-sm-nowrap flex-wrap mb-2",children:[i.jsxs("span",{className:"font-size-14",children:[r("Doctor Name","kivicare-clinic-management-system"),":"]}),i.jsx(dn,{profileUrl:p.doctor_image_url,name:p.doctorName||"-",variant:"primary",size:"sm"})]}),i.jsxs("div",{className:"d-flex align-items-center justify-content-between gap-2 flex-sm-nowrap flex-wrap",children:[i.jsxs("span",{className:"font-size-14",children:[r("Clinic Name","kivicare-clinic-management-system"),":"]}),i.jsx("h6",{className:"font-size-14 mb-0",children:p.clinicName||"-"})]})]})]})]})}),i.jsxs(lt.Footer,{className:"gap-3",children:[i.jsx(Xt,{variant:"secondary",onClick:G,children:r("Cancel","kivicare-clinic-management-system")}),i.jsx(Xt,{variant:"primary",onClick:te,children:r("Generate","kivicare-clinic-management-system")})]})]}),i.jsx(na,{show:g,onHide:()=>v(!1),queryParams:k,onApplyFilters:B=>{w(se=>({...se,...B,page:1})),v(!1)},onResetFilters:()=>{w({page:1,perPage:10,search:"",status:"",orderBy:"",order:"",date_from:"",date_to:""}),v(!1)},title:r("Filters","kivicare-clinic-management-system"),hasAppliedFilters:Y,fields:ne}),!s&&i.jsx(di,{text:r("Bill module is KiviCare Pro feature.","kivicare-clinic-management-system"),link:"https://codecanyon.net/item/kivicare-pro-clinic-patient-management-system-ehr-addon/30690654?s_rank=3"})]})},Ghe=[Gn({path:"/billings",title:"Billings",outlet:Whe,permissions:["patient_bill_list"],module:"billing",meta:{description:"Billing management system",icon:"receipt",showInSidebar:!0},children:[We({path:"",component:Khe,title:"All Billings",index:!0,permissions:["patient_bill_list"],module:"billing",meta:{description:"List of all billings",breadcrumb:"All Billings"},skeleton:()=>i.jsx("div",{className:"container-fluid pb-0",children:i.jsx(_n,{columns:6,rows:5,showBreadcrumb:!0,showPageHeader:!0,showFilterBar:!0})})}),We({path:"view/:id",component:mP,title:"Billing Details",index:!0,permissions:["patient_bill_view"],module:"billing",meta:{description:"Details of a specific billing",breadcrumb:"Billing Details"},skeleton:dP})]})],Yhe=()=>{const t=Kn();return i.jsxs("div",{className:"doctor-session-container",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center gap-3 flex-wrap mb-4",children:[i.jsx(_i,{}),i.jsx("div",{children:t.pathname!=="/doctor-session"&&i.jsx(ei,{size:"sm"})})]}),i.jsx(fs,{})]})},Qhe=[Gn({path:"/doctor-session",title:"Doctor Sessions",outlet:Yhe,permissions:["doctor_session_list"],meta:{description:"Manage doctor sessions",icon:"calendar",showInSidebar:!0,section:"management"},children:[We({path:"",component:Ow,title:"Sessions",index:!0,permissions:["doctor_session_list"],meta:{description:"List of all doctor sessions",breadcrumb:"All Sessions"},skeleton:()=>i.jsx("div",{className:"container-fluid pb-0",children:i.jsx(_n,{columns:6,rows:5,showBreadcrumb:!0,showPageHeader:!0,showFilterBar:!0})})}),We({path:"add",component:Rm,title:"Add Doctor Session",props:{isEditing:!1,mode:"create"},permissions:["doctor_session_add"],skeleton:eg,meta:{description:"Add a new doctor session",breadcrumb:"Add New"}}),We({path:"edit/:id",component:Rm,title:"Edit Doctor Session",props:{isEditing:!0,mode:"edit"},permissions:["doctor_session_edit"],skeleton:eg,meta:{description:"Edit doctor session",breadcrumb:"Edit"}})]})],dI=()=>i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"d-flex align-items-center justify-content-between flex-wrap row-gap-2 column-gap-3 mb-4",children:i.jsxs("div",{className:"page-title",children:[i.jsx(wo,{items:["50px","80px"]}),i.jsx(S,{width:"120px",height:"1.125rem",className:"mt-2"})]})}),i.jsxs("div",{className:"position-relative",children:[i.jsx("div",{className:"card mb-4",children:i.jsx("div",{className:"card-body",children:i.jsxs("div",{className:"row g-3",children:[i.jsx("div",{className:"col-lg col-md-6",children:i.jsx(S,{width:"100%",height:"38px",style:{borderRadius:"4px"}})}),i.jsx("div",{className:"col-lg col-md-6",children:i.jsx(S,{width:"100%",height:"38px",style:{borderRadius:"4px"}})}),i.jsx("div",{className:"col-lg col-md-6",children:i.jsx(S,{width:"100%",height:"38px",style:{borderRadius:"4px"}})}),i.jsx("div",{className:"col-lg col-md-6",children:i.jsx(S,{width:"100%",height:"38px",style:{borderRadius:"4px"}})})]})})}),i.jsx("div",{className:"position-relative",children:i.jsxs("div",{className:"row g-4 mt-1",children:[i.jsx("div",{className:"col-lg-4",children:i.jsxs(gt,{children:[i.jsx(S,{width:"180px",height:"1.125rem",className:"mb-4"}),i.jsx("div",{className:"d-flex align-items-center justify-content-center",children:i.jsx(S,{width:"200px",height:"200px",style:{borderRadius:"50%"}})}),i.jsx("div",{className:"mt-3",children:i.jsx(Xd,{count:4,colClass:"col-12",children:i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsx(S,{width:"12px",height:"12px",style:{borderRadius:"50%"}}),i.jsx(S,{width:"100px",height:"0.875rem"}),i.jsx(S,{width:"50px",height:"0.875rem",className:"ms-auto"})]})})})]})}),i.jsx("div",{className:"col-lg-8",children:i.jsxs(gt,{children:[i.jsx(S,{width:"200px",height:"1.125rem",className:"mb-4"}),i.jsx("div",{className:"chart-container",children:i.jsx(S,{width:"100%",height:"250px",style:{borderRadius:"4px"}})}),i.jsxs("div",{className:"d-flex justify-content-between mt-3",children:[i.jsx(S,{width:"60px",height:"0.875rem"}),i.jsx(S,{width:"60px",height:"0.875rem"}),i.jsx(S,{width:"60px",height:"0.875rem"}),i.jsx(S,{width:"60px",height:"0.875rem"}),i.jsx(S,{width:"60px",height:"0.875rem"})]})]})}),i.jsx("div",{className:"col-lg-12",children:i.jsxs(gt,{children:[i.jsx(S,{width:"140px",height:"1.125rem",className:"mb-4"}),i.jsx("div",{className:"chart-container",children:i.jsx(S,{width:"100%",height:"300px",style:{borderRadius:"4px"}})}),i.jsxs("div",{className:"d-flex justify-content-between mt-3",children:[i.jsx(S,{width:"80px",height:"0.875rem"}),i.jsx(S,{width:"80px",height:"0.875rem"}),i.jsx(S,{width:"80px",height:"0.875rem"}),i.jsx(S,{width:"80px",height:"0.875rem"}),i.jsx(S,{width:"80px",height:"0.875rem"}),i.jsx(S,{width:"80px",height:"0.875rem"})]})]})}),i.jsx("div",{className:"col-lg-6",children:i.jsxs(gt,{children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[i.jsx(S,{width:"180px",height:"1.125rem"}),i.jsx(S,{width:"120px",height:"32px",style:{borderRadius:"4px"}})]}),i.jsx("div",{className:"chart-container",children:i.jsx(S,{width:"100%",height:"250px",style:{borderRadius:"4px"}})}),i.jsxs("div",{className:"d-flex justify-content-between mt-3",children:[i.jsx(S,{width:"60px",height:"0.875rem"}),i.jsx(S,{width:"60px",height:"0.875rem"}),i.jsx(S,{width:"60px",height:"0.875rem"}),i.jsx(S,{width:"60px",height:"0.875rem"})]})]})}),i.jsx("div",{className:"col-lg-6",children:i.jsxs(gt,{children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[i.jsx(S,{width:"180px",height:"1.125rem"}),i.jsx(S,{width:"120px",height:"32px",style:{borderRadius:"4px"}})]}),i.jsx("div",{className:"chart-container",children:i.jsx(S,{width:"100%",height:"250px",style:{borderRadius:"4px"}})}),i.jsxs("div",{className:"d-flex justify-content-between mt-3",children:[i.jsx(S,{width:"60px",height:"0.875rem"}),i.jsx(S,{width:"60px",height:"0.875rem"}),i.jsx(S,{width:"60px",height:"0.875rem"}),i.jsx(S,{width:"60px",height:"0.875rem"})]})]})})]})})]})]}),Xo={getReportInitialData:()=>ve({endpoint:"reports/initial-data",method:"GET"}),getClinicRevenueOverall:(t={})=>(console.log("[KiviCare DEBUG] getClinicRevenueOverall params:",t),ve({endpoint:"reports/clinic-revenue-overall",method:"GET",data:t}).then(e=>(console.log("[KiviCare DEBUG] getClinicRevenueOverall response:",e),e))),getClinicRevenueDetail:(t={})=>ve({endpoint:"reports/clinic-revenue-detail",method:"GET",data:t}),getDoctorRevenue:(t={})=>ve({endpoint:"reports/doctor-revenue",method:"GET",data:t}),getClinicAppointmentCount:(t={})=>ve({endpoint:"reports/clinic-appointment-count",method:"GET",data:t}),getDoctorAppointmentCount:(t={})=>ve({endpoint:"reports/doctor-appointment-count",method:"GET",data:t})};Zm.register(lq,dq,z9,kT,Q9,ST,NT);const mS=()=>i.jsx("div",{className:"d-flex align-items-center justify-content-center",style:{height:"320px",minHeight:"320px"},children:i.jsx("p",{className:"text-muted",children:r("No data available for the selected period.","kivicare-clinic-management-system")})}),Zhe=t=>{const e=t?.data?.datasets;return e?.length?e.some(n=>n.data.some(s=>s>0)):!1},Od=({title:t,chartType:e="bar",queryKey:n,queryFn:s,filters:a,enabled:l=!0,colors:o,selectOptions:c,selectValue:d,onSelectChange:m,initialData:u})=>{const{darkMode:h}=mt(),p=f.useRef();f.useEffect(()=>()=>{p.current&&p.current.destroy()},[]);const g=N=>{if(!p.current)return;const A=p.current,P=t.replace(/[^a-z0-9]/gi,"_").toLowerCase();if(N==="png"||N==="jpeg"){const E=document.createElement("a");E.download=`${P}.${N}`,E.href=A.toBase64Image(`image/${N}`),E.click()}else if(N==="csv"){const E=A.data;let I;e==="doughnut"?(I=r("Clinic","kivicare-clinic-management-system")+","+r("Revenue","kivicare-clinic-management-system")+`
`,E.labels.forEach((F,H)=>{I+=`"${F}",${E.datasets[0].data[H]||0}
`})):(I=(a.month==="all"?r("Month","kivicare-clinic-management-system"):r("Day","kivicare-clinic-management-system"))+","+E.datasets.map(H=>`"${H.label||"Dataset"}"`).join(",")+`
`,E.labels.forEach((H,G)=>{I+=`"${H}",`+E.datasets.map(z=>z.data[G]||0).join(",")+`
`}));const M=new Blob([I],{type:"text/csv"}),O=document.createElement("a");O.download=`${P}.csv`,O.href=URL.createObjectURL(M),O.click()}},v=[{value:"png",label:r("PNG","kivicare-clinic-management-system")},{value:"jpeg",label:r("JPEG","kivicare-clinic-management-system")},{value:"csv",label:r("CSV","kivicare-clinic-management-system")}],{data:x,isFetching:y}=ft({queryKey:n,queryFn:()=>s(a),enabled:l,staleTime:300*1e3}),b=f.useMemo(()=>{if(e!=="doughnut")return"";const N=x?.data?.datasets?.[0]?.data?.reduce((I,M)=>I+M,0)||0,A=u?.clinic_currency?.prefix||"",P=u?.clinic_currency?.postfix||"",E=N.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2});return`${A}${E}${P}`},[x,e,u]),k=f.useMemo(()=>({responsive:!0,maintainAspectRatio:!1,animation:!1,plugins:{legend:{position:"bottom",labels:{color:h?"#adb5bd":"#6c757d"}},title:{display:!1}},scales:{x:{ticks:{color:h?"#adb5bd":"#6c757d"},grid:{color:h?"rgba(255, 255, 255, 0.1)":"rgba(0, 0, 0, 0.1)"}},y:{beginAtZero:!0,ticks:{precision:0,color:h?"#adb5bd":"#6c757d"},grid:{color:h?"rgba(255, 255, 255, 0.1)":"rgba(0, 0, 0, 0.1)"},suggestedMax:5}}}),[h]),w=f.useMemo(()=>({responsive:!0,maintainAspectRatio:!1,animation:!1,cutout:"70%",plugins:{legend:{position:"bottom",labels:{color:h?"#adb5bd":"#6c757d"}},title:{display:!1},centerText:{display:!0,text:b,label:r("Total","kivicare-clinic-management-system")}}}),[b,h]),T=f.useMemo(()=>({id:"doughnutCenterText",beforeDraw:N=>{const{config:A,chartArea:P,ctx:E}=N,{type:I,options:{plugins:{centerText:M}={}}}=A;if(I!=="doughnut"||!M?.display||!M?.text)return;const{top:O,left:F,width:H,height:G}=P,z=F+H/2,ie=O+G/2;E.save(),E.font="0.9rem Inter, sans-serif",E.textAlign="center",E.textBaseline="middle",E.fillStyle=h?"#adb5bd":"#6c757d",E.fillText(M.label,z,ie-12),E.font="bold 1.1rem Inter, sans-serif",E.fillStyle=h?"#ffffff":"#333333",E.fillText(M.text,z,ie+10),E.restore()}}),[h]),j=(N,A)=>({labels:N?.data?.labels||[],datasets:(N?.data?.datasets||[]).map((P,E)=>({...P,backgroundColor:A?.[E%A.length]||"#4874dc"}))}),D=f.useMemo(()=>{const N=x?.data?.datasets?.[0]?.data?.length>0;return{labels:N?x.data.labels:[],datasets:[{label:t,data:N?x.data.datasets[0].data:[],backgroundColor:o||[],hoverOffset:4}]}},[x,o,t]),_=()=>{const N=JSON.stringify(n)+(h?"-dark":"-light");return e==="doughnut"?D.datasets[0].data.length?i.jsx(RT,{ref:p,options:w,data:D,plugins:[T]},N):i.jsx(mS,{}):Zhe(x)?i.jsx(xq,{ref:p,options:k,data:j(x,o)},N):i.jsx(mS,{})};return i.jsx("div",{className:"card",children:i.jsxs("div",{className:"card-body",children:[i.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[i.jsx("h6",{className:"m-0",children:t}),i.jsxs("div",{className:"d-flex gap-2",children:[i.jsx(ct,{options:v,onChange:N=>g(N.value),placeholder:r("Export","kivicare-clinic-management-system"),styles:{container:N=>({...N,minWidth:"80px"})},className:"react-select-box",classNamePrefix:"react-select",isSearchable:!1}),c&&i.jsx(ct,{options:c,value:c.find(N=>N.value===d),onChange:N=>m(N.value),className:"react-select-box",classNamePrefix:"react-select",styles:{container:N=>({...N,minWidth:"100px"}),menuPortal:N=>({...N,zIndex:9999})}})]})]}),i.jsx("div",{className:"position-relative",children:i.jsx("div",{style:{height:320},children:y?e==="doughnut"?i.jsx("div",{className:"col-lg-12",children:i.jsxs(gt,{children:[i.jsx("div",{className:"d-flex align-items-center justify-content-center",children:i.jsx(S,{width:"200px",height:"160px",style:{borderRadius:"50%"}})}),i.jsx("div",{className:"mt-3",children:i.jsx(Xd,{count:4,colClass:"col-12",children:i.jsxs("div",{className:"d-flex align-items-center gap-2",children:[i.jsx(S,{width:"12px",height:"12px",style:{borderRadius:"50%"}}),i.jsx(S,{width:"100px",height:"0.875rem"}),i.jsx(S,{width:"50px",height:"0.875rem",className:"ms-auto"})]})})})]})}):i.jsx("div",{className:"col-md-12",children:i.jsxs(gt,{children:[i.jsx("div",{className:"chart-container",children:i.jsx(S,{width:"100%",height:"250px",style:{borderRadius:"4px"}})}),i.jsxs("div",{className:"d-flex justify-content-between mt-3",children:[i.jsx(S,{width:"80px",height:"0.875rem"}),i.jsx(S,{width:"80px",height:"0.875rem"})]})]})}):_()})})]})})},Fd=(t,e)=>["reports",t,e],Xhe=()=>{const t=new Date;return{year:t.getFullYear().toString(),monthValue:`${t.getMonth()+1}`.padStart(2,"0"),monthLabel:r(t.toLocaleString("default",{month:"long"}),"kivicare-clinic-management-system")}};function Jhe(){const{isAddonActive:t,userRole:e}=mt(),n=t("kiviPro"),[s,a]=f.useState(()=>{const{year:j,monthValue:D,monthLabel:_}=Xhe();return{clinic_id:{id:"all",label:r("All Clinics","kivicare-clinic-management-system")},doctor_id:{id:"all",label:r("All Doctors","kivicare-clinic-management-system")},month:{value:D,label:_},year:{value:j,label:j}}}),[l,o]=f.useState("all"),[c,d]=f.useState("all"),{data:m,isLoading:u}=ft({queryKey:["reports","initialData"],queryFn:Xo.getReportInitialData,enabled:n}),{data:h,isLoading:p}=Og({enabled:n}),{data:g,isLoading:v}=UT(s.clinic_id?.id,{enabled:n}),x=f.useMemo(()=>[{id:"all",label:r("All Clinics","kivicare-clinic-management-system")},...h?.data||[]],[h]),y=f.useMemo(()=>[{id:"all",label:r("All Doctors","kivicare-clinic-management-system")},...g?.data||[]],[g]),b=f.useMemo(()=>Array.from({length:new Date().getFullYear()-2019},(j,D)=>{const _=(new Date().getFullYear()-D).toString();return{value:_,label:_}}),[]),k=f.useMemo(()=>[{value:"all",label:r("All Months","kivicare-clinic-management-system")},...Array.from({length:12},(j,D)=>({value:(D+1).toString().padStart(2,"0"),label:r(new Date(0,D).toLocaleString("default",{month:"long"}),"kivicare-clinic-management-system")}))],[]),w=f.useMemo(()=>[{value:"all",label:r("All","kivicare-clinic-management-system")},{value:"1",label:r("Booked","kivicare-clinic-management-system")},{value:"2",label:r("Pending","kivicare-clinic-management-system")},{value:"0",label:r("Completed","kivicare-clinic-management-system")},{value:"3",label:r("Check-in","kivicare-clinic-management-system")},{value:"4",label:r("Cancelled","kivicare-clinic-management-system")}],[]),T=f.useCallback((j,D)=>{a(_=>({..._,[j]:D}))},[]);return i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"d-flex align-items-center justify-content-between flex-wrap row-gap-2 column-gap-3 mb-4",children:i.jsxs("div",{className:"page-title",children:[i.jsx("nav",{"aria-label":"breadcrumb",children:i.jsxs("ol",{className:"breadcrumb mb-0",children:[i.jsx("li",{className:"breadcrumb-item",children:i.jsx(ht,{to:"/",children:r("Home","kivicare-clinic-management-system")})}),i.jsx("li",{className:"breadcrumb-item active",children:r("Reports","kivicare-clinic-management-system")})]})}),i.jsx("h6",{className:"m-0 mt-2",children:r("Reports","kivicare-clinic-management-system")})]})}),i.jsxs("div",{className:"position-relative",children:[u&&i.jsx(dI,{}),!n&&i.jsx(di,{title:r("Available For Kivicare Pro","kivicare-clinic-management-system"),text:r("Reports module is available only in KiviCare Pro version.","kivicare-clinic-management-system"),link:"https://codecanyon.net/item/kivicare-pro-clinic-patient-management-system-ehr-addon/30690654?s_rank=3"}),i.jsx("div",{className:"card",children:i.jsx("div",{className:"card-body",children:i.jsxs("div",{className:"row g-3",children:[e==="administrator"&&i.jsx("div",{className:"col-lg col-md-6",children:i.jsx(ct,{placeholder:r("Select Clinic","kivicare-clinic-management-system"),options:x,value:s.clinic_id,onChange:j=>T("clinic_id",j),getOptionValue:j=>j.id,isLoading:p,isDisabled:!n,isClearable:!0,className:"react-select-box",classNamePrefix:"react-select",styles:{menuPortal:j=>({...j,zIndex:9999})}})}),["administrator","kivicare_clinic_admin"].includes(e)&&i.jsx("div",{className:"col-lg col-md-6",children:i.jsx(ct,{placeholder:r("Select Doctor","kivicare-clinic-management-system"),options:y,value:s.doctor_id,onChange:j=>T("doctor_id",j),getOptionValue:j=>j.id,isLoading:v,isDisabled:!n,className:"react-select-box",classNamePrefix:"react-select",isClearable:!0,styles:{menuPortal:j=>({...j,zIndex:9999})}})}),i.jsx("div",{className:"col-lg col-md-6",children:i.jsx(ct,{options:k,value:s.month,onChange:j=>T("month",j),getOptionValue:j=>j.value,isDisabled:!n,className:"react-select-box",classNamePrefix:"react-select",styles:{menuPortal:j=>({...j,zIndex:9999})}})}),i.jsx("div",{className:"col-lg col-md-6",children:i.jsx(ct,{options:b,value:s.year,onChange:j=>T("year",j),styles:{container:j=>({...j,minWidth:"100px"}),menuPortal:j=>({...j,zIndex:9999})},getOptionValue:j=>j.value,isDisabled:!n,className:"react-select-box",classNamePrefix:"react-select"})})]})})}),i.jsx("div",{className:"position-relative",children:i.jsxs("div",{className:"row g-4 mt-1",children:[i.jsx("div",{className:"col-lg-4",children:(()=>{const j={clinic_id:s.clinic_id?.id||"all",doctor_id:s.doctor_id?.id||"all",month:s.month?.value,year:s.year?.value,appointment_status_clinic:"all",appointment_status_doctor:"all"};return i.jsx(Od,{id:"clinic-revenue-overall",title:r("Clinic Revenue (Overall)","kivicare-clinic-management-system"),chartType:"doughnut",queryKey:Fd("clinicRevenueOverall",j),queryFn:Xo.getClinicRevenueOverall,filters:j,enabled:n&&!u,colors:m?.data?.clinic_colors,initialData:m?.data})})()}),i.jsx("div",{className:"col-lg-8",children:(()=>{const j={clinic_id:s.clinic_id?.id||"all",doctor_id:s.doctor_id?.id||"all",month:s.month?.value,year:s.year?.value,appointment_status_clinic:"all",appointment_status_doctor:"all"};return i.jsx(Od,{id:"clinic-revenue-detail",title:r("Clinic Revenue (Detail)","kivicare-clinic-management-system"),chartType:"bar",queryKey:Fd("clinicRevenueDetail",j),queryFn:Xo.getClinicRevenueDetail,filters:j,enabled:n&&!u,colors:m?.data?.clinic_colors})})()}),i.jsx("div",{className:"col-lg-12",children:(()=>{const j={clinic_id:s.clinic_id?.id||"all",doctor_id:s.doctor_id?.id||"all",month:s.month?.value,year:s.year?.value,appointment_status_clinic:"all",appointment_status_doctor:"all"};return i.jsx(Od,{id:"doctor-revenue",title:r("Doctor Revenue","kivicare-clinic-management-system"),chartType:"bar",queryKey:Fd("doctorRevenue",j),queryFn:Xo.getDoctorRevenue,filters:j,enabled:n&&!u,colors:m?.data?.doctor_colors})})()}),i.jsx("div",{className:"col-lg-6",children:(()=>{const j={clinic_id:s.clinic_id?.id||"all",doctor_id:s.doctor_id?.id||"all",month:s.month?.value,year:s.year?.value,appointment_status_clinic:l,appointment_status_doctor:"all"};return i.jsx(Od,{id:"clinic-appointment-count",title:r("Clinic Appointment Count","kivicare-clinic-management-system"),chartType:"bar",queryKey:Fd("clinicAppointmentCount",j),queryFn:Xo.getClinicAppointmentCount,filters:j,enabled:n&&!u,colors:m?.data?.clinic_colors,selectOptions:w,selectValue:l,onSelectChange:o})})()}),i.jsx("div",{className:"col-lg-6",children:(()=>{const j={clinic_id:s.clinic_id?.id||"all",doctor_id:s.doctor_id?.id||"all",month:s.month?.value,year:s.year?.value,appointment_status_clinic:"all",appointment_status_doctor:c};return i.jsx(Od,{id:"doctor-appointment-count",title:r("Doctor Appointment Count","kivicare-clinic-management-system"),chartType:"bar",queryKey:Fd("doctorAppointmentCount",j),queryFn:Xo.getDoctorAppointmentCount,filters:j,enabled:n&&!u,colors:m?.data?.doctor_colors,selectOptions:w,selectValue:c,onSelectChange:d})})()})]})})]})]})}const epe=[We({path:"/clinic-revenue-reports",title:r("Reports","kivicare-clinic-management-system"),component:Jhe,roles:["administrator","clinic_admin"],meta:{description:r("Access various clinic and doctor reports and analytics.","kivicare-clinic-management-system"),icon:"ph ph-chart-line",showInSidebar:!0,section:"Financial"},skeleton:dI})],tpe=()=>{const t=Kn(),e=hn(),[n,s]=f.useState({text:"",type:""}),a=NI();f.useEffect(()=>{t.state?.message&&s(t.state.message)},[t.state]),f.useEffect(()=>{a.isSuccess&&a.data&&(a.data.data?.nonce&&(window.kc_frontend||(window.kc_frontend={}),window.kc_frontend.nonce=a.data.data.nonce),e("/dashboard",{replace:!0}))},[a.isSuccess,a.data,e]),f.useEffect(()=>{if(a.isError){const u=a.error?.message||r("Login failed. Please try again.","kivicare-clinic-management-system");s({text:u,type:"error"})}},[a.isError,a.error]);const{register:l,handleSubmit:o,formState:{errors:c},reset:d}=en(),m=u=>{s({text:"",type:""}),a.mutate(u)};return i.jsx("div",{className:"container",children:i.jsx("div",{className:"row justify-content-center align-items-center min-vh-100",children:i.jsx("div",{className:"col-4",children:i.jsxs("div",{className:"kc-register-login-form",children:[n.text&&i.jsx("div",{className:`alert ${n.type==="success"?"alert-success":"alert-danger"} mb-4`,dangerouslySetInnerHTML:{__html:n.text}}),i.jsx("div",{className:"card p-0 mb-0",children:i.jsxs("div",{className:"card-body auth-card",children:[i.jsx("div",{className:"logo-img text-center mb-4",children:i.jsx("img",{src:window.kc_frontend?.site_logo||(window.kc_frontend?.loader_image?window.kc_frontend.loader_image.replace("loader.gif","logo.png"):""),alt:"KiviCare",height:"45",className:"logo-normal"})}),i.jsxs("form",{className:"kc-login-form",onSubmit:o(m),children:[i.jsxs("div",{className:"custom-form-field mb-3",children:[i.jsx("label",{className:"mb-2",htmlFor:"login-username",children:r("Username","kivicare-clinic-management-system")}),i.jsx("input",{type:"text",id:"login-username",className:`form-control ${c.username?"is-invalid":""}`,placeholder:"username@example.com",...l("username",{required:r("Username is required","kivicare-clinic-management-system")})}),c.username&&i.jsx("div",{className:"invalid-feedback",children:c.username.message})]}),i.jsxs("div",{className:"custom-form-field mb-3",children:[i.jsx("label",{className:"mb-2",htmlFor:"login-password",children:r("Password","kivicare-clinic-management-system")}),i.jsx("input",{type:"password",id:"login-password",className:`form-control ${c.password?"is-invalid":""}`,placeholder:"********",...l("password",{required:r("Password is required","kivicare-clinic-management-system")})}),c.password&&i.jsx("div",{className:"invalid-feedback",children:c.password.message})]}),i.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-4",children:[i.jsxs("div",{className:"form-check",children:[i.jsx("input",{className:"form-check-input",type:"checkbox",id:"remember-me",...l("rememberMe")}),i.jsx("label",{className:"form-check-label",htmlFor:"remember-me",children:r("Remember Me","kivicare-clinic-management-system")})]}),i.jsx("a",{href:`${window.kc_frontend?.home_url}/wp-login.php?action=lostpassword`,className:"forgot-pwd fw-semibold fst-italic",children:r("Forgot Password?","kivicare-clinic-management-system")})]}),i.jsx("div",{className:"text-center",children:i.jsx("button",{type:"submit",className:"btn btn-primary w-100",disabled:a.isPending,children:i.jsx("span",{className:"text d-inline-block align-middle text-uppercase",children:a.isPending?r("Loading...","kivicare-clinic-management-system"):r("Login","kivicare-clinic-management-system")})})})]})]})})]})})})})};function mI(){const t=hn(),[e,n]=f.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[s,a]=f.useState(!1),[l,o]=f.useState({type:"",text:""}),[c,d]=f.useState({currentPassword:!1,newPassword:!1,confirmPassword:!1}),m=p=>{n({...e,[p.target.name]:p.target.value}),l.text&&o({type:"",text:""})},u=p=>{d({...c,[p]:!c[p]})},h=async()=>{if(!e.currentPassword){o({type:"danger",text:r("Current password is required","kivicare-clinic-management-system")});return}if(!e.newPassword){o({type:"danger",text:r("New password is required","kivicare-clinic-management-system")});return}if(!e.confirmPassword){o({type:"danger",text:r("Confirm password is required","kivicare-clinic-management-system")});return}if(e.newPassword!==e.confirmPassword){o({type:"danger",text:r("New password and confirm password do not match","kivicare-clinic-management-system")});return}if(e.currentPassword===e.newPassword){o({type:"danger",text:r("Old and new password are same","kivicare-clinic-management-system")});return}if(e.newPassword.length<4){o({type:"danger",text:r("New password must be at least 4 characters long","kivicare-clinic-management-system")});return}a(!0),o({type:"",text:""});try{const p=await CI.changePassword(e);p.status?(o({type:"success",text:r("Password changed successfully","kivicare-clinic-management-system")}),n({currentPassword:"",newPassword:"",confirmPassword:""})):p.message&&p.message.includes("current password")?o({type:"danger",text:r("Current password is Wrong","kivicare-clinic-management-system")}):p.message&&p.message.includes("400")?o({type:"danger",text:r("Current password is Wrong","kivicare-clinic-management-system")}):o({type:"danger",text:p.message||r("Failed to change password","kivicare-clinic-management-system")})}catch(p){p.response&&p.response.status===400?o({type:"danger",text:r("Current password is Wrong","kivicare-clinic-management-system")}):o({type:"danger",text:r("An error occurred while changing password","kivicare-clinic-management-system")})}finally{a(!1)}};return i.jsxs("div",{children:[i.jsx("h6",{className:"mb-4",children:"Change Password"}),l.text&&i.jsx(gO,{variant:l.type,className:"mb-3",children:l.text}),i.jsxs(Mt,{children:[i.jsx("div",{className:"card",children:i.jsx("div",{className:"card-body",children:i.jsxs("div",{className:"row",children:[i.jsxs("div",{className:"col-md-4",children:[i.jsx(Mt.Label,{className:"form-label",children:r("Current password*","kivicare-clinic-management-system")}),i.jsxs(Zd,{className:"mb-3",children:[i.jsx(Mt.Control,{type:c.currentPassword?"text":"password",name:"currentPassword",placeholder:r("Enter your old password","kivicare-clinic-management-system"),value:e.currentPassword,onChange:m,className:"form-control",disabled:s}),i.jsx("span",{className:"input-group-text cursor-pointer icon-color",onClick:()=>u("currentPassword"),children:c.currentPassword?i.jsx("i",{class:"ph ph-eye"}):i.jsx("i",{class:"ph ph-eye-slash"})})]})]}),i.jsxs("div",{className:"col-md-4",children:[i.jsx(Mt.Label,{className:"form-label",children:r("New password*","kivicare-clinic-management-system")}),i.jsxs(Zd,{className:"mb-3",children:[i.jsx(Mt.Control,{type:c.newPassword?"text":"password",name:"newPassword",placeholder:r("Enter your new password","kivicare-clinic-management-system"),value:e.newPassword,onChange:m,className:"form-control",disabled:s}),i.jsx("span",{className:"input-group-text cursor-pointer icon-color",onClick:()=>u("newPassword"),children:c.newPassword?i.jsx("i",{class:"ph ph-eye"}):i.jsx("i",{class:"ph ph-eye-slash"})})]})]}),i.jsxs("div",{className:"col-md-4",children:[i.jsx(Mt.Label,{className:"form-label",children:r("Confirm password*","kivicare-clinic-management-system")}),i.jsxs(Zd,{className:"mb-3",children:[i.jsx(Mt.Control,{type:c.confirmPassword?"text":"password",name:"confirmPassword",placeholder:r("Enter your confirm password","kivicare-clinic-management-system"),value:e.confirmPassword,onChange:m,className:"form-control",disabled:s}),i.jsx("span",{className:"input-group-text cursor-pointer icon-color",onClick:()=>u("confirmPassword"),children:c.confirmPassword?i.jsx("i",{class:"ph ph-eye"}):i.jsx("i",{class:"ph ph-eye-slash"})})]})]})]})})}),i.jsxs("div",{className:"text-end",children:[i.jsx(Xt,{variant:"secondary",onClick:()=>t(-1),className:"btn btn-secondary me-2",disabled:s,children:r("Cancel","kivicare-clinic-management-system")}),i.jsx(Xt,{variant:"primary",onClick:h,className:"btn btn-primary",disabled:s,children:s?r("Saving...","kivicare-clinic-management-system"):r("Save","kivicare-clinic-management-system")})]})]})]})}const npe=[We({path:"/login",component:tpe,title:"Login",exact:!0,meta:{description:"User login page",requiresAuth:!1,showInSidebar:!1}}),We({path:"/change-password",component:mI,title:"Change Password",permissions:["change_password"],meta:{description:"User change password page",breadcrumb:"Change Password",showInSidebar:!1}})],ipe=f.lazy(()=>Ir(()=>Promise.resolve().then(()=>Ate),void 0,import.meta.url)),spe=f.lazy(()=>Ir(()=>Promise.resolve().then(()=>dne),void 0,import.meta.url)),ape=f.lazy(()=>Ir(()=>Promise.resolve().then(()=>Jne),void 0,import.meta.url)),rpe=f.lazy(()=>Ir(()=>Promise.resolve().then(()=>Nte),void 0,import.meta.url)),lpe=()=>{const{userRole:t,isLoading:e}=mt();switch(t){case"kiviCare_patient":return i.jsx(ipe,{isProfile:!0,isEditing:!0});case"kiviCare_doctor":return i.jsx(spe,{isProfile:!0,isEditing:!0});case"kiviCare_receptionist":return i.jsx(ape,{isProfile:!0,isEditing:!0});case"administrator":case"kiviCare_clinic_admin":return i.jsx(rpe,{isProfile:!0,isEditing:!0});default:return i.jsx("div",{children:r("Unknown user role","kivicare-clinic-management-system")})}},ope=()=>{const{userRole:t,hasCapability:e}=mt(),n=t?.includes("patient")?"patient_profile":t?.includes("doctor")?"doctor_profile":t?.includes("receptionist")?"receptionist_profile":t?.includes("clinic_admin")?"clinic_profile":"read";return e(n)||t?.includes("administrator")?i.jsx(lpe,{}):i.jsx(Jd,{})},cpe=[We({path:"/profile",component:ope,title:"Profile",meta:{description:"User profile page"}}),We({path:"/change-password",component:mI,title:"Change Password",meta:{description:"Change password page"}})],dpe=[{name:"auth",routes:npe,description:"Authentication routes",enabled:!0},{name:"dashboard",routes:iX,description:"Core dashboard routes",enabled:!0},{name:"appointments",routes:GJ,description:"Appointment management routes",enabled:!0},{name:"encounters",routes:kte,description:"Encounter management routes",enabled:!0},{name:"clinics",routes:Cte,description:"Clinic management routes",enabled:!0},{name:"patients",routes:Fte,description:"Patient management routes",enabled:!0},{name:"taxes",routes:One,description:"Tax management routes",enabled:!0},{name:"get-help",routes:Bne,description:"Help and support management routes",enabled:!0},{name:"doctors",routes:Nne,description:"Doctor management routes",enabled:!0},{name:"billing",routes:Ghe,description:"Billing management routes",enabled:!0},{name:"patients-reports",routes:$te,description:"Patient Report routes",enabled:!0},{name:"receptionists",routes:eie,description:"Receptionist management routes",enabled:!0},{name:"doctor-services",routes:iie,description:"Doctor Service management routes",enabled:!0},{name:"doctor-session",routes:Qhe,description:"Doctor session management routes",enabled:!0},{name:"reports",routes:epe,description:"Clinic and Doctor Reports",enabled:!0},{name:"setup",routes:yie,description:"Initial setup wizard routes",enabled:!0},{name:"setting",routes:Uhe,description:"Kivicare Setting routes"},{name:"profile",routes:cpe,description:"User profile management routes",enabled:!0},{name:"errors",routes:lie,description:"Error handling and fallback routes",enabled:!0}],mpe=()=>dpe.reduce((t,e)=>[...t,...e.routes],[]),upe=mpe(),ws=new Map,uS=[];function uI(t,e="",n=0,s=-1,a=-1){t.forEach((l,o)=>{let c=l.path;c?.startsWith("/")||(e?c=`${e}/${l.path}`.replace(/\/+/g,"/"):c=`/${l.path}`),c=c.replace(/\/+/g,"/"),l.index&&(c=e||"/");const d=n===0;d&&(a=uS.length,uS.push(c));const m={path:c,index:o,level:n,parentPath:e,topLevelIndex:a,topLevelPath:d?c:ws.get(e)?.topLevelPath||"/"};ws.set(c,m),l.children&&uI(l.children,c,n+1,o,a)})}uI(upe);const fs=()=>{const t=Kn(),e=pS(),n=f.useRef(null),[s,a]=f.useState("fade-down"),l=f.useRef(t),o=f.useRef(!0);f.useEffect(()=>{if(o.current){o.current=!1,l.current=t;return}const m=t.pathname,u=l.current.pathname;if(m===u)return;const h=ws.get(m)||d(m),p=ws.get(u)||d(u);let g="fade-down";h&&p&&(h.topLevelPath===p.topLevelPath?h.parentPath===p.parentPath?g=h.index>p.index?"fade-left":"fade-right":g=h.level<p.level?"fade-down":"fade-up":h.level===0&&p.level===0?g=h.index<p.index?"fade-down":"fade-up":h.parentPath===p.path?g="fade-left":p.parentPath===h.path?g="fade-right":g=h.topLevelIndex<p.topLevelIndex?"fade-down":"fade-up"),a(g),l.current=t},[t]);const c=f.useRef(new Map);function d(m){if(c.current.has(m))return c.current.get(m);if(ws.has(m))return ws.get(m);const u=m.replace(/\/+$/,""),h=`${u}/`;if(ws.has(u))return c.current.set(m,ws.get(u)),ws.get(u);if(ws.has(h))return c.current.set(m,ws.get(h)),ws.get(h);const p=ws.get("/")||{path:"/",index:0,level:0,parentPath:"",topLevelIndex:0,topLevelPath:"/"};return c.current.set(m,p),p}return i.jsx("div",{className:"route-container",children:i.jsx(Dg,{mode:"out-in",children:i.jsx(Ci,{nodeRef:n,timeout:300,classNames:s,unmountOnExit:!0,children:()=>i.jsx("div",{ref:n,className:"w-100",children:e})},t.pathname)})})};export{Y3 as $,xg as A,ES as B,NS as C,Mn as D,S as E,mpe as F,vpe as G,fpe as H,iE as I,L2 as J,yie as K,tpe as L,Dpe as M,Ab as N,Iu as O,UJ as P,tf as Q,Rpe as R,Dc as S,fs as T,oX as U,Ape as V,Sw as W,ad as X,tP as Y,Dg as Z,Ci as _,Sj as a,RJ as a0,IJ as a1,Ppe as a2,BR as a3,Ua as a4,KJ as a5,Bi as a6,Cn as a7,lX as a8,_J as a9,Un as aa,Wn as ab,xi as ac,XZ as ad,La as ae,Rn as af,At as ag,Ze as ah,Mpe as ai,Ipe as aj,Dee as ak,_t as al,ef as am,Mt as an,Yn as ao,Et as ap,lt as aq,Ae as ar,I3 as b,q3 as c,fm as d,kg as e,Db as f,CO as g,sO as h,kS as i,_O as j,Rt as k,vt as l,V3 as m,nE as n,tE as o,fg as p,Fl as q,Ma as r,eE as s,Xt as t,Hs as u,fb as v,vb as w,_c as x,ct as y,ko as z};
