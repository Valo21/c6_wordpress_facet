(()=>{"use strict";var t={338:(t,e,a)=>{var n=a(795);e.createRoot=n.createRoot,e.hydrateRoot=n.hydrateRoot},795:t=>{t.exports=window.ReactDOM}},e={};function a(n){var r=e[n];if(void 0!==r)return r.exports;var l=e[n]={exports:{}};return t[n](l,l.exports,a),l.exports}a.d=(t,e)=>{for(var n in e)a.o(e,n)&&!a.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},a.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),a.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var n={};a.r(n),a.d(n,{allowedMetaFields:()=>Ce,contentFetchStatus:()=>xe,contentSaveFiltered:()=>Te,contentSaveSource:()=>ye,contentSaveTranslate:()=>be,excerptSaveFiltered:()=>pe,excerptSaveSource:()=>ge,excerptSaveTranslate:()=>me,metaFieldsSaveFiltered:()=>Se,metaFieldsSaveSource:()=>we,metaFieldsSaveTranslate:()=>Ee,setBlockRules:()=>ve,slugSaveFiltered:()=>_e,slugSaveSource:()=>he,slugSaveTranslate:()=>fe,titleSaveFiltered:()=>ue,titleSaveSource:()=>ce,titleSaveTranslate:()=>de,translationInfo:()=>ke});var r={};a.r(r),a.d(r,{contentFetchStatus:()=>Oe,getAllowedMetaFields:()=>De,getBlockRules:()=>Re,getTranslatedString:()=>Ae,getTranslationEntries:()=>Pe,getTranslationEntry:()=>Le,getTranslationInfo:()=>Ne});var l=a(338);const o=window.wp.element,s=window.wp.data,i=window.wp.i18n,c=t=>{const e=lmatPageTranslationGlobal.providers,a=Object.keys(e).length;return React.createElement("div",{className:"modal-header",key:t.modalRender},React.createElement("span",{className:"close",onClick:()=>{t.setPopupVisibility(!1)}},"×"),React.createElement("h2",{className:"notranslate"},(0,i.sprintf)((0,i.__)("%sStart Automatic Translation Process","linguator-multilingual-ai-translation"),a>1?"Step 2 - ":"")),React.createElement("div",{className:"save_btn_cont"},React.createElement("button",{className:"notranslate save_it button button-primary",disabled:t.translatePendingStatus,onClick:t.updatePostData},t.translateButtonStatus?React.createElement(React.Fragment,null,React.createElement("span",{className:"updating-text"},(0,i.__)("Updating","linguator-multilingual-ai-translation"),React.createElement("span",{className:"dot",style:{"--i":0}}),React.createElement("span",{className:"dot",style:{"--i":1}}),React.createElement("span",{className:"dot",style:{"--i":2}}))):(0,i.__)("Update Content","linguator-multilingual-ai-translation"))))},d=window.React,u=(t,e)=>{const{item:a,saveFilteredString:n}=t,r=t.skipTags||[],l="#lmat_page_translation_open_translate_span#",o="#lmat_page_translation_close_translate_span#",s="#lmat_page_translation_temp_tag_open#",i="#lmat_page_translation_temp_tag_close#",c="#lmat_page_translation_less_then_symbol#",d="#lmat_page_translation_greater_then_symbol#",u="#lmat_page_translation_entity_open_translate_span#",g="#lmat_page_translation_entity_close_translate_span#",m="#lmat_page_translation_line_break_n_open#",p="#lmat_page_translation_line_break_n_close#",h="#lmat_page_translation_line_break_r_open#",f="#lmat_page_translation_line_break_r_close#",_=t=>t.replace(new RegExp(l,"g"),"").replace(new RegExp(o,"g"),""),y=t=>{const e=document.createElement("div");e.innerHTML=t;const a=e.firstElementChild;if(!a)return t;let n=a.childNodes,s=n.length;if(s>0){n=Array.from(n).sort((t,e)=>3===t.nodeType?-1:3===e.nodeType?1:0);for(let t=0;t<s;t++){let e=n[t];if(3===e.nodeType){let t=e.textContent.replace(/^\s+|^\.\s+|^\s.|\s+$|\.\s+$|\s.\+$/g,t=>`${l}${_(t)}${o}`);e.textContent=t}else if(8===e.nodeType)e.textContent=e.textContent;else{let t=y(e.outerHTML);e.outerHTML=t}}}let i=a.outerHTML.match(/^<[^>]+>/)[0];const c=new RegExp(`${l}|${o}`,"g");i=i.replace(c,"");const d=a.tagName.toLowerCase(),u=new RegExp(`</${d}>`,"i"),g=a.outerHTML.match(u);if("<style>"===i)return`${l}${_(a.outerHTML)}${o}`;let m=a.innerHTML;m=m.replace(/^\s+|^\.\s+|^\s.|\s+$|\.\s+$|\s.\+$/g,t=>`${l}${_(t)}${o}`),a.innerHTML="";let p="",h="",f="";if(h=`${l}${_(i)}${o}`,g&&(p=`${l}</${d}>${o}`),r.includes(d)){const t=new RegExp(`${l}|${o}`,"g");m=m.replace(t,""),m=`${l}${_(m)}${o}`}return""!==m?(""!==h&&(f=h+m),""!==p&&(f+=p)):f=h+p,a.outerHTML=f,e.innerHTML},b=e=>{/^(_yoast_wpseo_|rank_math_|_seopress_)/.test(t.contentKey.trim())&&(e=(t=>t.replace(/(%{1,2}[a-zA-Z0-9_]+%{0,2})/g,t=>`${l}${_(t)}${o}`))(e)),e=(t=>t.replace(/(\n)/g,()=>`${m}${p}`).replace(/(\r)/g,()=>`${h}${f}`))(e);const a=/\[(.*?)\]/g;"string"==typeof e&&e.match(a)&&(e=e.replace(a,t=>`${l}${_(t)}${o}`));let n=e;if((t=>(t=t.trim(),/^<([a-z][a-z0-9]*)\b[^>]*>(\s*(?:<!--.*?-->\s*)*<\/\1>)?$/i.test(t)))(e))n=e.replace(/<([a-z][a-z0-9]*)\b[^>]*>(\s*(?:<!--.*?-->\s*)*<\/\1>)?/gi,t=>`${l}${_(t)}${o}`);else{const t=document.createElement("div");t.innerHTML=(t=>{if("string"!=typeof t||!t.trim())return t;const e=/<\/?([a-zA-Z0-9]+)(\s[^>]*)?>/g,a=[];let n,r="",l=0;for(;null!==(n=e.exec(t));){const[o,c]=n,d=o.startsWith("</"),u=n.index;if(u>l&&(r+=t.slice(l,u)),d){const t=a.findIndex(t=>t.tag===c);-1!==t?(a.splice(t,1),r+=o):r+=`${s}<${c}>${i}`+o}else a.push({tag:c}),r+=o;l=e.lastIndex}l<t.length&&(r+=t.slice(l));for(let t=a.length-1;t>=0;t--){const{tag:e}=a[t];r+=`${s}</${e}>${i}`}return n=null,a.length=0,t=null,r})(e),function t(e){let a=e.childNodes;const n=e=>{if(a.length>e){let r=a[e],s=null;if(3===r.nodeType){const t=r.textContent.replace(/^\s+|^\.\s+|^\s.|\s+$|\.\s+$|\s.\+$|(\r?\n){2,}/g,t=>`${l}${_(t)}${o}`);s=document.createTextNode(t)}else if(8===r.nodeType)s=document.createTextNode(`${l}${c}!--${_(r.textContent)}--${d}${o}`);else if(1===r.nodeType){const e=r.childNodes,a=r.outerHTML.trim(),n=a.match(/^<([a-zA-Z0-9]+)(\s[^>]*)?>/i);if(!n)return a;const i=n[1],m=n[2]||"",p=new RegExp(`<\\/${i}>\\s*$`,"i").test(a);e.length>0&&t(r);let h=`${l}${c}${i}${_(m)}${d}${o}${(t=>t.replace(/&([a-zA-Z0-9#x]+);/g,t=>`${u}${t.replace(/&/g,"").replace(/;/g,"")}${g}`))(r.innerHTML)}`;p&&(h+=`${l}${c}/${i}${d}${o}`),s=document.createTextNode(h)}else{let t=r.outerHTML;t=t.replace(/<!--([\s\S]*?)-->/g,(t,e)=>`${l}${_(t)}${o}`);let e=y(t);s=document.createTextNode(e)}r.replaceWith(s),e++,n(e)}};return n(0),e}(t),n=t.innerText,n=n.replace(new RegExp(c,"g"),"<").replace(new RegExp(d,"g"),">"),n=((t,e)=>{if(t=t.trim(),!/<\/?(tr|td|th)\b[^>]*>/i.test(t))return e;if(/<\/?(tr|td|th)\b[^>]*>/i.test(e))return e;e=e.trim();const a=t.match(/^<(tr|td|th)\b[^>]*>/i),n=t.match(/<\/(tr|td|th)>\s*$/i);let r=e;return a&&(r=`${l}${_(a[0])}${o}`+r),n&&(r+=`${l}${_(n[0])}${o}`),r})(e,n)}const r=new RegExp(`${s}([\\s\\S]*?)(${i})`,"g");return n=n.replace(r,""),n=(t=>t.replace(new RegExp(m+p,"g"),`${l}\n${o}`).replace(new RegExp(h+f,"g"),`${l}\r${o}`))(n),n=(t=>t.replace(new RegExp(u,"g"),"&").replace(new RegExp(g,"g"),";"))(n),(t=>{const e=new RegExp(`(${l}[\\s\\S]*?${o})|'`);return t.split(e).filter(Boolean).filter(t=>""!==t.trim())})(n)},T=new RegExp(`${l}[\\s\\S]*?${o}`),w=new RegExp(`${l}|${o}`,"g"),E=t=>t.replace(w,"");(()=>{if(n&&a&&a.id&&a.type&&a.source&&!a.filteredString){const t=b(a.source).map((t,e)=>{if(T.test(t)){const e=document.createElement("p");return e.innerText=E(t),`<span class="notranslate lmat-page-translation-notraslate-tag" translate="no">${e.innerHTML}</span>`}return t}).join("");n(a.type,a.id,t)}})();const S=["google","localAiTranslator"].includes(t.service)?b(t.content):t.content;return React.createElement(React.Fragment,null,["localAiTranslator","google"].includes(t.service)?S.map((t,e)=>T.test(t)?React.createElement("span",{key:e,className:"notranslate lmat-page-translation-notraslate-tag",translate:"no"},E(t)):t):S)},g=({type:t,key:e,translateContent:a,source:n,provider:r,AllowedMetaFields:l})=>{if(["title","excerpt","slug"].includes(t)){const e=`${t}SaveTranslate`;(0,s.dispatch)("block-lmatPageTranslation/translate")[e](a,r)}else["metaFields"].includes(t)?Object.keys(l).includes(e)&&(0,s.dispatch)("block-lmatPageTranslation/translate").metaFieldsSaveTranslate(e,a,n,r):(0,s.dispatch)("block-lmatPageTranslation/translate").contentSaveTranslate(e,a,n,r)},m=({prefix:t=!1,start:e=!1,end:a=!1,translateStatus:n=!1})=>{const r=(a-e)/1e3,l={};if(t){if(l.provider=t,e&&a){const e=(0,s.select)("block-lmatPageTranslation/translate").getTranslationInfo().translateData[t]?.timeTaken||0;l.timeTaken=r+e}n&&(l.translateStatus=!0),(0,s.dispatch)("block-lmatPageTranslation/translate").translationInfo(l)}},p=({number:t})=>t>=1e6?(t/1e6).toFixed(1)+"M":t>=1e3?(t/1e3).toFixed(1)+"K":t,h=(t,e="none",a=!1)=>{!1===a&&(a=(0,s.select)("block-lmatPageTranslation/translate").getTranslationInfo().sourceCharacterCount);const n=document.querySelector(`.${t}-translator-strings-count`);n&&(n.style.display=e,n.querySelector(".totalChars").textContent=p({number:a}))},f=({container:t,provider:e,startTime:a,endTime:n,translateStatus:r,modalRenderId:l})=>{if(!document.querySelector(`#lmat-page-translation-${e}-strings-modal.modal-container[data-render-id="${l}"]`))return;t.querySelector(".lmat_page_translation_translate_progress").style.display="none",t.querySelector(".lmat_page_translation_string_container").style.animation="none",document.body.style.top="0";const o=t.querySelector("button.save_it");o.removeAttribute("disabled"),o.classList.add("translated"),o.classList.remove("notranslate"),(({provider:t,startTime:e,endTime:a})=>{const n=document.getElementById("lmat_page_translation_strings_model").querySelector(".lmat_page_translation_string_container").querySelectorAll('td.translate[data-string-type]:not([data-translate-status="translated"]):not(.notranslate):not([translate="no"])'),r=n.length,l=(0,s.select)("block-lmatPageTranslation/translate").getAllowedMetaFields();n.forEach((n,o)=>{const i=n.innerText,c=n.dataset.key,d=n.dataset.stringType,u=n.closest("tr").querySelector('td[data-source="source_text"]').innerText;g({type:d,key:c,translateContent:i,source:u,provider:t,AllowedMetaFields:l});const p=(0,s.select)("block-lmatPageTranslation/translate").getTranslationInfo().translateData[t],f=p&&p.targetStringCount?p.targetStringCount:0,_=p&&p.targetWordCount?p.targetWordCount:0,y=p&&p.targetCharacterCount?p.targetCharacterCount:0;""!==i.trim()&&i.trim().length>0&&(0,s.dispatch)("block-lmatPageTranslation/translate").translationInfo({targetStringCount:f+u.trim().split(/(?<=[.!?]+)\s+/).length,targetWordCount:_+u.trim().split(/\s+/).filter(t=>/[^\p{L}\p{N}]/.test(t)).length,targetCharacterCount:y+u.trim().length,provider:t}),o===r-1&&(jQuery(`.${t}-translator_progress`).css("width","100%"),h(t,"block"),m({prefix:t,start:e,end:a,translateStatus:!0}))})})({provider:e,startTime:a,endTime:n}),r(!1)},_=(t,e,a)=>{const n=(new Date).getTime();let r=!1;(t=>{if(document.querySelector(`#lmat-page-translation-${t}-progress-bar`))jQuery(`.${t}-translator_progress`).css("width","0%"),jQuery(`.${t}-translator-strings-count`).hide();else{const e=jQuery(`\n            <div id="lmat-page-translation-${t}-progress-bar" class="lmat-page-translation-translate-progress-bar">\n                <div class="${t}-translator_progress_bar" style="background-color: #f3f3f3;border-radius: 10px;overflow: hidden;margin: 1.5rem auto; width: 50%;">\n                <div class="${t}-translator_progress" style="overflow: hidden;transition: width .2s ease-in-out; border-radius: 10px;text-align: center;width: 0%;height: 20px;box-sizing: border-box;background-color: #4caf50; color: #fff; font-weight: 600;"></div>\n                </div>\n                <div style="display:none; color: white;" class="${t}-translator-strings-count hidden">\n                    Wahooo! You have saved your valuable time via auto translating \n                    <strong class="totalChars"></strong> characters using \n                    <strong>\n                        ${t} Translator\n                    </strong>\n                </div>\n            </div>\n        `);jQuery("#lmat_page_translation_strings_model .lmat_page_translation_translate_progress").append(e)}})(e);const l=document.getElementById("lmat_page_translation_strings_model"),o=l.querySelector(".lmat_page_translation_string_container");o.scrollTop=0;const s=o.scrollHeight;if(void 0!==s&&s>100){if(document.querySelector(".lmat_page_translation_translate_progress").style.display="block",setTimeout(()=>{const t=2e3*Math.ceil(s/o?.offsetHeight);(t=>{const{element:e,scrollSpeed:a,provider:n}=t;if(e.scrollHeight-e.offsetHeight<=0)return;const r=jQuery(`.${n}-translator_progress_bar`);let l=null,o=e.scrollTop;const s=()=>{const t=e.scrollHeight-e.offsetHeight+100,i=performance.now();l||(l=i);const c=o+(i-l)/a*(t+2e3-o);var d=e.scrollTop/(e.scrollHeight-e.clientHeight)*100;r.find(`.${n}-translator_progress`).css("width",d+"%");let u=(Math.round(10*d)/10).toFixed(1);u=Math.min(u,100).toString(),r.find(`.${n}-translator_progress`).text(u+"%"),c>t?h(n,"block"):(e.scrollTop=c,c<t&&setTimeout(s,16))};s()})({element:o,scrollSpeed:t,provider:e})},2e3),o.addEventListener("scroll",()=>{if(o.scrollTop+o.clientHeight+50>=o.scrollHeight&&!r){const o=(new Date).getTime();setTimeout(()=>{f({container:l,provider:e,startTime:n,endTime:o,translateStatus:t,modalRenderId:a})},4e3),r=!0}}),o.clientHeight+10>=s){jQuery(`.${e}-translator_progress`).css("width","100%"),jQuery(`.${e}-translator_progress`).text("100%"),h(e,"block");const r=(new Date).getTime();setTimeout(()=>{f({container:l,provider:e,startTime:n,endTime:r,translateStatus:t,modalRenderId:a})},4e3)}}else{jQuery(`.${e}-translator_progress`).css("width","100%"),jQuery(`.${e}-translator_progress`).text("100%"),h(e,"block");const r=(new Date).getTime();setTimeout(()=>{f({container:l,provider:e,startTime:n,endTime:r,translateStatus:t,modalRenderId:a})},4e3)}},y=t=>{const{sourceLang:e,targetLang:a,ID:n,translateStatusHandler:r,modalRenderId:l}=t;let o=a,s=e;"zh"===o&&(o=lmatPageTranslationGlobal.languageObject.zh?.locale.replace("_","-")),"zh"===s&&(s=lmatPageTranslationGlobal.languageObject.zh?.locale.replace("_","-")),new google.translate.TranslateElement({pageLanguage:s,includedLanguages:o,defaultLanguage:s,multilanguagePage:!0,autoDisplay:!1},n);const i=document.querySelector(`#${n}`);i&&i.children.length<=0&&Object.values(google?.translate?.TranslateElement()).map(t=>{t instanceof HTMLElement&&"lmat_page_translation_google_translate_element"===t.id&&i.replaceWith(t)}),document.querySelector(`#${n}`).addEventListener("change",()=>{_(r,"google",l)})};class b{static Object=t=>new this(t).extraData();constructor(t){this.btnSelector=t.btnSelector||!1,this.btnClass=t.btnClass||!1,this.btnText=t.btnText||`Translate To ${t.targetLanguageLabel}`,this.stringSelector=t.stringSelector||!1,this.progressBarSelector=t.progressBarSelector||!1,this.onStartTranslationProcess=t.onStartTranslationProcess||(()=>{}),this.onComplete=t.onComplete||(()=>{}),this.onLanguageError=t.onLanguageError||(()=>{}),this.onBeforeTranslate=t.onBeforeTranslate||(()=>{}),this.onAfterTranslate=t.onAfterTranslate||(()=>{}),this.sourceLanguage=t.sourceLanguage||"en",this.targetLanguage=t.targetLanguage||"hi",this.targetLanguageLabel=t.targetLanguageLabel||"Hindi",this.sourceLanguageLabel=t.sourceLanguageLabel||"English"}extraData=async()=>{const t=await b.languageSupportedStatus(this.sourceLanguage,this.targetLanguage,this.targetLanguageLabel,this.sourceLanguageLabel);return!0!==t?(this.onLanguageError(t),{}):(this.defaultLang=this.targetLanguage,{continueTranslation:this.continueTranslation,stopTranslation:this.stopTranslation,startTranslation:this.startTranslation,reInit:this.reInit,init:this.init})};static languageSupportedStatus=async(t,e,a,n)=>{const r=["en","es","ja","ar","de","bn","fr","hi","it","ko","nl","pl","pt","ru","th","tr","vi","zh","zh-hant","bg","cs","da","el","fi","hr","hu","id","iw","lt","no","ro","sk","sl","sv","uk","kn","ta","te","mr"].map(t=>t.toLowerCase()),l="https:"===window.location.protocol,o=window?.isSecureContext;if(!window.hasOwnProperty("chrome")||!navigator.userAgent.includes("Chrome")||navigator.userAgent.includes("Edg"))return jQuery('<span style="color: #ff4646; display: inline-block;">\n                <strong>Important Notice:</strong>\n                <ol>\n                    <li>The Translator API, which leverages Chrome local AI models, is designed specifically for use with the Chrome browser.</li>\n                    <li>For comprehensive information about the Translator API, <a href="https://developer.chrome.com/docs/ai/translator-api" target="_blank">click here</a>.</li>\n                </ol>\n                <p>Please ensure you are using the Chrome browser for optimal performance and compatibility.</p>\n            </span>');if(!("translation"in self&&"createTranslator"in self.translation||"ai"in self&&"translator"in self.ai||"Translator"in self&&"create"in self.Translator||l||o))return jQuery(`<span style="color: #ff4646; display: inline-block;">\n                <strong>Important Notice:</strong>\n                <ol>\n                    <li>\n                        The Translator API is not functioning due to an insecure connection.\n                    </li>\n                    <li>\n                        Please switch to a secure connection (HTTPS) or add this URL to the list of insecure origins treated as secure by visiting \n                        <span data-clipboard-text="chrome://flags/#unsafely-treat-insecure-origin-as-secure" target="_blank" class="chrome-ai-translator-flags">\n                            chrome://flags/#unsafely-treat-insecure-origin-as-secure ${b.svgIcons("copy")}\n                        </span>.\n                        Click on the URL to copy it, then open a new window and paste this URL to access the settings.\n                    </li>\n                </ol>\n            </span>`);if(!("translation"in self&&"createTranslator"in self.translation||"ai"in self&&"translator"in self.ai||"Translator"in self&&"create"in self.Translator))return jQuery(`<span style="color: #ff4646; display: inline-block;">\n                <h4>Steps to Enable the Translator AI Modal:</h4>\n                <ol>\n                    <li>Open this URL in a new Chrome tab: <strong><span data-clipboard-text="chrome://flags/#translation-api" target="_blank" class="chrome-ai-translator-flags">chrome://flags/#translation-api ${b.svgIcons("copy")}</span></strong>. Click on the URL to copy it, then open a new window and paste this URL to access the settings.</li>\n                    <li>Ensure that the <strong>Experimental translation API</strong> option is set to <strong>Enabled</strong>.</li>\n                    <li>Click on the <strong>Save</strong> button to apply the changes.</li>\n                    <li>The Translator AI modal should now be enabled and ready for use.</li>\n                </ol>\n                <p>For more information, please refer to the <a href="https://developer.chrome.com/docs/ai/translator-api" target="_blank">documentation</a>.</p>   \n                <p>If the issue persists, please ensure that your browser is up to date and restart your browser.</p>\n                <p>If you continue to experience issues after following the above steps, please <a href="https://my.coolplugins.net/account/support-tickets/" target="_blank" rel="noopener">open a support ticket</a> with our team. We are here to help you resolve any problems and ensure a smooth translation experience.</p>\n            </span>`);if(!r.includes(e.toLowerCase()))return jQuery(`<span style="color: #ff4646; display: inline-block;">\n                <strong>Language Support Information:</strong>\n                <ol>\n                    <li>The current version of Chrome AI Translator does not support the Target Language <strong>${a} (${e})</strong></li>\n                    <li>To view the list of supported languages, please <span data-clipboard-text="chrome://on-device-translation-internals" target="_blank" class="chrome-ai-translator-flags">chrome://on-device-translation-internals ${b.svgIcons("copy")}</span>. Click on the URL to copy it, then open a new window and paste this URL to access the settings.</li>\n                    <li>Ensure your Chrome browser is updated to the latest version for optimal performance.</li>\n                </ol>\n            </span>`);if(!r.includes(t.toLowerCase()))return jQuery(`<span style="color: #ff4646; display: inline-block;">\n                <strong>Language Support Information:</strong>\n                <ol>\n                    <li>The current version of Chrome AI Translator does not support the Source Language <strong>${n} (${t})</strong></li>\n                    <li>To view the list of supported languages, please <span data-clipboard-text="chrome://on-device-translation-internals" target="_blank" class="chrome-ai-translator-flags">chrome://on-device-translation-internals ${b.svgIcons("copy")}</span>. Click on the URL to copy it, then open a new window and paste this URL to access the settings.</li>\n                    <li>Ensure your Chrome browser is updated to the latest version for optimal performance.</li>\n                </ol>\n            </span>`);const s=await b.languagePairAvality(t,e);return"after-download"===s||"downloadable"===s||"unavailable"===s?jQuery(`<span style="color: #ff4646; display: inline-block;">\n                <h4>Installation Instructions for Language Packs:</h4>\n                <ol>\n                    <li>\n                        To proceed, please install the language pack for <strong>${a} (${e})</strong> or <strong>${n} (${t})</strong>.\n                    </li>\n                    <li>\n                        After installing the language pack, add this language to your browser's system languages in Chrome settings.<br>\n                        Go to <strong>Settings &gt; Languages &gt; Add languages</strong> and add <strong>${a}</strong> or <strong>${n}</strong> to your preferred languages list & reload the page.\n                    </li>\n                    <li>\n                        You can install it by visiting the following link: \n                        <strong>\n                            <span data-clipboard-text="chrome://on-device-translation-internals" target="_blank" class="chrome-ai-translator-flags">\n                                chrome://on-device-translation-internals ${b.svgIcons("copy")}\n                            </span>\n                        </strong>. Click on the URL to copy it, then open a new window and paste this URL to access the settings.\n                    </li>\n                    <li>\n                        Please check if both your source <strong>(<span style="color:#2271b1">${t}</span>)</strong> and target <strong>(<span style="color:#2271b1">${e}</span>)</strong> languages are available in the language packs list.\n                    </li>\n                    <li>\n                        You need to install both language packs for translation to work. You can search for each language by its language code: <strong>${t}</strong> and <strong>${e}</strong>.\n                    </li>\n                    <li>For more help, refer to the <a href="https://developer.chrome.com/docs/ai/translator-api#supported-languages" target="_blank">documentation to check supported languages</a>.</li>\n                </ol>\n            </span>`):"downloading"===s?jQuery(`<span style="color: #ff4646; display: inline-block;">\n                <h4>Language Pack Download In Progress:</h4>\n                <ol>\n                    <li>\n                        The language pack for <strong>${a} (${e})</strong> or <strong>${n} (${t})</strong> is already being downloaded.\n                    </li>\n                    <li>\n                        <strong>You do not need to start the download again.</strong> Please wait for the download to complete. Once finished, the translation feature will become available automatically.\n                    </li>\n                    <li>\n                        You can check the download progress by opening:\n                        <strong>\n                            <span data-clipboard-text="chrome://on-device-translation-internals" target="_blank" class="chrome-ai-translator-flags">\n                                chrome://on-device-translation-internals ${b.svgIcons("copy")}\n                            </span>\n                        </strong>\n                        . Click on the URL to copy it, then open a new window and paste this URL in Chrome to view the status.\n                    </li>\n                    <li>\n                        <strong>What to do next:</strong>\n                        <ul style="margin-top: .5em;">\n                            <li>Wait for the download to finish. The status will change to <strong>Ready</strong> or <strong>Installed</strong> in the <strong>Language Packs</strong> section.</li>\n                            <li>After the language pack is installed, you may need to <strong>reload</strong> or <strong>restart</strong> your browser for the changes to take effect.</li>\n                        </ul>\n                    </li>\n                    <li>\n                        For more help, refer to the <a href="https://developer.chrome.com/docs/ai/translator-api#supported-languages" target="_blank">documentation to check supported languages</a>.\n                    </li>\n                </ol>\n                <div style="text-align: right;">\n                    <button onclick="location.reload()" class="lmat-page-translation-error-reload-btn">Reload Page</button>\n                </div>\n            </span>`):"readily"===s||"available"===s||jQuery(`<span style="color: #ff4646; display: inline-block;">\n                <h4>Language Pack Installation Required</h4>\n                <ol>\n                    <li>Please ensure that the language pack for <strong>${a} (${e})</strong> or <strong>${n} (${t})</strong> is installed and set as a preferred language in your browser.</li>\n                    <li>To install the language pack, visit <strong><span data-clipboard-text="chrome://on-device-translation-internals" target="_blank" class="chrome-ai-translator-flags">chrome://on-device-translation-internals ${b.svgIcons("copy")}</span></strong>. Click on the URL to copy it, then open a new window and paste this URL to access the settings.</li>\n                    <li>If you encounter any issues, please refer to the <a href="https://developer.chrome.com/docs/ai/translator-api#supported-languages" target="_blank">documentation to check supported languages</a> for further assistance.</li>\n                </ol>\n            </span>`)};static languagePairAvality=async(t,e)=>{try{await self.Translator.create({sourceLanguage:t,targetLanguage:e,monitor(t){t.addEventListener("downloadprogress",t=>{console.log(`Downloaded ${100*t.loaded}%`)})}})}catch(t){console.log("err",t)}if("translation"in self&&"createTranslator"in self.translation)return await self.translation.canTranslate({sourceLanguage:t,targetLanguage:e});if("ai"in self&&"translator"in self.ai){const a=await self.ai.translator.capabilities();return await a.languagePairAvailable(t,e)}return"Translator"in self&&"create"in self.Translator&&await self.Translator.availability({sourceLanguage:t,targetLanguage:e})};AITranslator=async t=>"translation"in self&&"createTranslator"in self.translation?await self.translation.createTranslator({sourceLanguage:this.sourceLanguage,targetLanguage:t}):"ai"in self&&"translator"in self.ai?await self.ai.translator.create({sourceLanguage:this.sourceLanguage,targetLanguage:t}):"Translator"in self&&"create"in self.Translator&&await self.Translator.create({sourceLanguage:this.sourceLanguage,targetLanguage:t});init=async()=>{this.appendBtn(),this.translationStart=!1,this.completedTranslateIndex=0,this.completedCharacterCount=0,this.translateBtnEvents(),this.progressBarSelector&&this.addProgressBar()};appendBtn=()=>{this.translateBtn=jQuery(`<button class="button button-primary${this.btnClass?" "+this.btnClass:""}">${this.btnText}</button>`),jQuery(this.btnSelector).append(this.translateBtn)};formatCharacterCount=t=>t>=1e6?(t/1e6).toFixed(1)+"M":t>=1e3?(t/1e3).toFixed(1)+"K":t;translateBtnEvents=t=>this.btnSelector&&0!==jQuery(this.btnSelector).length?this.stringSelector&&0!==jQuery(this.stringSelector).length?(this.translateStatus=!0,this.translateBtn.off("click"),this.translateBtn.prop("disabled",!1),void(this.translationStart?this.translateStringEle.length>this.completedTranslateIndex+1?this.translateBtn.on("click",()=>{this.onStartTranslationProcess(),this.stringTranslation(this.completedTranslateIndex+1)}):(this.onComplete({translatedStringsCount:this.completedCharacterCount}),this.translateBtn.prop("disabled",!0)):this.translateBtn.on("click",this.startTranslationProcess))):this.onLanguageError("The string selector is missing. Please provide a valid selector for the strings to be translated."):this.onLanguageError("The button selector is missing. Please provide a valid selector for the button.");startTranslationProcess=async()=>{this.onStartTranslationProcess();const t=this.defaultLang;this.translationStart=!0,this.translateStringEle=jQuery(this.stringSelector),this.totalStringCount=Array.from(this.translateStringEle).map(t=>t.innerText.length).reduce((t,e)=>t+e,0),this.translator=await this.AITranslator(t),this.translateStringEle.length>0&&await this.stringTranslation(this.completedTranslateIndex)};stringTranslation=async t=>{if(!this.translateStatus)return;const e=this.translateStringEle[t];this.onBeforeTranslate(e);const a=e.innerText;let n=[];(e.childNodes.length>0&&!e.querySelector(".notranslate")||e.querySelector(".notranslate"))&&e.childNodes.forEach(t=>{3===t.nodeType&&""!==t.nodeValue.trim()?n.push(t):t.classList&&!t.classList.contains("notranslate")&&this.filterInnerTextNodes(t,n)}),n.length>0&&await this.stringTranslationBatch(n,0),this.completedCharacterCount+=a.length,this.completedTranslateIndex=t,this.progressBarSelector&&this.updateProgressBar(),this.onAfterTranslate(e),this.translateStringEle.length>t+1&&await this.stringTranslation(this.completedTranslateIndex+1),t===this.translateStringEle.length-1&&(this.translateBtn.prop("disabled",!0),this.onComplete({characterCount:this.completedCharacterCount}),jQuery(this.progressBarSelector).find(".chrome-ai-translator-strings-count").show().find(".totalChars").text(this.formatCharacterCount(this.completedCharacterCount)))};filterInnerTextNodes=(t,e)=>{const a=t.childNodes;t.classList&&t.classList.contains("notranslate")||a.forEach(t=>{3===t.nodeType&&""!==t.nodeValue.trim()?e.push(t):t.classList&&!t.classList.contains("notranslate")&&this.filterInnerTextNodes(t,e)})};stringTranslationBatch=async(t,e)=>{const a=await this.translator.translate(t[e].nodeValue);return a&&""!==a&&(t[e].nodeValue=a),e<t.length-1&&await this.stringTranslationBatch(t,e+1),!0};addProgressBar=()=>{if(!document.querySelector("#chrome-ai-translator-modal .chrome-ai-translator_progress_bar")){const t=jQuery('\n                <div class="chrome-ai-translator_progress_bar" style="background-color: #f3f3f3;border-radius: 10px;overflow: hidden;margin: 1.5rem auto; width: 50%;">\n                <div class="chrome-ai-translator_progress" style="overflow: hidden;transition: width .5s ease-in-out; border-radius: 10px;text-align: center;width: 0%;height: 20px;box-sizing: border-box;background-color: #4caf50; color: #fff; font-weight: 600;"></div>\n                </div>\n                <div style="display:none; color: white;" class="chrome-ai-translator-strings-count hidden">\n                    Wahooo! You have saved your valuable time via auto translating \n                    <strong class="totalChars">0</strong> characters using \n                    <strong>\n                        Chrome AI Translator\n                    </strong>\n                </div>\n            ');jQuery(this.progressBarSelector).append(t)}};updateProgressBar=()=>{const t=this.completedCharacterCount/this.totalStringCount*1e3/10;let e=t.toString().split(".")[1]||"";e=e.length>0&&"0"!==e[0]?e[0]:"";let a=parseInt(t)+""+(""!==e?"."+e:"");a=Math.min(a,100),jQuery(".chrome-ai-translator_progress").css({width:`${a}%`}).text(`${a}%`)};stopTranslation=()=>{this.translateStatus=!1};reInit=()=>{this.translateBtnEvents()};startTranslation=()=>{this.translateStatus=!0,this.startTranslationProcess(this.completedTranslateIndex+1)};static svgIcons=t=>({copy:'<svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 448 512" height="16px" width="16px" xmlns="http://www.w3.org/2000/svg" fill="#2271b1"><path d="M433.941 65.941l-51.882-51.882A48 48 0 0 0 348.118 0H176c-26.51 0-48 21.49-48 48v48H48c-26.51 0-48 21.49-48 48v320c0 26.51 21.49 48 48 48h224c26.51 0 48-21.49 48-48v-48h80c26.51 0 48-21.49 48-48V99.882a48 48 0 0 0-14.059-33.941zM266 464H54a6 6 0 0 1-6-6V150a6 6 0 0 1 6-6h74v224c0 26.51 21.49 48 48 48h96v42a6 6 0 0 1-6 6zm128-96H182a6 6 0 0 1-6-6V54a6 6 0 0 1 6-6h106v88c0 13.255 10.745 24 24 24h88v202a6 6 0 0 1-6 6zm6-256h-64V48h9.632c1.591 0 3.117.632 4.243 1.757l48.368 48.368a6 6 0 0 1 1.757 4.243V112z"></path></svg>'}[t]||"")}const T=b,w=async t=>{const e=lmatPageTranslationGlobal.languageObject[t.targetLang].name,a=lmatPageTranslationGlobal.languageObject[t.sourceLang].name,n=(0,s.select)("block-lmatPageTranslation/translate").getAllowedMetaFields(),{translateStatusHandler:r,translateStatus:l}=t;let o=0;const c=await T.Object({mainWrapperSelector:"#lmat_page_translation_strings_model",btnSelector:`#${t.ID}`,btnClass:"local_ai_translator_btn",btnText:(0,i.__)("Translate To","linguator-multilingual-ai-translation")+" "+e,stringSelector:".lmat_page_translation_string_container tbody tr td.translate:not([data-translate-status='translated'])",progressBarSelector:"#lmat_page_translation_strings_model .lmat_page_translation_translate_progress",sourceLanguage:t.sourceLang,targetLanguage:t.targetLang,targetLanguageLabel:e,sourceLanguageLabel:a,onStartTranslationProcess:()=>{o=(new Date).getTime(),jQuery("#lmat_page_translation_strings_model .modal-content .lmat_page_translation_string_container")[0].scrollHeight>100&&jQuery("#lmat_page_translation_strings_model .lmat_page_translation_translate_progress").fadeIn("slow")},onComplete:()=>{m({prefix:"localAiTranslator",start:o,end:(new Date).getTime(),translateStatus:!0}),setTimeout(()=>{r(!1),jQuery("#lmat_page_translation_strings_model .lmat_page_translation_translate_progress").fadeOut("slow")},4e3)},onBeforeTranslate:t=>{const e=jQuery("#lmat_page_translation_strings_model .modal-content .lmat_page_translation_string_container");if(e.length<1)return c.stopTranslation(),m({prefix:"localAiTranslator",start:o,end:(new Date).getTime()}),void(o=0);const a=e[0].getBoundingClientRect(),n=t.closest("tr").offsetTop,r=e.height();var l;n>r+a.y&&(l=n-r+t.offsetHeight,e.scrollTop(l))},onAfterTranslate:t=>{const e=t.innerText,a=t.dataset.stringType,r=t.dataset.key,l=t.closest("tr").querySelector('td[data-source="source_text"]').innerText;g({type:a,key:r,translateContent:e,source:l,provider:"localAiTranslator",AllowedMetaFields:n});const o=(0,s.select)("block-lmatPageTranslation/translate").getTranslationInfo().translateData?.localAiTranslator,i=o&&o.targetStringCount?o.targetStringCount:0,c=o&&o.targetWordCount?o.targetWordCount:0,d=o&&o.targetCharacterCount?o.targetCharacterCount:0;""!==e.trim()&&e.trim().length>0&&(0,s.dispatch)("block-lmatPageTranslation/translate").translationInfo({targetStringCount:i+l.trim().split(/(?<=[.!?]+)\s+/).length,targetWordCount:c+l.trim().split(/\s+/).filter(t=>/[^\p{L}\p{N}]/.test(t)).length,targetCharacterCount:d+l.trim().length,provider:"localAiTranslator"})}});if(c.hasOwnProperty("init")){c.init();const t=document.querySelector("#lmat_page_translation_localAiTranslator_translate_element .local_ai_translator_btn");t&&l&&(t.disabled=l)}},E=({className:t})=>React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48",className:t},React.createElement("defs",null,React.createElement("linearGradient",{id:"chrome-a",x1:"3.2173",y1:"15",x2:"44.7812",y2:"15",gradientUnits:"userSpaceOnUse"},React.createElement("stop",{offset:"0",stopColor:"#d93025"}),React.createElement("stop",{offset:"1",stopColor:"#ea4335"})),React.createElement("linearGradient",{id:"chrome-b",x1:"20.7219",y1:"47.6791",x2:"41.5039",y2:"11.6837",gradientUnits:"userSpaceOnUse"},React.createElement("stop",{offset:"0",stopColor:"#fcc934"}),React.createElement("stop",{offset:"1",stopColor:"#fbbc04"})),React.createElement("linearGradient",{id:"chrome-c",x1:"26.5981",y1:"46.5015",x2:"5.8161",y2:"10.506",gradientUnits:"userSpaceOnUse"},React.createElement("stop",{offset:"0",stopColor:"#1e8e3e"}),React.createElement("stop",{offset:"1",stopColor:"#34a853"}))),React.createElement("circle",{cx:"24",cy:"23.9947",r:"12",fill:"#fff"}),React.createElement("path",{d:"M3.2154,36A24,24,0,1,0,12,3.2154,24,24,0,0,0,3.2154,36ZM34.3923,18A12,12,0,1,1,18,13.6077,12,12,0,0,1,34.3923,18Z",fill:"none"}),React.createElement("path",{d:"M24,12H44.7812a23.9939,23.9939,0,0,0-41.5639.0029L13.6079,30l.0093-.0024A11.9852,11.9852,0,0,1,24,12Z",fill:"url(#chrome-a)"}),React.createElement("circle",{cx:"24",cy:"24",r:"9.5",fill:"#1a73e8"}),React.createElement("path",{d:"M34.3913,30.0029,24.0007,48A23.994,23.994,0,0,0,44.78,12.0031H23.9989l-.0025.0093A11.985,11.985,0,0,1,34.3913,30.0029Z",fill:"url(#chrome-b)"}),React.createElement("path",{d:"M13.6086,30.0031,3.218,12.006A23.994,23.994,0,0,0,24.0025,48L34.3931,30.0029l-.0067-.0068a11.9852,11.9852,0,0,1-20.7778.007Z",fill:"url(#chrome-c)"})),S=({className:t})=>React.createElement("svg",{className:t,viewBox:"-3 0 262 262",xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"xMidYMid"},React.createElement("path",{d:"M255.878 133.451c0-10.734-.871-18.567-2.756-26.69H130.55v48.448h71.947c-1.45 12.04-9.283 30.172-26.69 42.356l-.244 1.622 38.755 30.023 2.685.268c24.659-22.774 38.875-56.282 38.875-96.027",fill:"#4285F4"}),React.createElement("path",{d:"M130.55 261.1c35.248 0 64.839-11.605 86.453-31.622l-41.196-31.913c-11.024 7.688-25.82 13.055-45.257 13.055-34.523 0-63.824-22.773-74.269-54.25l-1.531.13-40.298 31.187-.527 1.465C35.393 231.798 79.49 261.1 130.55 261.1",fill:"#34A853"}),React.createElement("path",{d:"M56.281 156.37c-2.756-8.123-4.351-16.827-4.351-25.82 0-8.994 1.595-17.697 4.206-25.82l-.073-1.73L15.26 71.312l-1.335.635C5.077 89.644 0 109.517 0 130.55s5.077 40.905 13.925 58.602l42.356-32.782",fill:"#FBBC05"}),React.createElement("path",{d:"M130.55 50.479c24.514 0 41.05 10.589 50.479 19.438l36.844-35.974C195.245 12.91 165.798 0 130.55 0 79.49 0 35.393 29.301 13.925 71.947l42.211 32.783c10.59-31.477 39.891-54.251 74.414-54.251",fill:"#EB4335"})),v=t=>{t=t||{};const{Service:e=!1,openErrorModalHandler:a=()=>{}}=t,n=window.lmatPageTranslationGlobal.lmat_url+"admin/assets/images/error-icon.svg",r=window.lmatPageTranslationGlobal.providers,l={google:{Provider:y,title:"Google Translate",SettingBtnText:"Translate",serviceLabel:"Google Translate",Docs:"https://docs.coolplugins.net/doc/google-translate-for-polylang/?utm_source=twlmat_plugin&utm_medium=inside&utm_campaign=docs&utm_content=popup_google_pro",heading:(0,i.__)("Choose Language","linguator-multilingual-ai-translation"),BetaEnabled:!1,ButtonDisabled:t.googleButtonDisabled,ErrorMessage:t.googleButtonDisabled?React.createElement("div",{className:"lmat-page-translation-provider-error button button-primary",onClick:()=>a("google")},React.createElement("img",{src:n,alt:"error"})," ",(0,i.__)("View Error","linguator-multilingual-ai-translation")):React.createElement(React.Fragment,null),Logo:React.createElement(S,{className:"icon-size"})},localAiTranslator:{Provider:w,title:"Chrome Built-in AI",SettingBtnText:"Translate",serviceLabel:"Chrome AI Translator",heading:(0,i.sprintf)((0,i.__)("Translate Using %s","linguator-multilingual-ai-translation"),"Chrome built-in API"),Docs:"https://docs.coolplugins.net/doc/chrome-ai-translation-polylang/?utm_source=twlmat_plugin&utm_medium=inside&utm_campaign=docs&utm_content=popup_chrome_pro",BetaEnabled:!0,ButtonDisabled:t.localAiTranslatorButtonDisabled,ErrorMessage:t.localAiTranslatorButtonDisabled?React.createElement("div",{className:"lmat-page-translation-provider-error button button-primary",onClick:()=>a("localAiTranslator")},React.createElement("img",{src:n,alt:"error"})," ",(0,i.__)("View Error","linguator-multilingual-ai-translation")):React.createElement(React.Fragment,null),Logo:React.createElement(E,{className:"icon-size"})}},o={};return r.forEach(t=>{o[t]=l[t]}),e?o[e]:o};var k=a(795);const C=({position:t,sourceLang:e,targetLang:a,selectedSourceText:n,onClose:r,setGlossaryTerms:l,setGlossaryOrignalTerms:o})=>{const[s,i]=(0,d.useState)("general"),[c,u]=(0,d.useState)(n||""),[g,m]=(0,d.useState)(n||""),[p,h]=(0,d.useState)(""),[f,_]=(0,d.useState)(""),[y,b]=(0,d.useState)(!1),[T,w]=(0,d.useState)(""),[E,S]=(0,d.useState)(""),[v,k]=(0,d.useState)([]);(0,d.useEffect)(()=>{if(n)if(n.includes("<")&&n.includes(">")){const t=(t=>{const e=document.createElement("div");e.innerHTML=t;const a=[],n=document.createTreeWalker(e,NodeFilter.SHOW_TEXT,null,!1);let r;for(;r=n.nextNode();){const t=r.textContent.trim();if(t&&t.length>1){const e=r.parentElement;if(e){const t=e.textContent.trim();t.endsWith(":")&&a.push(t)}a.push(t)}}return[...new Set(a)]})(n);if(k(t),t.length>0){const e=(t=>{if(!t||0===t.length)return"";for(const e of t){const t=e.trim();if(t.endsWith(":")||/^(Label|Title|Heading|Text):/i.test(t))return t}return t[0]||""})(t);m(e),u(e)}}else m(n),u(n),k([])},[n]);const C=(0,d.useRef)(null),x=(0,d.useRef)(null);(0,d.useEffect)(()=>{const t=t=>{const e=C.current,a=x.current||document.querySelector(".lmat-page-translation-info-popup"),n=e&&!e.contains(t.target),l=!a||!a.contains(t.target);n&&l&&r()};return document.addEventListener("mousedown",t),()=>document.removeEventListener("mousedown",t)},[r]);const P={};return"undefined"!=typeof window&&null!=t?.right&&(P.right=window.innerWidth-t.right),"undefined"!=typeof window&&null!=t?.bottom?(P.bottom=window.innerHeight-t.bottom+20,null!=P.right&&(P.right=P.right-30)):null!=t?.top&&(P.top=t.top),d.createElement("div",{ref:C,className:"lmat-page-translation-glossary-popup lmat-page-translation-add-glossary-popup",style:P,onClick:t=>t.stopPropagation(),role:"dialog","aria-modal":"true","aria-labelledby":"lmat-page-translation-add-glossary-title"},d.createElement("div",{className:"lmat-page-translation-glossary-popup__header"},d.createElement("span",{id:"lmat-page-translation-add-glossary-title"},"Add New Glossary Term")),d.createElement("form",{onSubmit:async t=>{if(t.preventDefault(),b(!0),w(""),!s||!c?.trim()||!e?.trim())return w("Type, Term, and Source Language are required."),void b(!1);try{if(!lmatPageTranslationGlobal?.add_glossary_validate)return w("Security token missing. Please refresh the page."),void b(!1);const n=new FormData;n.append("action","lmat_add_glossary"),n.append("_wpnonce",lmatPageTranslationGlobal.add_glossary_validate),n.append("type",s),n.append("term",c.trim()),n.append("description",f||""),n.append("source_lang",e),p&&p.trim()&&a&&n.append(`translations[${a}]`,p.trim());const i=lmatPageTranslationGlobal?.ajaxurl||ajaxurl,d=await fetch(i,{method:"POST",credentials:"same-origin",body:n});let u;try{const e=await d.text();try{u=JSON.parse(e)}catch(t){throw console.error("Failed to parse response:",e),new Error("Invalid response from server")}}catch(t){throw console.error("Error reading response:",t),new Error("Failed to read server response")}if(u?.success){if("function"==typeof l)try{const t={action:"lmat_get_glossary",source_lang:e,target_lang:a,_wpnonce:lmatPageTranslationGlobal.get_glossary_validate},n=`${lmatPageTranslationGlobal.ajax_url}`,s=await fetch(n,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8",Accept:"application/json"},credentials:"same-origin",body:new URLSearchParams(t)});if(s.ok){const t=await s.json();if(t?.success){let e=[];t.data.terms.forEach(t=>{t.original_term&&""!==t.original_term&&e.push(t.original_term)}),o(e),l(t.data?.terms||[]),S("Glossary term added successfully!"),setTimeout(()=>{r()},3e3)}}}catch(t){console.error("Error refreshing glossary:",t)}}else{const t=u?.data||"Could not add glossary term";w("This term already exists in this language."===t?"This term already exists in this language.":"Permission denied"===t?"You do not have permission to add glossary terms.":"string"==typeof t?t:"Failed to add glossary term.")}}catch(t){console.error("Error saving glossary term:",t),w("Failed to add glossary term. Please try again.")}finally{b(!1)}},className:"lmat-page-translation-add-glossary-form"},d.createElement("div",{className:"lmat-page-translation-form-group"},d.createElement("label",{htmlFor:"lmat-page-translation-type"},"Type:"),d.createElement("select",{id:"lmat-page-translation-type",value:s,onChange:t=>i(t.target.value),required:!0},d.createElement("option",{value:"general"},"General"),d.createElement("option",{value:"name"},"Name"))),d.createElement("div",{className:"lmat-page-translation-form-group"},v.length>0?d.createElement(d.Fragment,null,d.createElement("div",{className:"lmat-page-translation-form-group"},d.createElement("label",{htmlFor:"lmat-page-translation-term-select"},"Select Glossary Term:"),d.createElement("select",{id:"lmat-page-translation-term-select",value:g,onChange:t=>{const e=t.target.value;m(e),u(e)},required:!0},v.map((t,e)=>{const a=t.length>50?t.substring(0,47)+"...":t;return d.createElement("option",{key:e,value:t},a)}))),d.createElement("div",{className:"lmat-page-translation-form-group",style:{marginTop:"16px"}},d.createElement("label",{htmlFor:"lmat-page-translation-term"},"Glossary Term:"),d.createElement("input",{id:"lmat-page-translation-term",type:"text",value:c,onChange:t=>u(t.target.value),placeholder:"Edit selected text if needed",required:!0}))):d.createElement("div",{className:"lmat-page-translation-form-group"},d.createElement("label",{htmlFor:"lmat-page-translation-term"},"Glossary Term:"),d.createElement("input",{id:"lmat-page-translation-term",type:"text",value:c,onChange:t=>u(t.target.value),placeholder:"Enter source term",required:!0}))),d.createElement("div",{className:"lmat-page-translation-form-group"},d.createElement("label",{htmlFor:"lmat-page-translation-translation"},"Custom Translation ",a?`(${a})`:"",":"),d.createElement("input",{id:"lmat-page-translation-translation",type:"text",value:p,onChange:t=>h(t.target.value),placeholder:"Enter custom translation..."})),d.createElement("div",{className:"lmat-page-translation-form-group"},d.createElement("label",{htmlFor:"lmat-page-translation-description"},"Description (optional):"),d.createElement("textarea",{id:"lmat-page-translation-description",value:f,onChange:t=>_(t.target.value),placeholder:"Enter term description (optional)...",rows:3})),T&&d.createElement("div",{className:"lmat-page-translation-error-message",role:"alert"},T),E&&d.createElement("div",{className:"lmat-page-translation-success-message",role:"alert"},E),d.createElement("div",{className:"lmat-page-translation-form-actions"},d.createElement("button",{type:"button",onClick:r,className:"button button-secondary"},"Cancel"),d.createElement("button",{type:"submit",className:"button button-primary",disabled:y},y?"Saving...":"Save"))))},x=d.forwardRef(({left:t,top:e,onClose:a,onGlossaryClick:n,onAddGlossary:r,glossaryOpen:l,glossaryCount:o=0,onSave:s,onCopy:i,disableGlossary:c=!1,showAddGlossary:u=!1},g)=>{const m=lmatPageTranslationGlobal.lmat_url+"assets/images/";return d.useEffect(()=>{const t=()=>a(),e=[document.getElementById("lmat-page-translation-ai-translate-btn"),document.getElementsByClassName("local_ai_translator_btn")[0],document.querySelector(".goog-te-combo"),document.getElementById("yt-widget")].filter(Boolean);return e.forEach(e=>{const a="SELECT"===e.tagName?"change":"click";e.addEventListener(a,t)}),()=>{e.forEach(e=>{const a="SELECT"===e.tagName?"change":"click";e.removeEventListener(a,t)})}},[a]),d.createElement("div",{ref:g,className:"lmat-page-translation-info-popup",style:{left:t,top:e},onClick:t=>t.stopPropagation()},d.createElement("button",{className:"lmat-page-translation-info-popup__close",onClick:a,"aria-label":"Close",title:"Close"},d.createElement("img",{src:m+"cross.png",alt:"Close"})),d.createElement("button",{className:"lmat-page-translation-info-popup__glossary"+(c?" lmat-page-translation-disabled":""),onClick:c?null:n,title:c?"No glossary terms available":"Glossary",disabled:c},d.createElement("span",{className:"lmat-page-translation-bookmark-icon-wrapper"},d.createElement("img",{src:m+"bookmark.png",alt:"Glossary",className:`lmat-page-translation-bookmark-icon${l?" lmat-page-translation-bookmark-icon--active":""}${c?" lmat-page-translation-bookmark-icon--disabled":""}`}),o>0&&d.createElement("span",{className:"lmat-page-translation-bookmark-badge"},o))),d.createElement("button",{className:"lmat-page-translation-info-popup__add-glossary"+(u?" lmat-page-translation-active":""),onClick:r,title:"Add to Glossary"},d.createElement("img",{src:m+"plus.png",alt:"Add Glossary",className:"lmat-page-translation-add-icon"+(u?" lmat-page-translation-add-icon--active":"")})),d.createElement("button",{className:"lmat-page-translation-info-popup__copy",onClick:i,title:"Copy"},d.createElement("img",{src:m+"copy.png",alt:"Copy",className:"lmat-page-translation-copy-icon"})),d.createElement("button",{className:"lmat-page-translation-info-popup__save",onClick:s,"aria-label":"Save",title:"Save"},d.createElement("img",{src:m+"save.png",alt:"Save",className:"lmat-page-translation-save-icon"})))}),P=({position:t,terms:e=[],targetLangLabel:a="Translation",sourceLangLabel:n="English",onInsert:r})=>{const l={right:window.innerWidth-t.right};t.bottom?(l.bottom=window.innerHeight-t.bottom+20,l.right=l.right-30):l.top=t.top;const o=(t,e=23,a=20)=>t?t.length>e?t.slice(0,a)+"…":t:"",s=lmatPageTranslationGlobal.lmat_url+"assets/images/";return d.createElement("div",{className:"lmat-page-translation-glossary-popup",style:l,onClick:t=>t.stopPropagation()},d.createElement("div",{className:"lmat-page-translation-glossary-popup__header"},d.createElement("span",{className:"lmat-page-translation-glossary-popup__icon"},d.createElement("img",{src:s+"bookmark.png",alt:"Glossary",className:"lmat-page-translation-bookmark-icon"})),"Glossary term in this sentence",d.createElement("span",{className:"lmat-page-translation-glossary-popup__badge"},e.length)),d.createElement("table",null,d.createElement("thead",null,d.createElement("tr",null,d.createElement("th",null,n),d.createElement("th",null,a),d.createElement("th",null,"Description"),d.createElement("th",null))),d.createElement("tbody",null,e.map((t,e)=>d.createElement("tr",{key:e},d.createElement("td",{title:t.english},o(t.english)),d.createElement("td",{title:t.translation},o(t.translation)),d.createElement("td",{title:t.description},o(t.description)),d.createElement("td",null,d.createElement("button",{className:"lmat-page-translation-glossary-insert",onClick:()=>r&&r(t)},"Insert")))))))},L=({string:t,glossary:e})=>{let a=0;if(e.forEach(e=>{t.includes(e)&&a++}),!a||a<1)return null;const n=lmatPageTranslationGlobal.lmat_url+"assets/images/bookmark.png";return React.createElement("span",{className:"lmat-page-translation-glossary-count"},React.createElement("img",{src:n,alt:"Glossary",className:"lmat-page-translation-glossary-count-icon"}),React.createElement("span",{className:"lmat-page-translation-glossary-count-badge"},a))},R=t=>{const{service:e}=t,a=(0,s.select)("block-lmatPageTranslation/translate").getTranslationEntries(),n=t.stringModalBodyNotice,r=lmatPageTranslationGlobal.lmat_url+"admin/assets/images/",l=(0,d.useRef)(null),[c,m]=(0,d.useState)(null),[p,h]=(0,d.useState)(null),[f,_]=(0,d.useState)({left:0,top:0}),[y,b]=(0,d.useState)({left:0,top:0}),[T,w]=(0,d.useState)([]),[E,S]=(0,d.useState)({}),R=(0,d.useRef)({}),[A,N]=(0,d.useState)([]),[D,$]=(0,d.useState)([]),[O,F]=(0,d.useState)(""),[I,j]=(0,d.useState)(null),[M,G]=(0,d.useState)({}),B="glossary"===p,H="add-glossary"===p,U=(t,e,a)=>{const n=`${t}SaveFiltered`;(0,s.dispatch)("block-lmatPageTranslation/translate")[n](a,e)},z=(t,e=!1)=>{const a=document.querySelector(".lmat_page_translation_string_container");if(!a)return{right:t.right-(e?4:0),top:t.bottom+4};const n=a.getBoundingClientRect(),r={right:t.right-(e?4:0)},l=n.bottom-t.bottom,o=t.top-n.top;return l<200?o>=200?r.bottom=window.innerHeight-t.top+4:(r.top=n.top+window.scrollY,r.right=r.right-30):r.top=t.bottom+4,r},W=(t,e=!1)=>{const a=document.querySelector(".lmat_page_translation_string_container"),n={right:t.right-(e?4:0)};return a?(a.getBoundingClientRect().bottom-t.bottom<200&&(n.right=n.right-30),n):n};(0,d.useEffect)(()=>{!async function(){try{const e={action:"lmat_get_glossary",source_lang:t.sourceLang,target_lang:t.targetLang,_wpnonce:lmatPageTranslationGlobal.get_glossary_validate},a=`${lmatPageTranslationGlobal.ajax_url}`,n=await fetch(a,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8",Accept:"application/json"},credentials:"same-origin",body:new URLSearchParams(e)}),r=await n.json(),l=[];r.data.terms.forEach(t=>{t.original_term&&""!==t.original_term&&l.push(t.original_term)}),$(l),N(r.data.terms||[])}catch(t){N([])}}()},[t.sourceLang,t.targetLang]);const q=(a,n,r,o)=>{const i=(0,s.select)("block-lmatPageTranslation/translate").getTranslationEntry({id:o.id,type:o.type});if(2!==n||!i)return;const c=`${r}_${n}`;let d="";if(d=i.translatedData&&i.translatedData[e]?i.translatedData[e]:i.translatedData&&i.translatedData[t.service]?i.translatedData[t.service]:i.filteredString?i.filteredString:i.source||"",T.some(t=>t.row===r&&t.col===n)||(w([{row:r,col:n}]),S({[c]:d})),F(o.source||""),j({row:r,col:n}),!l.current)return;const u=a.currentTarget.getBoundingClientRect(),g=l.current.querySelectorAll("thead th"),p=g[n]?g[n].textContent:"",h=document.querySelector(".lmat_page_translation_string_container").getBoundingClientRect(),f=h.bottom-u.bottom,y=u.top-h.top,b={left:u.right+window.scrollX,top:u.top+window.scrollY-35,value:o,header:p};if(f<50&&(b.top=u.top+window.scrollY-130,b.bottom=50),y<35&&(b.top=h.top+window.scrollY,b.bottom=35),m(b),B){const t=z(u,!0);_(t)}},V=(e=>{if(!e)return[];const a=document.createElement("div");a.innerHTML=e;const n=a.textContent,r=t=>t.toLowerCase().replace(/[.,/#!$%^&*;{}=\-_`~()]/g,t=>":"===t?":":"").trim(),l=r(n);return A.filter(t=>{if(!t.original_term)return!1;const e=t.original_term.trim(),a=r(e),n=a.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),o=new RegExp(`\\b${n}\\b`,"i").test(l);if(o&&e.endsWith(":")){const t=l.indexOf(a),e=l[t+a.length];return!e||" "===e}return o}).map(e=>({english:e.original_term,translation:e.translations?.[t.targetLang]||"",description:e.description||""}))})(O);(0,d.useEffect)(()=>{c||(h(null),w([]))},[c]),(0,d.useEffect)(()=>{["yandex","google"].includes(t.service)&&(document.documentElement.setAttribute("translate","no"),document.body.classList.add("notranslate"));const e=t.service,a=`lmat_page_translation_${e}_translate_element`;(0,s.select)("block-lmatPageTranslation/translate").getTranslationEntries().length>0&&t.postDataFetchStatus&&v({Service:e}).Provider({sourceLang:t.sourceLang,targetLang:t.targetLang,translateStatusHandler:t.translateStatusHandler,ID:a,translateStatus:t.translateStatus,modalRenderId:t.modalRender,destroyUpdateHandler:t.updateDestroyHandler})},[t.modalRender,t.postDataFetchStatus]);const Q=t=>{const e=document.createElement("div");e.innerHTML=t.innerHTML;const a=e.childNodes;if(a.length>0)for(let t=0;t<a.length;t++){const e=a[t];if(3!==e.nodeType&&e.childNodes.length>0)if(e.classList.contains("lmat-page-translation-notraslate-tag")){const t=Q(e);e.innerHTML=t}else{const t=Q(e);e.outerHTML=t}}return e.innerHTML},Y=t=>{if(t)return[t]},Z=t=>{const e=(window.lmatPageTranslationGlobal?.languageObject||{})[t];return"object"==typeof e?e.name||t:e||t},J=a=>{let n=!1;return a.translatedData&&(e&&a.translatedData[e]?n=a.translatedData[e]:a.translatedData[t.service]&&(n=a.translatedData[t.service])),n};return d.createElement("div",{className:"modal-body"},a.length>0&&t.postDataFetchStatus?d.createElement(d.Fragment,null,n&&d.createElement("div",{className:"lmat-page-translation-body-notice-wrapper"},d.createElement(n,null)),t.translatePendingStatus&&d.createElement("div",{className:"lmat_page_translation_translate_progress",key:t.modalRender},(0,i.__)("Automatic translation is in progress....","automatic-translations-for-polylang-pro"),d.createElement("br",null),(0,i.__)("It will take few minutes, enjoy ☕ coffee in this time!","automatic-translations-for-polylang-pro"),d.createElement("br",null),d.createElement("br",null),(0,i.__)("Please do not leave this window or browser tab while translation is in progress...","automatic-translations-for-polylang-pro")),d.createElement("div",{className:`translator-widget ${e}`,style:{display:"flex"}},d.createElement("h3",{className:"choose-lang"},v({Service:t.service}).heading," ",d.createElement("span",{className:"dashicons-before dashicons-translation"})),d.createElement("div",{className:"lmat_page_translation_translate_element_wrapper "+(t.translateStatus?"translate-completed":"")},d.createElement("div",{id:`lmat_page_translation_${t.service}_translate_element`}))),d.createElement("div",{className:"lmat_page_translation_string_container"},d.createElement("table",{className:"scrolldown",id:"stringTemplate",ref:l},d.createElement("thead",null,d.createElement("tr",null,d.createElement("th",{className:"notranslate"},(0,i.__)("S.No","linguator-multilingual-ai-translation")),d.createElement("th",{className:"notranslate"},(0,i.__)("Source Text","linguator-multilingual-ai-translation")),d.createElement("th",{className:"notranslate"},(0,i.__)("Translation","linguator-multilingual-ai-translation")))),d.createElement("tbody",null,t.postDataFetchStatus&&d.createElement(d.Fragment,null,a.map((a,n)=>{const l=`${n}_2`;let s="";a.translatedData&&(e&&a.translatedData[e]?s=a.translatedData[e]:a.translatedData[t.service]&&(s=a.translatedData[t.service]));const c=T.some(t=>t.row===n&&2===t.col);return d.createElement(o.Fragment,{key:n+t.translatePendingStatus},void 0!==a.source&&""!==a.source.trim()&&d.createElement(d.Fragment,null,d.createElement("tr",{key:n+"tr"+t.translatePendingStatus+(a.filteredString?"filteredString":"")},d.createElement("td",null,n+1,!J(a)&&!c&&d.createElement(L,{string:a.source,glossary:D,onClick:t=>{q(t,2,n,a)}})),d.createElement("td",{"data-source":"source_text"},a.source),d.createElement("td",{"data-key":a.id,"data-string-type":a.type,onClick:t=>{q(t,2,n,a)},style:{cursor:"pointer"},translate:M[l]&&"google"===t.service||M[l]&&"yandex"===t.service?"no":(t.translatePendingStatus&&["google","yandex","localAiTranslator"].includes(t.service)&&t.service.includes("_ai"),"yes"),className:`${c||M[l]||s?"":"lmat-page-translation-empty-translation-cell"} ${M[l]&&"localAiTranslator"===t.service||M[l]&&"google"===t.service?"notranslate":(t.translatePendingStatus&&["google","yandex","localAiTranslator"].includes(t.service)&&t.service.includes("_ai"),"translate")} ${c?"lmat-page-translation-editing-cell":""}`,"data-translate-status":t.translatePendingStatus?"pending":"translated"},c?d.createElement("div",{contentEditable:"true",className:"lmat-page-translation-content-editable",ref:t=>{R.current[l]=t,t&&(t.style.height="auto",t.style.height=t.scrollHeight+"px")},onFocus:()=>j({row:n,col:2}),onInput:t=>((t,e)=>{if(t.target.style.height="auto",t.target.style.height=t.target.scrollHeight+"px",I&&I.row===e&&2===I.col){const e=t.target.getBoundingClientRect();if(B){const t=z(e,!0);_(t)}if(H){const t=W(e,!0);b(t)}}})(t,n),style:{width:"100%",minHeight:40,resize:"vertical"},dangerouslySetInnerHTML:{__html:E[l]||""}}):((e,a,n)=>{const l=M[n],o=J(a);return void 0!==l?l:o||(["google","yandex","localAiTranslator"].includes(t.service)?t.translatePendingStatus&&!t.service.includes("_ai")?a.filteredString?d.createElement("span",{dangerouslySetInnerHTML:{__html:a.filteredString},style:{whiteSpace:"pre-wrap"}}):d.createElement(u,{service:t.service,content:a.source||"",contentKey:a.id,item:a,saveFilteredString:U}):a.source||"":d.createElement("img",{src:r+"plus.png",alt:(0,i.__)("Add translation","automatic-translations-for-polylang-pro"),className:"lmat-page-translation-add-translation-icon"}))})(0,a,l)))))})))))):t.postDataFetchStatus?d.createElement("p",null,(0,i.__)("No strings are available for translation","linguator-multilingual-ai-translation")):d.createElement("div",{className:"lmat-page-translation-skeleton-loader-wrapper"},d.createElement("div",{className:"translate-widget"},d.createElement("div",{className:"lmat-page-translation-skeleton-loader-mini"}),d.createElement("div",{className:"lmat-page-translation-skeleton-loader-mini"})),d.createElement("table",null,d.createElement("thead",null,d.createElement("tr",null,d.createElement("th",{className:"notranslate"},(0,i.__)("S.No","linguator-multilingual-ai-translation")),d.createElement("th",{className:"notranslate"},(0,i.__)("Source Text","linguator-multilingual-ai-translation")),d.createElement("th",{className:"notranslate"},(0,i.__)("Translation","linguator-multilingual-ai-translation")))),d.createElement("tbody",null,[...Array(10)].map((t,e)=>d.createElement("tr",{key:e},d.createElement("td",null,d.createElement("div",{className:"lmat-page-translation-skeleton-loader-mini"})),d.createElement("td",null,d.createElement("div",{className:"lmat-page-translation-skeleton-loader-mini"})),d.createElement("td",null,d.createElement("div",{className:"lmat-page-translation-skeleton-loader-mini"}))))))),c&&k.createPortal(d.createElement(x,{left:c.left,top:c.top,onClose:()=>{w([]),S({}),m(null),j(null)},onGlossaryClick:()=>{if(0!==V.length&&(h(t=>"glossary"===t?null:"glossary"),I)){const t=`${I.row}_${I.col}`,e=R.current[t];if(e){const t=e.getBoundingClientRect(),a=z(t,!0);_(a)}}},onAddGlossary:()=>{if(h(t=>"add-glossary"===t?null:"add-glossary"),"add-glossary"!==p&&I){const t=`${I.row}_${I.col}`,e=R.current[t];if(e){const t=e.getBoundingClientRect(),a=W(t,!0);b(a)}}},showAddGlossary:H,onCopy:()=>{const t=I;if(t){const e=a[t.row]?.source||"";S(a=>({...a,[`${t.row}_${t.col}`]:e})),setTimeout(()=>{const e=R.current[`${t.row}_${t.col}`];e&&e.focus()},0)}},glossaryOpen:B&&V.length>0,glossaryCount:V.length,onSave:()=>{const n=I;if(n){const r=`${n.row}_${n.col}`,o=R?.current[r]?.innerText||"",s=a[n.row];o&&""!==o.trim()?(G(t=>({...t,[r]:o})),s?.id&&Y(e).forEach(e=>{g({type:s.type||"content",key:s.id,translateContent:o,source:s.source,provider:e,AllowedMetaFields:t.AllowedMetaFields||{}})})):(G(t=>{const e={...t};return delete e[r],e}),s?.id&&Y(e).forEach(e=>{g({type:s.type||"content",key:s.id,translateContent:"",source:s.source,provider:e,AllowedMetaFields:t.AllowedMetaFields||{}})})),w(t=>t.filter(t=>!(t.row===n.row&&t.col===n.col)));const i=n.row+1;if(i<a.length){const r=a[i];if(r?.source?.trim()){const a=`${i}_${n.col}`;let o;if(void 0!==M[a])o=M[a];else{let a="";r.translatedData&&(e&&r.translatedData[e]?a=r.translatedData[e]:r.translatedData[t.service]&&(a=r.translatedData[t.service])),o=a||r.source||""}return w(t=>[...t,{row:i,col:n.col}]),S(t=>({...t,[a]:o})),F(r.source||""),j({row:i,col:n.col}),void setTimeout(()=>{const t=l.current,e=t?.querySelector(`tbody tr:nth-child(${i+1}) td:nth-child(${n.col+1})`);if(e){const a=e.getBoundingClientRect();m({left:a.right+window.scrollX,top:a.top+window.scrollY,value:r,header:t.querySelectorAll("thead th")[n.col]?.textContent||""})}},0)}}m(null)}},disableGlossary:0===V.length}),document.body),H&&I&&k.createPortal(d.createElement(C,{position:y,sourceLang:t.sourceLang,targetLang:t.targetLang,selectedSourceText:O,onClose:()=>h(null),setGlossaryTerms:N,setGlossaryOrignalTerms:$}),document.body),B&&V.length>0&&k.createPortal(d.createElement(P,{position:f,terms:V,sourceLangLabel:Z(t.sourceLang),targetLangLabel:Z(t.targetLang),onInsert:t=>((t,e)=>{if(!e)return;const a=`${e.row}_${e.col}`,n=R.current[a];n?((t,e)=>{const a=window.getSelection();if(!a||0===a.rangeCount)return;const n=a.getRangeAt(0);if(!t.contains(n.startContainer))return;const r=n.toString(),l=r.match(/^\s+/)?.[0]||"",o=r.match(/\s+$/)?.[0]||"";n.deleteContents();const s=document.createElement("div");s.innerHTML=`<span class="notranslate lmat-page-translation-notraslate-tag" translate="no">${l}${e}${o}</span>`;const i=s.firstChild;n.insertNode(i),n.setStartAfter(i),n.collapse(!0),a.removeAllRanges(),a.addRange(n);const c=Q(t),d=t.closest("td");if(""!==c&&d){const t=d.dataset.stringType,e=d.dataset.key;U(t,e,c)}})(n,t.translation||t.english||""):S({...E,[a]:(E[a]||"")+(t.translation||t.english||"")})})(t,I),width:256}),document.body))},A=t=>React.createElement("div",{className:`notice inline notice-info is-dismissible ${t.className}`},Array.isArray(t.children)?t.children.join(" "):t.children),N=t=>React.createElement("div",{className:"modal-footer",key:t.modalRender},!t.translatePendingStatus&&React.createElement(A,{className:"lmat_page_translation_string_count"},React.createElement("p",null,(0,i.__)("Wahooo! You have saved your valuable time via auto translating","linguator-multilingual-ai-translation")," ",React.createElement("strong",null,React.createElement(p,{number:t.characterCount}))," ",(0,i.__)("characters using","linguator-multilingual-ai-translation")," ",React.createElement("strong",null,t.serviceLabel),".",(0,i.__)("Please share your feedback —","linguator-multilingual-ai-translation"),React.createElement("a",{href:"https://wordpress.org/support/plugin/translate-words/reviews/#new-post",target:"_blank",rel:"noopener",style:{color:"yellow"}},(0,i.__)("leave a quick review","linguator-multilingual-ai-translation")),"!")),React.createElement("div",{className:"save_btn_cont"},React.createElement("button",{className:"notranslate save_it button button-primary",disabled:t.translatePendingStatus,onClick:t.updatePostData},t.translateButtonStatus?React.createElement(React.Fragment,null,React.createElement("span",{className:"updating-text"},(0,i.__)("Updating","linguator-multilingual-ai-translation"),React.createElement("span",{className:"dot",style:{"--i":0}}),React.createElement("span",{className:"dot",style:{"--i":1}}),React.createElement("span",{className:"dot",style:{"--i":2}}))):(0,i.__)("Update Content","linguator-multilingual-ai-translation"))));function D(){return D=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var n in a)({}).hasOwnProperty.call(a,n)&&(t[n]=a[n])}return t},D.apply(null,arguments)}const $=t=>{let e=t.service;const a=(0,s.select)("block-lmatPageTranslation/translate").getTranslationInfo().translateData[e]||!1,n=a?.translateStatus||!1,[r,l]=(0,o.useState)(!0),[i,d]=(0,o.useState)(""),[u,g]=(0,o.useState)(!0),[m,p]=(0,o.useState)(a?.targetCharacterCount||0),[h,f]=(0,o.useState)([]),[_,y]=(0,o.useState)(!1),b=t=>{f(e=>[...e,t])};(0,o.useEffect)(()=>{r||h.length>0&&h.forEach(t=>{"function"==typeof t&&t()})},[r,h]);const T=()=>{const e=t.service;return"localAiTranslator"===e?"Chrome AI Translator":e.replace(/^\w/,t=>t.toUpperCase())+" Translate"};(0,o.useEffect)(()=>{t.postDataFetchStatus||t.fetchPostData({postId:t.postId,sourceLang:t.sourceLang,targetLang:t.targetLang,updatePostDataFetch:t.updatePostDataFetch,refPostData:t=>d(e=>({...e,...t})),updateDestroyHandler:b})},[t.postDataFetchStatus,t.modalRender]);const w=()=>{if("google"===t.service){const t=document.querySelector('.skiptranslate iframe[id=":1.container"]');if(t){const e=t.contentDocument.querySelector('a[id=":1.close"][title="Close"] img');e&&e.click()}}g(!0),l(!1)},E=()=>{if(_)return;const e=i;let a=t.service;y(!0),t.translatePost({postContent:e,modalClose:()=>{l(!1),w()},service:a}),t.pageTranslate(!0),(({provider:t,sourceLang:e,targetLang:a,postId:n})=>{const r=(0,s.select)("block-lmatPageTranslation/translate").getTranslationInfo(),l=r.translateData?.[t]?.targetStringCount||0,o=r.translateData?.[t]?.targetWordCount||0,i=r.translateData?.[t]?.targetCharacterCount||0,c=r.translateData?.[t]?.timeTaken||0,d=r?.sourceWordCount||0,u=r?.sourceCharacterCount||0,g=r?.sourceStringCount||0,m={provider:t,totalStringCount:l,totalWordCount:o,totalCharacterCount:i,editorType:lmatPageTranslationGlobal.editor_type,date:(new Date).toISOString(),sourceStringCount:g,sourceWordCount:d,sourceCharacterCount:u,sourceLang:e,targetLang:a,timeTaken:c,action:lmatPageTranslationGlobal.update_translate_data,update_translation_key:lmatPageTranslationGlobal.update_translation_check,post_id:n};fetch(lmatPageTranslationGlobal.ajax_url,{method:"POST",headers:{"content-type":"application/x-www-form-urlencoded; charset=UTF-8",Accept:"application/json"},body:new URLSearchParams(m)}).then().catch(t=>{console.error(t)})})({provider:a,sourceLang:t.sourceLang,targetLang:t.targetLang,postId:t.currentPostId})};return(0,o.useEffect)(()=>{l(!0),n&&(p(a?.targetCharacterCount||0),g(!1)),setTimeout(()=>{const t=document.querySelector(".lmat_page_translation_string_container");t&&(t.scrollTop=0)})},[t.modalRender]),React.createElement(React.Fragment,null," ",r&&React.createElement("div",{id:`lmat-page-translation-${t.service}-strings-modal`,className:"modal-container",style:{display:r?"flex":"none"},"data-render-id":t.modalRender},React.createElement("div",{className:"modal-content"},React.createElement(c,{modalRender:t.modalRender,setPopupVisibility:w,postContent:i,translatePendingStatus:u,pageTranslate:t.pageTranslate,service:t.service,serviceLabel:T(),updatePostData:E,characterCount:m,translateButtonStatus:_}),React.createElement(R,D({},t,{updatePostContent:t=>{d(t)},contentLoading:t.contentLoading,postDataFetchStatus:t.postDataFetchStatus,translatePendingStatus:u,service:t.service,sourceLang:t.sourceLang,targetLang:t.targetLang,translateStatusHandler:e=>{let a=t.service;const n=(0,s.select)("block-lmatPageTranslation/translate").getTranslationInfo().translateData[a]?.targetCharacterCount||0;p(n),g(e)},modalRender:t.modalRender,translateStatus:n,stringModalBodyNotice:t.stringModalBodyNotice,updateDestroyHandler:b})),React.createElement(N,{modalRender:t.modalRender,setPopupVisibility:w,postContent:i,translatePendingStatus:u,pageTranslate:t.pageTranslate,service:t.service,serviceLabel:T(),updatePostData:E,characterCount:m,translateButtonStatus:_}))))},O=({setSettingVisibility:t})=>React.createElement("div",{className:"modal-header"},React.createElement("h2",null,(0,i.__)("Step 1 - Select Translation Provider","linguator-multilingual-ai-translation")),React.createElement("span",{className:"close",onClick:()=>t(!1)},"×")),F=t=>{const e=t.Service,a=t[e+"Disabled"],n=v({Service:e,[e+"ButtonDisabled"]:a,openErrorModalHandler:t.openErrorModalHandler}),r=`lmat-page-translation-${e.replace(/([A-Z])/g,"-$1").toLowerCase().replace(/[^a-z0-9-]/g,"")}-btn`;return React.createElement("tr",null,React.createElement("td",{className:"lmat-page-translation-provider-name"},n.Logo,React.createElement("span",null,n.title)),React.createElement("td",null,n.ButtonDisabled?n.ErrorMessage:React.createElement("div",{id:r,onClick:t.fetchContent,className:"lmat-page-translation-service-btn button button-primary","data-service":e,"data-service-label":n.ServiceLabel},n.SettingBtnText)),React.createElement("td",null,React.createElement("a",{href:n.Docs,target:"_blank",rel:"noopener noreferrer",className:"lmat-page-translation-doc-icon"},React.createElement("svg",{width:"9",height:"12",viewBox:"0 0 9 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},React.createElement("path",{d:"M2.17607 6.20533H6.82393V5.53867H2.17607V6.20533ZM2.17607 8.05133H6.82393V7.38467H2.17607V8.05133ZM2.17607 9.898H4.89536V9.23133H2.17607V9.898ZM1.03821 12C0.7425 12 0.495643 11.8973 0.297643 11.692C0.0996427 11.4867 0.000428571 11.2304 0 10.9233V1.07667C0 0.77 0.0992142 0.514 0.297643 0.308667C0.496071 0.103333 0.743143 0.000444444 1.03886 0H6.10714L9 3V10.9233C9 11.23 8.901 11.4862 8.703 11.692C8.505 11.8978 8.25771 12.0004 7.96114 12H1.03821ZM5.78571 3.33333V0.666667H1.03886C0.939857 0.666667 0.849 0.709333 0.766286 0.794666C0.683571 0.88 0.642429 0.974 0.642857 1.07667V10.9233C0.642857 11.0256 0.684 11.1196 0.766286 11.2053C0.848571 11.2911 0.939214 11.3338 1.03821 11.3333H7.96179C8.06036 11.3333 8.151 11.2907 8.23371 11.2053C8.31643 11.12 8.35757 11.0258 8.35714 10.9227V3.33333H5.78571Z",fill:"#6F6F6F"})))))};function I(){return I=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var n in a)({}).hasOwnProperty.call(a,n)&&(t[n]=a[n])}return t},I.apply(null,arguments)}const j=t=>{const e=v();return React.createElement("div",{className:"lmat-page-translation-setting-modal-body"},React.createElement("div",{className:"lmat-page-translation-setting-modal-notice-wrapper"}),React.createElement("table",null,React.createElement("thead",null,React.createElement("tr",null,React.createElement("th",null,"Name"),React.createElement("th",null,"Translate"),React.createElement("th",null,"Docs"))),React.createElement("tbody",null,Object.keys(e).map(e=>React.createElement(F,I({key:e},t,{Service:e}))))))},M=t=>{const{targetLangName:e,postType:a,sourceLangName:n,setSettingVisibility:r}=t;return React.createElement("div",{className:"modal-footer"},React.createElement("p",{className:"lmat-page-translation-error-message",style:{marginBottom:".5rem"}},(0,i.sprintf)((0,i.__)("This will replace your current %(postType)s with a %(target)s translation of the original %(source)s content.","linguator-multilingual-ai-translation"),{postType:a,source:n,target:e})),React.createElement("button",{className:"lmat-page-translation-setting-close button button-primary",onClick:()=>r(!1)},(0,i.__)("Close","linguator-multilingual-ai-translation")))},{entries:G,setPrototypeOf:B,isFrozen:H,getPrototypeOf:U,getOwnPropertyDescriptor:z}=Object;let{freeze:W,seal:q,create:V}=Object,{apply:Q,construct:Y}="undefined"!=typeof Reflect&&Reflect;W||(W=function(t){return t}),q||(q=function(t){return t}),Q||(Q=function(t,e,a){return t.apply(e,a)}),Y||(Y=function(t,e){return new t(...e)});const Z=ut(Array.prototype.forEach),J=ut(Array.prototype.lastIndexOf),X=ut(Array.prototype.pop),K=ut(Array.prototype.push),tt=ut(Array.prototype.splice),et=ut(String.prototype.toLowerCase),at=ut(String.prototype.toString),nt=ut(String.prototype.match),rt=ut(String.prototype.replace),lt=ut(String.prototype.indexOf),ot=ut(String.prototype.trim),st=ut(Object.prototype.hasOwnProperty),it=ut(RegExp.prototype.test),ct=(dt=TypeError,function(){for(var t=arguments.length,e=new Array(t),a=0;a<t;a++)e[a]=arguments[a];return Y(dt,e)});var dt;function ut(t){return function(e){e instanceof RegExp&&(e.lastIndex=0);for(var a=arguments.length,n=new Array(a>1?a-1:0),r=1;r<a;r++)n[r-1]=arguments[r];return Q(t,e,n)}}function gt(t,e){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:et;B&&B(t,null);let n=e.length;for(;n--;){let r=e[n];if("string"==typeof r){const t=a(r);t!==r&&(H(e)||(e[n]=t),r=t)}t[r]=!0}return t}function mt(t){for(let e=0;e<t.length;e++)st(t,e)||(t[e]=null);return t}function pt(t){const e=V(null);for(const[a,n]of G(t))st(t,a)&&(Array.isArray(n)?e[a]=mt(n):n&&"object"==typeof n&&n.constructor===Object?e[a]=pt(n):e[a]=n);return e}function ht(t,e){for(;null!==t;){const a=z(t,e);if(a){if(a.get)return ut(a.get);if("function"==typeof a.value)return ut(a.value)}t=U(t)}return function(){return null}}const ft=W(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),_t=W(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),yt=W(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),bt=W(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Tt=W(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),wt=W(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Et=W(["#text"]),St=W(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),vt=W(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),kt=W(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Ct=W(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),xt=q(/\{\{[\w\W]*|[\w\W]*\}\}/gm),Pt=q(/<%[\w\W]*|[\w\W]*%>/gm),Lt=q(/\$\{[\w\W]*/gm),Rt=q(/^data-[\-\w.\u00B7-\uFFFF]+$/),At=q(/^aria-[\-\w]+$/),Nt=q(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Dt=q(/^(?:\w+script|data):/i),$t=q(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Ot=q(/^html$/i),Ft=q(/^[a-z][.\w]*(-[.\w]+)+$/i);var It=Object.freeze({__proto__:null,ARIA_ATTR:At,ATTR_WHITESPACE:$t,CUSTOM_ELEMENT:Ft,DATA_ATTR:Rt,DOCTYPE_NAME:Ot,ERB_EXPR:Pt,IS_ALLOWED_URI:Nt,IS_SCRIPT_OR_DATA:Dt,MUSTACHE_EXPR:xt,TMPLIT_EXPR:Lt});const jt=function(){return"undefined"==typeof window?null:window};var Mt=function t(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:jt();const a=e=>t(e);if(a.version="3.2.6",a.removed=[],!e||!e.document||9!==e.document.nodeType||!e.Element)return a.isSupported=!1,a;let{document:n}=e;const r=n,l=r.currentScript,{DocumentFragment:o,HTMLTemplateElement:s,Node:i,Element:c,NodeFilter:d,NamedNodeMap:u=e.NamedNodeMap||e.MozNamedAttrMap,HTMLFormElement:g,DOMParser:m,trustedTypes:p}=e,h=c.prototype,f=ht(h,"cloneNode"),_=ht(h,"remove"),y=ht(h,"nextSibling"),b=ht(h,"childNodes"),T=ht(h,"parentNode");if("function"==typeof s){const t=n.createElement("template");t.content&&t.content.ownerDocument&&(n=t.content.ownerDocument)}let w,E="";const{implementation:S,createNodeIterator:v,createDocumentFragment:k,getElementsByTagName:C}=n,{importNode:x}=r;let P={afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]};a.isSupported="function"==typeof G&&"function"==typeof T&&S&&void 0!==S.createHTMLDocument;const{MUSTACHE_EXPR:L,ERB_EXPR:R,TMPLIT_EXPR:A,DATA_ATTR:N,ARIA_ATTR:D,IS_SCRIPT_OR_DATA:$,ATTR_WHITESPACE:O,CUSTOM_ELEMENT:F}=It;let{IS_ALLOWED_URI:I}=It,j=null;const M=gt({},[...ft,..._t,...yt,...Tt,...Et]);let B=null;const H=gt({},[...St,...vt,...kt,...Ct]);let U=Object.seal(V(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),z=null,q=null,Q=!0,Y=!0,dt=!1,ut=!0,mt=!1,xt=!0,Pt=!1,Lt=!1,Rt=!1,At=!1,Dt=!1,$t=!1,Ft=!0,Mt=!1,Gt=!0,Bt=!1,Ht={},Ut=null;const zt=gt({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Wt=null;const qt=gt({},["audio","video","img","source","image","track"]);let Vt=null;const Qt=gt({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Yt="http://www.w3.org/1998/Math/MathML",Zt="http://www.w3.org/2000/svg",Jt="http://www.w3.org/1999/xhtml";let Xt=Jt,Kt=!1,te=null;const ee=gt({},[Yt,Zt,Jt],at);let ae=gt({},["mi","mo","mn","ms","mtext"]),ne=gt({},["annotation-xml"]);const re=gt({},["title","style","font","a","script"]);let le=null;const oe=["application/xhtml+xml","text/html"];let se=null,ie=null;const ce=n.createElement("form"),de=function(t){return t instanceof RegExp||t instanceof Function},ue=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!ie||ie!==t){if(t&&"object"==typeof t||(t={}),t=pt(t),le=-1===oe.indexOf(t.PARSER_MEDIA_TYPE)?"text/html":t.PARSER_MEDIA_TYPE,se="application/xhtml+xml"===le?at:et,j=st(t,"ALLOWED_TAGS")?gt({},t.ALLOWED_TAGS,se):M,B=st(t,"ALLOWED_ATTR")?gt({},t.ALLOWED_ATTR,se):H,te=st(t,"ALLOWED_NAMESPACES")?gt({},t.ALLOWED_NAMESPACES,at):ee,Vt=st(t,"ADD_URI_SAFE_ATTR")?gt(pt(Qt),t.ADD_URI_SAFE_ATTR,se):Qt,Wt=st(t,"ADD_DATA_URI_TAGS")?gt(pt(qt),t.ADD_DATA_URI_TAGS,se):qt,Ut=st(t,"FORBID_CONTENTS")?gt({},t.FORBID_CONTENTS,se):zt,z=st(t,"FORBID_TAGS")?gt({},t.FORBID_TAGS,se):pt({}),q=st(t,"FORBID_ATTR")?gt({},t.FORBID_ATTR,se):pt({}),Ht=!!st(t,"USE_PROFILES")&&t.USE_PROFILES,Q=!1!==t.ALLOW_ARIA_ATTR,Y=!1!==t.ALLOW_DATA_ATTR,dt=t.ALLOW_UNKNOWN_PROTOCOLS||!1,ut=!1!==t.ALLOW_SELF_CLOSE_IN_ATTR,mt=t.SAFE_FOR_TEMPLATES||!1,xt=!1!==t.SAFE_FOR_XML,Pt=t.WHOLE_DOCUMENT||!1,At=t.RETURN_DOM||!1,Dt=t.RETURN_DOM_FRAGMENT||!1,$t=t.RETURN_TRUSTED_TYPE||!1,Rt=t.FORCE_BODY||!1,Ft=!1!==t.SANITIZE_DOM,Mt=t.SANITIZE_NAMED_PROPS||!1,Gt=!1!==t.KEEP_CONTENT,Bt=t.IN_PLACE||!1,I=t.ALLOWED_URI_REGEXP||Nt,Xt=t.NAMESPACE||Jt,ae=t.MATHML_TEXT_INTEGRATION_POINTS||ae,ne=t.HTML_INTEGRATION_POINTS||ne,U=t.CUSTOM_ELEMENT_HANDLING||{},t.CUSTOM_ELEMENT_HANDLING&&de(t.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(U.tagNameCheck=t.CUSTOM_ELEMENT_HANDLING.tagNameCheck),t.CUSTOM_ELEMENT_HANDLING&&de(t.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(U.attributeNameCheck=t.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),t.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof t.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(U.allowCustomizedBuiltInElements=t.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),mt&&(Y=!1),Dt&&(At=!0),Ht&&(j=gt({},Et),B=[],!0===Ht.html&&(gt(j,ft),gt(B,St)),!0===Ht.svg&&(gt(j,_t),gt(B,vt),gt(B,Ct)),!0===Ht.svgFilters&&(gt(j,yt),gt(B,vt),gt(B,Ct)),!0===Ht.mathMl&&(gt(j,Tt),gt(B,kt),gt(B,Ct))),t.ADD_TAGS&&(j===M&&(j=pt(j)),gt(j,t.ADD_TAGS,se)),t.ADD_ATTR&&(B===H&&(B=pt(B)),gt(B,t.ADD_ATTR,se)),t.ADD_URI_SAFE_ATTR&&gt(Vt,t.ADD_URI_SAFE_ATTR,se),t.FORBID_CONTENTS&&(Ut===zt&&(Ut=pt(Ut)),gt(Ut,t.FORBID_CONTENTS,se)),Gt&&(j["#text"]=!0),Pt&&gt(j,["html","head","body"]),j.table&&(gt(j,["tbody"]),delete z.tbody),t.TRUSTED_TYPES_POLICY){if("function"!=typeof t.TRUSTED_TYPES_POLICY.createHTML)throw ct('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if("function"!=typeof t.TRUSTED_TYPES_POLICY.createScriptURL)throw ct('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');w=t.TRUSTED_TYPES_POLICY,E=w.createHTML("")}else void 0===w&&(w=function(t,e){if("object"!=typeof t||"function"!=typeof t.createPolicy)return null;let a=null;const n="data-tt-policy-suffix";e&&e.hasAttribute(n)&&(a=e.getAttribute(n));const r="dompurify"+(a?"#"+a:"");try{return t.createPolicy(r,{createHTML:t=>t,createScriptURL:t=>t})}catch(t){return console.warn("TrustedTypes policy "+r+" could not be created."),null}}(p,l)),null!==w&&"string"==typeof E&&(E=w.createHTML(""));W&&W(t),ie=t}},ge=gt({},[..._t,...yt,...bt]),me=gt({},[...Tt,...wt]),pe=function(t){K(a.removed,{element:t});try{T(t).removeChild(t)}catch(e){_(t)}},he=function(t,e){try{K(a.removed,{attribute:e.getAttributeNode(t),from:e})}catch(t){K(a.removed,{attribute:null,from:e})}if(e.removeAttribute(t),"is"===t)if(At||Dt)try{pe(e)}catch(t){}else try{e.setAttribute(t,"")}catch(t){}},fe=function(t){let e=null,a=null;if(Rt)t="<remove></remove>"+t;else{const e=nt(t,/^[\r\n\t ]+/);a=e&&e[0]}"application/xhtml+xml"===le&&Xt===Jt&&(t='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+t+"</body></html>");const r=w?w.createHTML(t):t;if(Xt===Jt)try{e=(new m).parseFromString(r,le)}catch(t){}if(!e||!e.documentElement){e=S.createDocument(Xt,"template",null);try{e.documentElement.innerHTML=Kt?E:r}catch(t){}}const l=e.body||e.documentElement;return t&&a&&l.insertBefore(n.createTextNode(a),l.childNodes[0]||null),Xt===Jt?C.call(e,Pt?"html":"body")[0]:Pt?e.documentElement:l},_e=function(t){return v.call(t.ownerDocument||t,t,d.SHOW_ELEMENT|d.SHOW_COMMENT|d.SHOW_TEXT|d.SHOW_PROCESSING_INSTRUCTION|d.SHOW_CDATA_SECTION,null)},ye=function(t){return t instanceof g&&("string"!=typeof t.nodeName||"string"!=typeof t.textContent||"function"!=typeof t.removeChild||!(t.attributes instanceof u)||"function"!=typeof t.removeAttribute||"function"!=typeof t.setAttribute||"string"!=typeof t.namespaceURI||"function"!=typeof t.insertBefore||"function"!=typeof t.hasChildNodes)},be=function(t){return"function"==typeof i&&t instanceof i};function Te(t,e,n){Z(t,t=>{t.call(a,e,n,ie)})}const we=function(t){let e=null;if(Te(P.beforeSanitizeElements,t,null),ye(t))return pe(t),!0;const n=se(t.nodeName);if(Te(P.uponSanitizeElement,t,{tagName:n,allowedTags:j}),xt&&t.hasChildNodes()&&!be(t.firstElementChild)&&it(/<[/\w!]/g,t.innerHTML)&&it(/<[/\w!]/g,t.textContent))return pe(t),!0;if(7===t.nodeType)return pe(t),!0;if(xt&&8===t.nodeType&&it(/<[/\w]/g,t.data))return pe(t),!0;if(!j[n]||z[n]){if(!z[n]&&Se(n)){if(U.tagNameCheck instanceof RegExp&&it(U.tagNameCheck,n))return!1;if(U.tagNameCheck instanceof Function&&U.tagNameCheck(n))return!1}if(Gt&&!Ut[n]){const e=T(t)||t.parentNode,a=b(t)||t.childNodes;if(a&&e)for(let n=a.length-1;n>=0;--n){const r=f(a[n],!0);r.__removalCount=(t.__removalCount||0)+1,e.insertBefore(r,y(t))}}return pe(t),!0}return t instanceof c&&!function(t){let e=T(t);e&&e.tagName||(e={namespaceURI:Xt,tagName:"template"});const a=et(t.tagName),n=et(e.tagName);return!!te[t.namespaceURI]&&(t.namespaceURI===Zt?e.namespaceURI===Jt?"svg"===a:e.namespaceURI===Yt?"svg"===a&&("annotation-xml"===n||ae[n]):Boolean(ge[a]):t.namespaceURI===Yt?e.namespaceURI===Jt?"math"===a:e.namespaceURI===Zt?"math"===a&&ne[n]:Boolean(me[a]):t.namespaceURI===Jt?!(e.namespaceURI===Zt&&!ne[n])&&!(e.namespaceURI===Yt&&!ae[n])&&!me[a]&&(re[a]||!ge[a]):!("application/xhtml+xml"!==le||!te[t.namespaceURI]))}(t)?(pe(t),!0):"noscript"!==n&&"noembed"!==n&&"noframes"!==n||!it(/<\/no(script|embed|frames)/i,t.innerHTML)?(mt&&3===t.nodeType&&(e=t.textContent,Z([L,R,A],t=>{e=rt(e,t," ")}),t.textContent!==e&&(K(a.removed,{element:t.cloneNode()}),t.textContent=e)),Te(P.afterSanitizeElements,t,null),!1):(pe(t),!0)},Ee=function(t,e,a){if(Ft&&("id"===e||"name"===e)&&(a in n||a in ce))return!1;if(Y&&!q[e]&&it(N,e));else if(Q&&it(D,e));else if(!B[e]||q[e]){if(!(Se(t)&&(U.tagNameCheck instanceof RegExp&&it(U.tagNameCheck,t)||U.tagNameCheck instanceof Function&&U.tagNameCheck(t))&&(U.attributeNameCheck instanceof RegExp&&it(U.attributeNameCheck,e)||U.attributeNameCheck instanceof Function&&U.attributeNameCheck(e))||"is"===e&&U.allowCustomizedBuiltInElements&&(U.tagNameCheck instanceof RegExp&&it(U.tagNameCheck,a)||U.tagNameCheck instanceof Function&&U.tagNameCheck(a))))return!1}else if(Vt[e]);else if(it(I,rt(a,O,"")));else if("src"!==e&&"xlink:href"!==e&&"href"!==e||"script"===t||0!==lt(a,"data:")||!Wt[t])if(dt&&!it($,rt(a,O,"")));else if(a)return!1;return!0},Se=function(t){return"annotation-xml"!==t&&nt(t,F)},ve=function(t){Te(P.beforeSanitizeAttributes,t,null);const{attributes:e}=t;if(!e||ye(t))return;const n={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:B,forceKeepAttr:void 0};let r=e.length;for(;r--;){const l=e[r],{name:o,namespaceURI:s,value:i}=l,c=se(o),d=i;let u="value"===o?d:ot(d);if(n.attrName=c,n.attrValue=u,n.keepAttr=!0,n.forceKeepAttr=void 0,Te(P.uponSanitizeAttribute,t,n),u=n.attrValue,!Mt||"id"!==c&&"name"!==c||(he(o,t),u="user-content-"+u),xt&&it(/((--!?|])>)|<\/(style|title)/i,u)){he(o,t);continue}if(n.forceKeepAttr)continue;if(!n.keepAttr){he(o,t);continue}if(!ut&&it(/\/>/i,u)){he(o,t);continue}mt&&Z([L,R,A],t=>{u=rt(u,t," ")});const g=se(t.nodeName);if(Ee(g,c,u)){if(w&&"object"==typeof p&&"function"==typeof p.getAttributeType)if(s);else switch(p.getAttributeType(g,c)){case"TrustedHTML":u=w.createHTML(u);break;case"TrustedScriptURL":u=w.createScriptURL(u)}if(u!==d)try{s?t.setAttributeNS(s,o,u):t.setAttribute(o,u),ye(t)?pe(t):X(a.removed)}catch(e){he(o,t)}}else he(o,t)}Te(P.afterSanitizeAttributes,t,null)},ke=function t(e){let a=null;const n=_e(e);for(Te(P.beforeSanitizeShadowDOM,e,null);a=n.nextNode();)Te(P.uponSanitizeShadowNode,a,null),we(a),ve(a),a.content instanceof o&&t(a.content);Te(P.afterSanitizeShadowDOM,e,null)};return a.sanitize=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=null,l=null,s=null,c=null;if(Kt=!t,Kt&&(t="\x3c!--\x3e"),"string"!=typeof t&&!be(t)){if("function"!=typeof t.toString)throw ct("toString is not a function");if("string"!=typeof(t=t.toString()))throw ct("dirty is not a string, aborting")}if(!a.isSupported)return t;if(Lt||ue(e),a.removed=[],"string"==typeof t&&(Bt=!1),Bt){if(t.nodeName){const e=se(t.nodeName);if(!j[e]||z[e])throw ct("root node is forbidden and cannot be sanitized in-place")}}else if(t instanceof i)n=fe("\x3c!----\x3e"),l=n.ownerDocument.importNode(t,!0),1===l.nodeType&&"BODY"===l.nodeName||"HTML"===l.nodeName?n=l:n.appendChild(l);else{if(!At&&!mt&&!Pt&&-1===t.indexOf("<"))return w&&$t?w.createHTML(t):t;if(n=fe(t),!n)return At?null:$t?E:""}n&&Rt&&pe(n.firstChild);const d=_e(Bt?t:n);for(;s=d.nextNode();)we(s),ve(s),s.content instanceof o&&ke(s.content);if(Bt)return t;if(At){if(Dt)for(c=k.call(n.ownerDocument);n.firstChild;)c.appendChild(n.firstChild);else c=n;return(B.shadowroot||B.shadowrootmode)&&(c=x.call(r,c,!0)),c}let u=Pt?n.outerHTML:n.innerHTML;return Pt&&j["!doctype"]&&n.ownerDocument&&n.ownerDocument.doctype&&n.ownerDocument.doctype.name&&it(Ot,n.ownerDocument.doctype.name)&&(u="<!DOCTYPE "+n.ownerDocument.doctype.name+">\n"+u),mt&&Z([L,R,A],t=>{u=rt(u,t," ")}),w&&$t?w.createHTML(u):u},a.setConfig=function(){ue(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),Lt=!0},a.clearConfig=function(){ie=null,Lt=!1},a.isValidAttribute=function(t,e,a){ie||ue({});const n=se(t),r=se(e);return Ee(n,r,a)},a.addHook=function(t,e){"function"==typeof e&&K(P[t],e)},a.removeHook=function(t,e){if(void 0!==e){const a=J(P[t],e);return-1===a?void 0:tt(P[t],a,1)[0]}return X(P[t])},a.removeHooks=function(t){P[t]=[]},a.removeAllHooks=function(){P={afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}},a}();const Gt=({message:t,onClose:e,Title:a})=>{let n=jQuery("<div>").append(t);const r=n.html();return n.remove(),n=null,(0,o.useEffect)(()=>{const t=document.querySelectorAll(".chrome-ai-translator-flags");if(t.length>0)return t.forEach(t=>{t.classList.add("lmat-page-translation-tooltip-element"),t.addEventListener("click",e=>{if(e.preventDefault(),t.querySelector(".lmat-page-translation-tooltip"))return;let a=document.createElement("span");a.textContent="Text to be copied.",a.className="lmat-page-translation-tooltip",t.appendChild(a),(async({text:t=!1,startCopyStatus:e=()=>{},endCopyStatus:a=()=>{}})=>{if(t&&""!==t)try{if(navigator?.clipboard?.writeText)await navigator.clipboard.writeText(t);else{const e=document.createElement("textarea");e.value=t,document.body.appendChild(e),e.select(),document.execCommand&&document.execCommand("copy"),document.body.removeChild(e)}e(),setTimeout(()=>a(),800)}catch(t){console.error("Error copying text to clipboard:",t)}})({text:t.getAttribute("data-clipboard-text"),startCopyStatus:()=>{a.classList.add("lmat-page-translation-tooltip-active")},endCopyStatus:()=>{setTimeout(()=>{a.remove()},800)}})})}),()=>{t.forEach(t=>{t.removeEventListener("click",()=>{})})}},[]),React.createElement("div",{className:"lmat-page-translation-error-modal-box-container"},React.createElement("div",{className:"lmat-page-translation-error-modal-box"},React.createElement("div",{className:"lmat-page-translation-error-modal-box-header"},React.createElement("span",{className:"lmat-page-translation-error-modal-box-close",onClick:e},"×"),a&&React.createElement("h3",null,a)),React.createElement("div",{className:"lmat-page-translation-error-modal-box-body"},React.createElement("p",{dangerouslySetInnerHTML:{__html:Mt.sanitize(r)}})),React.createElement("div",{className:"lmat-page-translation-error-modal-box-footer"},React.createElement("button",{className:"lmat-page-translation-error-modal-box-close button button-primary",onClick:e},"Close"))))};function Bt(){return Bt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var n in a)({}).hasOwnProperty.call(a,n)&&(t[n]=a[n])}return t},Bt.apply(null,arguments)}const Ht=t=>{const[e,a]=(0,o.useState)({}),[n,r]=(0,o.useState)(0),[s,c]=(0,o.useState)(!1),d=lmatPageTranslationGlobal.source_lang,u=t.targetLang,g=lmatPageTranslationGlobal.languageObject[d].name,m=lmatPageTranslationGlobal.languageObject[u].name,p=lmatPageTranslationGlobal.lmat_url+"admin/assets/images/",h=["ab","ace","ach","aa","af","sq","alz","am","ar","hy","as","av","awa","ay","az","ban","bal","bm","bci","ba","eu","btx","bts","bbc","be","bem","bn","bew","bho","bik","bs","br","bg","bua","yue","ca","ceb","ch","ce","ny","zh-CN","zh-TW","chk","cv","co","crh","crh-Latn","hr","cs","da","fa-AF","dv","din","doi","dov","nl","dyu","dz","en","eo","et","ee","fo","fj","tl","fi","fon","fr","fr-CA","fy","fur","ff","gaa","gl","ka","de","el","gn","gu","ht","cnh","ha","haw","iw","hil","hi","hmn","hu","hrx","iba","is","ig","ilo","id","iu-Latn","iu","ga","it","jam","ja","jw","kac","kl","kn","kr","pam","kk","kha","km","cgg","kg","rw","ktu","trp","kv","gom","ko","kri","ku","ckb","ky","lo","ltg","la","lv","lij","li","ln","lt","lmo","lg","luo","lb","mk","mad","mai","mak","mg","ms","ms-Arab","ml","mt","mam","gv","mi","mr","mh","mwr","mfe","chm","mni-Mtei","min","lus","mn","my","nhe","ndc-ZW","nr","new","ne","bm-Nkoo","no","nus","oc","or","om","os","pag","pap","ps","fa","pl","pt","pt-PT","pa","pa-Arab","qu","kek","rom","ro","rn","ru","se","sm","sg","sa","sat-Latn","sat","gd","nso","sr","st","crs","shn","sn","scn","szl","sd","si","sk","sl","so","es","su","sus","sw","ss","sv","ty","tg","ber-Latn","ber","ta","tt","te","tet","th","bo","ti","tiv","tpi","to","lua","ts","tn","tcy","tum","tr","tk","tyv","ak","udm","uk","ur","ug","uz","ve","vec","vi","war","cy","wo","xh","sah","yi","yo","yua","zap","zu"].includes("zh"===u?lmatPageTranslationGlobal.languageObject.zh?.locale.replace("_","-"):u),[f,_]=(0,o.useState)({}),[y,b]=(0,o.useState)(!1),[w,E]=(0,o.useState)(!1),S=lmatPageTranslationGlobal.providers,k=t=>{t.preventDefault();const e=t.target;"yes"===e.dataset.value&&c(!0),e.closest("#lmat-page-translation-modal-open-warning-wrapper").remove()},C=t=>{c(!1),b(t)},x=t=>{f&&f[t]?C(t):(a(t),r(t=>t+1))},P=async t=>{if(t.preventDefault(),S.length>1)c(t=>!t);else if(S.length<1)C("providerNotConfigured");else{const t=await L();if(t&&t[S[0]])return;x(S[0])}};(0,o.useEffect)(()=>{const e=document.querySelectorAll("#lmat-page-translation-modal-open-warning-wrapper .modal-content div[data-value]"),a=document.querySelector(t.translateWrpSelector);return a&&(a.removeEventListener("click",P),a.addEventListener("click",P)),e.forEach(t=>{t&&t.addEventListener("click",k)}),()=>{a.removeEventListener("click",P)}},[f]);const L=async()=>{let t={};if(S.includes("localAiTranslator")&&await(async()=>{const e=await T.languageSupportedStatus(d,u,m,g);!0!==e&&"object"==typeof e&&(E(!0),t.localAiTranslator={message:e,Title:(0,i.__)("Chrome AI Translator","linguator-multilingual-ai-translation")},_(e=>({...e,localAiTranslator:t.localAiTranslator})))})(),S.includes("google")&&await(async()=>{h||(t.google={message:"<p style={{ fontSize: '1rem', color: '#ff4646' }}>"+(0,i.sprintf)((0,i.__)("Google Translate does not support the target language: %s.","linguator-multilingual-ai-translation"),"<strong>"+m+"</strong>")+"</p>",Title:(0,i.__)("Google Translate","linguator-multilingual-ai-translation")},_(e=>({...e,google:t.google})))})(),S.length<2&&S[0]){const e=S[0];f&&(f[e]||t[e])?C(e):x(e)}return t};(0,o.useEffect)(()=>{if(S.length<1){let t=(0,i.sprintf)((0,i.__)("%sYou have not enabled any translation provider. Please enable at least one service provider to use automatic translation. Go to the %sTranslation Settings%s to configure a translation provider.%s","linguator-multilingual-ai-translation"),"<p>",`<strong><a href='${lmatPageTranslationGlobal.admin_url}admin.php?page=lmat_settings&tab=translation' target='_blank' rel='noopener noreferrer'>`,"</a></strong>","</p>");return void _(e=>({...e,providerNotConfigured:{message:t,Title:(0,i.__)("Translation Provider Not Configured","linguator-multilingual-ai-translation")}}))}s&&L()},[s]),(0,o.useEffect)(()=>{const a=v({Service:e,[e+"ButtonDisabled"]:!1}),r=e,o=a&&a.ServiceLabel,s=t.postId,i=document.getElementById("lmat_page_translation_strings_model");i&&(i._reactRoot||(i._reactRoot=l.createRoot(i)),n&&i._reactRoot.render(React.createElement($,{currentPostId:t.currentPostId,postId:s,service:r,serviceLabel:o,sourceLang:d,targetLang:u,modalRender:n,pageTranslate:t.pageTranslate,postDataFetchStatus:t.postDataFetchStatus,fetchPostData:t.fetchPostData,translatePost:t.translatePost,contentLoading:t.contentLoading,updatePostDataFetch:t.updatePostDataFetch,stringModalBodyNotice:t.stringModalBodyNotice})))},[t.postDataFetchStatus,n]);const R=t=>{c(t)};return React.createElement(React.Fragment,null,y&&f[y]&&React.createElement(Gt,Bt({onClose:()=>{b(!1)}},f[y])),s&&S.length>1&&React.createElement("div",{className:"modal-container",style:{display:s?"flex":"none"}},React.createElement("div",{className:"lmat-page-translation-settings modal-content"},React.createElement(O,{setSettingVisibility:R,postType:t.postType,sourceLangName:g,targetLangName:m}),React.createElement(j,{googleDisabled:!h,fetchContent:async t=>{let e=t.target.classList.contains("lmat-page-translation-service-btn")?t.target:t.target.closest(".lmat-page-translation-service-btn");if(!e)return;const n=e.dataset&&e.dataset.service;if(c(!1),"localAiTranslator"===n){const t=await T.languageSupportedStatus(d,u,m);if(!0!==t&&"object"==typeof t)return}r(t=>t+1),a(n)},imgFolder:p,targetLangName:m,postType:t.postType,sourceLangName:g,localAiTranslatorDisabled:w,openErrorModalHandler:C}),React.createElement(M,{targetLangName:m,postType:t.postType,sourceLangName:g,setSettingVisibility:R}))))},Ut="SAVE_SOURCE_TITLE",zt="SAVE_TRANSLATE_TITLE",Wt="SAVE_FILTERED_TITLE",qt="SAVE_SOURCE_EXCERPT",Vt="SAVE_TRANSLATE_EXCERPT",Qt="SAVE_FILTERED_EXCERPT",Yt="SAVE_SOURCE_CONTENT",Zt="SAVE_TRANSLATE_CONTENT",Jt="SAVE_FILTERED_CONTENT",Xt="SAVE_SOURCE_META_FIELDS",Kt="SAVE_TRANSLATE_META_FIELDS",te="SAVE_FILTERED_META_FIELDS",ee="SET_BLOCK_RULES",ae="SAVE_TRANSLATE_INFO",ne="ALLOWED_META_FIELDS",re="SAVE_SOURCE_SLUG",le="SAVE_TRANSLATE_SLUG",oe="SAVE_FILTERED_SLUG",se="CONTENT_FETCH_STATUS",ie={title:{},excerpt:{},slug:{},content:[],metaFields:{},allowedMetaFields:{},contentFetchStatus:!1},ce=t=>({type:Ut,text:t}),de=(t,e)=>({type:zt,text:t,provider:e}),ue=t=>({type:Wt,text:t}),ge=t=>({type:qt,text:t}),me=(t,e)=>({type:Vt,text:t,provider:e}),pe=t=>({type:Qt,text:t}),he=t=>({type:re,text:t}),fe=(t,e)=>({type:le,text:t,provider:e}),_e=t=>({type:oe,text:t}),ye=(t,e)=>({type:Yt,text:e,id:t}),be=(t,e,a,n)=>({type:Zt,text:e,id:t,source:a,provider:n}),Te=(t,e)=>({type:Jt,text:t,id:e}),we=(t,e)=>({type:Xt,text:e,id:t}),Ee=(t,e,a,n)=>({type:Kt,text:e,id:t,source:a,provider:n}),Se=(t,e)=>({type:te,text:t,id:e}),ve=t=>({type:ee,data:t}),ke=({sourceStringCount:t=null,sourceWordCount:e=null,sourceCharacterCount:a=null,timeTaken:n=null,provider:r=null,targetStringCount:l=null,targetWordCount:o=null,targetCharacterCount:s=null,translateStatus:i=null})=>({type:ae,sourceStringCount:t,sourceWordCount:e,sourceCharacterCount:a,timeTaken:n,targetStringCount:l,targetWordCount:o,targetCharacterCount:s,provider:r,translateStatus:i}),Ce=({id:t,type:e,status:a})=>({type:ne,id:t,inputType:e,status:a}),xe=t=>({type:se,status:t}),Pe=t=>{const e=new Array;if(t.title&&t.title.source){const a={id:"title",source:t.title.source,type:"title",translatedData:t.title.translatedData||{}};t.title&&t.title.filteredString&&""!==t.title.filteredString&&(a.filteredString=t.title.filteredString),e.push(a)}if(t.excerpt&&t.excerpt.source){const a={id:"excerpt",source:t.excerpt.source,type:"excerpt",translatedData:t.excerpt.translatedData||{}};t.excerpt&&t.excerpt.filteredString&&""!==t.excerpt.filteredString&&(a.filteredString=t.excerpt.filteredString),e.push(a)}if(t.slug&&t.slug.source){const a={id:"slug",source:t.slug.source,type:"slug",translatedData:t.slug.translatedData||{}};t.slug&&t.slug.filteredString&&""!==t.slug.filteredString&&(a.filteredString=t.slug.filteredString),e.push(a)}return Object.keys(t.metaFields).map(a=>{const n={type:"metaFields",id:a,source:t.metaFields[a].source,translatedData:t.metaFields[a].translatedData||{}};t.metaFields&&t.metaFields[a]&&t.metaFields[a].filteredString&&""!==t.metaFields[a].filteredString&&(n.filteredString=t.metaFields[a].filteredString),e.push(n)}),Object.keys(t.content).map(a=>{const n={type:"content",id:a,source:t.content[a].source,translatedData:t.content[a].translatedData||{}};t.content&&t.content[a]&&t.content[a].filteredString&&""!==t.content[a].filteredString&&(n.filteredString=t.content[a].filteredString),e.push(n)}),e},Le=(t,e)=>["title","excerpt","slug"].includes(e.type)?t[e.type]||!1:e.type&&e.id&&t[e.type]&&t[e.type][e.id]&&t[e.type][e.id]||!1,Re=t=>t.blockRules,Ae=(t,e,a,n=null,r=null)=>["title","excerpt"].includes(e)&&t[e].source===a&&t[e].translatedData&&t[e].translatedData[r]?t[e]?.translatedData[r]||t[e]?.source:"slug"===e&&t.slug.source===a&&t.slug.translatedData&&t.slug.translatedData[r]?void 0!==t.slug?.translatedData[r]?t.slug?.translatedData[r]:t.slug?.source:"metaFields"===e&&t.metaFields&&t.metaFields[n]&&t.metaFields[n].source===a&&t.metaFields[n].translatedData&&t.metaFields[n].translatedData[r]?void 0!==t.metaFields[n]?.translatedData[r]?t.metaFields[n]?.translatedData[r]:t.metaFields[n]?.source:"content"===e&&t.content&&t.content[n]&&t.content[n].source===a&&t.content[n].translatedData&&t.content[n].translatedData[r]?void 0!==t.content[n]?.translatedData[r]?t.content[n]?.translatedData[r]:t.content[n]?.source:a,Ne=t=>({sourceStringCount:t?.translationInfo?.sourceStringCount||0,sourceWordCount:t?.translationInfo?.sourceWordCount||0,sourceCharacterCount:t?.translationInfo?.sourceCharacterCount||0,translateData:t?.translationInfo?.translateData||{}}),De=t=>t.allowedMetaFields||{},Oe=t=>t.contentFetchStatus,{createReduxStore:Fe,register:Ie}=wp.data;Ie(Fe("block-lmatPageTranslation/translate",{reducer:(t=ie,e)=>{switch(e.type){case Ut:return/[\p{L}\p{N}]/gu.test(e.text)?{...t,title:{...t.title,source:e.text}}:t;case zt:return{...t,title:{...t.title,translatedData:{...t.title.translatedData||[],[e.provider]:e.text}}};case Wt:return{...t,title:{...t.title,filteredString:e.text}};case qt:return/[\p{L}\p{N}]/gu.test(e.text)?{...t,excerpt:{...t.excerpt,source:e.text}}:t;case Vt:return{...t,excerpt:{...t.excerpt,translatedData:{...t.excerpt.translatedData||[],[e.provider]:e.text}}};case Qt:return{...t,excerpt:{...t.excerpt,filteredString:e.text}};case re:return{...t,slug:{...t.slug,source:e.text}};case le:return{...t,slug:{...t.slug,translatedData:{...t.slug.translatedData||[],[e.provider]:e.text}}};case oe:return{...t,slug:{...t.slug,filteredString:e.text}};case Yt:return/[\p{L}\p{N}]/gu.test(e.text)?{...t,content:{...t.content,[e.id]:{...t.content[e.id]||[],source:e.text}}}:t;case Zt:return t.content[e.id].source===e.source?{...t,content:{...t.content,[e.id]:{...t.content[e.id]||[],translatedData:{...t.content[e.id].translatedData||[],[e.provider]:e.text}}}}:t;case Jt:return{...t,content:{...t.content,[e.id]:{...t.content[e.id]||[],filteredString:e.text}}};case Xt:return/[\p{L}\p{N}]/gu.test(e.text)?{...t,metaFields:{...t.metaFields,[e.id]:{...t.metaFields[e.id]||[],source:e.text}}}:t;case Kt:return{...t,metaFields:{...t.metaFields,[e.id]:{...t.metaFields[e.id]||[],translatedData:{...t.metaFields[e.id].translatedData||[],[e.provider]:e.text}}}};case te:return{...t,metaFields:{...t.metaFields,[e.id]:{...t.metaFields[e.id]||[],filteredString:e.text}}};case ee:return{...t,blockRules:e.data};case ae:const a={};return e.sourceStringCount&&(a.sourceStringCount=e.sourceStringCount),e.sourceWordCount&&(a.sourceWordCount=e.sourceWordCount),e.sourceCharacterCount&&(a.sourceCharacterCount=e.sourceCharacterCount),(e.targetWordCount||e.targetCharacterCount||e.translateStatus||e.timeTaken)&&e.provider&&(a.translateData={...t.translationInfo?.translateData||{},[e.provider]:{...t.translationInfo?.translateData?.[e.provider]||{},...e.targetStringCount&&{targetStringCount:e.targetStringCount},...e.targetWordCount&&{targetWordCount:e.targetWordCount},...e.targetCharacterCount&&{targetCharacterCount:e.targetCharacterCount},...e.translateStatus&&{translateStatus:e.translateStatus},...e.timeTaken&&{timeTaken:e.timeTaken}}}),{...t,translationInfo:{...t.translationInfo,...a}};case ne:return{...t,allowedMetaFields:{...t.allowedMetaFields,[e.id]:{...t.allowedMetaFields[e.id]||[],inputType:e.inputType,status:e.status}}};case se:return{...t,contentFetchStatus:e.status};default:return t}},actions:n,selectors:r}));const je=(t,e,a,n)=>{const r=(t,e)=>{Object.keys(e).map(a=>{let r=e;r=r[a];const l=new Array(...t,a);n(l,r)})};Object.getPrototypeOf(e)===Array.prototype?((t,e)=>{const l=new Array(...t);let o=a;l.forEach(t=>{o=o[t]}),[null,void 0].includes(o)||(Object.getPrototypeOf(o)!==Object.prototype?(Object.getPrototypeOf(o)===Array.prototype&&o.forEach((t,a)=>{const r=new Array;l.forEach(t=>{r.push(t)}),r.push(a),n(r,e[0])}),"object"!=typeof o||r(t,e[0])):r(t,e[0]))})(t,e):Object.getPrototypeOf(e)===Object.prototype&&r(t,e)},Me=(t,e)=>{Object.keys(e.LmatBlockParseRules).includes(t.name)&&((t,e,a)=>{const n=Object.values(a),r=(a,n)=>{if(!0===n){const n=new Array(...a),r=new Array;let l=e,o=t;n.forEach(t=>{r.push(t),o+=`lmat_page_translation_${t}`,l=l?l[t]:l});let i=l;if(i instanceof wp.richText.RichTextData&&(i=i.originalHTML),void 0!==i&&"string"==typeof i&&""!==i.trim()){let t=o.replace(/[^\p{L}\p{N}]/gu,"");if(!/[\p{L}\p{N}]/gu.test(i))return!1;(0,s.dispatch)("block-lmatPageTranslation/translate").contentSaveSource(t,i)}return}je(a,n,e,r)};n.forEach(t=>{Object.keys(t).forEach(e=>{const a=new Array(e);r(a,t[e])})})})(t.clientId,t.attributes,e.LmatBlockParseRules[t.name])},Ge=(t,e)=>{t.forEach(t=>{Me(t,e),t.innerBlocks&&Ge(t.innerBlocks,e)})},Be=window.wp.blocks,He=async t=>{const e=lmatPageTranslationGlobal.ajax_url;let a=wp.data.select("block-lmatPageTranslation/translate").getBlockRules()||{};const n=[];t.updateDestroyHandler(()=>{n.forEach(t=>{t.abort("Modal Closed")})}),await(async()=>{if(a&&a.LmatBlockParseRules&&Object.keys(a.LmatBlockParseRules).length>0)return;const t={lmat_fetch_block_rules_key:lmatPageTranslationGlobal.fetchBlockRulesNonce,action:lmatPageTranslationGlobal.action_block_rules},r=new AbortController;n.push(r),await fetch(e,{method:"POST",headers:{"content-type":"application/x-www-form-urlencoded; charset=UTF-8",Accept:"application/json"},body:new URLSearchParams(t),signal:r.signal}).then(t=>t.json()).then(t=>{a=JSON.parse(t.data.blockRules),(0,s.dispatch)("block-lmatPageTranslation/translate").setBlockRules(a)}).catch(t=>{console.error("Error fetching post content:",t)})})(),await(async()=>{if((0,s.select)("block-lmatPageTranslation/translate").contentFetchStatus())return;const r={postId:parseInt(t.postId),local:t.targetLang,current_local:t.sourceLang,lmat_page_translation_nonce:lmatPageTranslationGlobal.ajax_nonce,action:lmatPageTranslationGlobal.action_fetch},l=new AbortController;n.push(l),await fetch(e,{method:"POST",headers:{"content-type":"application/x-www-form-urlencoded; charset=UTF-8",Accept:"application/json"},body:new URLSearchParams(r),signal:l.signal}).then(t=>t.json()).then(e=>{if((0,s.select)("block-lmatPageTranslation/translate").contentFetchStatus())return;const n=e.data;n.content&&""!==n.content.trim()&&(n.content=(0,Be.parse)(n.content)),((t,e)=>{Object.keys(t).forEach(a=>{if("content"===a)((t,e)=>{Object.values(t).forEach(t=>{Me(t,e),t.innerBlocks&&Ge(t.innerBlocks,e)})})(t[a],e);else if(["title","excerpt"].includes(a)&&t[a]&&""!==t[a].trim()){const e=`${a}SaveSource`;(0,s.dispatch)("block-lmatPageTranslation/translate")[e](t[a])}"slug_name"===a&&"slug_translate"===lmatPageTranslationGlobal.slug_translation_option&&t[a]&&""!==t[a].trim()&&(0,s.dispatch)("block-lmatPageTranslation/translate").slugSaveSource(t[a])})})(n,a),t.refPostData(n),t.updatePostDataFetch(!0),(0,s.dispatch)("block-lmatPageTranslation/translate").contentFetchStatus(!0)}).catch(t=>{console.error("Error fetching post content:",t)})})()},Ue=(t,e,a,n)=>{const{createBlock:r}=wp.blocks,{name:l,attributes:o}=t;let s={...o},i=t,c="";return Object.keys(a.LmatBlockParseRules).includes(t.name)&&(i=((t,e,a)=>{const{select:n}=wp.data,r=Object.values(e),l=t.attributes,o=t.clientId,s=(e,r)=>{if(!0===r){const r=new Array(...e),s=new Array;let i=l,c=o;r.forEach(t=>{s.push(t),c+=`lmat_page_translation_${t}`,i=i?i[t]:i});let d=i;if(d instanceof wp.richText.RichTextData&&(d=d.originalHTML),void 0!==d&&"string"==typeof d&&""!==d.trim()){let e=c.replace(/[^\p{L}\p{N}]/gu,""),l="";l=/[\p{L}\p{N}]/gu.test(d)?n("block-lmatPageTranslation/translate").getTranslatedString("content",d,e,a):d,t.attributes=((t,e,a)=>{const n={...t};let r=n;for(let t=0;t<e.length-1;t++)Object.getPrototypeOf(r[e[t]])===Array.prototype?r[e[t]]=[...r[e[t]]]:r[e[t]]={...r[e[t]]},r=r[e[t]];return r[e[e.length-1]]instanceof wp.richText.RichTextData?r[e[e.length-1]]=a.replace(/(?<!\\)"|\\"/g,"'"):r[e[e.length-1]]=a,n})(t.attributes,r,l)}return}je(e,r,l,s)};return r.forEach(t=>{Object.keys(t).forEach(e=>{const a=new Array(e);s(a,t[e])})}),t})(t,a.LmatBlockParseRules[t.name],n),s=i.attributes),c=r(l,s,e),c},ze=(t,e,a)=>{let n=t.innerBlocks.map(t=>{if(t.name)return ze(t,e,a)});return Ue(t,n,e,a)},We=t=>{if(!(0,s.dispatch)("yoast-seo/editor"))return;const{updateData:e,setFocusKeyword:a,setBreadcrumbsTitle:n,setFacebookPreviewTitle:r,setFacebookPreviewDescription:l,setTwitterPreviewTitle:o,setTwitterPreviewDescription:i}=(0,s.dispatch)("yoast-seo/editor"),{key:c,value:d}=t;switch(c){case"_yoast_wpseo_focuskw":a&&a(d);break;case"_yoast_wpseo_title":e&&e({title:d});break;case"_yoast_wpseo_metadesc":e&&e({description:d});break;case"_yoast_wpseo_bctitle":n&&n(d);break;case"_yoast_wpseo_opengraph-title":r&&r(d);break;case"_yoast_wpseo_opengraph-description":l&&l(d);break;case"_yoast_wpseo_twitter-title":o&&o(d);break;case"_yoast_wpseo_twitter-description":i&&i(d)}},qe=t=>{if(!(0,s.dispatch)("rank-math"))return;const{updateKeywords:e,updateTitle:a,updateDescription:n,updateBreadcrumbTitle:r,updateFacebookTitle:l,updateFacebookDescription:o,updateTwitterTitle:i,updateTwitterDescription:c}=(0,s.dispatch)("rank-math"),{key:d,value:u}=t;switch(d){case"rank_math_focus_keyword":e&&e(u);break;case"rank_math_title":a&&a(u);break;case"rank_math_description":n&&n(u);break;case"rank_math_breadcrumb_title":r&&r(u);break;case"rank_math_facebook_title":l&&l(u);break;case"rank_math_facebook_description":o&&o(u);break;case"rank_math_twitter_title":i&&i(u);break;case"rank_math_twitter_description":c&&c(u)}},Ve=async t=>{const{key:e,value:a}=t,n=e.replace(/^_/,"")+"_meta";if(document.querySelector("#"+n))switch(e){case"_seopress_titles_title":case"_seopress_titles_desc":case"_seopress_social_fb_title":case"_seopress_social_fb_desc":case"_seopress_social_twitter_title":case"_seopress_social_twitter_desc":jQuery(`#${n}`).val(a),jQuery(`#${n}`).trigger("change");break;case"_seopress_analysis_target_kw":window.target_kw&&window.target_kw instanceof window.Tagify&&window.target_kw.DOM.originalInput.id===n?window.target_kw.addTags(a):(jQuery("#"+n).val(a),jQuery("#"+n).trigger("change"))}},Qe=(t,e)=>{const a=(0,s.select)("block-lmatPageTranslation/translate").getAllowedMetaFields(),n=t,r=(t,e,a)=>{[`[data-depend-id="${t}"]`,`[name="${t}"]`,`[id="${t}"]`].forEach(t=>{document.querySelectorAll(t+':not([type="button"]):not([type="checkbox"]):not([type="radio"])').forEach(t=>{if(t){if(t.value===a)return void(t.value=e);t.querySelectorAll('input:not([type="button"])').forEach(t=>{t.value!==a||(t.value=e)}),t.querySelectorAll("textarea").forEach(t=>{t.value!==a||(t.value=e)})}})})},l=(t,a)=>{Object.keys(a).forEach(o=>{const i=[...t,o],c=i.join("_lmat_page_translation_");if("string"==typeof a[o]){const t=(0,s.select)("block-lmatPageTranslation/translate").getTranslatedString("metaFields",a[o],c,e);let l=n;t&&""!==t&&i.forEach((e,n)=>{if(n===i.length-1)return r(i.join("_"),t,a[e]),r(e,t,a[e]),void(l[e]=t);l.hasOwnProperty(e)||(l[e]={}),l=l[e]})}"object"==typeof a[o]&&Object.keys(a[o]).length>0&&(n[c]=l(i,a[o]))})};return t&&Object.keys(t).length>0&&Object.keys(t).forEach(o=>{if("object"==typeof t[o]&&Object.keys(t[o]).length>0)l([o],t[o]);else if("string"==typeof t[o]&&a[o]&&a[o].status){const a=t[o],l=(0,s.select)("block-lmatPageTranslation/translate").getTranslatedString("metaFields",a,o,e);l&&""!==l&&(r(o,l,a),n[o]=l)}}),n},Ye=t=>{const{editPost:e}=(0,s.dispatch)("core/editor"),{modalClose:a,postContent:n,service:r}=t;(()=>{const t={};if(Object.keys(n).filter(t=>["title","excerpt"].includes(t)).forEach(e=>{const a=n[e];if(""!==a.trim()){const n=(0,s.select)("block-lmatPageTranslation/translate").getTranslatedString(e,a,null,r);t[e]=n}}),e(t),"slug_translate"===lmatPageTranslationGlobal.slug_translation_option){const t=(0,s.select)("block-lmatPageTranslation/translate").getTranslatedString("slug",n.slug_name,null,r);e({slug:t})}if("slug_keep"===lmatPageTranslationGlobal.slug_translation_option){const t=lmatPageTranslationGlobal.slug_name;setTimeout(()=>{e({slug:t})},500)}})(),(()=>{const t=n.metaFields;if(!t||Object.keys(t).length<1)return;const e=(0,s.select)("block-lmatPageTranslation/translate").getAllowedMetaFields();Object.keys(t).forEach(a=>{if(Object.keys(e).includes(a)){const n=(0,s.select)("block-lmatPageTranslation/translate").getTranslatedString("metaFields",t[a],a,r);a.startsWith("_yoast_wpseo_")&&"string"===e[a].inputType?We({key:a,value:n}):a.startsWith("rank_math_")&&"string"===e[a].inputType?qe({key:a,value:n}):a.startsWith("_seopress_")&&"string"===e[a].inputType&&Ve({key:a,value:n})}})})(),(()=>{const t=(0,s.select)("block-lmatPageTranslation/translate").getAllowedMetaFields(),e=n.metaFields;window.acf&&acf.getFields().forEach(a=>{const n=JSON.parse(JSON.stringify({key:a.data.key,type:a.data.type,name:a.data.name}));if(a.$el&&a.$el.closest(".acf-field.acf-field-repeater")&&a.$el.closest(".acf-field.acf-field-repeater").length>0){const t=a.$el.closest(".acf-row").data("id"),e=a.$el.closest(".acf-field.acf-field-repeater").data("name");if(t&&""!==t){const a=t.replace("row-","");n.name=e+"_"+a+"_"+n.name}}if(n&&n.key&&Object.keys(t).includes(n.name)){const t=n.name,l=n.type;let o=e[t]?e[t]:a?.val(),i=(0,s.select)("block-lmatPageTranslation/translate").getTranslatedString("metaFields",o,n.name,r);if(!i||""===i)return;if("wysiwyg"===l&&window.tinymce){const t=a.data.id,e=i.replace(/(\r\n\r\n|\r\n)/g,"</p><p>");tinymce.get(t)?.setContent(e);const n=document.querySelector(`textarea#${t}`);n&&(n.value=i)}else a.val(i)}})})(),(()=>{const t=n.content;t.length<=0||Object.values(t).forEach(t=>{((t,e)=>{const{select:a}=wp.data,n=a("block-lmatPageTranslation/translate").getBlockRules(),{dispatch:r}=wp.data,{name:l}=t;if(l){let a=t.innerBlocks.map(t=>{if(t.name)return ze(t,n,e)});const l=Ue(t,a,n,e);r("core/block-editor").insertBlock(l)}})(t,r)})})(),"false"===lmatPageTranslationGlobal.postMetaSync&&(()=>{const t=window.lmatPageTranslationGlobal.ajax_url,e=window.lmatPageTranslationGlobal.current_post_id,a=window.lmatPageTranslationGlobal.post_meta_fields_key,l=window.lmatPageTranslationGlobal.update_post_meta_fields;if(!e||!a||!l)return;const o={action:l,post_id:e,meta_fields:JSON.stringify(Qe(n.metaFields,r)),post_meta_fields_key:a};fetch(t,{method:"POST",headers:{"content-type":"application/x-www-form-urlencoded; charset=UTF-8",Accept:"application/json"},body:new URLSearchParams(o)}).then(t=>t.json()).then().catch(t=>{console.error("Error:",t)})})(),a()},Ze=async t=>{const e=lmatPageTranslationGlobal.ajax_url,a=[];t.updateDestroyHandler(()=>{a.forEach(t=>{t.abort("Modal Closed")})}),await(async()=>{if((0,s.select)("block-lmatPageTranslation/translate").contentFetchStatus())return;const n={postId:parseInt(t.postId),local:t.targetLang,current_local:t.sourceLang,lmat_page_translation_nonce:lmatPageTranslationGlobal.ajax_nonce,action:lmatPageTranslationGlobal.action_fetch},r=new AbortController;a.push(r),await fetch(e,{method:"POST",headers:{"content-type":"application/x-www-form-urlencoded; charset=UTF-8",Accept:"application/json"},body:new URLSearchParams(n),signal:r.signal}).then(t=>t.json()).then(e=>{if((0,s.select)("block-lmatPageTranslation/translate").contentFetchStatus())return;const a=e.data;(t=>{Object.keys(t).forEach(e=>{if("content"===e)(function(t){const e=[],a=/(\r\n|\r|\n)/g;let n,r=0;for(;null!==(n=a.exec(t));){n.index>r&&e.push(t.slice(r,n.index));const l=n[0];e.push(`lmat_skip_content_open_${l}_lmat_skip_content_end`),r=a.lastIndex}return r<t.length&&e.push(t.slice(r)),e})(t[e]).forEach((t,e)=>{const a=/^&[a-zA-Z0-9#]+;$/.test(t),n=/^<\/?\s*[a-zA-Z0-9#]+\s*\/?>$/.test(t),r=/^<\s*\/?\s*[a-zA-Z0-9#]+\s*><\/\s*\/?\s*[a-zA-Z0-9#]+\s*>$/.test(t),l=/<!--[\s\S]*?-->/g.test(t)&&t.indexOf("\x3c!--")<t.indexOf("--\x3e"),o=!(a||n||r||l);""!==t&&!t.includes("lmat_skip_content_open_")&&o&&(0,s.dispatch)("block-lmatPageTranslation/translate").contentSaveSource("classic_index_"+e,t)});else if(["title","excerpt"].includes(e)){if(t[e]&&""!==t[e].trim()){const a=`${e}SaveSource`;(0,s.dispatch)("block-lmatPageTranslation/translate")[a](t[e])}}else"slug_name"===e&&"slug_translate"===lmatPageTranslationGlobal.slug_translation_option&&t[e]&&""!==t[e].trim()&&(0,s.dispatch)("block-lmatPageTranslation/translate").slugSaveSource(t[e])})})(a),t.refPostData(a),t.updatePostDataFetch(!0),(0,s.dispatch)("block-lmatPageTranslation/translate").contentFetchStatus(!0)}).catch(t=>{console.error("Error fetching post content:",t)})})()},Je=t=>{const{modalClose:e,postContent:a,service:n}=t,r=(0,s.select)("block-lmatPageTranslation/translate").getAllowedMetaFields();(()=>{if("slug_translate"===lmatPageTranslationGlobal.slug_translation_option||"slug_keep"===lmatPageTranslationGlobal.slug_translation_option){let t="";"slug_translate"===lmatPageTranslationGlobal.slug_translation_option&&(t=(0,s.select)("block-lmatPageTranslation/translate").getTranslatedString("slug",a.slug_name,null,n)),"slug_keep"===lmatPageTranslationGlobal.slug_translation_option&&(t=lmatPageTranslationGlobal.slug_name);const e=document.querySelector("#slugdiv"),r=e?.querySelector('input#post_name[name="post_name"]'),l=e?.querySelector("label");r&&(r.value=t),l&&l.classList.add("screen-reader-text")}if(a.title&&""!==a.title.trim()){const t=(0,s.select)("block-lmatPageTranslation/translate").getTranslatedString("title",a.title,null,n),e=document.querySelector("#titlediv"),r=e?.querySelector('input#title[name="post_title"]'),l=e?.querySelector("label");r&&(r.value=t),l&&l.classList.add("screen-reader-text")}if(a.excerpt&&""!==a.excerpt.trim()){const t=(0,s.select)("block-lmatPageTranslation/translate").getTranslatedString("excerpt",a.excerpt,null,n),e=document.querySelector("#postexcerpt.postbox textarea#excerpt");if(e&&(e.value=t),"product"==lmatPageTranslationGlobal.post_type&&window.tinymce){const e=tinymce.get("excerpt"),a=document.querySelector("textarea#excerpt");e&&e.setContent(t),a&&(a.value=t)}}})(),"false"===lmatPageTranslationGlobal.postMetaSync&&((()=>{const t=a.metaFields;t&&Object.keys(t).forEach(e=>{if(Object.keys(r).includes(e)){const a=(0,s.select)("block-lmatPageTranslation/translate").getTranslatedString("metaFields",t[e],e,n);e.startsWith("_yoast_wpseo_")&&"string"===r[e].inputType?We({key:e,value:a}):e.startsWith("rank_math_")&&"string"===r[e].inputType?qe({key:e,value:a}):e.startsWith("_seopress_")&&"string"===r[e].inputType&&Ve({key:e,value:a})}})})(),(()=>{const t=a.metaFields;window.acf&&acf.getFields().forEach(e=>{const a=JSON.parse(JSON.stringify({key:e.data.key,type:e.data.type,name:e.data.name}));let l=!1;if(e.$el&&e.$el.closest(".acf-field.acf-field-repeater")&&e.$el.closest(".acf-field.acf-field-repeater").length>0){const t=e.$el.closest(".acf-row").data("id"),n=e.$el.closest(".acf-field.acf-field-repeater").data("name");if(t&&""!==t){const e=t.replace("row-","");a.name=n+"_"+e+"_"+a.name,l=!0}}if(e.data&&e.data.key&&Object.keys(r).includes(a.name)){const r=e.data.name,l=e.data.type,o=t[r]?t[r]:e?.val(),i=(0,s.select)("block-lmatPageTranslation/translate").getTranslatedString("metaFields",o,a.name,n);if("wysiwyg"===l&&window.tinymce){const t=e.data.id,a=i.replace(/(\r\n\r\n|\r\n)/g,"</p><p>");tinymce.get(t)?.setContent(a);const n=document.querySelector(`textarea#${t}`);n&&(n.value=i)}else e.val(i)}})})(),(()=>{const t=document.querySelector("#postcustomstuff"),e=t?.querySelectorAll('tbody#the-list td.left input[type="text"][value]');e&&e.length>0&&Array.from(e).forEach(t=>{const e=t?.value;if(e&&""!==e&&Object.keys(r).includes(e)){let a=t?.closest("tr").id;if(a=a.replace("meta-",""),a&&""!==a){const t=document.querySelector(`#meta-${a}-value[name="meta[${a}][value]"]`);if(t&&t.value){const a=(0,s.select)("block-lmatPageTranslation/translate").getTranslatedString("metaFields",t.value,e,n);a&&""!==a&&(t.value=a)}}}})})()),(()=>{const t=function(t){const e=[],a=/(\r\n|\r|\n)/g;let n,r=0;for(;null!==(n=a.exec(t));){n.index>r&&e.push(t.slice(r,n.index));const l=n[0];e.push(`lmat_skip_content_open_${l}_lmat_skip_content_end`),r=a.lastIndex}return r<t.length&&e.push(t.slice(r)),e}(a.content),e=[];t.forEach((t,a)=>{const r=/^&[a-zA-Z0-9#]+;$/.test(t),l=/^<\/?\s*[a-zA-Z0-9#]+\s*\/?>$/.test(t),o=/^<\s*\/?\s*[a-zA-Z0-9#]+\s*><\/\s*\/?\s*[a-zA-Z0-9#]+\s*>$/.test(t),i=/<!--[\s\S]*?-->/g.test(t)&&t.indexOf("\x3c!--")<t.indexOf("--\x3e"),c=!(r||l||o||i);if(""!==t&&!t.includes("lmat_skip_content_open_")&&c){const r="classic_index_"+a,l=(0,s.select)("block-lmatPageTranslation/translate").getTranslatedString("content",t,r,n);e.push(l)}else if(t.includes("lmat_skip_content_open_")){const a=t.replace("lmat_skip_content_open_","").replace("_lmat_skip_content_end","");e.push(a)}else e.push(t)});const r=e.join(""),l=document.querySelector("#wp-content-wrap .wp-editor-tabs");if(l){const t=l?.querySelector(".wp-switch-editor.switch-html"),e=l?.querySelector(".wp-switch-editor.switch-tmce");if(t){t.click();const a=document.querySelector("textarea#content");if(a&&(a.value=r),e)return void e.click()}if(e&&window.tinymce)return e.click(),void tinymce.get("content")?.setContent(r)}window.tinymce&&tinymce.get("content")&&tinymce.get("content")?.setContent(r)})(),setTimeout(()=>{e()},500),"false"===lmatPageTranslationGlobal.postMetaSync&&(()=>{const t=window.lmatPageTranslationGlobal.ajax_url,e=window.lmatPageTranslationGlobal.current_post_id,r=window.lmatPageTranslationGlobal.post_meta_fields_key,l=window.lmatPageTranslationGlobal.update_post_meta_fields;if(!e||!r||!l)return;const o={action:l,post_id:e,meta_fields:JSON.stringify(Qe(a.metaFields,n)),post_meta_fields_key:r};fetch(t,{method:"POST",headers:{"content-type":"application/x-www-form-urlencoded; charset=UTF-8",Accept:"application/json"},body:new URLSearchParams(o)}).then(t=>t.json()).then().catch(t=>{console.error("Error:",t)})})(),(()=>{const t=window.lmatPageTranslationGlobal.ajax_url,e=window.lmatPageTranslationGlobal.current_post_id,a=window.lmatPageTranslationGlobal.classic_status_key,n=window.lmatPageTranslationGlobal.action_update_status;fetch(t,{method:"POST",headers:{"content-type":"application/x-www-form-urlencoded; charset=UTF-8",Accept:"application/json"},body:new URLSearchParams({action:n,post_id:e,status:"completed",update_translation_status_key:a})}).then(t=>t.json()).then().catch(t=>{console.error("Error:",t)})})()},Xe=t=>{const e=()=>{const t=document.querySelector(".lmat-page-translation-body-notice-wrapper");if(t){const e=t.offsetHeight+t.offsetTop;t.closest(".modal-body").style.setProperty("--lmat-page-translation-notice-wrapper-height",`${e}px`)}};return(0,d.useEffect)(()=>(t.lastNotice&&(e(),window.addEventListener("resize",e)),()=>{window.removeEventListener("resize",e)}),[t.lastNotice]),React.createElement("div",{className:t.className},t.children)},Ke=async t=>{const e={widgetsContent:lmatPageTranslationGlobal.elementorData&&"string"==typeof lmatPageTranslationGlobal.elementorData?JSON.parse(lmatPageTranslationGlobal.elementorData):lmatPageTranslationGlobal.elementorData};"slug_translate"===lmatPageTranslationGlobal.slug_translation_option&&(e.slug_name=lmatPageTranslationGlobal.slug_name),lmatPageTranslationGlobal.parent_post_title&&""!==lmatPageTranslationGlobal.parent_post_title&&(e.title=lmatPageTranslationGlobal.parent_post_title),(t=>{const e=(t,a,n)=>{t(a[n],n),++n<a.length&&e(t,a,n)},a=(t,e)=>{if("string"==typeof e&&""!==e.trim()&&t.length>0){const a=t.join("_lmat_page_translation_");e&&""!==e&&(0,s.dispatch)("block-lmatPageTranslation/translate").contentSaveSource(a,e)}},n=t=>["title","description","editor","text","content","label"].some(e=>t.toLowerCase().includes(e))||["caption","heading","sub_heading","testimonial_content","testimonial_job","testimonial_name","name"].some(e=>t===e),r=["content_width","title_size","font_size","margin","padding","background","border","color","text_align","font_weight","font_family","line_height","letter_spacing","text_transform","border_radius","box_shadow","opacity","width","height","display","position","z_index","visibility","align","max_width","content_typography_typography","flex_justify_content","title_color","description_color","email_content"],l=(t,o,s=[])=>{const i=t.settings;if(s.push(o),"object"==typeof i&&null!==i&&Object.keys(i).length>0){const t=(t,l)=>{if(!r.some(e=>t.toLowerCase().includes(e))&&(n(t)&&"string"==typeof i[t]&&""!==i[t].trim()&&a([...s,"settings",t],i[t]),Array.isArray(i[t])&&i[t].length>0)){const l=(l,o)=>{"object"==typeof l&&null!==l&&e(e=>{r.includes(e.toLowerCase())||n(e)&&"string"==typeof l[e]&&""!==l[e].trim()&&a([...s,"settings",t,o,e],l[e])},Object.keys(l),0)};e(l,i[t],0)}};e(t,Object.keys(i),0)}if(t.elements&&Array.isArray(t.elements)&&t.elements.length>0){const a=(t,e)=>{l(t,e,[...s,"elements"])};e(a,t.elements,0)}};if(t.widgetsContent&&t.widgetsContent.length>0&&e((t,e)=>{l(t,e,[])},t.widgetsContent,0),t.title&&""!==t.title){const e=lmatPageTranslationGlobal.current_post_id;if(e){const a=elementor?.settings?.page?.model?.get("post_title");a&&""!==a&&a===`Elementor #${e}`&&(0,s.dispatch)("block-lmatPageTranslation/translate").titleSaveSource(t.title)}}"slug_translate"===lmatPageTranslationGlobal.slug_translation_option&&(0,s.dispatch)("block-lmatPageTranslation/translate").slugSaveSource(t.slug_name)})(e),t.refPostData(e),t.updatePostDataFetch(!0)},ta=(t,e)=>{for(const a of t){if(a.get("id")===e)return a;const t=a.get("elements").models,n=ta(t,e);if(n)return n}return null},ea=({postContent:t,modalClose:e,service:a})=>{const n=elementor.config.document.id,r=[],l=["content_width","title_size","font_size","margin","padding","background","border","color","text_align","font_weight","font_family","line_height","letter_spacing","text_transform","border_radius","box_shadow","opacity","width","height","display","position","z_index","visibility","align","max_width","content_typography_typography","flex_justify_content","title_color","description_color","email_content"],o=t=>["title","description","editor","text","content","label"].some(e=>t.toLowerCase().includes(e))||["caption","heading","sub_heading","testimonial_content","testimonial_job","testimonial_name","name"].some(e=>t===e),i=(t,e,n=[])=>{const c=t.id,d=t.settings;n.push(e),"object"==typeof d&&null!==d&&Object.keys(d).forEach(t=>{if(!l.some(e=>t.toLowerCase().includes(e))){if(o(t)&&"string"==typeof d[t]&&""!==d[t].trim()){const e=n.join("_lmat_page_translation_")+"_lmat_page_translation_settings_lmat_page_translation_"+t,l=(0,s.select)("block-lmatPageTranslation/translate").getTranslatedString("content",d[t],e,a);r.push({ID:c,key:t,translatedContent:l})}Array.isArray(d[t])&&d[t].forEach((e,i)=>{"object"==typeof e&&null!==e&&Object.keys(e).forEach(d=>{if(!l.includes(d.toLowerCase())&&o(d)&&"string"==typeof e[d]&&""!==e[d].trim()){const l=`${t}[${i}].${d}`,o=n.join("_lmat_page_translation_")+"_lmat_page_translation_settings_lmat_page_translation_"+t+"_lmat_page_translation_"+i+"_lmat_page_translation_"+d,u=(0,s.select)("block-lmatPageTranslation/translate").getTranslatedString("content",e[d],o,a);r.push({ID:c,key:l,translatedContent:u})}})})}}),t.elements&&Array.isArray(t.elements)&&t.elements.forEach((t,e)=>{i(t,e,[...n,"elements"])})};t.widgetsContent.map((t,e)=>i(t,e,[])),(t=>{t.forEach(t=>{const e=ta(elementor.elements.models,t.ID);if(e){const a=e.get("settings");a.get(t.key)&&(a.set(t.key,t.translatedContent),e?.renderRemoteServer());const n=t.key.match(/(.+)\[(\d+)\]\.(.+)/);if(n){const[r,l,o,s]=n,i=a.get(l);Array.isArray(i.models)&&i.models[o]&&(i.models[o].attributes[s]=t.translatedContent,a.set(l,i),e?.renderRemoteServer())}}}),$e.internal("document/save/set-is-modified",{status:!0})})(r),((t,e)=>{const a=(0,s.select)("block-lmatPageTranslation/translate").getAllowedMetaFields();t&&Object.keys(t).forEach(n=>{if(Object.keys(a).includes(n)){const r=(0,s.select)("block-lmatPageTranslation/translate").getTranslatedString("metaFields",t[n],n,e);n.startsWith("_yoast_wpseo_")&&"string"===a[n].inputType?We({key:n,value:r}):n.startsWith("rank_math_")&&"string"===a[n].inputType?qe({key:n,value:r}):n.startsWith("_seopress_")&&"string"===a[n].inputType&&elementor?.settings?.page?.model?.setExternalChange(n,r)}})})(t.metaFields,a),((t,e)=>{if(t&&""!==t){const a=(0,s.select)("block-lmatPageTranslation/translate").getTranslatedString("title",t,null,e);a&&""!==a&&elementor?.settings?.page?.model?.setExternalChange("post_title",a)}})(t.title,a);const c=(()=>{const t=lmatPageTranslationGlobal.elementorData;return wp.data.select("block-lmatPageTranslation/translate").getTranslationEntries().forEach(e=>{const n=e.source,r=e.id,l=e.translatedData,o=e.type;if(!n||""===n||"content"!==o)return;const s=r.split("_lmat_page_translation_"),i=l[a];let c=null,d=null,u=t;s.forEach(t=>{c=u,d=t,u=u?u[t]:null}),c&&d&&c[d]&&c[d]===n&&(c[d]=i)}),t})(),d={action:lmatPageTranslationGlobal.update_elementor_data,post_id:n,elementor_data:JSON.stringify(c),lmat_page_translation_nonce:lmatPageTranslationGlobal.ajax_nonce,parent_post_id:lmatPageTranslationGlobal.parent_post_id};if(t.slug_name&&""!==t.slug_name&&"slug_translate"===lmatPageTranslationGlobal.slug_translation_option){const e=t.slug_name,n=(0,s.select)("block-lmatPageTranslation/translate").getTranslatedString("slug",e,null,a);n&&""!==n&&(d.post_name=n)}"false"===lmatPageTranslationGlobal.postMetaSync&&(d.meta_fields=JSON.stringify(Qe(t.metaFields,a))),fetch(lmatPageTranslationGlobal.ajax_url,{method:"POST",headers:{"content-type":"application/x-www-form-urlencoded; charset=UTF-8",Accept:"application/json"},body:new URLSearchParams(d)}).then(t=>t.json()).then(t=>{if(t.success){const t=document.querySelector('.lmat-page-translation-button[name="lmat_page_translation_meta_box_translate"]');t&&t.setAttribute("title","Translation process completed successfully.")}else console.error("Failed to update Elementor data:",t.data);e()}).catch(t=>{e(),console.error("Error updating Elementor data:",t)})},aa=async t=>{const e=lmatPageTranslationGlobal.ajax_url,a=[];t.updateDestroyHandler(()=>{a.forEach(t=>{t.abort("Modal Closed")})}),await(async()=>{if((0,s.select)("block-lmatPageTranslation/translate").contentFetchStatus())return;const n={postId:parseInt(t.postId),local:t.targetLang,current_local:t.sourceLang,lmat_page_translation_nonce:lmatPageTranslationGlobal.ajax_nonce,action:lmatPageTranslationGlobal.action_fetch},r=new AbortController;a.push(r),await fetch(e,{method:"POST",headers:{"content-type":"application/x-www-form-urlencoded; charset=UTF-8",Accept:"application/json"},body:new URLSearchParams(n),signal:r.signal}).then(t=>t.json()).then(e=>{if((0,s.select)("block-lmatPageTranslation/translate").contentFetchStatus())return;const a=e.data;(t=>{Object.keys(t).forEach(e=>{if("content"===e)(t=>{if(!t||""===t.trim())return;const e=/\[lmat_val[^\]]*?id=["'](___LMAT_[a-f0-9]{32}___)["'][^\]]*?\](.*?)\[\/lmat_val\]/gis;let a,n=0;for(;null!==(a=e.exec(t));){const t=a[1],e=a[2];if(!e||""===e.trim())continue;const r=`wpbakery_lmat_val_${n}_${t}`;(0,s.dispatch)("block-lmatPageTranslation/translate").contentSaveSource(r,e),n++}})(t[e]);else if(["title","excerpt"].includes(e)){if(t[e]&&""!==t[e].trim()){const a=`${e}SaveSource`;(0,s.dispatch)("block-lmatPageTranslation/translate")[a](t[e])}}else"slug_name"===e&&"slug_translate"===lmatPageTranslationGlobal.slug_translation_option&&t[e]&&""!==t[e].trim()&&(0,s.dispatch)("block-lmatPageTranslation/translate").slugSaveSource(t[e])})})(a),t.refPostData(a),t.updatePostDataFetch(!0),(0,s.dispatch)("block-lmatPageTranslation/translate").contentFetchStatus(!0)}).catch(t=>{console.error("Error fetching WPBakery post content:",t)})})()},na=({postContent:t,modalClose:e,service:a})=>{const n=lmatPageTranslationGlobal.current_post_id,r=(0,s.select)("block-lmatPageTranslation/translate").getAllowedMetaFields(),l=()=>{const t=document.getElementById("save-post");t&&t.click()};try{(()=>{if(!t.title||""===t.title.trim())return;const e=(0,s.select)("block-lmatPageTranslation/translate").getTranslatedString("title",t.title,null,a);if(!e||""===e.trim())return;const n=document.querySelector('input#title[name="post_title"]');n&&(n.value=e);const r=document.querySelector("#titlediv label");r&&r.classList.add("screen-reader-text")})(),(()=>{if(!t.slug_name||""===t.slug_name.trim())return;let e="";if("slug_translate"===lmatPageTranslationGlobal.slug_translation_option?e=(0,s.select)("block-lmatPageTranslation/translate").getTranslatedString("slug",t.slug_name,null,a):"slug_keep"===lmatPageTranslationGlobal.slug_translation_option&&(e=lmatPageTranslationGlobal.slug_name),!e||""===e.trim())return;const n=document.querySelector('input#post_name[name="post_name"]');n&&(n.value=e);const r=document.querySelector("#slugdiv label");r&&r.classList.add("screen-reader-text")})(),(()=>{if(!t.excerpt||""===t.excerpt.trim())return;const e=(0,s.select)("block-lmatPageTranslation/translate").getTranslatedString("excerpt",t.excerpt,null,a);if(!e||""===e.trim())return;const n=document.querySelector("textarea#excerpt");if(n&&(n.value=e),"product"===lmatPageTranslationGlobal.post_type&&window.tinymce){const t=tinymce.get("excerpt");t&&t.setContent(e)}})(),(()=>{if(!t.content||""===t.content.trim())return;let e=(t=>{if(!t||""===t.trim())return t;const e=/\[lmat_val[^\]]*?id=["'](___LMAT_[a-f0-9]{32}___)["'][^\]]*?\](.*?)\[\/lmat_val\]/gis;let n,r=t,l=0;const o=[],i=[];for(;null!==(n=e.exec(t));){const e=n[0],r=n[1],c=n[2];if(!c||""===c.trim())continue;const d=`wpbakery_lmat_val_${l}_${r}`,u=(0,s.select)("block-lmatPageTranslation/translate").getTranslatedString("content",c,d,a);u&&(t.replace(e,"").includes(r)?i.push({token:r,translatedValue:u}):o.push({fullMatch:e,translatedValue:u})),l++}return o.forEach(t=>{r=r.replace(t.fullMatch,t.translatedValue)}),i.forEach(t=>{const e=new RegExp(t.token.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"g");r=r.replace(e,t.translatedValue)}),r=r.replace(/\s*\[lmat_val[^\]]*?\].*?\[\/lmat_val\]/gis,""),r})(t.content);const n=document.querySelector("#wp-content-wrap");if(n){const t=n.querySelector(".wp-switch-editor.switch-html"),a=n.querySelector(".wp-switch-editor.switch-tmce");if(t){t.click();const n=document.querySelector("textarea#content");n&&(n.value=e),a&&setTimeout(()=>{a.click()},100)}else window.tinymce&&tinymce.get("content")&&tinymce.get("content").setContent(e)}const r=document.querySelector("textarea#content");r&&(r.value=e),l()})(),"false"===lmatPageTranslationGlobal.postMetaSync&&((()=>{const e=t.metaFields;e&&Object.keys(e).forEach(t=>{if(!Object.keys(r).includes(t))return;const n=(0,s.select)("block-lmatPageTranslation/translate").getTranslatedString("metaFields",e[t],t,a);t.startsWith("_yoast_wpseo_")&&"string"===r[t].inputType?We({key:t,value:n}):t.startsWith("rank_math_")&&"string"===r[t].inputType?qe({key:t,value:n}):t.startsWith("_seopress_")&&"string"===r[t].inputType&&Ve({key:t,value:n})})})(),(()=>{const e=t.metaFields;window.acf&&e&&acf.getFields().forEach(t=>{const n=JSON.parse(JSON.stringify({key:t.data.key,type:t.data.type,name:t.data.name}));if(t.$el&&t.$el.closest(".acf-field.acf-field-repeater").length>0){const e=t.$el.closest(".acf-row").data("id"),a=t.$el.closest(".acf-field.acf-field-repeater").data("name");if(e&&""!==e){const t=e.replace("row-","");n.name=a+"_"+t+"_"+n.name}}if(t.data&&t.data.key&&Object.keys(r).includes(n.name)){const r=e[t.data.name]?e[t.data.name]:t.val(),l=(0,s.select)("block-lmatPageTranslation/translate").getTranslatedString("metaFields",r,n.name,a);if("wysiwyg"===t.data.type&&window.tinymce){const e=t.data.id,a=l.replace(/(\r\n\r\n|\r\n)/g,"</p><p>"),n=tinymce.get(e);n&&n.setContent(a);const r=document.querySelector(`textarea#${e}`);r&&(r.value=l)}else t.val(l)}})})()),setTimeout(async()=>{"false"===lmatPageTranslationGlobal.postMetaSync&&await(async()=>{if(!lmatPageTranslationGlobal.update_post_meta_fields||!lmatPageTranslationGlobal.post_meta_fields_key)return;const e={action:lmatPageTranslationGlobal.update_post_meta_fields,post_id:n,meta_fields:JSON.stringify(Qe(t.metaFields,a)),post_meta_fields_key:lmatPageTranslationGlobal.post_meta_fields_key};try{const t=await fetch(lmatPageTranslationGlobal.ajax_url,{method:"POST",headers:{"content-type":"application/x-www-form-urlencoded; charset=UTF-8",Accept:"application/json"},body:new URLSearchParams(e)});if(!(await t.json()).success)throw new Error("Failed to save meta fields")}catch(t){throw new Error("Error saving meta fields")}})(),await(async()=>{const t={action:lmatPageTranslationGlobal.action_update_status||"lmat_update_classic_translate_status",post_id:n,status:"completed",lmat_classic_translate_nonce:lmatPageTranslationGlobal.classic_status_key};try{const e=await fetch(lmatPageTranslationGlobal.ajax_url,{method:"POST",headers:{"content-type":"application/x-www-form-urlencoded; charset=UTF-8",Accept:"application/json"},body:new URLSearchParams(t)}),a=await e.json();if(a.success){const t=document.querySelector('button#lmat-page-translation-button[name="lmat_page_translation_meta_box_translate"]');t&&(t.setAttribute("title","Translation process completed successfully."),t.disabled=!0)}else console.error("Failed to update translation status:",a)}catch(t){console.error("Error updating translation status:",t)}})(),e()},500)}catch(t){console.error("Error during WPBakery translation:",t),e()}},ra=window.lmatPageTranslationGlobal.editor_type,la=()=>{let t=new Array;t.push('\x3c!-- The Modal --\x3e<div id="lmat-page-translation-setting-modal"></div>','<div id="lmat_page_translation_strings_model" class="modal lmat_page_translation_custom_model"></div>'),t.forEach(t=>{document.body.insertAdjacentHTML("beforeend",t)})},oa=()=>{const t=[];if("true"===lmatPageTranslationGlobal.postMetaSync&&t.push({className:"lmat-page-translation-notice lmat-page-translation-notice-error",message:React.createElement("p",null,(0,i.__)("For accurate custom field translations, please disable the Custom Fields synchronization in ","linguator-multilingual-ai-translation"),React.createElement("a",{href:`${lmatPageTranslationGlobal.admin_url}admin.php?page=lmat_settings`,target:"_blank",rel:"noopener noreferrer"},(0,i.__)("Linguator settings","linguator-multilingual-ai-translation")),(0,i.__)(". This may affect linked posts or pages.","linguator-multilingual-ai-translation"))}),"gutenberg"===ra){const e=(0,s.select)("block-lmatPageTranslation/translate").getBlockRules();e.LmatBlockParseRules&&0!==Object.keys(e.LmatBlockParseRules).length||t.push({className:"lmat-page-translation-notice lmat-page-translation-notice-error",message:React.createElement("p",null,(0,i.__)("No block rules were found. It appears that the block-rules.JSON file could not be fetched, possibly because it is blocked by your server settings. Please check your server configuration to resolve this issue.","linguator-multilingual-ai-translation"))})}"classic"===ra&&"true"===lmatPageTranslationGlobal.blockCommentTag&&t.push({className:"lmat-page-translation-notice lmat-page-translation-notice-error",message:React.createElement("p",null,(0,i.__)("This page may contain Gutenberg block content. After the translation, please review the updated content before finalizing the page update.","linguator-multilingual-ai-translation"))}),"wpbakery"===ra&&t.push({className:"lmat-page-translation-notice lmat-page-translation-notice-info",message:React.createElement("p",null,(0,i.__)("WPBakery Page Builder content will be translated. Please save the page after translation to apply changes.","linguator-multilingual-ai-translation"))});const e=t.length;if(t.length>0)return t.map((t,a)=>React.createElement(Xe,{className:t.className,key:a,lastNotice:a===e-1},t.message))},sa=()=>{const[t,e]=(0,d.useState)(!1),a=window.lmatPageTranslationGlobal.target_lang,n=window.lmatPageTranslationGlobal.parent_post_id,r=window.lmatPageTranslationGlobal.current_post_id,l=window.lmatPageTranslationGlobal.post_type;let o,c,u;const g=window.lmatPageTranslationGlobal.source_lang;"elementor"===ra?(u='button.lmat-page-translation-button[name="lmat_page_translation_meta_box_translate"]',o=ea,c=Ke):"gutenberg"===ra?(u='input#lmat-page-translation-button[name="lmat_page_translation_meta_box_translate"]',o=Ye,c=He):"classic"===ra?(u='button#lmat-page-translation-button[name="lmat_page_translation_meta_box_translate"]',o=Je,c=Ze):"wpbakery"===ra&&(u='button#lmat-page-translation-button[name="lmat_page_translation_meta_box_translate"]',o=na,c=aa);const[m,p]=(0,d.useState)(!1),[h,f]=(0,d.useState)(!0);if((0,d.useEffect)(()=>{if(t){const t=document.querySelector(u);t&&(t.disabled=!0,t.value=(0,i.__)("Already Translated","linguator-multilingual-ai-translation"))}},[t]),!g||""===g){const t=document.querySelector(u);return void(t&&(t.title=`Parent ${window.lmatPageTranslationGlobal.post_type} may be deleted.`,t.disabled=!0))}return React.createElement(React.Fragment,null,!t&&g&&""!==g&&React.createElement(Ht,{contentLoading:h,updatePostDataFetch:t=>{p(t),f(!1)},postDataFetchStatus:m,pageTranslate:t=>{e(t)},postId:n,currentPostId:r,targetLang:a,postType:l,fetchPostData:async t=>{await(async t=>{const e=window?.lmatPageTranslationGlobal?.ajax_url,a=[];if((0,s.select)("block-lmatPageTranslation/translate").contentFetchStatus())return;t.updateDestroyHandler(()=>{a.forEach(t=>{t.abort("Modal Closed")})});const n=({key:t,value:e,type:a,status:n,allowedMetaFields:r})=>{/^\d{1,2}\/\d{1,2}\/\d{4}(?:\s+\d{1,2}:\d{2}\s*(?:AM|PM)?)?$/i.test(e)||/^[0-9.\- _#!$%^&*()+~`]+$/.test(e)||((0,s.dispatch)("block-lmatPageTranslation/translate").allowedMetaFields({id:t,type:a,status:n}),(0,s.dispatch)("block-lmatPageTranslation/translate").metaFieldsSaveSource(t,e))},r=(t,e,a)=>{Object.keys(e).forEach(l=>{const o=[...t,l],s=o.join("_lmat_page_translation_");if("string"==typeof e[l]){const r=e[l];n({key:s,value:r,type:"string",status:a[t[0]].status,allowedMetaFields:a})}else"object"==typeof e[l]&&Object.keys(e[l]).length>0&&r(o,e[l],a)})};"false"===window?.lmatPageTranslationGlobal?.postMetaSync&&await(async()=>{const l=window?.lmatPageTranslationGlobal?.get_meta_fields,o=window?.lmatPageTranslationGlobal?.meta_fields_key,s=parseInt(t.postId);if(!l||!o||!s)return;const i=new AbortController;a.push(i);const c=await fetch(e,{method:"POST",headers:{"content-type":"application/x-www-form-urlencoded; charset=UTF-8",Accept:"application/json"},body:new URLSearchParams({action:l,meta_fields_key:o,postId:s}),headers:{"content-type":"application/x-www-form-urlencoded; charset=UTF-8",Accept:"application/json"},signal:i.signal}),d=await c.json(),u=d?.data?.metaFields,g=d?.data?.allowedMetaFields;u&&Object.keys(u).length>0&&Object.keys(u).forEach(t=>{if(g[t]&&g[t].status)if("string"==typeof u[t]){const e=u[t];n({key:t,value:e,type:g[t].type,status:g[t].status,allowedMetaFields:g})}else"object"==typeof u[t]&&Object.keys(u[t]).length>0&&r([t],u[t],g)}),t.refPostData({metaFields:u})})()})(t),await c(t);const e=wp.data.select("block-lmatPageTranslation/translate").getTranslationEntries();let a=0,n=0,r=0;e.map(t=>{const e=t.source?t.source:"",l=e.split(/(?<=[.!?]+)\s+/).length,o=e.trim().split(/\s+/).filter(t=>/[^\p{L}\p{N}]/.test(t)).length,s=e.length;a+=l,n+=s,r+=o}),wp.data.dispatch("block-lmatPageTranslation/translate").translationInfo({sourceStringCount:a,sourceWordCount:r,sourceCharacterCount:n})},translatePost:o,translateWrpSelector:u,stringModalBodyNotice:oa}))},ia=()=>{const t=document.getElementById("lmat-page-translation-setting-modal"),e=(()=>{const t=window.lmatPageTranslationGlobal.post_type,e=window.lmatPageTranslationGlobal.target_lang,a=lmatPageTranslationGlobal.languageObject[e].name,n=document.createElement("div");return n.id="lmat-page-translation-modal-open-warning-wrapper",n.innerHTML=`\n    <div class="modal-container" style="display: flex">\n      <div class="modal-content">\n        <p>${wp.i18n.sprintf(wp.i18n.__("Would you like to duplicate your original %s content and have it automatically translated into %s?","linguator-multilingual-ai-translation"),t,a)}</p>\n        <div>\n          <div data-value="yes">${wp.i18n.__("Yes","linguator-multilingual-ai-translation")}</div>\n          <div data-value="no">${wp.i18n.__("No","linguator-multilingual-ai-translation")}</div>\n        </div>\n      </div>\n    </div>`,n})();document.body.insertBefore(e,t)},ca=()=>{const t=jQuery(".MuiButtonGroup-root.MuiButtonGroup-contained").parent(),e=jQuery(t).find(".elementor-button.lmat-page-translation-button");if(t.length>0&&0===e.length){const e=jQuery('<button class="elementor-button lmat-page-translation-button" name="lmat_page_translation_meta_box_translate">Translate</button>');let a=!1;const n=window.lmatPageTranslationGlobal.current_post_id,r=window.lmatPageTranslationGlobal.target_lang,o=localStorage.getItem("lmatElementorConfirmBox");if(o&&"string"==typeof o&&""!==o&&(a=JSON.parse(o)),t.prepend(e),$e.internal("document/save/set-is-modified",{status:!0}),!window.lmatPageTranslationGlobal.elementorData||""===window.lmatPageTranslationGlobal.elementorData||window.lmatPageTranslationGlobal.elementorData.length<1||elementor.elements.length<1)return a&&a[n+"_"+r]&&(delete a[n+"_"+r],0===Object.keys(a).length?localStorage.removeItem("lmatElementorConfirmBox"):localStorage.setItem("lmatElementorConfirmBox",JSON.stringify(a))),e.attr("disabled","disabled"),void e.attr("title","Translation is not available because there is no Elementor data.");la(),l.createRoot(document.getElementById("lmat-page-translation-setting-modal")).render(React.createElement(sa,null)),a&&a[n+"_"+r]&&setTimeout(()=>{e.trigger("click"),delete a[n+"_"+r],0===Object.keys(a).length?localStorage.removeItem("lmatElementorConfirmBox"):localStorage.setItem("lmatElementorConfirmBox",JSON.stringify(a))},100)}};"gutenberg"===ra&&window.addEventListener("load",()=>{la();const t=window.lmatPageTranslationGlobal.source_lang,e=window.lmatPageTranslationGlobal.providers;t&&""!==t&&e.length>0&&ia(),l.createRoot(document.getElementById("lmat-page-translation-setting-modal")).render(React.createElement(sa,null))}),"classic"===ra&&window.addEventListener("load",()=>{la();const t=window.lmatPageTranslationGlobal.source_lang,e=window.lmatPageTranslationGlobal.providers;t&&""!==t&&e.length>0&&ia(),l.createRoot(document.getElementById("lmat-page-translation-setting-modal")).render(React.createElement(sa,null))}),"elementor"===ra&&jQuery(window).on("elementor:init",function(){elementor.on("document:loaded",ca)}),"wpbakery"===ra&&window.addEventListener("load",()=>{la();const t=window.lmatPageTranslationGlobal.source_lang,e=window.lmatPageTranslationGlobal.providers;t&&""!==t&&e.length>0&&ia(),l.createRoot(document.getElementById("lmat-page-translation-setting-modal")).render(React.createElement(sa,null))})})();